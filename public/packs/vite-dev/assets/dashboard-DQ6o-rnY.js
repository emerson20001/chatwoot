const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EmojiInput-Bi8nyPcY.js","assets/typing-BFENwHg8.js","assets/Validators-BM89Tp7H.js","assets/_plugin-vue_export-helper-DG4P_01H.js","assets/index-DN3rM4CW.js","assets/_commonjsHelpers-BosuxZz1.js","assets/index-BrJsJnGg.js","assets/useBranding-CBxaH_1a.js","assets/utils.esm-DGys-UJ9.js","assets/useBranding-aTKfDg_G.css","assets/index-CMsfCoUB.js","assets/vue-dompurify-html-CEAHYyWB.js","assets/module-CxJOWM_e.js","assets/Icon-Br_HG2DA.js","assets/EmojiInput-CJkipHgI.css","assets/PortalsArticlesIndexPage-BGINfHOt.js","assets/HelpCenterLayout-XWan7oYZ.js","assets/DashboardIcon-B1kA0qZ4.js","assets/js.cookie-Cz0CWeBA.js","assets/index-C7w1By4V.js","assets/DashboardIcon-Q9LE-ZWn.css","assets/CategoryHeaderControls-CxaBscFj.js","assets/CategoryHeaderControls-nLd8rpU7.css","assets/useKeyboardNavigableList-BHsyEIUr.js","assets/helper-BVTgYTlr.js","assets/BarChart-D-eGs9nq.js","assets/constants-lVAyZKq6.js","assets/IframeLoader-CT3wwgKY.js","assets/PortalsArticlesIndexPage-Dz6Zpu1T.css","assets/PortalsArticlesNewPage-DK1t1zKF.js","assets/ArticleEditor-CmrZkynV.js","assets/ArticleEditor-QP3vQWC_.css","assets/PortalsArticlesEditPage-aoac-HIl.js","assets/PortalsCategoriesIndexPage-DvLRwBgd.js","assets/PortalsLocalesIndexPage-Cw9g2ZfA.js","assets/PortalsSettingsIndexPage-CH1_B0AG.js","assets/PortalsSettingsIndexPage-CNO_7cB-.css","assets/commandbar-SjAndIwe.js","assets/commandbar-DaCNDihA.css"])))=>i.map(i=>d[i]);
var vN=Object.defineProperty;var EN=(e,t,n)=>t in e?vN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Qt=(e,t,n)=>EN(e,typeof t!="symbol"?t+"":t,n);import{d as Jo,h as On,r as j,w as it,c as y,a as L,o as p,b as We,e as S,f as Ve,g as $,i as re,v as rn,F as ue,j as Ae,t as I,k as wn,T as Ys,l as Y,m as xe,n as E,p as m,q as ae,s as tS,u as nS,x as W,y as Qn,z as Zt,A as Wt,B as sS,C as aS,D as oS,E as iS,G as lS,H as C,_ as De,I as Qe,J as jt,K as Xt,L as lt,M as gt,N as Ss,O as Hn,P as Ro,Q as Ar,R as ei,S as ds,U as rS,V as cS,W as Nn,X as Qd,Y as gn,Z as co,$ as dn,a0 as og,a1 as ig,a2 as uS,a3 as Na,a4 as cr,a5 as dS,a6 as bN,a7 as Sv,a8 as TN,a9 as SN,aa as AN,ab as om,ac as lg,ad as rg,ae as yN,af as pS,ag as Kl}from"./_plugin-vue_export-helper-DG4P_01H.js";import{u as be,m as mt,S as Ls,e as Dt,a as pn,b as rt,c as _e,M as IN,d as $c,f as Wa,g as na,I as mS,C as cl,h as Oi,i as Hs,A as CN,j as Js,k as NN,l as hS,T as mf,D as fS,r as gS,n as im,o as ON}from"./useBranding-CBxaH_1a.js";import{g as RN,c as xN,f as cg,a as wN,d as Ua,b as _S,p as ug,e as dg,h as $N,i as vS,j as MN,k as ES,l as LN,r as DN,m as PN,t as kN,n as BN,o as UN,q as FN,s as GN,u as pg,v as VN,w as HN,x as WN,y as zN}from"./utils.esm-DGys-UJ9.js";import{g as mg,a as YN,c as jN}from"./_commonjsHelpers-BosuxZz1.js";import{a as Mc,s as xo,e as Ia,i as KN,p as lc,B as XN,_ as kt,u as so,b as hg,c as qN,g as ZN,t as QN,d as Av,f as yv,h as JN,F as eO,j as Ed,k as bd,l as Ao,m as tO,n as Ts,o as nO,M as vo,q as ti,r as sO,v as aO,w as oO,x as iO}from"./index-BrJsJnGg.js";import{u as wt,_ as dt,i as no,f as Yn,s as Cs,B as un,L as ka,a as Ft,w as yt,c as yr,g as fg,b as gg,d as _g,e as Iv,h as lO,j as rO,k as rc,l as cO,m as Cv,n as uO,o as dO,p as pO}from"./Validators-BM89Tp7H.js";import{_ as te,r as Ye,u as bt,a as An,d as bS,e as Li,m as en,c as _c,b as Qc,f as TS,g as SS,h as mO,i as Ei,n as hO}from"./index-CMsfCoUB.js";import{c as _a,u as ur,a as dr,g as fO,b as vg,h as Eg,R as qn,C as Ms,d as Xl,e as gO,P as ql,L as ao,f as ln,S as cc,i as _O,A as hl,D as vO,j as Ea,k as EO,l as yn,v as ms,_ as ta,m as vt,n as ni,o as Nv,p as $n,q as Di,r as pr,s as bO,t as TO,w as ea,x as SO,y as yo,z as AO,B as Ir,I as St,E as yO,F as IO,G as CO,H as NO,J as OO,K as Tu,M as er,N as Jc,O as RO,Q as xO,T as wO,U as $O,V as MO,W as LO,X as Wr,Y as DO,Z as PO,$ as kO,a0 as Ov,a1 as BO,a2 as UO,a3 as FO,a4 as fl,a5 as gl,a6 as GO,a7 as Td,a8 as bg,a9 as VO,aa as HO,ab as WO,ac as zO,ad as AS,ae as YO,af as jO,ag as Sd,ah as Vs,ai as Rv,aj as KO,ak as XO,al as qO,am as ZO,an as Jd,ao as eu,ap as Ad,aq as QO,ar as JO,as as eR,at as ep,au as tu,av as hf,aw as tr,ax as Tg,ay as xv,az as tR,aA as ol,aB as nR,aC as wv,aD as Sg,aE as Ag,aF as sR,aG as aR,aH as yS,aI as oR,aJ as iR,aK as lR,aL as rR,aM as cR,aN as uR,aO as dR,aP as pR,aQ as mR}from"./DashboardIcon-B1kA0qZ4.js";import{u as ne,a as zt,A as hR}from"./index-C7w1By4V.js";import{r as IS,d as CS,c as ff,a as fR,b as NS,e as OS,i as lm,f as gR,g as ul,h as bi,j as Io,k as _R,P as vR,l as ER,D as bR,m as TR,S as $v,E as SR,n as AR,M as Mv,o as rm,p as yR,q as IR,s as CR,t as NR,u as OR,v as RR,w as xR,x as yd,y as tp,R as yg,z as us,A as Lv,B as Lc,F as RS,C as Ig,G as wR,H as $R,I as MR,_ as LR,J as DR}from"./typing-BFENwHg8.js";import{u as Os,a as Cg,h as PR,b as kR,i as BR,c as UR,d as FR,L as GR,k as VR,e as HR}from"./useKeyboardNavigableList-BHsyEIUr.js";import{c as Fa,g as xS,a as wS}from"./helper-BVTgYTlr.js";import{r as Rn,t as vn,a as kn}from"./index-DN3rM4CW.js";import{l as Ng,g as WR}from"./Icon-Br_HG2DA.js";import{u as sa,M as np,k as zR}from"./vue-dompurify-html-CEAHYyWB.js";import{F as cm,d as YR,a as jR}from"./module-CxJOWM_e.js";import{_ as $S}from"./BarChart-D-eGs9nq.js";import{M as Dv}from"./constants-lVAyZKq6.js";import{_ as KR}from"./IframeLoader-CT3wwgKY.js";import"./js.cookie-Cz0CWeBA.js";function MS(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(t=>{const n=e[t],s=typeof n;(s==="object"||s==="function")&&!Object.isFrozen(n)&&MS(n)}),e}class Pv{constructor(t){t.data===void 0&&(t.data={}),this.data=t.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function LS(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Ti(e,...t){const n=Object.create(null);for(const s in e)n[s]=e[s];return t.forEach(function(s){for(const a in s)n[a]=s[a]}),n}const XR="</span>",kv=e=>!!e.scope,qR=(e,{prefix:t})=>{if(e.startsWith("language:"))return e.replace("language:","language-");if(e.includes(".")){const n=e.split(".");return[`${t}${n.shift()}`,...n.map((s,a)=>`${s}${"_".repeat(a+1)}`)].join(" ")}return`${t}${e}`};class ZR{constructor(t,n){this.buffer="",this.classPrefix=n.classPrefix,t.walk(this)}addText(t){this.buffer+=LS(t)}openNode(t){if(!kv(t))return;const n=qR(t.scope,{prefix:this.classPrefix});this.span(n)}closeNode(t){kv(t)&&(this.buffer+=XR)}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}const Bv=(e={})=>{const t={children:[]};return Object.assign(t,e),t};class Og{constructor(){this.rootNode=Bv(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const n=Bv({scope:t});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,n){return typeof n=="string"?t.addText(n):n.children&&(t.openNode(n),n.children.forEach(s=>this._walk(t,s)),t.closeNode(n)),t}static _collapse(t){typeof t!="string"&&t.children&&(t.children.every(n=>typeof n=="string")?t.children=[t.children.join("")]:t.children.forEach(n=>{Og._collapse(n)}))}}class QR extends Og{constructor(t){super(),this.options=t}addText(t){t!==""&&this.add(t)}startScope(t){this.openNode(t)}endScope(){this.closeNode()}__addSublanguage(t,n){const s=t.root;n&&(s.scope=`language:${n}`),this.add(s)}toHTML(){return new ZR(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function Dc(e){return e?typeof e=="string"?e:e.source:null}function DS(e){return vl("(?=",e,")")}function JR(e){return vl("(?:",e,")*")}function ex(e){return vl("(?:",e,")?")}function vl(...e){return e.map(n=>Dc(n)).join("")}function tx(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function Rg(...e){return"("+(tx(e).capture?"":"?:")+e.map(s=>Dc(s)).join("|")+")"}function PS(e){return new RegExp(e.toString()+"|").exec("").length-1}function nx(e,t){const n=e&&e.exec(t);return n&&n.index===0}const sx=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function xg(e,{joinWith:t}){let n=0;return e.map(s=>{n+=1;const a=n;let o=Dc(s),i="";for(;o.length>0;){const l=sx.exec(o);if(!l){i+=o;break}i+=o.substring(0,l.index),o=o.substring(l.index+l[0].length),l[0][0]==="\\"&&l[1]?i+="\\"+String(Number(l[1])+a):(i+=l[0],l[0]==="("&&n++)}return i}).map(s=>`(${s})`).join(t)}const ax=/\b\B/,kS="[a-zA-Z]\\w*",wg="[a-zA-Z_]\\w*",BS="\\b\\d+(\\.\\d+)?",US="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",FS="\\b(0b[01]+)",ox="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",ix=(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=vl(t,/.*\b/,e.binary,/\b.*/)),Ti({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(n,s)=>{n.index!==0&&s.ignoreMatch()}},e)},Pc={begin:"\\\\[\\s\\S]",relevance:0},lx={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[Pc]},rx={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[Pc]},cx={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},sp=function(e,t,n={}){const s=Ti({scope:"comment",begin:e,end:t,contains:[]},n);s.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const a=Rg("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return s.contains.push({begin:vl(/[ ]+/,"(",a,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),s},ux=sp("//","$"),dx=sp("/\\*","\\*/"),px=sp("#","$"),mx={scope:"number",begin:BS,relevance:0},hx={scope:"number",begin:US,relevance:0},fx={scope:"number",begin:FS,relevance:0},gx={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[Pc,{begin:/\[/,end:/\]/,relevance:0,contains:[Pc]}]},_x={scope:"title",begin:kS,relevance:0},vx={scope:"title",begin:wg,relevance:0},Ex={begin:"\\.\\s*"+wg,relevance:0},bx=function(e){return Object.assign(e,{"on:begin":(t,n)=>{n.data._beginMatch=t[1]},"on:end":(t,n)=>{n.data._beginMatch!==t[1]&&n.ignoreMatch()}})};var Su=Object.freeze({__proto__:null,APOS_STRING_MODE:lx,BACKSLASH_ESCAPE:Pc,BINARY_NUMBER_MODE:fx,BINARY_NUMBER_RE:FS,COMMENT:sp,C_BLOCK_COMMENT_MODE:dx,C_LINE_COMMENT_MODE:ux,C_NUMBER_MODE:hx,C_NUMBER_RE:US,END_SAME_AS_BEGIN:bx,HASH_COMMENT_MODE:px,IDENT_RE:kS,MATCH_NOTHING_RE:ax,METHOD_GUARD:Ex,NUMBER_MODE:mx,NUMBER_RE:BS,PHRASAL_WORDS_MODE:cx,QUOTE_STRING_MODE:rx,REGEXP_MODE:gx,RE_STARTERS_RE:ox,SHEBANG:ix,TITLE_MODE:_x,UNDERSCORE_IDENT_RE:wg,UNDERSCORE_TITLE_MODE:vx});function Tx(e,t){e.input[e.index-1]==="."&&t.ignoreMatch()}function Sx(e,t){e.className!==void 0&&(e.scope=e.className,delete e.className)}function Ax(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=Tx,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,e.relevance===void 0&&(e.relevance=0))}function yx(e,t){Array.isArray(e.illegal)&&(e.illegal=Rg(...e.illegal))}function Ix(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function Cx(e,t){e.relevance===void 0&&(e.relevance=1)}const Nx=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},e);Object.keys(e).forEach(s=>{delete e[s]}),e.keywords=n.keywords,e.begin=vl(n.beforeMatch,DS(n.begin)),e.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},e.relevance=0,delete n.beforeMatch},Ox=["of","and","for","in","not","or","if","then","parent","list","value"],Rx="keyword";function GS(e,t,n=Rx){const s=Object.create(null);return typeof e=="string"?a(n,e.split(" ")):Array.isArray(e)?a(n,e):Object.keys(e).forEach(function(o){Object.assign(s,GS(e[o],t,o))}),s;function a(o,i){t&&(i=i.map(l=>l.toLowerCase())),i.forEach(function(l){const r=l.split("|");s[r[0]]=[o,xx(r[0],r[1])]})}}function xx(e,t){return t?Number(t):wx(e)?0:1}function wx(e){return Ox.includes(e.toLowerCase())}const Uv={},dl=e=>{console.error(e)},Fv=(e,...t)=>{console.log(`WARN: ${e}`,...t)},$l=(e,t)=>{Uv[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),Uv[`${e}/${t}`]=!0)},Id=new Error;function VS(e,t,{key:n}){let s=0;const a=e[n],o={},i={};for(let l=1;l<=t.length;l++)i[l+s]=a[l],o[l+s]=!0,s+=PS(t[l-1]);e[n]=i,e[n]._emit=o,e[n]._multi=!0}function $x(e){if(Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw dl("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Id;if(typeof e.beginScope!="object"||e.beginScope===null)throw dl("beginScope must be object"),Id;VS(e,e.begin,{key:"beginScope"}),e.begin=xg(e.begin,{joinWith:""})}}function Mx(e){if(Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw dl("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Id;if(typeof e.endScope!="object"||e.endScope===null)throw dl("endScope must be object"),Id;VS(e,e.end,{key:"endScope"}),e.end=xg(e.end,{joinWith:""})}}function Lx(e){e.scope&&typeof e.scope=="object"&&e.scope!==null&&(e.beginScope=e.scope,delete e.scope)}function Dx(e){Lx(e),typeof e.beginScope=="string"&&(e.beginScope={_wrap:e.beginScope}),typeof e.endScope=="string"&&(e.endScope={_wrap:e.endScope}),$x(e),Mx(e)}function Px(e){function t(i,l){return new RegExp(Dc(i),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(l?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(l,r){r.position=this.position++,this.matchIndexes[this.matchAt]=r,this.regexes.push([r,l]),this.matchAt+=PS(l)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const l=this.regexes.map(r=>r[1]);this.matcherRe=t(xg(l,{joinWith:"|"}),!0),this.lastIndex=0}exec(l){this.matcherRe.lastIndex=this.lastIndex;const r=this.matcherRe.exec(l);if(!r)return null;const c=r.findIndex((d,h)=>h>0&&d!==void 0),u=this.matchIndexes[c];return r.splice(0,c),Object.assign(r,u)}}class s{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(l){if(this.multiRegexes[l])return this.multiRegexes[l];const r=new n;return this.rules.slice(l).forEach(([c,u])=>r.addRule(c,u)),r.compile(),this.multiRegexes[l]=r,r}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(l,r){this.rules.push([l,r]),r.type==="begin"&&this.count++}exec(l){const r=this.getMatcher(this.regexIndex);r.lastIndex=this.lastIndex;let c=r.exec(l);if(this.resumingScanAtSamePosition()&&!(c&&c.index===this.lastIndex)){const u=this.getMatcher(0);u.lastIndex=this.lastIndex+1,c=u.exec(l)}return c&&(this.regexIndex+=c.position+1,this.regexIndex===this.count&&this.considerAll()),c}}function a(i){const l=new s;return i.contains.forEach(r=>l.addRule(r.begin,{rule:r,type:"begin"})),i.terminatorEnd&&l.addRule(i.terminatorEnd,{type:"end"}),i.illegal&&l.addRule(i.illegal,{type:"illegal"}),l}function o(i,l){const r=i;if(i.isCompiled)return r;[Sx,Ix,Dx,Nx].forEach(u=>u(i,l)),e.compilerExtensions.forEach(u=>u(i,l)),i.__beforeBegin=null,[Ax,yx,Cx].forEach(u=>u(i,l)),i.isCompiled=!0;let c=null;return typeof i.keywords=="object"&&i.keywords.$pattern&&(i.keywords=Object.assign({},i.keywords),c=i.keywords.$pattern,delete i.keywords.$pattern),c=c||/\w+/,i.keywords&&(i.keywords=GS(i.keywords,e.case_insensitive)),r.keywordPatternRe=t(c,!0),l&&(i.begin||(i.begin=/\B|\b/),r.beginRe=t(r.begin),!i.end&&!i.endsWithParent&&(i.end=/\B|\b/),i.end&&(r.endRe=t(r.end)),r.terminatorEnd=Dc(r.end)||"",i.endsWithParent&&l.terminatorEnd&&(r.terminatorEnd+=(i.end?"|":"")+l.terminatorEnd)),i.illegal&&(r.illegalRe=t(i.illegal)),i.contains||(i.contains=[]),i.contains=[].concat(...i.contains.map(function(u){return kx(u==="self"?i:u)})),i.contains.forEach(function(u){o(u,r)}),i.starts&&o(i.starts,l),r.matcher=a(r),r}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=Ti(e.classNameAliases||{}),o(e)}function HS(e){return e?e.endsWithParent||HS(e.starts):!1}function kx(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map(function(t){return Ti(e,{variants:null},t)})),e.cachedVariants?e.cachedVariants:HS(e)?Ti(e,{starts:e.starts?Ti(e.starts):null}):Object.isFrozen(e)?Ti(e):e}var Bx="11.10.0";class Ux extends Error{constructor(t,n){super(t),this.name="HTMLInjectionError",this.html=n}}const um=LS,Gv=Ti,Vv=Symbol("nomatch"),Fx=7,WS=function(e){const t=Object.create(null),n=Object.create(null),s=[];let a=!0;const o="Could not find the language '{}', did you forget to load/include a language module?",i={disableAutodetect:!0,name:"Plain text",contains:[]};let l={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:QR};function r(G){return l.noHighlightRe.test(G)}function c(G){let K=G.className+" ";K+=G.parentNode?G.parentNode.className:"";const se=l.languageDetectRe.exec(K);if(se){const ee=D(se[1]);return ee||(Fv(o.replace("{}",se[1])),Fv("Falling back to no-highlight mode for this block.",G)),ee?se[1]:"no-highlight"}return K.split(/\s+/).find(ee=>r(ee)||D(ee))}function u(G,K,se){let ee="",X="";typeof K=="object"?(ee=G,se=K.ignoreIllegals,X=K.language):($l("10.7.0","highlight(lang, code, ...args) has been deprecated."),$l("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),X=G,ee=K),se===void 0&&(se=!0);const z={code:ee,language:X};B("before:highlight",z);const H=z.result?z.result:d(z.language,z.code,se);return H.code=z.code,B("after:highlight",H),H}function d(G,K,se,ee){const X=Object.create(null);function z($e,Pe){return $e.keywords[Pe]}function H(){if(!Z.keywords){le.addText(ve);return}let $e=0;Z.keywordPatternRe.lastIndex=0;let Pe=Z.keywordPatternRe.exec(ve),pe="";for(;Pe;){pe+=ve.substring($e,Pe.index);const Oe=st.case_insensitive?Pe[0].toLowerCase():Pe[0],ke=z(Z,Oe);if(ke){const[Q,oe]=ke;if(le.addText(pe),pe="",X[Oe]=(X[Oe]||0)+1,X[Oe]<=Fx&&(ge+=oe),Q.startsWith("_"))pe+=Pe[0];else{const me=st.classNameAliases[Q]||Q;de(Pe[0],me)}}else pe+=Pe[0];$e=Z.keywordPatternRe.lastIndex,Pe=Z.keywordPatternRe.exec(ve)}pe+=ve.substring($e),le.addText(pe)}function q(){if(ve==="")return;let $e=null;if(typeof Z.subLanguage=="string"){if(!t[Z.subLanguage]){le.addText(ve);return}$e=d(Z.subLanguage,ve,!0,ie[Z.subLanguage]),ie[Z.subLanguage]=$e._top}else $e=g(ve,Z.subLanguage.length?Z.subLanguage:null);Z.relevance>0&&(ge+=$e.relevance),le.__addSublanguage($e._emitter,$e.language)}function J(){Z.subLanguage!=null?q():H(),ve=""}function de($e,Pe){$e!==""&&(le.startScope(Pe),le.addText($e),le.endScope())}function Te($e,Pe){let pe=1;const Oe=Pe.length-1;for(;pe<=Oe;){if(!$e._emit[pe]){pe++;continue}const ke=st.classNameAliases[$e[pe]]||$e[pe],Q=Pe[pe];ke?de(Q,ke):(ve=Q,H(),ve=""),pe++}}function ce($e,Pe){return $e.scope&&typeof $e.scope=="string"&&le.openNode(st.classNameAliases[$e.scope]||$e.scope),$e.beginScope&&($e.beginScope._wrap?(de(ve,st.classNameAliases[$e.beginScope._wrap]||$e.beginScope._wrap),ve=""):$e.beginScope._multi&&(Te($e.beginScope,Pe),ve="")),Z=Object.create($e,{parent:{value:Z}}),Z}function Ne($e,Pe,pe){let Oe=nx($e.endRe,pe);if(Oe){if($e["on:end"]){const ke=new Pv($e);$e["on:end"](Pe,ke),ke.isMatchIgnored&&(Oe=!1)}if(Oe){for(;$e.endsParent&&$e.parent;)$e=$e.parent;return $e}}if($e.endsWithParent)return Ne($e.parent,Pe,pe)}function Me($e){return Z.matcher.regexIndex===0?(ve+=$e[0],1):(ye=!0,0)}function Fe($e){const Pe=$e[0],pe=$e.rule,Oe=new Pv(pe),ke=[pe.__beforeBegin,pe["on:begin"]];for(const Q of ke)if(Q&&(Q($e,Oe),Oe.isMatchIgnored))return Me(Pe);return pe.skip?ve+=Pe:(pe.excludeBegin&&(ve+=Pe),J(),!pe.returnBegin&&!pe.excludeBegin&&(ve=Pe)),ce(pe,$e),pe.returnBegin?0:Pe.length}function Ge($e){const Pe=$e[0],pe=K.substring($e.index),Oe=Ne(Z,$e,pe);if(!Oe)return Vv;const ke=Z;Z.endScope&&Z.endScope._wrap?(J(),de(Pe,Z.endScope._wrap)):Z.endScope&&Z.endScope._multi?(J(),Te(Z.endScope,$e)):ke.skip?ve+=Pe:(ke.returnEnd||ke.excludeEnd||(ve+=Pe),J(),ke.excludeEnd&&(ve=Pe));do Z.scope&&le.closeNode(),!Z.skip&&!Z.subLanguage&&(ge+=Z.relevance),Z=Z.parent;while(Z!==Oe.parent);return Oe.starts&&ce(Oe.starts,$e),ke.returnEnd?0:Pe.length}function je(){const $e=[];for(let Pe=Z;Pe!==st;Pe=Pe.parent)Pe.scope&&$e.unshift(Pe.scope);$e.forEach(Pe=>le.openNode(Pe))}let Ze={};function nt($e,Pe){const pe=Pe&&Pe[0];if(ve+=$e,pe==null)return J(),0;if(Ze.type==="begin"&&Pe.type==="end"&&Ze.index===Pe.index&&pe===""){if(ve+=K.slice(Pe.index,Pe.index+1),!a){const Oe=new Error(`0 width match regex (${G})`);throw Oe.languageName=G,Oe.badRule=Ze.rule,Oe}return 1}if(Ze=Pe,Pe.type==="begin")return Fe(Pe);if(Pe.type==="illegal"&&!se){const Oe=new Error('Illegal lexeme "'+pe+'" for mode "'+(Z.scope||"<unnamed>")+'"');throw Oe.mode=Z,Oe}else if(Pe.type==="end"){const Oe=Ge(Pe);if(Oe!==Vv)return Oe}if(Pe.type==="illegal"&&pe==="")return 1;if(Be>1e5&&Be>Pe.index*3)throw new Error("potential infinite loop, way more iterations than matches");return ve+=pe,pe.length}const st=D(G);if(!st)throw dl(o.replace("{}",G)),new Error('Unknown language: "'+G+'"');const At=Px(st);let Mt="",Z=ee||At;const ie={},le=new l.__emitter(l);je();let ve="",ge=0,Ie=0,Be=0,ye=!1;try{if(st.__emitTokens)st.__emitTokens(K,le);else{for(Z.matcher.considerAll();;){Be++,ye?ye=!1:Z.matcher.considerAll(),Z.matcher.lastIndex=Ie;const $e=Z.matcher.exec(K);if(!$e)break;const Pe=K.substring(Ie,$e.index),pe=nt(Pe,$e);Ie=$e.index+pe}nt(K.substring(Ie))}return le.finalize(),Mt=le.toHTML(),{language:G,value:Mt,relevance:ge,illegal:!1,_emitter:le,_top:Z}}catch($e){if($e.message&&$e.message.includes("Illegal"))return{language:G,value:um(K),illegal:!0,relevance:0,_illegalBy:{message:$e.message,index:Ie,context:K.slice(Ie-100,Ie+100),mode:$e.mode,resultSoFar:Mt},_emitter:le};if(a)return{language:G,value:um(K),illegal:!1,relevance:0,errorRaised:$e,_emitter:le,_top:Z};throw $e}}function h(G){const K={value:um(G),illegal:!1,relevance:0,_top:i,_emitter:new l.__emitter(l)};return K._emitter.addText(G),K}function g(G,K){K=K||l.languages||Object.keys(t);const se=h(G),ee=K.filter(D).filter(P).map(J=>d(J,G,!1));ee.unshift(se);const X=ee.sort((J,de)=>{if(J.relevance!==de.relevance)return de.relevance-J.relevance;if(J.language&&de.language){if(D(J.language).supersetOf===de.language)return 1;if(D(de.language).supersetOf===J.language)return-1}return 0}),[z,H]=X,q=z;return q.secondBest=H,q}function f(G,K,se){const ee=K&&n[K]||se;G.classList.add("hljs"),G.classList.add(`language-${ee}`)}function b(G){let K=null;const se=c(G);if(r(se))return;if(B("before:highlightElement",{el:G,language:se}),G.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",G);return}if(G.children.length>0&&(l.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(G)),l.throwUnescapedHTML))throw new Ux("One of your code blocks includes unescaped HTML.",G.innerHTML);K=G;const ee=K.textContent,X=se?u(ee,{language:se,ignoreIllegals:!0}):g(ee);G.innerHTML=X.value,G.dataset.highlighted="yes",f(G,se,X.language),G.result={language:X.language,re:X.relevance,relevance:X.relevance},X.secondBest&&(G.secondBest={language:X.secondBest.language,relevance:X.secondBest.relevance}),B("after:highlightElement",{el:G,result:X,text:ee})}function A(G){l=Gv(l,G)}const v=()=>{N(),$l("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function T(){N(),$l("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let _=!1;function N(){if(document.readyState==="loading"){_=!0;return}document.querySelectorAll(l.cssSelector).forEach(b)}function R(){_&&N()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",R,!1);function O(G,K){let se=null;try{se=K(e)}catch(ee){if(dl("Language definition for '{}' could not be registered.".replace("{}",G)),a)dl(ee);else throw ee;se=i}se.name||(se.name=G),t[G]=se,se.rawDefinition=K.bind(null,e),se.aliases&&M(se.aliases,{languageName:G})}function x(G){delete t[G];for(const K of Object.keys(n))n[K]===G&&delete n[K]}function w(){return Object.keys(t)}function D(G){return G=(G||"").toLowerCase(),t[G]||t[n[G]]}function M(G,{languageName:K}){typeof G=="string"&&(G=[G]),G.forEach(se=>{n[se.toLowerCase()]=K})}function P(G){const K=D(G);return K&&!K.disableAutodetect}function U(G){G["before:highlightBlock"]&&!G["before:highlightElement"]&&(G["before:highlightElement"]=K=>{G["before:highlightBlock"](Object.assign({block:K.el},K))}),G["after:highlightBlock"]&&!G["after:highlightElement"]&&(G["after:highlightElement"]=K=>{G["after:highlightBlock"](Object.assign({block:K.el},K))})}function F(G){U(G),s.push(G)}function k(G){const K=s.indexOf(G);K!==-1&&s.splice(K,1)}function B(G,K){const se=G;s.forEach(function(ee){ee[se]&&ee[se](K)})}function V(G){return $l("10.7.0","highlightBlock will be removed entirely in v12.0"),$l("10.7.0","Please use highlightElement now."),b(G)}Object.assign(e,{highlight:u,highlightAuto:g,highlightAll:N,highlightElement:b,highlightBlock:V,configure:A,initHighlighting:v,initHighlightingOnLoad:T,registerLanguage:O,unregisterLanguage:x,listLanguages:w,getLanguage:D,registerAliases:M,autoDetection:P,inherit:Gv,addPlugin:F,removePlugin:k}),e.debugMode=function(){a=!1},e.safeMode=function(){a=!0},e.versionString=Bx,e.regex={concat:vl,lookahead:DS,either:Rg,optional:ex,anyNumberOfTimes:JR};for(const G in Su)typeof Su[G]=="object"&&MS(Su[G]);return Object.assign(e,Su),e},mr=WS({});mr.newInstance=()=>WS({});var zS=mr;mr.HighlightJS=mr;mr.default=mr;const dm=mg(zS);var Hv=Jo({props:{code:{type:String,required:!0},language:{type:String,default:""},autodetect:{type:Boolean,default:!0},ignoreIllegals:{type:Boolean,default:!0}},setup:function(e){var t=j(e.language);it(function(){return e.language},function(a){t.value=a});var n=y(function(){return e.autodetect||!t.value}),s=y(function(){return!n.value&&!dm.getLanguage(t.value)});return{className:y(function(){return s.value?"":"hljs "+t.value}),highlightedCode:y(function(){var a;if(s.value)return console.warn('The language "'+t.value+'" you specified could not be found.'),e.code.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;");if(n.value){var o=dm.highlightAuto(e.code);return t.value=(a=o.language)!==null&&a!==void 0?a:"",o.value}return(o=dm.highlight(e.code,{language:t.value,ignoreIllegals:e.ignoreIllegals})).value})}},render:function(){return On("pre",{},[On("code",{class:this.className,innerHTML:this.highlightedCode})])}}),Gx={install:function(e){e.component("highlightjs",Hv)},component:Hv};function pm(e){return e===0?!1:Array.isArray(e)&&e.length===0?!0:!e}function Vx(e){return(...t)=>!e(...t)}function Hx(e,t){return e===void 0&&(e="undefined"),e===null&&(e="null"),e===!1&&(e="false"),e.toString().toLowerCase().indexOf(t.trim())!==-1}function YS(e,t,n,s){return t?e.filter(a=>Hx(s(a,n),t)).sort((a,o)=>s(a,n).length-s(o,n).length):e}function Wx(e){return e.filter(t=>!t.$isLabel)}function mm(e,t){return n=>n.reduce((s,a)=>a[e]&&a[e].length?(s.push({$groupLabel:a[t],$isLabel:!0}),s.concat(a[e])):s,[])}function zx(e,t,n,s,a){return o=>o.map(i=>{if(!i[n])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const l=YS(i[n],e,t,a);return l.length?{[s]:i[s],[n]:l}:[]})}const Wv=(...e)=>t=>e.reduce((n,s)=>s(n),t);var Yx={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(e,t){return pm(e)?"":t?e[t]:e}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const e=this.search||"",t=e.toLowerCase().trim();let n=this.options.concat();return this.internalSearch?n=this.groupValues?this.filterAndFlat(n,t,this.label):YS(n,t,this.label,this.customLabel):n=this.groupValues?mm(this.groupValues,this.groupLabel)(n):n,n=this.hideSelected?n.filter(Vx(this.isSelected)):n,this.taggable&&t.length&&!this.isExistingOption(t)&&(this.tagPosition==="bottom"?n.push({isTag:!0,label:e}):n.unshift({isTag:!0,label:e})),n.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(e=>e[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(t=>this.customLabel(t,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:{handler(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},deep:!0},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(e,t,n){return Wv(zx(t,n,this.groupValues,this.groupLabel,this.customLabel),mm(this.groupValues,this.groupLabel))(e)},flatAndStrip(e){return Wv(mm(this.groupValues,this.groupLabel),Wx)(e)},updateSearch(e){this.search=e},isExistingOption(e){return this.options?this.optionKeys.indexOf(e)>-1:!1},isSelected(e){const t=this.trackBy?e[this.trackBy]:e;return this.valueKeys.indexOf(t)>-1},isOptionDisabled(e){return!!e.$isDisabled},getOptionLabel(e){if(pm(e))return"";if(e.isTag)return e.label;if(e.$isLabel)return e.$groupLabel;const t=this.customLabel(e,this.label);return pm(t)?"":t},select(e,t){if(e.$isLabel&&this.groupSelect){this.selectGroup(e);return}if(!(this.blockKeys.indexOf(t)!==-1||this.disabled||e.$isDisabled||e.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(t==="Tab"&&!this.pointerDirty)){if(e.isTag)this.$emit("tag",e.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(e)){t!=="Tab"&&this.removeElement(e);return}this.multiple?this.$emit("update:modelValue",this.internalValue.concat([e])):this.$emit("update:modelValue",e),this.$emit("select",e,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(e){const t=this.options.find(n=>n[this.groupLabel]===e.$groupLabel);if(t){if(this.wholeGroupSelected(t)){this.$emit("remove",t[this.groupValues],this.id);const n=this.trackBy?t[this.groupValues].map(a=>a[this.trackBy]):t[this.groupValues],s=this.internalValue.filter(a=>n.indexOf(this.trackBy?a[this.trackBy]:a)===-1);this.$emit("update:modelValue",s)}else{let n=t[this.groupValues].filter(s=>!(this.isOptionDisabled(s)||this.isSelected(s)));this.max&&n.splice(this.max-this.internalValue.length),this.$emit("select",n,this.id),this.$emit("update:modelValue",this.internalValue.concat(n))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(e){return e[this.groupValues].every(t=>this.isSelected(t)||this.isOptionDisabled(t))},wholeGroupDisabled(e){return e[this.groupValues].every(this.isOptionDisabled)},removeElement(e,t=!0){if(this.disabled||e.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const n=typeof e=="object"?this.valueKeys.indexOf(e[this.trackBy]):this.valueKeys.indexOf(e);if(this.multiple){const s=this.internalValue.slice(0,n).concat(this.internalValue.slice(n+1));this.$emit("update:modelValue",s)}else this.$emit("update:modelValue",null);this.$emit("remove",e,this.id),this.closeOnSelect&&t&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||typeof this.$el<"u"&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?this.$refs.search!==null&&typeof this.$refs.search<"u"&&this.$refs.search.blur():typeof this.$el<"u"&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window>"u")return;const e=this.$el.getBoundingClientRect().top,t=window.innerHeight-this.$el.getBoundingClientRect().bottom;t>this.maxHeight||t>e||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(t-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(e-40,this.maxHeight))}}},jx={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(e,t){return{"multiselect__option--highlight":e===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(t)}},groupHighlight(e,t){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":t.$isLabel}];const n=this.options.find(s=>s[this.groupLabel]===t.$groupLabel);return n&&!this.wholeGroupDisabled(n)?["multiselect__option--group",{"multiselect__option--highlight":e===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(n)}]:"multiselect__option--disabled"},addPointerElement({key:e}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],e),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(e){this.pointer=e,this.pointerDirty=!0}}},jS={name:"vue-multiselect",mixins:[Yx,jx],compatConfig:{MODE:3,ATTR_ENUMERATED_COERCION:!1},props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:e=>`and ${e} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0},required:{type:Boolean,default:!1}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)}}};const Kx={ref:"tags",class:"multiselect__tags"},Xx={class:"multiselect__tags-wrap"},qx={class:"multiselect__spinner"},Zx={key:0},Qx={class:"multiselect__option"},Jx={class:"multiselect__option"},ew=xe("No elements found. Consider changing the search query."),tw={class:"multiselect__option"},nw=xe("List is empty.");function sw(e,t,n,s,a,o){return p(),L("div",{tabindex:e.searchable?-1:n.tabindex,class:[{"multiselect--active":e.isOpen,"multiselect--disabled":n.disabled,"multiselect--above":o.isAbove,"multiselect--has-options-group":o.hasOptionGroup},"multiselect"],onFocus:t[14]||(t[14]=i=>e.activate()),onBlur:t[15]||(t[15]=i=>e.searchable?!1:e.deactivate()),onKeydown:[t[16]||(t[16]=wn(Ve(i=>e.pointerForward(),["self","prevent"]),["down"])),t[17]||(t[17]=wn(Ve(i=>e.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:t[18]||(t[18]=wn(Ve(i=>e.addPointerElement(i),["stop","self"]),["enter","tab"])),onKeyup:t[19]||(t[19]=wn(i=>e.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+e.id},[We(e.$slots,"caret",{toggle:e.toggle},()=>[S("div",{onMousedown:t[1]||(t[1]=Ve(i=>e.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),We(e.$slots,"clear",{search:e.search}),S("div",Kx,[We(e.$slots,"selection",{search:e.search,remove:e.removeElement,values:o.visibleValues,isOpen:e.isOpen},()=>[re(S("div",Xx,[(p(!0),L(ue,null,Ae(o.visibleValues,(i,l)=>We(e.$slots,"tag",{option:i,search:e.search,remove:e.removeElement},()=>[(p(),L("span",{class:"multiselect__tag",key:l},[S("span",{textContent:I(e.getOptionLabel(i))},null,8,["textContent"]),S("i",{tabindex:"1",onKeypress:wn(Ve(r=>e.removeElement(i),["prevent"]),["enter"]),onMousedown:Ve(r=>e.removeElement(i),["prevent"]),class:"multiselect__tag-icon"},null,40,["onKeypress","onMousedown"])]))])),256))],512),[[rn,o.visibleValues.length>0]]),e.internalValue&&e.internalValue.length>n.limit?We(e.$slots,"limit",{key:0},()=>[S("strong",{class:"multiselect__strong",textContent:I(n.limitText(e.internalValue.length-n.limit))},null,8,["textContent"])]):$("v-if",!0)]),S(Ys,{name:"multiselect__loading"},{default:Y(()=>[We(e.$slots,"loading",{},()=>[re(S("div",qx,null,512),[[rn,n.loading]])])]),_:3}),e.searchable?(p(),L("input",{key:0,ref:"search",name:n.name,id:e.id,type:"text",autocomplete:"off",spellcheck:n.spellcheck,placeholder:e.placeholder,required:n.required,style:o.inputStyle,value:e.search,disabled:n.disabled,tabindex:n.tabindex,onInput:t[2]||(t[2]=i=>e.updateSearch(i.target.value)),onFocus:t[3]||(t[3]=Ve(i=>e.activate(),["prevent"])),onBlur:t[4]||(t[4]=Ve(i=>e.deactivate(),["prevent"])),onKeyup:t[5]||(t[5]=wn(i=>e.deactivate(),["esc"])),onKeydown:[t[6]||(t[6]=wn(Ve(i=>e.pointerForward(),["prevent"]),["down"])),t[7]||(t[7]=wn(Ve(i=>e.pointerBackward(),["prevent"]),["up"])),t[9]||(t[9]=wn(Ve(i=>e.removeLastElement(),["stop"]),["delete"]))],onKeypress:t[8]||(t[8]=wn(Ve(i=>e.addPointerElement(i),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+e.id},null,44,["name","id","spellcheck","placeholder","required","value","disabled","tabindex","aria-controls"])):$("v-if",!0),o.isSingleLabelVisible?(p(),L("span",{key:1,class:"multiselect__single",onMousedown:t[10]||(t[10]=Ve((...i)=>e.toggle&&e.toggle(...i),["prevent"]))},[We(e.$slots,"singleLabel",{option:o.singleValue},()=>[xe(I(e.currentOptionLabel),1)])],32)):$("v-if",!0),o.isPlaceholderVisible?(p(),L("span",{key:2,class:"multiselect__placeholder",onMousedown:t[11]||(t[11]=Ve((...i)=>e.toggle&&e.toggle(...i),["prevent"]))},[We(e.$slots,"placeholder",{},()=>[xe(I(e.placeholder),1)])],32)):$("v-if",!0)],512),S(Ys,{name:"multiselect"},{default:Y(()=>[re(S("div",{class:"multiselect__content-wrapper",onFocus:t[12]||(t[12]=(...i)=>e.activate&&e.activate(...i)),tabindex:"-1",onMousedown:t[13]||(t[13]=Ve(()=>{},["prevent"])),style:{maxHeight:e.optimizedHeight+"px"},ref:"list"},[S("ul",{class:"multiselect__content",style:o.contentStyle,role:"listbox",id:"listbox-"+e.id,"aria-multiselectable":e.multiple},[We(e.$slots,"beforeList"),e.multiple&&e.max===e.internalValue.length?(p(),L("li",Zx,[S("span",Qx,[We(e.$slots,"maxElements",{},()=>[xe("Maximum of "+I(e.max)+" options selected. First remove a selected option to select another.",1)])])])):$("v-if",!0),!e.max||e.internalValue.length<e.max?(p(!0),L(ue,{key:1},Ae(e.filteredOptions,(i,l)=>(p(),L("li",{class:"multiselect__element",key:l,"aria-selected":e.isSelected(i),id:e.id+"-"+l,role:i&&(i.$isLabel||i.$isDisabled)?null:"option"},[i&&(i.$isLabel||i.$isDisabled)?$("v-if",!0):(p(),L("span",{key:0,class:[e.optionHighlight(l,i),"multiselect__option"],onClick:Ve(r=>e.select(i),["stop"]),onMouseenter:Ve(r=>e.pointerSet(l),["self"]),"data-select":i&&i.isTag?e.tagPlaceholder:o.selectLabelText,"data-selected":o.selectedLabelText,"data-deselect":o.deselectLabelText},[We(e.$slots,"option",{option:i,search:e.search,index:l},()=>[S("span",null,I(e.getOptionLabel(i)),1)])],42,["onClick","onMouseenter","data-select","data-selected","data-deselect"])),i&&(i.$isLabel||i.$isDisabled)?(p(),L("span",{key:1,"data-select":e.groupSelect&&o.selectGroupLabelText,"data-deselect":e.groupSelect&&o.deselectGroupLabelText,class:[e.groupHighlight(l,i),"multiselect__option"],onMouseenter:Ve(r=>e.groupSelect&&e.pointerSet(l),["self"]),onMousedown:Ve(r=>e.selectGroup(i),["prevent"])},[We(e.$slots,"option",{option:i,search:e.search,index:l},()=>[S("span",null,I(e.getOptionLabel(i)),1)])],42,["data-select","data-deselect","onMouseenter","onMousedown"])):$("v-if",!0)],8,["aria-selected","id","role"]))),128)):$("v-if",!0),re(S("li",null,[S("span",Jx,[We(e.$slots,"noResult",{search:e.search},()=>[ew])])],512),[[rn,n.showNoResults&&e.filteredOptions.length===0&&e.search&&!n.loading]]),re(S("li",null,[S("span",tw,[We(e.$slots,"noOptions",{},()=>[nw])])],512),[[rn,n.showNoOptions&&(e.options.length===0||o.hasOptionGroup===!0&&e.filteredOptions.length===0)&&!e.search&&!n.loading]]),We(e.$slots,"afterList")],12,["id","aria-multiselectable"])],36),[[rn,e.isOpen]])]),_:3})],42,["tabindex","aria-owns"])}jS.render=sw;const aw={class:"flex flex-col items-start gap-1.5 pb-10 pt-1"},ow={class:"flex items-center"},iw={class:"m-0 mt-1.5 text-sm text-n-slate-11"},lw={__name:"Wizard",props:{items:{type:Array,default:()=>[]}},setup(e){const t=e,n=wt(),s=y(()=>{const o=t.items.findIndex(i=>i.route===n.name);return o===-1?0:o}),a=y(()=>t.items.map((o,i)=>{const l=i===s.value,r=i<s.value;return{...o,index:i,isActive:l,isOver:r}}));return(o,i)=>(p(),L(tS,{tag:"div"},{default:Y(()=>[(p(!0),E(ue,null,Ae(a.value,l=>(p(),E("div",{key:l.route,class:"cursor-pointer flex items-start gap-6 relative after:content-[''] after:absolute after:w-0.5 after:h-full after:top-5 ltr:after:left-4 rtl:after:right-4 before:content-[''] before:absolute before:w-0.5 before:h-4 before:top-0 before:left-4 rtl:before:right-4 last:after:hidden last:before:hidden after:bg-n-slate-3 before:bg-n-slate-3"},[m("div",{class:ae(["rounded-2xl flex-shrink-0 size-8 border-2 border-n-slate-3 flex items-center justify-center left-2 leading-4 z-10 top-5 transition-all duration-300 ease-in-out",{"bg-n-slate-3":l.isActive||l.isOver,"bg-n-background":!l.isActive&&!l.isOver}])},[l.isOver?(p(),L(dt,{key:"check-"+l.index,icon:"i-lucide-check",class:"text-n-slate-11 size-4"})):(p(),E("span",{key:"num-"+l.index,class:ae(["text-xs font-bold transition-colors duration-300",l.isActive?"text-n-blue-11":"text-n-slate-11"])},I(l.index+1),3))],2),m("div",aw,[m("div",ow,[m("h3",{class:ae(["text-sm font-medium overflow-hidden whitespace-nowrap mt-0.5 text-ellipsis leading-tight",l.isActive?"text-n-blue-11":"text-n-slate-12"])},I(l.title),3)]),m("p",iw,I(l.body),1)])]))),128))]),_:1}))}},rw=["top","right","bottom","left"],zv=["start","end"],Yv=rw.reduce((e,t)=>e.concat(t,t+"-"+zv[0],t+"-"+zv[1]),[]),il=Math.min,sl=Math.max,cw={left:"right",right:"left",bottom:"top",top:"bottom"},uw={start:"end",end:"start"};function gf(e,t,n){return sl(e,il(t,n))}function El(e,t){return typeof e=="function"?e(t):e}function wo(e){return e.split("-")[0]}function oo(e){return e.split("-")[1]}function KS(e){return e==="x"?"y":"x"}function $g(e){return e==="y"?"height":"width"}function _l(e){return["top","bottom"].includes(wo(e))?"y":"x"}function Mg(e){return KS(_l(e))}function XS(e,t,n){n===void 0&&(n=!1);const s=oo(e),a=Mg(e),o=$g(a);let i=a==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Nd(i)),[i,Nd(i)]}function dw(e){const t=Nd(e);return[Cd(e),t,Cd(t)]}function Cd(e){return e.replace(/start|end/g,t=>uw[t])}function pw(e,t,n){const s=["left","right"],a=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:s:t?s:a;case"left":case"right":return t?o:i;default:return[]}}function mw(e,t,n,s){const a=oo(e);let o=pw(wo(e),n==="start",s);return a&&(o=o.map(i=>i+"-"+a),t&&(o=o.concat(o.map(Cd)))),o}function Nd(e){return e.replace(/left|right|bottom|top/g,t=>cw[t])}function hw(e){return{top:0,right:0,bottom:0,left:0,...e}}function qS(e){return typeof e!="number"?hw(e):{top:e,right:e,bottom:e,left:e}}function vc(e){const{x:t,y:n,width:s,height:a}=e;return{width:s,height:a,top:n,left:t,right:t+s,bottom:n+a,x:t,y:n}}function jv(e,t,n){let{reference:s,floating:a}=e;const o=_l(t),i=Mg(t),l=$g(i),r=wo(t),c=o==="y",u=s.x+s.width/2-a.width/2,d=s.y+s.height/2-a.height/2,h=s[l]/2-a[l]/2;let g;switch(r){case"top":g={x:u,y:s.y-a.height};break;case"bottom":g={x:u,y:s.y+s.height};break;case"right":g={x:s.x+s.width,y:d};break;case"left":g={x:s.x-a.width,y:d};break;default:g={x:s.x,y:s.y}}switch(oo(t)){case"start":g[i]-=h*(n&&c?-1:1);break;case"end":g[i]+=h*(n&&c?-1:1);break}return g}const fw=async(e,t,n)=>{const{placement:s="bottom",strategy:a="absolute",middleware:o=[],platform:i}=n,l=o.filter(Boolean),r=await(i.isRTL==null?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:d}=jv(c,s,r),h=s,g={},f=0;for(let b=0;b<l.length;b++){const{name:A,fn:v}=l[b],{x:T,y:_,data:N,reset:R}=await v({x:u,y:d,initialPlacement:s,placement:h,strategy:a,middlewareData:g,rects:c,platform:i,elements:{reference:e,floating:t}});u=T??u,d=_??d,g={...g,[A]:{...g[A],...N}},R&&f<=50&&(f++,typeof R=="object"&&(R.placement&&(h=R.placement),R.rects&&(c=R.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:a}):R.rects),{x:u,y:d}=jv(c,h,r)),b=-1)}return{x:u,y:d,placement:h,strategy:a,middlewareData:g}};async function ap(e,t){var n;t===void 0&&(t={});const{x:s,y:a,platform:o,rects:i,elements:l,strategy:r}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:g=0}=El(t,e),f=qS(g),A=l[h?d==="floating"?"reference":"floating":d],v=vc(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(A)))==null||n?A:A.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:c,rootBoundary:u,strategy:r})),T=d==="floating"?{x:s,y:a,width:i.floating.width,height:i.floating.height}:i.reference,_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),N=await(o.isElement==null?void 0:o.isElement(_))?await(o.getScale==null?void 0:o.getScale(_))||{x:1,y:1}:{x:1,y:1},R=vc(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:T,offsetParent:_,strategy:r}):T);return{top:(v.top-R.top+f.top)/N.y,bottom:(R.bottom-v.bottom+f.bottom)/N.y,left:(v.left-R.left+f.left)/N.x,right:(R.right-v.right+f.right)/N.x}}const gw=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:a,rects:o,platform:i,elements:l,middlewareData:r}=t,{element:c,padding:u=0}=El(e,t)||{};if(c==null)return{};const d=qS(u),h={x:n,y:s},g=Mg(a),f=$g(g),b=await i.getDimensions(c),A=g==="y",v=A?"top":"left",T=A?"bottom":"right",_=A?"clientHeight":"clientWidth",N=o.reference[f]+o.reference[g]-h[g]-o.floating[f],R=h[g]-o.reference[g],O=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let x=O?O[_]:0;(!x||!await(i.isElement==null?void 0:i.isElement(O)))&&(x=l.floating[_]||o.floating[f]);const w=N/2-R/2,D=x/2-b[f]/2-1,M=il(d[v],D),P=il(d[T],D),U=M,F=x-b[f]-P,k=x/2-b[f]/2+w,B=gf(U,k,F),V=!r.arrow&&oo(a)!=null&&k!==B&&o.reference[f]/2-(k<U?M:P)-b[f]/2<0,G=V?k<U?k-U:k-F:0;return{[g]:h[g]+G,data:{[g]:B,centerOffset:k-B-G,...V&&{alignmentOffset:G}},reset:V}}});function _w(e,t,n){return(e?[...n.filter(a=>oo(a)===e),...n.filter(a=>oo(a)!==e)]:n.filter(a=>wo(a)===a)).filter(a=>e?oo(a)===e||(t?Cd(a)!==a:!1):!0)}const vw=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,s,a;const{rects:o,middlewareData:i,placement:l,platform:r,elements:c}=t,{crossAxis:u=!1,alignment:d,allowedPlacements:h=Yv,autoAlignment:g=!0,...f}=El(e,t),b=d!==void 0||h===Yv?_w(d||null,g,h):h,A=await ap(t,f),v=((n=i.autoPlacement)==null?void 0:n.index)||0,T=b[v];if(T==null)return{};const _=XS(T,o,await(r.isRTL==null?void 0:r.isRTL(c.floating)));if(l!==T)return{reset:{placement:b[0]}};const N=[A[wo(T)],A[_[0]],A[_[1]]],R=[...((s=i.autoPlacement)==null?void 0:s.overflows)||[],{placement:T,overflows:N}],O=b[v+1];if(O)return{data:{index:v+1,overflows:R},reset:{placement:O}};const x=R.map(M=>{const P=oo(M.placement);return[M.placement,P&&u?M.overflows.slice(0,2).reduce((U,F)=>U+F,0):M.overflows[0],M.overflows]}).sort((M,P)=>M[1]-P[1]),D=((a=x.filter(M=>M[2].slice(0,oo(M[0])?2:3).every(P=>P<=0))[0])==null?void 0:a[0])||x[0][0];return D!==l?{data:{index:v+1,overflows:R},reset:{placement:D}}:{}}}},Ew=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:a,middlewareData:o,rects:i,initialPlacement:l,platform:r,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:b=!0,...A}=El(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const v=wo(a),T=_l(l),_=wo(l)===l,N=await(r.isRTL==null?void 0:r.isRTL(c.floating)),R=h||(_||!b?[Nd(l)]:dw(l)),O=f!=="none";!h&&O&&R.push(...mw(l,b,f,N));const x=[l,...R],w=await ap(t,A),D=[];let M=((s=o.flip)==null?void 0:s.overflows)||[];if(u&&D.push(w[v]),d){const k=XS(a,i,N);D.push(w[k[0]],w[k[1]])}if(M=[...M,{placement:a,overflows:D}],!D.every(k=>k<=0)){var P,U;const k=(((P=o.flip)==null?void 0:P.index)||0)+1,B=x[k];if(B)return{data:{index:k,overflows:M},reset:{placement:B}};let V=(U=M.filter(G=>G.overflows[0]<=0).sort((G,K)=>G.overflows[1]-K.overflows[1])[0])==null?void 0:U.placement;if(!V)switch(g){case"bestFit":{var F;const G=(F=M.filter(K=>{if(O){const se=_l(K.placement);return se===T||se==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(se=>se>0).reduce((se,ee)=>se+ee,0)]).sort((K,se)=>K[1]-se[1])[0])==null?void 0:F[0];G&&(V=G);break}case"initialPlacement":V=l;break}if(a!==V)return{reset:{placement:V}}}return{}}}};async function bw(e,t){const{placement:n,platform:s,elements:a}=e,o=await(s.isRTL==null?void 0:s.isRTL(a.floating)),i=wo(n),l=oo(n),r=_l(n)==="y",c=["left","top"].includes(i)?-1:1,u=o&&r?-1:1,d=El(t,e);let{mainAxis:h,crossAxis:g,alignmentAxis:f}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return l&&typeof f=="number"&&(g=l==="end"?f*-1:f),r?{x:g*u,y:h*c}:{x:h*c,y:g*u}}const Tw=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:a,y:o,placement:i,middlewareData:l}=t,r=await bw(t,e);return i===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:a+r.x,y:o+r.y,data:{...r,placement:i}}}}},Sw=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:a}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:A=>{let{x:v,y:T}=A;return{x:v,y:T}}},...r}=El(e,t),c={x:n,y:s},u=await ap(t,r),d=_l(wo(a)),h=KS(d);let g=c[h],f=c[d];if(o){const A=h==="y"?"top":"left",v=h==="y"?"bottom":"right",T=g+u[A],_=g-u[v];g=gf(T,g,_)}if(i){const A=d==="y"?"top":"left",v=d==="y"?"bottom":"right",T=f+u[A],_=f-u[v];f=gf(T,f,_)}const b=l.fn({...t,[h]:g,[d]:f});return{...b,data:{x:b.x-n,y:b.y-s}}}}},Aw=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:s,platform:a,elements:o}=t,{apply:i=()=>{},...l}=El(e,t),r=await ap(t,l),c=wo(n),u=oo(n),d=_l(n)==="y",{width:h,height:g}=s.floating;let f,b;c==="top"||c==="bottom"?(f=c,b=u===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(b=c,f=u==="end"?"top":"bottom");const A=g-r.top-r.bottom,v=h-r.left-r.right,T=il(g-r[f],A),_=il(h-r[b],v),N=!t.middlewareData.shift;let R=T,O=_;if(d?O=u||N?il(_,v):v:R=u||N?il(T,A):A,N&&!u){const w=sl(r.left,0),D=sl(r.right,0),M=sl(r.top,0),P=sl(r.bottom,0);d?O=h-2*(w!==0||D!==0?w+D:sl(r.left,r.right)):R=g-2*(M!==0||P!==0?M+P:sl(r.top,r.bottom))}await i({...t,availableWidth:O,availableHeight:R});const x=await a.getDimensions(o.floating);return h!==x.width||g!==x.height?{reset:{rects:!0}}:{}}}};function Pa(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Co(e){return Pa(e).getComputedStyle(e)}const Kv=Math.min,Ec=Math.max,Od=Math.round;function ZS(e){const t=Co(e);let n=parseFloat(t.width),s=parseFloat(t.height);const a=e.offsetWidth,o=e.offsetHeight,i=Od(n)!==a||Od(s)!==o;return i&&(n=a,s=o),{width:n,height:s,fallback:i}}function wi(e){return JS(e)?(e.nodeName||"").toLowerCase():""}let Au;function QS(){if(Au)return Au;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(Au=e.brands.map(t=>t.brand+"/"+t.version).join(" "),Au):navigator.userAgent}function No(e){return e instanceof Pa(e).HTMLElement}function Ri(e){return e instanceof Pa(e).Element}function JS(e){return e instanceof Pa(e).Node}function Xv(e){return typeof ShadowRoot>"u"?!1:e instanceof Pa(e).ShadowRoot||e instanceof ShadowRoot}function op(e){const{overflow:t,overflowX:n,overflowY:s,display:a}=Co(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!["inline","contents"].includes(a)}function yw(e){return["table","td","th"].includes(wi(e))}function _f(e){const t=/firefox/i.test(QS()),n=Co(e),s=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!s&&s!=="none"||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(a=>n.willChange.includes(a))||["paint","layout","strict","content"].some(a=>{const o=n.contain;return o!=null&&o.includes(a)})}function e0(){return!/^((?!chrome|android).)*safari/i.test(QS())}function Lg(e){return["html","body","#document"].includes(wi(e))}function t0(e){return Ri(e)?e:e.contextElement}const n0={x:1,y:1};function nr(e){const t=t0(e);if(!No(t))return n0;const n=t.getBoundingClientRect(),{width:s,height:a,fallback:o}=ZS(t);let i=(o?Od(n.width):n.width)/s,l=(o?Od(n.height):n.height)/a;return i&&Number.isFinite(i)||(i=1),l&&Number.isFinite(l)||(l=1),{x:i,y:l}}function kc(e,t,n,s){var a,o;t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),l=t0(e);let r=n0;t&&(s?Ri(s)&&(r=nr(s)):r=nr(e));const c=l?Pa(l):window,u=!e0()&&n;let d=(i.left+(u&&((a=c.visualViewport)==null?void 0:a.offsetLeft)||0))/r.x,h=(i.top+(u&&((o=c.visualViewport)==null?void 0:o.offsetTop)||0))/r.y,g=i.width/r.x,f=i.height/r.y;if(l){const b=Pa(l),A=s&&Ri(s)?Pa(s):s;let v=b.frameElement;for(;v&&s&&A!==b;){const T=nr(v),_=v.getBoundingClientRect(),N=getComputedStyle(v);_.x+=(v.clientLeft+parseFloat(N.paddingLeft))*T.x,_.y+=(v.clientTop+parseFloat(N.paddingTop))*T.y,d*=T.x,h*=T.y,g*=T.x,f*=T.y,d+=_.x,h+=_.y,v=Pa(v).frameElement}}return{width:g,height:f,top:h,right:d+g,bottom:h+f,left:d,x:d,y:h}}function xi(e){return((JS(e)?e.ownerDocument:e.document)||window.document).documentElement}function ip(e){return Ri(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function s0(e){return kc(xi(e)).left+ip(e).scrollLeft}function Bc(e){if(wi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Xv(e)&&e.host||xi(e);return Xv(t)?t.host:t}function a0(e){const t=Bc(e);return Lg(t)?t.ownerDocument.body:No(t)&&op(t)?t:a0(t)}function Rd(e,t){var n;t===void 0&&(t=[]);const s=a0(e),a=s===((n=e.ownerDocument)==null?void 0:n.body),o=Pa(s);return a?t.concat(o,o.visualViewport||[],op(s)?s:[]):t.concat(s,Rd(s))}function qv(e,t,n){return t==="viewport"?vc(function(s,a){const o=Pa(s),i=xi(s),l=o.visualViewport;let r=i.clientWidth,c=i.clientHeight,u=0,d=0;if(l){r=l.width,c=l.height;const h=e0();(h||!h&&a==="fixed")&&(u=l.offsetLeft,d=l.offsetTop)}return{width:r,height:c,x:u,y:d}}(e,n)):Ri(t)?vc(function(s,a){const o=kc(s,!0,a==="fixed"),i=o.top+s.clientTop,l=o.left+s.clientLeft,r=No(s)?nr(s):{x:1,y:1};return{width:s.clientWidth*r.x,height:s.clientHeight*r.y,x:l*r.x,y:i*r.y}}(t,n)):vc(function(s){const a=xi(s),o=ip(s),i=s.ownerDocument.body,l=Ec(a.scrollWidth,a.clientWidth,i.scrollWidth,i.clientWidth),r=Ec(a.scrollHeight,a.clientHeight,i.scrollHeight,i.clientHeight);let c=-o.scrollLeft+s0(s);const u=-o.scrollTop;return Co(i).direction==="rtl"&&(c+=Ec(a.clientWidth,i.clientWidth)-l),{width:l,height:r,x:c,y:u}}(xi(e)))}function Zv(e){return No(e)&&Co(e).position!=="fixed"?e.offsetParent:null}function Qv(e){const t=Pa(e);let n=Zv(e);for(;n&&yw(n)&&Co(n).position==="static";)n=Zv(n);return n&&(wi(n)==="html"||wi(n)==="body"&&Co(n).position==="static"&&!_f(n))?t:n||function(s){let a=Bc(s);for(;No(a)&&!Lg(a);){if(_f(a))return a;a=Bc(a)}return null}(e)||t}function Iw(e,t,n){const s=No(t),a=xi(t),o=kc(e,!0,n==="fixed",t);let i={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if(s||!s&&n!=="fixed")if((wi(t)!=="body"||op(a))&&(i=ip(t)),No(t)){const r=kc(t,!0);l.x=r.x+t.clientLeft,l.y=r.y+t.clientTop}else a&&(l.x=s0(a));return{x:o.left+i.scrollLeft-l.x,y:o.top+i.scrollTop-l.y,width:o.width,height:o.height}}const Cw={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:s,strategy:a}=e;const o=n==="clippingAncestors"?function(c,u){const d=u.get(c);if(d)return d;let h=Rd(c).filter(A=>Ri(A)&&wi(A)!=="body"),g=null;const f=Co(c).position==="fixed";let b=f?Bc(c):c;for(;Ri(b)&&!Lg(b);){const A=Co(b),v=_f(b);(f?v||g:v||A.position!=="static"||!g||!["absolute","fixed"].includes(g.position))?g=A:h=h.filter(T=>T!==b),b=Bc(b)}return u.set(c,h),h}(t,this._c):[].concat(n),i=[...o,s],l=i[0],r=i.reduce((c,u)=>{const d=qv(t,u,a);return c.top=Ec(d.top,c.top),c.right=Kv(d.right,c.right),c.bottom=Kv(d.bottom,c.bottom),c.left=Ec(d.left,c.left),c},qv(t,l,a));return{width:r.right-r.left,height:r.bottom-r.top,x:r.left,y:r.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:s}=e;const a=No(n),o=xi(n);if(n===o)return t;let i={scrollLeft:0,scrollTop:0},l={x:1,y:1};const r={x:0,y:0};if((a||!a&&s!=="fixed")&&((wi(n)!=="body"||op(o))&&(i=ip(n)),No(n))){const c=kc(n);l=nr(n),r.x=c.x+n.clientLeft,r.y=c.y+n.clientTop}return{width:t.width*l.x,height:t.height*l.y,x:t.x*l.x-i.scrollLeft*l.x+r.x,y:t.y*l.y-i.scrollTop*l.y+r.y}},isElement:Ri,getDimensions:function(e){return No(e)?ZS(e):e.getBoundingClientRect()},getOffsetParent:Qv,getDocumentElement:xi,getScale:nr,async getElementRects(e){let{reference:t,floating:n,strategy:s}=e;const a=this.getOffsetParent||Qv,o=this.getDimensions;return{reference:Iw(t,await a(n),s),floating:{x:0,y:0,...await o(n)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>Co(e).direction==="rtl"},Nw=(e,t,n)=>{const s=new Map,a={platform:Cw,...n},o={...a.platform,_c:s};return fw(e,t,{...a,platform:o})};function o0(e,t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(typeof t[n]=="object"&&e[n]?o0(e[n],t[n]):e[n]=t[n])}const io={disabled:!1,distance:5,skidding:0,container:"body",boundary:void 0,instantMove:!1,disposeTimeout:150,popperTriggers:[],strategy:"absolute",preventOverflow:!0,flip:!0,shift:!0,overflowPadding:0,arrowPadding:0,arrowOverflow:!0,autoHideOnMousedown:!1,themes:{tooltip:{placement:"top",triggers:["hover","focus","touch"],hideTriggers:e=>[...e,"click"],delay:{show:200,hide:0},handleResize:!1,html:!1,loadingContent:"..."},dropdown:{placement:"bottom",triggers:["click"],delay:0,handleResize:!0,autoHide:!0},menu:{$extend:"dropdown",triggers:["hover","focus"],popperTriggers:["hover"],delay:{show:0,hide:400}}}};function Uc(e,t){let n=io.themes[e]||{},s;do s=n[t],typeof s>"u"?n.$extend?n=io.themes[n.$extend]||{}:(n=null,s=io[t]):n=null;while(n);return s}function Ow(e){const t=[e];let n=io.themes[e]||{};do n.$extend&&!n.$resetCss?(t.push(n.$extend),n=io.themes[n.$extend]||{}):n=null;while(n);return t.map(s=>`v-popper--theme-${s}`)}function Jv(e){const t=[e];let n=io.themes[e]||{};do n.$extend?(t.push(n.$extend),n=io.themes[n.$extend]||{}):n=null;while(n);return t}let hr=!1;if(typeof window<"u"){hr=!1;try{const e=Object.defineProperty({},"passive",{get(){hr=!0}});window.addEventListener("test",null,e)}catch{}}let i0=!1;typeof window<"u"&&typeof navigator<"u"&&(i0=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream);const l0=["auto","top","bottom","left","right"].reduce((e,t)=>e.concat([t,`${t}-start`,`${t}-end`]),[]),eE={hover:"mouseenter",focus:"focus",click:"click",touch:"touchstart",pointer:"pointerdown"},tE={hover:"mouseleave",focus:"blur",click:"click",touch:"touchend",pointer:"pointerup"};function nE(e,t){const n=e.indexOf(t);n!==-1&&e.splice(n,1)}function hm(){return new Promise(e=>requestAnimationFrame(()=>{requestAnimationFrame(e)}))}const to=[];let Yi=null;const sE={};function aE(e){let t=sE[e];return t||(t=sE[e]=[]),t}let vf=function(){};typeof window<"u"&&(vf=window.Element);function mn(e){return function(t){return Uc(t.theme,e)}}const fm="__floating-vue__popper",r0=()=>Jo({name:"VPopper",provide(){return{[fm]:{parentPopper:this}}},inject:{[fm]:{default:null}},props:{theme:{type:String,required:!0},targetNodes:{type:Function,required:!0},referenceNode:{type:Function,default:null},popperNode:{type:Function,required:!0},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:mn("disabled")},positioningDisabled:{type:Boolean,default:mn("positioningDisabled")},placement:{type:String,default:mn("placement"),validator:e=>l0.includes(e)},delay:{type:[String,Number,Object],default:mn("delay")},distance:{type:[Number,String],default:mn("distance")},skidding:{type:[Number,String],default:mn("skidding")},triggers:{type:Array,default:mn("triggers")},showTriggers:{type:[Array,Function],default:mn("showTriggers")},hideTriggers:{type:[Array,Function],default:mn("hideTriggers")},popperTriggers:{type:Array,default:mn("popperTriggers")},popperShowTriggers:{type:[Array,Function],default:mn("popperShowTriggers")},popperHideTriggers:{type:[Array,Function],default:mn("popperHideTriggers")},container:{type:[String,Object,vf,Boolean],default:mn("container")},boundary:{type:[String,vf],default:mn("boundary")},strategy:{type:String,validator:e=>["absolute","fixed"].includes(e),default:mn("strategy")},autoHide:{type:[Boolean,Function],default:mn("autoHide")},handleResize:{type:Boolean,default:mn("handleResize")},instantMove:{type:Boolean,default:mn("instantMove")},eagerMount:{type:Boolean,default:mn("eagerMount")},popperClass:{type:[String,Array,Object],default:mn("popperClass")},computeTransformOrigin:{type:Boolean,default:mn("computeTransformOrigin")},autoMinSize:{type:Boolean,default:mn("autoMinSize")},autoSize:{type:[Boolean,String],default:mn("autoSize")},autoMaxSize:{type:Boolean,default:mn("autoMaxSize")},autoBoundaryMaxSize:{type:Boolean,default:mn("autoBoundaryMaxSize")},preventOverflow:{type:Boolean,default:mn("preventOverflow")},overflowPadding:{type:[Number,String],default:mn("overflowPadding")},arrowPadding:{type:[Number,String],default:mn("arrowPadding")},arrowOverflow:{type:Boolean,default:mn("arrowOverflow")},flip:{type:Boolean,default:mn("flip")},shift:{type:Boolean,default:mn("shift")},shiftCrossAxis:{type:Boolean,default:mn("shiftCrossAxis")},noAutoFocus:{type:Boolean,default:mn("noAutoFocus")},disposeTimeout:{type:Number,default:mn("disposeTimeout")}},emits:{show:()=>!0,hide:()=>!0,"update:shown":e=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},data(){return{isShown:!1,isMounted:!1,skipTransition:!1,classes:{showFrom:!1,showTo:!1,hideFrom:!1,hideTo:!0},result:{x:0,y:0,placement:"",strategy:this.strategy,arrow:{x:0,y:0,centerOffset:0},transformOrigin:null},randomId:`popper_${[Math.random(),Date.now()].map(e=>e.toString(36).substring(2,10)).join("_")}`,shownChildren:new Set,lastAutoHide:!0,pendingHide:!1,containsGlobalTarget:!1,isDisposed:!0,mouseDownContains:!1}},computed:{popperId(){return this.ariaId!=null?this.ariaId:this.randomId},shouldMountContent(){return this.eagerMount||this.isMounted},slotData(){return{popperId:this.popperId,isShown:this.isShown,shouldMountContent:this.shouldMountContent,skipTransition:this.skipTransition,autoHide:typeof this.autoHide=="function"?this.lastAutoHide:this.autoHide,show:this.show,hide:this.hide,handleResize:this.handleResize,onResize:this.onResize,classes:{...this.classes,popperClass:this.popperClass},result:this.positioningDisabled?null:this.result,attrs:this.$attrs}},parentPopper(){var e;return(e=this[fm])==null?void 0:e.parentPopper},hasPopperShowTriggerHover(){var e,t;return((e=this.popperTriggers)==null?void 0:e.includes("hover"))||((t=this.popperShowTriggers)==null?void 0:t.includes("hover"))}},watch:{shown:"$_autoShowHide",disabled(e){e?this.dispose():this.init()},async container(){this.isShown&&(this.$_ensureTeleport(),await this.$_computePosition())},triggers:{handler:"$_refreshListeners",deep:!0},positioningDisabled:"$_refreshListeners",...["placement","distance","skidding","boundary","strategy","overflowPadding","arrowPadding","preventOverflow","shift","shiftCrossAxis","flip"].reduce((e,t)=>(e[t]="$_computePosition",e),{})},created(){this.autoMinSize&&console.warn('[floating-vue] `autoMinSize` option is deprecated. Use `autoSize="min"` instead.'),this.autoMaxSize&&console.warn("[floating-vue] `autoMaxSize` option is deprecated. Use `autoBoundaryMaxSize` instead.")},mounted(){this.init(),this.$_detachPopperNode()},activated(){this.$_autoShowHide()},deactivated(){this.hide()},beforeUnmount(){this.dispose()},methods:{show({event:e=null,skipDelay:t=!1,force:n=!1}={}){var s,a;(s=this.parentPopper)!=null&&s.lockedChild&&this.parentPopper.lockedChild!==this||(this.pendingHide=!1,(n||!this.disabled)&&(((a=this.parentPopper)==null?void 0:a.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.$_scheduleShow(e,t),this.$emit("show"),this.$_showFrameLocked=!0,requestAnimationFrame(()=>{this.$_showFrameLocked=!1})),this.$emit("update:shown",!0))},hide({event:e=null,skipDelay:t=!1}={}){var n;if(!this.$_hideInProgress){if(this.shownChildren.size>0){this.pendingHide=!0;return}if(this.hasPopperShowTriggerHover&&this.$_isAimingPopper()){this.parentPopper&&(this.parentPopper.lockedChild=this,clearTimeout(this.parentPopper.lockedChildTimer),this.parentPopper.lockedChildTimer=setTimeout(()=>{this.parentPopper.lockedChild===this&&(this.parentPopper.lockedChild.hide({skipDelay:t}),this.parentPopper.lockedChild=null)},1e3));return}((n=this.parentPopper)==null?void 0:n.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.pendingHide=!1,this.$_scheduleHide(e,t),this.$emit("hide"),this.$emit("update:shown",!1)}},init(){var e;this.isDisposed&&(this.isDisposed=!1,this.isMounted=!1,this.$_events=[],this.$_preventShow=!1,this.$_referenceNode=((e=this.referenceNode)==null?void 0:e.call(this))??this.$el,this.$_targetNodes=this.targetNodes().filter(t=>t.nodeType===t.ELEMENT_NODE),this.$_popperNode=this.popperNode(),this.$_innerNode=this.$_popperNode.querySelector(".v-popper__inner"),this.$_arrowNode=this.$_popperNode.querySelector(".v-popper__arrow-container"),this.$_swapTargetAttrs("title","data-original-title"),this.$_detachPopperNode(),this.triggers.length&&this.$_addEventListeners(),this.shown&&this.show())},dispose(){this.isDisposed||(this.isDisposed=!0,this.$_removeEventListeners(),this.hide({skipDelay:!0}),this.$_detachPopperNode(),this.isMounted=!1,this.isShown=!1,this.$_updateParentShownChildren(!1),this.$_swapTargetAttrs("data-original-title","title"))},async onResize(){this.isShown&&(await this.$_computePosition(),this.$emit("resize"))},async $_computePosition(){if(this.isDisposed||this.positioningDisabled)return;const e={strategy:this.strategy,middleware:[]};(this.distance||this.skidding)&&e.middleware.push(Tw({mainAxis:this.distance,crossAxis:this.skidding}));const t=this.placement.startsWith("auto");if(t?e.middleware.push(vw({alignment:this.placement.split("-")[1]??""})):e.placement=this.placement,this.preventOverflow&&(this.shift&&e.middleware.push(Sw({padding:this.overflowPadding,boundary:this.boundary,crossAxis:this.shiftCrossAxis})),!t&&this.flip&&e.middleware.push(Ew({padding:this.overflowPadding,boundary:this.boundary}))),e.middleware.push(gw({element:this.$_arrowNode,padding:this.arrowPadding})),this.arrowOverflow&&e.middleware.push({name:"arrowOverflow",fn:({placement:s,rects:a,middlewareData:o})=>{let i;const{centerOffset:l}=o.arrow;return s.startsWith("top")||s.startsWith("bottom")?i=Math.abs(l)>a.reference.width/2:i=Math.abs(l)>a.reference.height/2,{data:{overflow:i}}}}),this.autoMinSize||this.autoSize){const s=this.autoSize?this.autoSize:this.autoMinSize?"min":null;e.middleware.push({name:"autoSize",fn:({rects:a,placement:o,middlewareData:i})=>{var l;if((l=i.autoSize)!=null&&l.skip)return{};let r,c;return o.startsWith("top")||o.startsWith("bottom")?r=a.reference.width:c=a.reference.height,this.$_innerNode.style[s==="min"?"minWidth":s==="max"?"maxWidth":"width"]=r!=null?`${r}px`:null,this.$_innerNode.style[s==="min"?"minHeight":s==="max"?"maxHeight":"height"]=c!=null?`${c}px`:null,{data:{skip:!0},reset:{rects:!0}}}})}(this.autoMaxSize||this.autoBoundaryMaxSize)&&(this.$_innerNode.style.maxWidth=null,this.$_innerNode.style.maxHeight=null,e.middleware.push(Aw({boundary:this.boundary,padding:this.overflowPadding,apply:({availableWidth:s,availableHeight:a})=>{this.$_innerNode.style.maxWidth=s!=null?`${s}px`:null,this.$_innerNode.style.maxHeight=a!=null?`${a}px`:null}})));const n=await Nw(this.$_referenceNode,this.$_popperNode,e);Object.assign(this.result,{x:n.x,y:n.y,placement:n.placement,strategy:n.strategy,arrow:{...n.middlewareData.arrow,...n.middlewareData.arrowOverflow}})},$_scheduleShow(e,t=!1){if(this.$_updateParentShownChildren(!0),this.$_hideInProgress=!1,clearTimeout(this.$_scheduleTimer),Yi&&this.instantMove&&Yi.instantMove&&Yi!==this.parentPopper){Yi.$_applyHide(!0),this.$_applyShow(!0);return}t?this.$_applyShow():this.$_scheduleTimer=setTimeout(this.$_applyShow.bind(this),this.$_computeDelay("show"))},$_scheduleHide(e,t=!1){if(this.shownChildren.size>0){this.pendingHide=!0;return}this.$_updateParentShownChildren(!1),this.$_hideInProgress=!0,clearTimeout(this.$_scheduleTimer),this.isShown&&(Yi=this),t?this.$_applyHide():this.$_scheduleTimer=setTimeout(this.$_applyHide.bind(this),this.$_computeDelay("hide"))},$_computeDelay(e){const t=this.delay;return parseInt(t&&t[e]||t||0)},async $_applyShow(e=!1){clearTimeout(this.$_disposeTimer),clearTimeout(this.$_scheduleTimer),this.skipTransition=e,!this.isShown&&(this.$_ensureTeleport(),await hm(),await this.$_computePosition(),await this.$_applyShowEffect(),this.positioningDisabled||this.$_registerEventListeners([...Rd(this.$_referenceNode),...Rd(this.$_popperNode)],"scroll",()=>{this.$_computePosition()}))},async $_applyShowEffect(){if(this.$_hideInProgress)return;if(this.computeTransformOrigin){const t=this.$_referenceNode.getBoundingClientRect(),n=this.$_popperNode.querySelector(".v-popper__wrapper"),s=n.parentNode.getBoundingClientRect(),a=t.x+t.width/2-(s.left+n.offsetLeft),o=t.y+t.height/2-(s.top+n.offsetTop);this.result.transformOrigin=`${a}px ${o}px`}this.isShown=!0,this.$_applyAttrsToTarget({"aria-describedby":this.popperId,"data-popper-shown":""});const e=this.showGroup;if(e){let t;for(let n=0;n<to.length;n++)t=to[n],t.showGroup!==e&&(t.hide(),t.$emit("close-group"))}to.push(this),document.body.classList.add("v-popper--some-open");for(const t of Jv(this.theme))aE(t).push(this),document.body.classList.add(`v-popper--some-open--${t}`);this.$emit("apply-show"),this.classes.showFrom=!0,this.classes.showTo=!1,this.classes.hideFrom=!1,this.classes.hideTo=!1,await hm(),this.classes.showFrom=!1,this.classes.showTo=!0,this.noAutoFocus||this.$_popperNode.focus()},async $_applyHide(e=!1){if(this.shownChildren.size>0){this.pendingHide=!0,this.$_hideInProgress=!1;return}if(clearTimeout(this.$_scheduleTimer),!this.isShown)return;this.skipTransition=e,nE(to,this),to.length===0&&document.body.classList.remove("v-popper--some-open");for(const n of Jv(this.theme)){const s=aE(n);nE(s,this),s.length===0&&document.body.classList.remove(`v-popper--some-open--${n}`)}Yi===this&&(Yi=null),this.isShown=!1,this.$_applyAttrsToTarget({"aria-describedby":void 0,"data-popper-shown":void 0}),clearTimeout(this.$_disposeTimer);const t=this.disposeTimeout;t!==null&&(this.$_disposeTimer=setTimeout(()=>{this.$_popperNode&&(this.$_detachPopperNode(),this.isMounted=!1)},t)),this.$_removeEventListeners("scroll"),this.$emit("apply-hide"),this.classes.showFrom=!1,this.classes.showTo=!1,this.classes.hideFrom=!0,this.classes.hideTo=!1,await hm(),this.classes.hideFrom=!1,this.classes.hideTo=!0},$_autoShowHide(){this.shown?this.show():this.hide()},$_ensureTeleport(){if(this.isDisposed)return;let e=this.container;if(typeof e=="string"?e=window.document.querySelector(e):e===!1&&(e=this.$_targetNodes[0].parentNode),!e)throw new Error("No container for popover: "+this.container);e.appendChild(this.$_popperNode),this.isMounted=!0},$_addEventListeners(){const e=n=>{this.isShown&&!this.$_hideInProgress||(n.usedByTooltip=!0,!this.$_preventShow&&this.show({event:n}))};this.$_registerTriggerListeners(this.$_targetNodes,eE,this.triggers,this.showTriggers,e),this.$_registerTriggerListeners([this.$_popperNode],eE,this.popperTriggers,this.popperShowTriggers,e);const t=n=>{n.usedByTooltip||this.hide({event:n})};this.$_registerTriggerListeners(this.$_targetNodes,tE,this.triggers,this.hideTriggers,t),this.$_registerTriggerListeners([this.$_popperNode],tE,this.popperTriggers,this.popperHideTriggers,t)},$_registerEventListeners(e,t,n){this.$_events.push({targetNodes:e,eventType:t,handler:n}),e.forEach(s=>s.addEventListener(t,n,hr?{passive:!0}:void 0))},$_registerTriggerListeners(e,t,n,s,a){let o=n;s!=null&&(o=typeof s=="function"?s(o):s),o.forEach(i=>{const l=t[i];l&&this.$_registerEventListeners(e,l,a)})},$_removeEventListeners(e){const t=[];this.$_events.forEach(n=>{const{targetNodes:s,eventType:a,handler:o}=n;!e||e===a?s.forEach(i=>i.removeEventListener(a,o)):t.push(n)}),this.$_events=t},$_refreshListeners(){this.isDisposed||(this.$_removeEventListeners(),this.$_addEventListeners())},$_handleGlobalClose(e,t=!1){this.$_showFrameLocked||(this.hide({event:e}),e.closePopover?this.$emit("close-directive"):this.$emit("auto-hide"),t&&(this.$_preventShow=!0,setTimeout(()=>{this.$_preventShow=!1},300)))},$_detachPopperNode(){this.$_popperNode.parentNode&&this.$_popperNode.parentNode.removeChild(this.$_popperNode)},$_swapTargetAttrs(e,t){for(const n of this.$_targetNodes){const s=n.getAttribute(e);s&&(n.removeAttribute(e),n.setAttribute(t,s))}},$_applyAttrsToTarget(e){for(const t of this.$_targetNodes)for(const n in e){const s=e[n];s==null?t.removeAttribute(n):t.setAttribute(n,s)}},$_updateParentShownChildren(e){let t=this.parentPopper;for(;t;)e?t.shownChildren.add(this.randomId):(t.shownChildren.delete(this.randomId),t.pendingHide&&t.hide()),t=t.parentPopper},$_isAimingPopper(){const e=this.$_referenceNode.getBoundingClientRect();if(bc>=e.left&&bc<=e.right&&Tc>=e.top&&Tc<=e.bottom){const t=this.$_popperNode.getBoundingClientRect(),n=bc-hi,s=Tc-fi,a=t.left+t.width/2-hi+(t.top+t.height/2)-fi+t.width+t.height,o=hi+n*a,i=fi+s*a;return yu(hi,fi,o,i,t.left,t.top,t.left,t.bottom)||yu(hi,fi,o,i,t.left,t.top,t.right,t.top)||yu(hi,fi,o,i,t.right,t.top,t.right,t.bottom)||yu(hi,fi,o,i,t.left,t.bottom,t.right,t.bottom)}return!1}},render(){return this.$slots.default(this.slotData)}});if(typeof document<"u"&&typeof window<"u"){if(i0){const e=hr?{passive:!0,capture:!0}:!0;document.addEventListener("touchstart",t=>oE(t,!0),e),document.addEventListener("touchend",t=>iE(t,!0),e)}else window.addEventListener("mousedown",e=>oE(e,!1),!0),window.addEventListener("click",e=>iE(e,!1),!0);window.addEventListener("resize",xw)}function oE(e,t){if(io.autoHideOnMousedown)c0(e,t);else for(let n=0;n<to.length;n++){const s=to[n];try{s.mouseDownContains=s.popperNode().contains(e.target)}catch{}}}function iE(e,t){io.autoHideOnMousedown||c0(e,t)}function c0(e,t){const n={};for(let s=to.length-1;s>=0;s--){const a=to[s];try{const o=a.containsGlobalTarget=a.mouseDownContains||a.popperNode().contains(e.target);a.pendingHide=!1,requestAnimationFrame(()=>{if(a.pendingHide=!1,!n[a.randomId]&&lE(a,o,e)){if(a.$_handleGlobalClose(e,t),!e.closeAllPopover&&e.closePopover&&o){let l=a.parentPopper;for(;l;)n[l.randomId]=!0,l=l.parentPopper;return}let i=a.parentPopper;for(;i&&lE(i,i.containsGlobalTarget,e);)i.$_handleGlobalClose(e,t),i=i.parentPopper}})}catch{}}}function lE(e,t,n){return n.closeAllPopover||n.closePopover&&t||Rw(e,n)&&!t}function Rw(e,t){if(typeof e.autoHide=="function"){const n=e.autoHide(t);return e.lastAutoHide=n,n}return e.autoHide}function xw(){for(let e=0;e<to.length;e++)to[e].$_computePosition()}let hi=0,fi=0,bc=0,Tc=0;typeof window<"u"&&window.addEventListener("mousemove",e=>{hi=bc,fi=Tc,bc=e.clientX,Tc=e.clientY},hr?{passive:!0}:void 0);function yu(e,t,n,s,a,o,i,l){const r=((i-a)*(t-o)-(l-o)*(e-a))/((l-o)*(n-e)-(i-a)*(s-t)),c=((n-e)*(t-o)-(s-t)*(e-a))/((l-o)*(n-e)-(i-a)*(s-t));return r>=0&&r<=1&&c>=0&&c<=1}const ww={extends:r0()},lp=(e,t)=>{const n=e.__vccOpts||e;for(const[s,a]of t)n[s]=a;return n};function $w(e,t,n,s,a,o){return p(),E("div",{ref:"reference",class:ae(["v-popper",{"v-popper--shown":e.slotData.isShown}])},[We(e.$slots,"default",iS(lS(e.slotData)))],2)}const Mw=lp(ww,[["render",$w]]);function Lw(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var n=e.indexOf("Trident/");if(n>0){var s=e.indexOf("rv:");return parseInt(e.substring(s+3,e.indexOf(".",s)),10)}var a=e.indexOf("Edge/");return a>0?parseInt(e.substring(a+5,e.indexOf(".",a)),10):-1}let rd;function Ef(){Ef.init||(Ef.init=!0,rd=Lw()!==-1)}var rp={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Ef(),Wt(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",rd&&this.$el.appendChild(e),e.data="about:blank",rd||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!rd&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const Dw=oS();sS("data-v-b329ee4c");const Pw={class:"resize-observer",tabindex:"-1"};aS();const kw=Dw((e,t,n,s,a,o)=>(p(),L("div",Pw)));rp.render=kw;rp.__scopeId="data-v-b329ee4c";rp.__file="src/components/ResizeObserver.vue";const u0=(e="theme")=>({computed:{themeClass(){return Ow(this[e])}}}),Bw=Jo({name:"VPopperContent",components:{ResizeObserver:rp},mixins:[u0()],props:{popperId:String,theme:String,shown:Boolean,mounted:Boolean,skipTransition:Boolean,autoHide:Boolean,handleResize:Boolean,classes:Object,result:Object},emits:["hide","resize"],methods:{toPx(e){return e!=null&&!isNaN(e)?`${e}px`:null}}}),Uw=["id","aria-hidden","tabindex","data-popper-placement"],Fw={ref:"inner",class:"v-popper__inner"},Gw=m("div",{class:"v-popper__arrow-outer"},null,-1),Vw=m("div",{class:"v-popper__arrow-inner"},null,-1),Hw=[Gw,Vw];function Ww(e,t,n,s,a,o){const i=W("ResizeObserver");return p(),E("div",{id:e.popperId,ref:"popover",class:ae(["v-popper__popper",[e.themeClass,e.classes.popperClass,{"v-popper__popper--shown":e.shown,"v-popper__popper--hidden":!e.shown,"v-popper__popper--show-from":e.classes.showFrom,"v-popper__popper--show-to":e.classes.showTo,"v-popper__popper--hide-from":e.classes.hideFrom,"v-popper__popper--hide-to":e.classes.hideTo,"v-popper__popper--skip-transition":e.skipTransition,"v-popper__popper--arrow-overflow":e.result&&e.result.arrow.overflow,"v-popper__popper--no-positioning":!e.result}]]),style:Zt(e.result?{position:e.result.strategy,transform:`translate3d(${Math.round(e.result.x)}px,${Math.round(e.result.y)}px,0)`}:void 0),"aria-hidden":e.shown?"false":"true",tabindex:e.autoHide?0:void 0,"data-popper-placement":e.result?e.result.placement:void 0,onKeyup:t[2]||(t[2]=wn(l=>e.autoHide&&e.$emit("hide"),["esc"]))},[m("div",{class:"v-popper__backdrop",onClick:t[0]||(t[0]=l=>e.autoHide&&e.$emit("hide"))}),m("div",{class:"v-popper__wrapper",style:Zt(e.result?{transformOrigin:e.result.transformOrigin}:void 0)},[m("div",Fw,[e.mounted?(p(),E(ue,{key:0},[m("div",null,[We(e.$slots,"default")]),e.handleResize?(p(),L(i,{key:0,onNotify:t[1]||(t[1]=l=>e.$emit("resize",l))})):$("",!0)],64)):$("",!0)],512),m("div",{ref:"arrow",class:"v-popper__arrow-container",style:Zt(e.result?{left:e.toPx(e.result.arrow.x),top:e.toPx(e.result.arrow.y)}:void 0)},Hw,4)],4)],46,Uw)}const d0=lp(Bw,[["render",Ww]]),p0={methods:{show(...e){return this.$refs.popper.show(...e)},hide(...e){return this.$refs.popper.hide(...e)},dispose(...e){return this.$refs.popper.dispose(...e)},onResize(...e){return this.$refs.popper.onResize(...e)}}};let bf=function(){};typeof window<"u"&&(bf=window.Element);const zw=Jo({name:"VPopperWrapper",components:{Popper:Mw,PopperContent:d0},mixins:[p0,u0("finalTheme")],props:{theme:{type:String,default:null},referenceNode:{type:Function,default:null},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:void 0},positioningDisabled:{type:Boolean,default:void 0},placement:{type:String,default:void 0},delay:{type:[String,Number,Object],default:void 0},distance:{type:[Number,String],default:void 0},skidding:{type:[Number,String],default:void 0},triggers:{type:Array,default:void 0},showTriggers:{type:[Array,Function],default:void 0},hideTriggers:{type:[Array,Function],default:void 0},popperTriggers:{type:Array,default:void 0},popperShowTriggers:{type:[Array,Function],default:void 0},popperHideTriggers:{type:[Array,Function],default:void 0},container:{type:[String,Object,bf,Boolean],default:void 0},boundary:{type:[String,bf],default:void 0},strategy:{type:String,default:void 0},autoHide:{type:[Boolean,Function],default:void 0},handleResize:{type:Boolean,default:void 0},instantMove:{type:Boolean,default:void 0},eagerMount:{type:Boolean,default:void 0},popperClass:{type:[String,Array,Object],default:void 0},computeTransformOrigin:{type:Boolean,default:void 0},autoMinSize:{type:Boolean,default:void 0},autoSize:{type:[Boolean,String],default:void 0},autoMaxSize:{type:Boolean,default:void 0},autoBoundaryMaxSize:{type:Boolean,default:void 0},preventOverflow:{type:Boolean,default:void 0},overflowPadding:{type:[Number,String],default:void 0},arrowPadding:{type:[Number,String],default:void 0},arrowOverflow:{type:Boolean,default:void 0},flip:{type:Boolean,default:void 0},shift:{type:Boolean,default:void 0},shiftCrossAxis:{type:Boolean,default:void 0},noAutoFocus:{type:Boolean,default:void 0},disposeTimeout:{type:Number,default:void 0}},emits:{show:()=>!0,hide:()=>!0,"update:shown":e=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},computed:{finalTheme(){return this.theme??this.$options.vPopperTheme}},methods:{getTargetNodes(){return Array.from(this.$el.children).filter(e=>e!==this.$refs.popperContent.$el)}}});function Yw(e,t,n,s,a,o){const i=W("PopperContent"),l=W("Popper");return p(),L(l,Qn({ref:"popper"},e.$props,{theme:e.finalTheme,"target-nodes":e.getTargetNodes,"popper-node":()=>e.$refs.popperContent.$el,class:[e.themeClass],onShow:t[0]||(t[0]=()=>e.$emit("show")),onHide:t[1]||(t[1]=()=>e.$emit("hide")),"onUpdate:shown":t[2]||(t[2]=r=>e.$emit("update:shown",r)),onApplyShow:t[3]||(t[3]=()=>e.$emit("apply-show")),onApplyHide:t[4]||(t[4]=()=>e.$emit("apply-hide")),onCloseGroup:t[5]||(t[5]=()=>e.$emit("close-group")),onCloseDirective:t[6]||(t[6]=()=>e.$emit("close-directive")),onAutoHide:t[7]||(t[7]=()=>e.$emit("auto-hide")),onResize:t[8]||(t[8]=()=>e.$emit("resize"))}),{default:Y(({popperId:r,isShown:c,shouldMountContent:u,skipTransition:d,autoHide:h,show:g,hide:f,handleResize:b,onResize:A,classes:v,result:T})=>[We(e.$slots,"default",{shown:c,show:g,hide:f}),S(i,{ref:"popperContent","popper-id":r,theme:e.finalTheme,shown:c,mounted:u,"skip-transition":d,"auto-hide":h,"handle-resize":b,classes:v,result:T,onHide:f,onResize:A},{default:Y(()=>[We(e.$slots,"popper",{shown:c,hide:f})]),_:2},1032,["popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:3},16,["theme","target-nodes","popper-node","class"])}const Dg=lp(zw,[["render",Yw]]),jw={...Dg,name:"VDropdown",vPopperTheme:"dropdown"},Kw={...Dg,name:"VMenu",vPopperTheme:"menu"},Xw={...Dg,name:"VTooltip",vPopperTheme:"tooltip"},qw=Jo({name:"VTooltipDirective",components:{Popper:r0(),PopperContent:d0},mixins:[p0],inheritAttrs:!1,props:{theme:{type:String,default:"tooltip"},html:{type:Boolean,default:e=>Uc(e.theme,"html")},content:{type:[String,Number,Function],default:null},loadingContent:{type:String,default:e=>Uc(e.theme,"loadingContent")},targetNodes:{type:Function,required:!0}},data(){return{asyncContent:null}},computed:{isContentAsync(){return typeof this.content=="function"},loading(){return this.isContentAsync&&this.asyncContent==null},finalContent(){return this.isContentAsync?this.loading?this.loadingContent:this.asyncContent:this.content}},watch:{content:{handler(){this.fetchContent(!0)},immediate:!0},async finalContent(){await this.$nextTick(),this.$refs.popper.onResize()}},created(){this.$_fetchId=0},methods:{fetchContent(e){if(typeof this.content=="function"&&this.$_isShown&&(e||!this.$_loading&&this.asyncContent==null)){this.asyncContent=null,this.$_loading=!0;const t=++this.$_fetchId,n=this.content(this);n.then?n.then(s=>this.onResult(t,s)):this.onResult(t,n)}},onResult(e,t){e===this.$_fetchId&&(this.$_loading=!1,this.asyncContent=t)},onShow(){this.$_isShown=!0,this.fetchContent()},onHide(){this.$_isShown=!1}}}),Zw=["innerHTML"],Qw=["textContent"];function Jw(e,t,n,s,a,o){const i=W("PopperContent"),l=W("Popper");return p(),L(l,Qn({ref:"popper"},e.$attrs,{theme:e.theme,"target-nodes":e.targetNodes,"popper-node":()=>e.$refs.popperContent.$el,onApplyShow:e.onShow,onApplyHide:e.onHide}),{default:Y(({popperId:r,isShown:c,shouldMountContent:u,skipTransition:d,autoHide:h,hide:g,handleResize:f,onResize:b,classes:A,result:v})=>[S(i,{ref:"popperContent",class:ae({"v-popper--tooltip-loading":e.loading}),"popper-id":r,theme:e.theme,shown:c,mounted:u,"skip-transition":d,"auto-hide":h,"handle-resize":f,classes:A,result:v,onHide:g,onResize:b},{default:Y(()=>[e.html?(p(),E("div",{key:0,innerHTML:e.finalContent},null,8,Zw)):(p(),E("div",{key:1,textContent:I(e.finalContent)},null,8,Qw))]),_:2},1032,["class","popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:1},16,["theme","target-nodes","popper-node","onApplyShow","onApplyHide"])}const e$=lp(qw,[["render",Jw]]),m0="v-popper--has-tooltip";function t$(e,t){let n=e.placement;if(!n&&t)for(const s of l0)t[s]&&(n=s);return n||(n=Uc(e.theme||"tooltip","placement")),n}function h0(e,t,n){let s;const a=typeof t;return a==="string"?s={content:t}:t&&a==="object"?s=t:s={content:!1},s.placement=t$(s,n),s.targetNodes=()=>[e],s.referenceNode=()=>e,s}let gm,Fc,n$=0;function s$(){if(gm)return;Fc=j([]),gm=nS({name:"VTooltipDirectiveApp",setup(){return{directives:Fc}},render(){return this.directives.map(t=>On(e$,{...t.options,shown:t.shown||t.options.shown,key:t.id}))},devtools:{hide:!0}});const e=document.createElement("div");document.body.appendChild(e),gm.mount(e)}function a$(e,t,n){s$();const s=j(h0(e,t,n)),a=j(!1),o={id:n$++,options:s,shown:a};return Fc.value.push(o),e.classList&&e.classList.add(m0),e.$_popper={options:s,item:o,show(){a.value=!0},hide(){a.value=!1}}}function f0(e){if(e.$_popper){const t=Fc.value.indexOf(e.$_popper.item);t!==-1&&Fc.value.splice(t,1),delete e.$_popper,delete e.$_popperOldShown,delete e.$_popperMountTarget}e.classList&&e.classList.remove(m0)}function rE(e,{value:t,modifiers:n}){const s=h0(e,t,n);if(!s.content||Uc(s.theme||"tooltip","disabled"))f0(e);else{let a;e.$_popper?(a=e.$_popper,a.options.value=s):a=a$(e,t,n),typeof t.shown<"u"&&t.shown!==e.$_popperOldShown&&(e.$_popperOldShown=t.shown,t.shown?a.show():a.hide())}}const o$={beforeMount:rE,updated:rE,beforeUnmount(e){f0(e)}};function cE(e){e.addEventListener("mousedown",xd),e.addEventListener("click",xd),e.addEventListener("touchstart",g0,hr?{passive:!0}:!1)}function uE(e){e.removeEventListener("mousedown",xd),e.removeEventListener("click",xd),e.removeEventListener("touchstart",g0),e.removeEventListener("touchend",_0),e.removeEventListener("touchcancel",v0)}function xd(e){const t=e.currentTarget;e.closePopover=!t.$_vclosepopover_touch,e.closeAllPopover=t.$_closePopoverModifiers&&!!t.$_closePopoverModifiers.all}function g0(e){if(e.changedTouches.length===1){const t=e.currentTarget;t.$_vclosepopover_touch=!0;const n=e.changedTouches[0];t.$_vclosepopover_touchPoint=n,t.addEventListener("touchend",_0),t.addEventListener("touchcancel",v0)}}function _0(e){const t=e.currentTarget;if(t.$_vclosepopover_touch=!1,e.changedTouches.length===1){const n=e.changedTouches[0],s=t.$_vclosepopover_touchPoint;e.closePopover=Math.abs(n.screenY-s.screenY)<20&&Math.abs(n.screenX-s.screenX)<20,e.closeAllPopover=t.$_closePopoverModifiers&&!!t.$_closePopoverModifiers.all}}function v0(e){const t=e.currentTarget;t.$_vclosepopover_touch=!1}const i$={beforeMount(e,{value:t,modifiers:n}){e.$_closePopoverModifiers=n,(typeof t>"u"||t)&&cE(e)},updated(e,{value:t,oldValue:n,modifiers:s}){e.$_closePopoverModifiers=s,t!==n&&(typeof t>"u"||t?cE(e):uE(e))},beforeUnmount(e){uE(e)}};function l$(e,t={}){e.$_vTooltipInstalled||(e.$_vTooltipInstalled=!0,o0(io,t),e.directive("tooltip",o$),e.directive("close-popper",i$),e.component("VTooltip",Xw),e.component("VDropdown",jw),e.component("VMenu",Kw))}const r$={version:"5.2.2",install:l$,options:io};var _m,dE;function c$(){if(dE)return _m;dE=1;function e(t){const n=t.regex,s=n.concat(/[\p{L}_]/u,n.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),a=/[\p{L}0-9._:-]+/u,o={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},i={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},l=t.inherit(i,{begin:/\(/,end:/\)/}),r=t.inherit(t.APOS_STRING_MODE,{className:"string"}),c=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),u={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:a,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[o]},{begin:/'/,end:/'/,contains:[o]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[i,c,r,l,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[i,l,c,r]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},o,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[c]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[u],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[u],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:n.concat(/</,n.lookahead(n.concat(s,n.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:s,relevance:0,starts:u}]},{className:"tag",begin:n.concat(/<\//,n.lookahead(n.concat(s,/>/))),contains:[{className:"name",begin:s,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}return _m=e,_m}var vm,pE;function u$(){if(pE)return vm;pE=1;function e(t){const n=t.regex,s={},a={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[s]}]};Object.assign(s,{className:"variable",variants:[{begin:n.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},a]});const o={className:"subst",begin:/\$\(/,end:/\)/,contains:[t.BACKSLASH_ESCAPE]},i=t.inherit(t.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),l={begin:/<<-?\s*(?=\w+)/,starts:{contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},r={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,s,o]};o.contains.push(r);const c={match:/\\"/},u={className:"string",begin:/'/,end:/'/},d={match:/\\'/},h={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},t.NUMBER_MODE,s]},g=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],f=t.SHEBANG({binary:`(${g.join("|")})`,relevance:10}),b={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[t.inherit(t.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},A=["if","then","else","elif","fi","for","while","until","in","do","done","case","esac","function","select"],v=["true","false"],T={match:/(\/[a-z._-]+)+/},_=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],N=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],R=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],O=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:A,literal:v,built_in:[..._,...N,"set","shopt",...R,...O]},contains:[f,t.SHEBANG(),b,h,i,l,T,r,c,u,d,s]}}return vm=e,vm}var Em,mE;function d$(){if(mE)return Em;mE=1;function e(t){const n=t.regex,s=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),a="decltype\\(auto\\)",o="[a-zA-Z_]\\w*::",l="("+a+"|"+n.optional(o)+"[a-zA-Z_]\\w*"+n.optional("<[^<>]+>")+")",r={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},h={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},s,t.C_BLOCK_COMMENT_MODE]},g={className:"title",begin:n.optional(o)+t.IDENT_RE,relevance:0},f=n.optional(o)+t.IDENT_RE+"\\s*\\(",v={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},T=[h,r,s,t.C_BLOCK_COMMENT_MODE,d,u],_={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:v,contains:T.concat([{begin:/\(/,end:/\)/,keywords:v,contains:T.concat(["self"]),relevance:0}]),relevance:0},N={begin:"("+l+"[\\*&\\s]+)+"+f,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:v,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:a,keywords:v,relevance:0},{begin:f,returnBegin:!0,contains:[t.inherit(g,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:[s,t.C_BLOCK_COMMENT_MODE,u,d,r,{begin:/\(/,end:/\)/,keywords:v,relevance:0,contains:["self",s,t.C_BLOCK_COMMENT_MODE,u,d,r]}]},r,s,t.C_BLOCK_COMMENT_MODE,h]};return{name:"C",aliases:["h"],keywords:v,disableAutodetect:!0,illegal:"</",contains:[].concat(_,N,T,[h,{begin:t.IDENT_RE+"::",keywords:v},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},t.TITLE_MODE]}]),exports:{preprocessor:h,strings:u,keywords:v}}}return Em=e,Em}var bm,hE;function p$(){if(hE)return bm;hE=1;function e(t){const n=t.regex,s=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),a="decltype\\(auto\\)",o="[a-zA-Z_]\\w*::",l="(?!struct)("+a+"|"+n.optional(o)+"[a-zA-Z_]\\w*"+n.optional("<[^<>]+>")+")",r={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},h={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},s,t.C_BLOCK_COMMENT_MODE]},g={className:"title",begin:n.optional(o)+t.IDENT_RE,relevance:0},f=n.optional(o)+t.IDENT_RE+"\\s*\\(",b=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],A=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],v=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],T=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],R={type:A,keyword:b,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:v},O={className:"function.dispatch",relevance:0,keywords:{_hint:T},begin:n.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,n.lookahead(/(<[^<>]+>|)\s*\(/))},x=[O,h,r,s,t.C_BLOCK_COMMENT_MODE,d,u],w={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:R,contains:x.concat([{begin:/\(/,end:/\)/,keywords:R,contains:x.concat(["self"]),relevance:0}]),relevance:0},D={className:"function",begin:"("+l+"[\\*&\\s]+)+"+f,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:R,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:a,keywords:R,relevance:0},{begin:f,returnBegin:!0,contains:[g],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[u,d]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:R,relevance:0,contains:[s,t.C_BLOCK_COMMENT_MODE,u,d,r,{begin:/\(/,end:/\)/,keywords:R,relevance:0,contains:["self",s,t.C_BLOCK_COMMENT_MODE,u,d,r]}]},r,s,t.C_BLOCK_COMMENT_MODE,h]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:R,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(w,D,O,x,[h,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function)\\s*<(?!<)",end:">",keywords:R,contains:["self",r]},{begin:t.IDENT_RE+"::",keywords:R},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}return bm=e,bm}var Tm,fE;function m$(){if(fE)return Tm;fE=1;function e(t){const n=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],s=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],a=["default","false","null","true"],o=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],i=["add","alias","and","ascending","async","await","by","descending","equals","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","remove","select","set","unmanaged","value|0","var","when","where","with","yield"],l={keyword:o.concat(i),built_in:n,literal:a},r=t.inherit(t.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),c={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},u={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},d={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},h=t.inherit(d,{illegal:/\n/}),g={className:"subst",begin:/\{/,end:/\}/,keywords:l},f=t.inherit(g,{illegal:/\n/}),b={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},t.BACKSLASH_ESCAPE,f]},A={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},g]},v=t.inherit(A,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},f]});g.contains=[A,b,d,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,c,t.C_BLOCK_COMMENT_MODE],f.contains=[v,b,h,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,c,t.inherit(t.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const T={variants:[u,A,b,d,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},_={begin:"<",end:">",contains:[{beginKeywords:"in out"},r]},N=t.IDENT_RE+"(<"+t.IDENT_RE+"(\\s*,\\s*"+t.IDENT_RE+")*>)?(\\[\\])?",R={begin:"@"+t.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:l,illegal:/::/,contains:[t.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},T,c,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},r,_,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[r,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[r,_,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+N+"\\s+)+"+t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:l,contains:[{beginKeywords:s.join(" "),relevance:0},{begin:t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[t.TITLE_MODE,_],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,relevance:0,contains:[T,c,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},R]}}return Tm=e,Tm}var Sm,gE;function h$(){if(gE)return Sm;gE=1;const e=c=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:c.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[c.APOS_STRING_MODE,c.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:c.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),t=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],n=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],s=[...t,...n],a=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),o=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),i=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),l=["accent-color","align-content","align-items","align-self","alignment-baseline","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-end-end-radius","border-end-start-radius","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","cx","cy","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","empty-cells","enable-background","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","flood-color","flood-opacity","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","kerning","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","marker","marker-end","marker-mid","marker-start","mask","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","speak","speak-as","src","tab-size","table-layout","text-anchor","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","vector-effect","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index"].sort().reverse();function r(c){const u=c.regex,d=e(c),h={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},g="and or not only",f=/@-?\w[\w]*(-\w+)*/,b="[a-zA-Z-][a-zA-Z0-9_-]*",A=[c.APOS_STRING_MODE,c.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[d.BLOCK_COMMENT,h,d.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+b,relevance:0},d.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+o.join("|")+")"},{begin:":(:)?("+i.join("|")+")"}]},d.CSS_VARIABLE,{className:"attribute",begin:"\\b("+l.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[d.BLOCK_COMMENT,d.HEXCOLOR,d.IMPORTANT,d.CSS_NUMBER_MODE,...A,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...A,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},d.FUNCTION_DISPATCH]},{begin:u.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:f},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:g,attribute:a.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...A,d.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+s.join("|")+")\\b"}]}}return Sm=r,Sm}var Am,_E;function f$(){if(_E)return Am;_E=1;function e(t){const n=t.regex,s={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},a={begin:"^[-\\*]{3,}",end:"$"},o={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},i={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},l={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},r=/[A-Za-z][A-Za-z0-9+.-]*/,c={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:n.concat(/\[.+?\]\(/,r,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},u={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},d={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},h=t.inherit(u,{contains:[]}),g=t.inherit(d,{contains:[]});u.contains.push(g),d.contains.push(h);let f=[s,c];return[u,d,h,g].forEach(T=>{T.contains=T.contains.concat(f)}),f=f.concat(u,d),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:f},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:f}]}]},s,i,u,d,{className:"quote",begin:"^>\\s+",contains:f,end:"$"},o,a,c,l,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}return Am=e,Am}var ym,vE;function g$(){if(vE)return ym;vE=1;function e(t){const n=t.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:n.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:n.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}return ym=e,ym}var Im,EE;function _$(){if(EE)return Im;EE=1;function e(t){const n=t.regex,s="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",a=n.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),o=n.concat(a,/(::\w+)*/),l={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},r={className:"doctag",begin:"@[A-Za-z]+"},c={begin:"#<",end:">"},u=[t.COMMENT("#","$",{contains:[r]}),t.COMMENT("^=begin","^=end",{contains:[r],relevance:10}),t.COMMENT("^__END__",t.MATCH_NOTHING_RE)],d={className:"subst",begin:/#\{/,end:/\}/,keywords:l},h={className:"string",contains:[t.BACKSLASH_ESCAPE,d],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:n.concat(/<<[-~]?'?/,n.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[t.BACKSLASH_ESCAPE,d]})]}]},g="[1-9](_?[0-9])*|0",f="[0-9](_?[0-9])*",b={className:"number",relevance:0,variants:[{begin:`\\b(${g})(\\.(${f}))?([eE][+-]?(${f})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},A={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:l}]},x=[h,{variants:[{match:[/class\s+/,o,/\s+<\s+/,o]},{match:[/\b(class|module)\s+/,o]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:l},{match:[/(include|extend)\s+/,o],scope:{2:"title.class"},keywords:l},{relevance:0,match:[o,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:a,scope:"title.class"},{match:[/def/,/\s+/,s],scope:{1:"keyword",3:"title.function"},contains:[A]},{begin:t.IDENT_RE+"::"},{className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[h,{begin:s}],relevance:0},b,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:l},{begin:"("+t.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[t.BACKSLASH_ESCAPE,d],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(c,u),relevance:0}].concat(c,u);d.contains=x,A.contains=x;const P=[{begin:/^\s*=>/,starts:{end:"$",contains:x}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:l,contains:x}}];return u.unshift(c),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:l,illegal:/\/\*/,contains:[t.SHEBANG({binary:"ruby"})].concat(P).concat(u).concat(x)}}return Im=e,Im}var Cm,bE;function v$(){if(bE)return Cm;bE=1;function e(t){const i={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:i,illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"string",variants:[t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[t.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:i,illegal:/["']/}]}]}}return Cm=e,Cm}var Nm,TE;function E$(){if(TE)return Nm;TE=1;function e(t){const n=t.regex,s=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[t.HASH_COMMENT_MODE,t.QUOTE_STRING_MODE,t.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:n.concat(s,n.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}return Nm=e,Nm}var Om,SE;function b$(){if(SE)return Om;SE=1;function e(t){const n=t.regex,s={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:t.NUMBER_RE}]},a=t.COMMENT();a.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const o={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},i={className:"literal",begin:/\bon|off|true|false|yes|no\b/},l={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},r={begin:/\[/,end:/\]/,contains:[a,i,o,l,s,"self"],relevance:0},c=/[A-Za-z0-9_-]+/,u=/"(\\"|[^"])*"/,d=/'[^']*'/,h=n.either(c,u,d),g=n.concat(h,"(\\s*\\.\\s*",h,")*",n.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[a,{className:"section",begin:/\[+/,end:/\]+/},{begin:g,className:"attr",starts:{end:/$/,contains:[a,r,i,o,l,s]}}]}}return Om=e,Om}var Rm,AE;function T$(){if(AE)return Rm;AE=1;var e="[0-9](_*[0-9])*",t=`\\.(${e})`,n="[0-9a-fA-F](_*[0-9a-fA-F])*",s={className:"number",variants:[{begin:`(\\b(${e})((${t})|\\.)?|(${t}))[eE][+-]?(${e})[fFdD]?\\b`},{begin:`\\b(${e})((${t})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${t})[fFdD]?\\b`},{begin:`\\b(${e})[fFdD]\\b`},{begin:`\\b0[xX]((${n})\\.?|(${n})?\\.(${n}))[pP][+-]?(${e})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${n})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function a(i,l,r){return r===-1?"":i.replace(l,c=>a(i,l,r-1))}function o(i){const l=i.regex,r="[-a-zA-Z_$][-a-zA-Z_$0-9]*",c=r+a("(?:<"+r+"~~~(?:\\s*,\\s*"+r+"~~~)*>)?",/~~~/g,2),f={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},b={className:"meta",begin:"@"+r,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},A={className:"params",begin:/\(/,end:/\)/,keywords:f,relevance:0,contains:[i.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:f,illegal:/<\/|#/,contains:[i.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},i.C_LINE_COMMENT_MODE,i.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[i.BACKSLASH_ESCAPE]},i.APOS_STRING_MODE,i.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[l.concat(/(?!else)/,r),/\s+/,r,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,r],className:{1:"keyword",3:"title.class"},contains:[A,i.C_LINE_COMMENT_MODE,i.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+c+"\\s+)",i.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:f,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:f,relevance:0,contains:[b,i.APOS_STRING_MODE,i.QUOTE_STRING_MODE,s,i.C_BLOCK_COMMENT_MODE]},i.C_LINE_COMMENT_MODE,i.C_BLOCK_COMMENT_MODE]},s,b]}}return Rm=o,Rm}var xm,yE;function S$(){if(yE)return xm;yE=1;const e="[A-Za-z$_][0-9A-Za-z$_]*",t=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],n=["true","false","null","undefined","NaN","Infinity"],s=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],a=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],o=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],i=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],l=[].concat(o,s,a);function r(c){const u=c.regex,d=(Te,{after:ce})=>{const Ne="</"+Te[0].slice(1);return Te.input.indexOf(Ne,ce)!==-1},h=e,g={begin:"<>",end:"</>"},f=/<[A-Za-z0-9\\._:-]+\s*\/>/,b={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(Te,ce)=>{const Ne=Te[0].length+Te.index,Me=Te.input[Ne];if(Me==="<"||Me===","){ce.ignoreMatch();return}Me===">"&&(d(Te,{after:Ne})||ce.ignoreMatch());let Fe;const Ge=Te.input.substring(Ne);if(Fe=Ge.match(/^\s*=/)){ce.ignoreMatch();return}if((Fe=Ge.match(/^\s+extends\s+/))&&Fe.index===0){ce.ignoreMatch();return}}},A={$pattern:e,keyword:t,literal:n,built_in:l,"variable.language":i},v="[0-9](_?[0-9])*",T=`\\.(${v})`,_="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",N={className:"number",variants:[{begin:`(\\b(${_})((${T})|\\.)?|(${T}))[eE][+-]?(${v})\\b`},{begin:`\\b(${_})\\b((${T})\\b|\\.)?|(${T})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},R={className:"subst",begin:"\\$\\{",end:"\\}",keywords:A,contains:[]},O={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[c.BACKSLASH_ESCAPE,R],subLanguage:"xml"}},x={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[c.BACKSLASH_ESCAPE,R],subLanguage:"css"}},w={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[c.BACKSLASH_ESCAPE,R],subLanguage:"graphql"}},D={className:"string",begin:"`",end:"`",contains:[c.BACKSLASH_ESCAPE,R]},P={className:"comment",variants:[c.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:h+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),c.C_BLOCK_COMMENT_MODE,c.C_LINE_COMMENT_MODE]},U=[c.APOS_STRING_MODE,c.QUOTE_STRING_MODE,O,x,w,D,{match:/\$\d+/},N];R.contains=U.concat({begin:/\{/,end:/\}/,keywords:A,contains:["self"].concat(U)});const F=[].concat(P,R.contains),k=F.concat([{begin:/(\s*)\(/,end:/\)/,keywords:A,contains:["self"].concat(F)}]),B={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:A,contains:k},V={variants:[{match:[/class/,/\s+/,h,/\s+/,/extends/,/\s+/,u.concat(h,"(",u.concat(/\./,h),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,h],scope:{1:"keyword",3:"title.class"}}]},G={relevance:0,match:u.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...s,...a]}},K={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},se={variants:[{match:[/function/,/\s+/,h,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[B],illegal:/%/},ee={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function X(Te){return u.concat("(?!",Te.join("|"),")")}const z={match:u.concat(/\b/,X([...o,"super","import"].map(Te=>`${Te}\\s*\\(`)),h,u.lookahead(/\s*\(/)),className:"title.function",relevance:0},H={begin:u.concat(/\./,u.lookahead(u.concat(h,/(?![0-9A-Za-z$_(])/))),end:h,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},q={match:[/get|set/,/\s+/,h,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},B]},J="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+c.UNDERSCORE_IDENT_RE+")\\s*=>",de={match:[/const|var|let/,/\s+/,h,/\s*/,/=\s*/,/(async\s*)?/,u.lookahead(J)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[B]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:A,exports:{PARAMS_CONTAINS:k,CLASS_REFERENCE:G},illegal:/#(?![$_A-z])/,contains:[c.SHEBANG({label:"shebang",binary:"node",relevance:5}),K,c.APOS_STRING_MODE,c.QUOTE_STRING_MODE,O,x,w,D,P,{match:/\$\d+/},N,G,{className:"attr",begin:h+u.lookahead(":"),relevance:0},de,{begin:"("+c.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[P,c.REGEXP_MODE,{className:"function",begin:J,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:c.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:A,contains:k}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:g.begin,end:g.end},{match:f},{begin:b.begin,"on:begin":b.isTrulyOpeningTag,end:b.end}],subLanguage:"xml",contains:[{begin:b.begin,end:b.end,skip:!0,contains:["self"]}]}]},se,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+c.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[B,c.inherit(c.TITLE_MODE,{begin:h,className:"title.function"})]},{match:/\.\.\./,relevance:0},H,{match:"\\$"+h,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[B]},z,ee,V,q,{match:/\$[(.]/}]}}return xm=r,xm}var wm,IE;function A$(){if(IE)return wm;IE=1;function e(t){const n={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},s={match:/[{}[\],:]/,className:"punctuation",relevance:0},a=["true","false","null"],o={scope:"literal",beginKeywords:a.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:a},contains:[n,s,t.QUOTE_STRING_MODE,o,t.C_NUMBER_MODE,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}return wm=e,wm}var $m,CE;function y$(){if(CE)return $m;CE=1;var e="[0-9](_*[0-9])*",t=`\\.(${e})`,n="[0-9a-fA-F](_*[0-9a-fA-F])*",s={className:"number",variants:[{begin:`(\\b(${e})((${t})|\\.)?|(${t}))[eE][+-]?(${e})[fFdD]?\\b`},{begin:`\\b(${e})((${t})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${t})[fFdD]?\\b`},{begin:`\\b(${e})[fFdD]\\b`},{begin:`\\b0[xX]((${n})\\.?|(${n})?\\.(${n}))[pP][+-]?(${e})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${n})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function a(o){const i={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},l={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},r={className:"symbol",begin:o.UNDERSCORE_IDENT_RE+"@"},c={className:"subst",begin:/\$\{/,end:/\}/,contains:[o.C_NUMBER_MODE]},u={className:"variable",begin:"\\$"+o.UNDERSCORE_IDENT_RE},d={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[u,c]},{begin:"'",end:"'",illegal:/\n/,contains:[o.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[o.BACKSLASH_ESCAPE,u,c]}]};c.contains.push(d);const h={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+o.UNDERSCORE_IDENT_RE+")?"},g={className:"meta",begin:"@"+o.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[o.inherit(d,{className:"string"}),"self"]}]},f=s,b=o.COMMENT("/\\*","\\*/",{contains:[o.C_BLOCK_COMMENT_MODE]}),A={variants:[{className:"type",begin:o.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},v=A;return v.variants[1].contains=[A],A.variants[1].contains=[v],{name:"Kotlin",aliases:["kt","kts"],keywords:i,contains:[o.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),o.C_LINE_COMMENT_MODE,b,l,r,h,g,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:i,relevance:5,contains:[{begin:o.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[o.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:i,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[A,o.C_LINE_COMMENT_MODE,b],relevance:0},o.C_LINE_COMMENT_MODE,b,h,g,d,o.C_NUMBER_MODE]},b]},{begin:[/class|interface|trait/,/\s+/,o.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},o.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},h,g]},d,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},f]}}return $m=a,$m}var Mm,NE;function I$(){if(NE)return Mm;NE=1;const e=u=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:u.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[u.APOS_STRING_MODE,u.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:u.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),t=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],n=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],s=[...t,...n],a=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),o=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),i=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),l=["accent-color","align-content","align-items","align-self","alignment-baseline","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-end-end-radius","border-end-start-radius","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","cx","cy","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","empty-cells","enable-background","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","flood-color","flood-opacity","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","kerning","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","marker","marker-end","marker-mid","marker-start","mask","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","speak","speak-as","src","tab-size","table-layout","text-anchor","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","vector-effect","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index"].sort().reverse(),r=o.concat(i).sort().reverse();function c(u){const d=e(u),h=r,g="and or not only",f="[\\w-]+",b="("+f+"|@\\{"+f+"\\})",A=[],v=[],T=function(F){return{className:"string",begin:"~?"+F+".*?"+F}},_=function(F,k,B){return{className:F,begin:k,relevance:B}},N={$pattern:/[a-z-]+/,keyword:g,attribute:a.join(" ")},R={begin:"\\(",end:"\\)",contains:v,keywords:N,relevance:0};v.push(u.C_LINE_COMMENT_MODE,u.C_BLOCK_COMMENT_MODE,T("'"),T('"'),d.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},d.HEXCOLOR,R,_("variable","@@?"+f,10),_("variable","@\\{"+f+"\\}"),_("built_in","~?`[^`]*?`"),{className:"attribute",begin:f+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},d.IMPORTANT,{beginKeywords:"and not"},d.FUNCTION_DISPATCH);const O=v.concat({begin:/\{/,end:/\}/,contains:A}),x={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(v)},w={begin:b+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},d.CSS_VARIABLE,{className:"attribute",begin:"\\b("+l.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:v}}]},D={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:N,returnEnd:!0,contains:v,relevance:0}},M={className:"variable",variants:[{begin:"@"+f+"\\s*:",relevance:15},{begin:"@"+f}],starts:{end:"[;}]",returnEnd:!0,contains:O}},P={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:b,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[u.C_LINE_COMMENT_MODE,u.C_BLOCK_COMMENT_MODE,x,_("keyword","all\\b"),_("variable","@\\{"+f+"\\}"),{begin:"\\b("+s.join("|")+")\\b",className:"selector-tag"},d.CSS_NUMBER_MODE,_("selector-tag",b,0),_("selector-id","#"+b),_("selector-class","\\."+b,0),_("selector-tag","&",0),d.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+o.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+i.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:O},{begin:"!important"},d.FUNCTION_DISPATCH]},U={begin:f+`:(:)?(${h.join("|")})`,returnBegin:!0,contains:[P]};return A.push(u.C_LINE_COMMENT_MODE,u.C_BLOCK_COMMENT_MODE,D,M,U,w,P,x,d.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:A}}return Mm=c,Mm}var Lm,OE;function C$(){if(OE)return Lm;OE=1;function e(t){const n="\\[=*\\[",s="\\]=*\\]",a={begin:n,end:s,contains:["self"]},o=[t.COMMENT("--(?!"+n+")","$"),t.COMMENT("--"+n,s,{contains:[a],relevance:10})];return{name:"Lua",keywords:{$pattern:t.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:o.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[t.inherit(t.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:o}].concat(o)},t.C_NUMBER_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{className:"string",begin:n,end:s,contains:[a],relevance:5}])}}return Lm=e,Lm}var Dm,RE;function N$(){if(RE)return Dm;RE=1;function e(t){const n={className:"variable",variants:[{begin:"\\$\\("+t.UNDERSCORE_IDENT_RE+"\\)",contains:[t.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},s={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,n]},a={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[n]},o={begin:"^"+t.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},i={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},l={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[n]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[t.HASH_COMMENT_MODE,n,s,a,o,i,l]}}return Dm=e,Dm}var Pm,xE;function O$(){if(xE)return Pm;xE=1;function e(t){const n=t.regex,s=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],a=/[dualxmsipngr]{0,12}/,o={$pattern:/[\w.]+/,keyword:s.join(" ")},i={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:o},l={begin:/->\{/,end:/\}/},r={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},c={scope:"variable",variants:[{begin:/\$\d/},{begin:n.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[r]},u={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},d=[t.BACKSLASH_ESCAPE,i,c],h=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],g=(A,v,T="\\1")=>{const _=T==="\\1"?T:n.concat(T,v);return n.concat(n.concat("(?:",A,")"),v,/(?:\\.|[^\\\/])*?/,_,/(?:\\.|[^\\\/])*?/,T,a)},f=(A,v,T)=>n.concat(n.concat("(?:",A,")"),v,/(?:\\.|[^\\\/])*?/,T,a),b=[c,t.HASH_COMMENT_MODE,t.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),l,{className:"string",contains:d,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},u,{begin:"(\\/\\/|"+t.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[t.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:g("s|tr|y",n.either(...h,{capture:!0}))},{begin:g("s|tr|y","\\(","\\)")},{begin:g("s|tr|y","\\[","\\]")},{begin:g("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:f("(?:m|qr)?",/\//,/\//)},{begin:f("m|qr",n.either(...h,{capture:!0}),/\1/)},{begin:f("m|qr",/\(/,/\)/)},{begin:f("m|qr",/\[/,/\]/)},{begin:f("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,r]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,r,u]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return i.contains=b,l.contains=b,{name:"Perl",aliases:["pl","pm"],keywords:o,contains:b}}return Pm=e,Pm}var km,wE;function R$(){if(wE)return km;wE=1;function e(t){const n={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},s=/[a-zA-Z@][a-zA-Z0-9_]*/,r={"variable.language":["this","super"],$pattern:s,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},c={$pattern:s,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:r,illegal:"</",contains:[n,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,t.C_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+c.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:c,contains:[t.UNDERSCORE_TITLE_MODE]},{begin:"\\."+t.UNDERSCORE_IDENT_RE,relevance:0}]}}return km=e,km}var Bm,$E;function x$(){if($E)return Bm;$E=1;function e(t){const n=t.regex,s=/(?![A-Za-z0-9])(?![$])/,a=n.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,s),o=n.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,s),i={scope:"variable",match:"\\$+"+a},l={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},r={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},c=t.inherit(t.APOS_STRING_MODE,{illegal:null}),u=t.inherit(t.QUOTE_STRING_MODE,{illegal:null,contains:t.QUOTE_STRING_MODE.contains.concat(r)}),d={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:t.QUOTE_STRING_MODE.contains.concat(r),"on:begin":(k,B)=>{B.data._beginMatch=k[1]||k[2]},"on:end":(k,B)=>{B.data._beginMatch!==k[1]&&B.ignoreMatch()}},h=t.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),g=`[ 	
]`,f={scope:"string",variants:[u,c,d,h]},b={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},A=["false","null","true"],v=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],T=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],N={keyword:v,literal:(k=>{const B=[];return k.forEach(V=>{B.push(V),V.toLowerCase()===V?B.push(V.toUpperCase()):B.push(V.toLowerCase())}),B})(A),built_in:T},R=k=>k.map(B=>B.replace(/\|\d+$/,"")),O={variants:[{match:[/new/,n.concat(g,"+"),n.concat("(?!",R(T).join("\\b|"),"\\b)"),o],scope:{1:"keyword",4:"title.class"}}]},x=n.concat(a,"\\b(?!\\()"),w={variants:[{match:[n.concat(/::/,n.lookahead(/(?!class\b)/)),x],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[o,n.concat(/::/,n.lookahead(/(?!class\b)/)),x],scope:{1:"title.class",3:"variable.constant"}},{match:[o,n.concat("::",n.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[o,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},D={scope:"attr",match:n.concat(a,n.lookahead(":"),n.lookahead(/(?!::)/))},M={relevance:0,begin:/\(/,end:/\)/,keywords:N,contains:[D,i,w,t.C_BLOCK_COMMENT_MODE,f,b,O]},P={relevance:0,match:[/\b/,n.concat("(?!fn\\b|function\\b|",R(v).join("\\b|"),"|",R(T).join("\\b|"),"\\b)"),a,n.concat(g,"*"),n.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[M]};M.contains.push(P);const U=[D,w,t.C_BLOCK_COMMENT_MODE,f,b,O],F={begin:n.concat(/#\[\s*/,o),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:A,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:A,keyword:["new","array"]},contains:["self",...U]},...U,{scope:"meta",match:o}]};return{case_insensitive:!1,keywords:N,contains:[F,t.HASH_COMMENT_MODE,t.COMMENT("//","$"),t.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:t.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},l,{scope:"variable.language",match:/\$this\b/},i,P,w,{match:[/const/,/\s/,a],scope:{1:"keyword",3:"variable.constant"}},O,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},t.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:N,contains:["self",i,w,t.C_BLOCK_COMMENT_MODE,f,b]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},t.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[t.inherit(t.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},t.UNDERSCORE_TITLE_MODE]},f,b]}}return Bm=e,Bm}var Um,ME;function w$(){if(ME)return Um;ME=1;function e(t){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},t.inherit(t.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),t.inherit(t.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}return Um=e,Um}var Fm,LE;function $$(){if(LE)return Fm;LE=1;function e(t){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}return Fm=e,Fm}var Gm,DE;function M$(){if(DE)return Gm;DE=1;function e(t){const n=t.regex,s=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),a=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],r={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:a,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},c={className:"meta",begin:/^(>>>|\.\.\.) /},u={className:"subst",begin:/\{/,end:/\}/,keywords:r,illegal:/#/},d={begin:/\{\{/,relevance:0},h={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,c,d,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,c,d,u]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,d,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,d,u]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},g="[0-9](_?[0-9])*",f=`(\\b(${g}))?\\.(${g})|\\b(${g})\\.`,b=`\\b|${a.join("|")}`,A={className:"number",relevance:0,variants:[{begin:`(\\b(${g})|(${f}))[eE][+-]?(${g})[jJ]?(?=${b})`},{begin:`(${f})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${b})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${b})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${b})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${b})`},{begin:`\\b(${g})[jJ](?=${b})`}]},v={className:"comment",begin:n.lookahead(/# type:/),end:/$/,keywords:r,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},T={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:r,contains:["self",c,A,h,t.HASH_COMMENT_MODE]}]};return u.contains=[h,A,c],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:r,illegal:/(<\/|\?)|=>/,contains:[c,A,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},h,v,t.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,s],scope:{1:"keyword",3:"title.function"},contains:[T]},{variants:[{match:[/\bclass/,/\s+/,s,/\s*/,/\(\s*/,s,/\s*\)/]},{match:[/\bclass/,/\s+/,s]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[A,T,h]}]}}return Gm=e,Gm}var Vm,PE;function L$(){if(PE)return Vm;PE=1;function e(t){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}return Vm=e,Vm}var Hm,kE;function D$(){if(kE)return Hm;kE=1;function e(t){const n=t.regex,s=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,a=n.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),o=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,i=n.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:s,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[t.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:n.lookahead(n.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:s},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),t.HASH_COMMENT_MODE,{scope:"string",contains:[t.BACKSLASH_ESCAPE],variants:[t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[o,a]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,a]},{scope:{1:"punctuation",2:"number"},match:[i,a]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,a]}]},{scope:{3:"operator"},match:[s,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:o},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:i},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}return Hm=e,Hm}var Wm,BE;function P$(){if(BE)return Wm;BE=1;function e(t){const n=t.regex,s=/(r#)?/,a=n.concat(s,t.UNDERSCORE_IDENT_RE),o=n.concat(s,t.IDENT_RE),i={className:"title.function.invoke",relevance:0,begin:n.concat(/\b/,/(?!let|for|while|if|else|match\b)/,o,n.lookahead(/\s*\(/))},l="([ui](8|16|32|64|128|size)|f(32|64))?",r=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],c=["true","false","Some","None","Ok","Err"],u=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],d=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:t.IDENT_RE+"!?",type:d,keyword:r,literal:c,built_in:u},illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.COMMENT("/\\*","\\*/",{contains:["self"]}),t.inherit(t.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'\\?(x\w{2}|u\w{4}|U\w{8}|.)'/}]},{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*/},{className:"number",variants:[{begin:"\\b0b([01_]+)"+l},{begin:"\\b0o([0-7_]+)"+l},{begin:"\\b0x([A-Fa-f0-9_]+)"+l},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+l}],relevance:0},{begin:[/fn/,/\s+/,a],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,a],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,a,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,a],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,a],className:{1:"keyword",3:"title.class"}},{begin:t.IDENT_RE+"::",keywords:{keyword:"Self",built_in:u,type:d}},{className:"punctuation",begin:"->"},i]}}return Wm=e,Wm}var zm,UE;function k$(){if(UE)return zm;UE=1;const e=c=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:c.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[c.APOS_STRING_MODE,c.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:c.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),t=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],n=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],s=[...t,...n],a=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),o=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),i=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),l=["accent-color","align-content","align-items","align-self","alignment-baseline","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-end-end-radius","border-end-start-radius","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","cx","cy","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","empty-cells","enable-background","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","flood-color","flood-opacity","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","kerning","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","marker","marker-end","marker-mid","marker-start","mask","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","speak","speak-as","src","tab-size","table-layout","text-anchor","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","vector-effect","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index"].sort().reverse();function r(c){const u=e(c),d=i,h=o,g="@[a-z-]+",f="and or not only",A={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[c.C_LINE_COMMENT_MODE,c.C_BLOCK_COMMENT_MODE,u.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},u.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+s.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+h.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+d.join("|")+")"},A,{begin:/\(/,end:/\)/,contains:[u.CSS_NUMBER_MODE]},u.CSS_VARIABLE,{className:"attribute",begin:"\\b("+l.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[u.BLOCK_COMMENT,A,u.HEXCOLOR,u.CSS_NUMBER_MODE,c.QUOTE_STRING_MODE,c.APOS_STRING_MODE,u.IMPORTANT,u.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:g,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:f,attribute:a.join(" ")},contains:[{begin:g,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},A,c.QUOTE_STRING_MODE,c.APOS_STRING_MODE,u.HEXCOLOR,u.CSS_NUMBER_MODE]},u.FUNCTION_DISPATCH]}}return zm=r,zm}var Ym,FE;function B$(){if(FE)return Ym;FE=1;function e(t){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}return Ym=e,Ym}var jm,GE;function U$(){if(GE)return jm;GE=1;function e(t){const n=t.regex,s=t.COMMENT("--","$"),a={className:"string",variants:[{begin:/'/,end:/'/,contains:[{begin:/''/}]}]},o={begin:/"/,end:/"/,contains:[{begin:/""/}]},i=["true","false","unknown"],l=["double precision","large object","with timezone","without timezone"],r=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],c=["add","asc","collation","desc","final","first","last","view"],u=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],d=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],h=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],g=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],f=d,b=[...u,...c].filter(N=>!d.includes(N)),A={className:"variable",begin:/@[a-z0-9][a-z0-9_]*/},v={className:"operator",begin:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},T={begin:n.concat(/\b/,n.either(...f),/\s*\(/),relevance:0,keywords:{built_in:f}};function _(N,{exceptions:R,when:O}={}){const x=O;return R=R||[],N.map(w=>w.match(/\|\d+$/)||R.includes(w)?w:x(w)?`${w}|0`:w)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:_(b,{when:N=>N.length<3}),literal:i,type:r,built_in:h},contains:[{begin:n.either(...g),relevance:0,keywords:{$pattern:/[\w\.]+/,keyword:b.concat(g),literal:i,type:r}},{className:"type",begin:n.either(...l)},T,A,a,o,t.C_NUMBER_MODE,t.C_BLOCK_COMMENT_MODE,s,v]}}return jm=e,jm}var Km,VE;function F$(){if(VE)return Km;VE=1;function e(w){return w?typeof w=="string"?w:w.source:null}function t(w){return n("(?=",w,")")}function n(...w){return w.map(M=>e(M)).join("")}function s(w){const D=w[w.length-1];return typeof D=="object"&&D.constructor===Object?(w.splice(w.length-1,1),D):{}}function a(...w){return"("+(s(w).capture?"":"?:")+w.map(P=>e(P)).join("|")+")"}const o=w=>n(/\b/,w,/\w$/.test(w)?/\b/:/\B/),i=["Protocol","Type"].map(o),l=["init","self"].map(o),r=["Any","Self"],c=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],u=["false","nil","true"],d=["assignment","associativity","higherThan","left","lowerThan","none","right"],h=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],g=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],f=a(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),b=a(f,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),A=n(f,b,"*"),v=a(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),T=a(v,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),_=n(v,T,"*"),N=n(/[A-Z]/,T,"*"),R=["attached","autoclosure",n(/convention\(/,a("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",n(/objc\(/,_,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],O=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function x(w){const D={match:/\s+/,relevance:0},M=w.COMMENT("/\\*","\\*/",{contains:["self"]}),P=[w.C_LINE_COMMENT_MODE,M],U={match:[/\./,a(...i,...l)],className:{2:"keyword"}},F={match:n(/\./,a(...c)),relevance:0},k=c.filter(Se=>typeof Se=="string").concat(["_|0"]),B=c.filter(Se=>typeof Se!="string").concat(r).map(o),V={variants:[{className:"keyword",match:a(...B,...l)}]},G={$pattern:a(/\b\w+/,/#\w+/),keyword:k.concat(h),literal:u},K=[U,F,V],se={match:n(/\./,a(...g)),relevance:0},ee={className:"built_in",match:n(/\b/,a(...g),/(?=\()/)},X=[se,ee],z={match:/->/,relevance:0},H={className:"operator",relevance:0,variants:[{match:A},{match:`\\.(\\.|${b})+`}]},q=[z,H],J="([0-9]_*)+",de="([0-9a-fA-F]_*)+",Te={className:"number",relevance:0,variants:[{match:`\\b(${J})(\\.(${J}))?([eE][+-]?(${J}))?\\b`},{match:`\\b0x(${de})(\\.(${de}))?([pP][+-]?(${J}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},ce=(Se="")=>({className:"subst",variants:[{match:n(/\\/,Se,/[0\\tnr"']/)},{match:n(/\\/,Se,/u\{[0-9a-fA-F]{1,8}\}/)}]}),Ne=(Se="")=>({className:"subst",match:n(/\\/,Se,/[\t ]*(?:[\r\n]|\r\n)/)}),Me=(Se="")=>({className:"subst",label:"interpol",begin:n(/\\/,Se,/\(/),end:/\)/}),Fe=(Se="")=>({begin:n(Se,/"""/),end:n(/"""/,Se),contains:[ce(Se),Ne(Se),Me(Se)]}),Ge=(Se="")=>({begin:n(Se,/"/),end:n(/"/,Se),contains:[ce(Se),Me(Se)]}),je={className:"string",variants:[Fe(),Fe("#"),Fe("##"),Fe("###"),Ge(),Ge("#"),Ge("##"),Ge("###")]},Ze=[w.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[w.BACKSLASH_ESCAPE]}],nt={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:Ze},st=Se=>{const Re=n(Se,/\//),Ce=n(/\//,Se);return{begin:Re,end:Ce,contains:[...Ze,{scope:"comment",begin:`#(?!.*${Ce})`,end:/$/}]}},At={scope:"regexp",variants:[st("###"),st("##"),st("#"),nt]},Mt={match:n(/`/,_,/`/)},Z={className:"variable",match:/\$\d+/},ie={className:"variable",match:`\\$${T}+`},le=[Mt,Z,ie],ve={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:O,contains:[...q,Te,je]}]}},ge={scope:"keyword",match:n(/@/,a(...R),t(a(/\(/,/\s+/)))},Ie={scope:"meta",match:n(/@/,_)},Be=[ve,ge,Ie],ye={match:t(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:n(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,T,"+")},{className:"type",match:N,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:n(/\s+&\s+/,t(N)),relevance:0}]},$e={begin:/</,end:/>/,keywords:G,contains:[...P,...K,...Be,z,ye]};ye.contains.push($e);const Pe={match:n(_,/\s*:/),keywords:"_|0",relevance:0},pe={begin:/\(/,end:/\)/,relevance:0,keywords:G,contains:["self",Pe,...P,At,...K,...X,...q,Te,je,...le,...Be,ye]},Oe={begin:/</,end:/>/,keywords:"repeat each",contains:[...P,ye]},ke={begin:a(t(n(_,/\s*:/)),t(n(_,/\s+/,_,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:_}]},Q={begin:/\(/,end:/\)/,keywords:G,contains:[ke,...P,...K,...q,Te,je,...Be,ye,pe],endsParent:!0,illegal:/["']/},oe={match:[/(func|macro)/,/\s+/,a(Mt.match,_,A)],className:{1:"keyword",3:"title.function"},contains:[Oe,Q,D],illegal:[/\[/,/%/]},me={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[Oe,Q,D],illegal:/\[|%/},Ee={match:[/operator/,/\s+/,A],className:{1:"keyword",3:"title"}},we={begin:[/precedencegroup/,/\s+/,N],className:{1:"keyword",3:"title"},contains:[ye],keywords:[...d,...u],end:/}/},he={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,_,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:G,contains:[Oe,...K,{begin:/:/,end:/\{/,keywords:G,contains:[{scope:"title.class.inherited",match:N},...K],relevance:0}]};for(const Se of je.variants){const Re=Se.contains.find(Ue=>Ue.label==="interpol");Re.keywords=G;const Ce=[...K,...X,...q,Te,je,...le];Re.contains=[...Ce,{begin:/\(/,end:/\)/,contains:["self",...Ce]}]}return{name:"Swift",keywords:G,contains:[...P,oe,me,he,Ee,we,{beginKeywords:"import",end:/$/,contains:[...P],relevance:0},At,...K,...X,...q,Te,je,...le,...Be,ye,pe]}}return Km=x,Km}var Xm,HE;function G$(){if(HE)return Xm;HE=1;function e(t){const n="true false yes no null",s="[\\w#;/?:@&=+$,.~*'()[\\]]+",a={className:"attr",variants:[{begin:/\w[\w :()\./-]*:(?=[ \t]|$)/},{begin:/"\w[\w :()\./-]*":(?=[ \t]|$)/},{begin:/'\w[\w :()\./-]*':(?=[ \t]|$)/}]},o={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},i={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,o]},l=t.inherit(i,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),h={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},g={end:",",endsWithParent:!0,excludeEnd:!0,keywords:n,relevance:0},f={begin:/\{/,end:/\}/,contains:[g],illegal:"\\n",relevance:0},b={begin:"\\[",end:"\\]",contains:[g],illegal:"\\n",relevance:0},A=[a,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+s},{className:"type",begin:"!<"+s+">"},{className:"type",begin:"!"+s},{className:"type",begin:"!!"+s},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:n,keywords:{literal:n}},h,{className:"number",begin:t.C_NUMBER_RE+"\\b",relevance:0},f,b,i],v=[...A];return v.pop(),v.push(l),g.contains=v,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:A}}return Xm=e,Xm}var qm,WE;function V$(){if(WE)return qm;WE=1;const e="[A-Za-z$_][0-9A-Za-z$_]*",t=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],n=["true","false","null","undefined","NaN","Infinity"],s=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],a=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],o=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],i=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],l=[].concat(o,s,a);function r(u){const d=u.regex,h=(ce,{after:Ne})=>{const Me="</"+ce[0].slice(1);return ce.input.indexOf(Me,Ne)!==-1},g=e,f={begin:"<>",end:"</>"},b=/<[A-Za-z0-9\\._:-]+\s*\/>/,A={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(ce,Ne)=>{const Me=ce[0].length+ce.index,Fe=ce.input[Me];if(Fe==="<"||Fe===","){Ne.ignoreMatch();return}Fe===">"&&(h(ce,{after:Me})||Ne.ignoreMatch());let Ge;const je=ce.input.substring(Me);if(Ge=je.match(/^\s*=/)){Ne.ignoreMatch();return}if((Ge=je.match(/^\s+extends\s+/))&&Ge.index===0){Ne.ignoreMatch();return}}},v={$pattern:e,keyword:t,literal:n,built_in:l,"variable.language":i},T="[0-9](_?[0-9])*",_=`\\.(${T})`,N="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",R={className:"number",variants:[{begin:`(\\b(${N})((${_})|\\.)?|(${_}))[eE][+-]?(${T})\\b`},{begin:`\\b(${N})\\b((${_})\\b|\\.)?|(${_})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},O={className:"subst",begin:"\\$\\{",end:"\\}",keywords:v,contains:[]},x={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[u.BACKSLASH_ESCAPE,O],subLanguage:"xml"}},w={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[u.BACKSLASH_ESCAPE,O],subLanguage:"css"}},D={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[u.BACKSLASH_ESCAPE,O],subLanguage:"graphql"}},M={className:"string",begin:"`",end:"`",contains:[u.BACKSLASH_ESCAPE,O]},U={className:"comment",variants:[u.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:g+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),u.C_BLOCK_COMMENT_MODE,u.C_LINE_COMMENT_MODE]},F=[u.APOS_STRING_MODE,u.QUOTE_STRING_MODE,x,w,D,M,{match:/\$\d+/},R];O.contains=F.concat({begin:/\{/,end:/\}/,keywords:v,contains:["self"].concat(F)});const k=[].concat(U,O.contains),B=k.concat([{begin:/(\s*)\(/,end:/\)/,keywords:v,contains:["self"].concat(k)}]),V={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:v,contains:B},G={variants:[{match:[/class/,/\s+/,g,/\s+/,/extends/,/\s+/,d.concat(g,"(",d.concat(/\./,g),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,g],scope:{1:"keyword",3:"title.class"}}]},K={relevance:0,match:d.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...s,...a]}},se={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},ee={variants:[{match:[/function/,/\s+/,g,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[V],illegal:/%/},X={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function z(ce){return d.concat("(?!",ce.join("|"),")")}const H={match:d.concat(/\b/,z([...o,"super","import"].map(ce=>`${ce}\\s*\\(`)),g,d.lookahead(/\s*\(/)),className:"title.function",relevance:0},q={begin:d.concat(/\./,d.lookahead(d.concat(g,/(?![0-9A-Za-z$_(])/))),end:g,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},J={match:[/get|set/,/\s+/,g,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},V]},de="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+u.UNDERSCORE_IDENT_RE+")\\s*=>",Te={match:[/const|var|let/,/\s+/,g,/\s*/,/=\s*/,/(async\s*)?/,d.lookahead(de)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[V]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:v,exports:{PARAMS_CONTAINS:B,CLASS_REFERENCE:K},illegal:/#(?![$_A-z])/,contains:[u.SHEBANG({label:"shebang",binary:"node",relevance:5}),se,u.APOS_STRING_MODE,u.QUOTE_STRING_MODE,x,w,D,M,U,{match:/\$\d+/},R,K,{className:"attr",begin:g+d.lookahead(":"),relevance:0},Te,{begin:"("+u.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[U,u.REGEXP_MODE,{className:"function",begin:de,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:u.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:v,contains:B}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:f.begin,end:f.end},{match:b},{begin:A.begin,"on:begin":A.isTrulyOpeningTag,end:A.end}],subLanguage:"xml",contains:[{begin:A.begin,end:A.end,skip:!0,contains:["self"]}]}]},ee,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+u.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[V,u.inherit(u.TITLE_MODE,{begin:g,className:"title.function"})]},{match:/\.\.\./,relevance:0},q,{match:"\\$"+g,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[V]},H,X,G,J,{match:/\$[(.]/}]}}function c(u){const d=r(u),h=e,g=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],f={begin:[/namespace/,/\s+/,u.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},b={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:g},contains:[d.exports.CLASS_REFERENCE]},A={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},v=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],T={$pattern:e,keyword:t.concat(v),literal:n,built_in:l.concat(g),"variable.language":i},_={className:"meta",begin:"@"+h},N=(x,w,D)=>{const M=x.contains.findIndex(P=>P.label===w);if(M===-1)throw new Error("can not find mode to replace");x.contains.splice(M,1,D)};Object.assign(d.keywords,T),d.exports.PARAMS_CONTAINS.push(_);const R=d.contains.find(x=>x.className==="attr");d.exports.PARAMS_CONTAINS.push([d.exports.CLASS_REFERENCE,R]),d.contains=d.contains.concat([_,f,b]),N(d,"shebang",u.SHEBANG()),N(d,"use_strict",A);const O=d.contains.find(x=>x.label==="func.def");return O.relevance=0,Object.assign(d,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),d}return qm=c,qm}var Zm,zE;function H$(){if(zE)return Zm;zE=1;function e(t){const n=t.regex,s={className:"string",begin:/"(""|[^/n])"C\b/},a={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},o=/\d{1,2}\/\d{1,2}\/\d{4}/,i=/\d{4}-\d{1,2}-\d{1,2}/,l=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,r=/\d{1,2}(:\d{1,2}){1,2}/,c={className:"literal",variants:[{begin:n.concat(/# */,n.either(i,o),/ *#/)},{begin:n.concat(/# */,r,/ *#/)},{begin:n.concat(/# */,l,/ *#/)},{begin:n.concat(/# */,n.either(i,o),/ +/,n.either(l,r),/ *#/)}]},u={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},d={className:"label",begin:/^\w+:/},h=t.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),g=t.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[s,a,c,u,d,h,g,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[g]}]}}return Zm=e,Zm}var Qm,YE;function W$(){if(YE)return Qm;YE=1;function e(t){t.regex;const n=t.COMMENT(/\(;/,/;\)/);n.contains.push("self");const s=t.COMMENT(/;;/,/$/),a=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],o={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},i={className:"variable",begin:/\$[\w_]+/},l={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},r={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},c={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},u={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:a},contains:[s,n,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},i,l,o,t.QUOTE_STRING_MODE,c,u,r]}}return Qm=e,Qm}var an=zS;an.registerLanguage("xml",c$());an.registerLanguage("bash",u$());an.registerLanguage("c",d$());an.registerLanguage("cpp",p$());an.registerLanguage("csharp",m$());an.registerLanguage("css",h$());an.registerLanguage("markdown",f$());an.registerLanguage("diff",g$());an.registerLanguage("ruby",_$());an.registerLanguage("go",v$());an.registerLanguage("graphql",E$());an.registerLanguage("ini",b$());an.registerLanguage("java",T$());an.registerLanguage("javascript",S$());an.registerLanguage("json",A$());an.registerLanguage("kotlin",y$());an.registerLanguage("less",I$());an.registerLanguage("lua",C$());an.registerLanguage("makefile",N$());an.registerLanguage("perl",O$());an.registerLanguage("objectivec",R$());an.registerLanguage("php",x$());an.registerLanguage("php-template",w$());an.registerLanguage("plaintext",$$());an.registerLanguage("python",M$());an.registerLanguage("python-repl",L$());an.registerLanguage("r",D$());an.registerLanguage("rust",P$());an.registerLanguage("scss",k$());an.registerLanguage("shell",B$());an.registerLanguage("sql",U$());an.registerLanguage("swift",F$());an.registerLanguage("yaml",G$());an.registerLanguage("typescript",V$());an.registerLanguage("vbnet",H$());an.registerLanguage("wasm",W$());an.HighlightJS=an;an.default=an;const z$={class:"relative text-left"},Y$={class:"top-1.5 absolute ltr:right-1.5 rtl:left-1.5 flex backdrop-blur-sm rounded-lg items-center gap-1"},j$={key:0,class:"flex items-center",action:"https://codepen.io/pen/define",method:"POST",target:"_blank"},K$=["value"],X$={__name:"Code",props:{script:{type:String,default:""},lang:{type:String,default:"javascript"},enableCodePen:{type:Boolean,default:!1},codepenTitle:{type:String,default:"Chatwoot Codepen"}},setup(e){const t=e,{t:n}=be(),s=y(()=>{const l=t.script.replace(/^\s*[\r\n]/gm,"").split(`
`),r=l.reduce((c,u)=>{if(u.trim().length===0)return c;const d=u.match(/^\s*/)[0].length;return Math.min(c,d)},1/0);return l.map(c=>c.slice(r)).join(`
`)}),a=y(()=>{const i=t.lang==="javascript"?"js":t.lang;return JSON.stringify({title:t.codepenTitle,private:!0,[i]:s.value})}),o=async i=>{i.preventDefault(),await _a(s.value),ne(n("COMPONENTS.CODE.COPY_SUCCESSFUL"))};return(i,l)=>{const r=W("highlightjs");return p(),E("div",z$,[m("div",Y$,[e.enableCodePen?(p(),E("form",j$,[m("input",{type:"hidden",name:"data",value:a.value},null,8,K$),S(te,{slate:"",xs:"",type:"submit",faded:"",label:C(n)("COMPONENTS.CODE.CODEPEN")},null,8,["label"])])):$("",!0),S(te,{slate:"",xs:"",faded:"",label:C(n)("COMPONENTS.CODE.BUTTON_TEXT"),onClick:o},null,8,["label"])]),e.script?(p(),L(r,{key:0,language:e.lang,code:s.value,class:"[&_code]:text-start"},null,8,["language","code"])):$("",!0)])}}};var E0={exports:{}};(function(e){(function(){var t={9662:function(o,i,l){var r=l(7854),c=l(614),u=l(6330),d=r.TypeError;o.exports=function(h){if(c(h))return h;throw d(u(h)+" is not a function")}},6077:function(o,i,l){var r=l(7854),c=l(614),u=r.String,d=r.TypeError;o.exports=function(h){if(typeof h=="object"||c(h))return h;throw d("Can't set "+u(h)+" as a prototype")}},9670:function(o,i,l){var r=l(7854),c=l(111),u=r.String,d=r.TypeError;o.exports=function(h){if(c(h))return h;throw d(u(h)+" is not an object")}},1318:function(o,i,l){var r=l(5656),c=l(1400),u=l(6244),d=function(h){return function(g,f,b){var A=r(g),v=u(A),T=c(b,v),_;if(h&&f!=f){for(;v>T;)if(_=A[T++],_!=_)return!0}else for(;v>T;T++)if((h||T in A)&&A[T]===f)return h||T||0;return!h&&-1}};o.exports={includes:d(!0),indexOf:d(!1)}},4326:function(o,i,l){var r=l(1702),c=r({}.toString),u=r("".slice);o.exports=function(d){return u(c(d),8,-1)}},648:function(o,i,l){var r=l(7854),c=l(1694),u=l(614),d=l(4326),h=l(5112),g=h("toStringTag"),f=r.Object,b=d(function(){return arguments}())=="Arguments",A=function(v,T){try{return v[T]}catch{}};o.exports=c?d:function(v){var T,_,N;return v===void 0?"Undefined":v===null?"Null":typeof(_=A(T=f(v),g))=="string"?_:b?d(T):(N=d(T))=="Object"&&u(T.callee)?"Arguments":N}},7741:function(o,i,l){var r=l(1702),c=r("".replace),u=function(g){return String(Error(g).stack)}("zxcasd"),d=/\n\s*at [^:]*:[^\n]*/,h=d.test(u);o.exports=function(g,f){if(h&&typeof g=="string")for(;f--;)g=c(g,d,"");return g}},9920:function(o,i,l){var r=l(2597),c=l(3887),u=l(1236),d=l(3070);o.exports=function(h,g,f){for(var b=c(g),A=d.f,v=u.f,T=0;T<b.length;T++){var _=b[T];!r(h,_)&&!(f&&r(f,_))&&A(h,_,v(g,_))}}},8880:function(o,i,l){var r=l(9781),c=l(3070),u=l(9114);o.exports=r?function(d,h,g){return c.f(d,h,u(1,g))}:function(d,h,g){return d[h]=g,d}},9114:function(o){o.exports=function(i,l){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:l}}},9781:function(o,i,l){var r=l(7293);o.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},317:function(o,i,l){var r=l(7854),c=l(111),u=r.document,d=c(u)&&c(u.createElement);o.exports=function(h){return d?u.createElement(h):{}}},8113:function(o,i,l){var r=l(5005);o.exports=r("navigator","userAgent")||""},7392:function(o,i,l){var r=l(7854),c=l(8113),u=r.process,d=r.Deno,h=u&&u.versions||d&&d.version,g=h&&h.v8,f,b;g&&(f=g.split("."),b=f[0]>0&&f[0]<4?1:+(f[0]+f[1])),!b&&c&&(f=c.match(/Edge\/(\d+)/),(!f||f[1]>=74)&&(f=c.match(/Chrome\/(\d+)/),f&&(b=+f[1]))),o.exports=b},748:function(o){o.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2914:function(o,i,l){var r=l(7293),c=l(9114);o.exports=!r(function(){var u=Error("a");return"stack"in u?(Object.defineProperty(u,"stack",c(1,7)),u.stack!==7):!0})},2109:function(o,i,l){var r=l(7854),c=l(1236).f,u=l(8880),d=l(1320),h=l(3505),g=l(9920),f=l(4705);o.exports=function(b,A){var v=b.target,T=b.global,_=b.stat,N,R,O,x,w,D;if(T?R=r:_?R=r[v]||h(v,{}):R=(r[v]||{}).prototype,R)for(O in A){if(w=A[O],b.noTargetGet?(D=c(R,O),x=D&&D.value):x=R[O],N=f(T?O:v+(_?".":"#")+O,b.forced),!N&&x!==void 0){if(typeof w==typeof x)continue;g(w,x)}(b.sham||x&&x.sham)&&u(w,"sham",!0),d(R,O,w,b)}}},7293:function(o){o.exports=function(i){try{return!!i()}catch{return!0}}},2104:function(o,i,l){var r=l(4374),c=Function.prototype,u=c.apply,d=c.call;o.exports=typeof Reflect=="object"&&Reflect.apply||(r?d.bind(u):function(){return d.apply(u,arguments)})},4374:function(o,i,l){var r=l(7293);o.exports=!r(function(){var c=(function(){}).bind();return typeof c!="function"||c.hasOwnProperty("prototype")})},6916:function(o,i,l){var r=l(4374),c=Function.prototype.call;o.exports=r?c.bind(c):function(){return c.apply(c,arguments)}},6530:function(o,i,l){var r=l(9781),c=l(2597),u=Function.prototype,d=r&&Object.getOwnPropertyDescriptor,h=c(u,"name"),g=h&&(function(){}).name==="something",f=h&&(!r||r&&d(u,"name").configurable);o.exports={EXISTS:h,PROPER:g,CONFIGURABLE:f}},1702:function(o,i,l){var r=l(4374),c=Function.prototype,u=c.bind,d=c.call,h=r&&u.bind(d,d);o.exports=r?function(g){return g&&h(g)}:function(g){return g&&function(){return d.apply(g,arguments)}}},5005:function(o,i,l){var r=l(7854),c=l(614),u=function(d){return c(d)?d:void 0};o.exports=function(d,h){return arguments.length<2?u(r[d]):r[d]&&r[d][h]}},8173:function(o,i,l){var r=l(9662);o.exports=function(c,u){var d=c[u];return d==null?void 0:r(d)}},7854:function(o,i,l){var r=function(c){return c&&c.Math==Math&&c};o.exports=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof l.g=="object"&&l.g)||function(){return this}()||Function("return this")()},2597:function(o,i,l){var r=l(1702),c=l(7908),u=r({}.hasOwnProperty);o.exports=Object.hasOwn||function(h,g){return u(c(h),g)}},3501:function(o){o.exports={}},4664:function(o,i,l){var r=l(9781),c=l(7293),u=l(317);o.exports=!r&&!c(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},8361:function(o,i,l){var r=l(7854),c=l(1702),u=l(7293),d=l(4326),h=r.Object,g=c("".split);o.exports=u(function(){return!h("z").propertyIsEnumerable(0)})?function(f){return d(f)=="String"?g(f,""):h(f)}:h},9587:function(o,i,l){var r=l(614),c=l(111),u=l(7674);o.exports=function(d,h,g){var f,b;return u&&r(f=h.constructor)&&f!==g&&c(b=f.prototype)&&b!==g.prototype&&u(d,b),d}},2788:function(o,i,l){var r=l(1702),c=l(614),u=l(5465),d=r(Function.toString);c(u.inspectSource)||(u.inspectSource=function(h){return d(h)}),o.exports=u.inspectSource},8340:function(o,i,l){var r=l(111),c=l(8880);o.exports=function(u,d){r(d)&&"cause"in d&&c(u,"cause",d.cause)}},9909:function(o,i,l){var r=l(8536),c=l(7854),u=l(1702),d=l(111),h=l(8880),g=l(2597),f=l(5465),b=l(6200),A=l(3501),v="Object already initialized",T=c.TypeError,_=c.WeakMap,N,R,O,x=function(k){return O(k)?R(k):N(k,{})},w=function(k){return function(B){var V;if(!d(B)||(V=R(B)).type!==k)throw T("Incompatible receiver, "+k+" required");return V}};if(r||f.state){var D=f.state||(f.state=new _),M=u(D.get),P=u(D.has),U=u(D.set);N=function(k,B){if(P(D,k))throw new T(v);return B.facade=k,U(D,k,B),B},R=function(k){return M(D,k)||{}},O=function(k){return P(D,k)}}else{var F=b("state");A[F]=!0,N=function(k,B){if(g(k,F))throw new T(v);return B.facade=k,h(k,F,B),B},R=function(k){return g(k,F)?k[F]:{}},O=function(k){return g(k,F)}}o.exports={set:N,get:R,has:O,enforce:x,getterFor:w}},614:function(o){o.exports=function(i){return typeof i=="function"}},4705:function(o,i,l){var r=l(7293),c=l(614),u=/#|\.prototype\./,d=function(A,v){var T=g[h(A)];return T==b?!0:T==f?!1:c(v)?r(v):!!v},h=d.normalize=function(A){return String(A).replace(u,".").toLowerCase()},g=d.data={},f=d.NATIVE="N",b=d.POLYFILL="P";o.exports=d},111:function(o,i,l){var r=l(614);o.exports=function(c){return typeof c=="object"?c!==null:r(c)}},1913:function(o){o.exports=!1},2190:function(o,i,l){var r=l(7854),c=l(5005),u=l(614),d=l(7976),h=l(3307),g=r.Object;o.exports=h?function(f){return typeof f=="symbol"}:function(f){var b=c("Symbol");return u(b)&&d(b.prototype,g(f))}},6244:function(o,i,l){var r=l(7466);o.exports=function(c){return r(c.length)}},133:function(o,i,l){var r=l(7392),c=l(7293);o.exports=!!Object.getOwnPropertySymbols&&!c(function(){var u=Symbol();return!String(u)||!(Object(u)instanceof Symbol)||!Symbol.sham&&r&&r<41})},8536:function(o,i,l){var r=l(7854),c=l(614),u=l(2788),d=r.WeakMap;o.exports=c(d)&&/native code/.test(u(d))},6277:function(o,i,l){var r=l(1340);o.exports=function(c,u){return c===void 0?arguments.length<2?"":u:r(c)}},3070:function(o,i,l){var r=l(7854),c=l(9781),u=l(4664),d=l(3353),h=l(9670),g=l(4948),f=r.TypeError,b=Object.defineProperty,A=Object.getOwnPropertyDescriptor,v="enumerable",T="configurable",_="writable";i.f=c?d?function(R,O,x){if(h(R),O=g(O),h(x),typeof R=="function"&&O==="prototype"&&"value"in x&&_ in x&&!x[_]){var w=A(R,O);w&&w[_]&&(R[O]=x.value,x={configurable:T in x?x[T]:w[T],enumerable:v in x?x[v]:w[v],writable:!1})}return b(R,O,x)}:b:function(R,O,x){if(h(R),O=g(O),h(x),u)try{return b(R,O,x)}catch{}if("get"in x||"set"in x)throw f("Accessors not supported");return"value"in x&&(R[O]=x.value),R}},1236:function(o,i,l){var r=l(9781),c=l(6916),u=l(5296),d=l(9114),h=l(5656),g=l(4948),f=l(2597),b=l(4664),A=Object.getOwnPropertyDescriptor;i.f=r?A:function(T,_){if(T=h(T),_=g(_),b)try{return A(T,_)}catch{}if(f(T,_))return d(!c(u.f,T,_),T[_])}},8006:function(o,i,l){var r=l(6324),c=l(748),u=c.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(h){return r(h,u)}},5181:function(o,i){i.f=Object.getOwnPropertySymbols},7976:function(o,i,l){var r=l(1702);o.exports=r({}.isPrototypeOf)},6324:function(o,i,l){var r=l(1702),c=l(2597),u=l(5656),d=l(1318).indexOf,h=l(3501),g=r([].push);o.exports=function(f,b){var A=u(f),v=0,T=[],_;for(_ in A)!c(h,_)&&c(A,_)&&g(T,_);for(;b.length>v;)c(A,_=b[v++])&&(~d(T,_)||g(T,_));return T}},5296:function(o,i){var l={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,c=r&&!l.call({1:2},1);i.f=c?function(d){var h=r(this,d);return!!h&&h.enumerable}:l},7674:function(o,i,l){var r=l(1702),c=l(9670),u=l(6077);o.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d=!1,h={},g;try{g=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),g(h,[]),d=h instanceof Array}catch{}return function(b,A){return c(b),u(A),d?g(b,A):b.__proto__=A,b}}():void 0)},2140:function(o,i,l){var r=l(7854),c=l(6916),u=l(614),d=l(111),h=r.TypeError;o.exports=function(g,f){var b,A;if(f==="string"&&u(b=g.toString)&&!d(A=c(b,g))||u(b=g.valueOf)&&!d(A=c(b,g))||f!=="string"&&u(b=g.toString)&&!d(A=c(b,g)))return A;throw h("Can't convert object to primitive value")}},3887:function(o,i,l){var r=l(5005),c=l(1702),u=l(8006),d=l(5181),h=l(9670),g=c([].concat);o.exports=r("Reflect","ownKeys")||function(b){var A=u.f(h(b)),v=d.f;return v?g(A,v(b)):A}},1320:function(o,i,l){var r=l(7854),c=l(614),u=l(2597),d=l(8880),h=l(3505),g=l(2788),f=l(9909),b=l(6530).CONFIGURABLE,A=f.get,v=f.enforce,T=String(String).split("String");(o.exports=function(_,N,R,O){var x=O?!!O.unsafe:!1,w=O?!!O.enumerable:!1,D=O?!!O.noTargetGet:!1,M=O&&O.name!==void 0?O.name:N,P;if(c(R)&&(String(M).slice(0,7)==="Symbol("&&(M="["+String(M).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!u(R,"name")||b&&R.name!==M)&&d(R,"name",M),P=v(R),P.source||(P.source=T.join(typeof M=="string"?M:""))),_===r){w?_[N]=R:h(N,R);return}else x?!D&&_[N]&&(w=!0):delete _[N];w?_[N]=R:d(_,N,R)})(Function.prototype,"toString",function(){return c(this)&&A(this).source||g(this)})},4488:function(o,i,l){var r=l(7854),c=r.TypeError;o.exports=function(u){if(u==null)throw c("Can't call method on "+u);return u}},3505:function(o,i,l){var r=l(7854),c=Object.defineProperty;o.exports=function(u,d){try{c(r,u,{value:d,configurable:!0,writable:!0})}catch{r[u]=d}return d}},6200:function(o,i,l){var r=l(2309),c=l(9711),u=r("keys");o.exports=function(d){return u[d]||(u[d]=c(d))}},5465:function(o,i,l){var r=l(7854),c=l(3505),u="__core-js_shared__",d=r[u]||c(u,{});o.exports=d},2309:function(o,i,l){var r=l(1913),c=l(5465);(o.exports=function(u,d){return c[u]||(c[u]=d!==void 0?d:{})})("versions",[]).push({version:"3.21.1",mode:r?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},1400:function(o,i,l){var r=l(9303),c=Math.max,u=Math.min;o.exports=function(d,h){var g=r(d);return g<0?c(g+h,0):u(g,h)}},5656:function(o,i,l){var r=l(8361),c=l(4488);o.exports=function(u){return r(c(u))}},9303:function(o){var i=Math.ceil,l=Math.floor;o.exports=function(r){var c=+r;return c!==c||c===0?0:(c>0?l:i)(c)}},7466:function(o,i,l){var r=l(9303),c=Math.min;o.exports=function(u){return u>0?c(r(u),9007199254740991):0}},7908:function(o,i,l){var r=l(7854),c=l(4488),u=r.Object;o.exports=function(d){return u(c(d))}},7593:function(o,i,l){var r=l(7854),c=l(6916),u=l(111),d=l(2190),h=l(8173),g=l(2140),f=l(5112),b=r.TypeError,A=f("toPrimitive");o.exports=function(v,T){if(!u(v)||d(v))return v;var _=h(v,A),N;if(_){if(T===void 0&&(T="default"),N=c(_,v,T),!u(N)||d(N))return N;throw b("Can't convert object to primitive value")}return T===void 0&&(T="number"),g(v,T)}},4948:function(o,i,l){var r=l(7593),c=l(2190);o.exports=function(u){var d=r(u,"string");return c(d)?d:d+""}},1694:function(o,i,l){var r=l(5112),c=r("toStringTag"),u={};u[c]="z",o.exports=String(u)==="[object z]"},1340:function(o,i,l){var r=l(7854),c=l(648),u=r.String;o.exports=function(d){if(c(d)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return u(d)}},6330:function(o,i,l){var r=l(7854),c=r.String;o.exports=function(u){try{return c(u)}catch{return"Object"}}},9711:function(o,i,l){var r=l(1702),c=0,u=Math.random(),d=r(1 .toString);o.exports=function(h){return"Symbol("+(h===void 0?"":h)+")_"+d(++c+u,36)}},3307:function(o,i,l){var r=l(133);o.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},3353:function(o,i,l){var r=l(9781),c=l(7293);o.exports=r&&c(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},5112:function(o,i,l){var r=l(7854),c=l(2309),u=l(2597),d=l(9711),h=l(133),g=l(3307),f=c("wks"),b=r.Symbol,A=b&&b.for,v=g?b:b&&b.withoutSetter||d;o.exports=function(T){if(!u(f,T)||!(h||typeof f[T]=="string")){var _="Symbol."+T;h&&u(b,T)?f[T]=b[T]:g&&A?f[T]=A(_):f[T]=v(_)}return f[T]}},9191:function(o,i,l){var r=l(5005),c=l(2597),u=l(8880),d=l(7976),h=l(7674),g=l(9920),f=l(9587),b=l(6277),A=l(8340),v=l(7741),T=l(2914),_=l(1913);o.exports=function(N,R,O,x){var w=x?2:1,D=N.split("."),M=D[D.length-1],P=r.apply(null,D);if(P){var U=P.prototype;if(!_&&c(U,"cause")&&delete U.cause,!O)return P;var F=r("Error"),k=R(function(B,V){var G=b(x?V:B,void 0),K=x?new P(B):new P;return G!==void 0&&u(K,"message",G),T&&u(K,"stack",v(K.stack,2)),this&&d(U,this)&&f(K,this,k),arguments.length>w&&A(K,arguments[w]),K});if(k.prototype=U,M!=="Error"&&(h?h(k,F):g(k,F,{name:!0})),g(k,P),!_)try{U.name!==M&&u(U,"name",M),U.constructor=k}catch{}return k}}},1703:function(o,i,l){var r=l(2109),c=l(7854),u=l(2104),d=l(9191),h="WebAssembly",g=c[h],f=Error("e",{cause:7}).cause!==7,b=function(v,T){var _={};_[v]=d(v,T,f),r({global:!0,forced:f},_)},A=function(v,T){if(g&&g[v]){var _={};_[v]=d(h+"."+v,T,f),r({target:h,stat:!0,forced:f},_)}};b("Error",function(v){return function(_){return u(v,this,arguments)}}),b("EvalError",function(v){return function(_){return u(v,this,arguments)}}),b("RangeError",function(v){return function(_){return u(v,this,arguments)}}),b("ReferenceError",function(v){return function(_){return u(v,this,arguments)}}),b("SyntaxError",function(v){return function(_){return u(v,this,arguments)}}),b("TypeError",function(v){return function(_){return u(v,this,arguments)}}),b("URIError",function(v){return function(_){return u(v,this,arguments)}}),A("CompileError",function(v){return function(_){return u(v,this,arguments)}}),A("LinkError",function(v){return function(_){return u(v,this,arguments)}}),A("RuntimeError",function(v){return function(_){return u(v,this,arguments)}})},6095:function(o,i,l){l.r(i);var r=l(8081),c=l.n(r),u=l(3645),d=l.n(u),h=d()(c());h.push([o.id,".vc-chrome{background:#fff;border-radius:2px;box-shadow:0 0 2px rgba(0,0,0,.3),0 4px 8px rgba(0,0,0,.3);box-sizing:initial;width:225px;font-family:Menlo;background-color:#fff}.vc-chrome-controls{display:flex}.vc-chrome-color-wrap{position:relative;width:36px}.vc-chrome-active-color{position:relative;width:30px;height:30px;border-radius:15px;overflow:hidden;z-index:1}.vc-chrome-color-wrap .vc-checkerboard{width:30px;height:30px;border-radius:15px;background-size:auto}.vc-chrome-sliders{flex:1}.vc-chrome-fields-wrap{display:flex;padding-top:16px}.vc-chrome-fields{display:flex;margin-left:-6px;flex:1}.vc-chrome-field{padding-left:6px;width:100%}.vc-chrome-toggle-btn{width:32px;text-align:right;position:relative}.vc-chrome-toggle-icon{margin-right:-4px;margin-top:12px;cursor:pointer;position:relative;z-index:2}.vc-chrome-toggle-icon-highlight{position:absolute;width:24px;height:28px;background:#eee;border-radius:4px;top:10px;left:12px}.vc-chrome-hue-wrap{margin-bottom:8px}.vc-chrome-alpha-wrap,.vc-chrome-hue-wrap{position:relative;height:10px}.vc-chrome-alpha-wrap .vc-alpha-gradient,.vc-chrome-hue-wrap .vc-hue{border-radius:2px}.vc-chrome-alpha-wrap .vc-alpha-picker,.vc-chrome-hue-wrap .vc-hue-picker{width:12px;height:12px;border-radius:6px;transform:translate(-6px,-2px);background-color:#f8f8f8;box-shadow:0 1px 4px 0 rgba(0,0,0,.37)}.vc-chrome-body{padding:16px 16px 12px;background-color:#fff}.vc-chrome-saturation-wrap{width:100%;padding-bottom:55%;position:relative;border-radius:2px 2px 0 0;overflow:hidden}.vc-chrome-saturation-wrap .vc-saturation-circle{width:12px;height:12px}.vc-chrome-fields .vc-input__input{font-size:11px;color:#333;width:100%;border-radius:2px;border:none;box-shadow:inset 0 0 0 1px #dadada;height:21px;text-align:center}.vc-chrome-fields .vc-input__label{text-transform:uppercase;font-size:11px;line-height:11px;color:#969696;text-align:center;display:block;margin-top:12px}.vc-chrome__disable-alpha .vc-chrome-active-color{width:18px;height:18px}.vc-chrome__disable-alpha .vc-chrome-color-wrap{width:30px}.vc-chrome__disable-alpha .vc-chrome-hue-wrap{margin-top:4px;margin-bottom:4px}",""]),i.default=h},6047:function(o,i,l){l.r(i);var r=l(8081),c=l.n(r),u=l(3645),d=l.n(u),h=d()(c());h.push([o.id,".vc-compact{padding-top:5px;padding-left:5px;width:245px;border-radius:2px;box-sizing:border-box;box-shadow:0 2px 10px rgba(0,0,0,.12),0 2px 5px rgba(0,0,0,.16);background-color:#fff}.vc-compact-colors{overflow:hidden;padding:0;margin:0}.vc-compact-color-item{list-style:none;width:15px;height:15px;float:left;margin-right:5px;margin-bottom:5px;position:relative;cursor:pointer}.vc-compact-color-item--white{box-shadow:inset 0 0 0 1px #ddd}.vc-compact-color-item--white .vc-compact-dot{background:#000}.vc-compact-dot{position:absolute;top:5px;right:5px;bottom:5px;left:5px;border-radius:50%;opacity:1;background:#fff}",""]),i.default=h},9481:function(o,i,l){l.r(i);var r=l(8081),c=l.n(r),u=l(3645),d=l.n(u),h=d()(c());h.push([o.id,".vc-grayscale{width:125px;border-radius:2px;box-shadow:0 2px 15px rgba(0,0,0,.12),0 2px 10px rgba(0,0,0,.16);background-color:#fff}.vc-grayscale-colors{border-radius:2px;overflow:hidden;padding:0;margin:0}.vc-grayscale-color-item{list-style:none;width:25px;height:25px;float:left;position:relative;cursor:pointer}.vc-grayscale-color-item--white .vc-grayscale-dot{background:#000}.vc-grayscale-dot{position:absolute;top:50%;left:50%;width:6px;height:6px;margin:-3px 0 0 -2px;border-radius:50%;opacity:1;background:#fff}",""]),i.default=h},5186:function(o,i,l){l.r(i);var r=l(8081),c=l.n(r),u=l(3645),d=l.n(u),h=d()(c());h.push([o.id,".vc-material{width:98px;height:98px;padding:16px;font-family:Roboto;position:relative;border-radius:2px;box-shadow:0 2px 10px rgba(0,0,0,.12),0 2px 5px rgba(0,0,0,.16);background-color:#fff}.vc-material .vc-input__input{width:100%;margin-top:12px;font-size:15px;color:#333;height:30px}.vc-material .vc-input__label{position:absolute;top:0;left:0;font-size:11px;color:#999;text-transform:capitalize}.vc-material-hex{border-bottom-width:2px;border-bottom-style:solid}.vc-material-split{display:flex;margin-right:-10px;padding-top:11px}.vc-material-third{flex:1;padding-right:10px}",""]),i.default=h},3695:function(o,i,l){l.r(i);var r=l(8081),c=l.n(r),u=l(3645),d=l.n(u),h=d()(c());h.push([o.id,'.vc-photoshop{background:#dcdcdc;border-radius:4px;box-shadow:0 0 0 1px rgba(0,0,0,.25),0 8px 16px rgba(0,0,0,.15);box-sizing:initial;width:513px;font-family:Roboto}.vc-photoshop__disable-fields{width:390px}.vc-ps-head{background-image:linear-gradient(-180deg,#f0f0f0,#d4d4d4);border-bottom:1px solid #b1b1b1;box-shadow:inset 0 1px 0 0 hsla(0,0%,100%,.2),inset 0 -1px 0 0 rgba(0,0,0,.02);height:23px;line-height:24px;border-radius:4px 4px 0 0;font-size:13px;color:#4d4d4d;text-align:center}.vc-ps-body{padding:15px;display:flex}.vc-ps-saturation-wrap{width:256px;height:256px;position:relative;border:2px solid #b3b3b3;border-bottom:2px solid #f0f0f0;overflow:hidden}.vc-ps-saturation-wrap .vc-saturation-circle{width:12px;height:12px}.vc-ps-hue-wrap{height:256px;width:19px;margin-left:10px;border:2px solid #b3b3b3;border-bottom:2px solid #f0f0f0}.vc-ps-hue-pointer,.vc-ps-hue-wrap{position:relative}.vc-ps-hue-pointer--left,.vc-ps-hue-pointer--right{position:absolute;width:0;height:0;border-style:solid;border-width:5px 0 5px 8px;border-color:transparent transparent transparent #555}.vc-ps-hue-pointer--left:after,.vc-ps-hue-pointer--right:after{content:"";width:0;height:0;border-style:solid;border-width:4px 0 4px 6px;border-color:transparent transparent transparent #fff;position:absolute;top:1px;left:1px;transform:translate(-8px,-5px)}.vc-ps-hue-pointer--left{transform:translate(-13px,-4px)}.vc-ps-hue-pointer--right{transform:translate(20px,-4px) rotate(180deg)}.vc-ps-controls{width:180px;margin-left:10px;display:flex}.vc-ps-controls__disable-fields{width:auto}.vc-ps-actions{margin-left:20px;flex:1}.vc-ps-ac-btn{cursor:pointer;background-image:linear-gradient(-180deg,#fff,#e6e6e6);border:1px solid #878787;border-radius:2px;height:20px;box-shadow:0 1px 0 0 #eaeaea;font-size:14px;color:#000;line-height:20px;text-align:center;margin-bottom:10px}.vc-ps-previews{width:60px}.vc-ps-previews__swatches{border:1px solid #b3b3b3;border-bottom:1px solid #f0f0f0;margin-bottom:2px;margin-top:1px}.vc-ps-previews__pr-color{height:34px;box-shadow:inset 1px 0 0 #000,inset -1px 0 0 #000,inset 0 1px 0 #000}.vc-ps-previews__label{font-size:14px;color:#000;text-align:center}.vc-ps-fields{padding-top:5px;padding-bottom:9px;width:80px;position:relative}.vc-ps-fields .vc-input__input{margin-left:40%;width:40%;height:18px;border:1px solid #888;box-shadow:inset 0 1px 1px rgba(0,0,0,.1),0 1px 0 0 #ececec;margin-bottom:5px;font-size:13px;padding-left:3px;margin-right:10px}.vc-ps-fields .vc-input__desc,.vc-ps-fields .vc-input__label{top:0;text-transform:uppercase;font-size:13px;height:18px;line-height:22px;position:absolute}.vc-ps-fields .vc-input__label{left:0;width:34px}.vc-ps-fields .vc-input__desc{right:0;width:0}.vc-ps-fields__divider{height:5px}.vc-ps-fields__hex .vc-input__input{margin-left:20%;width:80%;height:18px;border:1px solid #888;box-shadow:inset 0 1px 1px rgba(0,0,0,.1),0 1px 0 0 #ececec;margin-bottom:6px;font-size:13px;padding-left:3px}.vc-ps-fields__hex .vc-input__label{position:absolute;top:0;left:0;width:14px;text-transform:uppercase;font-size:13px;height:18px;line-height:22px}',""]),i.default=h},7279:function(o,i,l){l.r(i);var r=l(8081),c=l.n(r),u=l(3645),d=l.n(u),h=d()(c());h.push([o.id,".vc-sketch{position:relative;width:200px;padding:10px 10px 0;box-sizing:initial;background:#fff;border-radius:4px;box-shadow:0 0 0 1px rgba(0,0,0,.15),0 8px 16px rgba(0,0,0,.15)}.vc-sketch-saturation-wrap{width:100%;padding-bottom:75%;position:relative;overflow:hidden}.vc-sketch-controls{display:flex}.vc-sketch-sliders{padding:4px 0;flex:1}.vc-sketch-sliders .vc-alpha-gradient,.vc-sketch-sliders .vc-hue{border-radius:2px}.vc-sketch-alpha-wrap,.vc-sketch-hue-wrap{position:relative;height:10px}.vc-sketch-alpha-wrap{margin-top:4px;overflow:hidden}.vc-sketch-color-wrap{width:24px;height:24px;position:relative;margin-top:4px;margin-left:4px;border-radius:3px}.vc-sketch-active-color{position:absolute;top:0;left:0;right:0;bottom:0;border-radius:2px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15),inset 0 0 4px rgba(0,0,0,.25);z-index:2}.vc-sketch-color-wrap .vc-checkerboard{background-size:auto}.vc-sketch-field{display:flex;padding-top:4px}.vc-sketch-field .vc-input__input{width:90%;padding:4px 0 3px 10%;border:none;box-shadow:inset 0 0 0 1px #ccc;font-size:10px}.vc-sketch-field .vc-input__label{display:block;text-align:center;font-size:11px;color:#222;padding-top:3px;padding-bottom:4px;text-transform:capitalize}.vc-sketch-field--single{flex:1;padding-left:6px}.vc-sketch-field--double{flex:2}.vc-sketch-presets{margin-right:-10px;margin-left:-10px;padding-left:10px;padding-top:10px;border-top:1px solid #eee}.vc-sketch-presets-color{overflow:hidden;position:relative;display:inline-block;margin:0 10px 10px 0;vertical-align:top;cursor:pointer;width:16px;height:16px}.vc-sketch-presets-color,.vc-sketch-presets-color .vc-checkerboard{border-radius:3px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15)}.vc-sketch__disable-alpha .vc-sketch-color-wrap{height:10px}",""]),i.default=h},6278:function(o,i,l){l.r(i);var r=l(8081),c=l.n(r),u=l(3645),d=l.n(u),h=d()(c());h.push([o.id,".vc-slider{position:relative;width:410px}.vc-slider-hue-warp{height:12px;position:relative}.vc-slider-hue-warp .vc-hue-picker{width:14px;height:14px;border-radius:6px;transform:translate(-7px,-2px);background-color:#f8f8f8;box-shadow:0 1px 4px 0 rgba(0,0,0,.37)}.vc-slider-swatches{display:flex;margin-top:20px}.vc-slider-swatch{margin-right:1px;flex:1;width:20%}.vc-slider-swatch:first-child{margin-right:1px}.vc-slider-swatch:first-child .vc-slider-swatch-picker{border-radius:2px 0 0 2px}.vc-slider-swatch:last-child{margin-right:0}.vc-slider-swatch:last-child .vc-slider-swatch-picker{border-radius:0 2px 2px 0}.vc-slider-swatch-picker{cursor:pointer;height:12px}.vc-slider-swatch:nth-child(n) .vc-slider-swatch-picker.vc-slider-swatch-picker--active{transform:scaleY(1.8);border-radius:3.6px/2px}.vc-slider-swatch-picker--white{box-shadow:inset 0 0 0 1px #ddd}.vc-slider-swatch-picker--active.vc-slider-swatch-picker--white{box-shadow:inset 0 0 0 .6px #ddd}",""]),i.default=h},3468:function(o,i,l){l.r(i);var r=l(8081),c=l.n(r),u=l(3645),d=l.n(u),h=d()(c());h.push([o.id,".vc-swatches{width:320px;height:240px;overflow-y:scroll;background-color:#fff;box-shadow:0 2px 10px rgba(0,0,0,.12),0 2px 5px rgba(0,0,0,.16)}.vc-swatches-box{padding:16px 0 6px 16px;overflow:hidden}.vc-swatches-color-group{padding-bottom:10px;width:40px;float:left;margin-right:10px}.vc-swatches-color-it{box-sizing:border-box;width:40px;height:24px;cursor:pointer;background:#880e4f;margin-bottom:1px;overflow:hidden;border-radius:2px 2px 0 0}.vc-swatches-color--white{border:1px solid #ddd}.vc-swatches-pick{fill:#fff;margin-left:8px;display:block}.vc-swatches-color--white .vc-swatches-pick{fill:#333}",""]),i.default=h},5689:function(o,i,l){l.r(i);var r=l(8081),c=l.n(r),u=l(3645),d=l.n(u),h=d()(c());h.push([o.id,".vc-twitter{background:#fff;border:0 solid rgba(0,0,0,.25);box-shadow:0 1px 4px rgba(0,0,0,.25);border-radius:4px;position:relative}.vc-twitter-triangle{border-color:transparent transparent #fff transparent}.vc-twitter-triangle,.vc-twitter-triangle-shadow{width:0;height:0;border-style:solid;border-width:0 9px 10px 9px;position:absolute}.vc-twitter-triangle-shadow{border-color:transparent transparent rgba(0,0,0,.1) transparent}.vc-twitter-body{padding:15px 9px 9px 15px}.vc-twitter .vc-editable-input{position:relative}.vc-twitter .vc-editable-input input{width:100px;font-size:14px;color:#666;border:0;outline:none;height:28px;box-shadow:inset 0 0 0 1px #f0f0f0;box-sizing:content-box;border-radius:0 4px 4px 0;float:left;padding:1px;padding-left:8px}.vc-twitter .vc-editable-input span{display:none}.vc-twitter-hash{background:#f0f0f0;height:30px;width:30px;border-radius:4px 0 0 4px;float:left;color:#98a1a4;display:flex;align-items:center;justify-content:center}.vc-twitter-swatch{width:30px;height:30px;float:left;border-radius:4px;margin:0 6px 6px 0;cursor:pointer;position:relative;outline:none}.vc-twitter-clear{clear:both}.vc-twitter-hide-triangle .vc-twitter-triangle,.vc-twitter-hide-triangle .vc-twitter-triangle-shadow{display:none}.vc-twitter-top-left-triangle .vc-twitter-triangle{top:-10px;left:12px}.vc-twitter-top-left-triangle .vc-twitter-triangle-shadow{top:-11px;left:12px}.vc-twitter-top-right-triangle .vc-twitter-triangle{top:-10px;right:12px}.vc-twitter-top-right-triangle .vc-twitter-triangle-shadow{top:-11px;right:12px}",""]),i.default=h},2410:function(o,i,l){l.r(i);var r=l(8081),c=l.n(r),u=l(3645),d=l.n(u),h=d()(c());h.push([o.id,".vc-alpha,.vc-alpha-checkboard-wrap{position:absolute;top:0;right:0;bottom:0;left:0}.vc-alpha-checkboard-wrap{overflow:hidden}.vc-alpha-gradient{position:absolute;top:0;right:0;bottom:0;left:0}.vc-alpha-container{cursor:pointer;position:relative;z-index:2;height:100%;margin:0 3px}.vc-alpha-pointer{z-index:2;position:absolute}.vc-alpha-picker{cursor:pointer;width:4px;border-radius:1px;height:8px;box-shadow:0 0 2px rgba(0,0,0,.6);background:#fff;margin-top:1px;transform:translateX(-2px)}",""]),i.default=h},3142:function(o,i,l){l.r(i);var r=l(8081),c=l.n(r),u=l(3645),d=l.n(u),h=d()(c());h.push([o.id,".vc-checkerboard{position:absolute;top:0;right:0;bottom:0;left:0;background-size:contain}",""]),i.default=h},7953:function(o,i,l){l.r(i);var r=l(8081),c=l.n(r),u=l(3645),d=l.n(u),h=d()(c());h.push([o.id,".vc-editable-input{position:relative}.vc-input__input{padding:0;border:0;outline:none}.vc-input__label{text-transform:capitalize}",""]),i.default=h},3097:function(o,i,l){l.r(i);var r=l(8081),c=l.n(r),u=l(3645),d=l.n(u),h=d()(c());h.push([o.id,".vc-hue{position:absolute;top:0;right:0;bottom:0;left:0;border-radius:2px}.vc-hue--horizontal{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue--vertical{background:linear-gradient(0deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue-container{cursor:pointer;margin:0 2px;position:relative;height:100%}.vc-hue-pointer{z-index:2;position:absolute}.vc-hue-picker{cursor:pointer;margin-top:1px;width:4px;border-radius:1px;height:8px;box-shadow:0 0 2px rgba(0,0,0,.6);background:#fff;transform:translateX(-2px)}",""]),i.default=h},4339:function(o,i,l){l.r(i);var r=l(8081),c=l.n(r),u=l(3645),d=l.n(u),h=d()(c());h.push([o.id,".vc-saturation,.vc-saturation--black,.vc-saturation--white{cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0}.vc-saturation--white{background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.vc-saturation--black{background:linear-gradient(0deg,#000,transparent)}.vc-saturation-pointer{cursor:pointer;position:absolute}.vc-saturation-circle{cursor:head;width:4px;height:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);border-radius:50%;transform:translate(-2px,-2px)}",""]),i.default=h},3645:function(o){o.exports=function(i){var l=[];return l.toString=function(){return this.map(function(c){var u="",d=typeof c[5]<"u";return c[4]&&(u+="@supports (".concat(c[4],") {")),c[2]&&(u+="@media ".concat(c[2]," {")),d&&(u+="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {")),u+=i(c),d&&(u+="}"),c[2]&&(u+="}"),c[4]&&(u+="}"),u}).join("")},l.i=function(c,u,d,h,g){typeof c=="string"&&(c=[[null,c,void 0]]);var f={};if(d)for(var b=0;b<this.length;b++){var A=this[b][0];A!=null&&(f[A]=!0)}for(var v=0;v<c.length;v++){var T=[].concat(c[v]);d&&f[T[0]]||(typeof g<"u"&&(typeof T[5]>"u"||(T[1]="@layer".concat(T[5].length>0?" ".concat(T[5]):""," {").concat(T[1],"}")),T[5]=g),u&&(T[2]&&(T[1]="@media ".concat(T[2]," {").concat(T[1],"}")),T[2]=u),h&&(T[4]?(T[1]="@supports (".concat(T[4],") {").concat(T[1],"}"),T[4]=h):T[4]="".concat(h)),l.push(T))}},l}},8081:function(o){o.exports=function(i){return i[1]}},9428:function(o){o.exports=i;function i(l,r,c){return r<c?l<r?r:l>c?c:l:l<c?c:l>r?r:l}},9016:function(o,i,l){var r=l(9159),c=r.Symbol;o.exports=c},6423:function(o,i,l){var r=l(9016),c=l(2366),u=l(2886),d="[object Null]",h="[object Undefined]",g=r?r.toStringTag:void 0;function f(b){return b==null?b===void 0?h:d:g&&g in Object(b)?c(b):u(b)}o.exports=f},6009:function(o,i,l){var r=l(1626),c=/^\s+/;function u(d){return d&&d.slice(0,r(d)+1).replace(c,"")}o.exports=u},791:function(o,i,l){var r=typeof l.g=="object"&&l.g&&l.g.Object===Object&&l.g;o.exports=r},2366:function(o,i,l){var r=l(9016),c=Object.prototype,u=c.hasOwnProperty,d=c.toString,h=r?r.toStringTag:void 0;function g(f){var b=u.call(f,h),A=f[h];try{f[h]=void 0;var v=!0}catch{}var T=d.call(f);return v&&(b?f[h]=A:delete f[h]),T}o.exports=g},2886:function(o){var i=Object.prototype,l=i.toString;function r(c){return l.call(c)}o.exports=r},9159:function(o,i,l){var r=l(791),c=typeof self=="object"&&self&&self.Object===Object&&self,u=r||c||Function("return this")();o.exports=u},1626:function(o){var i=/\s/;function l(r){for(var c=r.length;c--&&i.test(r.charAt(c)););return c}o.exports=l},3738:function(o,i,l){l(1703);var r=l(150),c=l(657),u=l(2012),d="Expected a function",h=Math.max,g=Math.min;function f(b,A,v){var T,_,N,R,O,x,w=0,D=!1,M=!1,P=!0;if(typeof b!="function")throw new TypeError(d);A=u(A)||0,r(v)&&(D=!!v.leading,M="maxWait"in v,N=M?h(u(v.maxWait)||0,A):N,P="trailing"in v?!!v.trailing:P);function U(X){var z=T,H=_;return T=_=void 0,w=X,R=b.apply(H,z),R}function F(X){return w=X,O=setTimeout(V,A),D?U(X):R}function k(X){var z=X-x,H=X-w,q=A-z;return M?g(q,N-H):q}function B(X){var z=X-x,H=X-w;return x===void 0||z>=A||z<0||M&&H>=N}function V(){var X=c();if(B(X))return G(X);O=setTimeout(V,k(X))}function G(X){return O=void 0,P&&T?U(X):(T=_=void 0,R)}function K(){O!==void 0&&clearTimeout(O),w=0,T=x=_=O=void 0}function se(){return O===void 0?R:G(c())}function ee(){var X=c(),z=B(X);if(T=arguments,_=this,x=X,z){if(O===void 0)return F(x);if(M)return clearTimeout(O),O=setTimeout(V,A),U(x)}return O===void 0&&(O=setTimeout(V,A)),R}return ee.cancel=K,ee.flush=se,ee}o.exports=f},150:function(o){function i(l){var r=typeof l;return l!=null&&(r=="object"||r=="function")}o.exports=i},4430:function(o){function i(l){return l!=null&&typeof l=="object"}o.exports=i},7691:function(o,i,l){var r=l(6423),c=l(4430),u="[object Symbol]";function d(h){return typeof h=="symbol"||c(h)&&r(h)==u}o.exports=d},657:function(o,i,l){var r=l(9159),c=function(){return r.Date.now()};o.exports=c},9289:function(o,i,l){l(1703);var r=l(3738),c=l(150),u="Expected a function";function d(h,g,f){var b=!0,A=!0;if(typeof h!="function")throw new TypeError(u);return c(f)&&(b="leading"in f?!!f.leading:b,A="trailing"in f?!!f.trailing:A),r(h,g,{leading:b,maxWait:g,trailing:A})}o.exports=d},2012:function(o,i,l){var r=l(6009),c=l(150),u=l(7691),d=NaN,h=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,f=/^0o[0-7]+$/i,b=parseInt;function A(v){if(typeof v=="number")return v;if(u(v))return d;if(c(v)){var T=typeof v.valueOf=="function"?v.valueOf():v;v=c(T)?T+"":T}if(typeof v!="string")return v===0?v:+v;v=r(v);var _=g.test(v);return _||f.test(v)?b(v.slice(2),_?2:8):h.test(v)?d:+v}o.exports=A},7013:function(o,i,l){var r;(function(c){var u=/^\s+/,d=/\s+$/,h=0,g=c.round,f=c.min,b=c.max,A=c.random;function v(le,ve){if(le=le||"",ve=ve||{},le instanceof v)return le;if(!(this instanceof v))return new v(le,ve);var ge=T(le);this._originalInput=le,this._r=ge.r,this._g=ge.g,this._b=ge.b,this._a=ge.a,this._roundA=g(100*this._a)/100,this._format=ve.format||ge.format,this._gradientType=ve.gradientType,this._r<1&&(this._r=g(this._r)),this._g<1&&(this._g=g(this._g)),this._b<1&&(this._b=g(this._b)),this._ok=ge.ok,this._tc_id=h++}v.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var le=this.toRgb();return(le.r*299+le.g*587+le.b*114)/1e3},getLuminance:function(){var le=this.toRgb(),ve,ge,Ie,Be,ye,$e;return ve=le.r/255,ge=le.g/255,Ie=le.b/255,ve<=.03928?Be=ve/12.92:Be=c.pow((ve+.055)/1.055,2.4),ge<=.03928?ye=ge/12.92:ye=c.pow((ge+.055)/1.055,2.4),Ie<=.03928?$e=Ie/12.92:$e=c.pow((Ie+.055)/1.055,2.4),.2126*Be+.7152*ye+.0722*$e},setAlpha:function(le){return this._a=Te(le),this._roundA=g(100*this._a)/100,this},toHsv:function(){var le=O(this._r,this._g,this._b);return{h:le.h*360,s:le.s,v:le.v,a:this._a}},toHsvString:function(){var le=O(this._r,this._g,this._b),ve=g(le.h*360),ge=g(le.s*100),Ie=g(le.v*100);return this._a==1?"hsv("+ve+", "+ge+"%, "+Ie+"%)":"hsva("+ve+", "+ge+"%, "+Ie+"%, "+this._roundA+")"},toHsl:function(){var le=N(this._r,this._g,this._b);return{h:le.h*360,s:le.s,l:le.l,a:this._a}},toHslString:function(){var le=N(this._r,this._g,this._b),ve=g(le.h*360),ge=g(le.s*100),Ie=g(le.l*100);return this._a==1?"hsl("+ve+", "+ge+"%, "+Ie+"%)":"hsla("+ve+", "+ge+"%, "+Ie+"%, "+this._roundA+")"},toHex:function(le){return w(this._r,this._g,this._b,le)},toHexString:function(le){return"#"+this.toHex(le)},toHex8:function(le){return D(this._r,this._g,this._b,this._a,le)},toHex8String:function(le){return"#"+this.toHex8(le)},toRgb:function(){return{r:g(this._r),g:g(this._g),b:g(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+g(this._r)+", "+g(this._g)+", "+g(this._b)+")":"rgba("+g(this._r)+", "+g(this._g)+", "+g(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:g(ce(this._r,255)*100)+"%",g:g(ce(this._g,255)*100)+"%",b:g(ce(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+g(ce(this._r,255)*100)+"%, "+g(ce(this._g,255)*100)+"%, "+g(ce(this._b,255)*100)+"%)":"rgba("+g(ce(this._r,255)*100)+"%, "+g(ce(this._g,255)*100)+"%, "+g(ce(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:J[w(this._r,this._g,this._b,!0)]||!1},toFilter:function(le){var ve="#"+M(this._r,this._g,this._b,this._a),ge=ve,Ie=this._gradientType?"GradientType = 1, ":"";if(le){var Be=v(le);ge="#"+M(Be._r,Be._g,Be._b,Be._a)}return"progid:DXImageTransform.Microsoft.gradient("+Ie+"startColorstr="+ve+",endColorstr="+ge+")"},toString:function(le){var ve=!!le;le=le||this._format;var ge=!1,Ie=this._a<1&&this._a>=0,Be=!ve&&Ie&&(le==="hex"||le==="hex6"||le==="hex3"||le==="hex4"||le==="hex8"||le==="name");return Be?le==="name"&&this._a===0?this.toName():this.toRgbString():(le==="rgb"&&(ge=this.toRgbString()),le==="prgb"&&(ge=this.toPercentageRgbString()),(le==="hex"||le==="hex6")&&(ge=this.toHexString()),le==="hex3"&&(ge=this.toHexString(!0)),le==="hex4"&&(ge=this.toHex8String(!0)),le==="hex8"&&(ge=this.toHex8String()),le==="name"&&(ge=this.toName()),le==="hsl"&&(ge=this.toHslString()),le==="hsv"&&(ge=this.toHsvString()),ge||this.toHexString())},clone:function(){return v(this.toString())},_applyModification:function(le,ve){var ge=le.apply(null,[this].concat([].slice.call(ve)));return this._r=ge._r,this._g=ge._g,this._b=ge._b,this.setAlpha(ge._a),this},lighten:function(){return this._applyModification(k,arguments)},brighten:function(){return this._applyModification(B,arguments)},darken:function(){return this._applyModification(V,arguments)},desaturate:function(){return this._applyModification(P,arguments)},saturate:function(){return this._applyModification(U,arguments)},greyscale:function(){return this._applyModification(F,arguments)},spin:function(){return this._applyModification(G,arguments)},_applyCombination:function(le,ve){return le.apply(null,[this].concat([].slice.call(ve)))},analogous:function(){return this._applyCombination(z,arguments)},complement:function(){return this._applyCombination(K,arguments)},monochromatic:function(){return this._applyCombination(H,arguments)},splitcomplement:function(){return this._applyCombination(X,arguments)},triad:function(){return this._applyCombination(se,arguments)},tetrad:function(){return this._applyCombination(ee,arguments)}},v.fromRatio=function(le,ve){if(typeof le=="object"){var ge={};for(var Ie in le)le.hasOwnProperty(Ie)&&(Ie==="a"?ge[Ie]=le[Ie]:ge[Ie]=Ze(le[Ie]));le=ge}return v(le,ve)};function T(le){var ve={r:0,g:0,b:0},ge=1,Ie=null,Be=null,ye=null,$e=!1,Pe=!1;return typeof le=="string"&&(le=Z(le)),typeof le=="object"&&(Mt(le.r)&&Mt(le.g)&&Mt(le.b)?(ve=_(le.r,le.g,le.b),$e=!0,Pe=String(le.r).substr(-1)==="%"?"prgb":"rgb"):Mt(le.h)&&Mt(le.s)&&Mt(le.v)?(Ie=Ze(le.s),Be=Ze(le.v),ve=x(le.h,Ie,Be),$e=!0,Pe="hsv"):Mt(le.h)&&Mt(le.s)&&Mt(le.l)&&(Ie=Ze(le.s),ye=Ze(le.l),ve=R(le.h,Ie,ye),$e=!0,Pe="hsl"),le.hasOwnProperty("a")&&(ge=le.a)),ge=Te(ge),{ok:$e,format:le.format||Pe,r:f(255,b(ve.r,0)),g:f(255,b(ve.g,0)),b:f(255,b(ve.b,0)),a:ge}}function _(le,ve,ge){return{r:ce(le,255)*255,g:ce(ve,255)*255,b:ce(ge,255)*255}}function N(le,ve,ge){le=ce(le,255),ve=ce(ve,255),ge=ce(ge,255);var Ie=b(le,ve,ge),Be=f(le,ve,ge),ye,$e,Pe=(Ie+Be)/2;if(Ie==Be)ye=$e=0;else{var pe=Ie-Be;switch($e=Pe>.5?pe/(2-Ie-Be):pe/(Ie+Be),Ie){case le:ye=(ve-ge)/pe+(ve<ge?6:0);break;case ve:ye=(ge-le)/pe+2;break;case ge:ye=(le-ve)/pe+4;break}ye/=6}return{h:ye,s:$e,l:Pe}}function R(le,ve,ge){var Ie,Be,ye;le=ce(le,360),ve=ce(ve,100),ge=ce(ge,100);function $e(Oe,ke,Q){return Q<0&&(Q+=1),Q>1&&(Q-=1),Q<.16666666666666666?Oe+(ke-Oe)*6*Q:Q<.5?ke:Q<.6666666666666666?Oe+(ke-Oe)*(.6666666666666666-Q)*6:Oe}if(ve===0)Ie=Be=ye=ge;else{var Pe=ge<.5?ge*(1+ve):ge+ve-ge*ve,pe=2*ge-Pe;Ie=$e(pe,Pe,le+.3333333333333333),Be=$e(pe,Pe,le),ye=$e(pe,Pe,le-.3333333333333333)}return{r:Ie*255,g:Be*255,b:ye*255}}function O(le,ve,ge){le=ce(le,255),ve=ce(ve,255),ge=ce(ge,255);var Ie=b(le,ve,ge),Be=f(le,ve,ge),ye,$e,Pe=Ie,pe=Ie-Be;if($e=Ie===0?0:pe/Ie,Ie==Be)ye=0;else{switch(Ie){case le:ye=(ve-ge)/pe+(ve<ge?6:0);break;case ve:ye=(ge-le)/pe+2;break;case ge:ye=(le-ve)/pe+4;break}ye/=6}return{h:ye,s:$e,v:Pe}}function x(le,ve,ge){le=ce(le,360)*6,ve=ce(ve,100),ge=ce(ge,100);var Ie=c.floor(le),Be=le-Ie,ye=ge*(1-ve),$e=ge*(1-Be*ve),Pe=ge*(1-(1-Be)*ve),pe=Ie%6,Oe=[ge,$e,ye,ye,Pe,ge][pe],ke=[Pe,ge,ge,$e,ye,ye][pe],Q=[ye,ye,Pe,ge,ge,$e][pe];return{r:Oe*255,g:ke*255,b:Q*255}}function w(le,ve,ge,Ie){var Be=[je(g(le).toString(16)),je(g(ve).toString(16)),je(g(ge).toString(16))];return Ie&&Be[0].charAt(0)==Be[0].charAt(1)&&Be[1].charAt(0)==Be[1].charAt(1)&&Be[2].charAt(0)==Be[2].charAt(1)?Be[0].charAt(0)+Be[1].charAt(0)+Be[2].charAt(0):Be.join("")}function D(le,ve,ge,Ie,Be){var ye=[je(g(le).toString(16)),je(g(ve).toString(16)),je(g(ge).toString(16)),je(nt(Ie))];return Be&&ye[0].charAt(0)==ye[0].charAt(1)&&ye[1].charAt(0)==ye[1].charAt(1)&&ye[2].charAt(0)==ye[2].charAt(1)&&ye[3].charAt(0)==ye[3].charAt(1)?ye[0].charAt(0)+ye[1].charAt(0)+ye[2].charAt(0)+ye[3].charAt(0):ye.join("")}function M(le,ve,ge,Ie){var Be=[je(nt(Ie)),je(g(le).toString(16)),je(g(ve).toString(16)),je(g(ge).toString(16))];return Be.join("")}v.equals=function(le,ve){return!le||!ve?!1:v(le).toRgbString()==v(ve).toRgbString()},v.random=function(){return v.fromRatio({r:A(),g:A(),b:A()})};function P(le,ve){ve=ve===0?0:ve||10;var ge=v(le).toHsl();return ge.s-=ve/100,ge.s=Ne(ge.s),v(ge)}function U(le,ve){ve=ve===0?0:ve||10;var ge=v(le).toHsl();return ge.s+=ve/100,ge.s=Ne(ge.s),v(ge)}function F(le){return v(le).desaturate(100)}function k(le,ve){ve=ve===0?0:ve||10;var ge=v(le).toHsl();return ge.l+=ve/100,ge.l=Ne(ge.l),v(ge)}function B(le,ve){ve=ve===0?0:ve||10;var ge=v(le).toRgb();return ge.r=b(0,f(255,ge.r-g(255*-(ve/100)))),ge.g=b(0,f(255,ge.g-g(255*-(ve/100)))),ge.b=b(0,f(255,ge.b-g(255*-(ve/100)))),v(ge)}function V(le,ve){ve=ve===0?0:ve||10;var ge=v(le).toHsl();return ge.l-=ve/100,ge.l=Ne(ge.l),v(ge)}function G(le,ve){var ge=v(le).toHsl(),Ie=(ge.h+ve)%360;return ge.h=Ie<0?360+Ie:Ie,v(ge)}function K(le){var ve=v(le).toHsl();return ve.h=(ve.h+180)%360,v(ve)}function se(le){var ve=v(le).toHsl(),ge=ve.h;return[v(le),v({h:(ge+120)%360,s:ve.s,l:ve.l}),v({h:(ge+240)%360,s:ve.s,l:ve.l})]}function ee(le){var ve=v(le).toHsl(),ge=ve.h;return[v(le),v({h:(ge+90)%360,s:ve.s,l:ve.l}),v({h:(ge+180)%360,s:ve.s,l:ve.l}),v({h:(ge+270)%360,s:ve.s,l:ve.l})]}function X(le){var ve=v(le).toHsl(),ge=ve.h;return[v(le),v({h:(ge+72)%360,s:ve.s,l:ve.l}),v({h:(ge+216)%360,s:ve.s,l:ve.l})]}function z(le,ve,ge){ve=ve||6,ge=ge||30;var Ie=v(le).toHsl(),Be=360/ge,ye=[v(le)];for(Ie.h=(Ie.h-(Be*ve>>1)+720)%360;--ve;)Ie.h=(Ie.h+Be)%360,ye.push(v(Ie));return ye}function H(le,ve){ve=ve||6;for(var ge=v(le).toHsv(),Ie=ge.h,Be=ge.s,ye=ge.v,$e=[],Pe=1/ve;ve--;)$e.push(v({h:Ie,s:Be,v:ye})),ye=(ye+Pe)%1;return $e}v.mix=function(le,ve,ge){ge=ge===0?0:ge||50;var Ie=v(le).toRgb(),Be=v(ve).toRgb(),ye=ge/100,$e={r:(Be.r-Ie.r)*ye+Ie.r,g:(Be.g-Ie.g)*ye+Ie.g,b:(Be.b-Ie.b)*ye+Ie.b,a:(Be.a-Ie.a)*ye+Ie.a};return v($e)},v.readability=function(le,ve){var ge=v(le),Ie=v(ve);return(c.max(ge.getLuminance(),Ie.getLuminance())+.05)/(c.min(ge.getLuminance(),Ie.getLuminance())+.05)},v.isReadable=function(le,ve,ge){var Ie=v.readability(le,ve),Be,ye;switch(ye=!1,Be=ie(ge),Be.level+Be.size){case"AAsmall":case"AAAlarge":ye=Ie>=4.5;break;case"AAlarge":ye=Ie>=3;break;case"AAAsmall":ye=Ie>=7;break}return ye},v.mostReadable=function(le,ve,ge){var Ie=null,Be=0,ye,$e,Pe,pe;ge=ge||{},$e=ge.includeFallbackColors,Pe=ge.level,pe=ge.size;for(var Oe=0;Oe<ve.length;Oe++)ye=v.readability(le,ve[Oe]),ye>Be&&(Be=ye,Ie=v(ve[Oe]));return v.isReadable(le,Ie,{level:Pe,size:pe})||!$e?Ie:(ge.includeFallbackColors=!1,v.mostReadable(le,["#fff","#000"],ge))};var q=v.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},J=v.hexNames=de(q);function de(le){var ve={};for(var ge in le)le.hasOwnProperty(ge)&&(ve[le[ge]]=ge);return ve}function Te(le){return le=parseFloat(le),(isNaN(le)||le<0||le>1)&&(le=1),le}function ce(le,ve){Fe(le)&&(le="100%");var ge=Ge(le);return le=f(ve,b(0,parseFloat(le))),ge&&(le=parseInt(le*ve,10)/100),c.abs(le-ve)<1e-6?1:le%ve/parseFloat(ve)}function Ne(le){return f(1,b(0,le))}function Me(le){return parseInt(le,16)}function Fe(le){return typeof le=="string"&&le.indexOf(".")!=-1&&parseFloat(le)===1}function Ge(le){return typeof le=="string"&&le.indexOf("%")!=-1}function je(le){return le.length==1?"0"+le:""+le}function Ze(le){return le<=1&&(le=le*100+"%"),le}function nt(le){return c.round(parseFloat(le)*255).toString(16)}function st(le){return Me(le)/255}var At=function(){var le="[-\\+]?\\d+%?",ve="[-\\+]?\\d*\\.\\d+%?",ge="(?:"+ve+")|(?:"+le+")",Ie="[\\s|\\(]+("+ge+")[,|\\s]+("+ge+")[,|\\s]+("+ge+")\\s*\\)?",Be="[\\s|\\(]+("+ge+")[,|\\s]+("+ge+")[,|\\s]+("+ge+")[,|\\s]+("+ge+")\\s*\\)?";return{CSS_UNIT:new RegExp(ge),rgb:new RegExp("rgb"+Ie),rgba:new RegExp("rgba"+Be),hsl:new RegExp("hsl"+Ie),hsla:new RegExp("hsla"+Be),hsv:new RegExp("hsv"+Ie),hsva:new RegExp("hsva"+Be),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Mt(le){return!!At.CSS_UNIT.exec(le)}function Z(le){le=le.replace(u,"").replace(d,"").toLowerCase();var ve=!1;if(q[le])le=q[le],ve=!0;else if(le=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ge;return(ge=At.rgb.exec(le))?{r:ge[1],g:ge[2],b:ge[3]}:(ge=At.rgba.exec(le))?{r:ge[1],g:ge[2],b:ge[3],a:ge[4]}:(ge=At.hsl.exec(le))?{h:ge[1],s:ge[2],l:ge[3]}:(ge=At.hsla.exec(le))?{h:ge[1],s:ge[2],l:ge[3],a:ge[4]}:(ge=At.hsv.exec(le))?{h:ge[1],s:ge[2],v:ge[3]}:(ge=At.hsva.exec(le))?{h:ge[1],s:ge[2],v:ge[3],a:ge[4]}:(ge=At.hex8.exec(le))?{r:Me(ge[1]),g:Me(ge[2]),b:Me(ge[3]),a:st(ge[4]),format:ve?"name":"hex8"}:(ge=At.hex6.exec(le))?{r:Me(ge[1]),g:Me(ge[2]),b:Me(ge[3]),format:ve?"name":"hex"}:(ge=At.hex4.exec(le))?{r:Me(ge[1]+""+ge[1]),g:Me(ge[2]+""+ge[2]),b:Me(ge[3]+""+ge[3]),a:st(ge[4]+""+ge[4]),format:ve?"name":"hex8"}:(ge=At.hex3.exec(le))?{r:Me(ge[1]+""+ge[1]),g:Me(ge[2]+""+ge[2]),b:Me(ge[3]+""+ge[3]),format:ve?"name":"hex"}:!1}function ie(le){var ve,ge;return le=le||{level:"AA",size:"small"},ve=(le.level||"AA").toUpperCase(),ge=(le.size||"small").toLowerCase(),ve!=="AA"&&ve!=="AAA"&&(ve="AA"),ge!=="small"&&ge!=="large"&&(ge="small"),{level:ve,size:ge}}o.exports?o.exports=v:(r=(function(){return v}).call(i,l,i,o),r!==void 0&&(o.exports=r))})(Math)},89:function(o,i){i.Z=(l,r)=>{const c=l.__vccOpts||l;for(const[u,d]of r)c[u]=d;return c}},3647:function(o,i,l){var r=l(6095);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var c=l(7037).Z;c("29397b9c",r,!0,{sourceMap:!1,shadowMode:!1})},325:function(o,i,l){var r=l(6047);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var c=l(7037).Z;c("479d8be0",r,!0,{sourceMap:!1,shadowMode:!1})},5208:function(o,i,l){var r=l(9481);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var c=l(7037).Z;c("1e383f72",r,!0,{sourceMap:!1,shadowMode:!1})},1425:function(o,i,l){var r=l(5186);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var c=l(7037).Z;c("3855edf0",r,!0,{sourceMap:!1,shadowMode:!1})},1902:function(o,i,l){var r=l(3695);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var c=l(7037).Z;c("2f73e1a8",r,!0,{sourceMap:!1,shadowMode:!1})},5815:function(o,i,l){var r=l(7279);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var c=l(7037).Z;c("36c086c2",r,!0,{sourceMap:!1,shadowMode:!1})},8016:function(o,i,l){var r=l(6278);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var c=l(7037).Z;c("8bcdd408",r,!0,{sourceMap:!1,shadowMode:!1})},193:function(o,i,l){var r=l(3468);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var c=l(7037).Z;c("17a63672",r,!0,{sourceMap:!1,shadowMode:!1})},1113:function(o,i,l){var r=l(5689);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var c=l(7037).Z;c("39c50172",r,!0,{sourceMap:!1,shadowMode:!1})},6320:function(o,i,l){var r=l(2410);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var c=l(7037).Z;c("5c6f2742",r,!0,{sourceMap:!1,shadowMode:!1})},3205:function(o,i,l){var r=l(3142);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var c=l(7037).Z;c("90803b82",r,!0,{sourceMap:!1,shadowMode:!1})},1979:function(o,i,l){var r=l(7953);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var c=l(7037).Z;c("418ed5a2",r,!0,{sourceMap:!1,shadowMode:!1})},6547:function(o,i,l){var r=l(3097);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var c=l(7037).Z;c("1f7c089b",r,!0,{sourceMap:!1,shadowMode:!1})},5233:function(o,i,l){var r=l(4339);r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[o.id,r,""]]),r.locals&&(o.exports=r.locals);var c=l(7037).Z;c("491ed8fe",r,!0,{sourceMap:!1,shadowMode:!1})},7037:function(o,i,l){l.d(i,{Z:function(){return _}});function r(M,P){for(var U=[],F={},k=0;k<P.length;k++){var B=P[k],V=B[0],G=B[1],K=B[2],se=B[3],ee={id:M+":"+k,css:G,media:K,sourceMap:se};F[V]?F[V].parts.push(ee):U.push(F[V]={id:V,parts:[ee]})}return U}var c=typeof document<"u";if(typeof DEBUG<"u"&&DEBUG&&!c)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var u={},d=c&&(document.head||document.getElementsByTagName("head")[0]),h=null,g=0,f=!1,b=function(){},A=null,v="data-vue-ssr-id",T=typeof navigator<"u"&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function _(M,P,U,F){f=U,A=F||{};var k=r(M,P);return N(k),function(V){for(var G=[],K=0;K<k.length;K++){var se=k[K],ee=u[se.id];ee.refs--,G.push(ee)}V?(k=r(M,V),N(k)):k=[];for(var K=0;K<G.length;K++){var ee=G[K];if(ee.refs===0){for(var X=0;X<ee.parts.length;X++)ee.parts[X]();delete u[ee.id]}}}}function N(M){for(var P=0;P<M.length;P++){var U=M[P],F=u[U.id];if(F){F.refs++;for(var k=0;k<F.parts.length;k++)F.parts[k](U.parts[k]);for(;k<U.parts.length;k++)F.parts.push(O(U.parts[k]));F.parts.length>U.parts.length&&(F.parts.length=U.parts.length)}else{for(var B=[],k=0;k<U.parts.length;k++)B.push(O(U.parts[k]));u[U.id]={id:U.id,refs:1,parts:B}}}}function R(){var M=document.createElement("style");return M.type="text/css",d.appendChild(M),M}function O(M){var P,U,F=document.querySelector("style["+v+'~="'+M.id+'"]');if(F){if(f)return b;F.parentNode.removeChild(F)}if(T){var k=g++;F=h||(h=R()),P=w.bind(null,F,k,!1),U=w.bind(null,F,k,!0)}else F=R(),P=D.bind(null,F),U=function(){F.parentNode.removeChild(F)};return P(M),function(V){if(V){if(V.css===M.css&&V.media===M.media&&V.sourceMap===M.sourceMap)return;P(M=V)}else U()}}var x=function(){var M=[];return function(P,U){return M[P]=U,M.filter(Boolean).join(`
`)}}();function w(M,P,U,F){var k=U?"":F.css;if(M.styleSheet)M.styleSheet.cssText=x(P,k);else{var B=document.createTextNode(k),V=M.childNodes;V[P]&&M.removeChild(V[P]),V.length?M.insertBefore(B,V[P]):M.appendChild(B)}}function D(M,P){var U=P.css,F=P.media,k=P.sourceMap;if(F&&M.setAttribute("media",F),A.ssrId&&M.setAttribute(v,P.id),k&&(U+=`
/*# sourceURL=`+k.sources[0]+" */",U+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(k))))+" */"),M.styleSheet)M.styleSheet.cssText=U;else{for(;M.firstChild;)M.removeChild(M.firstChild);M.appendChild(document.createTextNode(U))}}}},n={};function s(o){var i=n[o];if(i!==void 0)return i.exports;var l=n[o]={id:o,exports:{}};return t[o](l,l.exports,s),l.exports}(function(){s.n=function(o){var i=o&&o.__esModule?function(){return o.default}:function(){return o};return s.d(i,{a:i}),i}})(),function(){s.d=function(o,i){for(var l in i)s.o(i,l)&&!s.o(o,l)&&Object.defineProperty(o,l,{enumerable:!0,get:i[l]})}}(),function(){s.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){s.o=function(o,i){return Object.prototype.hasOwnProperty.call(o,i)}}(),function(){s.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}}(),function(){s.p=""}();var a={};(function(){if(s.r(a),s.d(a,{Alpha:function(){return bu},Checkboard:function(){return Hr},Chrome:function(){return vv},ColorMixin:function(){return v},Compact:function(){return O},EditableInput:function(){return Ne},Grayscale:function(){return B},Hue:function(){return Ie},Material:function(){return Ge},Photoshop:function(){return gv},Saturation:function(){return _o},Sketch:function(){return _v},Slider:function(){return Pe},Swatches:function(){return Ds},Twitter:function(){return Ev},default:function(){return _N},version:function(){return bv}}),typeof window<"u"){var o=window.document.currentScript,i=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(s.p=i[1])}var l={i8:"3.0.6"},r=IS;const c={role:"application","aria-label":"Compact color picker",class:"vc-compact"},u={class:"vc-compact-colors",role:"listbox"},d=["aria-label","aria-selected","onClick"],h={class:"vc-compact-dot"};function g(fe,qe,ut,$t,Bt,Ke){return(0,r.openBlock)(),(0,r.createElementBlock)("div",c,[(0,r.createElementVNode)("ul",u,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(fe.paletteUpperCase(ut.palette),xt=>((0,r.openBlock)(),(0,r.createElementBlock)("li",{role:"option","aria-label":"color:"+xt,"aria-selected":xt===Ke.pick,class:(0,r.normalizeClass)(["vc-compact-color-item",{"vc-compact-color-item--white":xt==="#FFFFFF"}]),key:xt,style:(0,r.normalizeStyle)({background:xt}),onClick:Yt=>Ke.handlerClick(xt)},[(0,r.withDirectives)((0,r.createElementVNode)("div",h,null,512),[[r.vShow,xt===Ke.pick]])],14,d))),128))])])}var f=s(7013),b=s.n(f);function A(fe={},qe=0){const ut=fe&&fe.a;let $t;fe&&fe.hsl?$t=b()(fe.hsl):fe&&fe.hex&&fe.hex.length>0?$t=b()(fe.hex):fe&&fe.hsv?$t=b()(fe.hsv):fe&&fe.rgba?$t=b()(fe.rgba):fe&&fe.rgb?$t=b()(fe.rgb):$t=b()(fe),$t&&($t._a===void 0||$t._a===null)&&$t.setAlpha(ut||1);const Bt=$t.toHsl(),Ke=$t.toHsv();return Bt.s===0&&(Ke.h=Bt.h=fe.h||fe.hsl&&fe.hsl.h||qe||0),{hsl:Bt,hex:$t.toHexString().toUpperCase(),hex8:$t.toHex8String().toUpperCase(),rgba:$t.toRgb(),hsv:Ke,oldHue:fe.h||qe||Bt.h,source:fe.source,a:fe.a||$t.getAlpha()}}var v={props:["modelValue"],data(){return{val:A(this.modelValue)}},computed:{colors:{get(){return this.val},set(fe){this.val=fe,this.$emit("update:modelValue",fe)}}},watch:{modelValue(fe){this.val=A(fe)}},methods:{colorChange(fe,qe){this.oldHue=this.colors.hsl.h,this.colors=A(fe,qe||this.oldHue)},isValidHex(fe){return b()(fe).isValid()},simpleCheckForValidColor(fe){const qe=["r","g","b","a","h","s","l","v"];let ut=0,$t=0;for(let Bt=0;Bt<qe.length;Bt++){const Ke=qe[Bt];fe[Ke]&&(ut++,isNaN(fe[Ke])||$t++)}if(ut===$t)return fe},paletteUpperCase(fe){return fe.map(qe=>qe.toUpperCase())},isTransparent(fe){return b()(fe).getAlpha()===0}}};const T=["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#CCCCCC","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"];var _={name:"Compact",mixins:[v],props:{palette:{type:Array,default(){return T}}},components:{},computed:{pick(){return this.colors.hex.toUpperCase()}},methods:{handlerClick(fe){this.colorChange({hex:fe,source:"hex"})}}};s(325);var N=s(89),O=(0,N.Z)(_,[["render",g]]);const x={role:"application","aria-label":"Grayscale color picker",class:"vc-grayscale"},w={class:"vc-grayscale-colors",role:"listbox"},D=["aria-label","aria-selected","onClick"],M={class:"vc-grayscale-dot"};function P(fe,qe,ut,$t,Bt,Ke){return(0,r.openBlock)(),(0,r.createElementBlock)("div",x,[(0,r.createElementVNode)("ul",w,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(fe.paletteUpperCase(ut.palette),xt=>((0,r.openBlock)(),(0,r.createElementBlock)("li",{role:"option","aria-label":"Color:"+xt,"aria-selected":xt===Ke.pick,key:xt,class:(0,r.normalizeClass)(["vc-grayscale-color-item",{"vc-grayscale-color-item--white":xt=="#FFFFFF"}]),style:(0,r.normalizeStyle)({background:xt}),onClick:Yt=>Ke.handlerClick(xt)},[(0,r.withDirectives)((0,r.createElementVNode)("div",M,null,512),[[r.vShow,xt===Ke.pick]])],14,D))),128))])])}const U=["#FFFFFF","#F2F2F2","#E6E6E6","#D9D9D9","#CCCCCC","#BFBFBF","#B3B3B3","#A6A6A6","#999999","#8C8C8C","#808080","#737373","#666666","#595959","#4D4D4D","#404040","#333333","#262626","#0D0D0D","#000000"];var F={name:"Grayscale",mixins:[v],props:{palette:{type:Array,default(){return U}}},components:{},computed:{pick(){return this.colors.hex.toUpperCase()}},methods:{handlerClick(fe){this.colorChange({hex:fe,source:"hex"})}}};s(5208);var B=(0,N.Z)(F,[["render",P]]);const V={role:"application","aria-label":"Material color picker",class:"vc-material"},G={class:"vc-material-split"},K={class:"vc-material-third"},se={class:"vc-material-third"},ee={class:"vc-material-third"};function X(fe,qe,ut,$t,Bt,Ke){const xt=(0,r.resolveComponent)("ed-in");return(0,r.openBlock)(),(0,r.createElementBlock)("div",V,[(0,r.createVNode)(xt,{class:"vc-material-hex",label:"hex",modelValue:fe.colors.hex,"onUpdate:modelValue":qe[0]||(qe[0]=Yt=>fe.colors.hex=Yt),style:(0,r.normalizeStyle)({borderColor:fe.colors.hex}),onChange:Ke.onChange},null,8,["modelValue","style","onChange"]),(0,r.createElementVNode)("div",G,[(0,r.createElementVNode)("div",K,[(0,r.createVNode)(xt,{label:"r",modelValue:fe.colors.rgba.r,"onUpdate:modelValue":qe[1]||(qe[1]=Yt=>fe.colors.rgba.r=Yt),onChange:Ke.onChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",se,[(0,r.createVNode)(xt,{label:"g",modelValue:fe.colors.rgba.g,"onUpdate:modelValue":qe[2]||(qe[2]=Yt=>fe.colors.rgba.g=Yt),onChange:Ke.onChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",ee,[(0,r.createVNode)(xt,{label:"b",modelValue:fe.colors.rgba.b,"onUpdate:modelValue":qe[3]||(qe[3]=Yt=>fe.colors.rgba.b=Yt),onChange:Ke.onChange},null,8,["modelValue","onChange"])])])])}const z={class:"vc-editable-input"},H=["aria-labelledby"],q=["for","id"],J={class:"vc-input__desc"};function de(fe,qe,ut,$t,Bt,Ke){return(0,r.openBlock)(),(0,r.createElementBlock)("div",z,[(0,r.withDirectives)((0,r.createElementVNode)("input",{"aria-labelledby":Ke.labelId,class:"vc-input__input","onUpdate:modelValue":qe[0]||(qe[0]=xt=>Ke.val=xt),onKeydown:qe[1]||(qe[1]=(...xt)=>Ke.handleKeyDown&&Ke.handleKeyDown(...xt)),onInput:qe[2]||(qe[2]=(...xt)=>Ke.update&&Ke.update(...xt)),ref:"input"},null,40,H),[[r.vModelText,Ke.val]]),(0,r.createElementVNode)("span",{for:ut.label,class:"vc-input__label",id:Ke.labelId},(0,r.toDisplayString)(Ke.labelSpanText),9,q),(0,r.createElementVNode)("span",J,(0,r.toDisplayString)(ut.desc),1)])}var Te={name:"editableInput",props:{label:String,labelText:String,desc:String,modelValue:[String,Number],max:Number,min:Number,arrowOffset:{type:Number,default:1}},computed:{val:{get(){return this.modelValue},set(fe){if(this.max!==void 0&&+fe>this.max)this.$refs.input.value=this.max;else return fe}},labelId(){return`input__label__${this.label}__${Math.random().toString().slice(2,5)}`},labelSpanText(){return this.labelText||this.label}},methods:{update(fe){this.handleChange(fe.target.value)},handleChange(fe){const qe={};qe[this.label]=fe,qe.hex===void 0&&qe["#"]===void 0?this.$emit("change",qe):fe.length>5&&this.$emit("change",qe)},handleKeyDown(fe){let qe=this.val;const ut=Number(qe);if(ut){const $t=this.arrowOffset||1;fe.keyCode===38&&(qe=ut+$t,this.handleChange(qe),fe.preventDefault()),fe.keyCode===40&&(qe=ut-$t,this.handleChange(qe),fe.preventDefault())}}}};s(1979);var Ne=(0,N.Z)(Te,[["render",de]]),Me={name:"Material",mixins:[v],components:{"ed-in":Ne},methods:{onChange(fe){fe&&(fe.hex?this.isValidHex(fe.hex)&&this.colorChange({hex:fe.hex,source:"hex"}):(fe.r||fe.g||fe.b)&&this.colorChange({r:fe.r||this.colors.rgba.r,g:fe.g||this.colors.rgba.g,b:fe.b||this.colors.rgba.b,a:fe.a||this.colors.rgba.a,source:"rgba"}))}}};s(1425);var Ge=(0,N.Z)(Me,[["render",X]]);const je={role:"application","aria-label":"Slider color picker",class:"vc-slider"},Ze={class:"vc-slider-hue-warp"},nt={class:"vc-slider-swatches",role:"group"},st=["data-index","aria-label","onClick"];function At(fe,qe,ut,$t,Bt,Ke){const xt=(0,r.resolveComponent)("hue");return(0,r.openBlock)(),(0,r.createElementBlock)("div",je,[(0,r.createElementVNode)("div",Ze,[(0,r.createVNode)(xt,{modelValue:fe.colors,"onUpdate:modelValue":qe[0]||(qe[0]=Yt=>fe.colors=Yt),onChange:Ke.hueChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",nt,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(Ke.normalizedSwatches,(Yt,Sn)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"vc-slider-swatch",key:Sn,"data-index":Sn,"aria-label":"color:"+fe.colors.hex,role:"button",onClick:Fn=>Ke.handleSwClick(Sn,Yt)},[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["vc-slider-swatch-picker",{"vc-slider-swatch-picker--active":Ke.isActive(Yt,Sn),"vc-slider-swatch-picker--white":Yt.l===1}]),style:(0,r.normalizeStyle)({background:"hsl("+fe.colors.hsl.h+", "+Yt.s*100+"%, "+Yt.l*100+"%)"})},null,6)],8,st))),128))])])}const Mt=["aria-valuenow"],ie=[(0,r.createElementVNode)("div",{class:"vc-hue-picker"},null,-1)];function le(fe,qe,ut,$t,Bt,Ke){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:(0,r.normalizeClass)(["vc-hue",Ke.directionClass])},[(0,r.createElementVNode)("div",{class:"vc-hue-container",role:"slider","aria-valuenow":Ke.colors.hsl.h,"aria-valuemin":"0","aria-valuemax":"360",ref:"container",onMousedown:qe[0]||(qe[0]=(...xt)=>Ke.handleMouseDown&&Ke.handleMouseDown(...xt)),onTouchmove:qe[1]||(qe[1]=(...xt)=>Ke.handleChange&&Ke.handleChange(...xt)),onTouchstart:qe[2]||(qe[2]=(...xt)=>Ke.handleChange&&Ke.handleChange(...xt))},[(0,r.createElementVNode)("div",{class:"vc-hue-pointer",style:(0,r.normalizeStyle)({top:Ke.pointerTop,left:Ke.pointerLeft}),role:"presentation"},ie,4)],40,Mt)],2)}var ve={name:"Hue",props:{modelValue:Object,direction:{type:String,default:"horizontal"}},data(){return{oldHue:0,pullDirection:""}},computed:{colors(){const fe=this.modelValue.hsl.h;return fe!==0&&fe-this.oldHue>0&&(this.pullDirection="right"),fe!==0&&fe-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=fe,this.modelValue},directionClass(){return{"vc-hue--horizontal":this.direction==="horizontal","vc-hue--vertical":this.direction==="vertical"}},pointerTop(){return this.direction==="vertical"?this.colors.hsl.h===0&&this.pullDirection==="right"?0:-(this.colors.hsl.h*100/360)+100+"%":0},pointerLeft(){return this.direction==="vertical"?0:this.colors.hsl.h===0&&this.pullDirection==="right"?"100%":this.colors.hsl.h*100/360+"%"}},methods:{handleChange(fe,qe){!qe&&fe.preventDefault();const ut=this.$refs.container;if(!ut)return;const $t=ut.clientWidth,Bt=ut.clientHeight,Ke=ut.getBoundingClientRect().left+window.pageXOffset,xt=ut.getBoundingClientRect().top+window.pageYOffset,Yt=fe.pageX||(fe.touches?fe.touches[0].pageX:0),Sn=fe.pageY||(fe.touches?fe.touches[0].pageY:0),Fn=Yt-Ke,es=Sn-xt;let sn,ui;this.direction==="vertical"?(es<0?sn=360:es>Bt?sn=0:(ui=-(es*100/Bt)+100,sn=360*ui/100),this.colors.hsl.h!==sn&&this.$emit("change",{h:sn,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})):(Fn<0?sn=0:Fn>$t?sn=360:(ui=Fn*100/$t,sn=360*ui/100),this.colors.hsl.h!==sn&&this.$emit("change",{h:sn,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"}))},handleMouseDown(fe){this.handleChange(fe,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(fe){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};s(6547);var Ie=(0,N.Z)(ve,[["render",le]]);const Be=.5;var ye={name:"Slider",mixins:[v],props:{swatches:{type:Array,default(){return[{s:Be,l:.8},{s:Be,l:.65},{s:Be,l:.5},{s:Be,l:.35},{s:Be,l:.2}]}}},components:{hue:Ie},computed:{normalizedSwatches(){return this.swatches.map(qe=>typeof qe!="object"?{s:Be,l:qe}:qe)}},methods:{isActive(fe,qe){const ut=this.colors.hsl;return ut.l===1&&fe.l===1||ut.l===0&&fe.l===0?!0:Math.abs(ut.l-fe.l)<.01&&Math.abs(ut.s-fe.s)<.01},hueChange(fe){this.colorChange(fe)},handleSwClick(fe,qe){this.colorChange({h:this.colors.hsl.h,s:qe.s,l:qe.l,source:"hsl"})}}};s(8016);var Pe=(0,N.Z)(ye,[["render",At]]);const pe=["data-pick"],Oe={class:"vc-swatches-box",role:"listbox"},ke=["aria-label","aria-selected","data-color","onClick"],Q={class:"vc-swatches-pick"},me=[(0,r.createElementVNode)("svg",{style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},[(0,r.createElementVNode)("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"})],-1)];function Ee(fe,qe,ut,$t,Bt,Ke){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{role:"application","aria-label":"Swatches color picker",class:"vc-swatches","data-pick":Ke.pick},[(0,r.createElementVNode)("div",Oe,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(ut.palette,(xt,Yt)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"vc-swatches-color-group",key:Yt},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(xt,Sn=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:(0,r.normalizeClass)(["vc-swatches-color-it",{"vc-swatches-color--white":Sn==="#FFFFFF"}]),role:"option","aria-label":"Color:"+Sn,"aria-selected":Ke.equal(Sn),key:Sn,"data-color":Sn,style:(0,r.normalizeStyle)({background:Sn}),onClick:Fn=>Ke.handlerClick(Sn)},[(0,r.withDirectives)((0,r.createElementVNode)("div",Q,me,512),[[r.vShow,Ke.equal(Sn)]])],14,ke))),128))]))),128))])],8,pe)}var we={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},he={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},Se={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},Re={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},Ce={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},Ue={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},Le={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},He={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},ct={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},Ct={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},Je={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},Nt={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},ze={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},_t={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},Gt={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},et={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},Et={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},tt={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},Ot={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},In={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},pt={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},Lt={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},Pt={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},xn="#ffffff",xs="#000000",Un={red:we,pink:he,purple:Se,deepPurple:Re,indigo:Ce,blue:Ue,lightBlue:Le,cyan:He,teal:ct,green:Ct,lightGreen:Je,lime:Nt,yellow:ze,amber:_t,orange:Gt,deepOrange:et,brown:Et,grey:tt,blueGrey:Ot,darkText:In,lightText:pt,darkIcons:Lt,lightIcons:Pt,white:xn,black:xs};const Mn=["red","pink","purple","deepPurple","indigo","blue","lightBlue","cyan","teal","green","lightGreen","lime","yellow","amber","orange","deepOrange","brown","blueGrey","black"],bs=["900","700","500","300","100"],ws=(()=>{const fe=[];return Mn.forEach(qe=>{let ut=[];qe.toLowerCase()==="black"||qe.toLowerCase()==="white"?ut=ut.concat(["#000000","#FFFFFF"]):bs.forEach($t=>{const Bt=Un[qe][$t];ut.push(Bt.toUpperCase())}),fe.push(ut)}),fe})();var As={name:"Swatches",mixins:[v],props:{palette:{type:Array,default(){return ws}}},computed:{pick(){return this.colors.hex}},methods:{equal(fe){return fe.toLowerCase()===this.colors.hex.toLowerCase()},handlerClick(fe){this.colorChange({hex:fe,source:"hex"})}}};s(193);var Ds=(0,N.Z)(As,[["render",Ee]]);const fs={role:"heading",class:"vc-ps-head"},ca={class:"vc-ps-body"},go={class:"vc-ps-saturation-wrap"},Po={class:"vc-ps-hue-wrap"},Nl=(0,r.createElementVNode)("div",{class:"vc-ps-hue-pointer"},[(0,r.createElementVNode)("i",{class:"vc-ps-hue-pointer--left"}),(0,r.createElementVNode)("i",{class:"vc-ps-hue-pointer--right"})],-1),Ol={class:"vc-ps-previews"},ci={class:"vc-ps-previews__label"},En={class:"vc-ps-previews__swatches"},Rl=["aria-label"],xl=["aria-label"],at={class:"vc-ps-previews__label"},It={key:0,class:"vc-ps-actions"},nn=["aria-label"],gs=["aria-label"],ja={class:"vc-ps-fields"},Dn=(0,r.createElementVNode)("div",{class:"vc-ps-fields__divider"},null,-1),$a=(0,r.createElementVNode)("div",{class:"vc-ps-fields__divider"},null,-1);function Vi(fe,qe,ut,$t,Bt,Ke){const xt=(0,r.resolveComponent)("saturation"),Yt=(0,r.resolveComponent)("hue"),Sn=(0,r.resolveComponent)("ed-in");return(0,r.openBlock)(),(0,r.createElementBlock)("div",{role:"application","aria-label":"PhotoShop color picker",class:(0,r.normalizeClass)(["vc-photoshop",ut.disableFields?"vc-photoshop__disable-fields":""])},[(0,r.createElementVNode)("div",fs,(0,r.toDisplayString)(ut.head),1),(0,r.createElementVNode)("div",ca,[(0,r.createElementVNode)("div",go,[(0,r.createVNode)(xt,{modelValue:fe.colors,"onUpdate:modelValue":qe[0]||(qe[0]=Fn=>fe.colors=Fn),onChange:Ke.childChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",Po,[(0,r.createVNode)(Yt,{modelValue:fe.colors,"onUpdate:modelValue":qe[1]||(qe[1]=Fn=>fe.colors=Fn),onChange:Ke.childChange,direction:"vertical"},{default:(0,r.withCtx)(()=>[Nl]),_:1},8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["vc-ps-controls",ut.disableFields?"vc-ps-controls__disable-fields":""])},[(0,r.createElementVNode)("div",Ol,[(0,r.createElementVNode)("div",ci,(0,r.toDisplayString)(ut.newLabel),1),(0,r.createElementVNode)("div",En,[(0,r.createElementVNode)("div",{class:"vc-ps-previews__pr-color","aria-label":`New color is ${fe.colors.hex}`,style:(0,r.normalizeStyle)({background:fe.colors.hex})},null,12,Rl),(0,r.createElementVNode)("div",{class:"vc-ps-previews__pr-color","aria-label":`Current color is ${Bt.currentColor}`,style:(0,r.normalizeStyle)({background:Bt.currentColor}),onClick:qe[2]||(qe[2]=(...Fn)=>Ke.clickCurrentColor&&Ke.clickCurrentColor(...Fn))},null,12,xl)]),(0,r.createElementVNode)("div",at,(0,r.toDisplayString)(ut.currentLabel),1)]),ut.disableFields?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",It,[(0,r.createElementVNode)("div",{class:"vc-ps-ac-btn",role:"button","aria-label":ut.acceptLabel,onClick:qe[3]||(qe[3]=(...Fn)=>Ke.handleAccept&&Ke.handleAccept(...Fn))},(0,r.toDisplayString)(ut.acceptLabel),9,nn),(0,r.createElementVNode)("div",{class:"vc-ps-ac-btn",role:"button","aria-label":ut.cancelLabel,onClick:qe[4]||(qe[4]=(...Fn)=>Ke.handleCancel&&Ke.handleCancel(...Fn))},(0,r.toDisplayString)(ut.cancelLabel),9,gs),(0,r.createElementVNode)("div",ja,[(0,r.createVNode)(Sn,{label:"h",desc:"",modelValue:Ke.hsv.h,onChange:Ke.inputChange},null,8,["modelValue","onChange"]),(0,r.createVNode)(Sn,{label:"s",desc:"%",modelValue:Ke.hsv.s,max:100,onChange:Ke.inputChange},null,8,["modelValue","onChange"]),(0,r.createVNode)(Sn,{label:"v",desc:"%",modelValue:Ke.hsv.v,max:100,onChange:Ke.inputChange},null,8,["modelValue","onChange"]),Dn,(0,r.createVNode)(Sn,{label:"r",modelValue:fe.colors.rgba.r,onChange:Ke.inputChange},null,8,["modelValue","onChange"]),(0,r.createVNode)(Sn,{label:"g",modelValue:fe.colors.rgba.g,onChange:Ke.inputChange},null,8,["modelValue","onChange"]),(0,r.createVNode)(Sn,{label:"b",modelValue:fe.colors.rgba.b,onChange:Ke.inputChange},null,8,["modelValue","onChange"]),$a,(0,r.createVNode)(Sn,{label:"#",class:"vc-ps-fields__hex",modelValue:Ke.hex,onChange:Ke.inputChange},null,8,["modelValue","onChange"])]),ut.hasResetButton?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"vc-ps-ac-btn","aria-label":"reset",onClick:qe[5]||(qe[5]=(...Fn)=>Ke.handleReset&&Ke.handleReset(...Fn))},(0,r.toDisplayString)(ut.resetLabel),1)):(0,r.createCommentVNode)("",!0)]))],2)])],2)}const Fr=(0,r.createElementVNode)("div",{class:"vc-saturation--white"},null,-1),Ps=(0,r.createElementVNode)("div",{class:"vc-saturation--black"},null,-1),ko=[(0,r.createElementVNode)("div",{class:"vc-saturation-circle"},null,-1)];function Gr(fe,qe,ut,$t,Bt,Ke){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"vc-saturation",style:(0,r.normalizeStyle)({background:Ke.bgColor}),ref:"container",onMousedown:qe[0]||(qe[0]=(...xt)=>Ke.handleMouseDown&&Ke.handleMouseDown(...xt)),onTouchmove:qe[1]||(qe[1]=(...xt)=>Ke.handleChange&&Ke.handleChange(...xt)),onTouchstart:qe[2]||(qe[2]=(...xt)=>Ke.handleChange&&Ke.handleChange(...xt))},[Fr,Ps,(0,r.createElementVNode)("div",{class:"vc-saturation-pointer",style:(0,r.normalizeStyle)({top:Ke.pointerTop,left:Ke.pointerLeft})},ko,4)],36)}var Bo=s(9428),Hi=s.n(Bo),Wi=s(9289),zi={name:"Saturation",props:{modelValue:Object},computed:{colors(){return this.modelValue},bgColor(){return`hsl(${this.colors.hsv.h}, 100%, 50%)`},pointerTop(){return-(this.colors.hsv.v*100)+1+100+"%"},pointerLeft(){return this.colors.hsv.s*100+"%"}},methods:{throttle:Wi((fe,qe)=>{fe(qe)},20,{leading:!0,trailing:!1}),handleChange(fe,qe){!qe&&fe.preventDefault();const ut=this.$refs.container;if(!ut)return;const $t=ut.clientWidth,Bt=ut.clientHeight,Ke=ut.getBoundingClientRect().left+window.pageXOffset,xt=ut.getBoundingClientRect().top+window.pageYOffset,Yt=fe.pageX||(fe.touches?fe.touches[0].pageX:0),Sn=fe.pageY||(fe.touches?fe.touches[0].pageY:0),Fn=Hi()(Yt-Ke,0,$t),es=Hi()(Sn-xt,0,Bt),sn=Fn/$t,ui=Hi()(-(es/Bt)+1,0,1);this.throttle(this.onChange,{h:this.colors.hsv.h,s:sn,v:ui,a:this.colors.hsv.a,source:"hsva"})},onChange(fe){this.$emit("change",fe)},handleMouseDown(fe){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(fe){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};s(5233);var _o=(0,N.Z)(zi,[["render",Gr]]),i2={name:"Photoshop",mixins:[v],props:{head:{type:String,default:"Color Picker"},disableFields:{type:Boolean,default:!1},hasResetButton:{type:Boolean,default:!1},acceptLabel:{type:String,default:"OK"},cancelLabel:{type:String,default:"Cancel"},resetLabel:{type:String,default:"Reset"},newLabel:{type:String,default:"new"},currentLabel:{type:String,default:"current"}},components:{saturation:_o,hue:Ie,"ed-in":Ne},data(){return{currentColor:"#FFF"}},computed:{hsv(){const fe=this.colors.hsv;return{h:fe.h.toFixed(),s:(fe.s*100).toFixed(),v:(fe.v*100).toFixed()}},hex(){const fe=this.colors.hex;return fe&&fe.replace("#","")}},created(){this.currentColor=this.colors.hex},methods:{childChange(fe){this.colorChange(fe)},inputChange(fe){fe&&(fe["#"]?this.isValidHex(fe["#"])&&this.colorChange({hex:fe["#"],source:"hex"}):fe.r||fe.g||fe.b||fe.a?this.colorChange({r:fe.r||this.colors.rgba.r,g:fe.g||this.colors.rgba.g,b:fe.b||this.colors.rgba.b,a:fe.a||this.colors.rgba.a,source:"rgba"}):(fe.h||fe.s||fe.v)&&this.colorChange({h:fe.h||this.colors.hsv.h,s:fe.s/100||this.colors.hsv.s,v:fe.v/100||this.colors.hsv.v,source:"hsv"}))},clickCurrentColor(){this.colorChange({hex:this.currentColor,source:"hex"})},handleAccept(){this.$emit("ok")},handleCancel(){this.$emit("cancel")},handleReset(){this.$emit("reset")}}};s(1902);var gv=(0,N.Z)(i2,[["render",Vi]]);const l2={class:"vc-sketch-saturation-wrap"},r2={class:"vc-sketch-controls"},c2={class:"vc-sketch-sliders"},u2={class:"vc-sketch-hue-wrap"},d2={key:0,class:"vc-sketch-alpha-wrap"},p2={class:"vc-sketch-color-wrap"},m2=["aria-label"],h2={key:0,class:"vc-sketch-field"},f2={class:"vc-sketch-field--double"},g2={class:"vc-sketch-field--single"},_2={class:"vc-sketch-field--single"},v2={class:"vc-sketch-field--single"},E2={key:0,class:"vc-sketch-field--single"},b2={class:"vc-sketch-presets",role:"group","aria-label":"A color preset, pick one to set as current color"},T2=["aria-label","onClick"],S2=["aria-label","onClick"];function A2(fe,qe,ut,$t,Bt,Ke){const xt=(0,r.resolveComponent)("saturation"),Yt=(0,r.resolveComponent)("hue"),Sn=(0,r.resolveComponent)("alpha"),Fn=(0,r.resolveComponent)("checkboard"),es=(0,r.resolveComponent)("ed-in");return(0,r.openBlock)(),(0,r.createElementBlock)("div",{role:"application","aria-label":"Sketch color picker",class:(0,r.normalizeClass)(["vc-sketch",ut.disableAlpha?"vc-sketch__disable-alpha":""])},[(0,r.createElementVNode)("div",l2,[(0,r.createVNode)(xt,{modelValue:fe.colors,"onUpdate:modelValue":qe[0]||(qe[0]=sn=>fe.colors=sn),onChange:Ke.childChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",r2,[(0,r.createElementVNode)("div",c2,[(0,r.createElementVNode)("div",u2,[(0,r.createVNode)(Yt,{modelValue:fe.colors,"onUpdate:modelValue":qe[1]||(qe[1]=sn=>fe.colors=sn),onChange:Ke.childChange},null,8,["modelValue","onChange"])]),ut.disableAlpha?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",d2,[(0,r.createVNode)(Sn,{modelValue:fe.colors,"onUpdate:modelValue":qe[2]||(qe[2]=sn=>fe.colors=sn),onChange:Ke.childChange},null,8,["modelValue","onChange"])]))]),(0,r.createElementVNode)("div",p2,[(0,r.createElementVNode)("div",{"aria-label":`Current color is ${Ke.activeColor}`,class:"vc-sketch-active-color",style:(0,r.normalizeStyle)({background:Ke.activeColor})},null,12,m2),(0,r.createVNode)(Fn)])]),ut.disableFields?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",h2,[(0,r.createElementVNode)("div",f2,[(0,r.createVNode)(es,{label:"hex",modelValue:Ke.hex,onChange:Ke.inputChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",g2,[(0,r.createVNode)(es,{label:"r",modelValue:fe.colors.rgba.r,onChange:Ke.inputChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",_2,[(0,r.createVNode)(es,{label:"g",modelValue:fe.colors.rgba.g,onChange:Ke.inputChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",v2,[(0,r.createVNode)(es,{label:"b",modelValue:fe.colors.rgba.b,onChange:Ke.inputChange},null,8,["modelValue","onChange"])]),ut.disableAlpha?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",E2,[(0,r.createVNode)(es,{label:"a",modelValue:fe.colors.a,"arrow-offset":.01,max:1,onChange:Ke.inputChange},null,8,["modelValue","arrow-offset","onChange"])]))])),(0,r.createElementVNode)("div",b2,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(ut.presetColors,sn=>((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[fe.isTransparent(sn)?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:"else-"+sn,"aria-label":"Color:"+sn,class:"vc-sketch-presets-color",onClick:ui=>Ke.handlePreset(sn)},[(0,r.createVNode)(Fn)],8,S2)):((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"vc-sketch-presets-color","aria-label":"Color:"+sn,key:"if-"+sn,style:(0,r.normalizeStyle)({background:sn}),onClick:ui=>Ke.handlePreset(sn)},null,12,T2))],64))),256))])],2)}const y2={class:"vc-alpha"},I2={class:"vc-alpha-checkboard-wrap"},C2=[(0,r.createElementVNode)("div",{class:"vc-alpha-picker"},null,-1)];function N2(fe,qe,ut,$t,Bt,Ke){const xt=(0,r.resolveComponent)("checkboard");return(0,r.openBlock)(),(0,r.createElementBlock)("div",y2,[(0,r.createElementVNode)("div",I2,[(0,r.createVNode)(xt)]),(0,r.createElementVNode)("div",{class:"vc-alpha-gradient",style:(0,r.normalizeStyle)({background:Ke.gradientColor})},null,4),(0,r.createElementVNode)("div",{class:"vc-alpha-container",ref:"container",onMousedown:qe[0]||(qe[0]=(...Yt)=>Ke.handleMouseDown&&Ke.handleMouseDown(...Yt)),onTouchmove:qe[1]||(qe[1]=(...Yt)=>Ke.handleChange&&Ke.handleChange(...Yt)),onTouchstart:qe[2]||(qe[2]=(...Yt)=>Ke.handleChange&&Ke.handleChange(...Yt))},[(0,r.createElementVNode)("div",{class:"vc-alpha-pointer",style:(0,r.normalizeStyle)({left:Ke.colors.a*100+"%"})},C2,4)],544)])}function O2(fe,qe,ut,$t,Bt,Ke){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"vc-checkerboard",style:(0,r.normalizeStyle)(Ke.bgStyle)},null,4)}const am={};var R2={name:"Checkboard",props:{size:{type:[Number,String],default:8},white:{type:String,default:"#fff"},grey:{type:String,default:"#e6e6e6"}},computed:{bgStyle(){return{"background-image":"url("+w2(this.white,this.grey,this.size)+")"}}}};function x2(fe,qe,ut){if(typeof document>"u")return null;const $t=document.createElement("canvas");$t.width=$t.height=ut*2;const Bt=$t.getContext("2d");return Bt?(Bt.fillStyle=fe,Bt.fillRect(0,0,$t.width,$t.height),Bt.fillStyle=qe,Bt.fillRect(0,0,ut,ut),Bt.translate(ut,ut),Bt.fillRect(0,0,ut,ut),$t.toDataURL()):null}function w2(fe,qe,ut){const $t=fe+","+qe+","+ut;if(am[$t])return am[$t];{const Bt=x2(fe,qe,ut);return am[$t]=Bt,Bt}}s(3205);var Hr=(0,N.Z)(R2,[["render",O2]]),$2={name:"Alpha",props:{modelValue:Object,onChange:Function},components:{checkboard:Hr},computed:{colors(){return this.modelValue},gradientColor(){const fe=this.colors.rgba,qe=[fe.r,fe.g,fe.b].join(",");return"linear-gradient(to right, rgba("+qe+", 0) 0%, rgba("+qe+", 1) 100%)"}},methods:{handleChange(fe,qe){!qe&&fe.preventDefault();const ut=this.$refs.container;if(!ut)return;const $t=ut.clientWidth,Bt=ut.getBoundingClientRect().left+window.pageXOffset,xt=(fe.pageX||(fe.touches?fe.touches[0].pageX:0))-Bt;let Yt;xt<0?Yt=0:xt>$t?Yt=1:Yt=Math.round(xt*100/$t)/100,this.colors.a!==Yt&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:Yt,source:"rgba"})},handleMouseDown(fe){this.handleChange(fe,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};s(6320);var bu=(0,N.Z)($2,[["render",N2]]);const M2=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF","rgba(0,0,0,0)"];var L2={name:"Sketch",mixins:[v],components:{saturation:_o,hue:Ie,alpha:bu,"ed-in":Ne,checkboard:Hr},props:{presetColors:{type:Array,default(){return M2}},disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},computed:{hex(){let fe;return this.colors.a<1?fe=this.colors.hex8:fe=this.colors.hex,fe.replace("#","")},activeColor(){const fe=this.colors.rgba;return"rgba("+[fe.r,fe.g,fe.b,fe.a].join(",")+")"}},methods:{handlePreset(fe){this.colorChange({hex:fe,source:"hex"})},childChange(fe){this.colorChange(fe)},inputChange(fe){fe&&(fe.hex?this.isValidHex(fe.hex)&&this.colorChange({hex:fe.hex,source:"hex"}):(fe.r||fe.g||fe.b||fe.a)&&this.colorChange({r:fe.r||this.colors.rgba.r,g:fe.g||this.colors.rgba.g,b:fe.b||this.colors.rgba.b,a:fe.a||this.colors.rgba.a,source:"rgba"}))}}};s(5815);var _v=(0,N.Z)(L2,[["render",A2]]);const D2={class:"vc-chrome-saturation-wrap"},P2={class:"vc-chrome-body"},k2={class:"vc-chrome-controls"},B2={class:"vc-chrome-color-wrap"},U2=["aria-label"],F2={class:"vc-chrome-sliders"},G2={class:"vc-chrome-hue-wrap"},V2={key:0,class:"vc-chrome-alpha-wrap"},H2={key:0,class:"vc-chrome-fields-wrap"},W2={class:"vc-chrome-fields"},z2={class:"vc-chrome-field"},Y2={class:"vc-chrome-fields"},j2={class:"vc-chrome-field"},K2={class:"vc-chrome-field"},X2={class:"vc-chrome-field"},q2={key:0,class:"vc-chrome-field"},Z2={class:"vc-chrome-fields"},Q2={class:"vc-chrome-field"},J2={class:"vc-chrome-field"},eN={class:"vc-chrome-field"},tN={key:0,class:"vc-chrome-field"},nN={class:"vc-chrome-toggle-icon"},sN=[(0,r.createElementVNode)("path",{fill:"#333",d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"},null,-1)],aN={class:"vc-chrome-toggle-icon-highlight"};function oN(fe,qe,ut,$t,Bt,Ke){const xt=(0,r.resolveComponent)("saturation"),Yt=(0,r.resolveComponent)("checkboard"),Sn=(0,r.resolveComponent)("hue"),Fn=(0,r.resolveComponent)("alpha"),es=(0,r.resolveComponent)("ed-in");return(0,r.openBlock)(),(0,r.createElementBlock)("div",{role:"application","aria-label":"Chrome color picker",class:(0,r.normalizeClass)(["vc-chrome",ut.disableAlpha?"vc-chrome__disable-alpha":""])},[(0,r.createElementVNode)("div",D2,[(0,r.createVNode)(xt,{modelValue:fe.colors,"onUpdate:modelValue":qe[0]||(qe[0]=sn=>fe.colors=sn),onChange:Ke.childChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",P2,[(0,r.createElementVNode)("div",k2,[(0,r.createElementVNode)("div",B2,[(0,r.createElementVNode)("div",{"aria-label":`current color is ${fe.colors.hex}`,class:"vc-chrome-active-color",style:(0,r.normalizeStyle)({background:Ke.activeColor})},null,12,U2),ut.disableAlpha?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createBlock)(Yt,{key:0}))]),(0,r.createElementVNode)("div",F2,[(0,r.createElementVNode)("div",G2,[(0,r.createVNode)(Sn,{modelValue:fe.colors,"onUpdate:modelValue":qe[1]||(qe[1]=sn=>fe.colors=sn),onChange:Ke.childChange},null,8,["modelValue","onChange"])]),ut.disableAlpha?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",V2,[(0,r.createVNode)(Fn,{modelValue:fe.colors,"onUpdate:modelValue":qe[2]||(qe[2]=sn=>fe.colors=sn),onChange:Ke.childChange},null,8,["modelValue","onChange"])]))])]),ut.disableFields?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",H2,[(0,r.withDirectives)((0,r.createElementVNode)("div",W2,[(0,r.createElementVNode)("div",z2,[Ke.hasAlpha?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createBlock)(es,{key:0,label:"hex",modelValue:fe.colors.hex,onChange:Ke.inputChange},null,8,["modelValue","onChange"])),Ke.hasAlpha?((0,r.openBlock)(),(0,r.createBlock)(es,{key:1,label:"hex",modelValue:fe.colors.hex8,onChange:Ke.inputChange},null,8,["modelValue","onChange"])):(0,r.createCommentVNode)("",!0)])],512),[[r.vShow,Bt.fieldsIndex===0]]),(0,r.withDirectives)((0,r.createElementVNode)("div",Y2,[(0,r.createElementVNode)("div",j2,[(0,r.createVNode)(es,{label:"r",modelValue:fe.colors.rgba.r,onChange:Ke.inputChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",K2,[(0,r.createVNode)(es,{label:"g",modelValue:fe.colors.rgba.g,onChange:Ke.inputChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",X2,[(0,r.createVNode)(es,{label:"b",modelValue:fe.colors.rgba.b,onChange:Ke.inputChange},null,8,["modelValue","onChange"])]),ut.disableAlpha?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",q2,[(0,r.createVNode)(es,{label:"a",modelValue:fe.colors.a,"arrow-offset":.01,max:1,onChange:Ke.inputChange},null,8,["modelValue","arrow-offset","onChange"])]))],512),[[r.vShow,Bt.fieldsIndex===1]]),(0,r.withDirectives)((0,r.createElementVNode)("div",Z2,[(0,r.createElementVNode)("div",Q2,[(0,r.createVNode)(es,{label:"h",modelValue:Ke.hsl.h,onChange:Ke.inputChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",J2,[(0,r.createVNode)(es,{label:"s",modelValue:Ke.hsl.s,onChange:Ke.inputChange},null,8,["modelValue","onChange"])]),(0,r.createElementVNode)("div",eN,[(0,r.createVNode)(es,{label:"l",modelValue:Ke.hsl.l,onChange:Ke.inputChange},null,8,["modelValue","onChange"])]),ut.disableAlpha?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",tN,[(0,r.createVNode)(es,{label:"a",modelValue:fe.colors.a,"arrow-offset":.01,max:1,onChange:Ke.inputChange},null,8,["modelValue","arrow-offset","onChange"])]))],512),[[r.vShow,Bt.fieldsIndex===2]]),(0,r.createElementVNode)("div",{class:"vc-chrome-toggle-btn",role:"button","aria-label":"Change another color definition",onClick:qe[6]||(qe[6]=(...sn)=>Ke.toggleViews&&Ke.toggleViews(...sn))},[(0,r.createElementVNode)("div",nN,[((0,r.openBlock)(),(0,r.createElementBlock)("svg",{style:{width:"24px",height:"24px"},viewBox:"0 0 24 24",onMouseover:qe[3]||(qe[3]=(...sn)=>Ke.showHighlight&&Ke.showHighlight(...sn)),onMouseenter:qe[4]||(qe[4]=(...sn)=>Ke.showHighlight&&Ke.showHighlight(...sn)),onMouseout:qe[5]||(qe[5]=(...sn)=>Ke.hideHighlight&&Ke.hideHighlight(...sn))},sN,32))]),(0,r.withDirectives)((0,r.createElementVNode)("div",aN,null,512),[[r.vShow,Bt.highlight]])])]))])],2)}var iN={name:"Chrome",mixins:[v],props:{disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},components:{saturation:_o,hue:Ie,alpha:bu,"ed-in":Ne,checkboard:Hr},data(){return{fieldsIndex:0,highlight:!1}},computed:{hsl(){const{h:fe,s:qe,l:ut}=this.colors.hsl;return{h:fe.toFixed(),s:`${(qe*100).toFixed()}%`,l:`${(ut*100).toFixed()}%`}},activeColor(){const fe=this.colors.rgba;return"rgba("+[fe.r,fe.g,fe.b,fe.a].join(",")+")"},hasAlpha(){return this.colors.a<1}},methods:{childChange(fe){this.colorChange(fe)},inputChange(fe){if(fe){if(fe.hex)this.isValidHex(fe.hex)&&this.colorChange({hex:fe.hex,source:"hex"});else if(fe.r||fe.g||fe.b||fe.a)this.colorChange({r:fe.r||this.colors.rgba.r,g:fe.g||this.colors.rgba.g,b:fe.b||this.colors.rgba.b,a:fe.a||this.colors.rgba.a,source:"rgba"});else if(fe.h||fe.s||fe.l){const qe=fe.s?fe.s.replace("%","")/100:this.colors.hsl.s,ut=fe.l?fe.l.replace("%","")/100:this.colors.hsl.l;this.colorChange({h:fe.h||this.colors.hsl.h,s:qe,l:ut,source:"hsl"})}}},toggleViews(){if(this.fieldsIndex>=2){this.fieldsIndex=0;return}this.fieldsIndex++},showHighlight(){this.highlight=!0},hideHighlight(){this.highlight=!1}}};s(3647);var vv=(0,N.Z)(iN,[["render",oN]]);const lN=(0,r.createElementVNode)("div",{class:"vc-twitter-triangle-shadow"},null,-1),rN=(0,r.createElementVNode)("div",{class:"vc-twitter-triangle"},null,-1),cN={class:"vc-twitter-body"},uN=["onClick"],dN=(0,r.createElementVNode)("div",{class:"vc-twitter-hash"},"#",-1),pN=(0,r.createElementVNode)("div",{class:"vc-twitter-clear"},null,-1);function mN(fe,qe,ut,$t,Bt,Ke){const xt=(0,r.resolveComponent)("editable-input");return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:(0,r.normalizeClass)(["vc-twitter",{"vc-twitter-hide-triangle ":ut.triangle==="hide","vc-twitter-top-left-triangle ":ut.triangle==="top-left","vc-twitter-top-right-triangle ":ut.triangle==="top-right"}]),style:(0,r.normalizeStyle)({width:typeof ut.width=="number"?`${ut.width}px`:ut.width})},[lN,rN,(0,r.createElementVNode)("div",cN,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(ut.defaultColors,(Yt,Sn)=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{class:"vc-twitter-swatch",style:(0,r.normalizeStyle)({background:Yt,boxShadow:`0 0 4px ${Ke.equal(Yt)?Yt:"transparent"}`}),key:Sn,onClick:Fn=>Ke.handlerClick(Yt)},null,12,uN))),128)),dN,(0,r.createVNode)(xt,{label:"#",modelValue:Ke.hex,onChange:Ke.inputChange},null,8,["modelValue","onChange"]),pN])],6)}const hN=["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"];var fN={name:"Twitter",mixins:[v],components:{editableInput:Ne},props:{width:{type:[String,Number],default:276},defaultColors:{type:Array,default(){return hN}},triangle:{default:"top-left",validator(fe){return["hide","top-left","top-right"].includes(fe)}}},computed:{hsv(){const fe=this.colors.hsv;return{h:fe.h.toFixed(),s:(fe.s*100).toFixed(),v:(fe.v*100).toFixed()}},hex(){const fe=this.colors.hex;return fe&&fe.replace("#","")}},methods:{equal(fe){return fe.toLowerCase()===this.colors.hex.toLowerCase()},handlerClick(fe){this.colorChange({hex:fe,source:"hex"})},inputChange(fe){fe&&(fe["#"]?this.isValidHex(fe["#"])&&this.colorChange({hex:fe["#"],source:"hex"}):fe.r||fe.g||fe.b||fe.a?this.colorChange({r:fe.r||this.colors.rgba.r,g:fe.g||this.colors.rgba.g,b:fe.b||this.colors.rgba.b,a:fe.a||this.colors.rgba.a,source:"rgba"}):(fe.h||fe.s||fe.v)&&this.colorChange({h:fe.h||this.colors.hsv.h,s:fe.s/100||this.colors.hsv.s,v:fe.v/100||this.colors.hsv.v,source:"hsv"}))}}};s(1113);var Ev=(0,N.Z)(fN,[["render",mN]]);const bv=l.i8,Tv={version:bv,Compact:O,Grayscale:B,Twitter:Ev,Material:Ge,Slider:Pe,Swatches:Ds,Photoshop:gv,Sketch:_v,Chrome:vv,Alpha:bu,Checkboard:Hr,EditableInput:Ne,Hue:Ie,Saturation:_o,ColorMixin:v};typeof process=="object"&&String(process)==="[object process]"||(window.VueColor=Tv);var gN=Tv,_N=gN})(),e.exports=a})()})(E0);var q$=E0.exports;const Z$={components:{Chrome:q$.Chrome},props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],data(){return{isPickerOpen:!1}},methods:{closeTogglePicker(){this.isPickerOpen&&this.toggleColorPicker()},toggleColorPicker(){this.isPickerOpen=!this.isPickerOpen},updateColor(e){this.$emit("update:modelValue",e.hex)}}},Q$={class:"colorpicker"};function J$(e,t,n,s,a,o){const i=W("Chrome"),l=Qe("on-clickaway");return p(),E("div",Q$,[m("div",{class:"colorpicker--selected",style:Zt(`background-color: ${n.modelValue}`),onClick:t[0]||(t[0]=Ve((...r)=>o.toggleColorPicker&&o.toggleColorPicker(...r),["prevent"]))},null,4),a.isPickerOpen?re((p(),L(i,{key:0,"disable-alpha":"","model-value":n.modelValue,class:"colorpicker--chrome","onUpdate:modelValue":o.updateColor},null,8,["model-value","onUpdate:modelValue"])),[[l,o.closeTogglePicker]]):$("",!0)])}const eM=De(Z$,[["render",J$],["__scopeId","data-v-71674f87"]]),Cr={__name:"Modal",props:jt({closeOnBackdropClick:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},onClose:{type:Function,required:!0},fullWidth:{type:Boolean,default:!1},modalType:{type:String,default:"centered"},size:{type:String,default:""}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:jt(["close"],["update:show"]),setup(e,{emit:t}){const n=t,s=Xt(e,"show"),a=y(()=>`modal-mask skip-context-menu ${{centered:"","right-aligned":"right-aligned"}[e.modalType]||""}`),o=j(!1),i=()=>{o.value=!0},l=()=>{s.value=!1,n("close"),e.onClose()},r=()=>{o.value&&(o.value=!1,e.closeOnBackdropClick&&l())},c=u=>{s.value&&u.code==="Escape"&&(l(),u.stopPropagation())};return ur(document.body,"mouseup",r),ur(document,"keydown",c),lt(()=>{}),(u,d)=>(p(),L(Ys,{name:"modal-fade"},{default:Y(()=>[s.value?(p(),E("div",{key:0,class:ae(a.value),transition:"modal",onMousedown:i},[m("div",{class:ae(["relative max-h-full overflow-auto bg-n-alpha-3 shadow-md modal-container rtl:text-right skip-context-menu",{"rounded-xl w-[37.5rem]":!e.fullWidth,"items-center rounded-none flex h-full justify-center w-full":e.fullWidth,[e.size]:!0}]),onMouse:d[0]||(d[0]=Ve(()=>{},["stop"])),onMousedown:d[1]||(d[1]=h=>h.stopPropagation())},[e.showCloseButton?(p(),L(te,{key:0,ghost:"",slate:"",icon:"i-lucide-x",class:"absolute z-10 ltr:right-2 rtl:left-2 top-2",onClick:l})):$("",!0),We(u.$slots,"default")],34)],34)):$("",!0)]),_:3}))}},tM={components:{Modal:Cr,NextButton:te},props:{show:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},confirmText:{type:String,default:""},rejectText:{type:String,default:""},confirmValue:{type:String,default:""},confirmPlaceHolderText:{type:String,default:""}},emits:["onClose","onConfirm","update:show"],setup(){return{v$:bt()}},data(){return{value:""}},validations:{value:{required:Ye,isEqual(e){const t=(e||"").trim(),n=(this.confirmValue||"").trim();return t===n}}},computed:{localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}}},methods:{closeModal(){this.value="",this.$emit("onClose")},onConfirm(){this.$emit("onConfirm")}}},nM={class:"flex items-center justify-end gap-2"};function sM(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("woot-input"),r=W("NextButton"),c=W("Modal");return p(),L(c,{show:o.localShow,"onUpdate:show":t[2]||(t[2]=u=>o.localShow=u),"on-close":o.closeModal},{default:Y(()=>[S(i,{"header-title":n.title,"header-content":n.message},null,8,["header-title","header-content"]),m("form",{onSubmit:t[1]||(t[1]=Ve((...u)=>o.onConfirm&&o.onConfirm(...u),["prevent"]))},[S(l,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=u=>a.value=u),type:"text",class:ae({error:s.v$.value.$error}),placeholder:n.confirmPlaceHolderText,onBlur:s.v$.value.$touch},null,8,["modelValue","class","placeholder","onBlur"]),m("div",nM,[S(r,{faded:"",slate:"",type:"reset",label:n.rejectText,onClick:Ve(o.closeModal,["prevent"])},null,8,["label","onClick"]),S(r,{ruby:"",type:"submit",label:n.confirmText,disabled:s.v$.value.$invalid},null,8,["label","disabled"])])],32)]),_:1},8,["show","on-close"])}const b0=De(tM,[["render",sM]]),aM={components:{Modal:Cr,NextButton:te},props:{title:{type:String,default:"This is a title"},description:{type:String,default:"This is your description"},confirmLabel:{type:String,default:"Yes"},cancelLabel:{type:String,default:"No"}},data:()=>({show:!1,resolvePromise:void 0,rejectPromise:void 0}),methods:{showConfirmation(){return this.show=!0,new Promise((e,t)=>{this.resolvePromise=e,this.rejectPromise=t})},confirm(){this.resolvePromise(!0),this.show=!1},cancel(){this.resolvePromise(!1),this.show=!1}}},oM={class:"h-auto overflow-auto flex flex-col"},iM={class:"flex flex-row justify-end gap-2 py-4 px-6 w-full"};function lM(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("NextButton"),r=W("Modal");return p(),L(r,{show:e.show,"onUpdate:show":t[0]||(t[0]=c=>e.show=c),"on-close":o.cancel},{default:Y(()=>[m("div",oM,[S(i,{"header-title":n.title,"header-content":n.description},null,8,["header-title","header-content"]),m("div",iM,[S(l,{faded:"",type:"reset",label:n.cancelLabel,onClick:o.cancel},null,8,["label","onClick"]),S(l,{type:"submit",label:n.confirmLabel,onClick:o.confirm},null,8,["label","onClick"])])])]),_:1},8,["show","on-close"])}const rM=De(aM,[["render",lM]]),cM={class:"flex items-center justify-end gap-2 p-8"},uM={__name:"DeleteModal",props:jt({onClose:{type:Function,default:()=>{}},onConfirm:{type:Function,default:()=>{}},title:{type:String,default:""},message:{type:String,default:""},messageValue:{type:String,default:""},confirmText:{type:String,default:""},rejectText:{type:String,default:""}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:["update:show"],setup(e){const t=Xt(e,"show");return(n,s)=>{const a=W("woot-modal-header");return p(),L(Cr,{show:t.value,"onUpdate:show":s[0]||(s[0]=o=>t.value=o),"on-close":e.onClose},{default:Y(()=>[S(a,{"header-title":e.title,"header-content":e.message,"header-content-value":e.messageValue},null,8,["header-title","header-content","header-content-value"]),m("div",cM,[S(te,{faded:"",slate:"",type:"reset",label:e.rejectText,onClick:e.onClose},null,8,["label","onClick"]),S(te,{ruby:"",type:"submit",label:e.confirmText,onClick:e.onConfirm},null,8,["label","onClick"])])]),_:1},8,["show","on-close"])}}},dM={name:"WootDropdownItem",componentName:"WootDropdownMenu",props:{disabled:{type:Boolean,default:!1}}},pM=["tabindex","aria-disabled"];function mM(e,t,n,s,a,o){return p(),E("li",{class:ae(["mb-1 list-none dropdown-menu__item",{"is-disabled":n.disabled}]),tabindex:n.disabled?null:-1,"aria-disabled":n.disabled},[We(e.$slots,"default",{},void 0,!0)],10,pM)}const Gc=De(dM,[["render",mM],["__scopeId","data-v-4607918a"]]),cp={__name:"DropdownMenu",props:{placement:{type:String,default:"top"}},setup(e){const t=j(null),n=()=>t.value.querySelectorAll("ul.dropdown li.dropdown-menu__item .button"),s=r=>{const c=t.value.querySelector("ul.dropdown li.dropdown-menu__item .button:focus");return Array.from(r).indexOf(c)},a=(r,c)=>{r.length!==0&&r[c].focus()},o=r=>{const c=s(r),u=c>=1?c-1:r.length-1;a(r,u)},i=r=>{const c=s(r),u=c===r.length-1?0:c+1;a(r,u)};return Os({ArrowUp:{action:()=>o(n()),allowOnFocusedInput:!0},ArrowDown:{action:()=>i(n()),allowOnFocusedInput:!0}}),(r,c)=>(p(),E("ul",{ref_key:"dropdownMenuRef",ref:t,class:ae(["dropdown menu vertical",[e.placement&&`dropdown--${e.placement}`]])},[We(r.$slots,"default")],2))}},hM={props:{featureKey:{type:String,required:!0}},computed:{...mt({isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",accountId:"getCurrentAccountId"}),isFeatureEnabled(){return this.isFeatureEnabledonAccount(this.accountId,this.featureKey)}}},fM={key:0};function gM(e,t,n,s,a,o){return o.isFeatureEnabled?(p(),E("div",fM,[We(e.$slots,"default")])):$("",!0)}const _M=De(hM,[["render",gM]]),vM={props:{label:{type:String,default:""},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},placeholder:{type:String,default:""},helpText:{type:String,default:""},error:{type:String,default:""},readonly:{type:Boolean,default:!1},styles:{type:Object,default:()=>{}}},emits:["update:modelValue","input","blur"],mounted(){},methods:{onChange(e){this.$emit("input",e.target.value),this.$emit("update:modelValue",e.target.value)},onBlur(e){this.$emit("blur",e.target.value)}}},EM={class:"input-container"},bM={key:0},TM=["value","type","placeholder","readonly"],SM={key:1,class:"help-text"},AM={key:2,class:"message"};function yM(e,t,n,s,a,o){return p(),E("label",EM,[n.label?(p(),E("span",bM,I(n.label),1)):$("",!0),m("input",{value:n.modelValue,type:n.type,placeholder:n.placeholder,readonly:n.readonly,style:Zt(n.styles),onInput:t[0]||(t[0]=(...i)=>o.onChange&&o.onChange(...i)),onBlur:t[1]||(t[1]=(...i)=>o.onBlur&&o.onBlur(...i))},null,44,TM),n.helpText?(p(),E("p",SM,I(n.helpText),1)):$("",!0),n.error?(p(),E("span",AM,I(n.error),1)):$("",!0),We(e.$slots,"masked",{},void 0,!0)])}const IM=De(vM,[["render",yM],["__scopeId","data-v-7b577ba6"]]),CM={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([457]\\d{6})$|1","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2457]\\d{6})$|1","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"([267]\\d{6})$|1","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"(183[12])|0",0,0,0,[["(?:(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|7(?:[013-57-9]\\d|2[0-8]))\\d|3(?:(?:[0-3589]\\d|6[1-9]|7[0-35-9])\\d|4(?:[0-578]\\d|90)))\\d\\d|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4])|3\\d\\d)|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","246$1",0,"246"],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:[15]|28|4[14])|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|2[23]"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","[025-7]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]]],BG:["359","00","00800\\d{7}|[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9,12],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[02-4679]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","[24-689]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]]]],BL:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|3[3-7]|5[12]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","8001\\d{5}|(?:[2-467]\\d|50)\\d{6}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[235]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-46-9]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([3-8]\\d{6})$|1","242$1",0,"242"],BT:["975","00","[17]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-9]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","(?:[2-8]\\d|90)\\d{8}|3\\d{6}",[7,10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|50|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|[26]8|3[178]|50|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|7[39])|90[25])[2-9]\\d{6}",[10]],["",[10]],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",[10]],["900[2-9]\\d{6}",[10]],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:00|2[125-9]|33|44|66|77|88)|622)[2-9]\\d{6}",[10]],0,["310\\d{4}",[7]],0,["600[2-9]\\d{6}",[10]]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","(?:(?:[189]|5\\d)\\d|2)\\d{7}|[1-68]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["5"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","(?:(?:1[03-689]|2\\d)\\d\\d|6)\\d{8}|1\\d{10}|[126]\\d{6}(?:\\d(?:\\d{2})?)?|86\\d{5,6}|(?:[3-579]\\d|8[0-57-9])\\d{5,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]|3(?:[157]|35|49|9[1-68])|4(?:1[124-9]|2[179]|6[47-9]|7|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:07|1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3|4[13]|5[1-5]|7[0-79]|9[0-35-9])|(?:4[35]|59|85)[1-9]","(?:10|2[0-57-9])(?:1[02]|9[56])|8078|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))1","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|80781|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))12","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|807812|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:078|1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"(1(?:[12]\\d|79)\\d\\d)|0",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","60\\d{8}|(?:1\\d|[39])\\d{9}",[10,11],[["(\\d{3})(\\d{7})","$1 $2",["6|90"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3[0-357]|91"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0([3579]|4(?:[14]4|56))?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","(?:[2-7]|8\\d\\d)\\d{7}|[2-47]\\d{6}|[34]\\d{5}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["[56]"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9,10,11,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[03568]","15(?:[0568]|31)"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{8})","$1 $2",["1"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-579]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d{5})","$1",["20[2-59]"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]0|[68])0|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[14]|2[09]|50|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"],["(\\d)(\\d{4,9})","$1 $2",["(?:1[49]|[2568])[1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0-35])|4(?:(?:[0-5]\\d|70)\\d|69[7-9])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|50))\\d)|(?:2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d|1(?:[0-7]\\d|8[0-3]))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d)\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","[56]94\\d{6}|(?:80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[56]|9[47]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[89]"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"([25-9]\\d{5})$|0","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d|60)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1-9]|5[3-579]|[68][0-689]|7[08]|9\\d)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","80\\d{6}|(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-8]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","(?:[2-8]\\d{3}|9008)\\d{3}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",[6,7,8,9],[["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6|7[245]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-57]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","(?:[2-489]\\d|55)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-589]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","00[1-9]\\d{9,14}|(?:[1-36]|8\\d{5})\\d{6}|00\\d{9}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13,14,15,16,17],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([25-8]\\d{5})$|0","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:43|55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11,12],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]|43"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}",[6,7,8,9,10,11]],["3[2-9]\\d{7,8}|(?:31|43)\\d{8}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],["3[2-8]\\d{9,10}",[11,12]],0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([0-24-8]\\d{5})$|0","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97\\d))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[0459]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[26-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9]|9[29])|5(?:2|3(?:[045]|9[0-8])|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|3(?:[29]|60)|49|51|6(?:[0-24]|36|5[0-3589]|7[23]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3(?:[045]|9(?:[0-58]|6[4-9]|7[0-35689]))|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|60|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[2-57-9]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|7(?:2[2-468]|3[78])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],"0",0,"(000[259]\\d{6})$|(?:(?:003768)0?)|0","$1"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|[235-9]\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[36]0|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[0135-9]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"([2-8]\\d{6})$|1","758$1",0,"758"],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"(1001)|0"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:[245]\\d|33|77|88)\\d{7}|(?:2\\d|[4-6])\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["4[67]|[56]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(0-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"0 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(0-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(0-$1)",1]],"0",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-46-9]|3[3-9]|9)|8(?:0[89]|92)"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:2(?:[0-25-79]\\d|3[1-578]|4[02-46-8]|8[0235-7])|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[014-9]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-4]|5[01]|8[0-3]))\\d{6}"],["80[0-7]\\d{6}"],["89\\d{7}"],0,0,0,0,["(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|3[03-7]|5[0-268]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"([24-9]\\d{6})$|0","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[5-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","670$1",0,"670"],MQ:["596","00","596\\d{6}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"([34]\\d{6})$|1","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:[57]|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["[57]"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[34679]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","[2-9]\\d{9}",[10],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"]]],0,0,0,0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","(?:050|[2-57-9]\\d\\d)\\d{3}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[0467]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","38\\d{6}|[78]\\d{9,13}|(?:20|9\\d)\\d{8}",[8,10,11,12,13,14],[["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["3"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["20[129]"],"0$1"],["(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",[5,6,7,8,9,10,11],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:444|(?:55|8\\d)\\d|666)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]]],NU:["683","00","(?:[4-7]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[1289]\\d{9}|50\\d{5}(?:\\d{2,3})?|[27-9]\\d{7,8}|(?:[34]\\d|6[0-35-9])\\d{6}|8\\d{4,6}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|8|90","50(?:[0367]|88)|8|90"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[589]"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","00|19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,"00"," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","[45]\\d{5}|(?:708|80\\d)\\d{6}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","800\\d{4}|(?:2|800)\\d{6}|(?:0080|[3-7])\\d{7}",[7,8,9,11],[["(\\d{3})(\\d{4})","$1 $2",["2[16]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[3-7]"]]]],RE:["262","00","(?:26|[689]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],"0",0,0,0,0,0,[["26(?:2\\d\\d|3(?:0\\d|1[0-6]))\\d{4}"],["69(?:2\\d\\d|3(?:[06][0-6]|1[013]|2[0-2]|3[0-39]|4\\d|5[0-5]|7[0-37]|8[0-8]|9[0-479]))\\d{4}"],["80\\d{7}"],["89[1-37-9]\\d{6}"],0,0,0,0,["9(?:399[0-3]|479[0-5]|76(?:2[278]|3[0-37]))\\d{4}"],["8(?:1[019]|2[0156]|84|90)\\d{6}"]]],RO:["40","00","(?:[236-8]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[236-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,"3[04-689]|[489]",0,"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"]],"0"],SA:["966","00","92\\d{7}|(?:[15]|8\\d)\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","[6-9]\\d{6}|[1-6]\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["6[89]|7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","(?:[2489]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10,12],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-9]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|79)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["(?:2|90)4|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[348]|64|79|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6[0-35-9]|77|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|68|[78]\\d)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[267]\\d{7}|(?:80\\d|900)\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"(5\\d{6})$|1","721$1",0,"721"],SY:["963","00","[1-39]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"([2-479]\\d{6})$|1","649$1",0,"649"],TD:["235","00|16","(?:22|[689]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[26-9]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","[0-57-9]\\d{8}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["44[02-479]|[34]7"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3(?:[1245]|3[12])"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],0,0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","(?:[1-6]\\d|71)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["[67]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|61[06])","5(?:[0-59]|61[06]1)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-46-8]\\d{6})$|1","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[25-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["5"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}|3\\d{6}",[10],[["(\\d{3})(\\d{4})","$1-$2",["310"],0,1],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["(?:3052(?:0[0-8]|[1-9]\\d)|5056(?:[0-35-9]\\d|4[468])|7302[0-4]\\d)\\d{4}|(?:305[3-9]|472[24]|505[2-57-9]|7306|983[2-47-9])\\d{6}|(?:2(?:0[1-35-9]|1[02-9]|2[03-57-9]|3[1459]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-47-9]|1[02-9]|2[013569]|3[0-24679]|4[167]|5[0-2]|6[01349]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[179]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|3[016]|4[0156]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-8]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[068]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,0,0,["305209\\d{4}"]]],UY:["598","0(?:0|1[3-9]\\d)","0004\\d{2,9}|[1249]\\d{7}|(?:[49]\\d|80)\\d{5}",[6,7,8,9,10,11,12,13],[["(\\d{3})(\\d{3,4})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[49]0|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3 $4",["0"]]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","00","(?:20|33|[5-79]\\d|88)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-9]"]]]],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11,12],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-578]\\d{6})$|1","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["6"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[357-9]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72)\\d{4}|8\\d{5}(?:\\d{3})?",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[478]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","2\\d{7,8}|3\\d{7,11}|(?:4\\d\\d|[89]00)\\d{5}",[8,9,10,11,12],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2|39"],"0$1"],["(\\d{2})(\\d{7,10})","$1 $2",["3"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7(?:[24-6]|8[0-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","(?:80|9\\d)\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,0,[["269(?:0[0-467]|15|5[0-4]|6\\d|[78]0)\\d{4}"],["639(?:0[0-79]|1[019]|[267]\\d|3[09]|40|5[05-9]|9[04-79])\\d{4}"],["80\\d{7}"],0,0,0,0,0,["9(?:(?:39|47)8[01]|769\\d)\\d{4}"]]],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","800\\d{6}|(?:21|63|[79]\\d)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:00|[1-9]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:00|[1-9]\\d)\\d{6}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[35-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"6\\d{9}|[0-36-9]\\d{8}",[9,10],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-37-9]"]],["(\\d)(\\d{3})(\\d{5,6})","$1 $2 $3",["6"]]],0,0,0,0,0,0,[0,["6\\d{9}|[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|[19]\\d{7}|(?:[25]\\d\\d|4)\\d{7}(?:\\d{2})?",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["49"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1[36]|9"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["16"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|23|3(?:[15]|4[57])|4|51"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-35]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|(?:3(?:2|47|7\\d{3})|50\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,["348[57]\\d{7}",[11]],0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:345\\d|9[89])\\d{6}|(?:10|2(?:3|85\\d)|3(?:[15]|[69]\\d\\d)|4[15-8]|51)\\d{8}"]]],883:["883",0,"(?:[1-4]\\d|51)\\d{6,10}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,8})","$1 $2 $3",["[14]|2[24-689]|3[02-689]|51[24-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["21"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[235]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:2(?:00\\d\\d|10)|(?:370[1-9]|51\\d0)\\d)\\d{7}|51(?:00\\d{5}|[24-9]0\\d{4,7})|(?:1[0-79]|2[24-689]|3[02-689]|4[0-4])0\\d{5,9}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}};function Pg(e,t){var n=Array.prototype.slice.call(t);return n.push(CM),e.apply(this,n)}function Tf(e){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tf(e)}function NM(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}function OM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RM(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vc(e,t)}function xM(e){var t=S0();return function(){var s=Hc(e),a;if(t){var o=Hc(this).constructor;a=Reflect.construct(s,arguments,o)}else a=s.apply(this,arguments);return wM(this,a)}}function wM(e,t){if(t&&(Tf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T0(e)}function T0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sf(e){var t=typeof Map=="function"?new Map:void 0;return Sf=function(s){if(s===null||!$M(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(s))return t.get(s);t.set(s,a)}function a(){return cd(s,arguments,Hc(this).constructor)}return a.prototype=Object.create(s.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Vc(a,s)},Sf(e)}function cd(e,t,n){return S0()?cd=Reflect.construct:cd=function(a,o,i){var l=[null];l.push.apply(l,o);var r=Function.bind.apply(a,l),c=new r;return i&&Vc(c,i.prototype),c},cd.apply(null,arguments)}function S0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $M(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Vc(e,t){return Vc=Object.setPrototypeOf||function(s,a){return s.__proto__=a,s},Vc(e,t)}function Hc(e){return Hc=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Hc(e)}var Vo=function(e){RM(n,e);var t=xM(n);function n(s){var a;return OM(this,n),a=t.call(this,s),Object.setPrototypeOf(T0(a),n.prototype),a.name=a.constructor.name,a}return NM(n)}(Sf(Error)),kg=2,MM=17,LM=3,uo="0-9---",DM="--",PM="/",kM=".",BM=" ",UM="()\\[\\]",FM="~",wd="".concat(DM).concat(PM).concat(kM).concat(BM).concat(UM).concat(FM),Bg="+";function jE(e,t){e=e.split("-"),t=t.split("-");for(var n=e[0].split("."),s=t[0].split("."),a=0;a<3;a++){var o=Number(n[a]),i=Number(s[a]);if(o>i)return 1;if(i>o)return-1;if(!isNaN(o)&&isNaN(i))return 1;if(isNaN(o)&&!isNaN(i))return-1}return e[1]&&t[1]?e[1]>t[1]?1:e[1]<t[1]?-1:0:!e[1]&&t[1]?1:e[1]&&!t[1]?-1:0}var GM={}.constructor;function ud(e){return e!=null&&e.constructor===GM}function Af(e){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Af(e)}function up(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VM(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function dp(e,t,n){return t&&VM(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var HM="1.2.0",WM="1.7.35",KE=" ext. ",zM=/^\d+$/,aa=function(){function e(t){up(this,e),XM(t),this.metadata=t,A0.call(this,t)}return dp(e,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter(function(n){return n!=="001"})}},{key:"getCountryMetadata",value:function(n){return this.metadata.countries[n]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(n){return this.getCountryMetadata(n)!==void 0}},{key:"hasCallingCode",value:function(n){if(this.getCountryCodesForCallingCode(n))return!0;if(this.nonGeographic()){if(this.nonGeographic()[n])return!0}else{var s=this.countryCallingCodes()[n];if(s&&s.length===1&&s[0]==="001")return!0}}},{key:"isNonGeographicCallingCode",value:function(n){return this.nonGeographic()?!!this.nonGeographic()[n]:!this.getCountryCodesForCallingCode(n)}},{key:"country",value:function(n){return this.selectNumberingPlan(n)}},{key:"selectNumberingPlan",value:function(n,s){if(n&&zM.test(n)&&(s=n,n=null),n&&n!=="001"){if(!this.hasCountry(n))throw new Error("Unknown country: ".concat(n));this.numberingPlan=new XE(this.getCountryMetadata(n),this)}else if(s){if(!this.hasCallingCode(s))throw new Error("Unknown calling code: ".concat(s));this.numberingPlan=new XE(this.getNumberingPlanMetadata(s),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(n){var s=this.countryCallingCodes()[n];if(s)return s.length===1&&s[0].length===3?void 0:s}},{key:"getCountryCodeForCallingCode",value:function(n){var s=this.getCountryCodesForCallingCode(n);if(s)return s[0]}},{key:"getNumberingPlanMetadata",value:function(n){var s=this.getCountryCodeForCallingCode(n);if(s)return this.getCountryMetadata(s);if(this.nonGeographic()){var a=this.nonGeographic()[n];if(a)return a}else{var o=this.countryCallingCodes()[n];if(o&&o.length===1&&o[0]==="001")return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(n){return this.numberingPlan.type(n)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(n){return this.selectNumberingPlan(n)}},{key:"hasSelectedNumberingPlan",value:function(){return this.numberingPlan!==void 0}}]),e}(),XE=function(){function e(t,n){up(this,e),this.globalMetadataObject=n,this.metadata=t,A0.call(this,n.metadata)}return dp(e,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(n){return n[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var n=this,s=this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[];return s.map(function(a){return new YM(a,n)})}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(n){return n[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return this.types()&&this.types().length===0?!1:!!this.types()}},{key:"type",value:function(n){if(this.hasTypes()&&qE(this.types(),n))return new KM(qE(this.types(),n),this)}},{key:"ext",value:function(){return this.v1||this.v2?KE:this.metadata[13]||KE}}]),e}(),YM=function(){function e(t,n){up(this,e),this._format=t,this.metadata=n}return dp(e,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!!(this.nationalPrefixFormattingRule()&&!jM.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}]),e}(),jM=/^\(?\$1\)?$/,KM=function(){function e(t,n){up(this,e),this.type=t,this.metadata=n}return dp(e,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}]),e}();function qE(e,t){switch(t){case"FIXED_LINE":return e[0];case"MOBILE":return e[1];case"TOLL_FREE":return e[2];case"PREMIUM_RATE":return e[3];case"PERSONAL_NUMBER":return e[4];case"VOICEMAIL":return e[5];case"UAN":return e[6];case"PAGER":return e[7];case"VOIP":return e[8];case"SHARED_COST":return e[9]}}function XM(e){if(!e)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!ud(e)||!ud(e.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(ud(e)?"an object of shape: { "+Object.keys(e).join(", ")+" }":"a "+qM(e)+": "+e,"."))}var qM=function(t){return Af(t)};function Ug(e,t){if(t=new aa(t),t.hasCountry(e))return t.country(e).countryCallingCode();throw new Error("Unknown country: ".concat(e))}function ZM(e,t){return t.countries.hasOwnProperty(e)}function A0(e){var t=e.version;typeof t=="number"?(this.v1=t===1,this.v2=t===2,this.v3=t===3,this.v4=t===4):t?jE(t,HM)===-1?this.v2=!0:jE(t,WM)===-1?this.v3=!0:this.v4=!0:this.v1=!0}var QM=";ext=",Ml=function(t){return"([".concat(uo,"]{1,").concat(t,"})")};function y0(e){var t="20",n="15",s="9",a="6",o="[ \\t,]*",i="[:\\.]?[ \\t,-]*",l="#?",r="(?:e?xt(?:ensi(?:o?|))?n?|??||anexo)",c="(?:[x#~]|int|)",u="[- ]+",d="[ \\t]*",h="(?:,{2}|;)",g=QM+Ml(t),f=o+r+i+Ml(t)+l,b=o+c+i+Ml(s)+l,A=u+Ml(a)+"#",v=d+h+i+Ml(n)+l,T=d+"(?:,)+"+i+Ml(s)+l;return g+"|"+f+"|"+b+"|"+A+"|"+v+"|"+T}var JM="["+uo+"]{"+kg+"}",eL="["+Bg+"]{0,1}(?:["+wd+"]*["+uo+"]){3,}["+wd+uo+"]*",tL=new RegExp("^["+Bg+"]{0,1}(?:["+wd+"]*["+uo+"]){1,2}$","i"),nL=eL+"(?:"+y0()+")?",sL=new RegExp("^"+JM+"$|^"+nL+"$","i");function aL(e){return e.length>=kg&&sL.test(e)}function oL(e){return tL.test(e)}var ZE=new RegExp("(?:"+y0()+")$","i");function iL(e){var t=e.search(ZE);if(t<0)return{};for(var n=e.slice(0,t),s=e.match(ZE),a=1;a<s.length;){if(s[a])return{number:n,ext:s[a]};a++}}var lL={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};function rL(e){return lL[e]}function cL(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=uL(e))||t){n&&(e=n);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uL(e,t){if(e){if(typeof e=="string")return QE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QE(e,t)}}function QE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function JE(e){for(var t="",n=cL(e.split("")),s;!(s=n()).done;){var a=s.value;t+=dL(a,t)||""}return t}function dL(e,t,n){return e==="+"?t?void 0:"+":rL(e)}function Fg(e,t){return pL(e,void 0,t)}function pL(e,t,n){var s=n.type(t),a=s&&s.possibleLengths()||n.possibleLengths();if(!a)return"IS_POSSIBLE";var o=e.length,i=a[0];return i===o?"IS_POSSIBLE":i>o?"TOO_SHORT":a[a.length-1]<o?"TOO_LONG":a.indexOf(o,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}function mL(e,t,n){if(t===void 0&&(t={}),n=new aa(n),t.v2){if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");n.selectNumberingPlan(e.countryCallingCode)}else{if(!e.phone)return!1;if(e.country){if(!n.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));n.country(e.country)}else{if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");n.selectNumberingPlan(e.countryCallingCode)}}if(n.possibleLengths())return I0(e.phone||e.nationalNumber,n);if(e.countryCallingCode&&n.isNonGeographicCallingCode(e.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}function I0(e,t){switch(Fg(e,t)){case"IS_POSSIBLE":return!0;default:return!1}}function qo(e,t){return e=e||"",new RegExp("^(?:"+t+")$").test(e)}function hL(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=fL(e))||t){n&&(e=n);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fL(e,t){if(e){if(typeof e=="string")return e1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e1(e,t)}}function e1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var gL=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function Gg(e,t,n){if(t=t||{},!(!e.country&&!e.countryCallingCode)){n=new aa(n),n.selectNumberingPlan(e.country,e.countryCallingCode);var s=t.v2?e.nationalNumber:e.phone;if(qo(s,n.nationalNumberPattern())){if(Jm(s,"FIXED_LINE",n))return n.type("MOBILE")&&n.type("MOBILE").pattern()===""||!n.type("MOBILE")||Jm(s,"MOBILE",n)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE";for(var a=hL(gL),o;!(o=a()).done;){var i=o.value;if(Jm(s,i,n))return i}}}}function Jm(e,t,n){return t=n.type(t),!t||!t.pattern()||t.possibleLengths()&&t.possibleLengths().indexOf(e.length)<0?!1:qo(e,t.pattern())}function _L(e,t,n){if(t=t||{},n=new aa(n),n.selectNumberingPlan(e.country,e.countryCallingCode),n.hasTypes())return Gg(e,t,n.metadata)!==void 0;var s=t.v2?e.nationalNumber:e.phone;return qo(s,n.nationalNumberPattern())}function vL(e,t,n){var s=new aa(n),a=s.getCountryCodesForCallingCode(e);return a?a.filter(function(o){return EL(t,o,n)}):[]}function EL(e,t,n){var s=new aa(n);return s.selectNumberingPlan(t),s.numberingPlan.possibleLengths().indexOf(e.length)>=0}function bL(e){return e.replace(new RegExp("[".concat(wd,"]+"),"g")," ").trim()}var TL=/(\$\d)/;function SL(e,t,n){var s=n.useInternationalFormat,a=n.withNationalPrefix,o=e.replace(new RegExp(t.pattern()),s?t.internationalFormat():a&&t.nationalPrefixFormattingRule()?t.format().replace(TL,t.nationalPrefixFormattingRule()):t.format());return s?bL(o):o}var AL=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function yL(e,t,n){var s=new aa(n);if(s.selectNumberingPlan(e,t),s.defaultIDDPrefix())return s.defaultIDDPrefix();if(AL.test(s.IDDPrefix()))return s.IDDPrefix()}function IL(e){var t=e.number,n=e.ext;if(!t)return"";if(t[0]!=="+")throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(t).concat(n?";ext="+n:"")}function CL(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=NL(e))||t){n&&(e=n);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NL(e,t){if(e){if(typeof e=="string")return t1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t1(e,t)}}function t1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function n1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function s1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n1(Object(n),!0).forEach(function(s){OL(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n1(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function OL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a1={formatExtension:function(t,n,s){return"".concat(t).concat(s.ext()).concat(n)}};function RL(e,t,n,s){if(n?n=s1(s1({},a1),n):n=a1,s=new aa(s),e.country&&e.country!=="001"){if(!s.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));s.country(e.country)}else if(e.countryCallingCode)s.selectNumberingPlan(e.countryCallingCode);else return e.phone||"";var a=s.countryCallingCode(),o=n.v2?e.nationalNumber:e.phone,i;switch(t){case"NATIONAL":return o?(i=$d(o,e.carrierCode,"NATIONAL",s,n),eh(i,e.ext,s,n.formatExtension)):"";case"INTERNATIONAL":return o?(i=$d(o,null,"INTERNATIONAL",s,n),i="+".concat(a," ").concat(i),eh(i,e.ext,s,n.formatExtension)):"+".concat(a);case"E.164":return"+".concat(a).concat(o);case"RFC3966":return IL({number:"+".concat(a).concat(o),ext:e.ext});case"IDD":if(!n.fromCountry)return;var l=wL(o,e.carrierCode,a,n.fromCountry,s);return eh(l,e.ext,s,n.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(t,'"'))}}function $d(e,t,n,s,a){var o=xL(s.formats(),e);return o?SL(e,o,{useInternationalFormat:n==="INTERNATIONAL",withNationalPrefix:!(o.nationalPrefixIsOptionalWhenFormattingInNationalFormat()&&a&&a.nationalPrefix===!1)}):e}function xL(e,t){for(var n=CL(e),s;!(s=n()).done;){var a=s.value;if(a.leadingDigitsPatterns().length>0){var o=a.leadingDigitsPatterns()[a.leadingDigitsPatterns().length-1];if(t.search(o)!==0)continue}if(qo(t,a.pattern()))return a}}function eh(e,t,n,s){return t?s(e,t,n):e}function wL(e,t,n,s,a){var o=Ug(s,a.metadata);if(o===n){var i=$d(e,t,"NATIONAL",a);return n==="1"?n+" "+i:i}var l=yL(s,void 0,a.metadata);if(l)return"".concat(l," ").concat(n," ").concat($d(e,null,"INTERNATIONAL",a))}function o1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function i1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?o1(Object(n),!0).forEach(function(s){$L(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o1(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function $L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ML(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LL(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function DL(e,t,n){return t&&LL(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var PL=function(){function e(t,n,s){if(ML(this,e),!t)throw new TypeError("`country` or `countryCallingCode` not passed");if(!n)throw new TypeError("`nationalNumber` not passed");if(!s)throw new TypeError("`metadata` not passed");var a=BL(t,s),o=a.country,i=a.countryCallingCode;this.country=o,this.countryCallingCode=i,this.nationalNumber=n,this.number="+"+this.countryCallingCode+this.nationalNumber,this.getMetadata=function(){return s}}return DL(e,[{key:"setExt",value:function(n){this.ext=n}},{key:"getPossibleCountries",value:function(){return this.country?[this.country]:vL(this.countryCallingCode,this.nationalNumber,this.getMetadata())}},{key:"isPossible",value:function(){return mL(this,{v2:!0},this.getMetadata())}},{key:"isValid",value:function(){return _L(this,{v2:!0},this.getMetadata())}},{key:"isNonGeographic",value:function(){var n=new aa(this.getMetadata());return n.isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(n){return this.number===n.number&&this.ext===n.ext}},{key:"getType",value:function(){return Gg(this,{v2:!0},this.getMetadata())}},{key:"format",value:function(n,s){return RL(this,n,s?i1(i1({},s),{},{v2:!0}):{v2:!0},this.getMetadata())}},{key:"formatNational",value:function(n){return this.format("NATIONAL",n)}},{key:"formatInternational",value:function(n){return this.format("INTERNATIONAL",n)}},{key:"getURI",value:function(n){return this.format("RFC3966",n)}}]),e}(),kL=function(t){return/^[A-Z]{2}$/.test(t)};function BL(e,t){var n,s,a=new aa(t);return kL(e)?(n=e,a.selectNumberingPlan(n),s=a.countryCallingCode()):s=e,{country:n,countryCallingCode:s}}var UL=new RegExp("(["+uo+"])");function FL(e,t,n,s){if(t){var a=new aa(s);a.selectNumberingPlan(t,n);var o=new RegExp(a.IDDPrefix());if(e.search(o)===0){e=e.slice(e.match(o)[0].length);var i=e.match(UL);if(!(i&&i[1]!=null&&i[1].length>0&&i[1]==="0"))return e}}}function GL(e,t){if(e&&t.numberingPlan.nationalPrefixForParsing()){var n=new RegExp("^(?:"+t.numberingPlan.nationalPrefixForParsing()+")"),s=n.exec(e);if(s){var a,o,i=s.length-1,l=i>0&&s[i];if(t.nationalPrefixTransformRule()&&l)a=e.replace(n,t.nationalPrefixTransformRule()),i>1&&(o=s[1]);else{var r=s[0];a=e.slice(r.length),l&&(o=s[1])}var c;if(l){var u=e.indexOf(s[1]),d=e.slice(0,u);d===t.numberingPlan.nationalPrefix()&&(c=t.numberingPlan.nationalPrefix())}else c=s[0];return{nationalNumber:a,nationalPrefix:c,carrierCode:o}}}return{nationalNumber:e}}function yf(e,t){var n=GL(e,t),s=n.carrierCode,a=n.nationalNumber;if(a!==e){if(!VL(e,a,t))return{nationalNumber:e};if(t.possibleLengths()&&!HL(a,t))return{nationalNumber:e}}return{nationalNumber:a,carrierCode:s}}function VL(e,t,n){return!(qo(e,n.nationalNumberPattern())&&!qo(t,n.nationalNumberPattern()))}function HL(e,t){switch(Fg(e,t)){case"TOO_SHORT":case"INVALID_LENGTH":return!1;default:return!0}}function WL(e,t,n,s){var a=t?Ug(t,s):n;if(e.indexOf(a)===0){s=new aa(s),s.selectNumberingPlan(t,n);var o=e.slice(a.length),i=yf(o,s),l=i.nationalNumber,r=yf(e,s),c=r.nationalNumber;if(!qo(c,s.nationalNumberPattern())&&qo(l,s.nationalNumberPattern())||Fg(c,s)==="TOO_LONG")return{countryCallingCode:a,number:o}}return{number:e}}function zL(e,t,n,s){if(!e)return{};var a;if(e[0]!=="+"){var o=FL(e,t,n,s);if(o&&o!==e)a=!0,e="+"+o;else{if(t||n){var i=WL(e,t,n,s),l=i.countryCallingCode,r=i.number;if(l)return{countryCallingCodeSource:"FROM_NUMBER_WITHOUT_PLUS_SIGN",countryCallingCode:l,number:r}}return{number:e}}}if(e[1]==="0")return{};s=new aa(s);for(var c=2;c-1<=LM&&c<=e.length;){var u=e.slice(1,c);if(s.hasCallingCode(u))return s.selectNumberingPlan(u),{countryCallingCodeSource:a?"FROM_NUMBER_WITH_IDD":"FROM_NUMBER_WITH_PLUS_SIGN",countryCallingCode:u,number:e.slice(c)};c++}return{}}function YL(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=jL(e))||t){n&&(e=n);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jL(e,t){if(e){if(typeof e=="string")return l1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l1(e,t)}}function l1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function KL(e,t){var n=t.countries,s=t.defaultCountry,a=t.metadata;a=new aa(a);for(var o=[],i=YL(n),l;!(l=i()).done;){var r=l.value;if(a.country(r),a.leadingDigits()){if(e&&e.search(a.leadingDigits())===0)return r}else if(Gg({phone:e,country:r},void 0,a.metadata))if(s){if(r===s)return r;o.push(r)}else return r}if(o.length>0)return o[0]}function XL(e,t){var n=t.nationalNumber,s=t.defaultCountry,a=t.metadata,o=a.getCountryCodesForCallingCode(e);if(o)return o.length===1?o[0]:KL(n,{countries:o,defaultCountry:s,metadata:a.metadata})}var C0="+",qL="[\\-\\.\\(\\)]?",r1="(["+uo+"]|"+qL+")",ZL="^\\"+C0+r1+"*["+uo+"]"+r1+"*$",QL=new RegExp(ZL,"g"),If=uo,JL="["+If+"]+((\\-)*["+If+"])*",e3="a-zA-Z",t3="["+e3+"]+((\\-)*["+If+"])*",n3="^("+JL+"\\.)*"+t3+"\\.?$",s3=new RegExp(n3,"g"),c1="tel:",Cf=";phone-context=",a3=";isub=";function o3(e){var t=e.indexOf(Cf);if(t<0)return null;var n=t+Cf.length;if(n>=e.length)return"";var s=e.indexOf(";",n);return s>=0?e.substring(n,s):e.substring(n)}function i3(e){return e===null?!0:e.length===0?!1:QL.test(e)||s3.test(e)}function l3(e,t){var n=t.extractFormattedPhoneNumber,s=o3(e);if(!i3(s))throw new Vo("NOT_A_NUMBER");var a;if(s===null)a=n(e)||"";else{a="",s.charAt(0)===C0&&(a+=s);var o=e.indexOf(c1),i;o>=0?i=o+c1.length:i=0;var l=e.indexOf(Cf);a+=e.substring(i,l)}var r=a.indexOf(a3);if(r>0&&(a=a.substring(0,r)),a!=="")return a}var r3=250,c3=new RegExp("["+Bg+uo+"]"),u3=new RegExp("[^"+uo+"#]+$");function d3(e,t,n){if(t=t||{},n=new aa(n),t.defaultCountry&&!n.hasCountry(t.defaultCountry))throw t.v2?new Vo("INVALID_COUNTRY"):new Error("Unknown country: ".concat(t.defaultCountry));var s=m3(e,t.v2,t.extract),a=s.number,o=s.ext,i=s.error;if(!a){if(t.v2)throw i==="TOO_SHORT"?new Vo("TOO_SHORT"):new Vo("NOT_A_NUMBER");return{}}var l=f3(a,t.defaultCountry,t.defaultCallingCode,n),r=l.country,c=l.nationalNumber,u=l.countryCallingCode,d=l.countryCallingCodeSource,h=l.carrierCode;if(!n.hasSelectedNumberingPlan()){if(t.v2)throw new Vo("INVALID_COUNTRY");return{}}if(!c||c.length<kg){if(t.v2)throw new Vo("TOO_SHORT");return{}}if(c.length>MM){if(t.v2)throw new Vo("TOO_LONG");return{}}if(t.v2){var g=new PL(u,c,n.metadata);return r&&(g.country=r),h&&(g.carrierCode=h),o&&(g.ext=o),g.__countryCallingCodeSource=d,g}var f=(t.extended?n.hasSelectedNumberingPlan():r)?qo(c,n.nationalNumberPattern()):!1;return t.extended?{country:r,countryCallingCode:u,carrierCode:h,valid:f,possible:f?!0:!!(t.extended===!0&&n.possibleLengths()&&I0(c,n)),phone:c,ext:o}:f?h3(r,c,o):{}}function p3(e,t,n){if(e){if(e.length>r3){if(n)throw new Vo("TOO_LONG");return}if(t===!1)return e;var s=e.search(c3);if(!(s<0))return e.slice(s).replace(u3,"")}}function m3(e,t,n){var s=l3(e,{extractFormattedPhoneNumber:function(i){return p3(i,n,t)}});if(!s)return{};if(!aL(s))return oL(s)?{error:"TOO_SHORT"}:{};var a=iL(s);return a.ext?a:{number:s}}function h3(e,t,n){var s={country:e,phone:t};return n&&(s.ext=n),s}function f3(e,t,n,s){var a=zL(JE(e),t,n,s.metadata),o=a.countryCallingCodeSource,i=a.countryCallingCode,l=a.number,r;if(i)s.selectNumberingPlan(i);else if(l&&(t||n))s.selectNumberingPlan(t,n),t&&(r=t),i=n||Ug(t,s.metadata);else return{};if(!l)return{countryCallingCodeSource:o,countryCallingCode:i};var c=yf(JE(l),s),u=c.nationalNumber,d=c.carrierCode,h=XL(i,{nationalNumber:u,defaultCountry:t,metadata:s});return h&&(r=h,h==="001"||s.country(r)),{country:r,countryCallingCode:i,countryCallingCodeSource:o,nationalNumber:u,carrierCode:d}}function u1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function d1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?u1(Object(n),!0).forEach(function(s){g3(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u1(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function g3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N0(e,t,n){return d3(e,d1(d1({},t),{},{v2:!0}),n)}function p1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function _3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?p1(Object(n),!0).forEach(function(s){v3(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p1(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function v3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E3(e,t){return A3(e)||S3(e,t)||T3(e,t)||b3()}function b3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T3(e,t){if(e){if(typeof e=="string")return m1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m1(e,t)}}function m1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function S3(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s=[],a=!0,o=!1,i,l;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(s.push(i.value),!(t&&s.length===t));a=!0);}catch(r){o=!0,l=r}finally{try{!a&&n.return!=null&&n.return()}finally{if(o)throw l}}return s}}function A3(e){if(Array.isArray(e))return e}function Vg(e){var t=Array.prototype.slice.call(e),n=E3(t,4),s=n[0],a=n[1],o=n[2],i=n[3],l,r,c;if(typeof s=="string")l=s;else throw new TypeError("A text for parsing must be a string.");if(!a||typeof a=="string")i?(r=o,c=i):(r=void 0,c=o),a&&(r=_3({defaultCountry:a},r));else if(ud(a))o?(r=a,c=o):c=a;else throw new Error("Invalid second argument: ".concat(a));return{text:l,options:r,metadata:c}}function y3(){var e=Vg(arguments),t=e.text,n=e.options,s=e.metadata;return N0(t,n,s)}function h1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function f1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?h1(Object(n),!0).forEach(function(s){I3(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h1(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function I3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O0(e,t,n){t&&t.defaultCountry&&!ZM(t.defaultCountry,n)&&(t=f1(f1({},t),{},{defaultCountry:void 0}));try{return N0(e,t,n)}catch(s){if(!(s instanceof Vo))throw s}}function C3(){var e=Vg(arguments),t=e.text,n=e.options,s=e.metadata;return O0(t,n,s)}function g1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function _1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g1(Object(n),!0).forEach(function(s){N3(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g1(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function N3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O3(){var e=Vg(arguments),t=e.text,n=e.options,s=e.metadata;n=_1(_1({},n),{},{extract:!1});var a=O0(t,n,s);return a&&a.isValid()||!1}function R3(){return Pg(y3,arguments)}function Md(){return Pg(C3,arguments)}function x3(){return Pg(O3,arguments)}const w3={props:{modelValue:{type:[String,Number],default:""},placeholder:{type:String,default:""},readonly:{type:Boolean,default:!1},styles:{type:Object,default:()=>{}},error:{type:Boolean,default:!1}},emits:["blur","setCode","update:modelValue"],data(){return{selectedIndex:-1,showDropdown:!1,searchCountry:"",activeCountryCode:wS(),activeDialCode:xS(),phoneNumber:this.modelValue}},computed:{countries(){return[{name:this.dropdownFirstItemName,dial_code:"",emoji:"",id:""},...Fa]},dropdownFirstItemName(){return this.activeCountryCode?"Clear selection":"Select Country"},filteredCountriesBySearch(){return this.countries.filter(e=>{const{name:t,dial_code:n,id:s}=e,a=this.searchCountry.toLowerCase();return t.toLowerCase().includes(a)||n.toLowerCase().includes(a)||s.toLowerCase().includes(a)})},activeCountry(){return this.activeCountryCode?this.countries.find(e=>e.id===this.activeCountryCode):""}},watch:{modelValue(){const e=Md(this.modelValue);e&&(this.activeCountryCode=e.country,this.activeDialCode=`+${e.countryCallingCode}`,this.phoneNumber=this.modelValue.replace(`+${e.countryCallingCode}`,""))}},mounted(){this.setActiveCountry()},methods:{onOutsideClick(e){this.showDropdown&&e.target!==this.$refs.dropdown&&!this.$refs.dropdown.contains(e.target)&&this.closeDropdown()},onChange(e){this.phoneNumber=e.target.value,this.$emit("update:modelValue",e.target.value),this.$emit("setCode",this.activeDialCode)},onBlur(e){this.$emit("blur",e.target.value)},onSearchCountry(){this.selectedIndex=0},moveUp(){this.showDropdown&&(this.selectedIndex=Math.max(this.selectedIndex-1,0),this.scrollToSelected())},moveDown(){this.showDropdown&&(this.selectedIndex=Math.min(this.selectedIndex+1,this.filteredCountriesBySearch.length-1),this.scrollToSelected())},scrollToSelected(){this.$nextTick(()=>{const e=this.$refs.dropdown,t=this.$refs.dropdownItem[this.selectedIndex],n=40;if(t){const s=t.offsetTop;e.scrollTop=s-n}})},onSelectCountry(e){!e||!this.showDropdown||(this.activeCountryCode=e.id,this.searchCountry="",this.activeDialCode=e.dial_code,this.$emit("setCode",e.dial_code),this.closeDropdown(),this.$refs.phoneNumberInput.focus())},setActiveCountry(){const{phoneNumber:e}=this;if(!e)return;const t=Md(e);t&&(this.activeCountryCode=t.country,this.activeDialCode=t.countryCallingCode)},toggleCountryDropdown(){this.showDropdown=!this.showDropdown,this.selectedIndex=-1,this.showDropdown&&this.$nextTick(()=>{this.$refs.searchbar.focus()})},closeDropdown(){this.selectedIndex=-1,this.showDropdown=!1}}},$3={class:"relative phone-input--wrap"},M3={key:0,class:"mb-0"},L3={key:0,class:"flex py-2 ltr:pl-2 rtl:pr-2 text-base font-normal leading-normal text-n-slate-12"},D3=["value","placeholder","readonly"],P3={class:"sticky top-0 p-1 bg-white dark:bg-transparent backdrop-blur-[100px]"},k3=["placeholder"],B3=["onClick"],U3={class:"mr-1 text-base"},F3={class:"max-w-[7.5rem] overflow-hidden text-ellipsis whitespace-nowrap"},G3={class:"ml-1 text-xs text-n-slate-11"},V3={key:0},H3={class:"flex items-center justify-center mt-4 text-sm text-n-slate-10"};function W3(e,t,n,s,a,o){const i=W("fluent-icon"),l=Qe("on-clickaway");return p(),E("div",$3,[m("div",{class:ae(["flex items-center justify-start border-none outline outline-1 rounded-lg bg-n-alpha-black2",n.error?"outline-n-ruby-8 dark:outline-n-ruby-8 hover:outline-n-ruby-9 dark:hover:outline-n-ruby-9 mb-1":"mb-4 outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6"])},[m("div",{class:"cursor-pointer py-2 pr-1.5 pl-2 rounded-tl-lg rounded-bl-lg flex items-center justify-center gap-1.5 bg-n-solid-3 h-10 w-14",onClick:t[0]||(t[0]=Ve((...r)=>o.toggleCountryDropdown&&o.toggleCountryDropdown(...r),["prevent"]))},[o.activeCountry?(p(),E("h5",M3,I(o.activeCountry.emoji),1)):(p(),L(i,{key:1,icon:"globe",class:"fluent-icon",size:"16"})),S(i,{icon:"chevron-down",class:"fluent-icon",size:"12"})]),a.activeDialCode?(p(),E("span",L3,I(a.activeDialCode),1)):$("",!0),m("input",{ref:"phoneNumberInput",value:a.phoneNumber,type:"tel",class:"no-margin !rounded-tl-none !rounded-bl-none !outline-none !border-0 font-normal !w-full !bg-transparent text-base !px-1.5 placeholder:font-normal",placeholder:n.placeholder,readonly:n.readonly,style:Zt(n.styles),onInput:t[1]||(t[1]=(...r)=>o.onChange&&o.onChange(...r)),onBlur:t[2]||(t[2]=(...r)=>o.onBlur&&o.onBlur(...r))},null,44,D3)],2),a.showDropdown?re((p(),E("div",{key:0,ref:"dropdown",tabindex:"0",class:"z-10 absolute h-60 w-[12.5rem] shadow-md overflow-y-auto top-10 rounded-lg px-0 pt-0 pb-1 bg-n-alpha-3 backdrop-blur-[100px]",onKeydown:[t[5]||(t[5]=wn(Ve((...r)=>o.moveUp&&o.moveUp(...r),["prevent"]),["up"])),t[6]||(t[6]=wn(Ve((...r)=>o.moveDown&&o.moveDown(...r),["prevent"]),["down"])),t[7]||(t[7]=wn(Ve(r=>o.onSelectCountry(o.filteredCountriesBySearch[a.selectedIndex]),["prevent"]),["enter"]))]},[m("div",P3,[re(m("input",{ref:"searchbar","onUpdate:modelValue":t[3]||(t[3]=r=>a.searchCountry=r),type:"text",placeholder:e.$t("GENERAL.PHONE_INPUT.PLACEHOLDER"),class:"!h-8 !mb-0 !text-sm !outline-n-brand dark:!outline-n-brand",onInput:t[4]||(t[4]=(...r)=>o.onSearchCountry&&o.onSearchCountry(...r))},null,40,k3),[[gt,a.searchCountry]])]),(p(!0),E(ue,null,Ae(o.filteredCountriesBySearch,(r,c)=>(p(),E("div",{ref_for:!0,ref:"dropdownItem",key:c,class:ae(["flex items-center px-1 py-0 cursor-pointer h-7 hover:bg-n-alpha-1 dark:hover:bg-n-alpha-2",{"bg-n-alpha-1 dark:bg-n-alpha-2":r.id===a.activeCountryCode,"bg-n-alpha-1 dark:bg-n-alpha-2":c===a.selectedIndex}]),onClick:u=>o.onSelectCountry(r)},[m("span",U3,I(r.emoji),1),m("span",F3,I(r.name),1),m("span",G3,I(r.dial_code),1)],10,B3))),128)),o.filteredCountriesBySearch.length===0?(p(),E("div",V3,[m("span",H3,I(e.$t("GENERAL.PHONE_INPUT.EMPTY_STATE")),1)])):$("",!0)],32)),[[l,o.onOutsideClick]]):$("",!0)])}const z3=De(w3,[["render",W3]]),Y3={props:{title:{type:String,required:!0},description:{type:String,default:""},href:{type:String,default:""},bgColor:{type:String,default:""},small:{type:Boolean,default:!1},showClose:{type:Boolean,default:!1},icon:{type:String,default:""},color:{type:String,default:""},colorScheme:{type:String,default:""},variant:{type:String,default:""}},emits:["remove"],computed:{textColor(){return this.variant==="smooth"||this.variant==="dashed"?"":this.color||RN(this.bgColor)},labelClass(){return`label ${this.colorScheme} ${this.variant} ${this.small?"small":""}`},labelStyle(){return this.bgColor?{background:this.bgColor,color:this.textColor,border:`1px solid ${this.bgColor}`}:{}},anchorStyle(){return this.bgColor?{color:this.textColor}:{}}},methods:{onClick(){this.$emit("remove",this.title)}}},j3=["title"],K3={key:0,class:"label-action--button"},X3={key:2,class:"whitespace-nowrap text-ellipsis overflow-hidden"},q3=["href"];function Z3(e,t,n,s,a,o){const i=W("fluent-icon");return p(),E("div",{class:ae(["inline-flex ltr:mr-1 rtl:ml-1 mb-1",o.labelClass]),style:Zt(o.labelStyle),title:n.description},[n.icon?(p(),E("span",K3,[S(i,{icon:n.icon,size:"12",class:"label--icon cursor-pointer"},null,8,["icon"])])):$("",!0),["smooth","dashed"].includes(n.variant)&&n.title&&!n.icon?(p(),E("span",{key:1,style:Zt({background:n.color}),class:"label-color-dot flex-shrink-0"},null,4)):$("",!0),n.href?(p(),E("a",{key:3,href:n.href,style:Zt(o.anchorStyle)},I(n.title),13,q3)):(p(),E("span",X3,I(n.title),1)),n.showClose?(p(),E("button",{key:4,class:"label-close--button p-0",style:Zt({color:o.textColor}),onClick:t[0]||(t[0]=(...l)=>o.onClick&&o.onClick(...l))},[S(i,{icon:"dismiss",size:"12",class:"close--icon"})],4)):$("",!0)],14,j3)}const Q3=De(Y3,[["render",Z3],["__scopeId","data-v-4071204f"]]),J3={class:"flex items-center justify-center p-8"},eD={class:"flex items-center gap-3 text-base text-center w-100 text-n-slate-11"},tD={class:"text-base font-medium text-n-slate-12"},Nr={__name:"LoadingState",props:{message:{type:String,default:""}},setup(e){return(t,n)=>(p(),E("div",J3,[m("h6",eD,[m("span",tD,I(e.message),1),S(An,{class:"text-n-brand"})])]))}},nD={props:{headerTitle:{type:String,default:""},headerContent:{type:String,default:""},headerContentValue:{type:String,default:""},headerImage:{type:String,default:""}}},sD={class:"flex flex-col items-start px-8 pt-8 pb-0"},aD=["src"],oD={"data-test-id":"modal-header-title",class:"text-base font-semibold leading-6 text-n-slate-12"},iD={key:1,"data-test-id":"modal-header-content",class:"w-full mt-2 text-sm leading-5 break-words text-n-slate-11"},lD={key:0,class:"text-sm font-semibold text-n-slate-11"};function rD(e,t,n,s,a,o){return p(),E("div",sD,[n.headerImage?(p(),E("img",{key:0,src:n.headerImage,alt:"No image"},null,8,aD)):$("",!0),m("h2",oD,I(n.headerTitle),1),n.headerContent?(p(),E("p",iD,[xe(I(n.headerContent)+" ",1),n.headerContentValue?(p(),E("span",lD,I(n.headerContentValue),1)):$("",!0)])):$("",!0),We(e.$slots,"default")])}const cD=De(nD,[["render",rD]]),uD={__name:"Tabs",props:{index:{type:Number,default:0},border:{type:Boolean,default:!0}},emits:["change"],setup(e,{emit:t}){const n=e,s=t,a=Ss("tabsContainer"),o=Ss("tabsList"),{width:i}=dr(a),{width:l}=dr(o),r=j(!1),c=y({get:()=>n.index,set:h=>{s("change",h)}});Hn("activeIndex",c),Hn("updateActiveIndex",h=>{c.value=h});const u=()=>{a.value&&o.value&&(r.value=o.value.scrollWidth>o.value.clientWidth)},d=h=>{if(a.value&&o.value){let g=o.value.scrollLeft;g+=h==="left"?-100:100,o.value.scrollTo({top:0,left:g,behavior:"smooth"})}};return it([i,l],()=>{u()},{immediate:!0}),(h,g)=>{const f=W("fluent-icon");return p(),E("div",{ref_key:"tabsContainer",ref:a,class:ae(["flex",[e.border&&"border-b border-b-n-weak"]])},[r.value?(p(),E("button",{key:0,class:"items-center rounded-none cursor-pointer flex h-auto justify-center min-w-8",onClick:g[0]||(g[0]=b=>d("left"))},[S(f,{icon:"chevron-left",size:16})])):$("",!0),m("ul",{ref_key:"tabsList",ref:o,class:ae(["border-r-0 border-l-0 border-t-0 flex min-w-[6.25rem] py-0 px-4 list-none mb-0",r.value?"overflow-hidden py-0 px-1 max-w-[calc(100%-64px)]":""])},[We(h.$slots,"default")],2),r.value?(p(),E("button",{key:1,class:"items-center rounded-none cursor-pointer flex h-auto justify-center min-w-8",onClick:g[1]||(g[1]=b=>d("right"))},[S(f,{icon:"chevron-right",size:16})])):$("",!0)],2)}}},dD={class:"flex-shrink-0 my-0 mx-2 ltr:first:ml-0 rtl:first:mr-0 ltr:last:mr-0 rtl:last:ml-0 hover:text-n-slate-12"},pD={__name:"TabsItem",props:{index:{type:Number,default:0},name:{type:String,required:!0},disabled:{type:Boolean,default:!1},count:{type:Number,default:0},showBadge:{type:Boolean,default:!0},isCompact:{type:Boolean,default:!1}},setup(e){const t=e,n=Ro("activeIndex"),s=Ro("updateActiveIndex"),a=y(()=>t.index===n.value),o=y(()=>t.count),i=l=>{l.preventDefault(),t.disabled||s(t.index)};return(l,r)=>(p(),E("li",dD,[m("a",{class:ae(["flex items-center flex-row border-b select-none cursor-pointer text-sm relative top-[1px] transition-[border-color] duration-[150ms] ease-[cubic-bezier(0.37,0,0.63,1)]",[a.value?"border-b border-n-brand text-n-blue-text":"border-transparent text-n-slate-11",e.isCompact?"py-2 text-sm":"text-base py-3"]]),onClick:i},[xe(I(e.name)+" ",1),e.showBadge?(p(),E("div",{key:0,class:ae(["rounded-md h-5 flex items-center justify-center text-xxs font-semibold my-0 mx-1 px-1 py-0 min-w-[20px]",[a.value?"bg-n-brand/10 dark:bg-n-brand/20 text-n-blue-text":"bg-n-alpha-black2 dark:bg-n-solid-3 text-n-slate-11"]])},[m("span",null,I(o.value),1)],2)):$("",!0)],2)]))}};function So(e,t){Rn(2,arguments);var n=vn(e),s=kn(t);if(isNaN(s))return new Date(NaN);if(!s)return n;var a=n.getDate(),o=new Date(n.getTime());o.setMonth(n.getMonth()+s+1,0);var i=o.getDate();return a>=i?o:(n.setFullYear(o.getFullYear(),o.getMonth(),a),n)}function Wc(e,t){if(Rn(2,arguments),!t||typeof t!="object")return new Date(NaN);var n="years"in t?kn(t.years):0,s="months"in t?kn(t.months):0,a="weeks"in t?kn(t.weeks):0,o="days"in t?kn(t.days):0,i="hours"in t?kn(t.hours):0,l="minutes"in t?kn(t.minutes):0,r="seconds"in t?kn(t.seconds):0,c=vn(e),u=s||n?So(c,s+n*12):c,d=o||a?Mc(u,o+a*7):u,h=l+i*60,g=r+h*60,f=g*1e3,b=new Date(d.getTime()+f);return b}function R0(e,t){Rn(1,arguments);var n=t||{},s=n.locale,a=s&&s.options&&s.options.weekStartsOn,o=a==null?0:kn(a),i=n.weekStartsOn==null?o:kn(n.weekStartsOn);if(!(i>=0&&i<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=vn(e),r=l.getDay(),c=(r<i?7:0)+r-i;return l.setDate(l.getDate()-c),l.setHours(0,0,0,0),l}function mD(e,t){Rn(2,arguments);var n=kn(t),s=n*7;return Mc(e,s)}function Hg(e,t){Rn(2,arguments);var n=kn(t);return So(e,n*12)}function hD(e,t){Rn(2,arguments);var n=vn(e),s=vn(t);return n.getFullYear()-s.getFullYear()}var fD=36e5;function gD(e,t){Rn(2,arguments);var n=CS(e,t)/fD;return n>0?Math.floor(n):Math.ceil(n)}var _D=6e4;function dd(e,t){Rn(2,arguments);var n=CS(e,t)/_D;return n>0?Math.floor(n):Math.ceil(n)}function vD(e,t){Rn(2,arguments);var n=vn(e),s=vn(t),a=ff(n,s),o=Math.abs(hD(n,s));n.setFullYear("1584"),s.setFullYear("1584");var i=ff(n,s)===-a,l=a*(o-i);return l===0?0:l}function ED(e,t){Rn(1,arguments);var n=e||{},s=vn(n.start),a=vn(n.end),o=a.getTime();if(!(s.getTime()<=o))throw new RangeError("Invalid interval");var i=[],l=s;l.setHours(0,0,0,0);var r=1;if(isNaN(r))throw new RangeError("`options.step` must be a number greater than 1");for(;l.getTime()<=o;)i.push(vn(l)),l.setDate(l.getDate()+r),l.setHours(0,0,0,0);return i}function Wo(e){Rn(1,arguments);var t=vn(e);return t.setDate(1),t.setHours(0,0,0,0),t}function bD(e){Rn(1,arguments);var t=vn(e),n=t.getDay();return n}function TD(e){Rn(1,arguments);var t=vn(e),n=t.getFullYear(),s=t.getMonth(),a=new Date(0);return a.setFullYear(n,s+1,0),a.setHours(0,0,0,0),a.getDate()}function SD(e){Rn(1,arguments);var t=vn(e),n=t.getMonth();return n}function v1(e){Rn(1,arguments);var t=vn(e),n=t.getFullYear();return n}function sr(e,t){Rn(2,arguments);var n=kn(t);return So(e,-n)}function zr(e,t){if(Rn(2,arguments),!t||typeof t!="object")return new Date(NaN);var n="years"in t?kn(t.years):0,s="months"in t?kn(t.months):0,a="weeks"in t?kn(t.weeks):0,o="days"in t?kn(t.days):0,i="hours"in t?kn(t.hours):0,l="minutes"in t?kn(t.minutes):0,r="seconds"in t?kn(t.seconds):0,c=sr(vn(e),s+n*12),u=xo(c,o+a*7),d=l+i*60,h=r+d*60,g=h*1e3,f=new Date(u.getTime()-g);return f}function AD(e){var t=e.start,n=e.end;Rn(1,arguments);var s=vn(t),a=vn(n);if(!no(s))throw new RangeError("Start Date is invalid");if(!no(a))throw new RangeError("End Date is invalid");var o={years:0,months:0,days:0,hours:0,minutes:0,seconds:0},i=ff(s,a);o.years=Math.abs(vD(s,a));var l=zr(s,{years:i*o.years});o.months=Math.abs(fR(l,a));var r=zr(l,{months:i*o.months});o.days=Math.abs(bS(r,a));var c=zr(r,{days:i*o.days});o.hours=Math.abs(gD(c,a));var u=zr(c,{hours:i*o.hours});o.minutes=Math.abs(dd(u,a));var d=zr(u,{minutes:i*o.minutes});return o.seconds=Math.abs(NS(d,a)),o}function x0(e,t){Rn(2,arguments);var n=vn(e),s=vn(t);return n.getTime()>s.getTime()}function w0(e,t){Rn(2,arguments);var n=vn(e),s=vn(t);return n.getTime()<s.getTime()}function $0(e){return Rn(1,arguments),vn(e).getDay()===1}function Nf(e,t){Rn(2,arguments);var n=vn(e),s=vn(t);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function Ld(e,t){Rn(2,arguments);var n=vn(e).getTime(),s=vn(t.start).getTime(),a=vn(t.end).getTime();if(!(s<=a))throw new RangeError("Invalid interval");return n>=s&&n<=a}var M0=36e5,L0=6e4,yD=2,Iu={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ID=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,CD=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ND=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Wg(e,t){Rn(1,arguments);var n={},s=n.additionalDigits==null?yD:kn(n.additionalDigits);if(s!==2&&s!==1&&s!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var a=OD(e),o;if(a.date){var i=RD(a.date,s);o=xD(i.restDateString,i.year)}if(isNaN(o)||!o)return new Date(NaN);var l=o.getTime(),r=0,c;if(a.time&&(r=wD(a.time),isNaN(r)||r===null))return new Date(NaN);if(a.timezone){if(c=$D(a.timezone),isNaN(c))return new Date(NaN)}else{var u=new Date(l+r),d=new Date(0);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return new Date(l+r+c)}function OD(e){var t={},n=e.split(Iu.dateTimeDelimiter),s;if(n.length>2)return t;if(/:/.test(n[0])?(t.date=null,s=n[0]):(t.date=n[0],s=n[1],Iu.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Iu.timeZoneDelimiter)[0],s=e.substr(t.date.length,e.length))),s){var a=Iu.timezone.exec(s);a?(t.time=s.replace(a[1],""),t.timezone=a[1]):t.time=s}return t}function RD(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(n);if(!s)return{year:null};var a=s[1]&&parseInt(s[1]),o=s[2]&&parseInt(s[2]);return{year:o==null?a:o*100,restDateString:e.slice((s[1]||s[2]).length)}}function xD(e,t){if(t===null)return null;var n=e.match(ID);if(!n)return null;var s=!!n[4],a=Yr(n[1]),o=Yr(n[2])-1,i=Yr(n[3]),l=Yr(n[4]),r=Yr(n[5])-1;if(s)return kD(t,l,r)?MD(t,l,r):new Date(NaN);var c=new Date(0);return!DD(t,o,i)||!PD(t,a)?new Date(NaN):(c.setUTCFullYear(t,o,Math.max(a,i)),c)}function Yr(e){return e?parseInt(e):1}function wD(e){var t=e.match(CD);if(!t)return null;var n=th(t[1]),s=th(t[2]),a=th(t[3]);return BD(n,s,a)?n*M0+s*L0+a*1e3:NaN}function th(e){return e&&parseFloat(e.replace(",","."))||0}function $D(e){if(e==="Z")return 0;var t=e.match(ND);if(!t)return 0;var n=t[1]==="+"?-1:1,s=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return UD(s,a)?n*(s*M0+a*L0):NaN}function MD(e,t,n){var s=new Date(0);s.setUTCFullYear(e,0,4);var a=s.getUTCDay()||7,o=(t-1)*7+n+1-a;return s.setUTCDate(s.getUTCDate()+o),s}var LD=[31,null,31,30,31,30,31,31,30,31,30,31];function D0(e){return e%400===0||e%4===0&&e%100}function DD(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(LD[t]||(D0(e)?29:28))}function PD(e,t){return t>=1&&t<=(D0(e)?366:365)}function kD(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function BD(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function UD(e,t){return t>=0&&t<=59}function P0(e,t){Rn(2,arguments);var n=vn(e),s=kn(t),a=n.getFullYear(),o=n.getDate(),i=new Date(0);i.setFullYear(a,s,15),i.setHours(0,0,0,0);var l=TD(i);return n.setMonth(s,Math.min(o,l)),n}function FD(e,t){Rn(2,arguments);var n=vn(e),s=kn(t);return n.setHours(s),n}function GD(e,t){Rn(2,arguments);var n=vn(e),s=kn(t);return n.setMinutes(s),n}function VD(e,t){Rn(2,arguments);var n=vn(e),s=kn(t);return n.setSeconds(s),n}function HD(e,t){Rn(2,arguments);var n=vn(e),s=kn(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(s),n)}function k0(e,t){Rn(2,arguments);var n=kn(t);return Hg(e,-n)}const WD=[{id:1,label:"M"},{id:2,label:"T"},{id:3,label:"W"},{id:4,label:"T"},{id:5,label:"F"},{id:6,label:"S"},{id:7,label:"S"}],B0=[{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_7_DAYS",value:"last7days"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_30_DAYS",value:"last30days"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_3_MONTHS",value:"last3months"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_6_MONTHS",value:"last6months"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.LAST_YEAR",value:"lastYear"},{label:"DATE_PICKER.DATE_RANGE_OPTIONS.CUSTOM_RANGE",value:"custom"}],zD={LAST_7_DAYS:"last7days",LAST_30_DAYS:"last30days",CUSTOM_RANGE:"custom"},nu={START_CALENDAR:"start",END_CALENDAR:"end"},pp={WEEK:"week",MONTH:"month",YEAR:"year"},YD=e=>Yn(e,"MMMM"),U0=e=>Yn(e,"yyyy"),E1=()=>{const s=new Date(2222,11,15);return new Intl.DateTimeFormat(navigator.language).format(s).replace("2222","yyyy").replace("12","MM").replace("15","dd")},jD=(e,t)=>Array.from({length:Math.ceil(e.length/t)},(n,s)=>e.slice(s*t,s*t+t)),KD=(e,t=1)=>{const n=Wo(e),s=R0(n,{weekStartsOn:t}),a=Mc(s,41);return jD(ED({start:s,end:a}),7)},XD=(e,t,n,s,a)=>{const i={month:{prev:sr,next:So},year:{prev:k0,next:Hg}}[a][s];if(e==="start")return{start:i(t,1),end:n};const l=i(n,1);return{start:t,end:l}},qD=(e,t)=>t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear(),ZD=(e,t)=>Nf(e,t),QD=e=>{const t=OS(e);return e.getDate()===t.getDate()},nh=(e,t,n)=>{if(!t||!n)return!1;let s=Cs(t),a=Cs(n);return s>a&&([s,a]=[a,s]),KN(e,s)||Ld(e,{start:s,end:a})},JD=(e,t,n,s)=>n&&s&&t<=s?Ld(e,{start:t,end:s}):!1,eP=(e,t,n,s)=>{if(t&&!n&&s){const a=Mc(e,1);return Ld(a,{start:t,end:s})}if(t&&n){const a=Mc(e,1);return Ld(a,{start:t,end:n})}return!1},tP=(e,t)=>({last7days:()=>({start:Cs(xo(t,6)),end:Ia(t)}),last30days:()=>({start:Cs(xo(t,29)),end:Ia(t)}),last3months:()=>({start:Cs(sr(t,3)),end:Ia(t)}),last6months:()=>({start:Cs(sr(t,6)),end:Ia(t)}),lastYear:()=>({start:Cs(sr(t,12)),end:Ia(t)}),custom:()=>({start:t,end:t})}[e]||(()=>({start:t,end:t})))(),nP={class:"text-sm font-medium text-n-slate-12"},sP={class:"text-sm font-medium text-n-slate-11"},aP={__name:"DatePickerButton",props:{selectedStartDate:Date,selectedEndDate:Date,selectedRange:{type:String,default:""}},emits:["open"],setup(e,{emit:t}){const n=e,s=t,a=y(()=>{const l=n.selectedStartDate,r=n.selectedEndDate;if(!no(l)||!no(r))return"Select a date range";const c=lm(l,r)?"MMM d":"MMM d yyyy";return lm(l,new Date)&&lm(r,new Date)?`${Yn(l,"MMM d")} - ${Yn(r,"MMM d")}`:`${Yn(l,c)} - ${Yn(r,c)}`}),o=y(()=>B0.find(l=>l.value===n.selectedRange).label),i=()=>{s("open")};return(l,r)=>{const c=W("fluent-icon");return p(),E("button",{class:"inline-flex relative items-center rounded-lg gap-2 py-1.5 px-3 h-8 bg-n-alpha-2 hover:bg-n-alpha-1 active:bg-n-alpha-1",onClick:i},[S(c,{class:"text-n-slate-12",icon:"calendar",size:"16"}),m("span",nP,I(l.$t(o.value)),1),m("span",sP,I(a.value),1),S(c,{class:"text-n-slate-12",icon:"chevron-down",size:"14"})])}}},oP={class:"h-[82px] flex flex-col items-start px-5 gap-1.5 pt-4 w-full"},iP={class:"text-sm font-medium text-n-slate-12"},lP=["placeholder","disabled"],rP={__name:"CalendarDateInput",props:{calendarType:{type:String,default:""},dateValue:Date,compareDate:Date,isDisabled:Boolean},emits:["update","validate","error"],setup(e,{emit:t}){const n=e,s=t,{START_CALENDAR:a,END_CALENDAR:o}=nu,i=y(()=>{var c;return(c=E1())==null?void 0:c.toUpperCase()}),l=y({get:()=>{var c;return((c=n.dateValue)==null?void 0:c.toLocaleDateString(navigator.language))||""},set:c=>{const u=E1(),d=lc(c,u,new Date);no(d)&&s("update",d)}}),r=()=>{if(!no(n.dateValue)){s("error",`Please enter the date in valid format: ${i.value}`);return}const{calendarType:c,compareDate:u,dateValue:d}=n,h=c===a,g=c===o;u&&h&&x0(d,u)?s("error","Start date must be before the end date."):u&&g&&w0(d,u)?s("error","End date must be after the start date."):s("validate",d)};return(c,u)=>(p(),E("div",oP,[m("span",iP,I(e.calendarType===C(a)?c.$t("DATE_PICKER.DATE_RANGE_INPUT.START"):c.$t("DATE_PICKER.DATE_RANGE_INPUT.END")),1),re(m("input",{"onUpdate:modelValue":u[0]||(u[0]=d=>l.value=d),type:"text",class:"!text-sm !mb-0 disabled:!outline-n-strong",placeholder:i.value,disabled:e.isDisabled,onKeypress:wn(r,["enter"])},null,40,lP),[[gt,l.value]])]))}},cP={class:"w-[200px] flex flex-col items-start"},uP={class:"w-full px-5 py-4 text-sm font-medium capitalize text-start text-n-slate-12"},dP={class:"flex flex-col items-start w-full"},pP=["onClick"],mP={__name:"CalendarDateRange",props:{selectedRange:{type:String,default:""}},emits:["setRange"],setup(e,{emit:t}){const n=t,s=a=>{n("setRange",a)};return(a,o)=>(p(),E("div",cP,[m("h4",uP,I(a.$t("DATE_PICKER.DATE_RANGE_OPTIONS.TITLE")),1),m("div",dP,[(p(!0),E(ue,null,Ae(C(B0),i=>(p(),E("button",{key:i.label,class:ae(["w-full px-5 py-3 text-sm font-medium truncate border-none rounded-none text-start hover:bg-n-alpha-2 dark:hover:bg-n-solid-3",i.value===e.selectedRange?"text-n-slate-12 bg-n-alpha-1 dark:bg-n-solid-active":"text-n-slate-12"]),onClick:l=>s(i)},I(a.$t(i.label)),11,pP))),128))])]))}},hP={class:"flex items-start justify-between w-full h-9"},fP={class:"flex items-center gap-1"},zg={__name:"CalendarAction",props:{calendarType:{type:String,default:"start"},firstButtonLabel:{type:String,default:""},buttonLabel:{type:String,default:""},viewMode:{type:String,default:""}},emits:["prev","next","setView"],setup(e,{emit:t}){const n=t,{YEAR:s}=pp,a=l=>{n("prev",l)},o=l=>{n("next",l)},i=(l,r)=>{n("setView",l,r)};return(l,r)=>(p(),E("div",hP,[S(te,{slate:"",ghost:"",xs:"",icon:"i-lucide-chevron-left",class:"rtl:rotate-180",onClick:r[0]||(r[0]=c=>a(e.calendarType))}),m("div",fP,[e.firstButtonLabel?(p(),E("button",{key:0,class:"p-0 text-sm font-medium text-center text-n-slate-12 hover:text-n-brand",onClick:r[1]||(r[1]=c=>i(e.calendarType,e.viewMode))},I(e.firstButtonLabel),1)):$("",!0),e.buttonLabel?(p(),E("button",{key:1,class:ae(["p-0 text-sm font-medium text-center text-n-slate-12",{"hover:text-n-brand":e.viewMode}]),onClick:r[2]||(r[2]=c=>i(e.calendarType,C(s)))},I(e.buttonLabel),3)):$("",!0)]),S(te,{slate:"",ghost:"",xs:"",icon:"i-lucide-chevron-right",class:"rtl:rotate-180",onClick:r[3]||(r[3]=c=>o(e.calendarType))})]))}},gP={class:"flex flex-col w-full gap-2 max-h-[312px]"},_P={class:"grid grid-cols-2 gap-x-3 gap-y-2 w-full auto-rows-[47px]"},vP=["onClick"],EP={__name:"CalendarYear",props:{calendarType:{type:String,default:"start"},startCurrentDate:Date,endCurrentDate:Date},emits:["selectYear"],setup(e,{emit:t}){const n=e,s=t,{START_CALENDAR:a}=nu,i=j((f=>{const b=v1(f);return b-b%10})(n.calendarType===a?n.startCurrentDate:n.endCurrentDate)),l=y(()=>Array.from({length:10},(f,b)=>i.value+b)),r=y(()=>l.value[0]),c=y(()=>l.value[l.value.length-1]),u=y(()=>{const f=n.calendarType===a?n.startCurrentDate:n.endCurrentDate;return v1(f)}),d=()=>{i.value=k0(new Date(i.value,0,1),10).getFullYear()},h=()=>{i.value=Hg(new Date(i.value,0,1),10).getFullYear()},g=f=>{s("selectYear",f)};return(f,b)=>(p(),E("div",gP,[S(zg,{"calendar-type":e.calendarType,"button-label":`${r.value} - ${c.value}`,onPrev:d,onNext:h},null,8,["calendar-type","button-label"]),m("div",_P,[(p(!0),E(ue,null,Ae(l.value,A=>(p(),E("button",{key:A,class:ae(["p-2 text-sm font-medium text-center text-n-slate-12 w-[144px] h-10 rounded-lg py-2.5 px-2",{"bg-n-brand text-white hover:bg-n-blue-10":A===u.value,"hover:bg-n-alpha-2 dark:hover:bg-n-solid-3":A!==u.value}]),onClick:v=>g(A)},I(A),11,vP))),128))])]))}},bP={class:"flex flex-col w-full gap-2 max-h-[312px]"},TP={class:"grid w-full grid-cols-3 gap-x-3 gap-y-2 auto-rows-[61px]"},SP=["onClick"],AP={__name:"CalendarMonth",props:{calendarType:{type:String,default:"start"},startCurrentDate:Date,endCurrentDate:Date},emits:["selectMonth","prev","next","setView"],setup(e,{emit:t}){const n=e,s=t,{START_CALENDAR:a}=nu,{MONTH:o,YEAR:i}=pp,l=Array.from({length:12},(g,f)=>Yn(P0(Wo(new Date),f),"MMM")),r=y(()=>{const g=n.calendarType===a?n.startCurrentDate:n.endCurrentDate;return SD(g)}),c=(g,f)=>{s("setView",g,f)},u=()=>{s("prev")},d=()=>{s("next")},h=g=>{s("selectMonth",g)};return(g,f)=>(p(),E("div",bP,[S(zg,{"view-mode":C(i),"calendar-type":e.calendarType,"button-label":C(U0)(e.calendarType===C(a)?e.startCurrentDate:e.endCurrentDate,C(o)),onSetView:c,onPrev:u,onNext:d},null,8,["view-mode","calendar-type","button-label"]),m("div",TP,[(p(!0),E(ue,null,Ae(C(l),(b,A)=>(p(),E("button",{key:A,class:ae(["p-2 text-sm font-medium text-center text-n-slate-12 w-[92px] h-10 rounded-lg py-2.5 px-2",{"bg-n-brand text-white hover:bg-n-blue-10":A===r.value,"hover:bg-n-alpha-2 dark:hover:bg-n-solid-3":A!==r.value}]),onClick:v=>h(A)},I(b),11,SP))),128))])]))}},yP={class:"max-w-md mx-auto grid grid-cols-7 gap-2"},IP={__name:"CalendarWeekLabel",setup(e){return(t,n)=>(p(),E("div",yP,[(p(!0),E(ue,null,Ae(C(WD),s=>(p(),E("div",{key:s.id,class:"flex items-center justify-center font-medium text-sm w-9 h-7 py-1.5 px-2"},I(s.label),1))),128))]))}},CP={class:"flex flex-col w-full gap-2 max-h-[312px]"},NP=["onMouseenter","onClick"],OP={key:0,class:"absolute bottom-0 w-6 h-8 ltr:-right-4 rtl:-left-4 bg-n-blue-4 dark:bg-n-blue-5 -z-10"},RP={__name:"CalendarWeek",props:{calendarType:{type:String,default:"start"},currentDate:Date,startCurrentDate:Date,endCurrentDate:Date,selectedStartDate:Date,selectingEndDate:Boolean,selectedEndDate:Date,hoveredEndDate:Date},emits:["updateHoveredEndDate","selectDate","prev","next","setView"],setup(e,{emit:t}){const n=e,s=t,{START_CALENDAR:a}=nu,{MONTH:o}=pp,i=T=>{s("updateHoveredEndDate",T)},l=T=>{s("selectDate",T)},r=()=>{s("prev")},c=()=>{s("next")},u=(T,_)=>{s("setView",T,_)},d=T=>KD(T===a?n.startCurrentDate:n.endCurrentDate),h=T=>nh(T,n.selectedStartDate,n.selectedStartDate)||nh(T,n.selectedEndDate,n.selectedEndDate),g=T=>nh(T,n.selectedStartDate,n.selectedEndDate),f=T=>ZD(T,n.calendarType===a?n.startCurrentDate:n.endCurrentDate),b=T=>JD(T,n.selectedStartDate,n.selectingEndDate,n.hoveredEndDate),A=T=>eP(T,n.selectedStartDate,n.selectedEndDate,n.hoveredEndDate),v=T=>({"text-n-slate-10 pointer-events-none":!f(T),"text-n-slate-12 hover:text-n-slate-12 hover:bg-n-blue-6 dark:hover:bg-n-blue-7":f(T),"bg-n-brand text-white":h(T)&&f(T),"bg-n-blue-4 dark:bg-n-blue-5":(g(T)||b(T))&&!h(T)&&f(T),"outline outline-1 outline-n-blue-8 -outline-offset-1 !text-n-blue-text":qD(n.currentDate,T)&&!h(T)});return(T,_)=>(p(),E("div",CP,[S(zg,{"view-mode":C(o),"calendar-type":e.calendarType,"first-button-label":C(YD)(e.calendarType===C(a)?e.startCurrentDate:e.endCurrentDate),"button-label":C(U0)(e.calendarType===C(a)?e.startCurrentDate:e.endCurrentDate),onPrev:r,onNext:c,onSetView:u},null,8,["view-mode","calendar-type","first-button-label","button-label"]),S(IP),(p(!0),E(ue,null,Ae(d(e.calendarType),N=>(p(),E("div",{key:N[0].getTime(),class:"grid max-w-md grid-cols-7 gap-2 mx-auto overflow-hidden rounded-lg"},[(p(!0),E(ue,null,Ae(N,R=>(p(),E("div",{key:R.getTime(),class:ae(["flex relative items-center justify-center w-9 h-8 py-1.5 px-2 font-medium text-sm rounded-lg cursor-pointer",v(R)]),onMouseenter:O=>i(R),onMouseleave:_[0]||(_[0]=O=>i(null)),onClick:O=>l(R)},[xe(I(R.getDate())+" ",1),(g(R)||b(R))&&A(R)&&!C(QD)(R)&&f(R)?(p(),E("span",OP)):$("",!0)],42,NP))),128))]))),128))]))}},xP={class:"h-[56px] flex justify-between gap-2 px-2 py-3 items-center"},wP={__name:"CalendarFooter",emits:["clear","change"],setup(e,{emit:t}){const n=t,s=()=>{n("clear")},a=()=>{n("change")};return(o,i)=>(p(),E("div",xP,[S(te,{slate:"",ghost:"",sm:"",label:o.$t("DATE_PICKER.CLEAR_BUTTON"),onClick:s},null,8,["label"]),S(te,{sm:"",ghost:"",label:o.$t("DATE_PICKER.APPLY_BUTTON"),onClick:a},null,8,["label"])]))}},$P={class:"relative font-inter"},MP={key:0,class:"flex absolute top-9 ltr:left-0 rtl:right-0 z-30 shadow-md select-none w-[880px] h-[490px] rounded-2xl bg-n-alpha-3 backdrop-blur-[100px] border-0 outline outline-1 outline-n-container"},LP={class:"flex flex-col w-[680px] ltr:border-l rtl:border-r border-n-strong"},DP={class:"flex justify-around h-fit"},PP={class:"py-5 border-b border-n-strong"},kP={__name:"DatePicker",emits:["dateRangeChanged"],setup(e,{emit:t}){const n=t,{LAST_7_DAYS:s,LAST_30_DAYS:a,CUSTOM_RANGE:o}=zD,{START_CALENDAR:i,END_CALENDAR:l}=nu,{WEEK:r,MONTH:c,YEAR:u}=pp,d=j(!1),h=j({start:r,end:r}),g=j(new Date),f=j(Cs(xo(g.value,6))),b=j(Ia(g.value)),A=j(Cs(f.value)),v=j(Nf(f.value,b.value)?Wo(So(b.value,1)):Wo(b.value)),T=j(!1),_=j(s),N=j(null),R=j(f.value),O=j(b.value);it(_,V=>{if(V!==o){const G=V===s||V===a;A.value=f.value,v.value=G&&Nf(f.value,b.value)?Wo(So(f.value,1)):b.value,T.value=!1}else T.value||(A.value=Cs(g.value))}),it([f,b],([V,G])=>{no(V)?R.value=V:R.value=f.value,no(G)?O.value=G:O.value=b.value},{immediate:!0}),it([A,v],([V,G],[K,se])=>{const ee=gR(G,V);V!==K&&(x0(V,G)||ee===0)&&(v.value=So(V,1)),G!==se&&(w0(G,V)||ee===0)&&(A.value=sr(G,1))},{immediate:!0,deep:!0});const x=V=>{_.value=V.value;const{start:G,end:K}=tP(V.value,g.value);f.value=G,b.value=K},w=(V,G,K=c)=>{const{start:se,end:ee}=XD(V,A.value,v.value,G,K);A.value=se,v.value=ee},D=V=>{_.value=o,!T.value||V<f.value?(f.value=V,b.value=null,T.value=!0):(b.value=V,T.value=!1)},M=(V,G)=>{_.value=o,h.value[V]=G},P=(V,G,K=c)=>{const se=G===i?A.value:v.value,ee=K===c?P0(Wo(se),V):HD(se,V);G===i?A.value=ee:v.value=ee,M(G,K===c?r:c)},U=(V,G)=>{G===i?(f.value=V,A.value=V):(b.value=V,v.value=V),T.value=!1},F=V=>{ne(V)},k=()=>{A.value=Cs(g.value),v.value=So(Cs(g.value),1),f.value=Cs(xo(g.value,6)),b.value=Ia(g.value),T.value=!1,_.value=s,h.value={start:r,end:r}},B=()=>{!no(f.value)||!no(b.value)?ne("Please select a valid time range"):(d.value=!1,n("dateRangeChanged",[f.value,b.value]))};return(V,G)=>(p(),E("div",$P,[S(aP,{"selected-start-date":f.value,"selected-end-date":b.value,"selected-range":_.value,onOpen:G[0]||(G[0]=K=>d.value=!d.value)},null,8,["selected-start-date","selected-end-date","selected-range"]),d.value?(p(),E("div",MP,[S(mP,{"selected-range":_.value,onSetRange:x},null,8,["selected-range"]),m("div",LP,[m("div",DP,[(p(!0),E(ue,null,Ae([C(i),C(l)],K=>(p(),E("div",{key:`${K}-calendar`,class:"flex flex-col items-center"},[S(rP,{"calendar-type":K,"date-value":K===C(i)?R.value:O.value,"compare-date":K===C(i)?O.value:R.value,"is-disabled":_.value!==C(o),onUpdate:se=>K===C(i)?R.value=se:O.value=se,onValidate:se=>U(se,K),onError:G[1]||(G[1]=se=>F(se))},null,8,["calendar-type","date-value","compare-date","is-disabled","onUpdate","onValidate"]),m("div",PP,[m("div",{class:ae(["flex flex-col items-center gap-2 px-5 min-w-[340px] max-h-[352px]",K===C(i)&&"ltr:border-r rtl:border-l border-n-strong"])},[h.value[K]===C(u)?(p(),L(EP,{key:0,"calendar-type":K,"start-current-date":A.value,"end-current-date":v.value,onSelectYear:se=>P(se,K,C(u))},null,8,["calendar-type","start-current-date","end-current-date","onSelectYear"])):h.value[K]===C(c)?(p(),L(AP,{key:1,"calendar-type":K,"start-current-date":A.value,"end-current-date":v.value,onSelectMonth:se=>P(se,K),onSetView:M,onPrev:se=>w(K,"prev",C(u)),onNext:se=>w(K,"next",C(u))},null,8,["calendar-type","start-current-date","end-current-date","onSelectMonth","onPrev","onNext"])):h.value[K]===C(r)?(p(),L(RP,{key:2,"calendar-type":K,"current-date":g.value,"start-current-date":A.value,"end-current-date":v.value,"selected-start-date":f.value,"selected-end-date":b.value,"selecting-end-date":T.value,"hovered-end-date":N.value,onUpdateHoveredEndDate:G[2]||(G[2]=se=>N.value=se),onSelectDate:D,onSetView:M,onPrev:se=>w(K,"prev"),onNext:se=>w(K,"next")},null,8,["calendar-type","current-date","start-current-date","end-current-date","selected-start-date","selected-end-date","selecting-end-date","hovered-end-date","onPrev","onNext"])):$("",!0)],2)])]))),128))]),S(wP,{onChange:B,onClear:k})])])):$("",!0)]))}},F0={Code:X$,ColorPicker:eM,ConfirmDeleteModal:b0,ConfirmModal:rM,DeleteModal:uM,DropdownItem:Gc,DropdownMenu:cp,FeatureToggle:_M,Input:IM,PhoneInput:z3,Label:Q3,LoadingState:Nr,Modal:Cr,ModalHeader:cD,Spinner:Ls,Tabs:uD,TabsItem:pD,DatePicker:kP,install(e){const t=Object.keys(this);t.pop();let n=t.length;for(;n--;)e.component(`woot${t[n]}`,this[t[n]])}};typeof window<"u"&&window.Vue&&window.Vue.use(F0);const Yo=(e,t)=>{const n=()=>{Dt.off(e,t)};return lt(()=>{Dt.on(e,t)}),Ar(n),n},BP=(e,t=[])=>{const{meta:{permissions:n=[]}={}}=e;return Eg(n,t)},UP=(e,t)=>{const{accountId:n}=e.params,a=[{permissions:[...qn,...Ms],path:"dashboard"},{permissions:[Xl],path:"contacts"},{permissions:[gO],path:"reports/overview"},{permissions:[ql],path:"portals"}].find(({permissions:o})=>Eg(o,t));return`accounts/${n}/${a?a.path:"dashboard"}`},FP=(e,t)=>{const n=`accounts/${e.params.accountId}/dashboard`;if(e.name==="account_suspended")return n;const s=vg(t,e.params.accountId);return BP(e,s)?null:UP(e,s)},GP=(e,t)=>{const n=fO(t,Number(e.params.accountId));return n?n.status==="active"?FP(e,t):e.name!=="account_suspended"?`accounts/${e.params.accountId}/suspended`:null:"app/login"},Yg=(e,t=!1,n=!0)=>{const s=["home","conversation_mentions","conversation_unattended","inbox_dashboard","label_conversations","team_conversations","folder_conversations","conversation_participating"],a=["inbox_conversation","conversation_through_mentions","conversation_through_unattended","conversation_through_inbox","conversations_through_label","conversations_through_team","conversations_through_folders","conversation_through_participating"];return[...t?s:[],...n?a:[]].includes(e)},VP=e=>{switch(e){case"inbox_conversation":return"home";case"conversation_through_mentions":return"conversation_mentions";case"conversation_through_unattended":return"conversation_unattended";case"conversations_through_label":return"label_conversations";case"conversations_through_team":return"team_conversations";case"conversations_through_folders":return"folder_conversations";case"conversation_through_participating":return"conversation_participating";case"conversation_through_inbox":return"inbox_dashboard";default:return null}},jg=(e,t=!1)=>{const n=["inbox_view"],s=["inbox_view_conversation"];return(t?[...n,...s]:s).includes(e)},G0=e=>e==="notifications_index",HP={class:"fixed z-50 top-2 left-2 group"},WP={class:"relative flex items-center justify-between w-full px-2 py-1 bg-n-amber-4 dark:bg-n-amber-8 rounded-lg shadow-lg"},zP={class:"px-2 text-xs font-medium tracking-wide text-n-amber-12"},YP=2e3,jP={__name:"NetworkNotification",setup(e){const{t}=be(),n=wt(),s=j(!navigator.onLine),a=j(!1),o=j(!1),i=j(!1);let l=null;const r=y(()=>o.value?t("NETWORK.NOTIFICATION.RECONNECTING"):i.value?t("NETWORK.NOTIFICATION.RECONNECT_SUCCESS"):t("NETWORK.NOTIFICATION.OFFLINE")),c=y(()=>i.value?"wifi":"wifi-off"),u=y(()=>!o.value&&!i.value),d=()=>{window.location.reload()},h=()=>{s.value=!1,i.value=!1,clearTimeout(l)},g=T=>Yg(T,!0)||jg(T,!0)||G0(T),f=()=>{a.value=!0,s.value=!0},b=()=>{a.value=!1,o.value=!1,i.value=!0,s.value=!0,l=setTimeout(h,YP)},A=()=>{g(n.name)?(o.value=!0,i.value=!1,s.value=!0):b()},v=T=>{T.type==="offline"?s.value=!0:T.type==="online"&&!a.value&&b()};return ur("online",v),ur("offline",v),Yo(un.WEBSOCKET_DISCONNECT,f),Yo(un.WEBSOCKET_RECONNECT_COMPLETED,b),Yo(un.WEBSOCKET_RECONNECT,A),Ar(()=>{clearTimeout(l)}),(T,_)=>{const N=W("fluent-icon");return p(),L(Ys,{name:"network-notification-fade",tag:"div"},{default:Y(()=>[re(m("div",HP,[m("div",WP,[S(N,{icon:c.value,class:"text-n-amber-12",size:"18"},null,8,["icon"]),m("span",zP,I(r.value),1),u.value?(p(),L(te,{key:0,ghost:"",sm:"",amber:"",icon:"i-lucide-refresh-ccw",title:T.$t("NETWORK.BUTTON.REFRESH"),class:"!text-n-amber-12 dark:!text-n-amber-9",onClick:d},null,8,["title"])):$("",!0),S(te,{ghost:"",sm:"",amber:"",icon:"i-lucide-x",class:"!text-n-amber-12 dark:!text-n-amber-9",onClick:h})])],512),[[rn,s.value]])]),_:1})}}},KP={components:{NextButton:te},props:{bannerMessage:{type:String,default:""},hrefLink:{type:String,default:""},hrefLinkText:{type:String,default:""},hasActionButton:{type:Boolean,default:!1},actionButtonVariant:{type:String,default:"faded"},actionButtonLabel:{type:String,default:""},actionButtonIcon:{type:String,default:"i-lucide-arrow-right"},colorScheme:{type:String,default:""},hasCloseButton:{type:Boolean,default:!1}},emits:["primaryAction","close"],computed:{bannerClasses(){const e=[this.colorScheme];return(this.hasActionButton||this.hasCloseButton)&&e.push("has-button"),e},getButtonColor(){return{primary:"blue",secondary:"blue",alert:"ruby",warning:"amber"}[this.colorScheme]||"blue"}},methods:{onClick(e){this.$emit("primaryAction",e)},onClickClose(e){this.$emit("close",e)}}},XP={class:"banner-message"},qP=["href"],ZP={class:"actions"};function QP(e,t,n,s,a,o){const i=W("NextButton");return p(),E("div",{class:ae(["flex items-center justify-center h-12 gap-4 px-4 py-3 text-xs text-white banner dark:text-white woot-banner",o.bannerClasses])},[m("span",XP,[xe(I(n.bannerMessage)+" ",1),n.hrefLink?(p(),E("a",{key:0,href:n.hrefLink,rel:"noopener noreferrer nofollow",target:"_blank"},I(n.hrefLinkText),9,qP)):$("",!0)]),m("div",ZP,[n.hasActionButton?(p(),L(i,{key:0,xs:"",icon:n.actionButtonIcon,variant:n.actionButtonVariant,color:o.getButtonColor,label:n.actionButtonLabel,onClick:o.onClick},null,8,["icon","variant","color","label","onClick"])):$("",!0),n.hasCloseButton?(p(),L(i,{key:1,xs:"",icon:"i-lucide-circle-x",color:o.getButtonColor,label:e.$t("GENERAL_SETTINGS.DISMISS"),onClick:o.onClickClose},null,8,["color","label","onClick"])):$("",!0)])],2)}const fr=De(KP,[["render",QP],["__scopeId","data-v-227ca4d0"]]);function za(){const e=pn(),t=y(()=>e.getCurrentRole.value);return{isAdmin:y(()=>t.value==="administrator")}}var Of={exports:{}};const JP="2.0.0",V0=256,ek=Number.MAX_SAFE_INTEGER||9007199254740991,tk=16,nk=V0-6,sk=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var mp={MAX_LENGTH:V0,MAX_SAFE_COMPONENT_LENGTH:tk,MAX_SAFE_BUILD_LENGTH:nk,MAX_SAFE_INTEGER:ek,RELEASE_TYPES:sk,SEMVER_SPEC_VERSION:JP,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},sh={};const ak=typeof process=="object"&&sh&&sh.NODE_DEBUG&&/\bsemver\b/i.test(sh.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var hp=ak;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:s,MAX_LENGTH:a}=mp,o=hp;t=e.exports={};const i=t.re=[],l=t.safeRe=[],r=t.src=[],c=t.t={};let u=0;const d="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",a],[d,s]],g=b=>{for(const[A,v]of h)b=b.split(`${A}*`).join(`${A}{0,${v}}`).split(`${A}+`).join(`${A}{1,${v}}`);return b},f=(b,A,v)=>{const T=g(A),_=u++;o(b,_,A),c[b]=_,r[_]=A,i[_]=new RegExp(A,v?"g":void 0),l[_]=new RegExp(T,v?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","\\d+"),f("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),f("MAINVERSION",`(${r[c.NUMERICIDENTIFIER]})\\.(${r[c.NUMERICIDENTIFIER]})\\.(${r[c.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${r[c.NUMERICIDENTIFIERLOOSE]})\\.(${r[c.NUMERICIDENTIFIERLOOSE]})\\.(${r[c.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${r[c.NUMERICIDENTIFIER]}|${r[c.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${r[c.NUMERICIDENTIFIERLOOSE]}|${r[c.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${r[c.PRERELEASEIDENTIFIER]}(?:\\.${r[c.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${r[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${r[c.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER",`${d}+`),f("BUILD",`(?:\\+(${r[c.BUILDIDENTIFIER]}(?:\\.${r[c.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${r[c.MAINVERSION]}${r[c.PRERELEASE]}?${r[c.BUILD]}?`),f("FULL",`^${r[c.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${r[c.MAINVERSIONLOOSE]}${r[c.PRERELEASELOOSE]}?${r[c.BUILD]}?`),f("LOOSE",`^${r[c.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${r[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${r[c.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${r[c.XRANGEIDENTIFIER]})(?:\\.(${r[c.XRANGEIDENTIFIER]})(?:\\.(${r[c.XRANGEIDENTIFIER]})(?:${r[c.PRERELEASE]})?${r[c.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${r[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${r[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${r[c.XRANGEIDENTIFIERLOOSE]})(?:${r[c.PRERELEASELOOSE]})?${r[c.BUILD]}?)?)?`),f("XRANGE",`^${r[c.GTLT]}\\s*${r[c.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${r[c.GTLT]}\\s*${r[c.XRANGEPLAINLOOSE]}$`),f("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),f("COERCE",`${r[c.COERCEPLAIN]}(?:$|[^\\d])`),f("COERCEFULL",r[c.COERCEPLAIN]+`(?:${r[c.PRERELEASE]})?(?:${r[c.BUILD]})?(?:$|[^\\d])`),f("COERCERTL",r[c.COERCE],!0),f("COERCERTLFULL",r[c.COERCEFULL],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${r[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",f("TILDE",`^${r[c.LONETILDE]}${r[c.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${r[c.LONETILDE]}${r[c.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${r[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",f("CARET",`^${r[c.LONECARET]}${r[c.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${r[c.LONECARET]}${r[c.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${r[c.GTLT]}\\s*(${r[c.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${r[c.GTLT]}\\s*(${r[c.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${r[c.GTLT]}\\s*(${r[c.LOOSEPLAIN]}|${r[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${r[c.XRANGEPLAIN]})\\s+-\\s+(${r[c.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${r[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${r[c.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Of,Of.exports);var su=Of.exports;const ok=Object.freeze({loose:!0}),ik=Object.freeze({}),lk=e=>e?typeof e!="object"?ok:e:ik;var Kg=lk;const b1=/^[0-9]+$/,H0=(e,t)=>{const n=b1.test(e),s=b1.test(t);return n&&s&&(e=+e,t=+t),e===t?0:n&&!s?-1:s&&!n?1:e<t?-1:1},rk=(e,t)=>H0(t,e);var W0={compareIdentifiers:H0,rcompareIdentifiers:rk};const Cu=hp,{MAX_LENGTH:T1,MAX_SAFE_INTEGER:Nu}=mp,{safeRe:S1,t:A1}=su,ck=Kg,{compareIdentifiers:Ll}=W0;let uk=class To{constructor(t,n){if(n=ck(n),t instanceof To){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>T1)throw new TypeError(`version is longer than ${T1} characters`);Cu("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const s=t.trim().match(n.loose?S1[A1.LOOSE]:S1[A1.FULL]);if(!s)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>Nu||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Nu||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Nu||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){const o=+a;if(o>=0&&o<Nu)return o}return a}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Cu("SemVer.compare",this.version,this.options,t),!(t instanceof To)){if(typeof t=="string"&&t===this.version)return 0;t=new To(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof To||(t=new To(t,this.options)),Ll(this.major,t.major)||Ll(this.minor,t.minor)||Ll(this.patch,t.patch)}comparePre(t){if(t instanceof To||(t=new To(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const s=this.prerelease[n],a=t.prerelease[n];if(Cu("prerelease compare",n,s,a),s===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(s===void 0)return-1;if(s===a)continue;return Ll(s,a)}while(++n)}compareBuild(t){t instanceof To||(t=new To(t,this.options));let n=0;do{const s=this.build[n],a=t.build[n];if(Cu("build compare",n,s,a),s===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(s===void 0)return-1;if(s===a)continue;return Ll(s,a)}while(++n)}inc(t,n,s){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,s),this.inc("pre",n,s);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,s),this.inc("pre",n,s);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const a=Number(s)?1:0;if(!n&&s===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[a];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&s===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(a)}}if(n){let o=[n,a];s===!1&&(o=[n]),Ll(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var oa=uk;const y1=oa,dk=(e,t,n=!1)=>{if(e instanceof y1)return e;try{return new y1(e,t)}catch(s){if(!n)return null;throw s}};var Or=dk;const pk=Or,mk=(e,t)=>{const n=pk(e,t);return n?n.version:null};var hk=mk;const fk=Or,gk=(e,t)=>{const n=fk(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};var _k=gk;const I1=oa,vk=(e,t,n,s,a)=>{typeof n=="string"&&(a=s,s=n,n=void 0);try{return new I1(e instanceof I1?e.version:e,n).inc(t,s,a).version}catch{return null}};var Ek=vk;const C1=Or,bk=(e,t)=>{const n=C1(e,null,!0),s=C1(t,null,!0),a=n.compare(s);if(a===0)return null;const o=a>0,i=o?n:s,l=o?s:n,r=!!i.prerelease.length;if(!!l.prerelease.length&&!r)return!l.patch&&!l.minor?"major":i.patch?"patch":i.minor?"minor":"major";const u=r?"pre":"";return n.major!==s.major?u+"major":n.minor!==s.minor?u+"minor":n.patch!==s.patch?u+"patch":"prerelease"};var Tk=bk;const Sk=oa,Ak=(e,t)=>new Sk(e,t).major;var yk=Ak;const Ik=oa,Ck=(e,t)=>new Ik(e,t).minor;var Nk=Ck;const Ok=oa,Rk=(e,t)=>new Ok(e,t).patch;var xk=Rk;const wk=Or,$k=(e,t)=>{const n=wk(e,t);return n&&n.prerelease.length?n.prerelease:null};var Mk=$k;const N1=oa,Lk=(e,t,n)=>new N1(e,n).compare(new N1(t,n));var mo=Lk;const Dk=mo,Pk=(e,t,n)=>Dk(t,e,n);var kk=Pk;const Bk=mo,Uk=(e,t)=>Bk(e,t,!0);var Fk=Uk;const O1=oa,Gk=(e,t,n)=>{const s=new O1(e,n),a=new O1(t,n);return s.compare(a)||s.compareBuild(a)};var Xg=Gk;const Vk=Xg,Hk=(e,t)=>e.sort((n,s)=>Vk(n,s,t));var Wk=Hk;const zk=Xg,Yk=(e,t)=>e.sort((n,s)=>zk(s,n,t));var jk=Yk;const Kk=mo,Xk=(e,t,n)=>Kk(e,t,n)>0;var fp=Xk;const qk=mo,Zk=(e,t,n)=>qk(e,t,n)<0;var qg=Zk;const Qk=mo,Jk=(e,t,n)=>Qk(e,t,n)===0;var z0=Jk;const e8=mo,t8=(e,t,n)=>e8(e,t,n)!==0;var Y0=t8;const n8=mo,s8=(e,t,n)=>n8(e,t,n)>=0;var Zg=s8;const a8=mo,o8=(e,t,n)=>a8(e,t,n)<=0;var Qg=o8;const i8=z0,l8=Y0,r8=fp,c8=Zg,u8=qg,d8=Qg,p8=(e,t,n,s)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return i8(e,n,s);case"!=":return l8(e,n,s);case">":return r8(e,n,s);case">=":return c8(e,n,s);case"<":return u8(e,n,s);case"<=":return d8(e,n,s);default:throw new TypeError(`Invalid operator: ${t}`)}};var j0=p8;const m8=oa,h8=Or,{safeRe:Ou,t:Ru}=su,f8=(e,t)=>{if(e instanceof m8)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let n=null;if(!t.rtl)n=e.match(t.includePrerelease?Ou[Ru.COERCEFULL]:Ou[Ru.COERCE]);else{const r=t.includePrerelease?Ou[Ru.COERCERTLFULL]:Ou[Ru.COERCERTL];let c;for(;(c=r.exec(e))&&(!n||n.index+n[0].length!==e.length);)(!n||c.index+c[0].length!==n.index+n[0].length)&&(n=c),r.lastIndex=c.index+c[1].length+c[2].length;r.lastIndex=-1}if(n===null)return null;const s=n[2],a=n[3]||"0",o=n[4]||"0",i=t.includePrerelease&&n[5]?`-${n[5]}`:"",l=t.includePrerelease&&n[6]?`+${n[6]}`:"";return h8(`${s}.${a}.${o}${i}${l}`,t)};var g8=f8;class _8{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(t,n)}return this}}var v8=_8,ah,R1;function ho(){if(R1)return ah;R1=1;const e=/\s+/g;class t{constructor(B,V){if(V=a(V),B instanceof t)return B.loose===!!V.loose&&B.includePrerelease===!!V.includePrerelease?B:new t(B.raw,V);if(B instanceof o)return this.raw=B.value,this.set=[[B]],this.formatted=void 0,this;if(this.options=V,this.loose=!!V.loose,this.includePrerelease=!!V.includePrerelease,this.raw=B.trim().replace(e," "),this.set=this.raw.split("||").map(G=>this.parseRange(G.trim())).filter(G=>G.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const G=this.set[0];if(this.set=this.set.filter(K=>!b(K[0])),this.set.length===0)this.set=[G];else if(this.set.length>1){for(const K of this.set)if(K.length===1&&A(K[0])){this.set=[K];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let B=0;B<this.set.length;B++){B>0&&(this.formatted+="||");const V=this.set[B];for(let G=0;G<V.length;G++)G>0&&(this.formatted+=" "),this.formatted+=V[G].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(B){const G=((this.options.includePrerelease&&g)|(this.options.loose&&f))+":"+B,K=s.get(G);if(K)return K;const se=this.options.loose,ee=se?r[c.HYPHENRANGELOOSE]:r[c.HYPHENRANGE];B=B.replace(ee,U(this.options.includePrerelease)),i("hyphen replace",B),B=B.replace(r[c.COMPARATORTRIM],u),i("comparator trim",B),B=B.replace(r[c.TILDETRIM],d),i("tilde trim",B),B=B.replace(r[c.CARETTRIM],h),i("caret trim",B);let X=B.split(" ").map(J=>T(J,this.options)).join(" ").split(/\s+/).map(J=>P(J,this.options));se&&(X=X.filter(J=>(i("loose invalid filter",J,this.options),!!J.match(r[c.COMPARATORLOOSE])))),i("range list",X);const z=new Map,H=X.map(J=>new o(J,this.options));for(const J of H){if(b(J))return[J];z.set(J.value,J)}z.size>1&&z.has("")&&z.delete("");const q=[...z.values()];return s.set(G,q),q}intersects(B,V){if(!(B instanceof t))throw new TypeError("a Range is required");return this.set.some(G=>v(G,V)&&B.set.some(K=>v(K,V)&&G.every(se=>K.every(ee=>se.intersects(ee,V)))))}test(B){if(!B)return!1;if(typeof B=="string")try{B=new l(B,this.options)}catch{return!1}for(let V=0;V<this.set.length;V++)if(F(this.set[V],B,this.options))return!0;return!1}}ah=t;const n=v8,s=new n,a=Kg,o=gp(),i=hp,l=oa,{safeRe:r,t:c,comparatorTrimReplace:u,tildeTrimReplace:d,caretTrimReplace:h}=su,{FLAG_INCLUDE_PRERELEASE:g,FLAG_LOOSE:f}=mp,b=k=>k.value==="<0.0.0-0",A=k=>k.value==="",v=(k,B)=>{let V=!0;const G=k.slice();let K=G.pop();for(;V&&G.length;)V=G.every(se=>K.intersects(se,B)),K=G.pop();return V},T=(k,B)=>(i("comp",k,B),k=O(k,B),i("caret",k),k=N(k,B),i("tildes",k),k=w(k,B),i("xrange",k),k=M(k,B),i("stars",k),k),_=k=>!k||k.toLowerCase()==="x"||k==="*",N=(k,B)=>k.trim().split(/\s+/).map(V=>R(V,B)).join(" "),R=(k,B)=>{const V=B.loose?r[c.TILDELOOSE]:r[c.TILDE];return k.replace(V,(G,K,se,ee,X)=>{i("tilde",k,G,K,se,ee,X);let z;return _(K)?z="":_(se)?z=`>=${K}.0.0 <${+K+1}.0.0-0`:_(ee)?z=`>=${K}.${se}.0 <${K}.${+se+1}.0-0`:X?(i("replaceTilde pr",X),z=`>=${K}.${se}.${ee}-${X} <${K}.${+se+1}.0-0`):z=`>=${K}.${se}.${ee} <${K}.${+se+1}.0-0`,i("tilde return",z),z})},O=(k,B)=>k.trim().split(/\s+/).map(V=>x(V,B)).join(" "),x=(k,B)=>{i("caret",k,B);const V=B.loose?r[c.CARETLOOSE]:r[c.CARET],G=B.includePrerelease?"-0":"";return k.replace(V,(K,se,ee,X,z)=>{i("caret",k,K,se,ee,X,z);let H;return _(se)?H="":_(ee)?H=`>=${se}.0.0${G} <${+se+1}.0.0-0`:_(X)?se==="0"?H=`>=${se}.${ee}.0${G} <${se}.${+ee+1}.0-0`:H=`>=${se}.${ee}.0${G} <${+se+1}.0.0-0`:z?(i("replaceCaret pr",z),se==="0"?ee==="0"?H=`>=${se}.${ee}.${X}-${z} <${se}.${ee}.${+X+1}-0`:H=`>=${se}.${ee}.${X}-${z} <${se}.${+ee+1}.0-0`:H=`>=${se}.${ee}.${X}-${z} <${+se+1}.0.0-0`):(i("no pr"),se==="0"?ee==="0"?H=`>=${se}.${ee}.${X}${G} <${se}.${ee}.${+X+1}-0`:H=`>=${se}.${ee}.${X}${G} <${se}.${+ee+1}.0-0`:H=`>=${se}.${ee}.${X} <${+se+1}.0.0-0`),i("caret return",H),H})},w=(k,B)=>(i("replaceXRanges",k,B),k.split(/\s+/).map(V=>D(V,B)).join(" ")),D=(k,B)=>{k=k.trim();const V=B.loose?r[c.XRANGELOOSE]:r[c.XRANGE];return k.replace(V,(G,K,se,ee,X,z)=>{i("xRange",k,G,K,se,ee,X,z);const H=_(se),q=H||_(ee),J=q||_(X),de=J;return K==="="&&de&&(K=""),z=B.includePrerelease?"-0":"",H?K===">"||K==="<"?G="<0.0.0-0":G="*":K&&de?(q&&(ee=0),X=0,K===">"?(K=">=",q?(se=+se+1,ee=0,X=0):(ee=+ee+1,X=0)):K==="<="&&(K="<",q?se=+se+1:ee=+ee+1),K==="<"&&(z="-0"),G=`${K+se}.${ee}.${X}${z}`):q?G=`>=${se}.0.0${z} <${+se+1}.0.0-0`:J&&(G=`>=${se}.${ee}.0${z} <${se}.${+ee+1}.0-0`),i("xRange return",G),G})},M=(k,B)=>(i("replaceStars",k,B),k.trim().replace(r[c.STAR],"")),P=(k,B)=>(i("replaceGTE0",k,B),k.trim().replace(r[B.includePrerelease?c.GTE0PRE:c.GTE0],"")),U=k=>(B,V,G,K,se,ee,X,z,H,q,J,de)=>(_(G)?V="":_(K)?V=`>=${G}.0.0${k?"-0":""}`:_(se)?V=`>=${G}.${K}.0${k?"-0":""}`:ee?V=`>=${V}`:V=`>=${V}${k?"-0":""}`,_(H)?z="":_(q)?z=`<${+H+1}.0.0-0`:_(J)?z=`<${H}.${+q+1}.0-0`:de?z=`<=${H}.${q}.${J}-${de}`:k?z=`<${H}.${q}.${+J+1}-0`:z=`<=${z}`,`${V} ${z}`.trim()),F=(k,B,V)=>{for(let G=0;G<k.length;G++)if(!k[G].test(B))return!1;if(B.prerelease.length&&!V.includePrerelease){for(let G=0;G<k.length;G++)if(i(k[G].semver),k[G].semver!==o.ANY&&k[G].semver.prerelease.length>0){const K=k[G].semver;if(K.major===B.major&&K.minor===B.minor&&K.patch===B.patch)return!0}return!1}return!0};return ah}var oh,x1;function gp(){if(x1)return oh;x1=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(u,d){if(d=n(d),u instanceof t){if(u.loose===!!d.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),i("comparator",u,d),this.options=d,this.loose=!!d.loose,this.parse(u),this.semver===e?this.value="":this.value=this.operator+this.semver.version,i("comp",this)}parse(u){const d=this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR],h=u.match(d);if(!h)throw new TypeError(`Invalid comparator: ${u}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new l(h[2],this.options.loose):this.semver=e}toString(){return this.value}test(u){if(i("Comparator.test",u,this.options.loose),this.semver===e||u===e)return!0;if(typeof u=="string")try{u=new l(u,this.options)}catch{return!1}return o(u,this.operator,this.semver,this.options)}intersects(u,d){if(!(u instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new r(u.value,d).test(this.value):u.operator===""?u.value===""?!0:new r(this.value,d).test(u.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||o(this.semver,"<",u.semver,d)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||o(this.semver,">",u.semver,d)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}oh=t;const n=Kg,{safeRe:s,t:a}=su,o=j0,i=hp,l=oa,r=ho();return oh}const E8=ho(),b8=(e,t,n)=>{try{t=new E8(t,n)}catch{return!1}return t.test(e)};var _p=b8;const T8=ho(),S8=(e,t)=>new T8(e,t).set.map(n=>n.map(s=>s.value).join(" ").trim().split(" "));var A8=S8;const y8=oa,I8=ho(),C8=(e,t,n)=>{let s=null,a=null,o=null;try{o=new I8(t,n)}catch{return null}return e.forEach(i=>{o.test(i)&&(!s||a.compare(i)===-1)&&(s=i,a=new y8(s,n))}),s};var N8=C8;const O8=oa,R8=ho(),x8=(e,t,n)=>{let s=null,a=null,o=null;try{o=new R8(t,n)}catch{return null}return e.forEach(i=>{o.test(i)&&(!s||a.compare(i)===1)&&(s=i,a=new O8(s,n))}),s};var w8=x8;const ih=oa,$8=ho(),w1=fp,M8=(e,t)=>{e=new $8(e,t);let n=new ih("0.0.0");if(e.test(n)||(n=new ih("0.0.0-0"),e.test(n)))return n;n=null;for(let s=0;s<e.set.length;++s){const a=e.set[s];let o=null;a.forEach(i=>{const l=new ih(i.semver.version);switch(i.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!o||w1(l,o))&&(o=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${i.operator}`)}}),o&&(!n||w1(n,o))&&(n=o)}return n&&e.test(n)?n:null};var L8=M8;const D8=ho(),P8=(e,t)=>{try{return new D8(e,t).range||"*"}catch{return null}};var k8=P8;const B8=oa,K0=gp(),{ANY:U8}=K0,F8=ho(),G8=_p,$1=fp,M1=qg,V8=Qg,H8=Zg,W8=(e,t,n,s)=>{e=new B8(e,s),t=new F8(t,s);let a,o,i,l,r;switch(n){case">":a=$1,o=V8,i=M1,l=">",r=">=";break;case"<":a=M1,o=H8,i=$1,l="<",r="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(G8(e,t,s))return!1;for(let c=0;c<t.set.length;++c){const u=t.set[c];let d=null,h=null;if(u.forEach(g=>{g.semver===U8&&(g=new K0(">=0.0.0")),d=d||g,h=h||g,a(g.semver,d.semver,s)?d=g:i(g.semver,h.semver,s)&&(h=g)}),d.operator===l||d.operator===r||(!h.operator||h.operator===l)&&o(e,h.semver))return!1;if(h.operator===r&&i(e,h.semver))return!1}return!0};var Jg=W8;const z8=Jg,Y8=(e,t,n)=>z8(e,t,">",n);var j8=Y8;const K8=Jg,X8=(e,t,n)=>K8(e,t,"<",n);var q8=X8;const L1=ho(),Z8=(e,t,n)=>(e=new L1(e,n),t=new L1(t,n),e.intersects(t,n));var Q8=Z8;const J8=_p,e4=mo;var t4=(e,t,n)=>{const s=[];let a=null,o=null;const i=e.sort((u,d)=>e4(u,d,n));for(const u of i)J8(u,t,n)?(o=u,a||(a=u)):(o&&s.push([a,o]),o=null,a=null);a&&s.push([a,null]);const l=[];for(const[u,d]of s)u===d?l.push(u):!d&&u===i[0]?l.push("*"):d?u===i[0]?l.push(`<=${d}`):l.push(`${u} - ${d}`):l.push(`>=${u}`);const r=l.join(" || "),c=typeof t.raw=="string"?t.raw:String(t);return r.length<c.length?r:t};const D1=ho(),e_=gp(),{ANY:lh}=e_,jr=_p,t_=mo,n4=(e,t,n={})=>{if(e===t)return!0;e=new D1(e,n),t=new D1(t,n);let s=!1;e:for(const a of e.set){for(const o of t.set){const i=a4(a,o,n);if(s=s||i!==null,i)continue e}if(s)return!1}return!0},s4=[new e_(">=0.0.0-0")],P1=[new e_(">=0.0.0")],a4=(e,t,n)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===lh){if(t.length===1&&t[0].semver===lh)return!0;n.includePrerelease?e=s4:e=P1}if(t.length===1&&t[0].semver===lh){if(n.includePrerelease)return!0;t=P1}const s=new Set;let a,o;for(const g of e)g.operator===">"||g.operator===">="?a=k1(a,g,n):g.operator==="<"||g.operator==="<="?o=B1(o,g,n):s.add(g.semver);if(s.size>1)return null;let i;if(a&&o){if(i=t_(a.semver,o.semver,n),i>0)return null;if(i===0&&(a.operator!==">="||o.operator!=="<="))return null}for(const g of s){if(a&&!jr(g,String(a),n)||o&&!jr(g,String(o),n))return null;for(const f of t)if(!jr(g,String(f),n))return!1;return!0}let l,r,c,u,d=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1,h=a&&!n.includePrerelease&&a.semver.prerelease.length?a.semver:!1;d&&d.prerelease.length===1&&o.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(const g of t){if(u=u||g.operator===">"||g.operator===">=",c=c||g.operator==="<"||g.operator==="<=",a){if(h&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===h.major&&g.semver.minor===h.minor&&g.semver.patch===h.patch&&(h=!1),g.operator===">"||g.operator===">="){if(l=k1(a,g,n),l===g&&l!==a)return!1}else if(a.operator===">="&&!jr(a.semver,String(g),n))return!1}if(o){if(d&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===d.major&&g.semver.minor===d.minor&&g.semver.patch===d.patch&&(d=!1),g.operator==="<"||g.operator==="<="){if(r=B1(o,g,n),r===g&&r!==o)return!1}else if(o.operator==="<="&&!jr(o.semver,String(g),n))return!1}if(!g.operator&&(o||a)&&i!==0)return!1}return!(a&&c&&!o&&i!==0||o&&u&&!a&&i!==0||h||d)},k1=(e,t,n)=>{if(!e)return t;const s=t_(e.semver,t.semver,n);return s>0?e:s<0||t.operator===">"&&e.operator===">="?t:e},B1=(e,t,n)=>{if(!e)return t;const s=t_(e.semver,t.semver,n);return s<0?e:s>0||t.operator==="<"&&e.operator==="<="?t:e};var o4=n4;const rh=su,U1=mp,i4=oa,F1=W0,l4=Or,r4=hk,c4=_k,u4=Ek,d4=Tk,p4=yk,m4=Nk,h4=xk,f4=Mk,g4=mo,_4=kk,v4=Fk,E4=Xg,b4=Wk,T4=jk,S4=fp,A4=qg,y4=z0,I4=Y0,C4=Zg,N4=Qg,O4=j0,R4=g8,x4=gp(),w4=ho(),$4=_p,M4=A8,L4=N8,D4=w8,P4=L8,k4=k8,B4=Jg,U4=j8,F4=q8,G4=Q8,V4=t4,H4=o4;var W4={parse:l4,valid:r4,clean:c4,inc:u4,diff:d4,major:p4,minor:m4,patch:h4,prerelease:f4,compare:g4,rcompare:_4,compareLoose:v4,compareBuild:E4,sort:b4,rsort:T4,gt:S4,lt:A4,eq:y4,neq:I4,gte:C4,lte:N4,cmp:O4,coerce:R4,Comparator:x4,Range:w4,satisfies:$4,toComparators:M4,maxSatisfying:L4,minSatisfying:D4,minVersion:P4,validRange:k4,outside:B4,gtr:U4,ltr:F4,intersects:G4,simplifyRange:V4,subset:H4,SemVer:i4,re:rh.re,src:rh.src,tokens:rh.t,SEMVER_SPEC_VERSION:U1.SEMVER_SPEC_VERSION,RELEASE_TYPES:U1.RELEASE_TYPES,compareIdentifiers:F1.compareIdentifiers,rcompareIdentifiers:F1.rcompareIdentifiers};const Dd=mg(W4),z4=(e,t)=>Dd.valid(e)?Dd.lt(t,e):!1,Y4={components:{Banner:fr},props:{latestChatwootVersion:{type:String,default:""}},setup(){const{isAdmin:e}=za();return{isAdmin:e}},data(){return{userDismissedBanner:!1}},computed:{...mt({globalConfig:"globalConfig/get"}),updateAvailable(){return z4(this.latestChatwootVersion,this.globalConfig.appVersion)},bannerMessage(){return this.$t("GENERAL_SETTINGS.UPDATE_CHATWOOT",{latestChatwootVersion:this.latestChatwootVersion})},shouldShowBanner(){return!this.userDismissedBanner&&this.globalConfig.displayManifest&&this.updateAvailable&&!this.isVersionNotificationDismissed(this.latestChatwootVersion)&&this.isAdmin}},methods:{isVersionNotificationDismissed(e){return(ka.get(ao.DISMISSED_UPDATES)||[]).includes(e)},dismissUpdateBanner(){let e=ka.get(ao.DISMISSED_UPDATES)||[];e instanceof Array?e.push(this.latestChatwootVersion):e=[this.latestChatwootVersion],ka.set(ao.DISMISSED_UPDATES,e),this.userDismissedBanner=!0}}};function j4(e,t,n,s,a,o){const i=W("Banner");return o.shouldShowBanner?(p(),L(i,{key:0,"color-scheme":"primary","banner-message":o.bannerMessage,"href-link":"https://github.com/chatwoot/chatwoot/releases","href-link-text":e.$t("GENERAL_SETTINGS.LEARN_MORE"),"has-close-button":"",onClose:o.dismissUpdateBanner},null,8,["banner-message","href-link-text","onClose"])):$("",!0)}const K4=De(Y4,[["render",j4]]),G1={status:null,endsOn:null},X4={components:{Banner:fr},setup(){const{isAdmin:e}=za(),{accountId:t}=ln();return{accountId:t,isAdmin:e}},computed:{...mt({isOnChatwootCloud:"globalConfig/isOnChatwootCloud",getAccount:"accounts/getAccount"}),bannerMessage(){return this.$t("GENERAL_SETTINGS.PAYMENT_PENDING")},actionButtonMessage(){return this.$t("GENERAL_SETTINGS.OPEN_BILLING")},shouldShowBanner(){return!this.isOnChatwootCloud||!this.isAdmin?!1:this.isPaymentPending()}},methods:{routeToBilling(){this.$router.push({name:"billing_settings_index",params:{accountId:this.accountId}})},isPaymentPending(){const{status:e,endsOn:t}=this.getSubscriptionInfo();return!!(e&&t&&e==="past_due"&&t<new Date)},getSubscriptionInfo(){const e=this.getAccount(this.accountId);if(!e)return G1;const{custom_attributes:t}=e;if(!t)return G1;const{subscription_status:n,subscription_ends_on:s}=t;return{status:n,endsOn:new Date(s)}}}};function q4(e,t,n,s,a,o){const i=W("Banner");return o.shouldShowBanner?(p(),L(i,{key:0,"color-scheme":"alert","banner-message":o.bannerMessage,"action-button-label":o.actionButtonMessage,"has-action-button":"",onPrimaryAction:o.routeToBilling},null,8,["banner-message","action-button-label","onPrimaryAction"])):$("",!0)}const Z4=De(X4,[["render",q4]]),Q4={components:{Banner:fr},computed:{...mt({currentUser:"getCurrentUser"}),bannerMessage(){return this.$t("APP_GLOBAL.EMAIL_VERIFICATION_PENDING")},actionButtonMessage(){return this.$t("APP_GLOBAL.RESEND_VERIFICATION_MAIL")},shouldShowBanner(){return!this.currentUser.confirmed}},methods:{resendVerificationEmail(){this.$store.dispatch("resendConfirmation"),ne(this.$t("APP_GLOBAL.EMAIL_VERIFICATION_SENT"))}}};function J4(e,t,n,s,a,o){const i=W("Banner");return o.shouldShowBanner?(p(),L(i,{key:0,"color-scheme":"alert","banner-message":o.bannerMessage,"action-button-label":o.actionButtonMessage,"action-button-icon":"i-lucide-mail","has-action-button":"",onPrimaryAction:o.resendVerificationEmail},null,8,["banner-message","action-button-label","onPrimaryAction"])):$("",!0)}const e5=De(Q4,[["render",J4]]);function X0(){return{isImpersonating:y(()=>cc.get(_O.IMPERSONATION_USER))}}const{isImpersonating:t5}=X0();class n5 extends XN{constructor(n,s){const{websocketURL:a=""}=window.chatwootConfig||{};super(n,s,a);Qt(this,"onReconnect",()=>{Dt.emit(un.WEBSOCKET_RECONNECT)});Qt(this,"onDisconnected",()=>{Dt.emit(un.WEBSOCKET_DISCONNECT)});Qt(this,"isAValidEvent",n=>this.app.$store.getters.getCurrentAccountId===n.account_id);Qt(this,"onMessageUpdated",n=>{this.app.$store.dispatch("updateMessage",n)});Qt(this,"onPresenceUpdate",n=>{t5.value||(this.app.$store.dispatch("contacts/updatePresence",n.contacts),this.app.$store.dispatch("agents/updatePresence",n.users),this.app.$store.dispatch("setCurrentUserAvailability",n.users))});Qt(this,"onConversationContactChange",n=>{const{meta:s={},id:a}=n,{sender:o}=s||{};a&&this.app.$store.dispatch("updateConversationContact",{conversationId:a,...o})});Qt(this,"onAssigneeChanged",n=>{const{id:s}=n;s&&this.app.$store.dispatch("updateConversation",n),this.fetchConversationStats()});Qt(this,"onConversationCreated",n=>{this.app.$store.dispatch("addConversation",n),this.fetchConversationStats()});Qt(this,"onConversationRead",n=>{this.app.$store.dispatch("updateConversation",n)});Qt(this,"onLogout",()=>hl.logout());Qt(this,"onMessageCreated",n=>{const{conversation:{last_activity_at:s},conversation_id:a}=n;vO.onNewMessage(n),this.app.$store.dispatch("addMessage",n),this.app.$store.dispatch("updateConversationLastActivity",{lastActivityAt:s,conversationId:a})});Qt(this,"onReload",()=>window.location.reload());Qt(this,"onStatusChange",n=>{this.app.$store.dispatch("updateConversation",n),this.fetchConversationStats()});Qt(this,"onConversationUpdated",n=>{this.app.$store.dispatch("updateConversation",n),this.fetchConversationStats()});Qt(this,"onTypingOn",({conversation:n,user:s})=>{const a=n.id;this.clearTimer(a),this.app.$store.dispatch("conversationTypingStatus/create",{conversationId:a,user:s}),this.initTimer({conversation:n,user:s})});Qt(this,"onTypingOff",({conversation:n,user:s})=>{const a=n.id;this.clearTimer(a),this.app.$store.dispatch("conversationTypingStatus/destroy",{conversationId:a,user:s})});Qt(this,"onConversationMentioned",n=>{this.app.$store.dispatch("addMentions",n)});Qt(this,"clearTimer",n=>{const s=this.CancelTyping[n];s&&(clearTimeout(s),this.CancelTyping[n]=null)});Qt(this,"initTimer",({conversation:n,user:s})=>{const a=n.id;this.CancelTyping[a]=setTimeout(()=>{this.onTypingOff({conversation:n,user:s})},3e4)});Qt(this,"fetchConversationStats",()=>{Dt.emit("fetch_conversation_stats")});Qt(this,"onContactDelete",n=>{this.app.$store.dispatch("contacts/deleteContactThroughConversations",n.id),this.fetchConversationStats()});Qt(this,"onContactUpdate",n=>{this.app.$store.dispatch("contacts/updateContact",n)});Qt(this,"onNotificationCreated",n=>{this.app.$store.dispatch("notifications/addNotification",n)});Qt(this,"onNotificationDeleted",n=>{this.app.$store.dispatch("notifications/deleteNotification",n)});Qt(this,"onNotificationUpdated",n=>{this.app.$store.dispatch("notifications/updateNotification",n)});Qt(this,"onCopilotMessageCreated",n=>{this.app.$store.dispatch("copilotMessages/upsert",n)});Qt(this,"onCacheInvalidate",n=>{const s=n.cache_keys;this.app.$store.dispatch("labels/revalidate",{newKey:s.label}),this.app.$store.dispatch("inboxes/revalidate",{newKey:s.inbox}),this.app.$store.dispatch("teams/revalidate",{newKey:s.team})});this.CancelTyping=[],this.events={"message.created":this.onMessageCreated,"message.updated":this.onMessageUpdated,"conversation.created":this.onConversationCreated,"conversation.status_changed":this.onStatusChange,"user:logout":this.onLogout,"page:reload":this.onReload,"assignee.changed":this.onAssigneeChanged,"conversation.typing_on":this.onTypingOn,"conversation.typing_off":this.onTypingOff,"conversation.contact_changed":this.onConversationContactChange,"presence.update":this.onPresenceUpdate,"contact.deleted":this.onContactDelete,"contact.updated":this.onContactUpdate,"conversation.mentioned":this.onConversationMentioned,"notification.created":this.onNotificationCreated,"notification.deleted":this.onNotificationDeleted,"notification.updated":this.onNotificationUpdated,"conversation.read":this.onConversationRead,"conversation.updated":this.onConversationUpdated,"account.cache_invalidated":this.onCacheInvalidate,"copilot.message.created":this.onCopilotMessageCreated}}}const s5={init(e,t){return new n5({$store:e},t)}},a5={props:{message:{type:String,default:""},action:{type:Object,default:()=>{}}},data(){return{toggleAfterTimeout:!1}},mounted(){},methods:{}},o5={class:"shadow-sm bg-n-slate-12 dark:bg-n-slate-7 rounded-lg items-center gap-3 inline-flex mb-2 max-w-[25rem] min-h-[1.875rem] min-w-[15rem] px-6 py-3 text-left"},i5={class:"text-sm font-medium text-white dark:text-white"},l5={key:0};function r5(e,t,n,s,a,o){const i=W("router-link");return p(),E("div",null,[m("div",o5,[m("div",i5,I(n.message),1),n.action?(p(),E("div",l5,[n.action.type=="link"?(p(),L(i,{key:0,to:n.action.to,class:"font-medium cursor-pointer select-none text-n-blue-10 hover:text-n-brand"},{default:Y(()=>[xe(I(n.action.message),1)]),_:1},8,["to"])):$("",!0)])):$("",!0)])])}const c5=De(a5,[["render",r5]]),u5={__name:"SnackbarContainer",props:{duration:{type:Number,default:2500}},setup(e){const t=e,{t:n}=be(),s=j([]),a=j(null),o=()=>{try{const l=a.value;l!=null&&l.matches(":popover-open")&&l.hidePopover(),l==null||l.showPopover()}catch{}},i=({message:l,action:r})=>{const c=r!=null&&r.usei18n?n(l):l,u=(r==null?void 0:r.duration)||t.duration;s.value.push({key:Date.now(),message:c,action:r}),Wt(o),setTimeout(()=>{s.value.shift()},u)};return lt(()=>{Dt.on("newToastMessage",i)}),ei(()=>{Dt.off("newToastMessage",i)}),(l,r)=>(p(),E("div",{ref_key:"snackbarContainer",ref:a,popover:"manual",class:"fixed top-4 left-1/2 -translate-x-1/2 max-w-[25rem] w-[calc(100%-2rem)] text-center bg-transparent border-0 p-0 m-0 outline-none overflow-visible"},[S(tS,{name:"toast-fade",tag:"div"},{default:Y(()=>[(p(!0),E(ue,null,Ae(s.value,c=>(p(),L(c5,{key:c.key,message:c.message,action:c.action},null,8,["message","action"]))),128))]),_:1})],512))}},V1=e=>{const t=ka.get(ao.COLOR_SCHEME)||"auto";t==="auto"&&e||t==="dark"?(document.body.classList.add("dark"),document.documentElement.style.setProperty("color-scheme","dark")):(document.body.classList.remove("dark"),document.documentElement.style.setProperty("color-scheme","light"))},H1=Object.freeze([{name:"conversation_actions"},{name:"macros"},{name:"conversation_info"},{name:"contact_attributes"},{name:"contact_notes"},{name:"previous_conversation"},{name:"conversation_participants"},{name:"linear_issues"},{name:"shopify_orders"}]),d5=Object.freeze([{name:"contact_attributes"},{name:"contact_labels"},{name:"previous_conversation"}]),vp=e=>e==null?void 0:e.toLowerCase().replace(" ","_").replace("-","_").replace("::","_"),p5=e=>y(()=>{const{conversation_sidebar_items_order:t}=e.value;if(!t)return[...H1];const n=[...t];return H1.forEach(s=>{n.find(a=>a.name===s.name)||n.push(s)}),n}),m5=e=>y(()=>{const{contact_sidebar_items_order:t}=e.value;return t||d5}),h5=(e,t,n)=>{n({[e]:!t.value[e]})},f5=(e,t,n)=>{if(!e)return;const s=vp(e);n({[`${s}_signature_enabled`]:t})},g5=(e,t,n)=>{if(!e)return;const s=vp(e);n({[`${s}_quoted_reply_enabled`]:t})},_5=(e,t)=>{if(!e)return!1;const n=vp(e);return t.value[`${n}_signature_enabled`]},v5=(e,t)=>{if(!e)return!1;const n=vp(e);return t.value[`${n}_quoted_reply_enabled`]},E5=(e,t)=>{const{editor_message_key:n,enter_to_send_enabled:s}=t.value||{};return n?n===e:e===(s?"enter":"cmd_enter")};function tn(){const e=pn(),t=rt(),n=y(()=>e.getUISettings.value),s=(a={})=>{t.dispatch("updateUISettings",{uiSettings:{...n.value,...a}})};return{uiSettings:n,updateUISettings:s,conversationSidebarItemsOrder:p5(n),contactSidebarItemsOrder:m5(n),isContactSidebarItemOpen:a=>!!n.value[a],toggleSidebarUIState:a=>h5(a,n,s),setSignatureFlagForInbox:(a,o)=>f5(a,o,s),fetchSignatureFlagFromUISettings:a=>_5(a,n),setQuotedReplyFlagForInbox:(a,o)=>g5(a,o,s),fetchQuotedReplyFlagFromUISettings:a=>v5(a,n),isEditorHotKeyEnabled:a=>E5(a,n)}}const Ep={SMALLER:"14px",SMALL:"15px",DEFAULT:"16px",LARGE:"18px",LARGER:"20px"},b5=Object.keys(Ep),T5=e=>`PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.OPTIONS.${e}`,S5=(e,t)=>({value:Ep[t],label:e(T5(t))}),A5=e=>{document.documentElement.style.setProperty("font-size",e??Ep.DEFAULT)},n_=()=>{const{uiSettings:e,updateUISettings:t}=tn(),{t:n}=be(),s=y(()=>b5.map(l=>S5(n,l))),a=y(()=>e.value.font_size||Ep.DEFAULT),o=l=>{requestAnimationFrame(()=>A5(l))},i=async l=>{try{await t({font_size:l}),o(l),ne(n("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.UPDATE_SUCCESS"))}catch{ne(n("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.UPDATE_ERROR"))}};return it(()=>e.value.font_size,l=>{o(l)},{immediate:!0}),{fontSizeOptions:s,currentFontSize:a,applyFontSize:o,updateFontSize:i}};class y5 extends Ea{constructor(){super("notification_subscriptions")}}const I5=new y5,Rf=(e=()=>{})=>{"serviceWorker"in navigator&&"PushManager"in window&&navigator.serviceWorker.register("/sw.js").then(t=>e(t)).catch(t=>{console.log("SW registration failed: ",t)})},C5=()=>"Notification"in window?Notification.permission==="granted":!1,W1=e=>btoa(String.fromCharCode.apply(null,new Uint8Array(e))).replace(/\+/g,"-").replace(/\//g,"_"),N5=e=>({subscription_type:"browser_push",subscription_attributes:{endpoint:e.endpoint,p256dh:W1(e.getKey("p256dh")),auth:W1(e.getKey("auth"))}}),O5=e=>hl.hasAuthCookie()?I5.create(N5(e)):null,xf=(e=()=>{})=>{window.chatwootConfig.vapidPublicKey&&navigator.serviceWorker.ready.then(t=>t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:window.chatwootConfig.vapidPublicKey})).then(O5).then(()=>{e()}).catch(t=>{console.error("Push subscription registration failed:",t),ne("This browser does not support desktop notification")})},R5=({onSuccess:e})=>{"Notification"in window?Notification.permission==="granted"?xf(e):Notification.permission!=="denied"&&Notification.requestPermission(t=>{t==="granted"&&xf(e)}):(console.warn("Notification is not supported"),ne("This browser does not support desktop notification"))},x5=10800,w5=15;class $5{constructor(t,n){Qt(this,"disconnect",()=>this.removeEventListeners());Qt(this,"setupEventListeners",()=>{window.addEventListener("online",this.handleOnlineEvent),Dt.on(un.WEBSOCKET_RECONNECT,this.onReconnect),Dt.on(un.WEBSOCKET_DISCONNECT,this.onDisconnect)});Qt(this,"removeEventListeners",()=>{window.removeEventListener("online",this.handleOnlineEvent),Dt.off(un.WEBSOCKET_RECONNECT,this.onReconnect),Dt.off(un.WEBSOCKET_DISCONNECT,this.onDisconnect)});Qt(this,"getSecondsSinceDisconnect",()=>this.disconnectTime?Math.max(NS(new Date,this.disconnectTime),0):0);Qt(this,"handleOnlineEvent",()=>{this.getSecondsSinceDisconnect()>=x5&&window.location.reload()});Qt(this,"fetchConversations",async()=>{await this.store.dispatch("updateChatListFilters",{page:null,updatedWithin:this.getSecondsSinceDisconnect()+w5}),await this.store.dispatch("fetchAllConversations"),await this.store.dispatch("updateChatListFilters",{updatedWithin:null})});Qt(this,"fetchFilteredOrSavedConversations",async t=>{await this.store.dispatch("fetchFilteredConversations",{queryData:t,page:1})});Qt(this,"fetchConversationsOnReconnect",async()=>{var a;const{getAppliedConversationFiltersQuery:t,"customViews/getActiveConversationFolder":n}=this.store.getters,s=(a=t==null?void 0:t.payload)!=null&&a.length?t:n==null?void 0:n.query;s?await this.fetchFilteredOrSavedConversations(s):await this.fetchConversations()});Qt(this,"fetchConversationMessagesOnReconnect",async()=>{const{conversation_id:t}=this.router.currentRoute.value.params;t&&await this.store.dispatch("syncActiveConversationMessages",{conversationId:Number(t)})});Qt(this,"fetchNotificationsOnReconnect",async t=>{await this.store.dispatch("notifications/index",{...t,page:1})});Qt(this,"revalidateCaches",async()=>{const{label:t,inbox:n,team:s}=await this.store.dispatch("accounts/getCacheKeys");await Promise.all([this.store.dispatch("labels/revalidate",{newKey:t}),this.store.dispatch("inboxes/revalidate",{newKey:n}),this.store.dispatch("teams/revalidate",{newKey:s})])});Qt(this,"handleRouteSpecificFetch",async()=>{const t=this.router.currentRoute.value.name;Yg(t,!0)?(await this.fetchConversationsOnReconnect(),await this.fetchConversationMessagesOnReconnect()):jg(t,!0)?await this.fetchNotificationsOnReconnect(this.store.getters["notifications/getNotificationFilters"]):G0(t)&&await this.fetchNotificationsOnReconnect()});Qt(this,"setConversationLastMessageId",async()=>{const{conversation_id:t}=this.router.currentRoute.value.params;t&&await this.store.dispatch("setConversationLastMessageId",{conversationId:Number(t)})});Qt(this,"onDisconnect",()=>{this.disconnectTime=new Date,this.setConversationLastMessageId()});Qt(this,"onReconnect",async()=>{await this.handleRouteSpecificFetch(),await this.revalidateCaches(),Dt.emit(un.WEBSOCKET_RECONNECT_COMPLETED)});this.store=t,this.router=n,this.disconnectTime=null,this.setupEventListeners()}}const M5={name:"App",components:{LoadingState:Nr,NetworkNotification:jP,UpdateBanner:K4,PaymentPendingBanner:Z4,WootSnackbarBox:u5,PendingEmailVerificationBanner:e5},setup(){const e=Ft(),t=rt(),{accountId:n}=ln(),{currentFontSize:s}=n_(),{uiSettings:a}=tn();return{router:e,store:t,currentAccountId:n,currentFontSize:s,uiSettings:a}},data(){return{latestChatwootVersion:null,reconnectService:null}},computed:{...mt({getAccount:"accounts/getAccount",isRTL:"accounts/isRTL",currentUser:"getCurrentUser",authUIFlags:"getAuthUIFlags",accountUIFlags:"accounts/getUIFlags"}),hideOnOnboardingView(){return!EO(this.$route)}},watch:{currentAccountId:{immediate:!0,handler(){this.currentAccountId&&this.initializeAccount()}}},mounted(){var e;this.initializeColorTheme(),this.listenToThemeChanges(),this.setLocale(((e=this.uiSettings)==null?void 0:e.locale)||window.chatwootConfig.selectedLocale)},unmounted(){this.reconnectService&&this.reconnectService.disconnect()},methods:{initializeColorTheme(){V1(window.matchMedia("(prefers-color-scheme: dark)").matches)},listenToThemeChanges(){const e=window.matchMedia("(prefers-color-scheme: dark)");e.onchange=t=>V1(t.matches)},setLocale(e){this.$root.$i18n.locale=e},async initializeAccount(){var s;await this.$store.dispatch("accounts/get"),this.$store.dispatch("setActiveAccount",{accountId:this.currentAccountId});const{locale:e,latest_chatwoot_version:t}=this.getAccount(this.currentAccountId),{pubsub_token:n}=this.currentUser||{};this.setLocale(((s=this.uiSettings)==null?void 0:s.locale)||e),this.latestChatwootVersion=t,s5.init(this.store,n),this.reconnectService=new $5(this.store,this.router),window.reconnectService=this.reconnectService,Rf(a=>a.pushManager.getSubscription().then(o=>{o&&xf()}))}}},L5=["dir"];function D5(e,t,n,s,a,o){const i=W("UpdateBanner"),l=W("PendingEmailVerificationBanner"),r=W("PaymentPendingBanner"),c=W("router-view"),u=W("WootSnackbarBox"),d=W("NetworkNotification"),h=W("LoadingState");return!e.authUIFlags.isFetching&&!e.accountUIFlags.isFetchingItem?(p(),E("div",{key:0,id:"app",class:"flex flex-col w-full h-screen min-h-0",dir:e.isRTL?"rtl":"ltr"},[S(i,{"latest-chatwoot-version":a.latestChatwootVersion},null,8,["latest-chatwoot-version"]),s.currentAccountId?(p(),E(ue,{key:0},[o.hideOnOnboardingView?(p(),L(l,{key:0})):$("",!0),o.hideOnOnboardingView?(p(),L(r,{key:1})):$("",!0)],64)):$("",!0),S(c,null,{default:Y(({Component:g})=>[S(Ys,{name:"fade",mode:"out-in"},{default:Y(()=>[(p(),L(ds(g)))]),_:2},1024)]),_:1}),S(u),S(d)],8,L5)):(p(),L(h,{key:1}))}const P5=De(M5,[["render",D5]]),k5=e=>Promise.reject(e),B5=e=>{const{apiHost:t=""}=window.chatwootConfig||{},n=e.create({baseURL:`${t}/`});if(hl.hasAuthCookie()){const{"access-token":s,"token-type":a,client:o,expiry:i,uid:l}=hl.getAuthData();Object.assign(n.defaults.headers.common,{"access-token":s,"token-type":a,client:o,expiry:i,uid:l})}return n.interceptors.response.use(s=>s,s=>k5(s)),n};/*!
 /**
  * vuex-router-sync v6.0.0-rc.1
  * (c) 2021 Evan You
  * @license MIT
  */function U5(e,t,n){const s={}.moduleName||"route";e.registerModule(s,{namespaced:!0,state:wf(t.currentRoute.value),mutations:{ROUTE_CHANGED(r,c){e.state[s]=wf(c.to,c.from)}}});let a=!1,o;const i=e.watch(r=>r[s],r=>{const{fullPath:c}=r;c!==o&&(o!=null&&(a=!0,t.push(r)),o=c)},{flush:"sync"}),l=t.afterEach((r,c)=>{if(a){a=!1;return}o=r.fullPath,e.commit(s+"/ROUTE_CHANGED",{to:r,from:c})});return function(){l(),i(),e.unregisterModule(s)}}function wf(e,t){const n={name:e.name,path:e.path,hash:e.hash,query:e.query,params:e.params,fullPath:e.fullPath,meta:e.meta};return t&&(n.from=wf(t)),Object.freeze(n)}function si(){const e=window.chatwootConfig||{},t=e.hostURL,n=e.vapidPublicKey,s=e.enabledLanguages,a=e.isEnterprise==="true",o=e.enterprisePlanName;return{hostURL:t,vapidPublicKey:n,enabledLanguages:s,isEnterprise:a,enterprisePlanName:o}}const ft={AGENT_BOTS:"agent_bots",AGENT_MANAGEMENT:"agent_management",ASSIGNMENT_V2:"assignment_v2",AUTO_RESOLVE_CONVERSATIONS:"auto_resolve_conversations",AUTOMATIONS:"automations",CAMPAIGNS:"campaigns",WHATSAPP_CAMPAIGNS:"whatsapp_campaign",CANNED_RESPONSES:"canned_responses",CRM:"crm",CUSTOM_ATTRIBUTES:"custom_attributes",INBOX_MANAGEMENT:"inbox_management",INTEGRATIONS:"integrations",LABELS:"labels",MACROS:"macros",HELP_CENTER:"help_center",REPORTS:"reports",TEAM_MANAGEMENT:"team_management",VOICE_RECORDER:"voice_recorder",AUDIT_LOGS:"audit_logs",INBOX_VIEW:"inbox_view",SLA:"sla",RESPONSE_BOT:"response_bot",CHANNEL_EMAIL:"channel_email",CHANNEL_FACEBOOK:"channel_facebook",CHANNEL_TWITTER:"channel_twitter",CHANNEL_WEBSITE:"channel_website",CUSTOM_REPLY_DOMAIN:"custom_reply_domain",CUSTOM_REPLY_EMAIL:"custom_reply_email",DISABLE_BRANDING:"disable_branding",EMAIL_CONTINUITY_ON_API_CHANNEL:"email_continuity_on_api_channel",INBOUND_EMAILS:"inbound_emails",IP_LOOKUP:"ip_lookup",LINEAR:"linear_integration",CAPTAIN:"captain_integration",CUSTOM_ROLES:"custom_roles",CHATWOOT_V4:"chatwoot_v4",REPORT_V4:"report_v4",CHANNEL_INSTAGRAM:"channel_instagram",CONTACT_CHATWOOT_SUPPORT_TEAM:"contact_chatwoot_support_team",CAPTAIN_V2:"captain_integration_v2",SAML:"saml",QUOTED_EMAIL_REPLY:"quoted_email_reply",COMPANIES:"companies"},F5=[ft.SLA,ft.CAPTAIN,ft.CUSTOM_ROLES,ft.AUDIT_LOGS,ft.HELP_CENTER,ft.SAML],G5={class:"relative flex flex-col min-w-0 gap-1"},V5=["for"],H5=["id","value","type","placeholder","disabled","min","max"],Tt={__name:"Input",props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},customInputClass:{type:[String,Object,Array],default:""},placeholder:{type:String,default:""},label:{type:String,default:""},id:{type:String,default:""},size:{type:String,default:"md",validator:e=>["sm","md"].includes(e)},message:{type:String,default:""},disabled:{type:Boolean,default:!1},messageType:{type:String,default:"info",validator:e=>["info","error","success"].includes(e)},min:{type:String,default:""},max:{type:String,default:""},autofocus:{type:Boolean,default:!1}},emits:["update:modelValue","blur","input","focus","enter"],setup(e,{emit:t}){const n=e,s=t,{uid:a}=rS(),o=y(()=>n.id||`input-${a}`),i=j(!1),l=j(null),r=y(()=>{switch(n.messageType){case"error":return"text-n-ruby-9 dark:text-n-ruby-9";case"success":return"text-n-teal-10 dark:text-n-teal-10";default:return"text-n-slate-11 dark:text-n-slate-11"}}),c=y(()=>{switch(n.messageType){case"error":return"outline-n-ruby-8 dark:outline-n-ruby-8 hover:outline-n-ruby-9 dark:hover:outline-n-ruby-9 disabled:outline-n-ruby-8 dark:disabled:outline-n-ruby-8";default:return"outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 disabled:outline-n-weak dark:disabled:outline-n-weak focus:outline-n-brand dark:focus:outline-n-brand"}}),u=b=>{let A=b.target.value;n.type==="number"&&A!==""&&(A=Number(A)),s("update:modelValue",A),s("input",b)},d=b=>{s("focus",b),i.value=!0},h=y(()=>{switch(n.size){case"sm":return"h-8 !px-3 !py-2";case"md":return"h-10 !px-3 !py-2.5";default:return"h-10 !px-3 !py-2.5"}}),g=b=>{s("blur",b),i.value=!1},f=b=>{s("enter",b)};return lt(()=>{n.autofocus&&Wt(()=>{var b;(b=l.value)==null||b.focus()})}),(b,A)=>(p(),E("div",G5,[e.label?(p(),E("label",{key:0,for:o.value,class:"mb-0.5 text-sm font-medium text-n-slate-12"},I(e.label),9,V5)):$("",!0),We(b.$slots,"prefix"),m("input",Qn({id:o.value},b.$attrs,{ref_key:"inputRef",ref:l,value:e.modelValue,class:[[e.customInputClass,c.value,h.value,{error:e.messageType==="error",focus:i.value}],"block w-full reset-base text-sm !mb-0 outline outline-1 border-none border-0 outline-offset-[-1px] rounded-lg bg-n-alpha-black2 file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-n-slate-10 dark:placeholder:text-n-slate-10 disabled:cursor-not-allowed disabled:opacity-50 text-n-slate-12 transition-all duration-500 ease-in-out [appearance:textfield] [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none"],type:e.type,placeholder:e.placeholder,disabled:e.disabled,min:["date","datetime-local","time"].includes(e.type)?e.min:void 0,max:["date","datetime-local","time","number"].includes(e.type)?e.max:void 0,onInput:u,onFocus:d,onBlur:g,onKeyup:wn(f,["enter"])}),null,16,H5),e.message?(p(),E("p",{key:1,class:ae(["min-w-0 mt-1 mb-0 text-xs truncate transition-all duration-500 ease-in-out",r.value])},I(e.message),3)):$("",!0)]))}},W5={key:0},$f={__name:"CustomBrandPolicyWrapper",props:{showOnCustomBrandedInstance:{type:Boolean,default:!0}},setup(e){const t=e,s=pn()["globalConfig/isACustomBrandedInstance"],a=y(()=>t.showOnCustomBrandedInstance||!s.value);return(o,i)=>a.value?(p(),E("div",W5,[We(o.$slots,"default")])):$("",!0)}},z5={agent_bots:"https://chwt.app/hc/agent-bots",agents:"https://chwt.app/hc/agents",audit_logs:"https://chwt.app/hc/audit-logs",campaigns:"https://chwt.app/hc/campaigns",canned_responses:"https://chwt.app/hc/canned",channel_email:"https://chwt.app/hc/email",channel_facebook:"https://chwt.app/hc/fb",custom_attributes:"https://chwt.app/hc/custom-attributes",dashboard_apps:"https://chwt.app/hc/dashboard-apps",help_center:"https://chwt.app/hc/help-center",inboxes:"https://chwt.app/hc/inboxes",integrations:"https://chwt.app/hc/integrations",labels:"https://chwt.app/hc/labels",macros:"https://chwt.app/hc/macros",message_reply_to:"https://chwt.app/hc/reply-to",reports:"https://chwt.app/hc/reports",sla:"https://chwt.app/hc/sla",team_management:"https://chwt.app/hc/teams",webhook:"https://chwt.app/hc/webhooks",billing:"https://chwt.app/pricing",saml:"https://chwt.app/hc/saml"};function Y5(e){return z5[e]}const Rr={__name:"BackButton",props:{backUrl:{type:[String,Object],default:""},buttonLabel:{type:String,default:""},compact:{type:Boolean,default:!1}},setup(e){const t=e,n=()=>{t.backUrl!==""?ps.push(t.backUrl):ps.go(-1)},s=t.compact?"text-sm":"text-base";return(a,o)=>(p(),E("button",{class:ae(["flex items-center p-0 font-normal cursor-pointer text-n-slate-11",C(s)]),onClickCapture:n},[o[0]||(o[0]=m("i",{class:"i-lucide-chevron-left -ml-1 text-lg"},null,-1)),xe(" "+I(e.buttonLabel||a.$t("GENERAL_SETTINGS.BACK")),1)],34))}},j5={class:"flex flex-col items-start w-full gap-2"},K5={class:"flex items-center justify-between w-full gap-4"},X5={class:"flex items-center gap-3"},q5={key:0,class:"flex items-center w-10 h-10 p-1 rounded-full bg-n-blue-2"},Z5={class:"flex items-center justify-center w-full h-full rounded-full bg-n-blue-3"},Q5={class:"text-xl font-medium tracking-tight text-n-slate-12"},J5={class:"hidden gap-2 sm:flex"},eB={class:"flex flex-col w-full gap-3 text-n-slate-11"},tB={class:"mb-0 text-sm font-normal line-clamp-5 sm:line-clamp-none max-w-3xl"},nB=["href"],sB={class:"flex flex-wrap items-start justify-start w-full gap-3 sm:hidden"},hs={__name:"BaseSettingsHeader",props:{title:{type:String,required:!0},description:{type:String,required:!0},iconName:{type:String,default:""},linkText:{type:String,default:""},featureName:{type:String,default:""},backButtonLabel:{type:String,default:""}},setup(e){const n=Y5(e.featureName),s=a=>{a&&window.open(a,"_blank","noopener noreferrer")};return(a,o)=>{const i=W("fluent-icon");return p(),E("div",j5,[e.backButtonLabel?(p(),L(Rr,{key:0,compact:"","button-label":e.backButtonLabel},null,8,["button-label"])):$("",!0),m("div",K5,[m("div",X5,[e.iconName?(p(),E("div",q5,[m("div",Z5,[S(i,{size:"14",icon:e.iconName,type:"outline",class:"flex-shrink-0 text-n-brand"},null,8,["icon"])])])):$("",!0),m("h1",Q5,I(e.title),1)]),m("div",J5,[We(a.$slots,"actions")])]),m("div",eB,[m("p",tB,[We(a.$slots,"description",{},()=>[xe(I(e.description),1)])]),S($f,{"show-on-custom-branded-instance":!1},{default:Y(()=>[C(n)&&e.linkText?(p(),E("a",{key:0,href:C(n),target:"_blank",rel:"noopener noreferrer",class:"items-center hidden gap-1 text-sm font-medium sm:inline-flex w-fit text-n-blue-text hover:underline"},[xe(I(e.linkText)+" ",1),S(dt,{icon:"i-lucide-chevron-right",class:"flex-shrink-0 text-n-blue-text size-4"})],8,nB)):$("",!0)]),_:1})]),m("div",sB,[We(a.$slots,"actions"),S($f,{"show-on-custom-branded-instance":!1},{default:Y(()=>[C(n)&&e.linkText?(p(),L(te,{key:0,blue:"",link:"",icon:"i-lucide-chevron-right","trailing-icon":"",label:e.linkText,onClick:o[0]||(o[0]=l=>s(C(n)))},null,8,["label"])):$("",!0)]),_:1})])])}}},aB={class:"grid grid-cols-4"},oB={class:"col-span-3"},iB={class:"text-lg font-medium text-n-slate-12 flex items-center gap-2"},lB={key:0,class:"text-xs uppercase text-n-iris-11 border border-1 border-n-iris-10 leading-none rounded-lg px-1 py-0.5"},rB={class:"text-n-slate-11 text-sm mt-2"},cB={class:"col-span-1"},Pi={__name:"SectionLayout",props:{title:{type:String,required:!0},description:{type:String,required:!0},withBorder:{type:Boolean,default:!1},hideContent:{type:Boolean,default:!1},beta:{type:Boolean,default:!1}},setup(e){const{t}=be();return(n,s)=>{const a=Qe("tooltip");return p(),E("section",{class:ae(["grid grid-cols-1 pt-8 gap-5 [interpolate-size:allow-keywords]",{"border-t border-n-weak":e.withBorder,"pb-8":!e.hideContent}])},[m("header",aB,[m("div",oB,[m("h4",iB,[We(n.$slots,"title",{},()=>[xe(I(e.title),1)]),e.beta?re((p(),E("div",lB,[xe(I(C(t)("GENERAL.BETA")),1)])),[[a,C(t)("GENERAL.BETA_DESCRIPTION"),void 0,{top:!0}]]):$("",!0)]),m("p",rB,[We(n.$slots,"description",{},()=>[xe(I(e.description),1)])])]),m("div",cB,[We(n.$slots,"headerActions")])]),m("div",{class:ae(["transition-[height] duration-300 ease-in-out text-n-slate-12",{"overflow-hidden h-0":e.hideContent,"h-auto":!e.hideContent}])},[We(n.$slots,"default")],2)],2)}}},uB={__name:"AccountId",setup(e){const{t}=be(),{currentAccount:n}=ln(),s=y(()=>n.value.id.toString());return(a,o)=>{const i=W("woot-code");return p(),L(Pi,{title:C(t)("GENERAL_SETTINGS.FORM.ACCOUNT_ID.TITLE"),description:C(t)("GENERAL_SETTINGS.FORM.ACCOUNT_ID.NOTE"),"with-border":""},{default:Y(()=>[S(i,{script:s.value},null,8,["script"])]),_:1},8,["title","description"])}}},dB={class:"p-4 text-sm text-center"},pB={key:0},mB={class:"divide-x divide-n-slate-9"},hB={class:"px-2"},fB={__name:"BuildInfo",setup(e){const{t}=be(),{currentAccount:n}=ln(),s=y(()=>n.value.latest_chatwoot_version),a=_e("globalConfig/get"),o=y(()=>Dd.valid(s.value)?Dd.lt(a.value.appVersion,s.value):!1),i=y(()=>a.value.gitSha.substring(0,7)),l=()=>{_a(a.value.gitSha)};return(r,c)=>{const u=Qe("tooltip");return p(),E("div",dB,[o.value&&C(a).displayManifest?(p(),E("div",pB,I(C(t)("GENERAL_SETTINGS.UPDATE_CHATWOOT",{latestChatwootVersion:s.value})),1)):$("",!0),m("div",mB,[m("span",hB,I(`v${C(a).appVersion}`),1),re((p(),E("span",{class:"px-2 build-id cursor-pointer",onClick:l},[xe(I(`Build ${i.value}`),1)])),[[u,C(t)("COMPONENTS.CODE.BUTTON_TEXT")]])])])}}},gB={key:0},_B={class:"p-4 flex-grow-0 flex-shrink-0 flex-[50%] bg-n-ruby-4 rounded"},vB={class:"mb-4"},EB={key:1},bB={__name:"AccountDelete",setup(e){const{t}=be(),n=rt(),s=_e("accounts/getUIFlags"),{currentAccount:a}=ln(),[o,i]=yn(),l=y(()=>`${t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.PLACE_HOLDER",{accountName:a.value.name})}`),r=y(()=>{const{custom_attributes:A={}}=a.value;return!!A.marked_for_deletion_at}),c=y(()=>{const{custom_attributes:A={}}=a.value;return A.marked_for_deletion_at?new Date(A.marked_for_deletion_at):null}),u=y(()=>{const{custom_attributes:A={}}=a.value;return A.marked_for_deletion_reason||"manual_deletion"}),d=y(()=>c.value?c.value.toLocaleString():""),h=y(()=>{const A={deletionDate:d.value};return u.value==="manual_deletion"?t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.SCHEDULED_DELETION.MESSAGE_MANUAL",A):t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.SCHEDULED_DELETION.MESSAGE_INACTIVITY",A)});function g(A){var T,_;const v=(_=(T=A.response)==null?void 0:T.data)==null?void 0:_.message;if(v){ne(v);return}ne(t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.FAILURE"))}async function f(){i(!1);try{await n.dispatch("accounts/toggleDeletion",{action_type:"delete"}),await n.dispatch("accounts/get"),ne(t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.SUCCESS"))}catch(A){g(A)}}async function b(){try{await n.dispatch("accounts/toggleDeletion",{action_type:"undelete"}),await n.dispatch("accounts/get"),ne(t("GENERAL_SETTINGS.UPDATE.SUCCESS"))}catch{ne(t("GENERAL_SETTINGS.UPDATE.ERROR"))}}return(A,v)=>(p(),E(ue,null,[S(Pi,{title:C(t)("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.TITLE"),description:C(t)("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.NOTE"),"with-border":""},{default:Y(()=>[r.value?(p(),E("div",gB,[m("div",_B,[m("p",vB,I(h.value),1),S(te,{label:A.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.SCHEDULED_DELETION.CLEAR_BUTTON"),color:"ruby","is-loading":C(s).isUpdating,onClick:b},null,8,["label","is-loading"])])])):$("",!0),r.value?$("",!0):(p(),E("div",EB,[S(te,{label:A.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.BUTTON_TEXT"),color:"ruby",onClick:v[0]||(v[0]=T=>C(i)(!0))},null,8,["label"])]))]),_:1},8,["title","description"]),C(o)?(p(),L(b0,{key:0,show:C(o),"onUpdate:show":v[1]||(v[1]=T=>cS(o)?o.value=T:null),title:A.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.TITLE"),message:A.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.MESSAGE"),"confirm-text":A.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.BUTTON_TEXT"),"reject-text":A.$t("GENERAL_SETTINGS.ACCOUNT_DELETE_SECTION.CONFIRM.DISMISS"),"confirm-value":C(a).name,"confirm-place-holder-text":l.value,onOnConfirm:f,onOnClose:v[2]||(v[2]=T=>C(i)(!1))},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):$("",!0)],64))}},TB={class:"relative flex flex-col gap-1"},SB=["for"],AB=["id","value","placeholder","maxlength","disabled"],yB={key:0,class:"flex items-center justify-end h-4 mt-1 bottom-3 ltr:right-3 rtl:left-3"},IB={class:"text-xs tabular-nums text-n-slate-10"},lo={__name:"TextArea",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:""},maxLength:{type:Number,default:200},id:{type:String,default:""},disabled:{type:Boolean,default:!1},customTextAreaClass:{type:String,default:""},customTextAreaWrapperClass:{type:String,default:""},showCharacterCount:{type:Boolean,default:!1},autoHeight:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},minHeight:{type:String,default:"4rem"},maxHeight:{type:String,default:"12rem"},autofocus:{type:Boolean,default:!1},message:{type:String,default:""},messageType:{type:String,default:"info",validator:e=>["info","error","success"].includes(e)},signature:{type:String,default:""},sendWithSignature:{type:Boolean,default:!1},allowSignature:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,a=j(null),o=j(!1),i=y(()=>n.modelValue.length),l=y(()=>ul(n.signature)),r=y(()=>{switch(n.messageType){case"error":return"text-n-ruby-9 dark:text-n-ruby-9";case"success":return"text-n-teal-10 dark:text-n-teal-10";default:return"text-n-slate-11 dark:text-n-slate-11"}}),c=()=>{!n.autoHeight||!a.value||(a.value.style.height="auto",a.value.style.height=`${a.value.scrollHeight}px`)},u=()=>{if(!a.value)return;const A=Io(n.modelValue,l.value).trimEnd().length;a.value.focus(),a.value.setSelectionRange(A,A)},d=b=>{if(!n.allowSignature)return;const A=b?bi(n.modelValue,l.value):Io(n.modelValue,l.value);s("update:modelValue",A),Wt(()=>{c(),u()})},h=b=>{s("update:modelValue",b.target.value),n.autoHeight&&Wt(c)},g=()=>{n.disabled||(o.value=!0)},f=()=>{n.disabled||(o.value=!1)};return it(()=>n.modelValue,()=>{n.autoHeight&&Wt(c)}),it(()=>n.sendWithSignature,b=>{n.allowSignature&&d(b)}),lt(()=>{var b;n.autoHeight&&Wt(c),n.autofocus&&((b=a.value)==null||b.focus())}),(b,A)=>(p(),E("div",TB,[e.label?(p(),E("label",{key:0,for:e.id,class:"mb-0.5 text-sm font-medium text-n-slate-12"},I(e.label),9,SB)):$("",!0),m("div",{class:ae(["flex flex-col gap-2 px-3 pt-3 pb-3 transition-all duration-500 ease-in-out border rounded-lg bg-n-alpha-black2",[e.customTextAreaWrapperClass,{"cursor-not-allowed opacity-50 !bg-n-alpha-black2 disabled:border-n-weak dark:disabled:border-n-weak":e.disabled,"border-n-brand dark:border-n-brand":o.value,"hover:border-n-slate-6 dark:hover:border-n-slate-6 border-n-weak dark:border-n-weak":!o.value&&e.messageType!=="error","border-n-ruby-8 dark:border-n-ruby-8 hover:border-n-ruby-9 dark:hover:border-n-ruby-9":e.messageType==="error"&&!o.value}]])},[We(b.$slots,"default"),m("textarea",{id:e.id,ref_key:"textareaRef",ref:a,value:e.modelValue,placeholder:e.placeholder,maxlength:e.showCharacterCount?e.maxLength:void 0,class:ae([[e.customTextAreaClass,{"resize-none":!e.resize}],"flex w-full reset-base text-sm p-0 !rounded-none !bg-transparent dark:!bg-transparent !border-0 !outline-0 !mb-0 placeholder:text-n-slate-10 dark:placeholder:text-n-slate-10 text-n-slate-12 dark:text-n-slate-12 disabled:cursor-not-allowed disabled:opacity-50"]),style:Zt({minHeight:e.autoHeight?e.minHeight:void 0,maxHeight:e.autoHeight?e.maxHeight:void 0}),disabled:e.disabled,rows:"1",onInput:h,onFocus:g,onBlur:f},null,46,AB),e.showCharacterCount?(p(),E("div",yB,[m("span",IB,I(i.value)+" / "+I(e.maxLength),1)])):$("",!0)],2),e.message?(p(),E("p",{key:1,class:ae(["min-w-0 mt-1 mb-0 text-xs truncate transition-all duration-500 ease-in-out",r.value])},I(e.message),3)):$("",!0)]))}},CB=["aria-checked"],NB={class:"sr-only"},va={__name:"Switch",props:{modelValue:{type:Boolean,default:!1},modelModifiers:{}},emits:jt(["change"],["update:modelValue"]),setup(e,{emit:t}){const n=t,{t:s}=be(),a=Xt(e,"modelValue"),o=()=>{a.value=!a.value,n("change",!a.value)};return(i,l)=>(p(),E("button",{type:"button",class:ae(["relative h-4 transition-colors duration-200 ease-in-out rounded-full w-7 focus:outline-none focus:ring-1 focus:ring-n-brand focus:ring-offset-n-slate-2 focus:ring-offset-2 flex-shrink-0",a.value?"bg-n-brand":"bg-n-slate-6 disabled:bg-n-slate-6/60"]),role:"switch","aria-checked":a.value,onClick:o},[m("span",NB,I(C(s)("SWITCH.TOGGLE")),1),m("span",{class:ae(["absolute top-0.5 left-0.5 h-3 w-3 transform rounded-full shadow-sm transition-transform duration-200 ease-in-out",a.value?"translate-x-3 bg-n-background":"translate-x-0 bg-n-background"])},null,2)],10,CB))}},Wn={MINUTES:"minutes",HOURS:"hours",DAYS:"days"},OB=["disabled"],RB=["value"],xB=["value"],wB=["value"],s_={__name:"DurationInput",props:jt({min:{type:Number,default:0},max:{type:Number,default:1/0},disabled:{type:Boolean,default:!1}},{modelValue:{type:Number,default:null},modelModifiers:{},unit:{type:String,default:Wn.MINUTES,validate(e){return Object.values(Wn).includes(e)}},unitModifiers:{}}),emits:["update:modelValue","update:unit"],setup(e){const t=e,{t:n}=be(),s=Xt(e,"modelValue"),a=Xt(e,"unit"),o=l=>a.value===Wn.MINUTES?Math.floor(l):a.value===Wn.HOURS?Math.floor(l)*60:Math.floor(l)*24*60,i=y({get(){return a.value===Wn.MINUTES?s.value:a.value===Wn.HOURS?Math.floor(s.value/60):a.value===Wn.DAYS?Math.floor(s.value/24/60):0},set(l){let r=o(l);s.value=Math.min(Math.max(r,t.min),t.max)}});return it(a,()=>{let l=o(i.value);s.value=Math.min(Math.max(l,t.min),t.max)}),(l,r)=>(p(),E(ue,null,[S(Tt,{modelValue:i.value,"onUpdate:modelValue":r[0]||(r[0]=c=>i.value=c),type:"number",autocomplete:"off",disabled:e.disabled,placeholder:C(n)("DURATION_INPUT.PLACEHOLDER"),class:"flex-grow w-full disabled:"},null,8,["modelValue","disabled","placeholder"]),re(m("select",{"onUpdate:modelValue":r[1]||(r[1]=c=>a.value=c),disabled:e.disabled,class:"mb-0 text-sm disabled:outline-n-weak disabled:opacity-40"},[m("option",{value:C(Wn).MINUTES},I(C(n)("DURATION_INPUT.MINUTES")),9,RB),m("option",{value:C(Wn).HOURS},I(C(n)("DURATION_INPUT.HOURS")),9,xB),m("option",{value:C(Wn).DAYS},I(C(n)("DURATION_INPUT.DAYS")),9,wB)],8,OB),[[Nn,a.value]])],64))}};function $B(e,t){e.length<t.length&&([e,t]=[t,e]);let n=e.length,s=t.length;if(n===0||s===0)return 0;let a=Math.floor(n/2)-1,o=Array(s).fill(!1),i=Array(n).fill(""),l=0;for(let g=0;g<n;g++){let f=e[g];for(let b=0;b<s;b++){let A=t[b];if(b<=g+a&&b+a>=1&&f===A&&!o[b]){o[b]=!0,i[l++]=f;break}}}if(!l)return 0;let r=0;for(let g=0,f=0;f<s;f++)o[f]&&(t[f]!==i[g]&&r++,g++);let c=l,u=(c/n+c/s+(c-r/2)/c)/3,d=0,h=Math.min(4,s);for(let g=0;g<h;g++)e[g]===t[g]&&d++;return u+d*.1*(1-u)}function q0(e,t){let n=0,s=0;if(t&&e.length!==t.length)throw new Error("The number of values must be equal to the number of weights");for(let a=0;a<e.length;a++){let o=t?t[a]:1;n+=e[a]*o,s+=o}return n/s}function MB(e){return Math.max(0,Math.min(1,e))}function Z0(e){return e.split(/\s+/).filter((t,n,s)=>t&&s.indexOf(t)===n)}var Q0={CONTAINS_MATCH:1.2,FIRST_SIMILARITY:1.1};function bl(e,t,n,s){if(!t||typeof t!="string")return e;let a=[],o=(s==null?void 0:s.threshold)??.8,i=t.trim().toLowerCase(),l=Z0(i);return e.forEach(r=>{let c=[],u=[];n.forEach(h=>{var A;let g,f=1;typeof h=="string"?g=h:(g=h.name,f=h.weight),u.push(f);let b=(A=r[g])==null?void 0:A.trim().toLowerCase();if(b){let v=LB(b,l);c.push(v)}else c.push(0)});let d=q0(c,u);d>=o&&a.push({object:r,similarity:d})}),a.sort((r,c)=>c.similarity-r.similarity),a.map(r=>r.object)}function LB(e,t){let n=Z0(e),s=t.map(a=>{let o=n.map(l=>DB(l,a)),i=Math.max(...o);return i===o[0]?i*Q0.FIRST_SIMILARITY:MB(i)});return q0(s)}function DB(e,t){let n=$B(e,t);return e.includes(t)?n*Q0.CONTAINS_MATCH:n}const J0=Symbol("DropdownControl");function PB(){const e=Ro(J0,null);if(e===null)throw new Error("Component is missing a parent <DropdownContainer /> component.");return e}function kB(e){Hn(J0,e)}const BB={class:"relative space-y-2"},UB={key:0,class:"absolute"},Tl={__name:"DropdownContainer",emits:["close"],setup(e,{emit:t}){const n=t,[s,a]=yn(!1),o=()=>{s.value&&(n("close"),a(!1))};return kB({isOpen:s,toggle:a,closeMenu:o}),(i,l)=>re((p(),E("div",BB,[We(i.$slots,"trigger",{isOpen:C(s),toggle:()=>C(a)()}),C(s)?(p(),E("div",UB,[We(i.$slots,"default")])):$("",!0)])),[[C(ms),o]])}},GB={class:"-mx-2 n-dropdown-section"},VB={key:0,class:"px-4 mb-3 mt-1 leading-4 font-medium tracking-[0.2px] text-n-slate-10 text-xs"},HB={class:"gap-2 grid reset-base list-none px-2 max-h-96 overflow-y-auto"},xr={__name:"DropdownSection",props:{title:{type:String,default:""}},setup(e){return(t,n)=>(p(),E("div",GB,[e.title?(p(),E("div",VB,I(e.title),1)):$("",!0),m("ul",HB,[We(t.$slots,"default")])]))}},WB={class:"absolute"},Sl={__name:"DropdownBody",props:{strong:{type:Boolean,default:!1}},setup(e){const t=y(()=>e.strong?"border-n-strong":"border-n-weak"),n=y(()=>e.strong?"before:content-['\0A0'] before:absolute before:bottom-0 before:left-0 before:w-full before:h-full before:rounded-xl before:backdrop-contrast-70 before:backdrop-blur-sm before:z-0 [&>*]:relative":"");return(s,a)=>(p(),E("div",WB,[m("ul",{class:ae(["text-sm bg-n-alpha-3 backdrop-blur-[100px] border rounded-xl shadow-sm py-2 n-dropdown-body gap-2 grid list-none px-2 reset-base relative",[t.value,n.value]])},[We(s.$slots,"default")],2)]))}},zB={class:"n-dropdown-item"},Ba=Object.assign({inheritAttrs:!1},{__name:"DropdownItem",props:{label:{type:String,default:""},icon:{type:[String,Object,Function],default:""},link:{type:[String,Object],default:""},nativeLink:{type:Boolean,default:!1},click:{type:Function,default:null},preserveOpen:{type:Boolean,default:!1}},setup(e){const t=e,{closeMenu:n}=PB(),s=y(()=>t.link?t.nativeLink&&typeof t.link=="string"?"a":"router-link":t.click?"button":"div"),a=()=>{t.click&&t.click(),t.preserveOpen||n()};return(o,i)=>(p(),E("li",zB,[(p(),L(ds(s.value),Qn(o.$attrs,{class:["flex text-left rtl:text-right items-center p-2 reset-base text-sm text-n-slate-12 w-full border-0",{"hover:bg-n-alpha-2 rounded-lg w-full gap-3":!o.$slots.default}],href:s.value==="a"?t.link:null,to:s.value==="router-link"?t.link:null,onClick:a}),{default:Y(()=>[We(o.$slots,"default",{},()=>[We(o.$slots,"icon",{},()=>[e.icon?(p(),L(dt,{key:0,class:"size-4 text-n-slate-11",icon:e.icon},null,8,["icon"])):$("",!0)]),We(o.$slots,"label",{},()=>[xe(I(e.label),1)])])]),_:3},16,["class","href","to"]))]))}}),YB={class:"text-n-slate-11"},jB={key:0,class:"relative"},KB=["placeholder"],Mf={__name:"SingleSelect",props:jt({options:{type:Array,required:!0},disableSearch:{type:Boolean,default:!1},placeholderIcon:{type:String,default:"i-lucide-plus"},placeholder:{type:String,default:""},placeholderTrailingIcon:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:""}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const{t}=be(),n=Xt(e,"modelValue"),s=j(""),a=y(()=>e.options?bl(e.options,s.value,["name"]):[]),o=y(()=>{if(!e.options||!n.value)return null;const l=Array.isArray(n.value)?n.value[0]:n.value;return e.options.find(r=>r.id===l.id)}),i=l=>{const r={id:l.id,name:l.name};n.value&&n.value.id===r.id?n.value=null:n.value=r};return(l,r)=>(p(),L(Tl,null,{trigger:Y(({toggle:c})=>[o.value?(p(),L(te,{key:0,sm:"",slate:"",faded:"",type:"button",icon:o.value.icon,label:o.value.name,onClick:c},null,8,["icon","label","onClick"])):(p(),L(te,{key:1,sm:"",slate:"",faded:"",type:"button","trailing-icon":e.placeholderTrailingIcon,onClick:c},{icon:Y(()=>[S(dt,{icon:e.placeholderIcon,class:"text-n-slate-11"},null,8,["icon"])]),default:Y(()=>[m("span",YB,I(e.placeholder||C(t)("COMBOBOX.PLACEHOLDER")),1)]),_:2},1032,["trailing-icon","onClick"]))]),default:Y(()=>[S(Sl,{class:"top-0 min-w-56 z-50",strong:""},{default:Y(()=>[e.disableSearch?$("",!0):(p(),E("div",jB,[S(dt,{class:"absolute size-4 left-2 top-2",icon:"i-lucide-search"}),re(m("input",{"onUpdate:modelValue":r[0]||(r[0]=c=>s.value=c),autofocus:"",class:"p-1.5 pl-8 text-n-slate-11 bg-n-alpha-1 rounded-lg w-full",placeholder:e.searchPlaceholder||C(t)("COMBOBOX.SEARCH_PLACEHOLDER")},null,8,KB),[[gt,s.value]])])),S(xr,{class:"[&>ul]:max-h-80"},{default:Y(()=>[a.value.length?(p(!0),E(ue,{key:0},Ae(a.value,c=>(p(),L(Ba,{key:c.id,icon:c.icon,onClick:u=>i(c)},{label:Y(()=>[xe(I(c.name)+" ",1),o.value&&o.value.id===c.id?(p(),L(dt,{key:0,icon:"i-lucide-check",class:"bg-n-blue-text pointer-events-none"})):$("",!0)]),_:2},1032,["icon","onClick"]))),128)):s.value?(p(),L(Ba,{key:1,disabled:""},{default:Y(()=>[xe(I(C(t)("COMBOBOX.EMPTY_SEARCH_RESULTS",{searchTerm:s.value})),1)]),_:1})):(p(),L(Ba,{key:2,disabled:""},{default:Y(()=>[xe(I(C(t)("COMBOBOX.EMPTY_STATE")),1)]),_:1}))]),_:1})]),_:1})]),_:1}))}},XB={class:"flex justify-end"},qB={class:"gap-2 w-full grid grid-cols-[3fr_1fr]"},ZB={class:"rounded-xl border border-n-weak bg-n-solid-1 w-full text-sm text-n-slate-12 divide-y divide-n-weak"},QB={class:"p-3 h-12 flex items-center justify-between"},JB={class:"p-3 h-12 flex items-center justify-between"},e6={class:"flex gap-2"},t6={__name:"AutoResolve",setup(e){const{t}=be(),n=j(0),s=j(Wn.MINUTES),a=j(""),o=j({}),i=j(!1),l=j(!1),r=j(!1),{currentAccount:c,updateAccount:u}=ln(),d=_e("labels/getLabels"),h=y(()=>{var T;return(T=d.value)!=null&&T.length?d.value.map(_=>({id:_.title,name:_.title,icon:On("span",{class:"size-[12px] ring-1 ring-n-alpha-1 dark:ring-white/20 ring-inset rounded-sm",style:{backgroundColor:_.color}})})):[]}),g=y(()=>{var T;return((T=o.value)==null?void 0:T.name)??null});it([c,h],()=>{var O;const{auto_resolve_after:T,auto_resolve_message:_,auto_resolve_ignore_waiting:N,auto_resolve_label:R}=((O=c.value)==null?void 0:O.settings)||{};n.value=T,a.value=_,i.value=N,o.value=h.value.find(x=>x.name===R),n.value&&(n.value%(24*60)===0?s.value=Wn.DAYS:n.value%60===0?s.value=Wn.HOURS:s.value=Wn.MINUTES),n.value&&(l.value=!0)},{deep:!0,immediate:!0});const f=async T=>{try{r.value=!0,await u(T,{silent:!0}),ne(t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.DURATION.API.SUCCESS"))}catch{ne(t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.DURATION.API.ERROR"))}finally{r.value=!1}},b=async()=>n.value<10?(ne(t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.DURATION.ERROR")),Promise.resolve()):f({auto_resolve_after:n.value,auto_resolve_message:a.value,auto_resolve_ignore_waiting:i.value,auto_resolve_label:g.value}),A=async()=>(n.value=null,a.value="",f({auto_resolve_after:null,auto_resolve_message:"",auto_resolve_ignore_waiting:!1,auto_resolve_label:null})),v=async()=>{l.value||A()};return(T,_)=>(p(),L(Pi,{title:C(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.TITLE"),description:C(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.NOTE"),"hide-content":!l.value,"with-border":""},{headerActions:Y(()=>[m("div",XB,[S(va,{modelValue:l.value,"onUpdate:modelValue":_[0]||(_[0]=N=>l.value=N),onChange:v},null,8,["modelValue"])])]),default:Y(()=>[m("form",{class:"grid gap-5",onSubmit:Ve(b,["prevent"])},[S(ta,{label:C(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.DURATION.LABEL"),"help-message":C(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.DURATION.HELP")},{default:Y(()=>[m("div",qB,[S(s_,{modelValue:n.value,"onUpdate:modelValue":_[1]||(_[1]=N=>n.value=N),unit:s.value,"onUpdate:unit":_[2]||(_[2]=N=>s.value=N),min:"0",max:"1438560",class:"w-full"},null,8,["modelValue","unit"])])]),_:1},8,["label","help-message"]),S(ta,{label:C(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.MESSAGE.LABEL"),"help-message":C(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.MESSAGE.HELP")},{default:Y(()=>[S(lo,{modelValue:a.value,"onUpdate:modelValue":_[3]||(_[3]=N=>a.value=N),class:"w-full",placeholder:C(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.MESSAGE.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),_:1},8,["label","help-message"]),S(ta,{label:C(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.PREFERENCES")},{default:Y(()=>[m("div",ZB,[m("div",QB,[m("span",null,I(C(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.IGNORE_WAITING.LABEL")),1),S(va,{modelValue:i.value,"onUpdate:modelValue":_[4]||(_[4]=N=>i.value=N)},null,8,["modelValue"])]),m("div",JB,[m("span",null,I(C(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.LABEL.LABEL")),1),S(Mf,{modelValue:o.value,"onUpdate:modelValue":_[5]||(_[5]=N=>o.value=N),options:h.value,placeholder:T.$t("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.LABEL.PLACEHOLDER"),"placeholder-icon":"i-lucide-chevron-down","placeholder-trailing-icon":"",variant:"faded"},null,8,["modelValue","options","placeholder"])])])]),_:1},8,["label"]),m("div",e6,[S(te,{blue:"",type:"submit","is-loading":r.value,label:C(t)("GENERAL_SETTINGS.FORM.AUTO_RESOLVE.UPDATE_BUTTON")},null,8,["is-loading","label"])])],32)]),_:1},8,["title","description","hide-content"]))}},n6={class:"flex justify-end"},s6={__name:"AudioTranscription",setup(e){const{t}=be(),n=j(!1),{currentAccount:s,updateAccount:a}=ln();it(s,()=>{var r;const{audio_transcriptions:l}=((r=s.value)==null?void 0:r.settings)||{};n.value=!!l},{deep:!0,immediate:!0});const o=async l=>{try{await a(l),ne(t("GENERAL_SETTINGS.FORM.AUDIO_TRANSCRIPTION.API.SUCCESS"))}catch{ne(t("GENERAL_SETTINGS.FORM.AUDIO_TRANSCRIPTION.API.ERROR"))}},i=async()=>o({audio_transcriptions:n.value});return(l,r)=>(p(),L(Pi,{title:C(t)("GENERAL_SETTINGS.FORM.AUDIO_TRANSCRIPTION.TITLE"),description:C(t)("GENERAL_SETTINGS.FORM.AUDIO_TRANSCRIPTION.NOTE"),"with-border":""},{headerActions:Y(()=>[m("div",n6,[S(va,{modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=c=>n.value=c),onChange:i},null,8,["modelValue"])])]),_:1},8,["title","description"]))}},a6={components:{BaseSettingsHeader:hs,NextButton:te,AccountId:uB,BuildInfo:fB,AccountDelete:bB,AutoResolve:t6,AudioTranscription:s6,SectionLayout:Pi,WithLabel:ta,NextInput:Tt},setup(){const{updateUISettings:e,uiSettings:t}=tn(),{enabledLanguages:n}=si(),{accountId:s}=ln(),a=bt();return{updateUISettings:e,uiSettings:t,v$:a,enabledLanguages:n,accountId:s}},data(){return{id:"",name:"",locale:"en",domain:"",supportEmail:"",features:{}}},validations:{name:{required:Ye},locale:{required:Ye}},computed:{...mt({getAccount:"accounts/getAccount",uiFlags:"accounts/getUIFlags",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",isOnChatwootCloud:"globalConfig/isOnChatwootCloud"}),showAutoResolutionConfig(){return this.isFeatureEnabledonAccount(this.accountId,ft.AUTO_RESOLVE_CONVERSATIONS)},showAudioTranscriptionConfig(){return this.isFeatureEnabledonAccount(this.accountId,ft.CAPTAIN)},languagesSortedByCode(){return[...this.enabledLanguages].sort((t,n)=>t.iso_639_1_code.localeCompare(n.iso_639_1_code))},isUpdating(){return this.uiFlags.isUpdating},featureInboundEmailEnabled(){var e;return!!((e=this.features)!=null&&e.inbound_emails)},featureCustomReplyDomainEnabled(){return this.featureInboundEmailEnabled&&!!this.features.custom_reply_domain},featureCustomReplyEmailEnabled(){return this.featureInboundEmailEnabled&&!!this.features.custom_reply_email},currentAccount(){return this.getAccount(this.accountId)||{}}},mounted(){this.initializeAccount()},methods:{async initializeAccount(){var e;try{const{name:t,locale:n,id:s,domain:a,support_email:o,features:i}=this.getAccount(this.accountId);this.$root.$i18n.locale=((e=this.uiSettings)==null?void 0:e.locale)||n,this.name=t,this.locale=n,this.id=s,this.domain=a,this.supportEmail=o,this.features=i}catch{}},async updateAccount(){var e,t;if(this.v$.$touch(),this.v$.$invalid){ne(this.$t("GENERAL_SETTINGS.FORM.ERROR"));return}try{await this.$store.dispatch("accounts/update",{locale:this.locale,name:this.name,domain:this.domain,support_email:this.supportEmail}),(e=this.uiSettings)!=null&&e.locale?this.$root.$i18n.locale=(t=this.uiSettings)==null?void 0:t.locale:this.$root.$i18n.locale=this.locale,this.getAccount(this.id).locale=this.locale,ne(this.$t("GENERAL_SETTINGS.UPDATE.SUCCESS"))}catch{ne(this.$t("GENERAL_SETTINGS.UPDATE.ERROR"))}}}},o6={class:"flex flex-col max-w-2xl mx-auto w-full"},i6={class:"flex-grow flex-shrink min-w-0 mt-3"},l6=["value"],r6={key:2};function c6(e,t,n,s,a,o){const i=W("BaseSettingsHeader"),l=W("NextInput"),r=W("WithLabel"),c=W("NextButton"),u=W("SectionLayout"),d=W("woot-loading-state"),h=W("AutoResolve"),g=W("AudioTranscription"),f=W("AccountId"),b=W("AccountDelete"),A=W("BuildInfo");return p(),E("div",o6,[S(i,{title:e.$t("GENERAL_SETTINGS.TITLE")},null,8,["title"]),m("div",i6,[S(u,{title:e.$t("GENERAL_SETTINGS.FORM.GENERAL_SECTION.TITLE"),description:e.$t("GENERAL_SETTINGS.FORM.GENERAL_SECTION.NOTE")},{default:Y(()=>[e.uiFlags.isFetchingItem?$("",!0):(p(),E("form",{key:0,class:"grid gap-4",onSubmit:t[4]||(t[4]=Ve((...v)=>o.updateAccount&&o.updateAccount(...v),["prevent"]))},[S(r,{"has-error":s.v$.name.$error,label:e.$t("GENERAL_SETTINGS.FORM.NAME.LABEL"),"error-message":e.$t("GENERAL_SETTINGS.FORM.NAME.ERROR")},{default:Y(()=>[S(l,{modelValue:a.name,"onUpdate:modelValue":t[0]||(t[0]=v=>a.name=v),type:"text",class:"w-full",placeholder:e.$t("GENERAL_SETTINGS.FORM.NAME.PLACEHOLDER"),onBlur:s.v$.name.$touch},null,8,["modelValue","placeholder","onBlur"])]),_:1},8,["has-error","label","error-message"]),S(r,{"has-error":s.v$.locale.$error,label:e.$t("GENERAL_SETTINGS.FORM.LANGUAGE.LABEL"),"error-message":e.$t("GENERAL_SETTINGS.FORM.LANGUAGE.ERROR")},{default:Y(()=>[re(m("select",{"onUpdate:modelValue":t[1]||(t[1]=v=>a.locale=v),class:"!mb-0 text-sm"},[(p(!0),E(ue,null,Ae(o.languagesSortedByCode,v=>(p(),E("option",{key:v.iso_639_1_code,value:v.iso_639_1_code},I(v.name),9,l6))),128))],512),[[Nn,a.locale]])]),_:1},8,["has-error","label","error-message"]),o.featureCustomReplyDomainEnabled?(p(),L(r,{key:0,label:e.$t("GENERAL_SETTINGS.FORM.DOMAIN.LABEL")},{help:Y(()=>[xe(I(o.featureInboundEmailEnabled&&e.$t("GENERAL_SETTINGS.FORM.FEATURES.INBOUND_EMAIL_ENABLED"))+" "+I(o.featureCustomReplyDomainEnabled&&e.$t("GENERAL_SETTINGS.FORM.FEATURES.CUSTOM_EMAIL_DOMAIN_ENABLED")),1)]),default:Y(()=>[S(l,{modelValue:a.domain,"onUpdate:modelValue":t[2]||(t[2]=v=>a.domain=v),type:"text",class:"w-full",placeholder:e.$t("GENERAL_SETTINGS.FORM.DOMAIN.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):$("",!0),o.featureCustomReplyEmailEnabled?(p(),L(r,{key:1,label:e.$t("GENERAL_SETTINGS.FORM.SUPPORT_EMAIL.LABEL")},{default:Y(()=>[S(l,{modelValue:a.supportEmail,"onUpdate:modelValue":t[3]||(t[3]=v=>a.supportEmail=v),type:"text",class:"w-full",placeholder:e.$t("GENERAL_SETTINGS.FORM.SUPPORT_EMAIL.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):$("",!0),m("div",null,[S(c,{blue:"","is-loading":o.isUpdating,type:"submit"},{default:Y(()=>[xe(I(e.$t("GENERAL_SETTINGS.SUBMIT")),1)]),_:1},8,["is-loading"])])],32))]),_:1},8,["title","description"]),e.uiFlags.isFetchingItem?(p(),L(d,{key:0})):$("",!0)]),o.showAutoResolutionConfig?(p(),L(h,{key:0})):$("",!0),o.showAudioTranscriptionConfig?(p(),L(g,{key:1})):$("",!0),S(f),!e.uiFlags.isFetchingItem&&e.isOnChatwootCloud?(p(),E("div",r6,[S(b)])):$("",!0),S(A)])}const u6=De(a6,[["render",c6]]),d6={class:"flex flex-col w-full h-full m-0 p-6 sm:py-8 lg:px-16 overflow-auto bg-n-background font-inter"},p6={class:"flex items-start w-full max-w-6xl mx-auto"},Rs={__name:"SettingsWrapper",props:{keepAlive:{type:Boolean,default:!0}},setup(e){return(t,n)=>{const s=W("router-view");return p(),E("div",d6,[m("div",p6,[S(s,null,{default:Y(({Component:a})=>[e.keepAlive?(p(),L(Qd,{key:0},[(p(),L(ds(a)))],1024)):(p(),L(ds(a),{key:1}))]),_:1})])])}}},m6={routes:[{path:vt("accounts/:accountId/settings/general"),meta:{permissions:["administrator"]},component:Rs,children:[{path:"",name:"general_settings_index",component:u6,meta:{permissions:["administrator"]}}]}]},h6={class:"flex flex-col h-auto overflow-auto"},f6={class:"w-full"},g6=["placeholder"],_6={class:"w-full"},v6=["value"],E6={key:0,class:"message"},b6={class:"w-full"},T6=["placeholder"],S6={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"},A6={__name:"AddAgent",emits:["close"],setup(e,{emit:t}){const n=t,s=rt(),{t:a}=be(),o=j(""),i=j(""),l=j("agent"),c=bt({agentName:{required:Ye},agentEmail:{required:Ye,email:Li},selectedRoleId:{required:Ye}},{agentName:o,agentEmail:i,selectedRoleId:l}),u=_e("agents/getUIFlags"),d=_e("customRole/getCustomRoles"),h=y(()=>{const b=[{id:"administrator",name:"administrator",label:a("AGENT_MGMT.AGENT_TYPES.ADMINISTRATOR")},{id:"agent",name:"agent",label:a("AGENT_MGMT.AGENT_TYPES.AGENT")}],A=d.value.map(v=>({id:v.id,name:`custom_${v.id}`,label:v.name}));return[...b,...A]}),g=y(()=>h.value.find(b=>b.id===l.value||b.name===l.value)),f=async()=>{var b;if(c.value.$touch(),!c.value.$invalid)try{const A={name:o.value,email:i.value};g.value.name.startsWith("custom_")?A.custom_role_id=g.value.id:A.role=g.value.name,await s.dispatch("agents/create",A),ne(a("AGENT_MGMT.ADD.API.SUCCESS_MESSAGE")),n("close")}catch(A){const{response:{data:{error:v="",attributes:T=[],message:_=""}={}}={}}=A;let N="";((b=A==null?void 0:A.response)==null?void 0:b.status)===422&&!T.includes("base")?N=a("AGENT_MGMT.ADD.API.EXIST_MESSAGE"):N=a("AGENT_MGMT.ADD.API.ERROR_MESSAGE"),ne(v||_||N)}};return(b,A)=>{const v=W("woot-modal-header");return p(),E("div",h6,[S(v,{"header-title":b.$t("AGENT_MGMT.ADD.TITLE"),"header-content":b.$t("AGENT_MGMT.ADD.DESC")},null,8,["header-title","header-content"]),m("form",{class:"flex flex-col items-start w-full",onSubmit:Ve(f,["prevent"])},[m("div",f6,[m("label",{class:ae({error:C(c).agentName.$error})},[xe(I(b.$t("AGENT_MGMT.ADD.FORM.NAME.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":A[0]||(A[0]=T=>o.value=T),type:"text",placeholder:b.$t("AGENT_MGMT.ADD.FORM.NAME.PLACEHOLDER"),onInput:A[1]||(A[1]=(...T)=>C(c).agentName.$touch&&C(c).agentName.$touch(...T))},null,40,g6),[[gt,o.value]])],2)]),m("div",_6,[m("label",{class:ae({error:C(c).selectedRoleId.$error})},[xe(I(b.$t("AGENT_MGMT.ADD.FORM.AGENT_TYPE.LABEL"))+" ",1),re(m("select",{"onUpdate:modelValue":A[2]||(A[2]=T=>l.value=T),onChange:A[3]||(A[3]=(...T)=>C(c).selectedRoleId.$touch&&C(c).selectedRoleId.$touch(...T))},[(p(!0),E(ue,null,Ae(h.value,T=>(p(),E("option",{key:T.id,value:T.id},I(T.label),9,v6))),128))],544),[[Nn,l.value]]),C(c).selectedRoleId.$error?(p(),E("span",E6,I(b.$t("AGENT_MGMT.ADD.FORM.AGENT_TYPE.ERROR")),1)):$("",!0)],2)]),m("div",b6,[m("label",{class:ae({error:C(c).agentEmail.$error})},[xe(I(b.$t("AGENT_MGMT.ADD.FORM.EMAIL.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":A[4]||(A[4]=T=>i.value=T),type:"email",placeholder:b.$t("AGENT_MGMT.ADD.FORM.EMAIL.PLACEHOLDER"),onInput:A[5]||(A[5]=(...T)=>C(c).agentEmail.$touch&&C(c).agentEmail.$touch(...T))},null,40,T6),[[gt,i.value]])],2)]),m("div",S6,[S(te,{faded:"",slate:"",type:"reset",label:b.$t("AGENT_MGMT.ADD.CANCEL_BUTTON_TEXT"),onClick:A[6]||(A[6]=Ve(T=>n("close"),["prevent"]))},null,8,["label"]),S(te,{type:"submit",label:b.$t("AGENT_MGMT.ADD.FORM.SUBMIT"),disabled:C(c).$invalid||C(u).isCreating,"is-loading":C(u).isCreating},null,8,["label","disabled","is-loading"])])],32)])}}},y6={class:"flex flex-col h-auto overflow-auto"},I6={class:"w-full"},C6=["placeholder"],N6={class:"w-full"},O6=["value"],R6={key:0,class:"message"},x6={class:"w-full"},w6=["value"],$6={key:0,class:"message"},M6={class:"flex flex-row justify-start w-full gap-2 px-0 py-2"},L6={class:"w-[50%] ltr:text-left rtl:text-right"},D6={class:"w-[50%] flex justify-end items-center gap-2"},P6={__name:"EditAgent",props:{id:{type:Number,required:!0},name:{type:String,required:!0},email:{type:String,default:""},type:{type:String,default:""},availability:{type:String,default:""},provider:{type:String,default:""},customRoleId:{type:Number,default:null}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,{AVAILABILITY_STATUS_KEYS:a}=yt,o=rt(),{t:i}=be(),l=j(n.name),r=j(n.availability),c=j(n.customRoleId||n.type),u=j({email:n.email}),d={agentName:{required:Ye,minLength:en(1)},selectedRoleId:{required:Ye},agentAvailability:{required:Ye}},h=bt(d,{agentName:l,selectedRoleId:c,agentAvailability:r}),g=y(()=>`${i("AGENT_MGMT.EDIT.TITLE")} - ${n.name}`),f=_e("agents/getUIFlags"),b=_e("customRole/getCustomRoles"),A=y(()=>{const O=[{id:"administrator",name:"administrator",label:i("AGENT_MGMT.AGENT_TYPES.ADMINISTRATOR")},{id:"agent",name:"agent",label:i("AGENT_MGMT.AGENT_TYPES.AGENT")}],x=b.value.map(w=>({id:w.id,name:`custom_${w.id}`,label:w.name}));return[...O,...x]}),v=y(()=>A.value.find(O=>O.id===c.value||O.name===c.value)),T=y(()=>[i("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.ONLINE"),i("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.BUSY"),i("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.OFFLINE")]),_=y(()=>T.value.map((O,x)=>({label:O,value:a[x],disabled:n.availability===a[x]}))),N=async()=>{if(h.value.$touch(),!h.value.$invalid)try{const O={id:n.id,name:l.value,availability:r.value};v.value.name.startsWith("custom_")?O.custom_role_id=v.value.id:(O.role=v.value.name,O.custom_role_id=null),await o.dispatch("agents/update",O),ne(i("AGENT_MGMT.EDIT.API.SUCCESS_MESSAGE")),s("close")}catch{ne(i("AGENT_MGMT.EDIT.API.ERROR_MESSAGE"))}},R=async()=>{try{await hl.resetPassword(u.value),ne(i("AGENT_MGMT.EDIT.PASSWORD_RESET.ADMIN_SUCCESS_MESSAGE"))}catch{ne(i("AGENT_MGMT.EDIT.PASSWORD_RESET.ERROR_MESSAGE"))}};return(O,x)=>{const w=W("woot-modal-header");return p(),E("div",y6,[S(w,{"header-title":g.value},null,8,["header-title"]),m("form",{class:"w-full",onSubmit:Ve(N,["prevent"])},[m("div",I6,[m("label",{class:ae({error:C(h).agentName.$error})},[xe(I(O.$t("AGENT_MGMT.EDIT.FORM.NAME.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":x[0]||(x[0]=D=>l.value=D),type:"text",placeholder:O.$t("AGENT_MGMT.EDIT.FORM.NAME.PLACEHOLDER"),onInput:x[1]||(x[1]=(...D)=>C(h).agentName.$touch&&C(h).agentName.$touch(...D))},null,40,C6),[[gt,l.value]])],2)]),m("div",N6,[m("label",{class:ae({error:C(h).selectedRoleId.$error})},[xe(I(O.$t("AGENT_MGMT.EDIT.FORM.AGENT_TYPE.LABEL"))+" ",1),re(m("select",{"onUpdate:modelValue":x[2]||(x[2]=D=>c.value=D),onChange:x[3]||(x[3]=(...D)=>C(h).selectedRoleId.$touch&&C(h).selectedRoleId.$touch(...D))},[(p(!0),E(ue,null,Ae(A.value,D=>(p(),E("option",{key:D.id,value:D.id},I(D.label),9,O6))),128))],544),[[Nn,c.value]]),C(h).selectedRoleId.$error?(p(),E("span",R6,I(O.$t("AGENT_MGMT.EDIT.FORM.AGENT_TYPE.ERROR")),1)):$("",!0)],2)]),m("div",x6,[m("label",{class:ae({error:C(h).agentAvailability.$error})},[xe(I(O.$t("PROFILE_SETTINGS.FORM.AVAILABILITY.LABEL"))+" ",1),re(m("select",{"onUpdate:modelValue":x[4]||(x[4]=D=>r.value=D),onChange:x[5]||(x[5]=(...D)=>C(h).agentAvailability.$touch&&C(h).agentAvailability.$touch(...D))},[(p(!0),E(ue,null,Ae(_.value,D=>(p(),E("option",{key:D.value,value:D.value},I(D.label),9,w6))),128))],544),[[Nn,r.value]]),C(h).agentAvailability.$error?(p(),E("span",$6,I(O.$t("AGENT_MGMT.EDIT.FORM.AGENT_AVAILABILITY.ERROR")),1)):$("",!0)],2)]),m("div",M6,[m("div",L6,[e.provider!=="saml"?(p(),L(te,{key:0,ghost:"",type:"button",icon:"i-lucide-lock-keyhole",class:"!px-2",label:O.$t("AGENT_MGMT.EDIT.PASSWORD_RESET.ADMIN_RESET_BUTTON"),onClick:Ve(R,["prevent"])},null,8,["label"])):$("",!0)]),m("div",D6,[S(te,{faded:"",slate:"",type:"reset",label:O.$t("AGENT_MGMT.EDIT.CANCEL_BUTTON_TEXT"),onClick:x[6]||(x[6]=Ve(D=>s("close"),["prevent"]))},null,8,["label"]),S(te,{type:"submit",label:O.$t("AGENT_MGMT.EDIT.FORM.SUBMIT"),disabled:C(h).$invalid||C(f).isUpdating,"is-loading":C(f).isUpdating},null,8,["label","disabled","is-loading"])])])],32)])}}},k6={class:"flex flex-col w-full h-full gap-8 font-inter"},B6={key:1,class:"flex-1 py-20 text-n-slate-12 flex items-center justify-center text-base"},Es={__name:"SettingsLayout",props:{isLoading:{type:Boolean,default:!1},noRecordsFound:{type:Boolean,default:!1},loadingMessage:{type:String,default:""},noRecordsMessage:{type:String,default:""}},setup(e){return(t,n)=>{const s=W("woot-loading-state");return p(),E("div",k6,[We(t.$slots,"header"),m("main",null,[We(t.$slots,"preBody"),e.isLoading?We(t.$slots,"loading",{key:0},()=>[S(s,{message:e.loadingMessage},null,8,["message"])]):e.noRecordsFound?(p(),E("p",B6,I(e.noRecordsMessage),1)):We(t.$slots,"body",{key:2}),We(t.$slots,"default")])])}}},U6={class:"divide-y divide-n-weak"},F6={class:"divide-y divide-n-weak text-n-slate-11"},G6={class:"py-4 ltr:pr-4 rtl:pl-4"},V6={class:"flex flex-row items-center gap-4"},H6={class:"block font-medium capitalize"},W6={class:"relative py-4 ltr:pr-4 rtl:pl-4"},z6={class:"flex flex-col gap-1 p-4"},Y6={class:"font-semibold"},j6={class:"pl-4 mb-0 list-disc"},K6={class:"py-4 ltr:pr-4 rtl:pl-4"},X6={key:0},q6={key:1},Z6={class:"py-4"},Q6={class:"flex justify-end gap-1"},J6={__name:"Index",setup(e){const t=pn(),n=rt(),{t:s}=be(),a=j({}),o=j(!1),i=j(!1),l=j(!1),r=j({message:""}),c=j({}),u=y(()=>`${s("AGENT_MGMT.DELETE.CONFIRM.YES")} ${c.value.name}`),d=y(()=>`${s("AGENT_MGMT.DELETE.CONFIRM.NO")} ${c.value.name}`),h=y(()=>` ${c.value.name}?`),g=y(()=>t["agents/getAgents"].value),f=y(()=>t["agents/getUIFlags"].value),b=y(()=>t.getCurrentUserID.value),A=_e("customRole/getCustomRoles");lt(()=>{n.dispatch("agents/get"),n.dispatch("customRole/getCustomRole")});const v=V=>A.value.find(G=>G.id===V.custom_role_id),T=V=>{if(!V.custom_role_id)return s(`AGENT_MGMT.AGENT_TYPES.${V.role.toUpperCase()}`);const G=v(V);return G?G.name:""},_=V=>{if(!V.custom_role_id)return[];const G=v(V);return(G==null?void 0:G.permissions)||[]},N=y(()=>g.value.filter(V=>V.role==="administrator"&&V.confirmed)),R=V=>b.value!==V.id,O=V=>b.value===V.id?!1:V.confirmed&&V.role==="administrator"?N.value.length!==1:!0,x=V=>{a.value[c.value.id]=!1,c.value={},r.value.message=V,ne(V)},w=()=>{o.value=!0},D=()=>{o.value=!1},M=V=>{l.value=!0,c.value=V},P=()=>{l.value=!1},U=V=>{i.value=!0,c.value=V},F=()=>{i.value=!1},k=async V=>{try{await n.dispatch("agents/delete",V),x(s("AGENT_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch{x(s("AGENT_MGMT.DELETE.API.ERROR_MESSAGE"))}},B=()=>{a.value[c.value.id]=!0,F(),k(c.value.id)};return(V,G)=>{const K=W("woot-modal"),se=W("woot-delete-modal"),ee=Qe("tooltip");return p(),L(Es,{"is-loading":f.value.isFetching,"loading-message":V.$t("AGENT_MGMT.LOADING"),"no-records-found":!g.value.length,"no-records-message":V.$t("AGENT_MGMT.LIST.404")},{header:Y(()=>[S(hs,{title:V.$t("AGENT_MGMT.HEADER"),description:V.$t("AGENT_MGMT.DESCRIPTION"),"link-text":V.$t("AGENT_MGMT.LEARN_MORE"),"feature-name":"agents"},{actions:Y(()=>[S(te,{icon:"i-lucide-circle-plus",label:V.$t("AGENT_MGMT.HEADER_BTN_TXT"),onClick:w},null,8,["label"])]),_:1},8,["title","description","link-text"])]),body:Y(()=>[m("table",U6,[m("tbody",F6,[(p(!0),E(ue,null,Ae(g.value,(X,z)=>(p(),E("tr",{key:X.email},[m("td",G6,[m("div",V6,[S(kt,{src:X.thumbnail,name:X.name,status:X.availability_status,size:40,"hide-offline-status":"","rounded-full":""},null,8,["src","name","status"]),m("div",null,[m("span",H6,I(X.name),1),m("span",null,I(X.email),1)])])]),m("td",W6,[m("span",{class:ae(["block font-medium w-fit",{"hover:text-gray-900 group cursor-pointer":X.custom_role_id}])},[xe(I(T(X))+" ",1),m("div",{class:ae(["absolute left-0 z-10 hidden max-w-[300px] w-auto bg-white rounded-xl border border-n-weak shadow-lg top-14 md:top-12 dark:bg-n-solid-2",{"group-hover:block":X.custom_role_id}])},[m("div",z6,[m("span",Y6,I(V.$t("AGENT_MGMT.LIST.AVAILABLE_CUSTOM_ROLE")),1),m("ul",j6,[(p(!0),E(ue,null,Ae(_(X),H=>(p(),E("li",{key:H,class:"font-normal"},I(V.$t(`CUSTOM_ROLE.PERMISSIONS.${H.toUpperCase()}`)),1))),128))])])],2)],2)]),m("td",K6,[X.confirmed?(p(),E("span",X6,I(V.$t("AGENT_MGMT.LIST.VERIFIED")),1)):$("",!0),X.confirmed?$("",!0):(p(),E("span",q6,I(V.$t("AGENT_MGMT.LIST.VERIFICATION_PENDING")),1))]),m("td",Z6,[m("div",Q6,[R(X)?re((p(),L(te,{key:0,icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:H=>M(X)},null,8,["onClick"])),[[ee,V.$t("AGENT_MGMT.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]):$("",!0),O(X)?re((p(),L(te,{key:1,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":a.value[X.id],onClick:H=>U(X,z)},null,8,["is-loading","onClick"])),[[ee,V.$t("AGENT_MGMT.DELETE.BUTTON_TEXT"),void 0,{top:!0}]]):$("",!0)])])]))),128))])])]),default:Y(()=>[S(K,{show:o.value,"onUpdate:show":G[0]||(G[0]=X=>o.value=X),"on-close":D},{default:Y(()=>[S(A6,{onClose:D})]),_:1},8,["show"]),S(K,{show:l.value,"onUpdate:show":G[1]||(G[1]=X=>l.value=X),"on-close":P},{default:Y(()=>[l.value?(p(),L(P6,{key:0,id:c.value.id,name:c.value.name,provider:c.value.provider,type:c.value.role,email:c.value.email,availability:c.value.availability_status,"custom-role-id":c.value.custom_role_id,onClose:P},null,8,["id","name","provider","type","email","availability","custom-role-id"])):$("",!0)]),_:1},8,["show"]),S(se,{show:i.value,"onUpdate:show":G[2]||(G[2]=X=>i.value=X),"on-close":F,"on-confirm":B,title:V.$t("AGENT_MGMT.DELETE.CONFIRM.TITLE"),message:V.$t("AGENT_MGMT.DELETE.CONFIRM.MESSAGE"),"message-value":h.value,"confirm-text":u.value,"reject-text":d.value},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},e9={routes:[{path:vt("accounts/:accountId/settings/agents"),component:Rs,children:[{path:"",redirect:e=>({name:"agent_list",params:e.params})},{path:"list",name:"agent_list",component:J6,meta:{featureFlag:ft.AGENT_MANAGEMENT,permissions:["administrator"]}}]}]},t9={class:"flex flex-col w-full shadow outline-1 outline outline-n-container group/cardLayout rounded-2xl bg-n-solid-2"},ba={__name:"CardLayout",props:{layout:{type:String,default:"col"},selectable:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(a,o)=>(p(),E("div",t9,[m("div",{class:ae(["flex w-full gap-3 py-5",[e.layout==="col"?"flex-col":"flex-row justify-between items-center",e.selectable?"px-10 py-6":"px-6"]]),onClick:s},[We(a.$slots,"default")],2),We(a.$slots,"after")]))}},n9={class:"flex flex-col items-start gap-2"},s9={class:"flex justify-between w-full items-center"},a9={class:"text-n-slate-12 text-base font-medium"},o9={class:"text-n-slate-11 text-sm mb-0"},i9={class:"flex flex-col items-start gap-3 mt-3"},l9={__name:"AssignmentCard",props:{title:{type:String,default:""},description:{type:String,default:""},features:{type:Array,default:()=>[]}},emits:["click"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(a,o)=>(p(),L(ba,{class:"[&>div]:px-5 cursor-pointer",onClick:s},{default:Y(()=>[m("div",n9,[m("div",s9,[m("h3",a9,I(e.title),1),S(te,{xs:"",slate:"",ghost:"",icon:"i-lucide-chevron-right",onClick:Ve(s,["stop"])})]),m("p",o9,I(e.description),1)]),m("ul",i9,[(p(!0),E(ue,null,Ae(e.features,i=>(p(),E("li",{key:i.id,class:"flex items-center gap-3 text-sm"},[S(dt,{icon:i.icon,class:"text-n-slate-11 size-4 flex-shrink-0"},null,8,["icon"]),xe(" "+I(i.label),1)]))),128))])]),_:1}))}},r9={class:"grid grid-cols-1 2xl:grid-cols-2 gap-6"},c9={__name:"Index",setup(e){const t=Ft(),{t:n}=be(),s=y(()=>[{key:"agent_assignment_policy_index",title:n("ASSIGNMENT_POLICY.INDEX.ASSIGNMENT_POLICY.TITLE"),description:n("ASSIGNMENT_POLICY.INDEX.ASSIGNMENT_POLICY.DESCRIPTION"),features:[{icon:"i-lucide-circle-fading-arrow-up",label:n("ASSIGNMENT_POLICY.INDEX.ASSIGNMENT_POLICY.FEATURES.0")},{icon:"i-lucide-scale",label:n("ASSIGNMENT_POLICY.INDEX.ASSIGNMENT_POLICY.FEATURES.1")},{icon:"i-lucide-inbox",label:n("ASSIGNMENT_POLICY.INDEX.ASSIGNMENT_POLICY.FEATURES.2")}]},{key:"agent_capacity_policy_index",title:n("ASSIGNMENT_POLICY.INDEX.AGENT_CAPACITY_POLICY.TITLE"),description:n("ASSIGNMENT_POLICY.INDEX.AGENT_CAPACITY_POLICY.DESCRIPTION"),features:[{icon:"i-lucide-glass-water",label:n("ASSIGNMENT_POLICY.INDEX.AGENT_CAPACITY_POLICY.FEATURES.0")},{icon:"i-lucide-circle-minus",label:n("ASSIGNMENT_POLICY.INDEX.AGENT_CAPACITY_POLICY.FEATURES.1")},{icon:"i-lucide-users-round",label:n("ASSIGNMENT_POLICY.INDEX.AGENT_CAPACITY_POLICY.FEATURES.2")}]}]),a=o=>{t.push({name:o})};return(o,i)=>(p(),L(Es,{"no-records-found":!1,class:"gap-10"},{header:Y(()=>[S(hs,{title:o.$t("ASSIGNMENT_POLICY.INDEX.HEADER.TITLE"),description:o.$t("ASSIGNMENT_POLICY.INDEX.HEADER.DESCRIPTION"),"feature-name":"assignment-policy"},null,8,["title","description"])]),body:Y(()=>[m("div",r9,[(p(!0),E(ue,null,Ae(s.value,l=>(p(),L(l9,{key:l.key,title:l.title,description:l.description,features:l.features,onClick:r=>a(l.key)},null,8,["title","description","features","onClick"]))),128))])]),_:1}))}},u9=["aria-label"],d9={class:"flex items-center mb-0 min-w-0"},p9=["onClick"],m9={class:"min-w-0 truncate"},h9={key:2,class:"text-sm truncate text-n-slate-12 min-w-0 block"},Al={__name:"Breadcrumb",props:{items:{type:Array,required:!0}},emits:["click"],setup(e,{emit:t}){const n=t,{t:s}=be(),a=(o,i)=>{n("click",o,i)};return(o,i)=>(p(),E("nav",{"aria-label":C(s)("BREADCRUMB.ARIA_LABEL"),class:"flex items-center h-8 min-w-0"},[m("ol",d9,[(p(!0),E(ue,null,Ae(e.items,(l,r)=>(p(),E("li",{key:r,class:ae(["flex items-center",{"min-w-0 flex-1":r===e.items.length-1}])},[r>0?(p(),L(dt,{key:0,icon:"i-lucide-chevron-right",class:"flex-shrink-0 mx-2 size-4 text-n-slate-11 dark:text-n-slate-11"})):$("",!0),r!==e.items.length-1?(p(),E("button",{key:1,class:"inline-flex items-center justify-center min-w-0 gap-2 p-0 text-sm font-medium transition-all duration-200 ease-in-out border-0 rounded-lg text-n-slate-11 hover:text-n-slate-12 outline-transparent max-w-56",onClick:c=>a(l,r)},[m("span",m9,I(l.label),1)],8,p9)):(p(),E("span",h9,I(l.emoji?l.emoji:"")+" "+I(l.label),1))],2))),128))])],8,u9))}},f9={class:"relative flex items-center group"},g9={class:"text-n-slate-12 text-sm"},_9={key:1,class:"top-full mt-1 ltr:left-0 rtl:right-0 z-50 flex flex-col items-start absolute bg-n-alpha-3 backdrop-blur-[50px] border-0 gap-4 outline outline-1 outline-n-weak p-3 rounded-xl max-w-96 min-w-80 max-h-[20rem] overflow-y-auto"},v9={class:"flex items-center gap-2.5 pb-2"},E9={class:"text-sm text-n-slate-12 font-medium"},b9={key:0,class:"flex items-center justify-center py-3 w-full text-n-slate-11"},T9={key:1,class:"flex flex-col gap-4 w-full"},S9={class:"flex items-center gap-2 min-w-0 w-full"},A9={class:"flex items-center gap-1 min-w-0 flex-1"},y9=["title"],I9={key:0,class:"text-sm text-n-slate-11 flex-shrink-0"},C9={key:0,class:"text-sm text-n-slate-11 flex-shrink-0"},eA={__name:"CardPopover",props:{count:{type:Number,default:0},title:{type:String,default:""},icon:{type:String,default:""},items:{type:Array,default:()=>[]},isFetching:{type:Boolean,default:!1}},emits:["fetch"],setup(e,{emit:t}){const n=t,[s,a]=yn(),o=()=>{n("fetch"),a(!s.value)},i=()=>{s.value&&a(!1)};return(l,r)=>re((p(),E("div",f9,[e.count?(p(),E("button",{key:0,class:"h-6 px-2 rounded-md bg-n-alpha-2 gap-1.5 flex items-center",onClick:r[0]||(r[0]=c=>o())},[S(dt,{icon:e.icon,class:"size-3.5 text-n-slate-12"},null,8,["icon"]),m("span",g9,I(e.count),1)])):$("",!0),C(s)?(p(),E("div",_9,[m("div",v9,[S(dt,{icon:e.icon,class:"size-3.5"},null,8,["icon"]),m("span",E9,I(e.title),1)]),e.isFetching?(p(),E("div",b9,[S(An)])):(p(),E("div",T9,[(p(!0),E(ue,null,Ae(e.items,c=>(p(),E("div",{key:c.id,class:"flex items-center justify-between gap-2 min-w-0 w-full"},[m("div",S9,[c.icon?(p(),L(dt,{key:0,icon:c.icon,class:"size-4 text-n-slate-12 flex-shrink-0"},null,8,["icon"])):(p(),L(kt,{key:1,title:c.name,src:c.avatarUrl,name:c.name,size:20,"rounded-full":""},null,8,["title","src","name"])),m("div",A9,[m("span",{title:c.name,class:"text-sm text-n-slate-12 truncate min-w-0"},I(c.name),9,y9),c.id?(p(),E("span",I9,I(`#${c.id}`),1)):$("",!0)])]),c.email?(p(),E("span",C9,I(c.email),1)):$("",!0)]))),128))]))])):$("",!0)])),[[C(ms),i]])}},N9={class:"flex flex-col gap-2 relative justify-between w-full"},O9={class:"flex items-center gap-3 justify-between w-full"},R9={class:"flex items-center gap-3"},x9={class:"text-base font-medium text-n-slate-12 line-clamp-1"},w9={class:"flex items-center gap-2"},$9={class:"flex items-center rounded-md bg-n-alpha-2 h-6 px-2"},M9={class:"flex items-center gap-2"},L9={key:0,class:"w-px h-2.5 bg-n-slate-5"},D9={class:"text-n-slate-11 text-sm line-clamp-1 mb-0 py-1"},P9={class:"flex items-center gap-3 py-1.5"},k9={key:0,class:"text-n-slate-11 text-sm"},B9={class:"text-n-slate-12"},U9={key:1,class:"w-px h-3 bg-n-strong"},F9={key:2,class:"text-n-slate-11 text-sm"},G9={class:"text-n-slate-12"},V9={__name:"AssignmentPolicyCard",props:{id:{type:Number,required:!0},name:{type:String,default:""},description:{type:String,default:""},assignmentOrder:{type:String,default:""},conversationPriority:{type:String,default:""},assignedInboxCount:{type:Number,default:0},enabled:{type:Boolean,default:!1},inboxes:{type:Array,default:()=>[]},isFetchingInboxes:{type:Boolean,default:!1}},emits:["edit","delete","fetchInboxes"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=y(()=>n.inboxes.map(d=>({name:d.name,id:d.id,icon:ni(d.channelType,d.medium,"line")}))),i=y(()=>Nv(n.assignmentOrder)),l=y(()=>Nv(n.conversationPriority)),r=()=>{s("edit",n.id)},c=()=>{s("delete",n.id)},u=()=>{var d;((d=n.inboxes)==null?void 0:d.length)>0||s("fetchInboxes",n.id)};return(d,h)=>(p(),L(ba,{class:"[&>div]:px-5"},{default:Y(()=>[m("div",N9,[m("div",O9,[m("div",R9,[m("h3",x9,I(e.name),1),m("div",w9,[m("div",$9,[m("span",{class:ae(["text-xs",e.enabled?"text-n-teal-11":"text-n-slate-12"])},I(e.enabled?C(a)("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.INDEX.CARD.ACTIVE"):C(a)("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.INDEX.CARD.INACTIVE")),3)]),S(eA,{title:C(a)("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.INDEX.CARD.POPOVER"),icon:"i-lucide-inbox",count:e.assignedInboxCount,items:o.value,"is-fetching":e.isFetchingInboxes,onFetch:u},null,8,["title","count","items","is-fetching"])])]),m("div",M9,[S(te,{label:C(a)("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.INDEX.CARD.EDIT"),sm:"",slate:"",link:"",class:"px-2",onClick:r},null,8,["label"]),i.value?(p(),E("div",L9)):$("",!0),S(te,{icon:"i-lucide-trash",sm:"",slate:"",ghost:"",onClick:c})])]),m("p",D9,I(e.description),1),m("div",P9,[i.value?(p(),E("span",k9,[xe(I(`${C(a)("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.INDEX.CARD.ORDER")}:`)+" ",1),m("span",B9,I(i.value),1)])):$("",!0),i.value?(p(),E("div",U9)):$("",!0),l.value?(p(),E("span",F9,[xe(I(`${C(a)("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.INDEX.CARD.PRIORITY")}:`)+" ",1),m("span",G9,I(l.value),1)])):$("",!0)])])]),_:1}))}},tA={__name:"ConfirmDeletePolicyDialog",emits:["delete"],setup(e,{expose:t,emit:n}){const s=n,{t:a}=be(),o=j(null),i=j(null),l=u=>{i.value=u,o.value.open()},r=()=>{o.value.close()},c=()=>{s("delete",i.value)};return t({openDialog:l,closeDialog:r}),(u,d)=>(p(),L($n,{ref_key:"dialogRef",ref:o,type:"alert",title:C(a)("ASSIGNMENT_POLICY.DELETE_POLICY.TITLE"),description:C(a)("ASSIGNMENT_POLICY.DELETE_POLICY.DESCRIPTION"),"confirm-button-label":C(a)("ASSIGNMENT_POLICY.DELETE_POLICY.CONFIRM_BUTTON_LABEL"),"cancel-button-label":C(a)("ASSIGNMENT_POLICY.DELETE_POLICY.CANCEL_BUTTON_LABEL"),onConfirm:c},null,8,["title","description","confirm-button-label","cancel-button-label"]))}},H9={class:"flex items-center gap-2 w-full justify-between"},W9={class:"flex flex-col gap-4 pt-8"},z9={__name:"AgentAssignmentIndexPage",setup(e){const t=rt(),{t:n}=be(),s=Ft(),a=_e("assignmentPolicies/getAssignmentPolicies"),o=_e("assignmentPolicies/getUIFlags"),i=_e("assignmentPolicies/getInboxUiFlags"),l=j(null),r=y(()=>[{label:n("ASSIGNMENT_POLICY.INDEX.HEADER.TITLE"),routeName:"assignment_policy_index"},{label:n("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.INDEX.HEADER.TITLE")}]),c=b=>{s.push({name:b.routeName})},u=()=>{s.push({name:"agent_assignment_policy_create"})},d=b=>{s.push({name:"agent_assignment_policy_edit",params:{id:b}})},h=b=>{i.value.isFetching||t.dispatch("assignmentPolicies/getInboxes",b)},g=b=>{l.value.openDialog(b)},f=async b=>{try{await t.dispatch("assignmentPolicies/delete",b),ne(n("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.DELETE_POLICY.SUCCESS_MESSAGE")),l.value.closeDialog()}catch{ne(n("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.DELETE_POLICY.ERROR_MESSAGE"))}};return lt(()=>{t.dispatch("assignmentPolicies/get")}),(b,A)=>(p(),L(Es,{"is-loading":C(o).isFetching,"no-records-found":C(a).length===0,"no-records-message":b.$t("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.INDEX.NO_RECORDS_FOUND")},{header:Y(()=>[m("div",H9,[S(Al,{items:r.value,onClick:c},null,8,["items"]),S(te,{icon:"i-lucide-plus",md:"",onClick:u},{default:Y(()=>[xe(I(b.$t("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.INDEX.HEADER.CREATE_POLICY")),1)]),_:1})])]),body:Y(()=>[m("div",W9,[(p(!0),E(ue,null,Ae(C(a),v=>(p(),L(V9,Qn({key:v.id,ref_for:!0},v,{"is-fetching-inboxes":C(i).isFetching,onFetchInboxes:h,onEdit:d,onDelete:g}),null,16,["is-fetching-inboxes"]))),128))])]),default:Y(()=>[S(tA,{ref_key:"confirmDeletePolicyDialogRef",ref:l,onDelete:f},null,512)]),_:1},8,["is-loading","no-records-found","no-records-message"]))}},Y9={class:"flex flex-col gap-4 pb-4"},j9={class:"flex items-center gap-6"},K9={class:"flex-1"},X9={class:"flex items-center gap-6"},q9={class:"flex-1"},Z9={key:0,class:"flex items-center gap-6"},Q9={class:"flex items-center gap-2"},J9={class:"text-sm text-n-slate-11"},nA={__name:"BaseInfo",props:jt({nameLabel:{type:String,default:""},namePlaceholder:{type:String,default:""},descriptionLabel:{type:String,default:""},descriptionPlaceholder:{type:String,default:""},statusLabel:{type:String,default:""},statusPlaceholder:{type:String,default:""}},{policyName:{type:String,default:""},policyNameModifiers:{},description:{type:String,default:""},descriptionModifiers:{},enabled:{type:Boolean,default:!0},enabledModifiers:{}}),emits:jt(["validationChange"],["update:policyName","update:description","update:enabled"]),setup(e,{emit:t}){const n=t,s=Xt(e,"policyName"),a=Xt(e,"description"),o=Xt(e,"enabled"),i={policyName:{required:Ye,minLength:en(1)},description:{required:Ye,minLength:en(1)}},l=bt(i,{policyName:s,description:a}),r=y(()=>!l.value.$invalid);return it(r,()=>{n("validationChange",{isValid:r.value,section:"baseInfo"})},{immediate:!0}),(c,u)=>(p(),E("div",Y9,[m("div",j9,[S(ta,{label:e.nameLabel,name:"policyName",class:"flex items-center w-full [&>label]:min-w-[120px]"},{default:Y(()=>[m("div",K9,[S(Tt,{modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=d=>s.value=d),type:"text",placeholder:e.namePlaceholder},null,8,["modelValue","placeholder"])])]),_:1},8,["label"])]),m("div",X9,[S(ta,{label:e.descriptionLabel,name:"description",class:"flex items-center w-full [&>label]:min-w-[120px]"},{default:Y(()=>[m("div",q9,[S(Tt,{modelValue:a.value,"onUpdate:modelValue":u[1]||(u[1]=d=>a.value=d),type:"text",placeholder:e.descriptionPlaceholder},null,8,["modelValue","placeholder"])])]),_:1},8,["label"])]),e.statusLabel?(p(),E("div",Z9,[S(ta,{label:e.statusLabel,name:"enabled",class:"flex items-center w-full [&>label]:min-w-[120px]"},{default:Y(()=>[m("div",Q9,[S(va,{modelValue:o.value,"onUpdate:modelValue":u[2]||(u[2]=d=>o.value=d)},null,8,["modelValue"]),m("span",J9,I(e.statusPlaceholder),1)])]),_:1},8,["label"])])):$("",!0)]))}},eU={class:"absolute top-4 right-4"},tU=["id","checked","value","name"],nU={class:"flex flex-col gap-3 items-start"},sU={class:"text-sm font-medium text-n-slate-12"},aU={class:"text-sm text-n-slate-11"},oU={__name:"RadioCard",props:{id:{type:String,required:!0},label:{type:String,required:!0},description:{type:String,required:!0},isActive:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:t}){const n=e,s=t,a=()=>{n.isActive||s("select",n.id)};return(o,i)=>(p(),E("div",{class:ae(["relative cursor-pointer rounded-xl outline outline-1 p-4 transition-all duration-200 bg-n-solid-1 py-4 ltr:pl-4 rtl:pr-4 ltr:pr-6 rtl:pl-6",[e.isActive?"outline-n-blue-9":"outline-n-weak hover:outline-n-strong"]]),onClick:a},[m("div",eU,[m("input",{id:`${e.id}`,checked:e.isActive,value:e.id,name:e.id,type:"radio",class:"h-4 w-4 border-n-slate-6 text-n-brand focus:ring-n-brand focus:ring-offset-0",onChange:a},null,40,tU)]),m("div",nU,[m("h3",sU,I(e.label),1),m("p",aU,I(e.description),1)])],2))}},iU={class:"flex items-start xl:items-center flex-col md:flex-row gap-4 lg:gap-3 bg-n-solid-1 p-4 outline outline-1 outline-n-weak rounded-xl"},lU={class:"flex items-center gap-3"},rU={class:"text-sm font-medium text-n-slate-12"},cU={class:"flex-1"},uU={class:"flex sm:flex-row flex-col items-start sm:items-center gap-4"},dU={class:"text-sm font-medium text-n-slate-12"},pU={class:"flex items-center gap-2 flex-1 [&>select]:!bg-n-alpha-2 [&>select]:!outline-none [&>select]:hover:brightness-110"},mU={__name:"FairDistribution",props:{fairDistributionLimit:{type:Number,default:100},fairDistributionLimitModifiers:{},fairDistributionWindow:{type:Number,default:3600},fairDistributionWindowModifiers:{}},emits:["update:fairDistributionLimit","update:fairDistributionWindow"],setup(e){const{t}=be(),n=Xt(e,"fairDistributionLimit",{set(i){return Number(i)||0}}),s=Xt(e,"fairDistributionWindow",{set(i){return Number(i)||0}}),a=j(Wn.MINUTES),o=i=>{const l=Number(i)||0;return l===0?Wn.MINUTES:l%(24*60)===0?Wn.DAYS:l%60===0?Wn.HOURS:Wn.MINUTES};return lt(()=>{a.value=o(s.value)}),(i,l)=>(p(),E("div",iU,[m("div",lU,[m("label",rU,I(C(t)("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.FORM.FAIR_DISTRIBUTION.INPUT_MAX")),1),m("div",cU,[S(Tt,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=r=>n.value=r),type:"number",placeholder:"100",max:"100000",class:"w-full"},null,8,["modelValue"])])]),m("div",uU,[m("label",dU,I(C(t)("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.FORM.FAIR_DISTRIBUTION.DURATION")),1),m("div",pU,[S(s_,{"model-value":s.value,"onUpdate:modelValue":l[1]||(l[1]=r=>s.value=r),unit:a.value,"onUpdate:unit":l[2]||(l[2]=r=>a.value=r),min:10,max:1438560},null,8,["model-value","unit"])])])]))}},hU={key:0,class:"flex items-center justify-center py-3 w-full text-n-slate-11"},fU={key:1,class:"custom-dashed-border flex items-center justify-center py-6 w-full"},gU={class:"text-sm text-n-slate-11"},_U={key:2,class:"flex flex-col divide-y divide-n-weak"},vU={class:"flex items-center gap-2 col-span-2"},EU={class:"text-sm text-n-slate-12 truncate min-w-0"},bU={class:"flex items-start gap-2 col-span-1"},TU=["title"],SU={class:"col-span-1 justify-end flex items-center"},sA={__name:"DataTable",props:{items:{type:Array,default:()=>[]},isFetching:{type:Boolean,default:!1},emptyStateMessage:{type:String,default:""}},emits:["delete"],setup(e,{emit:t}){const n=t,s=a=>{n("delete",a)};return(a,o)=>e.isFetching?(p(),E("div",hU,[S(An)])):e.items.length===0&&e.emptyStateMessage?(p(),E("div",fU,[m("span",gU,I(e.emptyStateMessage),1)])):(p(),E("div",_U,[(p(!0),E(ue,null,Ae(e.items,i=>(p(),E("div",{key:i.id,class:"grid grid-cols-4 items-center gap-3 min-w-0 w-full justify-between h-[3.25rem] ltr:pr-2 rtl:pl-2"},[m("div",vU,[i.icon?(p(),L(dt,{key:0,icon:i.icon,class:"size-4 text-n-slate-12 flex-shrink-0"},null,8,["icon"])):(p(),L(kt,{key:1,title:i.name,src:i.avatarUrl,name:i.name,size:20,"rounded-full":""},null,8,["title","src","name"])),m("span",EU,I(i.name),1)]),m("div",bU,[m("span",{title:i.email||i.phoneNumber,class:"text-sm text-n-slate-12 truncate min-w-0"},I(i.email||i.phoneNumber),9,TU)]),m("div",SU,[S(te,{icon:"i-lucide-trash",slate:"",ghost:"",sm:"",type:"button",onClick:l=>s(i.id)},null,8,["onClick"])])]))),128))]))}},AU={class:"relative flex items-center group"},yU={class:"flex flex-col divide-y divide-n-slate-4 w-full"},IU=["onClick"],CU={class:"flex flex-col items-start gap-2 min-w-0 flex-1"},NU={class:"flex items-center gap-1 min-w-0 w-full"},OU=["title"],RU=["title"],z1=20,bp={__name:"AddDataDropdown",props:{label:{type:String,default:""},searchPlaceholder:{type:String,default:""},items:{type:Array,default:()=>[]}},emits:["add"],setup(e,{emit:t}){const n=e,s=t,[a,o]=yn(),i=j(),l=j(),r=j(""),{width:c,height:u}=Di(),{top:d,left:h,width:g,height:f}=pr(i),{width:b,height:A}=pr(l),v=y(()=>{if(!r.value)return n.items;const O=r.value.toLowerCase();return bl(n.items,O,["name"])}),T=O=>{s("add",O),o(!1)},_=y(()=>{if(!i.value||!l.value)return!1;const O=u.value-(d.value+f.value),x=d.value;return O<A.value+z1&&x>O}),N=y(()=>{if(!i.value||!l.value)return!1;const O=c.value-h.value,x=h.value+g.value;return O<b.value+z1&&x>O}),R=()=>{a.value&&o(!1)};return(O,x)=>re((p(),E("div",AU,[S(te,{ref_key:"buttonRef",ref:i,slate:"",type:"button",icon:"i-lucide-plus",sm:"",label:e.label,onClick:x[0]||(x[0]=w=>C(o)(!C(a)))},null,8,["label"]),C(a)?(p(),E("div",{key:0,ref_key:"dropdownRef",ref:l,class:ae(["z-50 flex flex-col items-start absolute bg-n-alpha-3 backdrop-blur-[50px] border-0 gap-4 outline outline-1 outline-n-weak rounded-xl max-w-96 min-w-80 max-h-[20rem] overflow-y-auto py-2",[_.value?"bottom-full mb-2":"top-full mt-2",N.value?"right-0":"left-0"]])},[m("div",yU,[S(Tt,{modelValue:r.value,"onUpdate:modelValue":x[1]||(x[1]=w=>r.value=w),placeholder:e.searchPlaceholder,"custom-input-class":"bg-transparent !outline-none w-full ltr:!pl-10 rtl:!pr-10 h-10"},{prefix:Y(()=>[S(dt,{icon:"i-lucide-search",class:"absolute -translate-y-1/2 text-n-slate-11 size-4 top-1/2 ltr:left-3 rtl:right-3"})]),_:1},8,["modelValue","placeholder"]),(p(!0),E(ue,null,Ae(v.value,w=>(p(),E("div",{key:w.id,class:ae(["flex gap-3 min-w-0 w-full py-4 px-3 hover:bg-n-alpha-2 cursor-pointer",{"items-center":w.color,"items-start":!w.color}]),onClick:D=>T(w)},[w.icon?(p(),L(dt,{key:0,icon:w.icon,class:"size-4 text-n-slate-12 flex-shrink-0 mt-0.5"},null,8,["icon"])):w.color?(p(),E("span",{key:1,style:Zt({backgroundColor:w.color}),class:"size-3 rounded-sm"},null,4)):(p(),L(kt,{key:2,title:w.name,src:w.avatarUrl,name:w.name,size:20,"rounded-full":""},null,8,["title","src","name"])),m("div",CU,[m("div",NU,[m("span",{title:w.name||w.title,class:"text-sm text-n-slate-12 truncate min-w-0 flex-1"},I(w.name||w.title),9,OU)]),w.email||w.phoneNumber?(p(),E("span",{key:0,title:w.email||w.phoneNumber,class:"text-sm text-n-slate-11 truncate min-w-0 w-full block"},I(w.email||w.phoneNumber),9,RU)):$("",!0)])],10,IU))),128))])],2)):$("",!0)])),[[C(ms),R]])}},Sc="round_robin",xU="balanced",Ac="earliest_created",wU="longest_waiting",ch=100,uh=3600,Y1={ORDER:[Sc,xU],PRIORITY:[Ac,wU]},$U={class:"flex flex-col gap-4 divide-y divide-n-weak mb-4"},MU={class:"flex flex-col items-center"},LU={class:"grid grid-cols-1 xs:grid-cols-2 gap-4 w-full"},DU={class:"pt-4 pb-2 flex-col flex gap-4"},PU={class:"flex flex-col items-start gap-1 py-1"},kU={class:"text-sm font-medium text-n-slate-12 py-1"},BU={class:"mb-0 text-n-slate-11 text-sm"},UU={key:0,class:"py-4 flex-col flex gap-4 border-t border-n-weak mt-6"},FU={class:"flex items-end gap-4 w-full justify-between"},GU={class:"flex flex-col items-start gap-1 py-1"},VU={class:"text-sm font-medium text-n-slate-12 py-1"},HU={class:"mb-0 text-n-slate-11 text-sm"},ys="ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY",aA={__name:"AgentAssignmentPolicyForm",props:{initialData:{type:Object,default:()=>({name:"",description:"",enabled:!1,assignmentOrder:Sc,conversationPriority:Ac,fairDistributionLimit:ch,fairDistributionWindow:uh})},mode:{type:String,required:!0,validator:e=>["CREATE","EDIT"].includes(e)},policyInboxes:{type:Array,default:()=>[]},inboxList:{type:Array,default:()=>[]},showInboxSection:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isInboxLoading:{type:Boolean,default:!1}},emits:["submit","addInbox","deleteInbox","validationChange"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=be(),{isEnterprise:i}=si(),l=gn({name:"",description:"",enabled:!1,assignmentOrder:Sc,conversationPriority:Ac,fairDistributionLimit:ch,fairDistributionWindow:uh}),r=j({isValid:!1}),c=(v,T,_)=>({key:T,label:o(`${ys}.FORM.${v}.${T.toUpperCase()}.LABEL`),description:o(`${ys}.FORM.${v}.${T.toUpperCase()}.DESCRIPTION`),isActive:l[_]===T}),u=y(()=>Y1.ORDER.filter(T=>i||T!=="balanced").map(T=>c("ASSIGNMENT_ORDER",T,"assignmentOrder"))),d=y(()=>Y1.PRIORITY.map(v=>c("ASSIGNMENT_PRIORITY",v,"conversationPriority"))),h=y(()=>[{key:"assignmentOrder",label:o(`${ys}.FORM.ASSIGNMENT_ORDER.LABEL`),options:u.value},{key:"conversationPriority",label:o(`${ys}.FORM.ASSIGNMENT_PRIORITY.LABEL`),options:d.value}]),g=y(()=>o(`${ys}.${s.mode.toUpperCase()}.${s.mode}_BUTTON`)),f=v=>{r.value=v,a("validationChange",v)},b=()=>{Object.assign(l,{name:"",description:"",enabled:!1,assignmentOrder:Sc,conversationPriority:Ac,fairDistributionLimit:ch,fairDistributionWindow:uh})},A=()=>{a("submit",{...l})};return it(()=>s.initialData,v=>{Object.assign(l,v)},{immediate:!0,deep:!0}),t({resetForm:b}),(v,T)=>(p(),E("form",{onSubmit:Ve(A,["prevent"])},[m("div",$U,[S(nA,{"policy-name":l.name,"onUpdate:policyName":T[0]||(T[0]=_=>l.name=_),description:l.description,"onUpdate:description":T[1]||(T[1]=_=>l.description=_),enabled:l.enabled,"onUpdate:enabled":T[2]||(T[2]=_=>l.enabled=_),"name-label":C(o)(`${ys}.FORM.NAME.LABEL`),"name-placeholder":C(o)(`${ys}.FORM.NAME.PLACEHOLDER`),"description-label":C(o)(`${ys}.FORM.DESCRIPTION.LABEL`),"description-placeholder":C(o)(`${ys}.FORM.DESCRIPTION.PLACEHOLDER`),"status-label":C(o)(`${ys}.FORM.STATUS.LABEL`),"status-placeholder":C(o)(`${ys}.FORM.STATUS.${l.enabled?"ACTIVE":"INACTIVE"}`),onValidationChange:f},null,8,["policy-name","description","enabled","name-label","name-placeholder","description-label","description-placeholder","status-label","status-placeholder"]),m("div",MU,[(p(!0),E(ue,null,Ae(h.value,_=>(p(),E("div",{key:_.key,class:"py-4 flex flex-col items-start gap-3 w-full"},[S(ta,{label:_.label,name:"assignmentPolicy",class:"w-full flex items-start flex-col gap-3"},{default:Y(()=>[m("div",LU,[(p(!0),E(ue,null,Ae(_.options,N=>(p(),L(oU,{id:N.key,key:N.key,label:N.label,description:N.description,"is-active":N.isActive,onSelect:R=>l[_.key]=R},null,8,["id","label","description","is-active","onSelect"]))),128))])]),_:2},1032,["label"])]))),128))]),m("div",DU,[m("div",PU,[m("label",kU,I(C(o)(`${ys}.FORM.FAIR_DISTRIBUTION.LABEL`)),1),m("p",BU,I(C(o)(`${ys}.FORM.FAIR_DISTRIBUTION.DESCRIPTION`)),1)]),S(mU,{"fair-distribution-limit":l.fairDistributionLimit,"onUpdate:fairDistributionLimit":T[3]||(T[3]=_=>l.fairDistributionLimit=_),"fair-distribution-window":l.fairDistributionWindow,"onUpdate:fairDistributionWindow":T[4]||(T[4]=_=>l.fairDistributionWindow=_),"window-unit":l.windowUnit,"onUpdate:windowUnit":T[5]||(T[5]=_=>l.windowUnit=_)},null,8,["fair-distribution-limit","fair-distribution-window","window-unit"])])]),S(te,{type:"submit",label:g.value,disabled:!r.value.isValid||e.isLoading,"is-loading":e.isLoading},null,8,["label","disabled","is-loading"]),e.showInboxSection?(p(),E("div",UU,[m("div",FU,[m("div",GU,[m("label",VU,I(C(o)(`${ys}.FORM.INBOXES.LABEL`)),1),m("p",HU,I(C(o)(`${ys}.FORM.INBOXES.DESCRIPTION`)),1)]),S(bp,{label:C(o)(`${ys}.FORM.INBOXES.ADD_BUTTON`),"search-placeholder":C(o)(`${ys}.FORM.INBOXES.DROPDOWN.SEARCH_PLACEHOLDER`),items:e.inboxList,onAdd:T[6]||(T[6]=_=>v.$emit("addInbox",_))},null,8,["label","search-placeholder","items"])]),S(sA,{items:e.policyInboxes,"is-fetching":e.isInboxLoading,"empty-state-message":C(o)(`${ys}.FORM.INBOXES.EMPTY_STATE`),onDelete:T[7]||(T[7]=_=>v.$emit("deleteInbox",_))},null,8,["items","is-fetching","empty-state-message"])])):$("",!0)],32))}},WU={class:"flex items-center gap-2 w-full justify-between"},zU={__name:"AgentAssignmentCreatePage",setup(e){const t=Ft(),n=rt(),{t:s}=be(),a=j(null),o=_e("assignmentPolicies/getUIFlags"),i=y(()=>[{label:s("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.INDEX.HEADER.TITLE"),routeName:"agent_assignment_policy_index"},{label:s("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.CREATE.HEADER.TITLE")}]),l=c=>{t.push({name:c.routeName})},r=async c=>{var u;try{const d=await n.dispatch("assignmentPolicies/create",c);ne(s("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.CREATE.API.SUCCESS_MESSAGE")),(u=a.value)==null||u.resetForm(),t.push({name:"agent_assignment_policy_edit",params:{id:d.id}})}catch{ne(s("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.CREATE.API.ERROR_MESSAGE"))}};return(c,u)=>(p(),L(Es,{class:"xl:px-44"},{header:Y(()=>[m("div",WU,[S(Al,{items:i.value,onClick:l},null,8,["items"])])]),body:Y(()=>[S(aA,{ref_key:"formRef",ref:a,mode:"CREATE","is-loading":C(o).isCreating,onSubmit:r},null,8,["is-loading"])]),_:1}))}},YU={__name:"ConfirmInboxDialog",emits:["add"],setup(e,{expose:t,emit:n}){const s=n,{t:a}=be(),o=j(null),i=j(null),l=u=>{i.value=u,o.value.open()},r=()=>{o.value.close()},c=()=>{s("add",i.value.id)};return t({openDialog:l,closeDialog:r}),(u,d)=>{var h;return p(),L($n,{ref_key:"dialogRef",ref:o,type:"alert",title:C(a)("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.EDIT.CONFIRM_ADD_INBOX_DIALOG.TITLE"),description:C(a)("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.EDIT.CONFIRM_ADD_INBOX_DIALOG.DESCRIPTION",{inboxName:(h=i.value)==null?void 0:h.name}),"confirm-button-label":C(a)("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.EDIT.CONFIRM_ADD_INBOX_DIALOG.CONFIRM_BUTTON_LABEL"),"cancel-button-label":C(a)("ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY.EDIT.CONFIRM_ADD_INBOX_DIALOG.CANCEL_BUTTON_LABEL"),onConfirm:c},null,8,["title","description","confirm-button-label","cancel-button-label"])}}},jU={class:"flex items-center gap-2 w-full justify-between"},Dl="ASSIGNMENT_POLICY.AGENT_ASSIGNMENT_POLICY",KU={__name:"AgentAssignmentEditPage",setup(e){const{t}=be(),n=wt(),s=Ft(),a=rt(),o=_e("assignmentPolicies/getUIFlags"),i=_e("inboxes/getAllInboxes"),l=_e("assignmentPolicies/getInboxUiFlags"),r=_e("assignmentPolicies/getAssignmentPolicyById"),c=y(()=>n.params.id),u=y(()=>r.value(c.value)),d=j(null),h=j(null),g=y(()=>[{label:t(`${Dl}.INDEX.HEADER.TITLE`),routeName:"agent_assignment_policy_index"},{label:t(`${Dl}.EDIT.HEADER.TITLE`)}]),f=D=>(D==null?void 0:D.map(({name:M,id:P,email:U,phoneNumber:F,channelType:k,medium:B})=>({name:M,id:P,email:U,phoneNumber:F,icon:ni(k,B,"line")})))||[],b=y(()=>{var D;return f((D=u.value)==null?void 0:D.inboxes)}),A=y(()=>{var D;return f((D=i.value)==null?void 0:D.slice().sort((M,P)=>M.name.localeCompare(P.name)))}),v=y(()=>{var D,M,P,U,F,k,B;return{name:((D=u.value)==null?void 0:D.name)||"",description:((M=u.value)==null?void 0:M.description)||"",enabled:((P=u.value)==null?void 0:P.enabled)||!1,assignmentOrder:((U=u.value)==null?void 0:U.assignmentOrder)||Sc,conversationPriority:((F=u.value)==null?void 0:F.conversationPriority)||Ac,fairDistributionLimit:((k=u.value)==null?void 0:k.fairDistributionLimit)||10,fairDistributionWindow:((B=u.value)==null?void 0:B.fairDistributionWindow)||60}}),T=D=>{var M;return a.dispatch("assignmentPolicies/removeInboxPolicy",{policyId:(M=u.value)==null?void 0:M.id,inboxId:D})},_=({routeName:D})=>s.push({name:D}),N=async(D,M)=>{try{return await a.dispatch("assignmentPolicies/setInboxPolicy",{inboxId:D,policyId:M}),ne(t(`${Dl}.FORM.INBOXES.API.SUCCESS_MESSAGE`)),await a.dispatch("assignmentPolicies/getInboxes",Number(c.value)),!0}catch{return ne(t(`${Dl}.FORM.INBOXES.API.ERROR_MESSAGE`)),!1}},R=async D=>{var M,P;try{const U=await a.dispatch("assignmentPolicies/getInboxPolicy",{inboxId:D==null?void 0:D.id});if((U==null?void 0:U.id)!==((M=u.value)==null?void 0:M.id)){h.value={...U,assignedInboxCount:U.assignedInboxCount-1},d.value.openDialog(D);return}}catch{}await N(D==null?void 0:D.id,(P=u.value)==null?void 0:P.id)},O=async D=>{var P,U;await N(D,(P=u.value)==null?void 0:P.id)&&(await a.dispatch("assignmentPolicies/updateInboxPolicy",{policy:h.value}),a.dispatch("assignmentPolicies/getInboxes",(U=h.value)==null?void 0:U.id),h.value=null,d.value.closeDialog())},x=async D=>{var M;try{await a.dispatch("assignmentPolicies/update",{id:(M=u.value)==null?void 0:M.id,...D}),ne(t(`${Dl}.EDIT.API.SUCCESS_MESSAGE`))}catch{ne(t(`${Dl}.EDIT.API.ERROR_MESSAGE`))}};return it(c,async()=>{var D;c.value&&((D=u.value)!=null&&D.id||await a.dispatch("assignmentPolicies/show",c.value),await a.dispatch("assignmentPolicies/getInboxes",Number(c.value)))},{immediate:!0}),(D,M)=>(p(),L(Es,{"is-loading":C(o).isFetchingItem,class:"xl:px-44"},{header:Y(()=>[m("div",jU,[S(Al,{items:g.value,onClick:_},null,8,["items"])])]),body:Y(()=>[(p(),L(aA,{key:c.value,mode:"EDIT","initial-data":v.value,"policy-inboxes":b.value,"inbox-list":A.value,"show-inbox-section":"","is-loading":C(o).isUpdating,"is-inbox-loading":C(l).isFetching,onSubmit:x,onAddInbox:R,onDeleteInbox:T},null,8,["initial-data","policy-inboxes","inbox-list","is-loading","is-inbox-loading"]))]),default:Y(()=>[S(YU,{ref_key:"confirmInboxDialogRef",ref:d,onAdd:O},null,512)]),_:1},8,["is-loading"]))}},XU={class:"flex flex-col gap-2 relative justify-between w-full"},qU={class:"flex items-center gap-3 justify-between w-full"},ZU={class:"flex items-center gap-3"},QU={class:"text-base font-medium text-n-slate-12 line-clamp-1"},JU={class:"flex items-center gap-2"},eF={class:"text-n-slate-11 text-sm line-clamp-1 mb-0 py-1"},tF={__name:"AgentCapacityPolicyCard",props:{id:{type:Number,required:!0},name:{type:String,default:""},description:{type:String,default:""},assignedAgentCount:{type:Number,default:0},users:{type:Array,default:()=>[]},isFetchingUsers:{type:Boolean,default:!1}},emits:["edit","delete","fetchUsers"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=y(()=>n.users.map(c=>({name:c.name,key:c.id,email:c.email,avatarUrl:c.avatarUrl}))),i=()=>{s("edit",n.id)},l=()=>{s("delete",n.id)},r=()=>{var c;((c=n.users)==null?void 0:c.length)>0||s("fetchUsers",n.id)};return(c,u)=>(p(),L(ba,{class:"[&>div]:px-5"},{default:Y(()=>[m("div",XU,[m("div",qU,[m("div",ZU,[m("h3",QU,I(e.name),1),S(eA,{title:C(a)("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.INDEX.CARD.POPOVER"),icon:"i-lucide-users-round",count:e.assignedAgentCount,items:o.value,"is-fetching":e.isFetchingUsers,onFetch:r},null,8,["title","count","items","is-fetching"])]),m("div",JU,[S(te,{label:C(a)("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.INDEX.CARD.EDIT"),sm:"",slate:"",link:"",class:"px-2",onClick:i},null,8,["label"]),u[0]||(u[0]=m("div",{class:"w-px h-2.5 bg-n-slate-5"},null,-1)),S(te,{icon:"i-lucide-trash",sm:"",slate:"",ghost:"",onClick:l})])]),m("p",eF,I(e.description),1)])]),_:1}))}},nF={class:"flex items-center gap-2 w-full justify-between"},sF={class:"flex flex-col gap-4 pt-8"},aF={__name:"AgentCapacityIndexPage",setup(e){const t=rt(),{t:n}=be(),s=Ft(),a=_e("agentCapacityPolicies/getAgentCapacityPolicies"),o=_e("agentCapacityPolicies/getUIFlags"),i=_e("agentCapacityPolicies/getUsersUIFlags"),l=j(null),r=y(()=>[{label:n("ASSIGNMENT_POLICY.INDEX.HEADER.TITLE"),routeName:"assignment_policy_index"},{label:n("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.INDEX.HEADER.TITLE")}]),c=b=>{s.push({name:b.routeName})},u=()=>{s.push({name:"agent_capacity_policy_create"})},d=b=>{s.push({name:"agent_capacity_policy_edit",params:{id:b}})},h=b=>{i.value.isFetching||t.dispatch("agentCapacityPolicies/getUsers",b)},g=b=>{l.value.openDialog(b)},f=async b=>{try{await t.dispatch("agentCapacityPolicies/delete",b),ne(n("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.DELETE_POLICY.SUCCESS_MESSAGE")),l.value.closeDialog()}catch{ne(n("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.DELETE_POLICY.ERROR_MESSAGE"))}};return lt(()=>{t.dispatch("agentCapacityPolicies/get")}),(b,A)=>(p(),L(Es,{"is-loading":C(o).isFetching,"no-records-found":C(a).length===0,"no-records-message":b.$t("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.INDEX.NO_RECORDS_FOUND")},{header:Y(()=>[m("div",nF,[S(Al,{items:r.value,onClick:c},null,8,["items"]),S(te,{icon:"i-lucide-plus",md:"",onClick:u},{default:Y(()=>[xe(I(b.$t("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.INDEX.HEADER.CREATE_POLICY")),1)]),_:1})])]),body:Y(()=>[m("div",sF,[(p(!0),E(ue,null,Ae(C(a),v=>(p(),L(tF,Qn({key:v.id,ref_for:!0},v,{"is-fetching-users":C(i).isFetching,onFetchUsers:h,onEdit:d,onDelete:g}),null,16,["is-fetching-users"]))),128))])]),default:Y(()=>[S(tA,{ref_key:"confirmDeletePolicyDialogRef",ref:l,onDelete:f},null,512)]),_:1},8,["is-loading","no-records-found","no-records-message"]))}},oF={class:"text-sm text-n-slate-12 ltr:mr-px rtl:ml-px"},oA={__name:"LabelItem",props:{label:{type:Object,default:null},isHovered:{type:Boolean,default:!1}},emits:["remove","hover"],setup(e,{emit:t}){const n=e,s=t,a=()=>{s("remove",n.label)},o=()=>{var i;s("hover",(i=n.label)==null?void 0:i.id)};return(i,l)=>(p(),E("div",{class:"flex items-center px-1 py-1 overflow-hidden transition-all duration-300 ease-out rounded-md bg-n-alpha-2 h-7",onMouseenter:o},[m("div",{class:"w-2 h-2 m-1 rounded-sm",style:Zt({backgroundColor:e.label.color})},null,4),m("span",oF,I(e.label.title),1),m("div",{class:ae(["w-0 flex relative ltr:left-1 rtl:right-1 flex-shrink-0 overflow-hidden transition-[width] duration-300 ease-out",{"w-6":e.isHovered}])},[S(te,{class:ae(["transition-opacity duration-200 !h-7 ltr:rounded-r-md rtl:rounded-l-md ltr:rounded-l-none rtl:rounded-r-none w-6 bg-transparent",{"opacity-0":!e.isHovered,"opacity-100":e.isHovered}]),type:"button",slate:"",xs:"",faded:"",icon:"i-lucide-x",onClick:a},null,8,["class"])],2)],32))}},iF={class:"py-4 flex-col flex gap-6"},lF={class:"flex flex-col items-start gap-1 py-1"},rF={class:"text-sm font-medium text-n-slate-12 py-1"},cF={class:"mb-0 text-n-slate-11 text-sm"},uF={class:"flex flex-col items-start gap-4"},dF={class:"text-sm font-medium text-n-slate-12 py-1"},pF={class:"flex flex-col items-start gap-4"},mF={class:"text-sm font-medium text-n-slate-12 py-1"},hF={class:"flex items-center gap-2 flex-1 [&>select]:!bg-n-alpha-2 [&>select]:!outline-none [&>select]:hover:brightness-110"},fF=10,gF=1438560,_F={__name:"ExclusionRules",props:jt({tagsList:{type:Array,default:()=>[]}},{excludedLabels:{type:Array,default:()=>[]},excludedLabelsModifiers:{},excludeOlderThanMinutes:{type:Number,default:10},excludeOlderThanMinutesModifiers:{}}),emits:["update:excludedLabels","update:excludeOlderThanMinutes"],setup(e){const t=e,n=Xt(e,"excludedLabels"),s=Xt(e,"excludeOlderThanMinutes"),{t:a}=be(),o=j(null),i=j(Wn.MINUTES),l=y(()=>t.tagsList.filter(h=>n.value.includes(h.name)).map(h=>({id:h.id,title:h.name,...h}))),r=y(()=>t.tagsList.filter(h=>!l.value.some(g=>g.id===h.id))),c=h=>{const g=Number(h)||0;return g===0?Wn.MINUTES:g%(24*60)===0?Wn.DAYS:g%60===0?Wn.HOURS:Wn.MINUTES},u=h=>{n.value=[...n.value,h.name]},d=h=>{n.value=n.value.filter(g=>g!==h.title)};return lt(()=>{i.value=c(s.value)}),(h,g)=>(p(),E("div",iF,[m("div",lF,[m("label",rF,I(C(a)("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.FORM.EXCLUSION_RULES.LABEL")),1),m("p",cF,I(C(a)("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.FORM.EXCLUSION_RULES.DESCRIPTION")),1)]),m("div",uF,[m("label",dF,I(C(a)("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.FORM.EXCLUSION_RULES.TAGS.LABEL")),1),m("div",{class:"flex items-start gap-2 flex-wrap",onMouseleave:g[0]||(g[0]=f=>o.value=null)},[(p(!0),E(ue,null,Ae(l.value,f=>(p(),L(oA,{key:f.id,label:f,"is-hovered":o.value===f.id,class:"h-8",onRemove:d,onHover:b=>o.value=f.id},null,8,["label","is-hovered","onHover"]))),128)),S(bp,{label:C(a)("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.FORM.EXCLUSION_RULES.TAGS.ADD_TAG"),"search-placeholder":C(a)("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.FORM.EXCLUSION_RULES.TAGS.DROPDOWN.SEARCH_PLACEHOLDER"),items:r.value,class:"[&>button]:!text-n-blue-text [&>div]:min-w-64",onAdd:u},null,8,["label","search-placeholder","items"])],32)]),m("div",pF,[m("label",mF,I(C(a)("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.FORM.EXCLUSION_RULES.DURATION.LABEL")),1),m("div",hF,[S(s_,{unit:i.value,"onUpdate:unit":g[1]||(g[1]=f=>i.value=f),"model-value":s.value,"onUpdate:modelValue":g[2]||(g[2]=f=>s.value=f),min:fF,max:gF},null,8,["unit","model-value"])])])]))}},vF={class:"py-4 flex-col flex gap-3"},EF={class:"flex items-center w-full gap-8 justify-between pt-1 pb-3"},bF={class:"text-sm font-medium text-n-slate-12"},TF={key:0,class:"flex items-center justify-center py-3 w-full text-n-slate-11"},SF={key:1,class:"custom-dashed-border flex items-center justify-center py-6 w-full"},AF={class:"text-sm text-n-slate-11"},yF={key:2,class:"flex-col flex gap-3"},IF=["title"],CF={class:"truncate min-w-0"},NF={class:"flex items-center gap-3 w-full xs:w-auto"},OF=["title"],RF=["onUpdate:modelValue","placeholder","onBlur"],ji="ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY",xF=10,j1=1,K1=1e5,wF={__name:"InboxCapacityLimits",props:jt({inboxList:{type:Array,default:()=>[]},isFetching:{type:Boolean,default:!1}},{inboxCapacityLimits:{type:Array,default:()=>[]},inboxCapacityLimitsModifiers:{}}),emits:jt(["delete","add","update"],["update:inboxCapacityLimits"]),setup(e,{emit:t}){const n=e,s=t,a=Xt(e,"inboxCapacityLimits"),{t:o}=be(),i=y(()=>new Set(a.value.map(f=>f.inboxId))),l=y(()=>n.inboxList.filter(f=>f&&!i.value.has(f.id))),r=f=>f.conversationLimit>=j1&&f.conversationLimit<=K1,c=y(()=>new Map(n.inboxList.map(f=>[f.id,f]))),u=f=>{s("add",{inboxId:f.id,conversationLimit:xF})},d=f=>{s("delete",f)},h=f=>{r(f)&&s("update",f)},g=f=>{var b;return((b=c.value.get(f))==null?void 0:b.name)||""};return(f,b)=>(p(),E("div",vF,[m("div",EF,[m("label",bF,I(C(o)(`${ji}.FORM.INBOX_CAPACITY_LIMIT.LABEL`)),1),S(bp,{label:C(o)(`${ji}.FORM.INBOX_CAPACITY_LIMIT.ADD_BUTTON`),"search-placeholder":C(o)(`${ji}.FORM.INBOX_CAPACITY_LIMIT.FIELD.SELECT_INBOX`),items:l.value,onAdd:u},null,8,["label","search-placeholder","items"])]),e.isFetching?(p(),E("div",TF,[S(An)])):a.value.length?(p(),E("div",yF,[(p(!0),E(ue,null,Ae(a.value,(A,v)=>(p(),E("div",{key:A.id||`temp-${v}`,class:"flex flex-col xs:flex-row items-stretch gap-3"},[m("div",{class:"flex items-center rounded-lg outline-1 outline cursor-not-allowed text-n-slate-11 outline-n-weak py-2.5 px-3 text-sm w-full min-w-0",title:g(A.inboxId)},[m("span",CF,I(g(A.inboxId)),1)],8,IF),m("div",NF,[m("div",{class:ae(["py-2.5 px-3 rounded-lg gap-2 outline outline-1 flex-1 xs:flex-shrink-0 flex items-center min-w-0",[r(A)?"outline-n-weak":"outline-n-ruby-8"]])},[m("label",{class:"text-sm text-n-slate-12 ltr:pr-2 rtl:pl-2 truncate min-w-0 flex-shrink",title:C(o)(`${ji}.FORM.INBOX_CAPACITY_LIMIT.FIELD.MAX_CONVERSATIONS`)},I(C(o)(`${ji}.FORM.INBOX_CAPACITY_LIMIT.FIELD.MAX_CONVERSATIONS`)),9,OF),b[0]||(b[0]=m("div",{class:"h-5 w-px bg-n-weak"},null,-1)),re(m("input",{"onUpdate:modelValue":T=>A.conversationLimit=T,type:"number",min:j1,max:K1,class:ae(["reset-base bg-transparent focus:outline-none min-w-16 w-24 text-sm flex-shrink-0",[r(A)?"placeholder:text-n-slate-10 text-n-slate-12":"placeholder:text-n-ruby-9 !text-n-ruby-9"]]),placeholder:C(o)(`${ji}.FORM.INBOX_CAPACITY_LIMIT.FIELD.SET_LIMIT`),onBlur:T=>h(A)},null,42,RF),[[gt,A.conversationLimit,void 0,{number:!0}]])],2),S(te,{type:"button",slate:"",icon:"i-lucide-trash",class:"flex-shrink-0",onClick:T=>d(A.id)},null,8,["onClick"])])]))),128))])):(p(),E("div",SF,[m("span",AF,I(C(o)(`${ji}.FORM.INBOX_CAPACITY_LIMIT.EMPTY_STATE`)),1)]))]))}},$F={class:"flex flex-col gap-4 mb-2 divide-y divide-n-weak"},MF={key:0,class:"flex flex-col gap-4 divide-y divide-n-weak border-t border-n-weak mt-6"},LF={key:1,class:"py-4 flex-col flex gap-4"},DF={class:"flex items-end gap-4 w-full justify-between"},PF={class:"flex flex-col items-start gap-1 py-1"},kF={class:"text-sm font-medium text-n-slate-12 py-1"},BF={class:"mb-0 text-n-slate-11 text-sm"},Eo="ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY",iA={__name:"AgentCapacityPolicyForm",props:{initialData:{type:Object,default:()=>({name:"",description:"",enabled:!1,exclusionRules:{excludedLabels:[],excludeOlderThanHours:10},inboxCapacityLimits:[]})},mode:{type:String,required:!0,validator:e=>["CREATE","EDIT"].includes(e)},policyUsers:{type:Array,default:()=>[]},agentList:{type:Array,default:()=>[]},labelList:{type:Array,default:()=>[]},inboxList:{type:Array,default:()=>[]},showUserSection:{type:Boolean,default:!1},showInboxLimitSection:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isUsersLoading:{type:Boolean,default:!1},isInboxesLoading:{type:Boolean,default:!1}},emits:["submit","addUser","deleteUser","validationChange","deleteInboxLimit","addInboxLimit","updateInboxLimit"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=be(),i=gn({name:"",description:"",exclusionRules:{excludedLabels:[],excludeOlderThanHours:10},inboxCapacityLimits:[]}),l=j({isValid:!1}),r=y(()=>o(`${Eo}.${s.mode.toUpperCase()}.${s.mode}_BUTTON`)),c=b=>{l.value=b,a("validationChange",b)},u=b=>{a("deleteInboxLimit",b)},d=b=>{a("addInboxLimit",b)},h=b=>{a("updateInboxLimit",b)},g=()=>{Object.assign(i,{name:"",description:"",exclusionRules:{excludedLabels:[],excludeOlderThanHours:10},inboxCapacityLimits:[]})},f=()=>{a("submit",{...i})};return it(()=>s.initialData,b=>{Object.assign(i,b)},{immediate:!0,deep:!0}),t({resetForm:g}),(b,A)=>(p(),E("form",{onSubmit:Ve(f,["prevent"])},[m("div",$F,[S(nA,{"policy-name":i.name,"onUpdate:policyName":A[0]||(A[0]=v=>i.name=v),description:i.description,"onUpdate:description":A[1]||(A[1]=v=>i.description=v),"name-label":C(o)(`${Eo}.FORM.NAME.LABEL`),"name-placeholder":C(o)(`${Eo}.FORM.NAME.PLACEHOLDER`),"description-label":C(o)(`${Eo}.FORM.DESCRIPTION.LABEL`),"description-placeholder":C(o)(`${Eo}.FORM.DESCRIPTION.PLACEHOLDER`),onValidationChange:c},null,8,["policy-name","description","name-label","name-placeholder","description-label","description-placeholder"]),S(_F,{"excluded-labels":i.exclusionRules.excludedLabels,"onUpdate:excludedLabels":A[2]||(A[2]=v=>i.exclusionRules.excludedLabels=v),"exclude-older-than-minutes":i.exclusionRules.excludeOlderThanHours,"onUpdate:excludeOlderThanMinutes":A[3]||(A[3]=v=>i.exclusionRules.excludeOlderThanHours=v),"tags-list":e.labelList},null,8,["excluded-labels","exclude-older-than-minutes","tags-list"])]),S(te,{type:"submit",label:r.value,disabled:!l.value.isValid||e.isLoading,"is-loading":e.isLoading},null,8,["label","disabled","is-loading"]),e.showInboxLimitSection||e.showUserSection?(p(),E("div",MF,[e.showInboxLimitSection?(p(),L(wF,{key:0,"inbox-capacity-limits":i.inboxCapacityLimits,"onUpdate:inboxCapacityLimits":A[4]||(A[4]=v=>i.inboxCapacityLimits=v),"inbox-list":e.inboxList,"is-fetching":e.isInboxesLoading,onDelete:u,onAdd:d,onUpdate:h},null,8,["inbox-capacity-limits","inbox-list","is-fetching"])):$("",!0),e.showUserSection?(p(),E("div",LF,[m("div",DF,[m("div",PF,[m("label",kF,I(C(o)(`${Eo}.FORM.USERS.LABEL`)),1),m("p",BF,I(C(o)(`${Eo}.FORM.USERS.DESCRIPTION`)),1)]),S(bp,{label:C(o)(`${Eo}.FORM.USERS.ADD_BUTTON`),"search-placeholder":C(o)(`${Eo}.FORM.USERS.DROPDOWN.SEARCH_PLACEHOLDER`),items:e.agentList,onAdd:A[5]||(A[5]=v=>b.$emit("addUser",v))},null,8,["label","search-placeholder","items"])]),S(sA,{items:e.policyUsers,"is-fetching":e.isUsersLoading,"empty-state-message":C(o)(`${Eo}.FORM.USERS.EMPTY_STATE`),onDelete:A[6]||(A[6]=v=>b.$emit("deleteUser",v))},null,8,["items","is-fetching","empty-state-message"])])):$("",!0)])):$("",!0)],32))}},UF={class:"flex items-center gap-2 w-full justify-between"},FF={__name:"AgentCapacityCreatePage",setup(e){const t=Ft(),n=rt(),{t:s}=be(),a=j(null),o=_e("agentCapacityPolicies/getUIFlags"),i=_e("labels/getLabels"),l=y(()=>{var d;return(d=i.value)==null?void 0:d.map(({title:h,color:g,id:f})=>({id:f,name:h,color:g}))}),r=y(()=>[{label:s("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.INDEX.HEADER.TITLE"),routeName:"agent_capacity_policy_index"},{label:s("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.CREATE.HEADER.TITLE")}]),c=d=>{t.push({name:d.routeName})},u=async d=>{var h;try{const g=await n.dispatch("agentCapacityPolicies/create",d);ne(s("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.CREATE.API.SUCCESS_MESSAGE")),(h=a.value)==null||h.resetForm(),t.push({name:"agent_capacity_policy_edit",params:{id:g.id}})}catch{ne(s("ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY.CREATE.API.ERROR_MESSAGE"))}};return(d,h)=>(p(),L(Es,{class:"xl:px-44"},{header:Y(()=>[m("div",UF,[S(Al,{items:r.value,onClick:c},null,8,["items"])])]),body:Y(()=>[S(iA,{ref_key:"formRef",ref:a,mode:"CREATE","is-loading":C(o).isCreating,"label-list":l.value,onSubmit:u},null,8,["is-loading","label-list"])]),_:1}))}},GF={class:"flex items-center gap-2 w-full justify-between"},xu="ASSIGNMENT_POLICY.AGENT_CAPACITY_POLICY",VF={__name:"AgentCapacityEditPage",setup(e){const{t}=be(),n=wt(),s=Ft(),a=rt(),o=_e("agentCapacityPolicies/getUIFlags"),i=_e("agentCapacityPolicies/getUsersUIFlags"),l=_e("agentCapacityPolicies/getAgentCapacityPolicyById"),r=_e("agents/getAgents"),c=_e("labels/getLabels"),u=_e("inboxes/getAllInboxes"),d=_e("inboxes/getUIFlags"),h=y(()=>n.params.id),g=y(()=>l.value(h.value)),f=y(()=>{var k;return(k=g.value)==null?void 0:k.id}),b=y(()=>[{label:t(`${xu}.INDEX.HEADER.TITLE`),routeName:"agent_capacity_policy_index"},{label:t(`${xu}.EDIT.HEADER.TITLE`)}]),A=k=>(k==null?void 0:k.map(({name:B,title:V,id:G,email:K,avatarUrl:se,thumbnail:ee,color:X})=>({name:B||V,id:G,email:K,avatarUrl:se||ee,color:X})))||[],v=y(()=>{var k;return A((k=g.value)==null?void 0:k.users)}),T=y(()=>A(yr(r.value)).filter(k=>{var B;return!((B=v.value)!=null&&B.some(V=>V.id===k.id))})),_=y(()=>A(c.value)),N=y(()=>{var k;return((k=u.value)==null?void 0:k.slice().sort((B,V)=>B.name.localeCompare(V.name)).map(({name:B,id:V,email:G,phoneNumber:K,channelType:se,medium:ee})=>({name:B,id:V,email:G,phoneNumber:K,icon:ni(se,ee,"line")})))||[]}),R=y(()=>{var k,B,V,G,K,se,ee,X;return{name:((k=g.value)==null?void 0:k.name)||"",description:((B=g.value)==null?void 0:B.description)||"",exclusionRules:{excludedLabels:[...((G=(V=g.value)==null?void 0:V.exclusionRules)==null?void 0:G.excludedLabels)||[]],excludeOlderThanHours:((se=(K=g.value)==null?void 0:K.exclusionRules)==null?void 0:se.excludeOlderThanHours)||10},inboxCapacityLimits:((X=(ee=g.value)==null?void 0:ee.inboxCapacityLimits)==null?void 0:X.map(z=>({...z})))||[]}}),O=({routeName:k})=>s.push({name:k}),x=k=>{a.dispatch("agentCapacityPolicies/removeUser",{policyId:f.value,userId:k})},w=k=>{a.dispatch("agentCapacityPolicies/addUser",{policyId:f.value,userData:{id:k.id,capacity:20}})},D=k=>{a.dispatch("agentCapacityPolicies/deleteInboxLimit",{policyId:f.value,limitId:k})},M=k=>{a.dispatch("agentCapacityPolicies/createInboxLimit",{policyId:f.value,limitData:{inboxId:k.inboxId,conversationLimit:k.conversationLimit}})},P=k=>{a.dispatch("agentCapacityPolicies/updateInboxLimit",{policyId:f.value,limitId:k.id,limitData:{conversationLimit:k.conversationLimit}})},U=async k=>{try{await a.dispatch("agentCapacityPolicies/update",{id:f.value,...k}),ne(t(`${xu}.EDIT.API.SUCCESS_MESSAGE`))}catch{ne(t(`${xu}.EDIT.API.ERROR_MESSAGE`))}};return it(h,async()=>{h.value&&(f.value||await a.dispatch("agentCapacityPolicies/show",h.value),await a.dispatch("agentCapacityPolicies/getUsers",Number(h.value)))},{immediate:!0}),lt(()=>a.dispatch("agents/get")),(k,B)=>(p(),L(Es,{"is-loading":C(o).isFetchingItem,class:"xl:px-44"},{header:Y(()=>[m("div",GF,[S(Al,{items:b.value,onClick:O},null,8,["items"])])]),body:Y(()=>[(p(),L(iA,{key:h.value,mode:"EDIT","initial-data":R.value,"policy-users":v.value,"agent-list":T.value,"label-list":_.value,"inbox-list":N.value,"show-user-section":"","show-inbox-limit-section":"","is-loading":C(o).isUpdating,"is-users-loading":C(i).isFetching,"is-inboxes-loading":C(d).isFetching,onSubmit:U,onAddUser:w,onDeleteUser:x,onAddInboxLimit:M,onUpdateInboxLimit:P,onDeleteInboxLimit:D},null,8,["initial-data","policy-users","agent-list","label-list","inbox-list","is-loading","is-users-loading","is-inboxes-loading"]))]),_:1},8,["is-loading"]))}},HF={routes:[{path:vt("accounts/:accountId/settings/assignment-policy"),component:Rs,children:[{path:"",redirect:e=>({name:"assignment_policy_index",params:e.params})},{path:"index",name:"assignment_policy_index",component:c9,meta:{featureFlag:ft.ASSIGNMENT_V2,permissions:["administrator"]}},{path:"assignment",name:"agent_assignment_policy_index",component:z9,meta:{featureFlag:ft.ASSIGNMENT_V2,permissions:["administrator"]}},{path:"assignment/create",name:"agent_assignment_policy_create",component:zU,meta:{featureFlag:ft.ASSIGNMENT_V2,permissions:["administrator"]}},{path:"assignment/edit/:id",name:"agent_assignment_policy_edit",component:KU,meta:{featureFlag:ft.ASSIGNMENT_V2,permissions:["administrator"]}},{path:"capacity",name:"agent_capacity_policy_index",component:aF,meta:{featureFlag:ft.ASSIGNMENT_V2,permissions:["administrator"]}},{path:"capacity/create",name:"agent_capacity_policy_create",component:FF,meta:{featureFlag:ft.ASSIGNMENT_V2,permissions:["administrator"]}},{path:"capacity/edit/:id",name:"agent_capacity_policy_edit",component:VF,meta:{featureFlag:ft.ASSIGNMENT_V2,permissions:["administrator"]}}]}]},WF={key:0,class:"absolute mt-1 w-full text-[10px] text-center text-n-slate-10"},zF={__name:"ConfirmButton",props:{label:{type:[String,Number],default:""},confirmLabel:{type:[String,Number],default:""},color:{type:String,default:"blue"},confirmColor:{type:String,default:"ruby"},confirmHint:{type:String,default:""},variant:{type:String,default:null},size:{type:String,default:null},justify:{type:String,default:null},icon:{type:[String,Object,Function],default:""},trailingIcon:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){const n=e,s=t,a=j(!1),o=j(!1),i=y(()=>a.value?n.confirmLabel:n.label),l=y(()=>a.value?n.confirmColor:n.color),r=()=>{a.value=!1,o.value=!1},c=()=>{a.value?(o.value=!0,s("click"),setTimeout(r,400)):a.value=!0};return(u,d)=>(p(),E("div",{class:ae(["relative",{"animate-bounce-complete":o.value}])},[S(te,{type:"button",label:i.value,color:l.value,variant:e.variant,size:e.size,justify:e.justify,icon:e.icon,"trailing-icon":e.trailingIcon,"is-loading":e.isLoading,onClick:c,onBlur:r},co({_:2},[u.$slots.default?{name:"default",fn:Y(()=>[We(u.$slots,"default",{},void 0,!0)]),key:"0"}:void 0,u.$slots.icon?{name:"icon",fn:Y(()=>[We(u.$slots,"icon",{},void 0,!0)]),key:"1"}:void 0]),1032,["label","color","variant","size","justify","icon","trailing-icon","is-loading"]),a.value&&e.confirmHint?(p(),E("div",WF,I(e.confirmHint),1)):$("",!0)],2))}},YF=De(zF,[["__scopeId","data-v-6c27f942"]]),jF={class:"flex flex-row justify-between gap-4"},KF={class:"flex flex-row gap-2"},Lf={__name:"AccessToken",props:{value:{type:String,default:""},showResetButton:{type:Boolean,default:!0}},emits:["onCopy","onReset"],setup(e,{emit:t}){const n=e,s=t,a=j("password"),o=()=>{a.value=a.value==="password"?"text":"password"},i=y(()=>a.value==="password"?"eye-hide":"eye-show"),l=()=>{s("onCopy",n.value)},r=()=>{s("onReset")};return(c,u)=>{const d=W("fluent-icon"),h=W("woot-input");return p(),E("div",jF,[S(h,{name:"access_token",class:"flex-1 [&>input]:!py-1.5 ltr:[&>input]:!pr-9 ltr:[&>input]:!pl-3 rtl:[&>input]:!pl-9 rtl:[&>input]:!pr-3 focus:[&>input]:!border-n-weak [&>input]:cursor-not-allowed relative",styles:{borderRadius:"12px",fontSize:"14px",marginBottom:"2px"},type:a.value,"model-value":e.value,readonly:""},{masked:Y(()=>[m("button",{class:"absolute top-0 bottom-0 ltr:right-0.5 rtl:left-0.5",type:"button",onClick:o},[S(d,{icon:i.value,size:16},null,8,["icon"])])]),_:1},8,["type","model-value"]),m("div",KF,[S(te,{label:c.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.COPY"),slate:"",outline:"",type:"button",icon:"i-lucide-copy",class:"rounded-xl",onClick:l},null,8,["label"]),e.showResetButton?(p(),L(YF,{key:0,label:c.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.RESET"),"confirm-label":c.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.CONFIRM_RESET"),"confirm-hint":c.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.CONFIRM_HINT"),color:"slate","confirm-color":"ruby",variant:"outline",icon:"i-lucide-key-round",class:"rounded-xl",onClick:r},null,8,["label","confirm-label","confirm-hint"])):$("",!0)])])}}},XF={key:0,class:"flex flex-col gap-4"},qF={class:"mb-2 flex flex-col items-start"},ZF={class:"mb-2 text-sm font-medium text-n-slate-12"},QF={key:1,class:"flex flex-col gap-1"},JF={key:0,class:"mb-0.5 text-sm font-medium text-n-slate-12"},e7={class:"flex items-center justify-end w-full gap-2 px-0 py-2"},t7={__name:"AgentBotModal",props:{type:{type:String,default:"create",validator:e=>["create","edit"].includes(e)},selectedBot:{type:Object,default:()=>({})}},setup(e,{expose:t}){const n=e,s={CREATE:"create",EDIT:"edit"},a=rt(),{t:o}=be(),i=j(null),l=_e("agentBots/getUIFlags"),r=gn({botName:"",botDescription:"",botUrl:"",botAvatar:null,botAvatarUrl:""}),[c,u]=yn(),d=j(""),h=bt({botName:{required:_c.withMessage(()=>o("AGENT_BOTS.FORM.ERRORS.NAME"),Ye)},botUrl:{required:_c.withMessage(()=>o("AGENT_BOTS.FORM.ERRORS.URL"),Ye),url:_c.withMessage(()=>o("AGENT_BOTS.FORM.ERRORS.VALID_URL"),Qc)}},r),g=y(()=>n.type===s.CREATE?l.value.isCreating:l.value.isUpdating),f=y(()=>c.value?o("AGENT_BOTS.ACCESS_TOKEN.TITLE"):n.type===s.CREATE?o("AGENT_BOTS.ADD.TITLE"):o("AGENT_BOTS.EDIT.TITLE")),b=y(()=>c.value?o("AGENT_BOTS.ACCESS_TOKEN.DESCRIPTION"):""),A=y(()=>n.type===s.CREATE?o("AGENT_BOTS.FORM.CREATE"):o("AGENT_BOTS.FORM.UPDATE")),v=y(()=>{var F;return h.value.botName.$error?(F=h.value.botName.$errors[0])==null?void 0:F.$message:""}),T=y(()=>{var F;return h.value.botUrl.$error?(F=h.value.botUrl.$errors[0])==null?void 0:F.$message:""}),_=y(()=>c.value||n.type===s.EDIT||d.value),N=()=>{Object.assign(r,{botName:"",botDescription:"",botUrl:"",botAvatar:null,botAvatarUrl:""}),h.value.$reset()},R=({file:F,url:k})=>{r.botAvatar=F,r.botAvatarUrl=k},O=async()=>{var F;if((F=n.selectedBot)!=null&&F.id)try{await a.dispatch("agentBots/deleteAgentBotAvatar",n.selectedBot.id),r.botAvatar=null,r.botAvatarUrl="",ne(o("AGENT_BOTS.AVATAR.SUCCESS_DELETE"))}catch{ne(o("AGENT_BOTS.AVATAR.ERROR_DELETE"))}else r.botAvatar=null,r.botAvatarUrl=""},x=async()=>{if(h.value.$touch(),h.value.$invalid||c.value)return;const F={name:r.botName,description:r.botDescription,outgoing_url:r.botUrl,bot_type:"webhook",avatar:r.botAvatar},k=n.type===s.CREATE;try{const B=k?F:{id:n.selectedBot.id,data:F},V=await a.dispatch(`agentBots/${k?"create":"update"}`,B),G=o(k?"AGENT_BOTS.ADD.API.SUCCESS_MESSAGE":"AGENT_BOTS.EDIT.API.SUCCESS_MESSAGE");if(ne(G),k){const{access_token:K,id:se}=V||{};se&&K?(d.value=K,u(!0)):(d.value="",i.value.close())}else i.value.close();N()}catch{const V=o(k?"AGENT_BOTS.ADD.API.ERROR_MESSAGE":"AGENT_BOTS.EDIT.API.ERROR_MESSAGE");ne(V)}},w=()=>{if(n.selectedBot&&Object.keys(n.selectedBot).length){const{name:F,description:k,outgoing_url:B,thumbnail:V,bot_config:G,access_token:K}=n.selectedBot;r.botName=F||"",r.botDescription=k||"",r.botUrl=B||(G==null?void 0:G.webhook_url)||"",r.botAvatarUrl=V||"",K&&n.type===s.EDIT&&(d.value=K)}else N()},D=async F=>{await _a(F),ne(o("AGENT_BOTS.ACCESS_TOKEN.COPY_SUCCESSFUL"))},M=async()=>{const F=await a.dispatch("agentBots/resetAccessToken",n.selectedBot.id);F?(d.value=F.access_token,ne(o("AGENT_BOTS.ACCESS_TOKEN.RESET_SUCCESS"))):ne(o("AGENT_BOTS.ACCESS_TOKEN.RESET_ERROR"))},P=()=>{var F;c.value||(F=h.value)==null||F.$reset(),d.value="",u(!1)},U=()=>{P(),i.value.close()};return it(()=>n.selectedBot,w,{immediate:!0,deep:!0}),t({dialogRef:i}),(F,k)=>(p(),L($n,{ref_key:"dialogRef",ref:i,type:"edit",title:f.value,description:b.value,"show-cancel-button":!1,"show-confirm-button":!1,onClose:P},{default:Y(()=>[m("form",{class:"flex flex-col gap-4",onSubmit:Ve(x,["prevent"])},[!C(c)||e.type===s.EDIT?(p(),E("div",XF,[m("div",qF,[m("span",ZF,I(F.$t("AGENT_BOTS.FORM.AVATAR.LABEL")),1),S(kt,{src:r.botAvatarUrl,name:r.botName,size:68,"allow-upload":"","icon-name":"i-lucide-bot-message-square",onUpload:R,onDelete:O},null,8,["src","name"])]),S(Tt,{id:"bot-name",modelValue:r.botName,"onUpdate:modelValue":k[0]||(k[0]=B=>r.botName=B),label:F.$t("AGENT_BOTS.FORM.NAME.LABEL"),placeholder:F.$t("AGENT_BOTS.FORM.NAME.PLACEHOLDER"),message:v.value,"message-type":v.value?"error":"info",onBlur:k[1]||(k[1]=B=>C(h).botName.$touch())},null,8,["modelValue","label","placeholder","message","message-type"]),S(lo,{id:"bot-description",modelValue:r.botDescription,"onUpdate:modelValue":k[2]||(k[2]=B=>r.botDescription=B),label:F.$t("AGENT_BOTS.FORM.DESCRIPTION.LABEL"),placeholder:F.$t("AGENT_BOTS.FORM.DESCRIPTION.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),S(Tt,{id:"bot-url",modelValue:r.botUrl,"onUpdate:modelValue":k[3]||(k[3]=B=>r.botUrl=B),label:F.$t("AGENT_BOTS.FORM.WEBHOOK_URL.LABEL"),placeholder:F.$t("AGENT_BOTS.FORM.WEBHOOK_URL.PLACEHOLDER"),message:T.value,"message-type":T.value?"error":"info",onBlur:k[4]||(k[4]=B=>C(h).botUrl.$touch())},null,8,["modelValue","label","placeholder","message","message-type"])])):$("",!0),_.value?(p(),E("div",QF,[e.type===s.EDIT?(p(),E("label",JF,I(F.$t("AGENT_BOTS.ACCESS_TOKEN.TITLE")),1)):$("",!0),e.type===s.EDIT?(p(),L(Lf,{key:1,value:d.value,onOnCopy:D,onOnReset:M},null,8,["value"])):(p(),L(Lf,{key:2,value:d.value,"show-reset-button":!1,onOnCopy:D},null,8,["value"]))])):$("",!0),m("div",e7,[S(te,{faded:"",slate:"",type:"reset",label:F.$t("AGENT_BOTS.FORM.CANCEL"),onClick:k[5]||(k[5]=B=>U())},null,8,["label"]),C(c)?$("",!0):(p(),L(te,{key:0,type:"submit","data-testid":"label-submit",label:A.value,"is-loading":g.value,disabled:C(h).$invalid},null,8,["label","is-loading","disabled"]))])],32)]),_:1},8,["title","description"]))}},n7={class:"min-w-full overflow-x-auto divide-y divide-n-strong"},s7={class:"flex-1 divide-y divide-n-weak text-n-slate-12"},a7={class:"py-4 ltr:pr-4 rtl:pl-4"},o7={class:"flex flex-row items-center gap-4"},i7={class:"block font-medium break-words"},l7={key:0,class:"text-xs text-n-slate-12 bg-n-blue-5 inline-block rounded-md py-0.5 px-1 ltr:ml-1 rtl:mr-1"},r7={class:"text-sm text-n-slate-11"},c7={class:"py-4 ltr:pr-4 rtl:pl-4 text-sm"},u7={class:"py-4 min-w-xs"},d7={class:"flex gap-1 justify-end"},p7={__name:"Index",setup(e){const t={CREATE:"create",EDIT:"edit"},n=rt(),{t:s}=be(),a=_e("agentBots/getBots"),o=_e("agentBots/getUIFlags"),i=j({}),l=j({}),r=j(t.CREATE),c=j(null),u=j(null),d=y(()=>[s("AGENT_BOTS.LIST.TABLE_HEADER.DETAILS"),s("AGENT_BOTS.LIST.TABLE_HEADER.URL")]),h=y(()=>{var T;return((T=i.value)==null?void 0:T.name)||""}),g=()=>{r.value=t.CREATE,i.value={},c.value.dialogRef.open()},f=T=>{r.value=t.EDIT,i.value=T,c.value.dialogRef.open()},b=T=>{i.value=T,u.value.open()},A=async T=>{try{await n.dispatch("agentBots/delete",T),ne(s("AGENT_BOTS.DELETE.API.SUCCESS_MESSAGE"))}catch{ne(s("AGENT_BOTS.DELETE.API.ERROR_MESSAGE"))}finally{l.value[T]=!1,i.value={}}},v=()=>{l.value[i.value.id]=!0,A(i.value.id),u.value.close()};return lt(()=>{n.dispatch("agentBots/get")}),(T,_)=>{const N=Qe("tooltip");return p(),L(Es,{"is-loading":C(o).isFetching,"loading-message":C(s)("AGENT_BOTS.LIST.LOADING"),"no-records-found":!C(a).length,"no-records-message":C(s)("AGENT_BOTS.LIST.404")},{header:Y(()=>[S(hs,{title:C(s)("AGENT_BOTS.HEADER"),description:C(s)("AGENT_BOTS.DESCRIPTION"),"link-text":C(s)("AGENT_BOTS.LEARN_MORE"),"feature-name":"agent_bots"},{actions:Y(()=>[S(te,{icon:"i-lucide-circle-plus",label:T.$t("AGENT_BOTS.ADD.TITLE"),onClick:g},null,8,["label"])]),_:1},8,["title","description","link-text"])]),body:Y(()=>[m("table",n7,[m("thead",null,[(p(!0),E(ue,null,Ae(d.value,R=>(p(),E("th",{key:R,class:"py-4 font-semibold text-left ltr:pr-4 rtl:pl-4 text-n-slate-11"},I(R),1))),128))]),m("tbody",s7,[(p(!0),E(ue,null,Ae(C(a),R=>{var O;return p(),E("tr",{key:R.id},[m("td",a7,[m("div",o7,[S(kt,{name:R.name,src:R.thumbnail,size:40,"rounded-full":""},null,8,["name","src"]),m("div",null,[m("span",i7,[xe(I(R.name)+" ",1),R.system_bot?(p(),E("span",l7,I(T.$t("AGENT_BOTS.GLOBAL_BOT_BADGE")),1)):$("",!0)]),m("span",r7,I(R.description),1)])])]),m("td",c7,I(R.outgoing_url||((O=R.bot_config)==null?void 0:O.webhook_url)),1),m("td",u7,[m("div",d7,[R.system_bot?$("",!0):re((p(),L(te,{key:0,icon:"i-lucide-pen",slate:"",xs:"",faded:"","is-loading":l.value[R.id],onClick:x=>f(R)},null,8,["is-loading","onClick"])),[[N,C(s)("AGENT_BOTS.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]),R.system_bot?$("",!0):re((p(),L(te,{key:1,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":l.value[R.id],onClick:x=>b(R)},null,8,["is-loading","onClick"])),[[N,C(s)("AGENT_BOTS.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])])])}),128))])])]),default:Y(()=>[S(t7,{ref_key:"agentBotModalRef",ref:c,type:r.value,"selected-bot":i.value},null,8,["type","selected-bot"]),S($n,{ref_key:"agentBotDeleteDialogRef",ref:u,type:"alert",title:C(s)("AGENT_BOTS.DELETE.CONFIRM.TITLE"),description:C(s)("AGENT_BOTS.DELETE.CONFIRM.MESSAGE",{name:h.value}),"is-loading":C(o).isDeleting,"confirm-button-label":C(s)("AGENT_BOTS.DELETE.CONFIRM.YES"),"cancel-button-label":C(s)("AGENT_BOTS.DELETE.CONFIRM.NO"),onConfirm:v},null,8,["title","description","is-loading","confirm-button-label","cancel-button-label"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},m7={routes:[{path:vt("accounts/:accountId/settings/agent-bots"),meta:{permissions:["administrator"]},component:Rs,children:[{path:"",name:"agent_bots",component:p7,meta:{featureFlag:ft.AGENT_BOTS,permissions:["administrator"]}}]}]},h7=[{id:0,key:"CONVERSATION"},{id:1,key:"CONTACT"}],lA=[{id:0,key:"TEXT"},{id:1,key:"NUMBER"},{id:4,key:"LINK"},{id:5,key:"DATE"},{id:6,key:"LIST"},{id:7,key:"CHECKBOX"}],f7={components:{NextButton:te},props:{onClose:{type:Function,default:()=>{}},selectedAttributeModelTab:{type:Number,default:0}},setup(){return{v$:bt()}},data(){return{displayName:"",description:"",attributeModel:this.selectedAttributeModelTab||0,attributeType:0,attributeKey:"",regexPattern:null,regexCue:null,regexEnabled:!1,values:[],options:[],show:!0,isTouched:!1}},computed:{...mt({uiFlags:"getUIFlags"}),models(){return h7.map(e=>({...e,option:this.$t(`ATTRIBUTES_MGMT.ATTRIBUTE_MODELS.${e.key}`)}))},types(){return lA.map(e=>({...e,option:this.$t(`ATTRIBUTES_MGMT.ATTRIBUTE_TYPES.${e.key}`)}))},isMultiselectInvalid(){return this.isTouched&&this.values.length===0},isTagInputInvalid(){return this.isAttributeTypeList&&this.values.length===0},attributeListValues(){return this.values.map(e=>e.name)},isButtonDisabled(){return this.v$.displayName.$invalid||this.v$.description.$invalid||this.uiFlags.isCreating||this.isTagInputInvalid},keyErrorMessage(){return this.v$.attributeKey.isKey?this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.ERROR"):this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.IN_VALID")},isAttributeTypeList(){return this.attributeType===6},isAttributeTypeText(){return this.attributeType===0},isRegexEnabled(){return this.regexEnabled}},validations:{displayName:{required:Ye,minLength:en(1)},description:{required:Ye},attributeModel:{required:Ye},attributeType:{required:Ye},attributeKey:{required:Ye,isKey(e){return!(e.indexOf(" ")>=0)}}},methods:{addTagValue(e){const t={name:e};this.values.push(t),this.$refs.tagInput.$el.focus()},onTouch(){this.isTouched=!0},onDisplayNameChange(){this.attributeKey=bO(this.displayName)},toggleRegexEnabled(){this.regexEnabled=!this.regexEnabled},async addAttributes(){if(this.v$.$touch(),!this.v$.$invalid){this.regexEnabled||(this.regexPattern=null,this.regexCue=null);try{await this.$store.dispatch("attributes/create",{attribute_display_name:this.displayName,attribute_description:this.description,attribute_model:this.attributeModel,attribute_display_type:this.attributeType,attribute_key:this.attributeKey,attribute_values:this.attributeListValues,regex_pattern:this.regexPattern?new RegExp(this.regexPattern).toString():null,regex_cue:this.regexCue}),this.alertMessage=this.$t("ATTRIBUTES_MGMT.ADD.API.SUCCESS_MESSAGE"),this.onClose()}catch(e){const t=e==null?void 0:e.message;this.alertMessage=t||this.$t("ATTRIBUTES_MGMT.ADD.API.ERROR_MESSAGE")}finally{ne(this.alertMessage)}}}}},g7={class:"flex flex-col h-auto overflow-auto"},_7={class:"w-full"},v7=["value"],E7={key:0,class:"message"},b7=["placeholder"],T7={key:0,class:"message"},S7=["value"],A7={key:0,class:"message"},y7={key:0,class:"multiselect--wrap"},I7={key:1},C7={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function N7(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("woot-input"),r=W("multiselect"),c=W("NextButton"),u=W("woot-modal");return p(),L(u,{show:a.show,"onUpdate:show":t[12]||(t[12]=d=>a.show=d),"on-close":n.onClose},{default:Y(()=>[m("div",g7,[S(i,{"header-title":e.$t("ATTRIBUTES_MGMT.ADD.TITLE")},null,8,["header-title"]),m("form",{class:"flex w-full",onSubmit:t[11]||(t[11]=Ve((...d)=>o.addAttributes&&o.addAttributes(...d),["prevent"]))},[m("div",_7,[m("label",{class:ae({error:s.v$.attributeModel.$error})},[xe(I(e.$t("ATTRIBUTES_MGMT.ADD.FORM.MODEL.LABEL"))+" ",1),re(m("select",{"onUpdate:modelValue":t[0]||(t[0]=d=>a.attributeModel=d)},[(p(!0),E(ue,null,Ae(o.models,d=>(p(),E("option",{key:d.id,value:d.id},I(d.option),9,v7))),128))],512),[[Nn,a.attributeModel]]),s.v$.attributeModel.$error?(p(),E("span",E7,I(e.$t("ATTRIBUTES_MGMT.ADD.FORM.MODEL.ERROR")),1)):$("",!0)],2),S(l,{modelValue:a.displayName,"onUpdate:modelValue":[t[1]||(t[1]=d=>a.displayName=d),o.onDisplayNameChange],label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.LABEL"),type:"text",class:ae({error:s.v$.displayName.$error}),error:s.v$.displayName.$error?e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.ERROR"):"",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.PLACEHOLDER"),onBlur:s.v$.displayName.$touch},null,8,["modelValue","label","class","error","placeholder","onUpdate:modelValue","onBlur"]),S(l,{modelValue:a.attributeKey,"onUpdate:modelValue":t[2]||(t[2]=d=>a.attributeKey=d),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.LABEL"),type:"text",class:ae({error:s.v$.attributeKey.$error}),error:s.v$.attributeKey.$error?o.keyErrorMessage:"",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.PLACEHOLDER"),onBlur:s.v$.attributeKey.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),m("label",{class:ae({error:s.v$.description.$error})},[xe(I(e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.LABEL"))+" ",1),re(m("textarea",{"onUpdate:modelValue":t[3]||(t[3]=d=>a.description=d),rows:"3",type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.PLACEHOLDER"),onBlur:t[4]||(t[4]=(...d)=>s.v$.description.$touch&&s.v$.description.$touch(...d))},null,40,b7),[[gt,a.description]]),s.v$.description.$error?(p(),E("span",T7,I(e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.ERROR")),1)):$("",!0)],2),m("label",{class:ae({error:s.v$.attributeType.$error})},[xe(I(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LABEL"))+" ",1),re(m("select",{"onUpdate:modelValue":t[5]||(t[5]=d=>a.attributeType=d)},[(p(!0),E(ue,null,Ae(o.types,d=>(p(),E("option",{key:d.id,value:d.id},I(d.option),9,S7))),128))],512),[[Nn,a.attributeType]]),s.v$.attributeType.$error?(p(),E("span",A7,I(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.ERROR")),1)):$("",!0)],2),o.isAttributeTypeList?(p(),E("div",y7,[m("label",null,I(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.LABEL")),1),S(r,{ref:"tagInput",modelValue:a.values,"onUpdate:modelValue":t[6]||(t[6]=d=>a.values=d),placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.PLACEHOLDER"),label:"name","track-by":"name",class:ae({invalid:o.isMultiselectInvalid}),options:a.options,multiple:"",taggable:"",onClose:o.onTouch,onTag:o.addTagValue},null,8,["modelValue","placeholder","class","options","onClose","onTag"]),re(m("label",{class:"text-n-ruby-9 dark:text-n-ruby-9 text-sm font-normal mt-1"},I(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.ERROR")),513),[[rn,o.isMultiselectInvalid]])])):$("",!0),o.isAttributeTypeText?(p(),E("div",I7,[re(m("input",{"onUpdate:modelValue":t[7]||(t[7]=d=>a.regexEnabled=d),type:"checkbox",onInput:t[8]||(t[8]=(...d)=>o.toggleRegexEnabled&&o.toggleRegexEnabled(...d))},null,544),[[dn,a.regexEnabled]]),xe(" "+I(e.$t("ATTRIBUTES_MGMT.ADD.FORM.ENABLE_REGEX.LABEL")),1)])):$("",!0),o.isAttributeTypeText&&o.isRegexEnabled?(p(),L(l,{key:2,modelValue:a.regexPattern,"onUpdate:modelValue":t[9]||(t[9]=d=>a.regexPattern=d),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.LABEL"),type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):$("",!0),o.isAttributeTypeText&&o.isRegexEnabled?(p(),L(l,{key:3,modelValue:a.regexCue,"onUpdate:modelValue":t[10]||(t[10]=d=>a.regexCue=d),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.LABEL"),type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):$("",!0),m("div",C7,[S(c,{faded:"",slate:"",type:"reset",label:e.$t("ATTRIBUTES_MGMT.ADD.CANCEL_BUTTON_TEXT"),onClick:Ve(n.onClose,["prevent"])},null,8,["label","onClick"]),S(c,{type:"submit",label:e.$t("ATTRIBUTES_MGMT.ADD.SUBMIT"),disabled:o.isButtonDisabled},null,8,["label","disabled"])])])],32)])]),_:1},8,["show","on-close"])}const O7=De(f7,[["render",N7],["__scopeId","data-v-0bbba9ef"]]),R7={components:{NextButton:te},props:{selectedAttribute:{type:Object,default:()=>{}},isUpdating:{type:Boolean,default:!1}},emits:["onClose"],setup(){return{v$:bt()}},data(){return{displayName:"",description:"",attributeType:0,regexPattern:null,regexCue:null,regexEnabled:!1,show:!0,attributeKey:"",values:[],options:[],isTouched:!0}},validations:{displayName:{required:Ye},attributeType:{required:Ye},description:{required:Ye,minLength:en(1)},attributeKey:{required:Ye,isKey(e){return!(e.indexOf(" ")>=0)}}},computed:{types(){return lA.map(e=>({...e,option:this.$t(`ATTRIBUTES_MGMT.ATTRIBUTE_TYPES.${e.key}`)}))},setAttributeListValue(){return this.selectedAttribute.attribute_values.map(e=>({name:e}))},updatedAttributeListValues(){return this.values.map(e=>e.name)},isButtonDisabled(){return this.v$.description.$invalid||this.isMultiselectInvalid},isMultiselectInvalid(){return this.isAttributeTypeList&&this.isTouched&&this.values.length===0},pageTitle(){return`${this.$t("ATTRIBUTES_MGMT.EDIT.TITLE")} - ${this.selectedAttribute.attribute_display_name}`},selectedAttributeType(){var e;return(e=this.types.find(t=>t.key.toLowerCase()===this.selectedAttribute.attribute_display_type))==null?void 0:e.id},keyErrorMessage(){return this.v$.attributeKey.isKey?this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.ERROR"):this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.IN_VALID")},isAttributeTypeList(){return this.attributeType===6},isAttributeTypeText(){return this.attributeType===0},isRegexEnabled(){return this.regexEnabled}},mounted(){this.setFormValues()},methods:{onClose(){this.$emit("onClose")},addTagValue(e){const t={name:e};this.values.push(t),this.$refs.tagInput.$el.focus()},setFormValues(){const e=this.selectedAttribute.regex_pattern?fg(this.selectedAttribute.regex_pattern).source:null;this.displayName=this.selectedAttribute.attribute_display_name,this.description=this.selectedAttribute.attribute_description,this.attributeType=this.selectedAttributeType,this.attributeKey=this.selectedAttribute.attribute_key,this.regexPattern=e,this.regexCue=this.selectedAttribute.regex_cue,this.regexEnabled=e!=null,this.values=this.setAttributeListValue},async editAttributes(){if(this.v$.$touch(),!this.v$.$invalid){this.regexEnabled||(this.regexPattern=null,this.regexCue=null);try{await this.$store.dispatch("attributes/update",{id:this.selectedAttribute.id,attribute_description:this.description,attribute_display_name:this.displayName,attribute_values:this.updatedAttributeListValues,regex_pattern:this.regexPattern?new RegExp(this.regexPattern).toString():null,regex_cue:this.regexCue}),this.alertMessage=this.$t("ATTRIBUTES_MGMT.EDIT.API.SUCCESS_MESSAGE"),this.onClose()}catch(e){const t=e==null?void 0:e.message;this.alertMessage=t||this.$t("ATTRIBUTES_MGMT.EDIT.API.ERROR_MESSAGE")}finally{ne(this.alertMessage)}}},toggleRegexEnabled(){this.regexEnabled=!this.regexEnabled}}},x7={class:"flex flex-col h-auto overflow-auto"},w7={class:"w-full"},$7=["placeholder"],M7={key:0,class:"message"},L7=["value"],D7={key:0,class:"message"},P7={key:0,class:"multiselect--wrap"},k7={key:1},B7={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function U7(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("woot-input"),r=W("multiselect"),c=W("NextButton");return p(),E("div",x7,[S(i,{"header-title":o.pageTitle},null,8,["header-title"]),m("form",{class:"flex flex-col w-full",onSubmit:t[10]||(t[10]=Ve((...u)=>o.editAttributes&&o.editAttributes(...u),["prevent"]))},[m("div",w7,[S(l,{modelValue:a.displayName,"onUpdate:modelValue":t[0]||(t[0]=u=>a.displayName=u),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.LABEL"),type:"text",class:ae({error:s.v$.displayName.$error}),error:s.v$.displayName.$error?e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.ERROR"):"",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.PLACEHOLDER"),onBlur:s.v$.displayName.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),S(l,{modelValue:a.attributeKey,"onUpdate:modelValue":t[1]||(t[1]=u=>a.attributeKey=u),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.LABEL"),type:"text",class:ae({error:s.v$.attributeKey.$error}),error:s.v$.attributeKey.$error?o.keyErrorMessage:"",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.PLACEHOLDER"),readonly:"",onBlur:s.v$.attributeKey.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),m("label",{class:ae({error:s.v$.description.$error})},[xe(I(e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.LABEL"))+" ",1),re(m("textarea",{"onUpdate:modelValue":t[2]||(t[2]=u=>a.description=u),rows:"5",type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...u)=>s.v$.description.$touch&&s.v$.description.$touch(...u))},null,40,$7),[[gt,a.description]]),s.v$.description.$error?(p(),E("span",M7,I(e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.ERROR")),1)):$("",!0)],2),m("label",{class:ae({error:s.v$.attributeType.$error})},[xe(I(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LABEL"))+" ",1),re(m("select",{"onUpdate:modelValue":t[4]||(t[4]=u=>a.attributeType=u),disabled:""},[(p(!0),E(ue,null,Ae(o.types,u=>(p(),E("option",{key:u.id,value:u.id},I(u.option),9,L7))),128))],512),[[Nn,a.attributeType]]),s.v$.attributeType.$error?(p(),E("span",D7,I(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.ERROR")),1)):$("",!0)],2),o.isAttributeTypeList?(p(),E("div",P7,[m("label",null,I(e.$t("ATTRIBUTES_MGMT.EDIT.TYPE.LIST.LABEL")),1),S(r,{ref:"tagInput",modelValue:a.values,"onUpdate:modelValue":t[5]||(t[5]=u=>a.values=u),placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.PLACEHOLDER"),label:"name","track-by":"name",class:ae({invalid:o.isMultiselectInvalid}),options:a.options,multiple:"",taggable:"",onTag:o.addTagValue},null,8,["modelValue","placeholder","class","options","onTag"]),re(m("label",{class:"text-n-ruby-9 dark:text-n-ruby-9 text-sm font-normal mt-1"},I(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.ERROR")),513),[[rn,o.isMultiselectInvalid]])])):$("",!0),o.isAttributeTypeText?(p(),E("div",k7,[re(m("input",{"onUpdate:modelValue":t[6]||(t[6]=u=>a.regexEnabled=u),type:"checkbox",onInput:t[7]||(t[7]=(...u)=>o.toggleRegexEnabled&&o.toggleRegexEnabled(...u))},null,544),[[dn,a.regexEnabled]]),xe(" "+I(e.$t("ATTRIBUTES_MGMT.ADD.FORM.ENABLE_REGEX.LABEL")),1)])):$("",!0),o.isAttributeTypeText&&o.isRegexEnabled?(p(),L(l,{key:2,modelValue:a.regexPattern,"onUpdate:modelValue":t[8]||(t[8]=u=>a.regexPattern=u),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.LABEL"),type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):$("",!0),o.isAttributeTypeText&&o.isRegexEnabled?(p(),L(l,{key:3,modelValue:a.regexCue,"onUpdate:modelValue":t[9]||(t[9]=u=>a.regexCue=u),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.LABEL"),type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):$("",!0)]),m("div",B7,[S(c,{faded:"",slate:"",type:"reset",label:e.$t("ATTRIBUTES_MGMT.ADD.CANCEL_BUTTON_TEXT"),onClick:Ve(o.onClose,["prevent"])},null,8,["label","onClick"]),S(c,{type:"submit",label:e.$t("ATTRIBUTES_MGMT.EDIT.UPDATE_BUTTON_TEXT"),"is-loading":n.isUpdating,disabled:o.isButtonDisabled},null,8,["label","is-loading","disabled"])])],32)])}const F7=De(R7,[["render",U7],["__scopeId","data-v-f668f4ef"]]),G7={class:"flex flex-col"},V7={class:"min-w-full overflow-x-auto"},H7={class:"divide-y divide-n-weak flex-1 text-n-slate-12"},W7={class:"py-4 ltr:pr-4 rtl:pl-4 overflow-hidden whitespace-nowrap text-ellipsis"},z7={class:"py-4 ltr:pr-4 rtl:pl-4"},Y7={class:"py-4 ltr:pr-4 rtl:pl-4 overflow-hidden whitespace-nowrap text-ellipsis"},j7={class:"py-4 ltr:pr-4 rtl:pl-4 attribute-key overflow-hidden whitespace-nowrap text-ellipsis"},K7={class:"py-4 min-w-xs"},X7={class:"flex gap-1 justify-end"},q7={__name:"CustomAttribute",props:{attributeModel:{type:String,default:"conversation_attribute"}},setup(e){const t=e,{t:n}=be(),s=j(!1),a=j(!1),o=j({}),i=pn(),l=rt(),r=y(()=>i["attributes/getAttributesByModel"].value(t.attributeModel)),c=y(()=>i["attributes/getUIFlags"].value),u=y(()=>o.value.attribute_display_name),d=y(()=>`${n("ATTRIBUTES_MGMT.DELETE.CONFIRM.YES")} ${u.value}`),h=y(()=>n("ATTRIBUTES_MGMT.DELETE.CONFIRM.NO")),g=y(()=>n("ATTRIBUTES_MGMT.DELETE.CONFIRM.TITLE",{attributeName:u.value})),f=y(()=>`${n("ATTRIBUTES_MGMT.DELETE.CONFIRM.PLACE_HOLDER",{attributeName:u.value})}`),b=async({id:O})=>{var x;try{await l.dispatch("attributes/delete",O),ne(n("ATTRIBUTES_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch(w){const D=((x=w==null?void 0:w.response)==null?void 0:x.message)||n("ATTRIBUTES_MGMT.DELETE.API.ERROR_MESSAGE");ne(D)}},A=O=>{s.value=!0,o.value=O},v=()=>{s.value=!1},T=()=>{a.value=!1,o.value={}},_=()=>{b(o.value),T()},N=O=>{a.value=!0,o.value=O},R=y(()=>[n("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.NAME"),n("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.DESCRIPTION"),n("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.TYPE"),n("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.KEY")]);return(O,x)=>{const w=W("woot-modal"),D=W("woot-confirm-delete-modal"),M=Qe("tooltip");return p(),E("div",G7,[m("table",V7,[m("thead",null,[(p(!0),E(ue,null,Ae(R.value,P=>(p(),E("th",{key:P,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11"},I(P),1))),128))]),m("tbody",H7,[(p(!0),E(ue,null,Ae(r.value,P=>{var U;return p(),E("tr",{key:P.attribute_key},[m("td",W7,I(P.attribute_display_name),1),m("td",z7,I(P.attribute_description),1),m("td",Y7,I(O.$t(`ATTRIBUTES_MGMT.ATTRIBUTE_TYPES.${(U=P.attribute_display_type)==null?void 0:U.toUpperCase()}`)),1),m("td",j7,I(P.attribute_key),1),m("td",K7,[m("div",X7,[re(S(te,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:F=>A(P)},null,8,["onClick"]),[[M,O.$t("ATTRIBUTES_MGMT.LIST.BUTTONS.EDIT"),void 0,{top:!0}]]),re(S(te,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:F=>N(P)},null,8,["onClick"]),[[M,O.$t("ATTRIBUTES_MGMT.LIST.BUTTONS.DELETE"),void 0,{top:!0}]])])])])}),128))])]),S(w,{show:s.value,"onUpdate:show":x[0]||(x[0]=P=>s.value=P),"on-close":v},{default:Y(()=>[S(F7,{"selected-attribute":o.value,"is-updating":c.value.isUpdating,onOnClose:v},null,8,["selected-attribute","is-updating"])]),_:1},8,["show"]),a.value?(p(),L(D,{key:0,show:a.value,"onUpdate:show":x[1]||(x[1]=P=>a.value=P),title:g.value,message:O.$t("ATTRIBUTES_MGMT.DELETE.CONFIRM.MESSAGE"),"confirm-text":d.value,"reject-text":h.value,"confirm-value":o.value.attribute_display_name,"confirm-place-holder-text":f.value,onOnConfirm:_,onOnClose:T},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):$("",!0)])}}},Z7=De(q7,[["__scopeId","data-v-06e395c5"]]),Q7={__name:"Index",setup(e){const{t}=be(),n=pn(),s=rt(),a=j(!1),o=j(0),i=y(()=>n["attributes/getUIFlags"].value),l=()=>{a.value=!0},r=()=>{a.value=!1},c=y(()=>[{key:0,name:t("ATTRIBUTES_MGMT.TABS.CONVERSATION")},{key:1,name:t("ATTRIBUTES_MGMT.TABS.CONTACT")}]);lt(()=>{s.dispatch("attributes/get")});const u=y(()=>o.value?"contact_attribute":"conversation_attribute"),d=y(()=>n["attributes/getAttributesByModel"].value(u.value)),h=g=>{o.value=g};return(g,f)=>{const b=W("woot-tabs-item"),A=W("woot-tabs");return p(),L(Es,{"is-loading":i.value.isFetching,"loading-message":g.$t("ATTRIBUTES_MGMT.LOADING"),"no-records-found":!d.value.length,"no-records-message":g.$t("ATTRIBUTES_MGMT.LIST.EMPTY_RESULT.404")},{header:Y(()=>[S(hs,{title:g.$t("ATTRIBUTES_MGMT.HEADER"),description:g.$t("ATTRIBUTES_MGMT.DESCRIPTION"),"link-text":g.$t("ATTRIBUTES_MGMT.LEARN_MORE"),"feature-name":"custom_attributes"},{actions:Y(()=>[S(te,{icon:"i-lucide-circle-plus",label:g.$t("ATTRIBUTES_MGMT.HEADER_BTN_TXT"),onClick:l},null,8,["label"])]),_:1},8,["title","description","link-text"])]),preBody:Y(()=>[S(A,{class:"font-medium [&_ul]:p-0 mb-4",index:o.value,onChange:h},{default:Y(()=>[(p(!0),E(ue,null,Ae(c.value,(v,T)=>(p(),L(b,{key:v.key,index:T,name:v.name,"show-badge":!1,"is-compact":""},null,8,["index","name"]))),128))]),_:1},8,["index"])]),body:Y(()=>[(p(),L(Z7,{key:u.value,"attribute-model":u.value},null,8,["attribute-model"]))]),default:Y(()=>[a.value?(p(),L(O7,{key:0,show:a.value,"onUpdate:show":f[0]||(f[0]=v=>a.value=v),"on-close":r,"selected-attribute-model-tab":o.value},null,8,["show","selected-attribute-model-tab"])):$("",!0)]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},J7={routes:[{path:vt("accounts/:accountId/settings/custom-attributes"),component:Rs,children:[{path:"",redirect:e=>({name:"attributes_list",params:e.params})},{path:"list",name:"attributes_list",component:Q7,meta:{featureFlag:ft.CUSTOM_ATTRIBUTES,permissions:["administrator"]}}]}]},eG={name:"FilterInput",components:{NextButton:te},props:{modelValue:{type:Object,default:()=>{}},filterAttributes:{type:Array,default:()=>[]},inputType:{type:String,default:"plain_text"},operators:{type:Array,default:()=>[]},dropdownValues:{type:Array,default:()=>[]},showQueryOperator:{type:Boolean,default:!1},showUserInput:{type:Boolean,default:!0},groupedFilters:{type:Boolean,default:!1},filterGroups:{type:Array,default:()=>[]},customAttributeType:{type:String,default:""},errorMessage:{type:String,default:""}},emits:["update:modelValue","removeFilter","resetFilter"],computed:{attributeKey:{get(){return this.modelValue?this.modelValue.attribute_key:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,attribute_key:e})}},filterOperator:{get(){return this.modelValue?this.modelValue.filter_operator:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,filter_operator:e})}},values:{get(){return this.modelValue?this.modelValue.values:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,values:e})}},query_operator:{get(){return this.modelValue?this.modelValue.query_operator:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,query_operator:e})}},custom_attribute_type:{get(){return this.customAttributeType?this.customAttributeType:""},set(){const e=this.modelValue||{};this.$emit("update:modelValue",{...e,custom_attribute_type:this.customAttributeType})}}},watch:{customAttributeType:{handler(e){e==="conversation_attribute"||e==="contact_attribute"?this.modelValue.custom_attribute_type=this.customAttributeType:this.modelValue.custom_attribute_type=""},immediate:!0}},methods:{removeFilter(){this.$emit("removeFilter")},resetFilter(){this.$emit("resetFilter")},getInputErrorClass(e){return e?"bg-n-ruby-8/20 border-n-ruby-5 dark:border-n-ruby-5":"bg-n-background border-n-weak dark:border-n-weak"}}},tG={class:"flex gap-1"},nG=["label"],sG=["value"],aG=["value","disabled"],oG=["value"],iG={key:2,class:"flex-grow mr-1 filter__answer--wrap"},lG={key:0,class:"multiselect-wrap--small"},rG={key:1,class:"multiselect-wrap--small"},cG={key:2,class:"multiselect-wrap--small"},uG=["placeholder"],dG={key:0,class:"filter-error"},pG={key:0,class:"flex items-center justify-center relative my-2.5 mx-0"},mG={value:"and"},hG={value:"or"};function fG(e,t,n,s,a,o){const i=W("multiselect"),l=W("NextButton");return p(),E("div",null,[m("div",{class:ae(["p-2 border border-solid rounded-lg",o.getInputErrorClass(n.errorMessage)])},[m("div",tG,[n.groupedFilters?re((p(),E("select",{key:0,"onUpdate:modelValue":t[0]||(t[0]=r=>o.attributeKey=r),class:"max-w-[30%] mb-0 mr-1",onChange:t[1]||(t[1]=r=>o.resetFilter())},[(p(!0),E(ue,null,Ae(n.filterGroups,(r,c)=>(p(),E("optgroup",{key:c,label:r.name},[(p(!0),E(ue,null,Ae(r.attributes,u=>(p(),E("option",{key:u.key,value:u.key,selected:!0},I(u.name),9,sG))),128))],8,nG))),128))],544)),[[Nn,o.attributeKey]]):re((p(),E("select",{key:1,"onUpdate:modelValue":t[2]||(t[2]=r=>o.attributeKey=r),class:"max-w-[30%] mb-0 mr-1",onChange:t[3]||(t[3]=r=>o.resetFilter())},[(p(!0),E(ue,null,Ae(n.filterAttributes,r=>(p(),E("option",{key:r.key,value:r.key,disabled:r.disabled},I(r.name),9,aG))),128))],544)),[[Nn,o.attributeKey]]),re(m("select",{"onUpdate:modelValue":t[4]||(t[4]=r=>o.filterOperator=r),class:"max-w-[20%] mb-0 mr-1"},[(p(!0),E(ue,null,Ae(n.operators,(r,c)=>(p(),E("option",{key:c,value:r.value},I(e.$t(`FILTER.OPERATOR_LABELS.${r.value}`)),9,oG))),128))],512),[[Nn,o.filterOperator]]),n.showUserInput?(p(),E("div",iG,[n.inputType==="multi_select"?(p(),E("div",lG,[S(i,{modelValue:o.values,"onUpdate:modelValue":t[5]||(t[5]=r=>o.values=r),"track-by":"id",label:"name",placeholder:e.$t("FORMS.MULTISELECT.SELECT"),multiple:"","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:n.dropdownValues,"allow-empty":!1},{noOptions:Y(()=>[xe(I(e.$t("FORMS.MULTISELECT.NO_OPTIONS")),1)]),_:1},8,["modelValue","placeholder","select-label","options"])])):n.inputType==="search_select"?(p(),E("div",rG,[S(i,{modelValue:o.values,"onUpdate:modelValue":t[6]||(t[6]=r=>o.values=r),"track-by":"id",label:"name",placeholder:e.$t("FORMS.MULTISELECT.SELECT"),"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:n.dropdownValues,"allow-empty":!1,"option-height":104},{noOptions:Y(()=>[xe(I(e.$t("FORMS.MULTISELECT.NO_OPTIONS")),1)]),_:1},8,["modelValue","placeholder","select-label","options"])])):n.inputType==="date"?(p(),E("div",cG,[re(m("input",{"onUpdate:modelValue":t[7]||(t[7]=r=>o.values=r),type:"date",editable:!1,class:"!mb-0 datepicker"},null,512),[[gt,o.values]])])):re((p(),E("input",{key:3,"onUpdate:modelValue":t[8]||(t[8]=r=>o.values=r),type:"text",class:"!mb-0",placeholder:e.$t("FILTER.INPUT_PLACEHOLDER")},null,8,uG)),[[gt,o.values]])])):$("",!0),S(l,{icon:"i-lucide-x",slate:"",ghost:"",class:"flex-shrink-0",onClick:o.removeFilter},null,8,["onClick"])]),n.errorMessage?(p(),E("p",dG,I(n.errorMessage),1)):$("",!0)],2),n.showQueryOperator?(p(),E("div",pG,[t[10]||(t[10]=m("hr",{class:"absolute w-full border-b border-solid border-n-weak"},null,-1)),re(m("select",{"onUpdate:modelValue":t[9]||(t[9]=r=>o.query_operator=r),class:"relative w-auto mb-0 bg-n-background text-n-slate-12 border-n-weak"},[m("option",mG,I(e.$t("FILTER.QUERY_DROPDOWN_LABELS.AND")),1),m("option",hG,I(e.$t("FILTER.QUERY_DROPDOWN_LABELS.OR")),1)],512),[[Nn,o.query_operator]])])):$("",!0)])}const rA=De(eG,[["render",fG],["__scopeId","data-v-283da707"]]),gG={props:{teams:{type:Array,required:!0},modelValue:{type:Object,required:!0}},emits:["update:modelValue"],data(){return{selectedTeams:[],message:""}},mounted(){const{team_ids:e}=this.modelValue;this.selectedTeams=e,this.message=this.modelValue.message},methods:{updateValue(){this.$emit("update:modelValue",{team_ids:this.selectedTeams.map(e=>e.id),message:this.message})}}},_G={class:"multiselect-wrap--small flex flex-col gap-1 mt-1"},vG=["placeholder"];function EG(e,t,n,s,a,o){const i=W("multiselect");return p(),E("div",null,[m("div",_G,[S(i,{modelValue:a.selectedTeams,"onUpdate:modelValue":[t[0]||(t[0]=l=>a.selectedTeams=l),o.updateValue],"track-by":"id",label:"name",placeholder:e.$t("AUTOMATION.ACTION.TEAM_DROPDOWN_PLACEHOLDER"),multiple:"","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:n.teams,"allow-empty":!1},null,8,["modelValue","placeholder","select-label","options","onUpdate:modelValue"]),re(m("textarea",{"onUpdate:modelValue":t[1]||(t[1]=l=>a.message=l),rows:"4",placeholder:e.$t("AUTOMATION.ACTION.TEAM_MESSAGE_INPUT_PLACEHOLDER"),onInput:t[2]||(t[2]=(...l)=>o.updateValue&&o.updateValue(...l))},null,40,vG),[[gt,a.message]])])])}const bG=De(gG,[["render",EG],["__scopeId","data-v-8b53467a"]]),TG={components:{Spinner:Ls},props:{initialFileName:{type:String,default:""}},emits:["update:modelValue"],data(){return{uploadState:"idle",label:this.$t("AUTOMATION.ATTACHMENT.LABEL_IDLE")}},mounted(){this.initialFileName&&(this.label=this.initialFileName,this.uploadState="uploaded")},methods:{async onChangeFile(e){this.uploadState="processing",this.label=this.$t("AUTOMATION.ATTACHMENT.LABEL_UPLOADING");try{const t=e.target.files[0],n=await this.$store.dispatch("automations/uploadAttachment",t);this.$emit("update:modelValue",[n]),this.uploadState="uploaded",this.label=this.$t("AUTOMATION.ATTACHMENT.LABEL_UPLOADED")}catch{this.uploadState="failed",this.label=this.$t("AUTOMATION.ATTACHMENT.LABEL_UPLOAD_FAILED"),ne(this.$t("AUTOMATION.ATTACHMENT.UPLOAD_ERROR"))}}}},SG={class:"file-button"};function AG(e,t,n,s,a,o){const i=W("Spinner"),l=W("fluent-icon");return p(),E("label",{class:ae(["input-wrapper",a.uploadState])},[a.uploadState!=="processing"?(p(),E("input",{key:0,type:"file",name:"attachment",class:ae(a.uploadState==="processing"?"disabled":""),onChange:t[0]||(t[0]=(...r)=>o.onChangeFile&&o.onChangeFile(...r))},null,34)):$("",!0),a.uploadState==="processing"?(p(),L(i,{key:1})):$("",!0),a.uploadState==="idle"?(p(),L(l,{key:2,icon:"file-upload"})):$("",!0),a.uploadState==="uploaded"?(p(),L(l,{key:3,icon:"checkmark-circle",type:"outline",class:"success-icon"})):$("",!0),a.uploadState==="failed"?(p(),L(l,{key:4,icon:"dismiss-circle",type:"outline",class:"error-icon"})):$("",!0),m("p",SG,I(a.label),1)],2)}const yG=De(TG,[["render",AG],["__scopeId","data-v-f86be9e7"]]),IG={class:"mb-0 vertical dropdown menu"},CG=["onClick"],NG={__name:"MentionBox",props:{items:{type:Array,default:()=>[]},type:{type:String,default:"canned"}},emits:["mentionSelect"],setup(e,{emit:t}){const n=e,s=t,a=j(null),o=j(0),i=()=>{Wt(()=>{const d=a.value;if(!d)return;const h=d.querySelector(`#mention-item-${o.value}`);h&&h.scrollIntoView({block:"nearest",behavior:"auto"})})},l=()=>{s("mentionSelect",n.items[o.value])};Cg({items:y(()=>n.items),onSelect:l,adjustScroll:i,selectedIndex:o}),it(()=>n.items,d=>{d.length<o.value+1&&(o.value=0)}),it(o,i);const r=d=>{o.value=d},c=d=>{o.value=d,l()},u=(d={})=>n.type==="variable"?`{{${d.label}}}`:`/${d.label}`;return(d,h)=>{const g=W("woot-dropdown-item");return p(),E("div",{ref_key:"mentionsListContainerRef",ref:a,class:"bg-n-solid-1 p-1 rounded-xl overflow-auto absolute w-full z-20 shadow-md left-0 bottom-full max-h-[9.75rem] border border-solid border-n-strong mention--box"},[m("ul",IG,[(p(!0),E(ue,null,Ae(e.items,(f,b)=>(p(),L(g,{id:`mention-item-${b}`,key:f.key,class:"!mb-1",onMouseover:A=>r(b)},{default:Y(()=>[m("button",{class:ae(["flex rounded-lg group flex-col gap-0.5 overflow-hidden cursor-pointer items-start px-3 py-2 justify-center w-full h-full text-left hover:bg-n-alpha-black2",{"bg-n-alpha-black2":b===o.value}]),onClick:A=>c(b)},[We(d.$slots,"default",{item:f,index:b,selected:b===o.value},()=>[m("p",{class:ae(["max-w-full min-w-0 mb-0 overflow-hidden text-sm font-medium text-n-slate-11 group-hover:text-n-slate-12 text-ellipsis whitespace-nowrap",{"text-n-slate-12":b===o.value}])},I(f.description),3),m("p",{class:ae(["max-w-full min-w-0 mb-0 overflow-hidden text-xs text-n-slate-11 group-hover:text-n-slate-12 text-ellipsis whitespace-nowrap",{"text-n-slate-12":b===o.value}])},I(u(f)),3)],!0)],10,CG)]),_:2},1032,["id","onMouseover"]))),128))])],512)}}},a_=De(NG,[["__scopeId","data-v-8e98f7ba"]]),OG={components:{MentionBox:a_},props:{searchKey:{type:String,default:""}},emits:["replace"],computed:{...mt({cannedMessages:"getCannedResponses"}),items(){return this.cannedMessages.map(e=>({label:e.short_code,key:e.short_code,description:e.content}))}},watch:{searchKey(){this.fetchCannedResponses()}},mounted(){this.fetchCannedResponses()},methods:{fetchCannedResponses(){this.$store.dispatch("getCannedResponse",{searchKey:this.searchKey})},handleMentionClick(e={}){this.$emit("replace",e.description)}}};function RG(e,t,n,s,a,o){const i=W("MentionBox");return o.items.length?(p(),L(i,{key:0,items:o.items,onMentionSelect:o.handleMentionClick},null,8,["items","onMentionSelect"])):$("",!0)}const o_=De(OG,[["render",RG]]),xG={class:"max-w-full inline-flex items-center gap-0.5 min-w-0 mb-0 text-sm font-medium text-n-slate-12 group-hover:text-n-brand truncate"},wG={__name:"keyboardEmojiSelector",props:{searchKey:{type:String,default:""}},emits:["selectEmoji"],setup(e,{emit:t}){const n=e,s=t,a=og([]),o=y(()=>{if(!n.searchKey)return[];const r=n.searchKey.toLowerCase();return a.value.filter(c=>c.searchString.includes(r))});function i(){a.value=_R.flatMap(({emojis:r})=>r.map(({name:c,slug:u,...d})=>({...d,name:c,slug:u,searchString:`${c.replace(/\s+/g,"")} ${u}`.toLowerCase()})))}function l(r={}){s("selectEmoji",r.emoji)}return lt(()=>{i()}),(r,c)=>o.value.length?(p(),L(a_,{key:0,type:"emoji",items:o.value,onMentionSelect:l},{default:Y(({item:u,selected:d})=>[m("span",xG,[xe(I(u.emoji)+" ",1),m("p",{class:ae(["relative mb-0 truncate bottom-px",{"text-n-brand":d,"font-normal":!d}])}," :"+I(u.name),3)])]),_:1},8,["items"])):$("",!0)}},$G=["id"],MG={key:0,class:"px-2 py-2 text-xs font-medium tracking-wide capitalize text-n-slate-11"},LG=["onClick","onMouseover"],DG={class:"ltr:mr-2 rtl:ml-2"},PG={class:"overflow-hidden flex-1 max-w-full whitespace-nowrap text-ellipsis"},kG={__name:"TagAgents",props:{searchKey:{type:String,default:""}},emits:["selectAgent"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=pn(),i=y(()=>o["agents/getVerifiedAgents"].value),l=_e("teams/getTeams"),r=j(null),c=j(0),u=y(()=>{var N;const v=((N=n.searchKey)==null?void 0:N.trim().toLowerCase())||"",T=(R,O,x)=>R.map(w=>({...w,type:O,displayName:w.name,displayInfo:w[x]})).filter(w=>v?w.displayName.toLowerCase().includes(v):!0);return[{title:a("CONVERSATION.MENTION.AGENTS"),data:T(i.value,"user","email")},{title:a("CONVERSATION.MENTION.TEAMS"),data:T(l.value,"team","description")}].flatMap(({title:R,data:O})=>O.length?[{type:"header",title:R,id:`${R.toLowerCase()}-header`},...O]:[])}),d=y(()=>u.value.filter(v=>v.type!=="header")),h=v=>d.value.findIndex(T=>T.type===v.type&&T.id===v.id),g=()=>{Wt(()=>{if(r.value){const v=r.value.querySelector(`#mention-item-${c.value}`);v&&v.scrollIntoView({block:"nearest",behavior:"auto"})}})},f=()=>{s("selectAgent",d.value[c.value])};Cg({items:d,onSelect:f,adjustScroll:g,selectedIndex:c}),it(d,v=>{v.length<c.value+1&&(c.value=0)});const b=v=>{c.value=v},A=v=>{c.value=v,f()};return(v,T)=>(p(),E("div",null,[u.value.length?(p(),E("ul",{key:0,ref_key:"tagAgentsRef",ref:r,class:"vertical dropdown menu mention--box bg-n-solid-1 p-1 rounded-xl text-sm overflow-auto absolute w-full z-20 shadow-md left-0 leading-[1.2] bottom-full max-h-[12.5rem] border border-solid border-n-strong",role:"listbox"},[(p(!0),E(ue,null,Ae(u.value,_=>(p(),E("li",{id:_.type==="header"?void 0:`mention-item-${h(_)}`,key:`${_.type}-${_.id}`},[_.type==="header"?(p(),E("div",MG,I(_.title),1)):(p(),E("div",{key:1,class:ae([{"bg-n-alpha-black2":h(_)===c.value},"flex items-center px-2 py-1 rounded-md cursor-pointer"]),role:"option",onClick:N=>A(h(_)),onMouseover:N=>b(h(_))},[m("div",DG,[S(kt,{src:_.thumbnail,name:_.displayName,"rounded-full":""},null,8,["src","name"])]),m("div",PG,[m("h5",{class:ae(["overflow-hidden mb-0 text-sm capitalize whitespace-nowrap text-n-slate-11 text-ellipsis",{"text-n-slate-12":h(_)===c.value}])},I(_.displayName),3),m("div",{class:ae(["overflow-hidden text-xs whitespace-nowrap text-ellipsis text-n-slate-10",{"text-n-slate-11":h(_)===c.value}])},I(_.displayInfo),3)])],42,LG))],8,$G))),128))],512)):$("",!0)]))}},BG={components:{MentionBox:a_},props:{searchKey:{type:String,default:""}},emits:["selectVariable"],computed:{...mt({customAttributes:"attributes/getAttributes"}),sanitizedSearchKey(){return TO(this.searchKey)},items(){return[...this.standardAttributeVariables,...this.customAttributeVariables]},standardAttributeVariables(){return IN.filter(e=>e.label.includes(this.sanitizedSearchKey)||e.key.includes(this.sanitizedSearchKey)).map(e=>({label:e.key,key:e.key,description:e.label}))},customAttributeVariables(){return this.customAttributes.map(e=>{const t=e.attribute_model==="conversation_attribute"?"conversation":"contact";return{label:`${t}.custom_attribute.${e.attribute_key}`,key:`${t}.custom_attribute.${e.attribute_key}`,description:e.attribute_description}})}},methods:{handleVariableClick(e={}){this.$emit("selectVariable",e.key)}}};function UG(e,t,n,s,a,o){const i=W("MentionBox");return o.items.length?(p(),L(i,{key:0,type:"variable",items:o.items,onMentionSelect:o.handleVariableClick},null,8,["items","onMentionSelect"])):$("",!0)}const FG=De(BG,[["render",UG],["__scopeId","data-v-96735aa5"]]),GG=["id","onClick"],VG={class:"text-n-slate-12 font-medium text-sm"},HG={class:"text-n-slate-11 text-sm"},WG={__name:"ToolsDropdown",props:{items:{type:Array,required:!0},selectedIndex:{type:Number,default:0}},emits:["select"],setup(e,{emit:t}){const n=e,s=t,a=j(null),o=i=>s("select",i);return it(()=>n.selectedIndex,()=>{Wt(()=>{var l;const i=(l=a.value)==null?void 0:l.querySelector(`#tool-item-${n.selectedIndex}`);i&&i.scrollIntoView({block:"nearest",behavior:"auto"})})},{immediate:!0}),(i,l)=>(p(),E("div",{ref_key:"toolsDropdownRef",ref:a,class:"w-[22.5rem] p-2 flex flex-col gap-1 z-50 absolute rounded-xl bg-n-alpha-3 shadow outline outline-1 outline-n-weak backdrop-blur-[50px] max-h-[20rem] overflow-y-auto"},[(p(!0),E(ue,null,Ae(e.items,(r,c)=>(p(),E("div",{id:`tool-item-${c}`,key:r.id||c,class:ae([{"bg-n-alpha-black2":c===e.selectedIndex},"flex flex-col gap-1 rounded-md py-2 px-2 cursor-pointer hover:bg-n-alpha-black2"]),onClick:u=>o(c)},[m("span",VG,I(r.title),1),m("span",HG,I(r.description),1)],10,GG))),128))],512))}},zG={__name:"TagTools",props:{searchKey:{type:String,default:""}},emits:["selectTool"],setup(e,{emit:t}){const n=e,s=t,a=_e("captainTools/getRecords"),o=j(0),i=y(()=>{var u;const c=((u=n.searchKey)==null?void 0:u.trim().toLowerCase())||"";return a.value.filter(d=>d.title.toLowerCase().includes(c))}),l=()=>{},r=c=>{c&&(o.value=c),s("selectTool",i.value[o.value])};return Cg({items:i,onSelect:r,adjustScroll:l,selectedIndex:o}),it(i,c=>{c.length<o.value+1&&(o.value=0)}),(c,u)=>i.value.length?(p(),L(WG,{key:0,items:i.value,"selected-index":o.value,class:"bottom-20",onSelect:r},null,8,["items","selected-index"])):(p(),E(ue,{key:1},[],64))}},YG=["strong","em","link","undo","redo","bulletList","orderedList","code"],jG=["strong","em","link","undo","redo","imageUpload"],Ltt=["strong","em","link","undo","redo","bulletList","orderedList","h1","h2","h3","imageUpload","code"],i_=["strong","em","link","undo","redo"],KG=[{name:"Small",height:"24px"},{name:"Medium",height:"48px"},{name:"Large",height:"72px"},{name:"Original Size",height:"auto"}],XG=(e,t=0)=>n=>{const s=new RegExp(`(?:^)?${e}[^\\s${e}]{${t},}`,"g"),a=n.before(),o=n.end(),i=n.doc.textBetween(a,o,"\0","\0");let l;for(;l=s.exec(i);){const r=l.input.slice(Math.max(0,l.index-1),l.index);if(!/^[\s\0]?$/.test(r))continue;const c=l.index+n.start(),u=c+l[0].length;if(c<n.pos&&u>=n.pos){const d=l[0],h=d?d.slice(e.length):"";return{range:{from:c,to:u},text:h}}}return null},qG=({matcher:e,suggestionClass:t="prosemirror-mention-node",onEnter:n=()=>!1,onChange:s=()=>!1,onExit:a=()=>!1,onKeyDown:o=()=>!1})=>new vR({key:new ER("mentions"),view(){return{update:(i,l)=>{const r=this.key.getState(l),c=this.key.getState(i.state),u=r.active&&c.active&&r.range.from!==c.range.from,d=!r.active&&c.active,h=r.active&&!c.active,g=!d&&!h&&r.text!==c.text;(h||u)&&a({view:i,range:r.range,text:r.text}),g&&!u&&s({view:i,range:c.range,text:c.text}),(d||u)&&n({view:i,range:c.range,text:c.text})}}},state:{init(){return{active:!1,range:{},text:null}},apply(i,l){const{selection:r}=i,c={...l};if(r.from===r.to){(r.from<l.range.from||r.from>l.range.to)&&(c.active=!1);const u=r.$from,d=e(u);d?(c.active=!0,c.range=d.range,c.text=d.text):c.active=!1}else c.active=!1;return c.active||(c.range={},c.text=null),c}},props:{handleKeyDown(i,l){const{active:r}=this.getState(i.state);return r?o({view:i,event:l}):!1},decorations(i){const{active:l,range:r}=this.getState(i);return l?bR.create(i.doc,[TR.inline(r.from,r.to,{nodeName:"span",class:t})]):null}}}),ZG=["onClick"],QG=4e3,X1=4,ai={__name:"Editor",props:{modelValue:{type:String,default:""},editorId:{type:String,default:""},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},isPrivate:{type:Boolean,default:!1},enableSuggestions:{type:Boolean,default:!0},overrideLineBreaks:{type:Boolean,default:!1},updateSelectionWith:{type:String,default:""},enableVariables:{type:Boolean,default:!1},enableCannedResponses:{type:Boolean,default:!0},enableCaptainTools:{type:Boolean,default:!1},variables:{type:Object,default:()=>({})},enabledMenuOptions:{type:Array,default:()=>[]},signature:{type:String,default:""},allowSignature:{type:Boolean,default:!1},channelType:{type:String,default:""},showImageResizeToolbar:{type:Boolean,default:!1},focusOnMount:{type:Boolean,default:!0}},emits:["typingOn","typingOff","toggleUserMention","toggleCannedMenu","toggleVariablesMenu","toggleToolsMenu","clearSelection","blur","focus","input","update:modelValue"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=(ye,$e,Pe=[],pe={},Oe=[])=>SR.create({doc:new Mv(rm).parse(ye),plugins:AR({schema:rm,placeholder:$e,methods:pe,plugins:Pe,enabledMenuOptions:Oe})}),{isEditorHotKeyEnabled:i,fetchSignatureFlagFromUISettings:l}=tn(),r=xN(()=>s("typingOn"),()=>s("typingOff"),QG);let c=null,u=null;const d=j(!1),h=j(!1),g=j(!1),f=j(!1),b=j(!1),A=j(""),v=j(""),T=j(""),_=j(""),N=j(""),R=j(null),O=j(!1),x=j({top:0,left:0}),w=j(null),D=KG,M=Ss("editorRoot"),P=Ss("imageUpload"),U=Ss("editor"),F=()=>RR.serialize(c.state.doc),k=y(()=>n.enableVariables&&g.value&&!n.isPrivate),B=y(()=>n.enableCannedResponses&&h.value&&!n.isPrivate),V=y(()=>n.enabledMenuOptions.length?n.enabledMenuOptions:YG);function G({trigger:ye,minChars:$e=0,showMenu:Pe,searchTerm:pe,isAllowed:Oe=()=>!0}){return qG({matcher:XG(ye,$e),suggestionClass:"",onEnter:ke=>(Oe()&&(Pe.value=!0,R.value=ke.range,c=ke.view,pe&&(pe.value=ke.text||"")),!1),onChange:ke=>(c=ke.view,R.value=ke.range,pe&&(pe.value=ke.text),!1),onExit:()=>(pe&&(pe.value=""),Pe.value=!1,!1),onKeyDown:({event:ke})=>ke.keyCode===13&&Pe.value})}const K=y(()=>n.enableSuggestions?[G({trigger:"@",showMenu:b,searchTerm:v,isAllowed:()=>n.enableCaptainTools}),G({trigger:"@",showMenu:d,searchTerm:A,isAllowed:()=>n.isPrivate||!n.enableCaptainTools}),G({trigger:"/",showMenu:h,searchTerm:T,isAllowed:()=>!n.isPrivate}),G({trigger:"{{",showMenu:g,searchTerm:_,isAllowed:()=>!n.isPrivate}),G({trigger:":",minChars:2,showMenu:f,searchTerm:N})]:[]),se=y(()=>n.allowSignature&&!n.isPrivate&&n.channelType?l(n.channelType):!1);it(d,ye=>{s("toggleUserMention",n.isPrivate&&ye)}),it(h,ye=>{s("toggleCannedMenu",!n.isPrivate&&ye)}),it(g,ye=>{s("toggleVariablesMenu",!n.isPrivate&&ye)}),it(b,ye=>{s("toggleToolsMenu",n.enableCaptainTools&&ye)});function ee(ye="end"){const{tr:$e}=c.state,Pe=ye==="end"?$v.atEnd($e.doc):$v.atStart($e.doc);c.dispatch($e.setSelection(Pe)),c.focus()}function X(ye){return ye?(n.signature?Io(ye,n.signature):ye).trim().length===0:!0}function z(){const{schema:ye,tr:$e,doc:Pe}=u;if((Q=>Q&&Q.type===ye.nodes.paragraph&&Q.content.size===0)(Pe.firstChild)){ee("start");return}const Oe=ye.nodes.paragraph.create(),ke=$e.insert(0,Oe);c.dispatch(ke),ee("start")}function H(ye){if(n.disabled)return;const $e=C(ye);X($e)&&se.value?z():n.focusOnMount&&ee("end")}function q(){P.value.click()}function J(ye=n.modelValue){const $e=C(ye);u=o($e,n.placeholder,K.value,{onImageUpload:q},V.value),c.updateState(u),H($e)}function de(){let ye=n.modelValue;const $e=X(ye);ye=bi(ye,n.signature),J(ye),$e&&z()}function Te(){if(!n.signature)return;let ye=n.modelValue;ye=Io(ye,n.signature),J(ye)}function ce(ye){ye?de():Te()}function Ne(){const ye=M.value.getBoundingClientRect(),$e=w.value.getBoundingClientRect();x.value={top:`${$e.top-ye.top-30}px`,left:`${$e.left-ye.left-4}px`}}function Me(ye){n.showImageResizeToolbar&&(CR(w.value,ye,c),O.value=!1)}function Fe(){n.showImageResizeToolbar&&(w.value=document.querySelector("img.ProseMirror-selectednode"),w.value?(O.value=!!w.value,Ne()):O.value=!1)}function Ge(){s("input",F()),s("update:modelValue",F())}function je(){w.value&&(document.querySelector("img.ProseMirror-selectednode")||(O.value=!1))}function Ze(){return i("enter")}function nt(){return i("cmd_enter")}Os({"Alt+KeyP":{action:ee,allowOnFocusedInput:!0},"Alt+KeyL":{action:ee,allowOnFocusedInput:!0}});function st(ye){const{tr:$e}=c.state,Pe=xR(c.state,ye);Pe&&(c.dispatch($e.insert(Pe.pos,Pe.node).scrollIntoView()),ee())}async function At(ye){try{const{fileUrl:$e}=await SO(ye);$e&&st($e),ne(a("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.IMAGE_UPLOAD_SUCCESS"))}catch{ne(a("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.IMAGE_UPLOAD_ERROR"))}}function Mt(){const ye=P.value.files[0];$c(ye,X1)?At(ye):ne(a("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.IMAGE_UPLOAD_SIZE_ERROR",{size:X1})),P.value=""}function Z(ye){PR(ye)&&Ze()&&!n.overrideLineBreaks&&ye.preventDefault()}async function ie(ye,$e=0,Pe=0){u=NR(c,ye,$e,Pe),Ge(),await Wt(),OR(c)}function le(ye,$e=0){const Pe=$e||c.state.selection.from||0;let pe=new Mv(rm).parse(ye);ie(pe,Pe,void 0)}function ve(ye,$e){if(!c)return;let{node:Pe,from:pe,to:Oe}=IR(c,ye,$e,R.value,n.variables);if(!Pe)return;ie(Pe,pe,Oe);const ke={mention:ea.USED_MENTIONS,cannedResponse:ea.INSERTED_A_CANNED_RESPONSE,variable:ea.INSERTED_A_VARIABLE,emoji:ea.INSERTED_AN_EMOJI,tool:ea.INSERTED_A_TOOL};zt(ke[ye])}function ge(ye){kR(ye)&&nt()&&!n.overrideLineBreaks&&ye.preventDefault()}function Ie(ye){Ze()&&Z(ye),nt()&&ge(ye)}function Be(){c=new yR(U.value,{state:u,editable:()=>!n.disabled,dispatchTransaction:ye=>{u=u.apply(ye),c.updateState(u),ye.docChanged&&Ge()},handleDOMEvents:{keyup:()=>{n.disabled||(r.start(),je())},keydown:(ye,$e)=>!n.disabled&&Ie($e),focus:()=>!n.disabled&&s("focus"),click:()=>!n.disabled&&Fe(),blur:()=>{n.disabled||(r.stop(),s("blur"))},paste:(ye,$e)=>{if(n.disabled)return;$e.clipboardData.files.length>0&&$e.preventDefault()}}})}return it(y(()=>n.modelValue),(ye="")=>{ye!==F()&&J(ye)}),it(y(()=>n.editorId),()=>{h.value=!1,f.value=!1,g.value=!1,T.value="",J(n.modelValue)}),it(y(()=>n.isPrivate),()=>{J(n.modelValue)}),it(y(()=>n.updateSelectionWith),(ye,$e)=>{if(c&&ye!==$e&&n.updateSelectionWith!==""){const Pe=c.state.schema.text(n.updateSelectionWith),pe=c.state.tr.replaceSelectionWith(Pe);c.focus(),u=c.state.apply(pe),c.updateState(u),Ge(),s("clearSelection")}}),it(se,ye=>{n.allowSignature&&ce(ye)}),lt(()=>{u=o(n.modelValue,n.placeholder,K.value,{onImageUpload:q},V.value),Be(),c.updateState(u),n.focusOnMount&&ee()}),Yo(un.INSERT_INTO_RICH_EDITOR,le),(ye,$e)=>(p(),E("div",{ref_key:"editorRoot",ref:M,class:"relative w-full"},[d.value&&e.isPrivate?(p(),L(kG,{key:0,"search-key":A.value,onSelectAgent:$e[0]||($e[0]=Pe=>ve("mention",Pe))},null,8,["search-key"])):$("",!0),B.value?(p(),L(o_,{key:1,"search-key":T.value,onReplace:$e[1]||($e[1]=Pe=>ve("cannedResponse",Pe))},null,8,["search-key"])):$("",!0),k.value?(p(),L(FG,{key:2,"search-key":_.value,onSelectVariable:$e[2]||($e[2]=Pe=>ve("variable",Pe))},null,8,["search-key"])):$("",!0),f.value?(p(),L(wG,{key:3,"search-key":N.value,onSelectEmoji:$e[3]||($e[3]=Pe=>ve("emoji",Pe))},null,8,["search-key"])):$("",!0),b.value?(p(),L(zG,{key:4,"search-key":v.value,onSelectTool:$e[4]||($e[4]=Pe=>ve("tool",Pe))},null,8,["search-key"])):$("",!0),m("input",{ref_key:"imageUpload",ref:P,type:"file",accept:"image/png, image/jpeg, image/jpg, image/gif, image/webp",hidden:"",onChange:Mt},null,544),m("div",{ref_key:"editor",ref:U},null,512),re(m("div",{class:"absolute shadow-md rounded-[6px] flex gap-1 py-1 px-1 bg-n-solid-3 outline outline-1 outline-n-weak text-n-slate-12",style:Zt({top:x.value.top,left:x.value.left})},[(p(!0),E(ue,null,Ae(C(D),Pe=>(p(),E("button",{key:Pe.name,class:"text-xs font-medium rounded-[4px] outline outline-1 outline-n-strong px-1.5 py-0.5 hover:bg-n-slate-5",onClick:pe=>Me(Pe)},I(Pe.name),9,ZG))),128))],4),[[rn,O.value&&e.showImageResizeToolbar]]),We(ye.$slots,"footer")],512))}},JG={components:{AutomationActionTeamMessageInput:bG,AutomationActionFileInput:yG,WootMessageEditor:ai,NextButton:te},props:{modelValue:{type:Object,default:()=>null},actionTypes:{type:Array,default:()=>[]},dropdownValues:{type:Array,default:()=>[]},errorMessage:{type:String,default:""},showActionInput:{type:Boolean,default:!0},initialFileName:{type:String,default:""},isMacro:{type:Boolean,default:!1}},emits:["update:modelValue","input","removeAction","resetAction"],computed:{action_name:{get(){return this.modelValue?this.modelValue.action_name:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,action_name:e}),this.$emit("input",{...t,action_name:e})}},action_params:{get(){return this.modelValue?this.modelValue.action_params:null},set(e){const t=this.modelValue||{};this.$emit("update:modelValue",{...t,action_params:e}),this.$emit("input",{...t,action_params:e})}},inputType(){return this.actionTypes.find(e=>e.key===this.action_name).inputType},actionInputStyles(){return{"has-error":this.errorMessage,"is-a-macro":this.isMacro}},castMessageVmodel:{get(){return Array.isArray(this.action_params)?this.action_params[0]:this.action_params},set(e){this.action_params=e}}},methods:{removeAction(){this.$emit("removeAction")},resetAction(){this.$emit("resetAction")}}},eV={class:"filter-inputs"},tV=["value"],nV={key:0,class:"filter__answer--wrap"},sV={key:0,class:"w-full"},aV={key:0,class:"multiselect-wrap--small"},oV={key:1,class:"multiselect-wrap--small"},iV=["placeholder"],lV=["placeholder"],rV={key:2,class:"filter-error"};function cV(e,t,n,s,a,o){const i=W("multiselect"),l=W("AutomationActionFileInput"),r=W("NextButton"),c=W("AutomationActionTeamMessageInput"),u=W("WootMessageEditor");return p(),E("div",{class:ae(["filter",o.actionInputStyles])},[m("div",eV,[re(m("select",{"onUpdate:modelValue":t[0]||(t[0]=d=>o.action_name=d),class:ae(["action__question",{"full-width":!n.showActionInput}]),onChange:t[1]||(t[1]=d=>o.resetAction())},[(p(!0),E(ue,null,Ae(n.actionTypes,d=>(p(),E("option",{key:d.key,value:d.key},I(d.label),9,tV))),128))],34),[[Nn,o.action_name]]),n.showActionInput?(p(),E("div",nV,[o.inputType?(p(),E("div",sV,[o.inputType==="search_select"?(p(),E("div",aV,[S(i,{modelValue:o.action_params,"onUpdate:modelValue":t[2]||(t[2]=d=>o.action_params=d),"track-by":"id",label:"name",placeholder:e.$t("FORMS.MULTISELECT.SELECT"),"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:n.dropdownValues,"allow-empty":!1,"option-height":104},{noOptions:Y(()=>[xe(I(e.$t("FORMS.MULTISELECT.NO_OPTIONS")),1)]),_:1},8,["modelValue","placeholder","select-label","options"])])):o.inputType==="multi_select"?(p(),E("div",oV,[S(i,{modelValue:o.action_params,"onUpdate:modelValue":t[3]||(t[3]=d=>o.action_params=d),"track-by":"id",label:"name",placeholder:e.$t("FORMS.MULTISELECT.SELECT"),multiple:"","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:n.dropdownValues,"allow-empty":!1,"option-height":104},{noOptions:Y(()=>[xe(I(e.$t("FORMS.MULTISELECT.NO_OPTIONS")),1)]),_:1},8,["modelValue","placeholder","select-label","options"])])):o.inputType==="email"?re((p(),E("input",{key:2,"onUpdate:modelValue":t[4]||(t[4]=d=>o.action_params=d),type:"email",class:"answer--text-input",placeholder:e.$t("AUTOMATION.ACTION.EMAIL_INPUT_PLACEHOLDER")},null,8,iV)),[[gt,o.action_params]]):o.inputType==="url"?re((p(),E("input",{key:3,"onUpdate:modelValue":t[5]||(t[5]=d=>o.action_params=d),type:"url",class:"answer--text-input",placeholder:e.$t("AUTOMATION.ACTION.URL_INPUT_PLACEHOLDER")},null,8,lV)),[[gt,o.action_params]]):$("",!0),o.inputType==="attachment"?(p(),L(l,{key:4,modelValue:o.action_params,"onUpdate:modelValue":t[6]||(t[6]=d=>o.action_params=d),"initial-file-name":n.initialFileName},null,8,["modelValue","initial-file-name"])):$("",!0)])):$("",!0)])):$("",!0),n.isMacro?$("",!0):(p(),L(r,{key:1,icon:"i-lucide-x",slate:"",ghost:"",class:"flex-shrink-0",onClick:o.removeAction},null,8,["onClick"]))]),o.inputType==="team_message"?(p(),L(c,{key:0,modelValue:o.action_params,"onUpdate:modelValue":t[7]||(t[7]=d=>o.action_params=d),teams:n.dropdownValues},null,8,["modelValue","teams"])):$("",!0),o.inputType==="textarea"?(p(),L(u,{key:1,modelValue:o.castMessageVmodel,"onUpdate:modelValue":t[8]||(t[8]=d=>o.castMessageVmodel=d),rows:"4","enable-variables":"",placeholder:e.$t("AUTOMATION.ACTION.TEAM_MESSAGE_INPUT_PLACEHOLDER"),class:"action-message"},null,8,["modelValue","placeholder"])):$("",!0),n.errorMessage?(p(),E("p",rV,I(n.errorMessage),1)):$("",!0)],2)}const l_=De(JG,[["render",cV],["__scopeId","data-v-70584f07"]]),bn=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"}],ua=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"contains",label:"Contains"},{value:"does_not_contain",label:"Does not contain"}],Ta=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"}],uV=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"},{value:"is_greater_than",label:"Is greater than"},{value:"is_less_than",label:"Is less than"}],Kr=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"contains",label:"Contains"},{value:"does_not_contain",label:"Does not contain"},{value:"starts_with",label:"Starts With"}],dV=[{attribute_key:"message_type",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],pV=[{attribute_key:"browser_language",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],mV=[{attribute_key:"status",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],hV=[{action_name:"assign_agent",action_params:[]}],fV=[{id:"incoming",name:"Incoming",i18nKey:"INCOMING"},{id:"outgoing",name:"Outgoing",i18nKey:"OUTGOING"}],cA=[{id:"nil",name:"None",i18nKey:"NONE"},{id:"low",name:"Low",i18nKey:"LOW"},{id:"medium",name:"Medium",i18nKey:"MEDIUM"},{id:"high",name:"High",i18nKey:"HIGH"},{id:"urgent",name:"Urgent",i18nKey:"URGENT"}],gV=e=>e.every(t=>typeof t=="string"),_V=e=>e.every(t=>typeof t=="number"),vV=e=>(e.length<=0?e=[]:gV(e)||_V(e)?e=[...e]:e=e.map(t=>t.id),e),EV=e=>(e.action_params.id?e.action_params=[e.action_params.id]:e.action_params=[e.action_params],e.action_params),uA=e=>JSON.parse(JSON.stringify(e)).map(s=>(Array.isArray(s.action_params)?s.action_params=vV(s.action_params):typeof s.action_params=="object"?s.action_params=EV(s):s.action_params?s.action_params=[s.action_params]:s.action_params=[],s)),r_=e=>({date:"date",text:"plain_text",list:"search_select",checkbox:"search_select"})[e]||"plain_text",dA=(e,t)=>e.find(n=>n.attribute_key===t),bV=(e,t)=>e.find(n=>n.attribute_key===t).attribute_values.map(n=>({id:n,name:n})),TV=(e,t)=>e.find(n=>n.attribute_key===t&&n.attribute_display_type==="checkbox"),SV=(e,t)=>e.find(n=>n.attribute_key===t&&n.attribute_display_type==="list"),pA=e=>({list:bn,text:Ta,number:bn,link:bn,date:uV,checkbox:bn})[e]||bn,q1=(e,t)=>e.map(n=>({key:n.attribute_key,name:n.attribute_display_name,inputType:r_(n.attribute_display_type),filterOperators:pA(n.attribute_display_type),customAttributeType:t})),Pd=(e,t="id")=>!e||!Array.isArray(e)?[]:e.map(n=>({id:n[t],name:n.title})),AV=({agents:e,teams:t,labels:n,slaPolicies:s,type:a,addNoneToListFn:o,priorityOptions:i})=>({assign_agent:o?o(e):e,assign_team:o?o(t):t,send_email_to_team:t,add_label:Pd(n,"title"),remove_label:Pd(n,"title"),change_priority:i,add_sla:s})[a],yV=({agents:e,booleanFilterOptions:t,campaigns:n,contacts:s,countries:a,customAttributes:o,inboxes:i,languages:l,labels:r,statusFilterOptions:c,teams:u,type:d,priorityOptions:h,messageTypeOptions:g})=>TV(o,d)?t:SV(o,d)?bV(o,d):{status:c,assignee_id:e,contact:s,inbox_id:i,team_id:u,campaigns:Pd(n),browser_language:l,conversation_language:l,country_code:a,message_type:g,priority:h,labels:Pd(r,"title")}[d],IV=(e,t=[])=>{const n=e.action_params[0];if(!n)return"";if(e.action_name==="send_attachment"){const s=t.find(a=>a.blob_id===n);if(s)return s.filename.toString()}return""},Z1=e=>e==="message_created"?dV:e==="conversation_opened"||e==="conversation_resolved"?pV:mV,Q1=()=>hV,CV=e=>e.map(t=>({key:t.attribute_key,name:t.attribute_display_name,type:t.attribute_display_type})),NV=(e,t,n)=>e[t].conditions.find(s=>s.key===n).inputType,mA=e=>{const t=JSON.parse(JSON.stringify(e));return t.conditions[t.conditions.length-1].query_operator=null,t.conditions=yo(t.conditions).payload,t.actions=uA(t.actions),t},OV=(e,t)=>e.find(n=>n.key===t),RV=(e=[],t=[],n,s)=>{const a=[];return e.length&&a.push({key:"conversation_custom_attribute",name:n,disabled:!0},...e),t.length&&a.push({key:"contact_custom_attribute",name:s,disabled:!0},...t),a},kd=(e,t)=>e[t].conditions,hA=(e,t,n)=>e[t.event_name].conditions.find(s=>s.key===n),fA=(e,t,n,s)=>{const a=dA(e,s);return a?r_(a.attribute_display_type):hA(t,n,s).inputType},gA=(e,t,n,s,a)=>{if(s==="edit"){const i=dA(e,a);if(i)return pA(i.attribute_display_type)}return hA(t,n,a).filterOperators},_A=(e,t,n)=>e[t.event_name].conditions.find(s=>s.key===n).customAttributeType,vA=(e,t)=>t==="send_email_to_team"||t==="send_message"?!1:!!e.find(s=>s.key===t).inputType;function EA(){const e=pn(),{t}=be(),n=_e("agents/getAgents"),s=_e("campaigns/getAllCampaigns"),a=_e("contacts/getContacts"),o=_e("inboxes/getInboxes"),i=_e("labels/getLabels"),l=_e("teams/getTeams"),r=_e("sla/getSLA"),c=y(()=>[{id:!0,name:t("FILTER.ATTRIBUTE_LABELS.TRUE")},{id:!1,name:t("FILTER.ATTRIBUTE_LABELS.FALSE")}]),u=y(()=>({open:{TEXT:t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.open.TEXT")},resolved:{TEXT:t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.resolved.TEXT")},pending:{TEXT:t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.pending.TEXT")},snoozed:{TEXT:t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.snoozed.TEXT")},all:{TEXT:t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.all.TEXT")}})),d=y(()=>{const v=u.value;return[...Object.keys(v).map(T=>({id:T,name:v[T].TEXT})),{id:"all",name:t("CHAT_LIST.FILTER_ALL")}]}),h=y(()=>fV.map(v=>({id:v.id,name:t(`AUTOMATION.MESSAGE_TYPES.${v.i18nKey}`)}))),g=y(()=>cA.map(v=>({id:v.id,name:t(`AUTOMATION.PRIORITY_TYPES.${v.i18nKey}`)}))),f=v=>[{id:"nil",name:t("AUTOMATION.NONE_OPTION")||"None"},...v||[]];return{booleanFilterOptions:c,statusFilterItems:u,statusFilterOptions:d,priorityOptions:g,messageTypeOptions:h,getConditionDropdownValues:v=>yV({agents:n.value,booleanFilterOptions:c.value,campaigns:s.value,contacts:a.value,customAttributes:e["attributes/getAttributes"].value,inboxes:o.value,labels:i.value,statusFilterOptions:d.value,priorityOptions:g.value,messageTypeOptions:h.value,teams:l.value,languages:Ng,countries:Fa,type:v}),getActionDropdownValues:v=>AV({agents:n.value,labels:i.value,teams:l.value,slaPolicies:r.value,type:v,addNoneToListFn:f,priorityOptions:g.value}),agents:n,campaigns:s,contacts:a,inboxes:o,labels:i,teams:l,slaPolicies:r}}const xV={message_created:{conditions:[{key:"message_type",name:"MESSAGE_TYPE",inputType:"search_select",filterOperators:bn},{key:"content",name:"MESSAGE_CONTAINS",inputType:"comma_separated_plain_text",filterOperators:ua},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:ua},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:bn},{key:"status",name:"STATUS",inputType:"multi_select",filterOperators:bn},{key:"assignee_id",name:"ASSIGNEE_NAME",inputType:"search_select",filterOperators:Ta},{key:"team_id",name:"TEAM_NAME",inputType:"search_select",filterOperators:Ta},{key:"priority",name:"PRIORITY",inputType:"multi_select",filterOperators:bn},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:bn},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:Kr},{key:"labels",name:"LABELS",inputType:"multi_select",filterOperators:Ta}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"add_label",name:"ADD_LABEL"},{key:"remove_label",name:"REMOVE_LABEL"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"SNOOZE_CONVERSATION"},{key:"open_conversation",name:"OPEN_CONVERSATION"},{key:"resolve_conversation",name:"RESOLVE_CONVERSATION"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]},conversation_created:{conditions:[{key:"status",name:"STATUS",inputType:"multi_select",filterOperators:bn},{key:"browser_language",name:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:bn},{key:"mail_subject",name:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:ua},{key:"country_code",name:"COUNTRY_NAME",inputType:"search_select",filterOperators:bn},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:Kr},{key:"referer",name:"REFERER_LINK",inputType:"plain_text",filterOperators:ua},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:ua},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:bn},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:bn},{key:"priority",name:"PRIORITY",inputType:"multi_select",filterOperators:bn},{key:"labels",name:"LABELS",inputType:"multi_select",filterOperators:Ta}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"SNOOZE_CONVERSATION"},{key:"resolve_conversation",name:"RESOLVE_CONVERSATION"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]},conversation_updated:{conditions:[{key:"status",name:"STATUS",inputType:"multi_select",filterOperators:bn},{key:"browser_language",name:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:bn},{key:"mail_subject",name:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:ua},{key:"country_code",name:"COUNTRY_NAME",inputType:"search_select",filterOperators:bn},{key:"referer",name:"REFERER_LINK",inputType:"plain_text",filterOperators:ua},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:Kr},{key:"assignee_id",name:"ASSIGNEE_NAME",inputType:"search_select",filterOperators:Ta},{key:"team_id",name:"TEAM_NAME",inputType:"search_select",filterOperators:Ta},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:ua},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:bn},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:bn},{key:"priority",name:"PRIORITY",inputType:"multi_select",filterOperators:bn},{key:"labels",name:"LABELS",inputType:"multi_select",filterOperators:Ta}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"SNOOZE_CONVERSATION"},{key:"resolve_conversation",name:"RESOLVE_CONVERSATION"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]},conversation_opened:{conditions:[{key:"browser_language",name:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:bn},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:ua},{key:"mail_subject",name:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:ua},{key:"country_code",name:"COUNTRY_NAME",inputType:"search_select",filterOperators:bn},{key:"referer",name:"REFERER_LINK",inputType:"plain_text",filterOperators:ua},{key:"assignee_id",name:"ASSIGNEE_NAME",inputType:"search_select",filterOperators:Ta},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:Kr},{key:"team_id",name:"TEAM_NAME",inputType:"search_select",filterOperators:Ta},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:bn},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:bn},{key:"priority",name:"PRIORITY",inputType:"multi_select",filterOperators:bn},{key:"labels",name:"LABELS",inputType:"multi_select",filterOperators:Ta}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"mute_conversation",name:"MUTE_CONVERSATION"},{key:"snooze_conversation",name:"SNOOZE_CONVERSATION"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]},conversation_resolved:{conditions:[{key:"browser_language",name:"BROWSER_LANGUAGE",inputType:"search_select",filterOperators:bn},{key:"email",name:"EMAIL",inputType:"plain_text",filterOperators:ua},{key:"mail_subject",name:"MAIL_SUBJECT",inputType:"plain_text",filterOperators:ua},{key:"country_code",name:"COUNTRY_NAME",inputType:"search_select",filterOperators:bn},{key:"referer",name:"REFERER_LINK",inputType:"plain_text",filterOperators:ua},{key:"assignee_id",name:"ASSIGNEE_NAME",inputType:"search_select",filterOperators:Ta},{key:"phone_number",name:"PHONE_NUMBER",inputType:"plain_text",filterOperators:Kr},{key:"team_id",name:"TEAM_NAME",inputType:"search_select",filterOperators:Ta},{key:"inbox_id",name:"INBOX",inputType:"multi_select",filterOperators:bn},{key:"conversation_language",name:"CONVERSATION_LANGUAGE",inputType:"multi_select",filterOperators:bn},{key:"priority",name:"PRIORITY",inputType:"multi_select",filterOperators:bn}],actions:[{key:"assign_agent",name:"ASSIGN_AGENT"},{key:"assign_team",name:"ASSIGN_TEAM"},{key:"send_email_to_team",name:"SEND_EMAIL_TO_TEAM"},{key:"send_message",name:"SEND_MESSAGE"},{key:"send_email_transcript",name:"SEND_EMAIL_TRANSCRIPT"},{key:"send_webhook_event",name:"SEND_WEBHOOK_EVENT"},{key:"send_attachment",name:"SEND_ATTACHMENT"}]}},Bd=[{key:"conversation_created",value:"CONVERSATION_CREATED"},{key:"conversation_updated",value:"CONVERSATION_UPDATED"},{key:"conversation_resolved",value:"CONVERSATION_RESOLVED"},{key:"message_created",value:"MESSAGE_CREATED"},{key:"conversation_opened",value:"CONVERSATION_OPENED"}],Ud=[{key:"assign_agent",label:"ASSIGN_AGENT",inputType:"search_select"},{key:"assign_team",label:"ASSIGN_TEAM",inputType:"search_select"},{key:"add_label",label:"ADD_LABEL",inputType:"multi_select"},{key:"remove_label",label:"REMOVE_LABEL",inputType:"multi_select"},{key:"send_email_to_team",label:"SEND_EMAIL_TO_TEAM",inputType:"team_message"},{key:"send_email_transcript",label:"SEND_EMAIL_TRANSCRIPT",inputType:"email"},{key:"mute_conversation",label:"MUTE_CONVERSATION",inputType:null},{key:"snooze_conversation",label:"SNOOZE_CONVERSATION",inputType:null},{key:"resolve_conversation",label:"RESOLVE_CONVERSATION",inputType:null},{key:"open_conversation",label:"OPEN_CONVERSATION",inputType:null},{key:"send_webhook_event",label:"SEND_WEBHOOK_EVENT",inputType:"url"},{key:"send_attachment",label:"SEND_ATTACHMENT",inputType:"attachment"},{key:"send_message",label:"SEND_MESSAGE",inputType:"textarea"},{key:"add_private_note",label:"ADD_PRIVATE_NOTE",inputType:"textarea"},{key:"change_priority",label:"CHANGE_PRIORITY",inputType:"search_select"},{key:"add_sla",label:"ADD_SLA",inputType:"search_select"}];function bA(e=null){const t=pn(),{t:n}=be(),{booleanFilterOptions:s,statusFilterOptions:a,getConditionDropdownValues:o,getActionDropdownValues:i,agents:l,campaigns:r,contacts:c,inboxes:u,labels:d,teams:h,slaPolicies:g}=EA(),f=j(e),b=structuredClone(xV),A=y(()=>{var D;return(D=f.value)==null?void 0:D.event_name});return{automation:f,automationTypes:b,agents:l,campaigns:r,contacts:c,inboxes:u,labels:d,teams:h,slaPolicies:g,booleanFilterOptions:s,statusFilterOptions:a,onEventChange:()=>{f.value.conditions=Z1(A.value),f.value.actions=Q1()},getConditionDropdownValues:o,appendNewCondition:()=>{const D=Z1(A.value);f.value.conditions=[...f.value.conditions,...D]},appendNewAction:()=>{const D=Q1();f.value.actions=[...f.value.actions,...D]},removeFilter:D=>{f.value.conditions.length<=1?ne(n("AUTOMATION.CONDITION.DELETE_MESSAGE")):f.value.conditions=f.value.conditions.filter((M,P)=>P!==D)},removeAction:D=>{f.value.actions.length<=1?ne(n("AUTOMATION.ACTION.DELETE_MESSAGE")):f.value.actions=f.value.actions.filter((M,P)=>P!==D)},resetFilter:(D,M)=>{const P=[...f.value.conditions];P[D]={...P[D],filter_operator:b[A.value].conditions.find(U=>U.key===M.attribute_key).filterOperators[0].value,values:""},f.value.conditions=P},resetAction:D=>{const M=[...f.value.actions];M[D]={...M[D],action_params:[]},f.value.actions=M},getActionDropdownValues:i,manifestCustomAttributes:()=>{const D=t["attributes/getAttributesByModel"].value("conversation_attribute"),M=t["attributes/getAttributesByModel"].value("contact_attribute"),P=q1(D,"conversation_attribute"),U=q1(M,"contact_attribute"),F=RV(P,U,n("AUTOMATION.CONDITION.CONVERSATION_CUSTOM_ATTR_LABEL"),n("AUTOMATION.CONDITION.CONTACT_CUSTOM_ATTR_LABEL"));["message_created","conversation_created","conversation_updated","conversation_opened"].forEach(k=>{b[k].conditions=[...b[k].conditions,...F]})}}}const wV="ATTRIBUTE_KEY_REQUIRED",$V="FILTER_OPERATOR_REQUIRED",MV="VALUE_REQUIRED",LV="VALUE_MUST_BE_BETWEEN_1_AND_998",DV="ACTION_PARAMETERS_REQUIRED",PV="ATLEAST_ONE_CONDITION_REQUIRED",kV="ATLEAST_ONE_ACTION_REQUIRED",BV=e=>e?Array.isArray(e)?!e.length:typeof e=="object"?!Object.keys(e).length:!1:!0,TA=e=>e.attribute_key?e.filter_operator?!["is_present","is_not_present"].includes(e.filter_operator)&&BV(e.values)?MV:e.filter_operator==="days_before"&&(parseInt(e.values,10)<=0||parseInt(e.values,10)>=999)?LV:null:$V:wV,UV=e=>{const t={};return["name","description","event_name"].forEach(s=>{e[s]||(t[s]=`${s.charAt(0).toUpperCase()+s.slice(1)} is required`)}),t},FV=e=>{const t={};return!e||e.length===0?(t.conditions=PV,t):(e.forEach((n,s)=>{const a=TA(n);a&&(t[`condition_${s}`]=a)}),t)},GV=e=>!["mute_conversation","snooze_conversation","resolve_conversation","remove_assigned_team","open_conversation"].includes(e.action_name)&&(!e.action_params||e.action_params.length===0)?DV:null,SA=e=>!e||e.length===0?{actions:kV}:e.reduce((t,n,s)=>{const a=GV(n);return a&&(t[`action_${s}`]=a),t},{}),AA=e=>{const t=UV(e),n=FV(e.conditions),s=SA(e.actions);return{...t,...n,...s}},VV={name:null,description:null,event_name:"conversation_created",conditions:[{attribute_key:"status",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],actions:[{action_name:"assign_agent",action_params:[]}]},HV={components:{FilterInputBox:rA,AutomationActionInput:l_,NextButton:te},props:{onClose:{type:Function,default:()=>{}}},emits:["saveAutomation"],setup(){const{automation:e,automationTypes:t,onEventChange:n,getConditionDropdownValues:s,appendNewCondition:a,appendNewAction:o,removeFilter:i,removeAction:l,resetFilter:r,resetAction:c,getActionDropdownValues:u,manifestCustomAttributes:d}=bA(VV);return{automation:e,automationTypes:t,onEventChange:n,getConditionDropdownValues:s,appendNewCondition:a,appendNewAction:o,removeFilter:i,removeAction:l,resetFilter:r,resetAction:c,getActionDropdownValues:u,manifestCustomAttributes:d}},data(){return{automationRuleEvent:Bd[0].key,automationMutated:!1,show:!0,showDeleteConfirmationModal:!1,allCustomAttributes:[],mode:"create",errors:{}}},computed:{...mt({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),automationRuleEvents(){return Bd.map(e=>({...e,value:this.$t(`AUTOMATION.EVENTS.${e.value}`)}))},hasAutomationMutated(){return!!(this.automation.conditions[0].values||this.automation.actions[0].action_params.length)},automationActionTypes(){return(this.isFeatureEnabled("sla")?Ud:Ud.filter(({key:t})=>t!=="add_sla")).map(t=>({...t,label:this.$t(`AUTOMATION.ACTIONS.${t.label}`)}))}},mounted(){this.$store.dispatch("inboxes/get"),this.$store.dispatch("agents/get"),this.$store.dispatch("contacts/get"),this.$store.dispatch("teams/get"),this.$store.dispatch("labels/get"),this.$store.dispatch("campaigns/get"),this.allCustomAttributes=this.$store.getters["attributes/getAttributes"],this.manifestCustomAttributes()},methods:{getAttributes:kd,getInputType:fA,getOperators:gA,getCustomAttributeType:_A,showActionInput:vA,isFeatureEnabled(e){return this.isFeatureEnabledonAccount(this.accountId,e)},emitSaveAutomation(){if(this.errors=AA(this.automation),Object.keys(this.errors).length===0){const e=mA(this.automation);this.$emit("saveAutomation",e,this.mode)}},getTranslatedAttributes(e,t){return kd(e,t).map(n=>{const s=n.customAttributeType||["contact_custom_attribute","conversation_custom_attribute"].includes(n.key);return{...n,name:s?n.name:this.$t(`AUTOMATION.ATTRIBUTES.${n.name}`)}})}}},WV={class:"flex flex-col modal-content"},zV={class:"w-full"},YV={class:"mb-6"},jV=["value"],KV={key:0,class:"message"},XV={key:0,class:"text-xs text-right text-n-teal-10 pt-1"},qV={class:"w-full p-4 mb-4 border border-solid rounded-lg bg-n-slate-2 dark:bg-n-solid-2 border-n-strong"},ZV={class:"mt-4"},QV={class:"w-full p-4 mb-4 border border-solid rounded-lg bg-n-slate-2 dark:bg-n-solid-2 border-n-strong"},JV={class:"mt-4"},eH={class:"w-full"},tH={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function nH(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("woot-input"),r=W("FilterInputBox"),c=W("NextButton"),u=W("AutomationActionInput");return p(),E("div",null,[S(i,{"header-title":e.$t("AUTOMATION.ADD.TITLE")},null,8,["header-title"]),m("div",WV,[m("div",zV,[S(l,{modelValue:s.automation.name,"onUpdate:modelValue":t[0]||(t[0]=d=>s.automation.name=d),label:e.$t("AUTOMATION.ADD.FORM.NAME.LABEL"),type:"text",class:ae({error:a.errors.name}),error:a.errors.name?e.$t("AUTOMATION.ADD.FORM.NAME.ERROR"):"",placeholder:e.$t("AUTOMATION.ADD.FORM.NAME.PLACEHOLDER")},null,8,["modelValue","label","class","error","placeholder"]),S(l,{modelValue:s.automation.description,"onUpdate:modelValue":t[1]||(t[1]=d=>s.automation.description=d),label:e.$t("AUTOMATION.ADD.FORM.DESC.LABEL"),type:"text",class:ae({error:a.errors.description}),error:a.errors.description?e.$t("AUTOMATION.ADD.FORM.DESC.ERROR"):"",placeholder:e.$t("AUTOMATION.ADD.FORM.DESC.PLACEHOLDER")},null,8,["modelValue","label","class","error","placeholder"]),m("div",YV,[m("label",{class:ae({error:a.errors.event_name})},[xe(I(e.$t("AUTOMATION.ADD.FORM.EVENT.LABEL"))+" ",1),re(m("select",{"onUpdate:modelValue":t[2]||(t[2]=d=>s.automation.event_name=d),class:"m-0",onChange:t[3]||(t[3]=d=>s.onEventChange(s.automation))},[(p(!0),E(ue,null,Ae(o.automationRuleEvents,d=>(p(),E("option",{key:d.key,value:d.key},I(d.value),9,jV))),128))],544),[[Nn,s.automation.event_name]]),a.errors.event_name?(p(),E("span",KV,I(e.$t("AUTOMATION.ADD.FORM.EVENT.ERROR")),1)):$("",!0)],2),o.hasAutomationMutated?(p(),E("p",XV,I(e.$t("AUTOMATION.FORM.RESET_MESSAGE")),1)):$("",!0)]),m("section",null,[m("label",null,I(e.$t("AUTOMATION.ADD.FORM.CONDITIONS.LABEL")),1),m("div",qV,[(p(!0),E(ue,null,Ae(s.automation.conditions,(d,h)=>(p(),L(r,{key:h,modelValue:s.automation.conditions[h],"onUpdate:modelValue":g=>s.automation.conditions[h]=g,"filter-attributes":o.getTranslatedAttributes(s.automationTypes,s.automation.event_name),"input-type":o.getInputType(a.allCustomAttributes,s.automationTypes,s.automation,s.automation.conditions[h].attribute_key),operators:o.getOperators(a.allCustomAttributes,s.automationTypes,s.automation,a.mode,s.automation.conditions[h].attribute_key),"dropdown-values":s.getConditionDropdownValues(s.automation.conditions[h].attribute_key),"show-query-operator":h!==s.automation.conditions.length-1,"custom-attribute-type":o.getCustomAttributeType(s.automationTypes,s.automation,s.automation.conditions[h].attribute_key),"error-message":a.errors[`condition_${h}`]?e.$t(`AUTOMATION.ERRORS.${a.errors[`condition_${h}`]}`):"",onResetFilter:g=>s.resetFilter(h,s.automation.conditions[h]),onRemoveFilter:g=>s.removeFilter(h)},null,8,["modelValue","onUpdate:modelValue","filter-attributes","input-type","operators","dropdown-values","show-query-operator","custom-attribute-type","error-message","onResetFilter","onRemoveFilter"]))),128)),m("div",ZV,[S(c,{icon:"i-lucide-plus",blue:"",faded:"",sm:"",label:e.$t("AUTOMATION.ADD.CONDITION_BUTTON_LABEL"),onClick:s.appendNewCondition},null,8,["label","onClick"])])])]),m("section",null,[m("label",null,I(e.$t("AUTOMATION.ADD.FORM.ACTIONS.LABEL")),1),m("div",QV,[(p(!0),E(ue,null,Ae(s.automation.actions,(d,h)=>(p(),L(u,{key:h,modelValue:s.automation.actions[h],"onUpdate:modelValue":g=>s.automation.actions[h]=g,"action-types":o.automationActionTypes,"dropdown-values":s.getActionDropdownValues(s.automation.actions[h].action_name),"show-action-input":o.showActionInput(o.automationActionTypes,s.automation.actions[h].action_name),"error-message":a.errors[`action_${h}`]?e.$t(`AUTOMATION.ERRORS.${a.errors[`action_${h}`]}`):"",onResetAction:g=>s.resetAction(h),onRemoveAction:g=>s.removeAction(h)},null,8,["modelValue","onUpdate:modelValue","action-types","dropdown-values","show-action-input","error-message","onResetAction","onRemoveAction"]))),128)),m("div",JV,[S(c,{icon:"i-lucide-plus",blue:"",faded:"",sm:"",label:e.$t("AUTOMATION.ADD.ACTION_BUTTON_LABEL"),onClick:s.appendNewAction},null,8,["label","onClick"])])])]),m("div",eH,[m("div",tH,[S(c,{faded:"",slate:"",type:"reset",label:e.$t("AUTOMATION.ADD.CANCEL_BUTTON_TEXT"),onClick:Ve(n.onClose,["prevent"])},null,8,["label","onClick"]),S(c,{solid:"",blue:"",type:"submit",label:e.$t("AUTOMATION.ADD.SUBMIT"),onClick:o.emitSaveAutomation},null,8,["label","onClick"])])])])])])}const sH=De(HV,[["render",nH]]);function aH(){const{getConditionDropdownValues:e,getActionDropdownValues:t}=EA(),n=(i,l,r)=>{const c=CV(l);return i.conditions.map(u=>{const d=OV(c,u.attribute_key);let h="plain_text";return d?h=r_(d.type):h=NV(r,i.event_name,u.attribute_key),h==="plain_text"||h==="date"?{...u,values:u.values[0]}:h==="comma_separated_plain_text"?{...u,values:u.values.join(",")}:{...u,query_operator:u.query_operator||"and",values:[...e(u.attribute_key)].filter(g=>[...u.values].includes(g.id))}})},s=(i,l)=>{const r=i.action_params,c=l.find(u=>u.key===i.action_name).inputType;return c==="multi_select"||c==="search_select"?[...t(i.action_name)].filter(u=>[...r].includes(u.id)):c==="team_message"?{team_ids:[...t(i.action_name)].filter(u=>[...r[0].team_ids].includes(u.id)),message:r[0].message}:[...r]},a=(i,l)=>i.actions.map(r=>({...r,action_params:r.action_params.length?s(r,l):[]}));return{formatAutomation:(i,l,r,c)=>({...i,conditions:n(i,l,r),actions:a(i,c)})}}const oH={components:{FilterInputBox:rA,NextButton:te,AutomationActionInput:l_},props:{onClose:{type:Function,default:()=>{}},selectedResponse:{type:Object,default:()=>{}}},emits:["saveAutomation"],setup(){const{automation:e,automationTypes:t,onEventChange:n,getConditionDropdownValues:s,appendNewCondition:a,appendNewAction:o,removeFilter:i,removeAction:l,resetFilter:r,resetAction:c,getActionDropdownValues:u,manifestCustomAttributes:d}=bA(),{formatAutomation:h}=aH();return{automation:e,automationTypes:t,onEventChange:n,getConditionDropdownValues:s,appendNewCondition:a,appendNewAction:o,removeFilter:i,removeAction:l,resetFilter:r,resetAction:c,getActionDropdownValues:u,formatAutomation:h,manifestCustomAttributes:d}},data(){return{automationRuleEvent:Bd[0].key,automationMutated:!1,show:!0,showDeleteConfirmationModal:!1,allCustomAttributes:[],mode:"edit",errors:{}}},computed:{...mt({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),automationRuleEvents(){return Bd.map(e=>({...e,value:this.$t(`AUTOMATION.EVENTS.${e.value}`)}))},hasAutomationMutated(){return!!(this.automation.conditions[0].values||this.automation.actions[0].action_params.length)},automationActionTypes(){return(this.isFeatureEnabled("sla")?Ud:Ud.filter(({key:t})=>t!=="add_sla")).map(t=>({...t,label:this.$t(`AUTOMATION.ACTIONS.${t.label}`)}))}},mounted(){this.manifestCustomAttributes(),this.allCustomAttributes=this.$store.getters["attributes/getAttributes"],this.automation=this.formatAutomation(this.selectedResponse,this.allCustomAttributes,this.automationTypes,this.automationActionTypes)},methods:{getFileName:IV,getAttributes:kd,getInputType:fA,getOperators:gA,getCustomAttributeType:_A,showActionInput:vA,isFeatureEnabled(e){return this.isFeatureEnabledonAccount(this.accountId,e)},emitSaveAutomation(){if(this.errors=AA(this.automation),Object.keys(this.errors).length===0){const e=mA(this.automation);this.$emit("saveAutomation",e,this.mode)}},getTranslatedAttributes(e,t){return kd(e,t).map(n=>{const s=n.customAttributeType||["contact_custom_attribute","conversation_custom_attribute"].includes(n.key);return{...n,name:s?n.name:this.$t(`AUTOMATION.ATTRIBUTES.${n.name}`)}})}}},iH={class:"flex flex-col modal-content"},lH={key:0,class:"w-full"},rH={class:"event_wrapper"},cH=["value"],uH={key:0,class:"message"},dH={class:"w-full p-4 mb-4 border border-solid rounded-lg bg-n-slate-2 dark:bg-n-solid-2 border-n-strong"},pH={class:"mt-4"},mH={class:"w-full p-4 mb-4 border border-solid rounded-lg bg-n-slate-2 dark:bg-n-solid-2 border-n-strong"},hH={class:"mt-4"},fH={class:"w-full"},gH={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function _H(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("woot-input"),r=W("FilterInputBox"),c=W("NextButton"),u=W("AutomationActionInput");return p(),E("div",null,[S(i,{"header-title":e.$t("AUTOMATION.EDIT.TITLE")},null,8,["header-title"]),m("div",iH,[s.automation?(p(),E("div",lH,[S(l,{modelValue:s.automation.name,"onUpdate:modelValue":t[0]||(t[0]=d=>s.automation.name=d),label:e.$t("AUTOMATION.ADD.FORM.NAME.LABEL"),type:"text",class:ae({error:a.errors.name}),error:a.errors.name?e.$t("AUTOMATION.ADD.FORM.NAME.ERROR"):"",placeholder:e.$t("AUTOMATION.ADD.FORM.NAME.PLACEHOLDER")},null,8,["modelValue","label","class","error","placeholder"]),S(l,{modelValue:s.automation.description,"onUpdate:modelValue":t[1]||(t[1]=d=>s.automation.description=d),label:e.$t("AUTOMATION.ADD.FORM.DESC.LABEL"),type:"text",class:ae({error:a.errors.description}),error:a.errors.description?e.$t("AUTOMATION.ADD.FORM.DESC.ERROR"):"",placeholder:e.$t("AUTOMATION.ADD.FORM.DESC.PLACEHOLDER")},null,8,["modelValue","label","class","error","placeholder"]),m("div",rH,[m("label",{class:ae({error:a.errors.event_name})},[xe(I(e.$t("AUTOMATION.ADD.FORM.EVENT.LABEL"))+" ",1),re(m("select",{"onUpdate:modelValue":t[2]||(t[2]=d=>s.automation.event_name=d),onChange:t[3]||(t[3]=d=>s.onEventChange(s.automation))},[(p(!0),E(ue,null,Ae(o.automationRuleEvents,d=>(p(),E("option",{key:d.key,value:d.key},I(d.value),9,cH))),128))],544),[[Nn,s.automation.event_name]]),a.errors.event_name?(p(),E("span",uH,I(e.$t("AUTOMATION.ADD.FORM.EVENT.ERROR")),1)):$("",!0)],2)]),m("section",null,[m("label",null,I(e.$t("AUTOMATION.ADD.FORM.CONDITIONS.LABEL")),1),m("div",dH,[(p(!0),E(ue,null,Ae(s.automation.conditions,(d,h)=>(p(),L(r,{key:h,modelValue:s.automation.conditions[h],"onUpdate:modelValue":g=>s.automation.conditions[h]=g,"filter-attributes":o.getTranslatedAttributes(s.automationTypes,s.automation.event_name),"input-type":o.getInputType(a.allCustomAttributes,s.automationTypes,s.automation,s.automation.conditions[h].attribute_key),operators:o.getOperators(a.allCustomAttributes,s.automationTypes,s.automation,a.mode,s.automation.conditions[h].attribute_key),"dropdown-values":s.getConditionDropdownValues(s.automation.conditions[h].attribute_key),"custom-attribute-type":o.getCustomAttributeType(s.automationTypes,s.automation,s.automation.conditions[h].attribute_key),"show-query-operator":h!==s.automation.conditions.length-1,"error-message":a.errors[`condition_${h}`]?e.$t(`AUTOMATION.ERRORS.${a.errors[`condition_${h}`]}`):"",onResetFilter:g=>s.resetFilter(h,s.automation.conditions[h]),onRemoveFilter:g=>s.removeFilter(h)},null,8,["modelValue","onUpdate:modelValue","filter-attributes","input-type","operators","dropdown-values","custom-attribute-type","show-query-operator","error-message","onResetFilter","onRemoveFilter"]))),128)),m("div",pH,[S(c,{icon:"i-lucide-plus",blue:"",faded:"",sm:"",label:e.$t("AUTOMATION.ADD.CONDITION_BUTTON_LABEL"),onClick:s.appendNewCondition},null,8,["label","onClick"])])])]),m("section",null,[m("label",null,I(e.$t("AUTOMATION.ADD.FORM.ACTIONS.LABEL")),1),m("div",mH,[(p(!0),E(ue,null,Ae(s.automation.actions,(d,h)=>(p(),L(u,{key:h,modelValue:s.automation.actions[h],"onUpdate:modelValue":g=>s.automation.actions[h]=g,"action-types":o.automationActionTypes,"dropdown-values":s.getActionDropdownValues(d.action_name),"show-action-input":o.showActionInput(o.automationActionTypes,d.action_name),"error-message":a.errors[`action_${h}`]?e.$t(`AUTOMATION.ERRORS.${a.errors[`action_${h}`]}`):"","initial-file-name":o.getFileName(d,s.automation.files),onResetAction:g=>s.resetAction(h),onRemoveAction:g=>s.removeAction(h)},null,8,["modelValue","onUpdate:modelValue","action-types","dropdown-values","show-action-input","error-message","initial-file-name","onResetAction","onRemoveAction"]))),128)),m("div",hH,[S(c,{icon:"i-lucide-plus",blue:"",faded:"",sm:"",label:e.$t("AUTOMATION.ADD.ACTION_BUTTON_LABEL"),onClick:s.appendNewAction},null,8,["label","onClick"])])])]),m("div",fH,[m("div",gH,[S(c,{faded:"",slate:"",type:"reset",label:e.$t("AUTOMATION.EDIT.CANCEL_BUTTON_TEXT"),onClick:Ve(n.onClose,["prevent"])},null,8,["label","onClick"]),S(c,{solid:"",blue:"",type:"submit",label:e.$t("AUTOMATION.EDIT.SUBMIT"),onClick:o.emitSaveAutomation},null,8,["label","onClick"])])])])):$("",!0)])])}const vH=De(oH,[["render",_H],["__scopeId","data-v-b62fb6ef"]]),EH={class:"py-4 ltr:pr-4 rtl:pl-4 min-w-[200px]"},bH={class:"py-4 ltr:pr-4 rtl:pl-4"},TH={class:"py-4 ltr:pr-4 rtl:pl-4"},SH=["title"],AH={class:"py-4 min-w-xs"},yH={class:"flex gap-1 justify-end flex-shrink-0"},IH={__name:"AutomationRuleRow",props:{automation:{type:Object,required:!0},loading:{type:Boolean,default:!1}},emits:["toggle","edit","delete","clone"],setup(e,{emit:t}){const n=e,s=t,a=l=>yd(new Date(l),"LLL d, yyyy"),o=l=>yd(new Date(l),"LLL d, yyyy hh:mm a"),i=y({get:()=>n.automation.active,set:l=>{const{id:r,name:c}=n.automation;s("toggle",{id:r,name:c,status:!l})}});return(l,r)=>{const c=Qe("tooltip");return p(),E("tr",null,[m("td",EH,I(e.automation.name),1),m("td",bH,I(e.automation.description),1),m("td",TH,[S(va,{modelValue:i.value,"onUpdate:modelValue":r[0]||(r[0]=u=>i.value=u)},null,8,["modelValue"])]),m("td",{class:"py-4 ltr:pr-4 rtl:pl-4 min-w-[12px]",title:o(e.automation.created_on)},I(a(e.automation.created_on)),9,SH),m("td",AH,[m("div",yH,[re(S(te,{icon:"i-lucide-pen",slate:"",xs:"",faded:"","is-loading":e.loading,onClick:r[1]||(r[1]=u=>l.$emit("edit",e.automation))},null,8,["is-loading"]),[[c,l.$t("AUTOMATION.FORM.EDIT"),void 0,{top:!0}]]),re(S(te,{icon:"i-lucide-copy-plus",xs:"",faded:"","is-loading":e.loading,onClick:r[2]||(r[2]=u=>l.$emit("clone",e.automation))},null,8,["is-loading"]),[[c,l.$t("AUTOMATION.CLONE.TOOLTIP"),void 0,{top:!0}]]),re(S(te,{"is-loading":e.loading,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:r[3]||(r[3]=u=>l.$emit("delete",e.automation))},null,8,["is-loading"]),[[c,l.$t("AUTOMATION.FORM.DELETE"),void 0,{top:!0}]])])])])}}},CH={class:"min-w-full divide-y divide-n-weak"},NH={class:"divide-y divide-n-weak text-n-slate-11"},OH={__name:"Index",setup(e){const t=pn(),n=rt(),{t:s}=be(),a=j(null),o=j({}),i=j(!1),l=j(!1),r=j(!1),c=j({}),u=j(s("AUTOMATION.TOGGLE.ACTIVATION_TITLE")),d=j(s("AUTOMATION.TOGGLE.ACTIVATION_DESCRIPTION")),h=y(()=>t["automations/getAutomations"].value),g=y(()=>t["automations/getUIFlags"].value),f=y(()=>t.getCurrentAccountId.value),b=y(()=>`${s("AUTOMATION.DELETE.CONFIRM.YES")} ${c.value.name}`),A=y(()=>`${s("AUTOMATION.DELETE.CONFIRM.NO")} ${c.value.name}`),v=y(()=>` ${c.value.name}?`),T=y(()=>t["accounts/isFeatureEnabledonAccount"].value(f.value,"sla"));lt(()=>{n.dispatch("inboxes/get"),n.dispatch("agents/get"),n.dispatch("contacts/get"),n.dispatch("teams/get"),n.dispatch("labels/get"),n.dispatch("campaigns/get"),n.dispatch("automations/get"),T.value&&n.dispatch("sla/get")});const _=()=>{i.value=!0},N=()=>{i.value=!1},R=B=>{c.value=B,l.value=!0},O=()=>{l.value=!1},x=B=>{r.value=!0,c.value=B},w=()=>{r.value=!1},D=async B=>{try{await n.dispatch("automations/delete",B),ne(s("AUTOMATION.DELETE.API.SUCCESS_MESSAGE"))}catch{ne(s("AUTOMATION.DELETE.API.ERROR_MESSAGE"))}finally{o.value[c.value.id]=!1}},M=()=>{o.value[c.value.id]=!0,w(),D(c.value.id)},P=async({id:B})=>{try{await n.dispatch("automations/clone",B),ne(s("AUTOMATION.CLONE.API.SUCCESS_MESSAGE")),n.dispatch("automations/get")}catch{ne(s("AUTOMATION.CLONE.API.ERROR_MESSAGE"))}finally{o.value[c.value.id]=!1}},U=async(B,V)=>{try{const G=V==="edit"?"automations/update":"automations/create",K=s(V==="edit"?"AUTOMATION.EDIT.API.SUCCESS_MESSAGE":"AUTOMATION.ADD.API.SUCCESS_MESSAGE");await n.dispatch(G,B),ne(K),N(),O()}catch{const K=s(V==="edit"?"AUTOMATION.EDIT.API.ERROR_MESSAGE":"AUTOMATION.ADD.API.ERROR_MESSAGE");ne(K)}},F=async({id:B,name:V,status:G})=>{try{if(G?(u.value=s("AUTOMATION.TOGGLE.DEACTIVATION_TITLE"),d.value=s("AUTOMATION.TOGGLE.DEACTIVATION_DESCRIPTION",{automationName:V})):(u.value=s("AUTOMATION.TOGGLE.ACTIVATION_TITLE"),d.value=s("AUTOMATION.TOGGLE.ACTIVATION_DESCRIPTION",{automationName:V})),await a.value.showConfirmation()){await n.dispatch("automations/update",{id:B,active:!G});const se=s(G?"AUTOMATION.TOGGLE.DEACTIVATION_SUCCESFUL":"AUTOMATION.TOGGLE.ACTIVATION_SUCCESFUL");ne(se)}}catch{ne(s("AUTOMATION.EDIT.API.ERROR_MESSAGE"))}},k=y(()=>[s("AUTOMATION.LIST.TABLE_HEADER.NAME"),s("AUTOMATION.LIST.TABLE_HEADER.DESCRIPTION"),s("AUTOMATION.LIST.TABLE_HEADER.ACTIVE"),s("AUTOMATION.LIST.TABLE_HEADER.CREATED_ON")]);return(B,V)=>{const G=W("woot-modal"),K=W("woot-delete-modal"),se=W("woot-confirm-modal");return p(),L(Es,{"is-loading":g.value.isFetching,"loading-message":B.$t("AUTOMATION.LOADING"),"no-records-found":!h.value.length,"no-records-message":B.$t("AUTOMATION.LIST.404")},{header:Y(()=>[S(hs,{title:B.$t("AUTOMATION.HEADER"),description:B.$t("AUTOMATION.DESCRIPTION"),"link-text":B.$t("AUTOMATION.LEARN_MORE"),"feature-name":"automation"},{actions:Y(()=>[S(te,{icon:"i-lucide-circle-plus",label:B.$t("AUTOMATION.HEADER_BTN_TXT"),onClick:_},null,8,["label"])]),_:1},8,["title","description","link-text"])]),body:Y(()=>[m("table",CH,[m("thead",null,[(p(!0),E(ue,null,Ae(k.value,ee=>(p(),E("th",{key:ee,class:"py-4 ltr:pr-4 rtl:pl-4 rtl:text-right ltr:text-left font-semibold text-n-slate-11"},I(ee),1))),128))]),m("tbody",NH,[(p(!0),E(ue,null,Ae(h.value,ee=>(p(),L(IH,{key:ee.id,automation:ee,loading:o.value[ee.id],onClone:P,onToggle:F,onEdit:R,onDelete:x},null,8,["automation","loading"]))),128))])])]),default:Y(()=>[S(G,{show:i.value,"onUpdate:show":V[0]||(V[0]=ee=>i.value=ee),size:"medium","on-close":N},{default:Y(()=>[i.value?(p(),L(sH,{key:0,"on-close":N,onSaveAutomation:U})):$("",!0)]),_:1},8,["show"]),S(K,{show:r.value,"onUpdate:show":V[1]||(V[1]=ee=>r.value=ee),"on-close":w,"on-confirm":M,title:B.$t("LABEL_MGMT.DELETE.CONFIRM.TITLE"),message:B.$t("AUTOMATION.DELETE.CONFIRM.MESSAGE"),"message-value":v.value,"confirm-text":b.value,"reject-text":A.value},null,8,["show","title","message","message-value","confirm-text","reject-text"]),S(G,{show:l.value,"onUpdate:show":V[2]||(V[2]=ee=>l.value=ee),size:"medium","on-close":O},{default:Y(()=>[l.value?(p(),L(vH,{key:0,"on-close":O,"selected-response":c.value,onSaveAutomation:U},null,8,["selected-response"])):$("",!0)]),_:1},8,["show"]),S(se,{ref_key:"confirmDialog",ref:a,title:u.value,description:d.value},null,8,["title","description"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},RH={routes:[{path:vt("accounts/:accountId/settings/automation"),component:Rs,children:[{path:"",redirect:e=>({name:"automation_list",params:e.params})},{path:"list",name:"automation_list",component:OH,meta:{featureFlag:ft.AUTOMATIONS,permissions:["administrator"]}}]}]},Gn={CLOUD:"cloud",ENTERPRISE:"enterprise",COMMUNITY:"community"},xH={class:"text-sm text-n-slate-11 font-medium"},wH={__name:"TableFooterResults",props:{firstIndex:{type:Number,default:0},lastIndex:{type:Number,default:0},totalCount:{type:Number,default:0}},setup(e){return(t,n)=>(p(),E("span",xH,I(t.$t("GENERAL.SHOWING_RESULTS",{firstIndex:e.firstIndex,lastIndex:e.lastIndex,totalCount:e.totalCount})),1))}},$H={class:"flex items-center h-8 outline outline-1 outline-n-weak rounded-lg"},MH={class:"flex items-center gap-3 px-3 tabular-nums bg-n-slate-9/10 h-full"},LH={class:"text-sm text-n-slate-12"},DH={class:"text-sm text-n-slate-11"},PH={__name:"TableFooterPagination",props:{currentPage:{type:Number,default:1},totalPages:{type:Number,default:0}},emits:["pageChange"],setup(e,{emit:t}){const n=e,s=t,a=y(()=>n.currentPage===n.totalPages||n.totalPages===1),o=y(()=>n.currentPage===1),i=y(()=>n.currentPage===n.totalPages),l=y(()=>n.currentPage===1);function r(g){s("pageChange",g)}const c=()=>{c.value||r(n.currentPage+1)},u=()=>{l.value||r(n.currentPage-1)},d=()=>{o.value||r(1)},h=()=>{a.value||r(n.totalPages)};return(g,f)=>(p(),E("div",$H,[S(te,{faded:"",sm:"",slate:"",icon:"i-lucide-chevrons-left",class:"ltr:rounded-l-lg ltr:rounded-r-none rtl:rounded-r-lg rtl:rounded-l-none",disabled:o.value,onClick:d},null,8,["disabled"]),f[1]||(f[1]=m("div",{class:"flex items-center justify-center bg-n-slate-9/10 h-full"},[m("div",{class:"w-px h-4 rounded-sm bg-n-strong"})],-1)),S(te,{faded:"",sm:"",slate:"",icon:"i-lucide-chevron-left",class:"rounded-none",disabled:l.value,onClick:u},null,8,["disabled"]),m("div",MH,[m("span",LH,I(e.currentPage),1),f[0]||(f[0]=m("span",{class:"text-n-slate-11"},"/",-1)),m("span",DH,I(e.totalPages),1)]),S(te,{faded:"",sm:"",slate:"",icon:"i-lucide-chevron-right",class:"rounded-none",disabled:i.value,onClick:c},null,8,["disabled"]),f[2]||(f[2]=m("div",{class:"flex items-center justify-center bg-n-slate-9/10 h-full"},[m("div",{class:"w-px h-4 rounded-sm bg-n-strong"})],-1)),S(te,{faded:"",sm:"",slate:"",icon:"i-lucide-chevrons-right",class:"ltr:rounded-r-lg ltr:rounded-l-none rtl:rounded-l-lg rtl:rounded-r-none",disabled:a.value,onClick:h},null,8,["disabled"])]))}},kH={key:0,class:"flex items-center justify-between h-12 px-6"},c_={__name:"TableFooter",props:{currentPage:{type:Number,default:1},pageSize:{type:Number,default:25},totalCount:{type:Number,default:0}},emits:["pageChange"],setup(e,{emit:t}){const n=e,s=t,a=y(()=>Math.ceil(n.totalCount/n.pageSize)),o=y(()=>n.pageSize*(n.currentPage-1)+1),i=y(()=>Math.min(n.totalCount,n.pageSize*n.currentPage)),l=y(()=>n.totalCount&&!(o.value>n.totalCount));return(r,c)=>l.value?(p(),E("footer",kH,[S(wH,{"first-index":o.value,"last-index":i.value,"total-count":e.totalCount},null,8,["first-index","last-index","total-count"]),e.totalCount?(p(),L(PH,{key:0,"current-page":e.currentPage,"total-pages":a.value,"total-count":e.totalCount,"page-size":e.pageSize,onPageChange:c[0]||(c[0]=u=>s("pageChange",u))},null,8,["current-page","total-pages","total-count","page-size"])):$("",!0)])):$("",!0)}},yA={0:"agent",1:"administrator"},BH={0:"online",1:"offline",2:"busy"},UH={"automationrule:create":"AUDIT_LOGS.AUTOMATION_RULE.ADD","automationrule:update":"AUDIT_LOGS.AUTOMATION_RULE.EDIT","automationrule:destroy":"AUDIT_LOGS.AUTOMATION_RULE.DELETE","webhook:create":"AUDIT_LOGS.WEBHOOK.ADD","webhook:update":"AUDIT_LOGS.WEBHOOK.EDIT","webhook:destroy":"AUDIT_LOGS.WEBHOOK.DELETE","inbox:create":"AUDIT_LOGS.INBOX.ADD","inbox:update":"AUDIT_LOGS.INBOX.EDIT","inbox:destroy":"AUDIT_LOGS.INBOX.DELETE","user:sign_in":"AUDIT_LOGS.USER_ACTION.SIGN_IN","user:sign_out":"AUDIT_LOGS.USER_ACTION.SIGN_OUT","team:create":"AUDIT_LOGS.TEAM.ADD","team:update":"AUDIT_LOGS.TEAM.EDIT","team:destroy":"AUDIT_LOGS.TEAM.DELETE","macro:create":"AUDIT_LOGS.MACRO.ADD","macro:update":"AUDIT_LOGS.MACRO.EDIT","macro:destroy":"AUDIT_LOGS.MACRO.DELETE","accountuser:create":"AUDIT_LOGS.ACCOUNT_USER.ADD","accountuser:update:self":"AUDIT_LOGS.ACCOUNT_USER.EDIT.SELF","accountuser:update:other":"AUDIT_LOGS.ACCOUNT_USER.EDIT.OTHER","accountuser:update:deleted":"AUDIT_LOGS.ACCOUNT_USER.EDIT.DELETED","inboxmember:create":"AUDIT_LOGS.INBOX_MEMBER.ADD","inboxmember:destroy":"AUDIT_LOGS.INBOX_MEMBER.REMOVE","teammember:create":"AUDIT_LOGS.TEAM_MEMBER.ADD","teammember:destroy":"AUDIT_LOGS.TEAM_MEMBER.REMOVE","account:update":"AUDIT_LOGS.ACCOUNT.EDIT","conversation:destroy":"AUDIT_LOGS.CONVERSATION.DELETE"};function J1(e){return Array.isArray(e)?e[e.length-1]:e}function FH(e){let t=[],n=[];return e.role&&e.role.length&&(t.push("role"),n.push(yA[J1(e.role)])),e.availability&&e.availability.length&&(t.push("availability"),n.push(BH[J1(e.availability)])),{changes:t,values:n}}function Tp(e,t){var s;return e===null?"System":((s=t.find(a=>a.id===e))==null?void 0:s.name)||e}function GH(e,t,n){t.invitee=Tp(e.audited_changes.user_id,n);const s=e.audited_changes.role;return t.role=yA[s]||"unknown",t}function VH(e,t,n){var a,o;e.user_id!==((a=e.auditable)==null?void 0:a.user_id)&&(t.user=Tp((o=e.auditable)==null?void 0:o.user_id,n));const s=FH(e.audited_changes);return s&&(t.attributes=s.changes,t.values=s.values),t}function HH(e,t,n){const s=e.audited_changes.user_id;return s&&s!==void 0&&(t.user=Tp(s,n)),t}function WH(e,t){return e.audited_changes.team_id&&(t.team_id=e.audited_changes.team_id),t}function zH(e,t){return e.audited_changes.inbox_id&&(t.inbox_id=e.audited_changes.inbox_id),t}function YH(e,t,n){return e.audited_changes&&(t=HH(e,t,n),t=WH(e,t),t=zH(e,t)),t}function jH(e,t,n,s){return s==="create"?GH(e,t,n):s==="update"?VH(e,t,n):t}function KH(e,t){var o;let n={agentName:Tp(e.user_id,t),id:e.auditable_id};const s=e.auditable_type.toLowerCase(),a=e.action.toLowerCase();return s==="conversation"&&a==="destroy"&&(n.id=((o=e.audited_changes)==null?void 0:o.display_id)||e.auditable_id),s==="accountuser"&&(n=jH(e,n,t,a)),(s==="inboxmember"||s==="teammember")&&(n=YH(e,n,t)),n}function XH(e){return e.auditable===null?":deleted":e.user_id===e.auditable.user_id?":self":":other"}const qH=e=>{const t=e.auditable_type.toLowerCase(),n=e.action.toLowerCase();let s=`${t}:${n}`;return t==="accountuser"&&n==="update"&&(s+=XH(e)),UH[s]||""},ZH={class:"flex-1 overflow-auto"},QH={class:"mt-6 flex-1 text-n-slate-11"},JH={key:1,class:"flex flex-col items-center justify-center h-full text-base p-8"},eW={key:2,class:"min-w-full overflow-x-auto"},tW={class:"divide-y divide-n-weak"},nW={class:"divide-y divide-n-weak text-n-slate-11"},sW={class:"py-4 ltr:pr-4 rtl:pl-4 break-all whitespace-nowrap"},aW={class:"py-4 ltr:pr-4 rtl:pl-4 break-all whitespace-nowrap"},oW={class:"py-4 w-[8.75rem]"},iW={__name:"Index",setup(e){const t=pn(),n=rt(),s=Ft(),a=y(()=>t["auditlogs/getAuditLogs"].value),o=y(()=>t["auditlogs/getUIFlags"].value),i=y(()=>t["auditlogs/getMeta"].value),l=y(()=>t["agents/getAgents"].value),{t:r}=be(),c=wt(),u=y(()=>Number(c.query.page??1)),d=b=>{try{n.dispatch("auditlogs/fetch",{page:b})}catch(A){const v=(A==null?void 0:A.message)||r("AUDIT_LOGS.API.ERROR_MESSAGE");ne(v)}},h=b=>{const A=KH(b,l.value),v=qH(b),T=N=>Array.isArray(N)?N.join(", "):N,_={...A,attributes:T(A.attributes),values:T(A.values)};return r(v,_)},g=b=>{s.push({name:"auditlogs_list",query:{page:b}})};lt(()=>{n.dispatch("agents/get"),d(u.value)}),it(u,(b,A)=>{b!==A&&d(b)});const f=y(()=>[r("AUDIT_LOGS.LIST.TABLE_HEADER.ACTIVITY"),r("AUDIT_LOGS.LIST.TABLE_HEADER.TIME"),r("AUDIT_LOGS.LIST.TABLE_HEADER.IP_ADDRESS")]);return(b,A)=>{const v=W("woot-loading-state");return p(),E("div",ZH,[S(hs,{title:b.$t("AUDIT_LOGS.HEADER"),description:b.$t("AUDIT_LOGS.DESCRIPTION"),"link-text":b.$t("AUDIT_LOGS.LEARN_MORE"),"feature-name":"audit_logs"},null,8,["title","description","link-text"]),m("div",QH,[o.value.fetchingList?(p(),L(v,{key:0,message:b.$t("AUDIT_LOGS.LOADING")},null,8,["message"])):a.value.length?(p(),E("div",eW,[m("table",tW,[m("thead",null,[(p(!0),E(ue,null,Ae(f.value,T=>(p(),E("th",{key:T,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11"},I(T),1))),128))]),m("tbody",nW,[(p(!0),E(ue,null,Ae(a.value,T=>(p(),E("tr",{key:T.id},[m("td",sW,I(h(T)),1),m("td",aW,I(C(tp)(T.created_at,"MMM dd, yyyy hh:mm a")),1),m("td",oW,I(T.remote_address),1)]))),128))])]),S(c_,{"current-page":Number(i.value.currentPage),"total-count":i.value.totalEntries,"page-size":i.value.perPage,class:"border-n-weak border-t !px-0 py-4",onPageChange:g},null,8,["current-page","total-count","page-size"])])):(p(),E("p",JH,I(b.$t("AUDIT_LOGS.LIST.404")),1))])])}}},lW={routes:[{path:vt("accounts/:accountId/settings/audit-logs"),component:Rs,children:[{path:"",redirect:e=>({name:"auditlogs_list",params:e.params})},{path:"list",name:"auditlogs_list",meta:{featureFlag:ft.AUDIT_LOGS,installationTypes:[Gn.CLOUD,Gn.ENTERPRISE],permissions:["administrator"]},component:iW}]}]};function u_(){const e=rt(),{isCloudFeatureEnabled:t,currentAccount:n}=ln(),{isEnterprise:s}=si(),a=y(()=>t(ft.CAPTAIN)),o=y(()=>{var c,u;return(u=(c=n.value)==null?void 0:c.limits)==null?void 0:u.captain}),i=y(()=>{var c;return(c=o.value)!=null&&c.documents?so(o.value.documents):null}),l=y(()=>{var c;return(c=o.value)!=null&&c.responses?so(o.value.responses):null});return{captainEnabled:a,captainLimits:o,documentLimits:i,responseLimits:l,fetchLimits:()=>{s&&e.dispatch("accounts/limits")}}}const rW={class:"flex gap-5 items-center justify-between text-xs uppercase text-n-slate-10"},cW={class:"font-medium tracking-wider"},uW={class:"tabular-nums"},dW={class:"rounded-full overflow-hidden h-2 w-full bg-n-slate-4 mt-2"},eb={__name:"BillingMeter",props:{title:{type:String,required:!0},consumed:{type:Number,required:!0},totalCount:{type:Number,required:!0}},setup(e){const t=e,n=y(()=>Math.round(t.consumed/t.totalCount*100)),s=y(()=>n.value<50?"bg-n-teal-10":n.value<80?"bg-n-amber-10":"bg-n-ruby-10");return(a,o)=>(p(),E(ue,null,[m("div",rW,[m("div",cW,I(e.title),1),m("div",uW,I(e.consumed)+" / "+I(e.totalCount),1)]),m("div",dW,[m("div",{class:ae(["h-2",s.value]),style:Zt({width:`${n.value}%`})},null,6)])],64))}},pW={class:"grid grid-cols-[1fr_auto] gap-5"},mW={class:"text-base font-medium text-n-slate-12"},hW={class:"text-sm mt-1 text-n-slate-11"},IA={__name:"BillingHeader",props:{title:{type:String,required:!0},description:{type:String,required:!0}},setup(e){return(t,n)=>(p(),E("div",pW,[m("div",null,[m("span",mW,I(e.title),1),m("p",hW,I(e.description),1)]),We(t.$slots,"default")]))}},fW={class:"rounded-xl shadow-sm border border-n-weak bg-n-solid-2 py-5 space-y-5"},dh={__name:"BillingCard",props:{title:{type:String,required:!0},description:{type:String,required:!0}},setup(e){return(t,n)=>(p(),E("div",fW,[S(IA,{title:e.title,description:e.description,class:"px-5"},{default:Y(()=>[We(t.$slots,"action")]),_:3},8,["title","description"]),We(t.$slots,"default")]))}},gW={class:"px-5"},_W={class:"text-n-slate-11 text-xs"},vW={class:"mt-2 text-xl font-medium text-n-slate-12"},ph={__name:"DetailItem",props:{label:{type:String,required:!0},value:{type:String,required:!0}},setup(e){return(t,n)=>(p(),E("div",gW,[m("span",_W,I(e.label),1),m("div",vW,I(e.value),1)]))}},EW={class:"grid gap-4"},bW={key:0,class:"grid lg:grid-cols-4 sm:grid-cols-3 grid-cols-1 gap-2 divide-x divide-n-weak"},TW={key:0,class:"px-5"},SW={key:1,class:"px-5"},wu="billing_refresh_attempted",AW={__name:"Index",setup(e){const t=Ft(),{currentAccount:n,isOnChatwootCloud:s}=ln(),{captainEnabled:a,captainLimits:o,documentLimits:i,responseLimits:l,fetchLimits:r}=u_(),c=_e("accounts/getUIFlags"),u=rt(),d=j(!1),h=y(()=>n.value.custom_attributes||{}),g=y(()=>h.value.plan_name),f=y(()=>h.value.subscribed_quantity),b=y(()=>{if(!h.value.subscription_ends_on)return"";const R=new Date(h.value.subscription_ends_on);return Yn(R,"dd MMM, yyyy")}),A=y(()=>!!g.value),v=async()=>{A.value||(await u.dispatch("accounts/subscription"),r())},T=async()=>{if(!s.value){t.push({name:"home"});return}const R=cc.get(wu);await v(),A.value?cc.remove(wu):R?cc.remove(wu):(d.value=!0,cc.set(wu,!0),setTimeout(()=>{window.location.reload()},5e3))},_=()=>{u.dispatch("accounts/checkout")},N=()=>{window.$chatwoot&&window.$chatwoot.toggle()};return lt(T),(R,O)=>(p(),L(Es,{"is-loading":C(c).isFetchingItem||d.value,"loading-message":d.value?R.$t("BILLING_SETTINGS.NO_BILLING_USER"):R.$t("ATTRIBUTES_MGMT.LOADING"),"no-records-found":!A.value&&!d.value,"no-records-message":R.$t("BILLING_SETTINGS.NO_BILLING_USER")},{header:Y(()=>[S(hs,{title:R.$t("BILLING_SETTINGS.TITLE"),description:R.$t("BILLING_SETTINGS.DESCRIPTION"),"link-text":R.$t("BILLING_SETTINGS.VIEW_PRICING"),"feature-name":"billing"},null,8,["title","description","link-text"])]),body:Y(()=>[m("section",EW,[S(dh,{title:R.$t("BILLING_SETTINGS.MANAGE_SUBSCRIPTION.TITLE"),description:R.$t("BILLING_SETTINGS.MANAGE_SUBSCRIPTION.DESCRIPTION")},{action:Y(()=>[S(te,{sm:"",solid:"",blue:"",onClick:_},{default:Y(()=>[xe(I(R.$t("BILLING_SETTINGS.MANAGE_SUBSCRIPTION.BUTTON_TXT")),1)]),_:1})]),default:Y(()=>[g.value||f.value||b.value?(p(),E("div",bW,[S(ph,{label:R.$t("BILLING_SETTINGS.CURRENT_PLAN.TITLE"),value:g.value},null,8,["label","value"]),f.value?(p(),L(ph,{key:0,label:R.$t("BILLING_SETTINGS.CURRENT_PLAN.SEAT_COUNT"),value:f.value},null,8,["label","value"])):$("",!0),b.value?(p(),L(ph,{key:1,label:R.$t("BILLING_SETTINGS.CURRENT_PLAN.RENEWS_ON"),value:b.value},null,8,["label","value"])):$("",!0)])):$("",!0)]),_:1},8,["title","description"]),C(a)?(p(),L(dh,{key:0,title:R.$t("BILLING_SETTINGS.CAPTAIN.TITLE"),description:R.$t("BILLING_SETTINGS.CAPTAIN.DESCRIPTION")},{action:Y(()=>[S(te,{sm:"",faded:"",slate:"",disabled:""},{default:Y(()=>[xe(I(R.$t("BILLING_SETTINGS.CAPTAIN.BUTTON_TXT")),1)]),_:1})]),default:Y(()=>[C(o)&&C(l)?(p(),E("div",TW,[S(eb,Qn({title:R.$t("BILLING_SETTINGS.CAPTAIN.RESPONSES")},C(l)),null,16,["title"])])):$("",!0),C(o)&&C(i)?(p(),E("div",SW,[S(eb,Qn({title:R.$t("BILLING_SETTINGS.CAPTAIN.DOCUMENTS")},C(i)),null,16,["title"])])):$("",!0)]),_:1},8,["title","description"])):(p(),L(dh,{key:1,title:R.$t("BILLING_SETTINGS.CAPTAIN.TITLE"),description:R.$t("BILLING_SETTINGS.CAPTAIN.UPGRADE")},{action:Y(()=>[S(te,{sm:"",solid:"",slate:"",onClick:_},{default:Y(()=>[xe(I(R.$t("CAPTAIN.PAYWALL.UPGRADE_NOW")),1)]),_:1})]),_:1},8,["title","description"])),S(IA,{class:"px-1 mt-5",title:R.$t("BILLING_SETTINGS.CHAT_WITH_US.TITLE"),description:R.$t("BILLING_SETTINGS.CHAT_WITH_US.DESCRIPTION")},{default:Y(()=>[S(te,{sm:"",solid:"",slate:"",icon:"i-lucide-life-buoy",onOpen:N},{default:Y(()=>[xe(I(R.$t("BILLING_SETTINGS.CHAT_WITH_US.BUTTON_TXT")),1)]),_:1})]),_:1},8,["title","description"])])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"]))}},yW={routes:[{path:vt("accounts/:accountId/settings/billing"),meta:{permissions:["administrator"],installationTypes:[Gn.CLOUD]},component:Rs,props:{headerTitle:"BILLING_SETTINGS.TITLE",icon:"credit-card-person",showNewButton:!1},children:[{path:"",name:"billing_settings_index",component:AW,meta:{installationTypes:[Gn.CLOUD],permissions:["administrator"]}}]}]},IW={name:"AddCanned",components:{NextButton:te,Modal:Cr,WootMessageEditor:ai},props:{responseContent:{type:String,default:""},onClose:{type:Function,default:()=>{}}},setup(){return{v$:bt()}},data(){return{shortCode:"",content:this.responseContent||"",addCanned:{showLoading:!1,message:""},show:!0}},validations:{shortCode:{required:Ye,minLength:en(2)},content:{required:Ye}},methods:{resetForm(){this.shortCode="",this.content="",this.v$.shortCode.$reset(),this.v$.content.$reset()},addCannedResponse(){this.addCanned.showLoading=!0,this.$store.dispatch("createCannedResponse",{short_code:this.shortCode,content:this.content}).then(()=>{this.addCanned.showLoading=!1,ne(this.$t("CANNED_MGMT.ADD.API.SUCCESS_MESSAGE")),this.resetForm(),this.onClose()}).catch(e=>{this.addCanned.showLoading=!1;const t=(e==null?void 0:e.message)||this.$t("CANNED_MGMT.ADD.API.ERROR_MESSAGE");ne(t)})}}},CW={class:"flex flex-col h-auto overflow-auto"},NW={class:"w-full"},OW=["placeholder"],RW={class:"w-full"},xW={class:"editor-wrap"},wW={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function $W(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("WootMessageEditor"),r=W("NextButton"),c=W("Modal");return p(),L(c,{show:a.show,"onUpdate:show":t[4]||(t[4]=u=>a.show=u),"on-close":n.onClose},{default:Y(()=>[m("div",CW,[S(i,{"header-title":e.$t("CANNED_MGMT.ADD.TITLE"),"header-content":e.$t("CANNED_MGMT.ADD.DESC")},null,8,["header-title","header-content"]),m("form",{class:"flex flex-col w-full",onSubmit:t[3]||(t[3]=Ve(u=>o.addCannedResponse(),["prevent"]))},[m("div",NW,[m("label",{class:ae({error:s.v$.shortCode.$error})},[xe(I(e.$t("CANNED_MGMT.ADD.FORM.SHORT_CODE.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>a.shortCode=u),type:"text",placeholder:e.$t("CANNED_MGMT.ADD.FORM.SHORT_CODE.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...u)=>s.v$.shortCode.$touch&&s.v$.shortCode.$touch(...u))},null,40,OW),[[gt,a.shortCode]])],2)]),m("div",RW,[m("label",{class:ae({error:s.v$.content.$error})},I(e.$t("CANNED_MGMT.ADD.FORM.CONTENT.LABEL")),3),m("div",xW,[S(l,{modelValue:a.content,"onUpdate:modelValue":t[2]||(t[2]=u=>a.content=u),class:ae(["message-editor [&>div]:px-1",{editor_warning:s.v$.content.$error}]),"enable-variables":"","enable-canned-responses":!1,placeholder:e.$t("CANNED_MGMT.ADD.FORM.CONTENT.PLACEHOLDER"),onBlur:s.v$.content.$touch},null,8,["modelValue","class","placeholder","onBlur"])])]),m("div",wW,[S(r,{faded:"",slate:"",type:"reset",label:e.$t("CANNED_MGMT.ADD.CANCEL_BUTTON_TEXT"),onClick:Ve(n.onClose,["prevent"])},null,8,["label","onClick"]),S(r,{type:"submit",label:e.$t("CANNED_MGMT.ADD.FORM.SUBMIT"),disabled:s.v$.content.$invalid||s.v$.shortCode.$invalid||a.addCanned.showLoading,"is-loading":a.addCanned.showLoading},null,8,["label","disabled","is-loading"])])],32)])]),_:1},8,["show","on-close"])}const CA=De(IW,[["render",$W],["__scopeId","data-v-feb62288"]]),MW={components:{NextButton:te,Modal:Cr,WootMessageEditor:ai},props:{id:{type:Number,default:null},edcontent:{type:String,default:""},edshortCode:{type:String,default:""},onClose:{type:Function,default:()=>{}}},setup(){return{v$:bt()}},data(){return{editCanned:{showAlert:!1,showLoading:!1},shortCode:this.edshortCode,content:this.edcontent,show:!0}},validations:{shortCode:{required:Ye,minLength:en(2)},content:{required:Ye}},computed:{pageTitle(){return`${this.$t("CANNED_MGMT.EDIT.TITLE")} - ${this.edshortCode}`}},methods:{setPageName({name:e}){this.v$.content.$touch(),this.content=e},resetForm(){this.shortCode="",this.content="",this.v$.shortCode.$reset(),this.v$.content.$reset()},editCannedResponse(){this.editCanned.showLoading=!0,this.$store.dispatch("updateCannedResponse",{id:this.id,short_code:this.shortCode,content:this.content}).then(()=>{this.editCanned.showLoading=!1,ne(this.$t("CANNED_MGMT.EDIT.API.SUCCESS_MESSAGE")),this.resetForm(),setTimeout(()=>{this.onClose()},10)}).catch(e=>{this.editCanned.showLoading=!1;const t=(e==null?void 0:e.message)||this.$t("CANNED_MGMT.EDIT.API.ERROR_MESSAGE");ne(t)})}}},LW={class:"flex flex-col h-auto overflow-auto"},DW={class:"w-full"},PW=["placeholder"],kW={class:"w-full"},BW={class:"editor-wrap"},UW={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function FW(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("WootMessageEditor"),r=W("NextButton"),c=W("Modal");return p(),L(c,{show:a.show,"onUpdate:show":t[4]||(t[4]=u=>a.show=u),"on-close":n.onClose},{default:Y(()=>[m("div",LW,[S(i,{"header-title":o.pageTitle},null,8,["header-title"]),m("form",{class:"flex flex-col w-full",onSubmit:t[3]||(t[3]=Ve(u=>o.editCannedResponse(),["prevent"]))},[m("div",DW,[m("label",{class:ae({error:s.v$.shortCode.$error})},[xe(I(e.$t("CANNED_MGMT.EDIT.FORM.SHORT_CODE.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>a.shortCode=u),type:"text",placeholder:e.$t("CANNED_MGMT.EDIT.FORM.SHORT_CODE.PLACEHOLDER"),onInput:t[1]||(t[1]=(...u)=>s.v$.shortCode.$touch&&s.v$.shortCode.$touch(...u))},null,40,PW),[[gt,a.shortCode]])],2)]),m("div",kW,[m("label",{class:ae({error:s.v$.content.$error})},I(e.$t("CANNED_MGMT.EDIT.FORM.CONTENT.LABEL")),3),m("div",BW,[S(l,{modelValue:a.content,"onUpdate:modelValue":t[2]||(t[2]=u=>a.content=u),class:ae(["message-editor [&>div]:px-1",{editor_warning:s.v$.content.$error}]),"enable-variables":"","enable-canned-responses":!1,placeholder:e.$t("CANNED_MGMT.EDIT.FORM.CONTENT.PLACEHOLDER"),onBlur:s.v$.content.$touch},null,8,["modelValue","class","placeholder","onBlur"])])]),m("div",UW,[S(r,{faded:"",slate:"",type:"reset",label:e.$t("CANNED_MGMT.EDIT.CANCEL_BUTTON_TEXT"),onClick:Ve(n.onClose,["prevent"])},null,8,["label","onClick"]),S(r,{type:"submit",label:e.$t("CANNED_MGMT.EDIT.FORM.SUBMIT"),disabled:s.v$.content.$invalid||s.v$.shortCode.$invalid||a.editCanned.showLoading,"is-loading":a.editCanned.showLoading},null,8,["label","disabled","is-loading"])])],32)])]),_:1},8,["show","on-close"])}const GW=De(MW,[["render",FW],["__scopeId","data-v-88d4d23b"]]),VW={class:"flex-1 overflow-auto"},HW={class:"mt-6 flex-1"},WW={key:1,class:"flex flex-col items-center justify-center h-full text-base text-n-slate-11 py-8"},zW={key:2,class:"min-w-full overflow-x-auto divide-y divide-n-weak"},YW={key:0},jW={class:"mb-0"},KW={class:"divide-y divide-n-weak text-n-slate-11"},XW=["title"],qW={class:"py-4 ltr:pr-4 rtl:pl-4 md:break-all whitespace-normal"},ZW={class:"py-4 flex justify-end gap-1"},QW=Object.assign({name:"CannedResponseSettings"},{__name:"Index",setup(e){const t=pn(),n=rt(),{t:s}=be(),a=j(!1),o=j({}),i=j(!1),l=j(!1),r=j({}),c=j({message:""}),u=j("asc"),d=y(()=>t.getSortedCannedResponses.value(u.value)),h=y(()=>t.getUIFlags.value),g=y(()=>`${s("CANNED_MGMT.DELETE.CONFIRM.YES")} ${r.value.short_code}`),f=y(()=>`${s("CANNED_MGMT.DELETE.CONFIRM.NO")} ${r.value.short_code}`),b=y(()=>` ${r.value.short_code} ? `),A=()=>{u.value=u.value==="asc"?"desc":"asc"},v=async()=>{try{await n.dispatch("getCannedResponse")}catch{}};lt(()=>{v()});const T=U=>{o[r.value.id]=!1,r.value={},c.value.message=U,ne(U)},_=()=>{a.value=!0},N=()=>{a.value=!1},R=U=>{i.value=!0,r.value=U},O=()=>{i.value=!1},x=U=>{l.value=!0,r.value=U},w=()=>{l.value=!1},D=async U=>{try{await n.dispatch("deleteCannedResponse",U),T(s("CANNED_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch(F){const k=(F==null?void 0:F.message)||s("CANNED_MGMT.DELETE.API.ERROR_MESSAGE");T(k)}},M=()=>{o[r.value.id]=!0,w(),D(r.value.id)},P=y(()=>[s("CANNED_MGMT.LIST.TABLE_HEADER.SHORT_CODE"),s("CANNED_MGMT.LIST.TABLE_HEADER.CONTENT"),s("CANNED_MGMT.LIST.TABLE_HEADER.ACTIONS")]);return(U,F)=>{const k=W("woot-loading-state"),B=W("fluent-icon"),V=W("woot-modal"),G=W("woot-delete-modal"),K=Qe("tooltip");return p(),E("div",VW,[S(hs,{title:U.$t("CANNED_MGMT.HEADER"),description:U.$t("CANNED_MGMT.DESCRIPTION"),"link-text":U.$t("CANNED_MGMT.LEARN_MORE"),"feature-name":"canned_responses"},{actions:Y(()=>[S(te,{icon:"i-lucide-circle-plus",label:U.$t("CANNED_MGMT.HEADER_BTN_TXT"),onClick:_},null,8,["label"])]),_:1},8,["title","description","link-text"]),m("div",HW,[h.value.fetchingList?(p(),L(k,{key:0,message:U.$t("CANNED_MGMT.LOADING")},null,8,["message"])):d.value.length?(p(),E("table",zW,[m("thead",null,[(p(!0),E(ue,null,Ae(P.value,se=>(p(),E("th",{key:se,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11 last:text-right"},[se!==P.value[0]?(p(),E("span",YW,I(se),1)):(p(),E("button",{key:1,class:"flex items-center p-0 cursor-pointer",onClick:A},[m("span",jW,I(se),1),S(B,{class:"ml-2 size-4",icon:u.value==="desc"?"chevron-up":"chevron-down"},null,8,["icon"])]))]))),128))]),m("tbody",KW,[(p(!0),E(ue,null,Ae(d.value,(se,ee)=>(p(),E("tr",{key:se.short_code},[m("td",{class:"py-4 ltr:pr-4 rtl:pl-4 truncate max-w-xs font-medium",title:se.short_code},I(se.short_code),9,XW),m("td",qW,I(se.content),1),m("td",ZW,[re(S(te,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:X=>R(se)},null,8,["onClick"]),[[K,U.$t("CANNED_MGMT.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]),re(S(te,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":o.value[se.id],onClick:X=>x(se)},null,8,["is-loading","onClick"]),[[K,U.$t("CANNED_MGMT.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])]))),128))])])):(p(),E("p",WW,I(U.$t("CANNED_MGMT.LIST.404")),1))]),S(V,{show:a.value,"onUpdate:show":F[0]||(F[0]=se=>a.value=se),"on-close":N},{default:Y(()=>[S(CA,{"on-close":N})]),_:1},8,["show"]),S(V,{show:i.value,"onUpdate:show":F[1]||(F[1]=se=>i.value=se),"on-close":O},{default:Y(()=>[i.value?(p(),L(GW,{key:0,id:r.value.id,"edshort-code":r.value.short_code,edcontent:r.value.content,"on-close":O},null,8,["id","edshort-code","edcontent"])):$("",!0)]),_:1},8,["show"]),S(G,{show:l.value,"onUpdate:show":F[2]||(F[2]=se=>l.value=se),"on-close":w,"on-confirm":M,title:U.$t("CANNED_MGMT.DELETE.CONFIRM.TITLE"),message:U.$t("CANNED_MGMT.DELETE.CONFIRM.MESSAGE"),"message-value":b.value,"confirm-text":g.value,"reject-text":f.value},null,8,["show","title","message","message-value","confirm-text","reject-text"])])}}}),JW={routes:[{path:vt("accounts/:accountId/settings/canned-response"),component:Rs,children:[{path:"",redirect:e=>({name:"canned_list",params:e.params})},{path:"list",name:"canned_list",meta:{featureFlag:ft.CANNED_RESPONSES,permissions:[...qn,...Ms]},component:QW}]}]},ez={fetchFacebookPages(e,t){const n=AO("fetchFacebookPages");return n.params.omniauth_token=e,axios.post(n.url(t),n.params)}},tz={props:{headerTitle:{type:String,default:""},headerContent:{type:String,default:""}}},nz={class:"flex flex-col w-full items-start mb-4"},sz={class:"text-xl font-medium mb-1 text-n-slate-12 break-words"},az={class:"text-sm w-full text-n-slate-11"};function oz(e,t,n,s,a,o){const i=Qe("dompurify-html");return p(),E("div",nz,[m("h2",sz,I(n.headerTitle),1),re(m("p",az,null,512),[[i,n.headerContent]])])}const Xs=De(tz,[["render",oz]]),iz="text/javascript",tb="data-loaded",lz=["defer","crossOrigin","noModule","referrerPolicy","id"];class rz extends Error{constructor(t,n="Failed to load script"){super(n),this.name="ScriptLoaderError",this.src=t}getErrorDetails(){return`Failed to load script from source: ${this.src}`}}const cz=(e,t)=>{const n=document.createElement("script");return n.type=t.type||iz,n.async=t.async!==!1,n.src=e,lz.forEach(s=>{s in t&&(n[s]=t[s])}),Object.entries(t.attrs||{}).forEach(([s,a])=>n.setAttribute(s,a)),n},uz=e=>document.querySelector(`script[src="${e}"]`);async function d_(e,t){return typeof window>"u"||!window.document?Promise.resolve(!1):new Promise((n,s)=>{if(e.trim()===""){s(new Error("Invalid source URL provided"));return}let a=uz(e);if(!a)a=cz(e,t),document.head.appendChild(a);else if(a.hasAttribute(tb)){n(a);return}const o=()=>s(new rz(e));a.addEventListener("error",o),a.addEventListener("abort",o),a.addEventListener("load",()=>{a.setAttribute(tb,"true"),n(a)})})}const dz="/vite-dev/assets/facebook_login-_skaVloV.png",pz={components:{LoadingState:Nr,PageHeader:Xs,NextButton:te},setup(){const{accountId:e}=ln(),{replaceInstallationName:t}=Wa();return{accountId:e,replaceInstallationName:t,v$:bt()}},data(){return{isCreating:!1,hasError:!1,omniauth_token:"",user_access_token:"",channel:"facebook",selectedPage:{name:null,id:null},pageName:"",pageList:[],emptyStateMessage:this.$t("INBOX_MGMT.DETAILS.LOADING_FB"),errorStateMessage:"",errorStateDescription:"",hasLoginStarted:!1}},validations:{pageName:{required:Ye},selectedPage:{isEmpty(){return this.selectedPage!==null&&!!this.selectedPage.name}}},computed:{showLoader(){return!this.user_access_token||this.isCreating},getSelectablePages(){return this.pageList.filter(e=>!e.exists)}},mounted(){window.fbAsyncInit=this.runFBInit},methods:{async startLogin(){this.hasLoginStarted=!0;try{await this.loadFBsdk(),this.runFBInit(),this.tryFBlogin()}catch(e){e.name==="ScriptLoaderError"?ne(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_LOADING")):(gg(e),ne(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH")))}},setPageName({name:e}){this.v$.selectedPage.$touch(),this.pageName=e},initChannelAuth(e){e==="facebook"&&this.loadFBsdk()},runFBInit(){FB.init({appId:window.chatwootConfig.fbAppId,xfbml:!0,version:window.chatwootConfig.fbApiVersion,status:!0}),window.fbSDKLoaded=!0,FB.AppEvents.logPageView()},async loadFBsdk(){return d_("https://connect.facebook.net/en_US/sdk.js",{id:"facebook-jssdk"})},tryFBlogin(){FB.login(e=>{this.hasError=!1,e.status==="connected"?this.fetchPages(e.authResponse.accessToken):e.status==="not_authorized"?(console.error("FACEBOOK AUTH ERROR",e),this.hasError=!0,this.errorStateMessage=this.$t("INBOX_MGMT.DETAILS.ERROR_FB_UNAUTHORIZED"),this.errorStateDescription=this.$t("INBOX_MGMT.DETAILS.ERROR_FB_UNAUTHORIZED_HELP")):(console.error("FACEBOOK AUTH ERROR",e),this.hasError=!0,this.errorStateMessage=this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH"),this.errorStateDescription="")},{scope:"pages_manage_metadata,business_management,pages_messaging,instagram_basic,pages_show_list,pages_read_engagement,instagram_manage_messages"})},async fetchPages(e){try{const t=await ez.fetchFacebookPages(e,this.accountId),{data:{data:n}}=t;this.pageList=n.page_details,this.user_access_token=n.user_access_token}catch{}},channelParams(){var e;return{user_access_token:this.user_access_token,page_access_token:this.selectedPage.access_token,page_id:this.selectedPage.id,inbox_name:(e=this.selectedPage.name)==null?void 0:e.trim()}},createChannel(){this.v$.$touch(),this.v$.$error||(this.emptyStateMessage=this.$t("INBOX_MGMT.DETAILS.CREATING_CHANNEL"),this.isCreating=!0,this.$store.dispatch("inboxes/createFBChannel",this.channelParams()).then(e=>{ps.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}).catch(()=>{this.isCreating=!1}))}}},mz={class:"w-full h-full col-span-6 p-6 overflow-auto"},hz={key:0,class:"flex flex-col items-center justify-center h-full text-center"},fz={class:"py-6"},gz={key:1},_z={key:0,class:"max-w-lg mx-auto text-center"},vz={key:0},Ez={class:"w-full"},bz={class:"w-3/5"},Tz={class:"w-full"},Sz={key:0,class:"message"},Az={class:"w-full"},yz=["placeholder"],Iz={key:0,class:"message"},Cz={class:"w-full text-right"};function Nz(e,t,n,s,a,o){const i=W("LoadingState"),l=W("PageHeader"),r=W("multiselect"),c=W("NextButton"),u=Qe("dompurify-html");return p(),E("div",mz,[a.hasLoginStarted?(p(),E("div",gz,[a.hasError?(p(),E("div",_z,[m("h5",null,I(a.errorStateMessage),1),a.errorStateDescription?re((p(),E("p",vz,null,512)),[[u,a.errorStateDescription]]):$("",!0)])):o.showLoader?(p(),L(i,{key:1,message:a.emptyStateMessage},null,8,["message"])):(p(),E("form",{key:2,class:"flex flex-col flex-wrap mx-0",onSubmit:t[4]||(t[4]=Ve(d=>o.createChannel(),["prevent"]))},[m("div",Ez,[S(l,{"header-title":e.$t("INBOX_MGMT.ADD.DETAILS.TITLE"),"header-content":s.replaceInstallationName(e.$t("INBOX_MGMT.ADD.DETAILS.DESC"))},null,8,["header-title","header-content"])]),m("div",bz,[m("div",Tz,[m("div",{class:ae(["input-wrap",{error:s.v$.selectedPage.$error}])},[xe(I(e.$t("INBOX_MGMT.ADD.FB.CHOOSE_PAGE"))+" ",1),S(r,{modelValue:a.selectedPage,"onUpdate:modelValue":t[1]||(t[1]=d=>a.selectedPage=d),"close-on-select":"","allow-empty":"",options:o.getSelectablePages,"track-by":"id",label:"name","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":e.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE"),placeholder:e.$t("INBOX_MGMT.ADD.FB.PICK_A_VALUE"),"selected-label":"",onSelect:o.setPageName},null,8,["modelValue","options","select-label","deselect-label","placeholder","onSelect"]),s.v$.selectedPage.$error?(p(),E("span",Sz,I(e.$t("INBOX_MGMT.ADD.FB.CHOOSE_PLACEHOLDER")),1)):$("",!0)],2)]),m("div",Az,[m("label",{class:ae({error:s.v$.pageName.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.FB.INBOX_NAME"))+" ",1),re(m("input",{"onUpdate:modelValue":t[2]||(t[2]=d=>a.pageName=d),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.FB.PICK_NAME"),onInput:t[3]||(t[3]=(...d)=>s.v$.pageName.$touch&&s.v$.pageName.$touch(...d))},null,40,yz),[[gt,a.pageName]]),s.v$.pageName.$error?(p(),E("span",Iz,I(e.$t("INBOX_MGMT.ADD.FB.ADD_NAME")),1)):$("",!0)],2)]),m("div",Cz,[S(c,{label:e.$t("INBOX_MGMT.ADD.FB.CREATE_INBOX")},null,8,["label"])])])],32))])):(p(),E("div",hz,[m("a",{href:"#",onClick:t[0]||(t[0]=d=>o.startLogin())},t[5]||(t[5]=[m("img",{class:"w-auto h-10 rounded-md",src:dz,alt:"Facebook-logo"},null,-1)])),m("p",fz,I(s.replaceInstallationName(e.$t("INBOX_MGMT.ADD.FB.HELP"))),1)]))])}const Oz=De(pz,[["render",Nz]]),Rz={key:0,class:"px-4 py-0 mx-0 mt-0 mb-4 rounded-lg outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 bg-n-alpha-black2"},NA={__name:"GreetingsEditor",props:{modelValue:{type:String,default:""},richtext:{type:Boolean,default:!1},label:{type:String,default:""},placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,a=y({get:()=>n.modelValue,set:o=>s("update:modelValue",o)});return(o,i)=>(p(),E("section",null,[e.richtext?(p(),E("div",Rz,[S(ai,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=l=>a.value=l),"is-format-mode":"","enable-variables":"",placeholder:e.placeholder,"min-height":4},null,8,["modelValue","placeholder"])])):(p(),L(yg,{key:1,modelValue:a.value,"onUpdate:modelValue":i[1]||(i[1]=l=>a.value=l),rows:4,type:"text",class:"greetings--textarea",label:e.label,placeholder:e.placeholder,onInput:o.handleInput},null,8,["modelValue","label","placeholder","onInput"]))]))}},xz={class:"flex flex-col min-w-0 gap-1"},wz={key:0,class:"mb-0.5 text-sm font-medium text-n-slate-12"},$z={key:0,class:"flex items-center justify-end h-4 ltr:right-3 rtl:left-3"},Mz={key:0,class:"text-xs tabular-nums text-n-slate-10"},Lz={__name:"Editor",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:""},focusOnMount:{type:Boolean,default:!1},maxLength:{type:Number,default:200},showCharacterCount:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},message:{type:String,default:""},messageType:{type:String,default:"info",validator:e=>["info","error","success"].includes(e)},enableVariables:{type:Boolean,default:!1},enableCannedResponses:{type:Boolean,default:!0},enabledMenuOptions:{type:Array,default:()=>[]},enableCaptainTools:{type:Boolean,default:!1},signature:{type:String,default:""},allowSignature:{type:Boolean,default:!1},sendWithSignature:{type:Boolean,default:!1},channelType:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,a=ig(),o=j(!1),i=y(()=>n.modelValue.length),l=y(()=>{switch(n.messageType){case"error":return"text-n-ruby-9 dark:text-n-ruby-9";case"success":return"text-n-teal-10 dark:text-n-teal-10";default:return"text-n-slate-11 dark:text-n-slate-11"}}),r=d=>{n.disabled||s("update:modelValue",d)},c=()=>{n.disabled||(o.value=!0)},u=()=>{n.disabled||(o.value=!1)};return it(()=>n.modelValue,d=>{n.maxLength&&n.showCharacterCount&&!a.actions&&i.value>=n.maxLength&&s("update:modelValue",d.slice(0,n.maxLength))}),(d,h)=>(p(),E("div",xz,[e.label?(p(),E("label",wz,I(e.label),1)):$("",!0),m("div",{class:ae(["flex flex-col w-full gap-2 px-3 py-3 transition-all duration-500 ease-in-out border rounded-lg editor-wrapper bg-n-alpha-black2",[{"cursor-not-allowed opacity-50 pointer-events-none !bg-n-alpha-black2 disabled:border-n-weak dark:disabled:border-n-weak":e.disabled,"border-n-brand dark:border-n-brand":o.value,"hover:border-n-slate-6 dark:hover:border-n-slate-6 border-n-weak dark:border-n-weak":!o.value&&e.messageType!=="error","border-n-ruby-8 dark:border-n-ruby-8 hover:border-n-ruby-9 dark:hover:border-n-ruby-9":e.messageType==="error"&&!o.value}]])},[S(ai,{"model-value":e.modelValue,placeholder:e.placeholder,"focus-on-mount":e.focusOnMount,disabled:e.disabled,"enable-variables":e.enableVariables,"enable-canned-responses":e.enableCannedResponses,"enabled-menu-options":e.enabledMenuOptions,"enable-captain-tools":e.enableCaptainTools,signature:e.signature,"allow-signature":e.allowSignature,"send-with-signature":e.sendWithSignature,"channel-type":e.channelType,onInput:r,onFocus:c,onBlur:u},null,8,["model-value","placeholder","focus-on-mount","disabled","enable-variables","enable-canned-responses","enabled-menu-options","enable-captain-tools","signature","allow-signature","send-with-signature","channel-type"]),e.showCharacterCount||C(a).actions?(p(),E("div",$z,[e.showCharacterCount&&!C(a).actions?(p(),E("span",Mz,I(i.value)+" / "+I(e.maxLength),1)):We(d.$slots,"actions",{key:1},void 0,!0)])):$("",!0)],2),e.message?(p(),E("p",{key:1,class:ae(["min-w-0 mt-1 mb-0 text-xs truncate transition-all duration-500 ease-in-out",l.value])},I(e.message),3)):$("",!0)]))}},Ks=De(Lz,[["__scopeId","data-v-8c1fa1f2"]]),Dz={components:{PageHeader:Xs,GreetingsEditor:NA,NextButton:te,Editor:Ks},data(){return{inboxName:"",channelWebsiteUrl:"",channelWidgetColor:"#009CE0",channelWelcomeTitle:"",channelWelcomeTagline:"",greetingEnabled:!1,greetingMessage:"",welcomeTaglineEditorMenuOptions:i_}},computed:{...mt({uiFlags:"inboxes/getUIFlags"}),textAreaChannels(){return!!(this.isATwilioChannel||this.isATwitterInbox||this.isAFacebookInbox)}},methods:{async createChannel(){var e;try{const t=await this.$store.dispatch("inboxes/createWebsiteChannel",{name:(e=this.inboxName)==null?void 0:e.trim(),greeting_enabled:this.greetingEnabled,greeting_message:this.greetingMessage,channel:{type:"web_widget",website_url:this.channelWebsiteUrl,widget_color:this.channelWidgetColor,welcome_title:this.channelWelcomeTitle,welcome_tagline:this.channelWelcomeTagline}});ps.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:t.id}})}catch(t){ne(t.message||this.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.API.ERROR_MESSAGE"))}}}},Pz={class:"h-full w-full p-6 col-span-6"},kz={class:"w-full"},Bz=["placeholder"],Uz={class:"w-full"},Fz=["placeholder"],Gz={class:"w-full"},Vz={class:"w-full"},Hz=["placeholder"],Wz={class:"w-full"},zz={value:!0},Yz={value:!1},jz={class:"help-text"},Kz={class:"flex flex-row justify-end w-full gap-2 px-0 py-2 mt-4"},Xz={class:"w-full"};function qz(e,t,n,s,a,o){const i=W("PageHeader"),l=W("woot-loading-state"),r=W("woot-color-picker"),c=W("Editor"),u=W("GreetingsEditor"),d=W("NextButton");return p(),E("div",Pz,[S(i,{"header-title":e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.DESC")},null,8,["header-title","header-content"]),e.uiFlags.isCreating?(p(),L(l,{key:0,message:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.LOADING_MESSAGE")},null,8,["message"])):$("",!0),e.uiFlags.isCreating?$("",!0):(p(),E("form",{key:1,class:"flex flex-wrap flex-col mx-0",onSubmit:t[7]||(t[7]=Ve((...h)=>o.createChannel&&o.createChannel(...h),["prevent"]))},[m("div",kz,[m("label",null,[xe(I(e.$t("INBOX_MGMT.ADD.WEBSITE_NAME.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[0]||(t[0]=h=>a.inboxName=h),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_NAME.PLACEHOLDER")},null,8,Bz),[[gt,a.inboxName]])])]),m("div",Uz,[m("label",null,[xe(I(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[1]||(t[1]=h=>a.channelWebsiteUrl=h),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.PLACEHOLDER")},null,8,Fz),[[gt,a.channelWebsiteUrl]])])]),m("div",Gz,[m("label",null,[xe(I(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.WIDGET_COLOR.LABEL"))+" ",1),S(r,{modelValue:a.channelWidgetColor,"onUpdate:modelValue":t[2]||(t[2]=h=>a.channelWidgetColor=h)},null,8,["modelValue"])])]),m("div",Vz,[m("label",null,[xe(I(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[3]||(t[3]=h=>a.channelWelcomeTitle=h),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.PLACEHOLDER")},null,8,Hz),[[gt,a.channelWelcomeTitle]])])]),S(c,{modelValue:a.channelWelcomeTagline,"onUpdate:modelValue":t[4]||(t[4]=h=>a.channelWelcomeTagline=h),label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.PLACEHOLDER"),"max-length":255,"enabled-menu-options":a.welcomeTaglineEditorMenuOptions,class:"mb-4"},null,8,["modelValue","label","placeholder","enabled-menu-options"]),m("label",Wz,[xe(I(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.LABEL"))+" ",1),re(m("select",{"onUpdate:modelValue":t[5]||(t[5]=h=>a.greetingEnabled=h)},[m("option",zz,I(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.ENABLED")),1),m("option",Yz,I(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.DISABLED")),1)],512),[[Nn,a.greetingEnabled]]),m("p",jz,I(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.HELP_TEXT")),1)]),a.greetingEnabled?(p(),L(u,{key:0,modelValue:a.greetingMessage,"onUpdate:modelValue":t[6]||(t[6]=h=>a.greetingMessage=h),class:"w-full",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.PLACEHOLDER"),richtext:!o.textAreaChannels},null,8,["modelValue","label","placeholder","richtext"])):$("",!0),m("div",Kz,[m("div",Xz,[S(d,{type:"submit","is-loading":e.uiFlags.isCreating,disabled:!a.channelWebsiteUrl||!a.inboxName,solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","disabled","label"])])])],32))])}const Zz=De(Dz,[["render",qz]]);class Qz extends Ea{constructor(){super("twitter",{accountScoped:!0})}generateAuthorization(){return axios.post(`${this.url}/authorization`)}}const Jz=new Qz,eY={components:{NextButton:te},data(){return{isRequestingAuthorization:!1}},methods:{async requestAuthorization(){try{this.isRequestingAuthorization=!0;const e=await Jz.generateAuthorization(),{data:{url:t}}=e;window.location.href=t}catch{ne(this.$t("INBOX_MGMT.ADD.TWITTER.ERROR_MESSAGE"))}finally{this.isRequestingAuthorization=!1}}}},tY={class:"h-full w-full p-6 col-span-6"},nY={class:"login-init h-full text-center"};function sY(e,t,n,s,a,o){const i=W("NextButton");return p(),E("div",tY,[m("div",nY,[m("form",{onSubmit:t[0]||(t[0]=Ve((...l)=>o.requestAuthorization&&o.requestAuthorization(...l),["prevent"]))},[S(i,{type:"submit",icon:"i-ri-twitter-x-fill",label:"Sign in with Twitter","is-loading":a.isRequestingAuthorization},null,8,["is-loading"])],32),m("p",null,I(e.$t("INBOX_MGMT.ADD.TWITTER.HELP")),1)])])}const aY=De(eY,[["render",sY],["__scopeId","data-v-c92fc359"]]),oY=(e="")=>e?e.startsWith("http"):!0,iY={components:{PageHeader:Xs,NextButton:te},setup(){return{v$:bt()}},data(){return{channelName:"",webhookUrl:""}},computed:{...mt({uiFlags:"inboxes/getUIFlags"})},validations:{channelName:{required:Ye},webhookUrl:{shouldBeWebhookUrl:oY}},methods:{async createChannel(){var e;if(this.v$.$touch(),!this.v$.$invalid)try{const t=await this.$store.dispatch("inboxes/createChannel",{name:(e=this.channelName)==null?void 0:e.trim(),channel:{type:"api",webhook_url:this.webhookUrl}});ps.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:t.id}})}catch{ne(this.$t("INBOX_MGMT.ADD.API_CHANNEL.API.ERROR_MESSAGE"))}}}},lY={class:"h-full w-full p-6 col-span-6"},rY={class:"flex-shrink-0 flex-grow-0"},cY=["placeholder"],uY={key:0,class:"message"},dY={class:"flex-shrink-0 flex-grow-0"},pY=["placeholder"],mY={class:"help-text"},hY={class:"w-full mt-4"};function fY(e,t,n,s,a,o){const i=W("PageHeader"),l=W("NextButton");return p(),E("div",lY,[S(i,{"header-title":e.$t("INBOX_MGMT.ADD.API_CHANNEL.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.API_CHANNEL.DESC")},null,8,["header-title","header-content"]),m("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[4]||(t[4]=Ve(r=>o.createChannel(),["prevent"]))},[m("div",rY,[m("label",{class:ae({error:s.v$.channelName.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.API_CHANNEL.CHANNEL_NAME.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>a.channelName=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.API_CHANNEL.CHANNEL_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...r)=>s.v$.channelName.$touch&&s.v$.channelName.$touch(...r))},null,40,cY),[[gt,a.channelName]]),s.v$.channelName.$error?(p(),E("span",uY,I(e.$t("INBOX_MGMT.ADD.API_CHANNEL.CHANNEL_NAME.ERROR")),1)):$("",!0)],2)]),m("div",dY,[m("label",{class:ae({error:s.v$.webhookUrl.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.API_CHANNEL.WEBHOOK_URL.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>a.webhookUrl=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.API_CHANNEL.WEBHOOK_URL.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...r)=>s.v$.webhookUrl.$touch&&s.v$.webhookUrl.$touch(...r))},null,40,pY),[[gt,a.webhookUrl]])],2),m("p",mY,I(e.$t("INBOX_MGMT.ADD.API_CHANNEL.WEBHOOK_URL.SUBTITLE")),1)]),m("div",hY,[S(l,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.API_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)])}const gY=De(iY,[["render",fY]]),_Y={components:{PageHeader:Xs,NextButton:te},setup(){return{v$:bt()}},data(){return{channelName:"",email:"",alertMessage:""}},computed:{...mt({uiFlags:"inboxes/getUIFlags"})},validations:{channelName:{required:Ye},email:{required:Ye,email:Li}},methods:{async createChannel(){var e;if(this.v$.$touch(),!this.v$.$invalid)try{const t=await this.$store.dispatch("inboxes/createChannel",{name:(e=this.channelName)==null?void 0:e.trim(),channel:{type:"email",email:this.email}});ps.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:t.id}})}catch(t){const n=t==null?void 0:t.message;this.alertMessage=n||this.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.API.ERROR_MESSAGE"),ne(this.alertMessage)}}}},vY={class:"h-full w-full p-6 col-span-6"},EY={class:"flex-shrink-0 flex-grow-0"},bY=["placeholder"],TY={key:0,class:"message"},SY={class:"flex-shrink-0 flex-grow-0 mb-4"},AY=["placeholder"],yY={class:"help-text"},IY={class:"w-full mt-4"};function CY(e,t,n,s,a,o){const i=W("PageHeader"),l=W("NextButton");return p(),E("div",vY,[S(i,{"header-title":e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.DESC")},null,8,["header-title","header-content"]),m("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[4]||(t[4]=Ve(r=>o.createChannel(),["prevent"]))},[m("div",EY,[m("label",{class:ae({error:s.v$.channelName.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.CHANNEL_NAME.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>a.channelName=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.CHANNEL_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...r)=>s.v$.channelName.$touch&&s.v$.channelName.$touch(...r))},null,40,bY),[[gt,a.channelName]]),s.v$.channelName.$error?(p(),E("span",TY,I(e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.CHANNEL_NAME.ERROR")),1)):$("",!0)],2)]),m("div",SY,[m("label",{class:ae({error:s.v$.email.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.EMAIL.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>a.email=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.EMAIL.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...r)=>s.v$.email.$touch&&s.v$.email.$touch(...r))},null,40,AY),[[gt,a.email]]),m("p",yY,I(e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.EMAIL.SUBTITLE")),1)],2)]),m("div",IY,[S(l,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)])}const NY=De(_Y,[["render",CY]]);let OY=class extends Ea{constructor(){super("microsoft",{accountScoped:!0})}generateAuthorization(t){return axios.post(`${this.url}/authorization`,t)}};const OA=new OY;class RY extends Ea{constructor(){super("google",{accountScoped:!0})}generateAuthorization(t){return axios.post(`${this.url}/authorization`,t)}}const RA=new RY,xY={class:"h-full w-full p-6 col-span-6"},xA={__name:"OAuthChannel",props:{provider:{type:String,required:!0,validate:e=>["microsoft","google"].includes(e)},title:{type:String,required:!0},description:{type:String,required:!0},submitButtonText:{type:String,required:!0},errorMessage:{type:String,required:!0}},setup(e){const t=e,n=j(!1),s=y(()=>t.provider==="microsoft"?OA:RA);async function a(){try{n.value=!0;const o=await s.value.generateAuthorization(),{data:{url:i}}=o;window.location.href=i}catch{ne(t.errorMessage)}finally{n.value=!1}}return(o,i)=>(p(),E("div",xY,[S(Xs,{"header-title":e.title,"header-content":e.description},null,8,["header-title","header-content"]),m("form",{class:"mt-6",onSubmit:Ve(a,["prevent"])},[S(te,{"is-loading":n.value,type:"submit",solid:"",blue:"",label:e.submitButtonText},null,8,["is-loading","label"])],32)]))}},wY=Object.assign({name:"MicrosoftOAuthChannel"},{__name:"Microsoft",setup(e){return(t,n)=>(p(),L(xA,{provider:"microsoft",title:t.$t("INBOX_MGMT.ADD.MICROSOFT.TITLE"),description:t.$t("INBOX_MGMT.ADD.MICROSOFT.DESCRIPTION"),"submit-button-text":t.$t("INBOX_MGMT.ADD.MICROSOFT.SIGN_IN"),"error-message":t.$t("INBOX_MGMT.ADD.MICROSOFT.ERROR_MESSAGE")},null,8,["title","description","submit-button-text","error-message"]))}}),$Y=Object.assign({name:"GoogleOAuthChannel"},{__name:"Google",setup(e){return(t,n)=>(p(),L(xA,{provider:"google",title:t.$t("INBOX_MGMT.ADD.GOOGLE.TITLE"),description:t.$t("INBOX_MGMT.ADD.GOOGLE.DESCRIPTION"),"submit-button-text":t.$t("INBOX_MGMT.ADD.GOOGLE.SIGN_IN"),"error-message":t.$t("INBOX_MGMT.ADD.GOOGLE.ERROR_MESSAGE")},null,8,["title","description","submit-button-text","error-message"]))}}),MY={class:"flex size-10 items-center justify-center rounded-full bg-n-alpha-2"},LY={class:"flex flex-col items-start gap-1.5"},DY={class:"text-n-slate-12 text-sm text-start font-medium capitalize"},PY={class:"text-n-slate-11 text-start text-sm"},kY={key:0,class:"absolute inset-0 flex items-center justify-center backdrop-blur-[2px] rounded-2xl bg-gradient-to-br from-n-background/90 via-n-background/70 to-n-background/95 cursor-not-allowed"},BY={class:"text-n-slate-12 font-medium text-sm"},p_={__name:"ChannelSelector",props:{title:{type:String,required:!0},description:{type:String,default:""},icon:{type:String,required:!0},isComingSoon:{type:Boolean,default:!1}},setup(e){return(t,n)=>(p(),E("button",{class:ae(["relative bg-n-solid-1 gap-6 cursor-pointer rounded-2xl flex flex-col justify-start transition-all duration-200 ease-in -m-px py-6 px-5 items-start border border-solid border-n-weak",{"hover:enabled:border-n-blue-9 hover:enabled:shadow-md disabled:opacity-60 disabled:cursor-not-allowed":!e.isComingSoon,"cursor-not-allowed disabled:opacity-80":e.isComingSoon}])},[m("div",MY,[S(dt,{icon:e.icon,class:"text-n-slate-10 size-6"},null,8,["icon"])]),m("div",LY,[m("h3",DY,I(e.title),1),m("p",PY,I(e.description),1)]),e.isComingSoon?(p(),E("div",kY,[m("span",BY,I(t.$t("CHANNEL_SELECTOR.COMING_SOON"))+"  ",1)])):$("",!0)],2))}},UY={key:0,class:"h-full w-full p-6 col-span-6"},FY={class:"grid max-w-3xl grid-cols-4 gap-6 mx-0 mt-6"},GY={__name:"Email",setup(e){const t=j(""),n=pn(),{t:s}=be(),a=n["globalConfig/get"],o=n["globalConfig/isAChatwootInstance"],i=y(()=>[{title:s("INBOX_MGMT.EMAIL_PROVIDERS.MICROSOFT.TITLE"),description:s("INBOX_MGMT.EMAIL_PROVIDERS.MICROSOFT.DESCRIPTION"),isEnabled:!!a.value.azureAppId,key:"microsoft",icon:"i-woot-outlook"},{title:s("INBOX_MGMT.EMAIL_PROVIDERS.GOOGLE.TITLE"),description:s("INBOX_MGMT.EMAIL_PROVIDERS.GOOGLE.DESCRIPTION"),isEnabled:!!window.chatwootConfig.googleOAuthClientId,key:"google",icon:"i-woot-gmail"},{title:s("INBOX_MGMT.EMAIL_PROVIDERS.OTHER_PROVIDERS.TITLE"),description:s("INBOX_MGMT.EMAIL_PROVIDERS.OTHER_PROVIDERS.DESCRIPTION"),isEnabled:!0,key:"other_provider",icon:"i-woot-mail"}].filter(r=>o.value?!0:r.isEnabled));function l(r){r.isEnabled&&(t.value=r.key)}return(r,c)=>t.value?t.value==="microsoft"?(p(),L(wY,{key:1})):t.value==="google"?(p(),L($Y,{key:2})):t.value==="other_provider"?(p(),L(NY,{key:3})):$("",!0):(p(),E("div",UY,[S(Xs,{class:"max-w-4xl","header-title":r.$t("INBOX_MGMT.ADD.EMAIL_PROVIDER.TITLE"),"header-content":r.$t("INBOX_MGMT.ADD.EMAIL_PROVIDER.DESCRIPTION")},null,8,["header-title","header-content"]),m("div",FY,[(p(!0),E(ue,null,Ae(i.value,u=>(p(),L(p_,{key:u.key,title:u.title,description:u.description,icon:u.icon,disabled:!u.isEnabled,onClick:()=>l(u)},null,8,["title","description","icon","disabled","onClick"]))),128))])]))}},VY=(e="")=>e.startsWith("+"),HY={components:{NextButton:te},setup(){return{v$:bt()}},data(){return{accountId:"",apiKey:"",apiSecret:"",applicationId:"",inboxName:"",phoneNumber:""}},computed:{...mt({uiFlags:"inboxes/getUIFlags"})},validations:{inboxName:{required:Ye},phoneNumber:{required:Ye,shouldStartWithPlusSign:VY},apiKey:{required:Ye},apiSecret:{required:Ye},applicationId:{required:Ye},accountId:{required:Ye}},methods:{async createChannel(){var e;if(this.v$.$touch(),!this.v$.$invalid)try{const t=await this.$store.dispatch("inboxes/createChannel",{name:(e=this.inboxName)==null?void 0:e.trim(),channel:{type:"sms",phone_number:this.phoneNumber,provider_config:{api_key:this.apiKey,api_secret:this.apiSecret,application_id:this.applicationId,account_id:this.accountId}}});ps.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:t.id}})}catch{ne(this.$t("INBOX_MGMT.ADD.SMS.API.ERROR_MESSAGE"))}}}},WY={class:"flex-shrink-0 flex-grow-0"},zY=["placeholder"],YY={key:0,class:"message"},jY={class:"flex-shrink-0 flex-grow-0"},KY=["placeholder"],XY={key:0,class:"message"},qY={class:"flex-shrink-0 flex-grow-0"},ZY=["placeholder"],QY={key:0,class:"message"},JY={class:"flex-shrink-0 flex-grow-0"},ej=["placeholder"],tj={key:0,class:"message"},nj={class:"flex-shrink-0 flex-grow-0"},sj=["placeholder"],aj={key:0,class:"message"},oj={class:"flex-shrink-0 flex-grow-0"},ij=["placeholder"],lj={key:0,class:"message"},rj={class:"w-full mt-4"};function cj(e,t,n,s,a,o){const i=W("NextButton");return p(),E("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[12]||(t[12]=Ve(l=>o.createChannel(),["prevent"]))},[m("div",WY,[m("label",{class:ae({error:s.v$.inboxName.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.INBOX_NAME.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>a.inboxName=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.INBOX_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...l)=>s.v$.inboxName.$touch&&s.v$.inboxName.$touch(...l))},null,40,zY),[[gt,a.inboxName]]),s.v$.inboxName.$error?(p(),E("span",YY,I(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.INBOX_NAME.ERROR")),1)):$("",!0)],2)]),m("div",jY,[m("label",{class:ae({error:s.v$.phoneNumber.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.PHONE_NUMBER.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>a.phoneNumber=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.PHONE_NUMBER.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...l)=>s.v$.phoneNumber.$touch&&s.v$.phoneNumber.$touch(...l))},null,40,KY),[[gt,a.phoneNumber]]),s.v$.phoneNumber.$error?(p(),E("span",XY,I(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.PHONE_NUMBER.ERROR")),1)):$("",!0)],2)]),m("div",qY,[m("label",{class:ae({error:s.v$.accountId.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.ACCOUNT_ID.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>a.accountId=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.ACCOUNT_ID.PLACEHOLDER"),onBlur:t[5]||(t[5]=(...l)=>s.v$.accountId.$touch&&s.v$.accountId.$touch(...l))},null,40,ZY),[[gt,a.accountId]]),s.v$.accountId.$error?(p(),E("span",QY,I(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.ACCOUNT_ID.ERROR")),1)):$("",!0)],2)]),m("div",JY,[m("label",{class:ae({error:s.v$.applicationId.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.APPLICATION_ID.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>a.applicationId=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.APPLICATION_ID.PLACEHOLDER"),onBlur:t[7]||(t[7]=(...l)=>s.v$.applicationId.$touch&&s.v$.applicationId.$touch(...l))},null,40,ej),[[gt,a.applicationId]]),s.v$.applicationId.$error?(p(),E("span",tj,I(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.APPLICATION_ID.ERROR")),1)):$("",!0)],2)]),m("div",nj,[m("label",{class:ae({error:s.v$.apiKey.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_KEY.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>a.apiKey=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_KEY.PLACEHOLDER"),onBlur:t[9]||(t[9]=(...l)=>s.v$.apiKey.$touch&&s.v$.apiKey.$touch(...l))},null,40,sj),[[gt,a.apiKey]]),s.v$.apiKey.$error?(p(),E("span",aj,I(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_KEY.ERROR")),1)):$("",!0)],2)]),m("div",oj,[m("label",{class:ae({error:s.v$.apiSecret.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_SECRET.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[10]||(t[10]=l=>a.apiSecret=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_SECRET.PLACEHOLDER"),onBlur:t[11]||(t[11]=(...l)=>s.v$.apiSecret.$touch&&s.v$.apiSecret.$touch(...l))},null,40,ij),[[gt,a.apiSecret]]),s.v$.apiSecret.$error?(p(),E("span",lj,I(e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_SECRET.ERROR")),1)):$("",!0)],2)]),m("div",rj,[S(i,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.SMS.BANDWIDTH.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)}const uj=De(HY,[["render",cj]]),dj={components:{NextButton:te},props:{type:{type:String,required:!0}},setup(){return{v$:bt()}},data(){return{accountSID:"",apiKeySID:"",authToken:"",medium:this.type,channelName:"",messagingServiceSID:"",useMessagingService:!1,useAPIKey:!1,phoneNumber:""}},computed:{...mt({uiFlags:"inboxes/getUIFlags"}),authTokeni18nKey(){return this.useAPIKey?"API_KEY_SECRET":"AUTH_TOKEN"}},validations(){let e={channelName:{required:Ye},authToken:{required:Ye},accountSID:{required:Ye},medium:{required:Ye}};return this.phoneNumber?e={...e,phoneNumber:{required:Ye,isPhoneE164OrEmpty:_g},messagingServiceSID:{}}:e={...e,messagingServiceSID:{required:Ye},phoneNumber:{}},this.useAPIKey&&(e={...e,apiKeySID:{required:Ye}}),e},methods:{async createChannel(){var e;if(this.v$.$touch(),!this.v$.$invalid)try{const t=await this.$store.dispatch("inboxes/createTwilioChannel",{twilio_channel:{name:(e=this.channelName)==null?void 0:e.trim(),medium:this.medium,account_sid:this.accountSID,api_key_sid:this.apiKeySID,auth_token:this.authToken,messaging_service_sid:this.messagingServiceSID,phone_number:this.messagingServiceSID?null:`+${this.phoneNumber.replace(/\D/g,"")}`}});ps.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:t.id}})}catch(t){const n=Ir(t)||this.$t("INBOX_MGMT.ADD.TWILIO.API.ERROR_MESSAGE");ne(n)}}}},pj={class:"flex-shrink-0 flex-grow-0"},mj=["placeholder"],hj={key:0,class:"message"},fj={class:"flex-shrink-0 flex-grow-0"},gj=["placeholder"],_j={key:0,class:"message"},vj={key:0,class:"flex-shrink-0 flex-grow-0"},Ej=["placeholder"],bj={key:0,class:"message"},Tj={class:"max-w-[65%] w-full messagingServiceHelptext"},Sj={for:"useMessagingService"},Aj={class:"flex-shrink-0 flex-grow-0"},yj=["placeholder"],Ij={key:0,class:"message"},Cj={class:"max-w-[65%] w-full messagingServiceHelptext"},Nj={for:"useAPIKey"},Oj={key:1,class:"flex-shrink-0 flex-grow-0"},Rj=["placeholder"],xj={key:0,class:"message"},wj={class:"flex-shrink-0 flex-grow-0"},$j=["placeholder"],Mj={key:0,class:"message"},Lj={class:"w-full mt-4"};function Dj(e,t,n,s,a,o){const i=W("NextButton");return p(),E("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[14]||(t[14]=Ve(l=>o.createChannel(),["prevent"]))},[m("div",pj,[m("label",{class:ae({error:s.v$.channelName.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.TWILIO.CHANNEL_NAME.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>a.channelName=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TWILIO.CHANNEL_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...l)=>s.v$.channelName.$touch&&s.v$.channelName.$touch(...l))},null,40,mj),[[gt,a.channelName]]),s.v$.channelName.$error?(p(),E("span",hj,I(e.$t("INBOX_MGMT.ADD.TWILIO.CHANNEL_NAME.ERROR")),1)):$("",!0)],2)]),m("div",fj,[a.useMessagingService?(p(),E("label",{key:0,class:ae({error:s.v$.messagingServiceSID.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.TWILIO.MESSAGING_SERVICE_SID.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>a.messagingServiceSID=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TWILIO.MESSAGING_SERVICE_SID.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...l)=>s.v$.messagingServiceSID.$touch&&s.v$.messagingServiceSID.$touch(...l))},null,40,gj),[[gt,a.messagingServiceSID]]),s.v$.messagingServiceSID.$error?(p(),E("span",_j,I(e.$t("INBOX_MGMT.ADD.TWILIO.MESSAGING_SERVICE_SID.ERROR")),1)):$("",!0)],2)):$("",!0)]),a.useMessagingService?$("",!0):(p(),E("div",vj,[m("label",{class:ae({error:s.v$.phoneNumber.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.TWILIO.PHONE_NUMBER.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>a.phoneNumber=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TWILIO.PHONE_NUMBER.PLACEHOLDER"),onBlur:t[5]||(t[5]=(...l)=>s.v$.phoneNumber.$touch&&s.v$.phoneNumber.$touch(...l))},null,40,Ej),[[gt,a.phoneNumber]]),s.v$.phoneNumber.$error?(p(),E("span",bj,I(e.$t("INBOX_MGMT.ADD.TWILIO.PHONE_NUMBER.ERROR")),1)):$("",!0)],2)])),m("div",Tj,[m("label",Sj,[re(m("input",{id:"useMessagingService","onUpdate:modelValue":t[6]||(t[6]=l=>a.useMessagingService=l),type:"checkbox",class:"checkbox"},null,512),[[dn,a.useMessagingService]]),xe(" "+I(e.$t("INBOX_MGMT.ADD.TWILIO.MESSAGING_SERVICE_SID.USE_MESSAGING_SERVICE")),1)])]),m("div",Aj,[m("label",{class:ae({error:s.v$.accountSID.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.TWILIO.ACCOUNT_SID.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>a.accountSID=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TWILIO.ACCOUNT_SID.PLACEHOLDER"),onBlur:t[8]||(t[8]=(...l)=>s.v$.accountSID.$touch&&s.v$.accountSID.$touch(...l))},null,40,yj),[[gt,a.accountSID]]),s.v$.accountSID.$error?(p(),E("span",Ij,I(e.$t("INBOX_MGMT.ADD.TWILIO.ACCOUNT_SID.ERROR")),1)):$("",!0)],2)]),m("div",Cj,[m("label",Nj,[re(m("input",{id:"useAPIKey","onUpdate:modelValue":t[9]||(t[9]=l=>a.useAPIKey=l),type:"checkbox",class:"checkbox"},null,512),[[dn,a.useAPIKey]]),xe(" "+I(e.$t("INBOX_MGMT.ADD.TWILIO.API_KEY.USE_API_KEY")),1)])]),a.useAPIKey?(p(),E("div",Oj,[m("label",{class:ae({error:s.v$.apiKeySID.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.TWILIO.API_KEY.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[10]||(t[10]=l=>a.apiKeySID=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TWILIO.API_KEY.PLACEHOLDER"),onBlur:t[11]||(t[11]=(...l)=>s.v$.apiKeySID.$touch&&s.v$.apiKeySID.$touch(...l))},null,40,Rj),[[gt,a.apiKeySID]]),s.v$.apiKeySID.$error?(p(),E("span",xj,I(e.$t("INBOX_MGMT.ADD.TWILIO.API_KEY.ERROR")),1)):$("",!0)],2)])):$("",!0),m("div",wj,[m("label",{class:ae({error:s.v$.authToken.$error})},[xe(I(e.$t(`INBOX_MGMT.ADD.TWILIO.${o.authTokeni18nKey}.LABEL`))+" ",1),re(m("input",{"onUpdate:modelValue":t[12]||(t[12]=l=>a.authToken=l),type:"text",placeholder:e.$t(`INBOX_MGMT.ADD.TWILIO.${o.authTokeni18nKey}.PLACEHOLDER`),onBlur:t[13]||(t[13]=(...l)=>s.v$.authToken.$touch&&s.v$.authToken.$touch(...l))},null,40,$j),[[gt,a.authToken]]),s.v$.authToken.$error?(p(),E("span",Mj,I(e.$t(`INBOX_MGMT.ADD.TWILIO.${o.authTokeni18nKey}.ERROR`)),1)):$("",!0)],2)]),m("div",Lj,[S(i,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.TWILIO.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)}const wA=De(dj,[["render",Dj],["__scopeId","data-v-075bbfd9"]]),Pj={components:{PageHeader:Xs,Twilio:wA,BandwidthSms:uj},data(){return{provider:"twilio"}}},kj={class:"h-full w-full p-6 col-span-6"},Bj={class:"flex-shrink-0 flex-grow-0"},Uj={value:"twilio"},Fj={value:"360dialog"};function Gj(e,t,n,s,a,o){const i=W("PageHeader"),l=W("Twilio"),r=W("BandwidthSms");return p(),E("div",kj,[S(i,{"header-title":e.$t("INBOX_MGMT.ADD.SMS.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.SMS.DESC")},null,8,["header-title","header-content"]),m("div",Bj,[m("label",null,[xe(I(e.$t("INBOX_MGMT.ADD.SMS.PROVIDERS.LABEL"))+" ",1),re(m("select",{"onUpdate:modelValue":t[0]||(t[0]=c=>a.provider=c)},[m("option",Uj,I(e.$t("INBOX_MGMT.ADD.SMS.PROVIDERS.TWILIO")),1),m("option",Fj,I(e.$t("INBOX_MGMT.ADD.SMS.PROVIDERS.BANDWIDTH")),1)],512),[[Nn,a.provider]])])]),a.provider==="twilio"?(p(),L(l,{key:0,type:"sms"})):(p(),L(r,{key:1}))])}const Vj=De(Pj,[["render",Gj]]),Hj={components:{NextButton:te},setup(){return{v$:bt()}},data(){return{inboxName:"",phoneNumber:"",apiKey:""}},computed:{...mt({uiFlags:"inboxes/getUIFlags"})},validations:{inboxName:{required:Ye},phoneNumber:{required:Ye,isPhoneE164OrEmpty:_g},apiKey:{required:Ye}},methods:{async createChannel(){var e;if(this.v$.$touch(),!this.v$.$invalid)try{const t=await this.$store.dispatch("inboxes/createChannel",{name:(e=this.inboxName)==null?void 0:e.trim(),channel:{type:"whatsapp",phone_number:this.phoneNumber,provider_config:{api_key:this.apiKey}}});ps.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:t.id}})}catch(t){ne(t.message||this.$t("INBOX_MGMT.ADD.WHATSAPP.API.ERROR_MESSAGE"))}}}},Wj={class:"flex-shrink-0 flex-grow-0"},zj=["placeholder"],Yj={key:0,class:"message"},jj={class:"flex-shrink-0 flex-grow-0"},Kj=["placeholder"],Xj={key:0,class:"message"},qj={class:"flex-shrink-0 flex-grow-0"},Zj=["placeholder"],Qj={key:0,class:"message"},Jj={class:"w-full"};function eK(e,t,n,s,a,o){const i=W("NextButton");return p(),E("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[6]||(t[6]=Ve(l=>o.createChannel(),["prevent"]))},[m("div",Wj,[m("label",{class:ae({error:s.v$.inboxName.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>a.inboxName=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...l)=>s.v$.inboxName.$touch&&s.v$.inboxName.$touch(...l))},null,40,zj),[[gt,a.inboxName]]),s.v$.inboxName.$error?(p(),E("span",Yj,I(e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.ERROR")),1)):$("",!0)],2)]),m("div",jj,[m("label",{class:ae({error:s.v$.phoneNumber.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>a.phoneNumber=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...l)=>s.v$.phoneNumber.$touch&&s.v$.phoneNumber.$touch(...l))},null,40,Kj),[[gt,a.phoneNumber]]),s.v$.phoneNumber.$error?(p(),E("span",Xj,I(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.ERROR")),1)):$("",!0)],2)]),m("div",qj,[m("label",{class:ae({error:s.v$.apiKey.$error})},[m("span",null,I(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.LABEL")),1),re(m("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>a.apiKey=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.PLACEHOLDER"),onBlur:t[5]||(t[5]=(...l)=>s.v$.apiKey.$touch&&s.v$.apiKey.$touch(...l))},null,40,Zj),[[gt,a.apiKey]]),s.v$.apiKey.$error?(p(),E("span",Qj,I(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.ERROR")),1)):$("",!0)],2)]),m("div",Jj,[S(i,{type:"submit",label:e.$t("INBOX_MGMT.ADD.WHATSAPP.SUBMIT_BUTTON"),"is-loading":e.uiFlags.isCreating},null,8,["label","is-loading"])])],32)}const tK=De(Hj,[["render",eK]]),nK={components:{NextButton:te},setup(){return{v$:bt()}},data(){return{inboxName:"",phoneNumber:"",apiKey:"",phoneNumberId:"",businessAccountId:""}},computed:{...mt({uiFlags:"inboxes/getUIFlags"})},validations:{inboxName:{required:Ye},phoneNumber:{required:Ye,isPhoneE164OrEmpty:_g},apiKey:{required:Ye},phoneNumberId:{required:Ye,isNumber:Iv},businessAccountId:{required:Ye,isNumber:Iv}},methods:{async createChannel(){var e;if(this.v$.$touch(),!this.v$.$invalid)try{const t=await this.$store.dispatch("inboxes/createChannel",{name:(e=this.inboxName)==null?void 0:e.trim(),channel:{type:"whatsapp",phone_number:this.phoneNumber,provider:"whatsapp_cloud",provider_config:{api_key:this.apiKey,phone_number_id:this.phoneNumberId,business_account_id:this.businessAccountId}}});ps.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:t.id}})}catch(t){ne(t.message||this.$t("INBOX_MGMT.ADD.WHATSAPP.API.ERROR_MESSAGE"))}}}},sK={class:"flex-shrink-0 flex-grow-0"},aK=["placeholder"],oK={key:0,class:"message"},iK={class:"flex-shrink-0 flex-grow-0"},lK=["placeholder"],rK={key:0,class:"message"},cK={class:"flex-shrink-0 flex-grow-0"},uK=["placeholder"],dK={key:0,class:"message"},pK={class:"flex-shrink-0 flex-grow-0"},mK=["placeholder"],hK={key:0,class:"message"},fK={class:"flex-shrink-0 flex-grow-0"},gK=["placeholder"],_K={key:0,class:"message"},vK={class:"w-full mt-4"};function EK(e,t,n,s,a,o){const i=W("NextButton");return p(),E("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[10]||(t[10]=Ve(l=>o.createChannel(),["prevent"]))},[m("div",sK,[m("label",{class:ae({error:s.v$.inboxName.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>a.inboxName=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...l)=>s.v$.inboxName.$touch&&s.v$.inboxName.$touch(...l))},null,40,aK),[[gt,a.inboxName]]),s.v$.inboxName.$error?(p(),E("span",oK,I(e.$t("INBOX_MGMT.ADD.WHATSAPP.INBOX_NAME.ERROR")),1)):$("",!0)],2)]),m("div",iK,[m("label",{class:ae({error:s.v$.phoneNumber.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>a.phoneNumber=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...l)=>s.v$.phoneNumber.$touch&&s.v$.phoneNumber.$touch(...l))},null,40,lK),[[gt,a.phoneNumber]]),s.v$.phoneNumber.$error?(p(),E("span",rK,I(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER.ERROR")),1)):$("",!0)],2)]),m("div",cK,[m("label",{class:ae({error:s.v$.phoneNumberId.$error})},[m("span",null,I(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER_ID.LABEL")),1),re(m("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>a.phoneNumberId=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER_ID.PLACEHOLDER"),onBlur:t[5]||(t[5]=(...l)=>s.v$.phoneNumberId.$touch&&s.v$.phoneNumberId.$touch(...l))},null,40,uK),[[gt,a.phoneNumberId]]),s.v$.phoneNumberId.$error?(p(),E("span",dK,I(e.$t("INBOX_MGMT.ADD.WHATSAPP.PHONE_NUMBER_ID.ERROR")),1)):$("",!0)],2)]),m("div",pK,[m("label",{class:ae({error:s.v$.businessAccountId.$error})},[m("span",null,I(e.$t("INBOX_MGMT.ADD.WHATSAPP.BUSINESS_ACCOUNT_ID.LABEL")),1),re(m("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>a.businessAccountId=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.BUSINESS_ACCOUNT_ID.PLACEHOLDER"),onBlur:t[7]||(t[7]=(...l)=>s.v$.businessAccountId.$touch&&s.v$.businessAccountId.$touch(...l))},null,40,mK),[[gt,a.businessAccountId]]),s.v$.businessAccountId.$error?(p(),E("span",hK,I(e.$t("INBOX_MGMT.ADD.WHATSAPP.BUSINESS_ACCOUNT_ID.ERROR")),1)):$("",!0)],2)]),m("div",fK,[m("label",{class:ae({error:s.v$.apiKey.$error})},[m("span",null,I(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.LABEL")),1),re(m("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>a.apiKey=l),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.PLACEHOLDER"),onBlur:t[9]||(t[9]=(...l)=>s.v$.apiKey.$touch&&s.v$.apiKey.$touch(...l))},null,40,gK),[[gt,a.apiKey]]),s.v$.apiKey.$error?(p(),E("span",_K,I(e.$t("INBOX_MGMT.ADD.WHATSAPP.API_KEY.ERROR")),1)):$("",!0)],2)]),m("div",vK,[S(i,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.WHATSAPP.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)}const nb=De(nK,[["render",EK]]),bK=async()=>d_("https://connect.facebook.net/en_US/sdk.js",{async:!0,defer:!0,crossOrigin:"anonymous"}),TK=(e,t)=>{const n=t||"v22.0";return new Promise(s=>{const a=()=>{window.FB.init({appId:e,autoLogAppEvents:!0,xfbml:!0,version:n}),s()};window.FB?a():window.fbAsyncInit=a})},$A=e=>e&&e.business_id&&e.waba_id,MA=e=>t=>{if(t.origin.endsWith("facebook.com"))try{let n;if(typeof t.data=="string")n=JSON.parse(t.data);else if(typeof t.data=="object"&&t.data!==null)n=t.data;else return;n.type==="WA_EMBEDDED_SIGNUP"&&e(n)}catch{}},LA=e=>new Promise((t,n)=>{window.FB.login(s=>{s.authResponse&&s.authResponse.code?t(s.authResponse.code):s.error?n(new Error(s.error)):n(new Error("Login cancelled"))},{config_id:e,response_type:"code",override_default_response_type:!0,extras:{setup:{},featureType:"whatsapp_business_app_onboarding",sessionInfoVersion:"3"}})}),DA=async(e,t)=>{const n=t||"v22.0";await bK(),await TK(e,n)},SK={class:"h-full"},AK={key:1},yK={class:"flex flex-col items-start mb-6 text-start"},IK={class:"flex justify-start mb-6"},CK={class:"flex size-11 items-center justify-center rounded-full bg-n-alpha-2"},NK={class:"mb-2 text-base font-medium text-n-slate-12"},OK={class:"text-sm leading-[24px] text-n-slate-12"},RK={class:"flex flex-col gap-2 mb-6"},xK={class:"flex flex-col gap-2 mb-6"},wK=["href"],$K={class:"flex mt-4"},MK={__name:"WhatsappEmbeddedSignup",setup(e){const t=na(),n=Ft(),{t:s}=be(),a=j(!1),o=j(!1),i=j(""),l=j(!1),r=j(null),c=j(null),u=j(!1),d=y(()=>[{key:"EASY_SETUP",text:s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.BENEFITS.EASY_SETUP")},{key:"SECURE_AUTH",text:s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.BENEFITS.SECURE_AUTH")},{key:"AUTO_CONFIG",text:s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.BENEFITS.AUTO_CONFIG")}]),h=y(()=>u.value||o.value),g=x=>{o.value=!1,l.value=!1,u.value=!1;const w=x.error||x.message||s("INBOX_MGMT.ADD.WHATSAPP.API.ERROR_MESSAGE");ne(w)},f=()=>{o.value=!1,l.value=!1,u.value=!1},b=x=>{o.value=!1,u.value=!1,x&&x.id?(ne(s("INBOX_MGMT.FINISH.MESSAGE")),n.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:x.id}})):(ne(s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.SUCCESS_FALLBACK")),n.replace({name:"settings_inbox_list"}))},A=async x=>{if(!l.value||!r.value){g({error:s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.AUTH_NOT_COMPLETED")});return}o.value=!0,i.value=s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.PROCESSING");try{const w={code:r.value,business_id:x.business_id,waba_id:x.waba_id,phone_number_id:(x==null?void 0:x.phone_number_id)||""},D=await t.dispatch("inboxes/createWhatsAppEmbeddedSignup",w);r.value=null,b(D)}catch(w){const D=Ir(w)||s("INBOX_MGMT.ADD.WHATSAPP.API.ERROR_MESSAGE");g({error:D})}},T=MA(async x=>{if(x.event==="FINISH"||x.event==="FINISH_WHATSAPP_BUSINESS_APP_ONBOARDING"){const w=x.data;$A(w)?(c.value=w,l.value&&r.value?await A(w):i.value=s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.WAITING_FOR_AUTH")):g({error:s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.INVALID_BUSINESS_DATA")})}else x.event==="CANCEL"?f():x.event==="error"&&g({error:x.error_message||s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.SIGNUP_ERROR"),error_id:x.error_id,session_id:x.session_id})}),_=async()=>{var x,w,D;try{u.value=!0,i.value=s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.AUTH_PROCESSING"),await DA((x=window.chatwootConfig)==null?void 0:x.whatsappAppId,(w=window.chatwootConfig)==null?void 0:w.whatsappApiVersion),a.value=!0;const M=await LA((D=window.chatwootConfig)==null?void 0:D.whatsappConfigurationId);r.value=M,l.value=!0,i.value=s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.WAITING_FOR_BUSINESS_INFO"),c.value&&A(c.value)}catch(M){M.message==="Login cancelled"?(o.value=!1,u.value=!1,ne(s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.CANCELLED"))):g({error:M.message||s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.SDK_LOAD_ERROR")})}},N=()=>{window.addEventListener("message",T)},R=()=>{window.removeEventListener("message",T)},O=()=>{N()};return lt(()=>{O()}),Ar(()=>{R()}),(x,w)=>(p(),E("div",SK,[h.value?(p(),L(Nr,{key:0,message:i.value},null,8,["message"])):(p(),E("div",AK,[m("div",yK,[m("div",IK,[m("div",CK,[S(dt,{icon:"i-woot-whatsapp",class:"text-n-slate-10 size-6"})])]),m("h3",NK,I(x.$t("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.TITLE")),1),m("p",OK,I(x.$t("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.DESC")),1)]),m("div",RK,[(p(!0),E(ue,null,Ae(d.value,D=>(p(),E("div",{key:D.key,class:"flex gap-2 items-center text-sm text-n-slate-11"},[S(dt,{icon:"i-lucide-check",class:"text-n-slate-11 size-4"}),xe(" "+I(D.text),1)]))),128))]),m("div",xK,[S(C(mS),{keypath:"INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.LEARN_MORE.TEXT",tag:"span",class:"text-sm text-n-slate-11"},{link:Y(()=>[m("a",{href:C(yt).WHATSAPP_EMBEDDED_SIGNUP_DOCS_URL,target:"_blank",rel:"noopener noreferrer",class:"underline text-n-brand"},I(x.$t("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.LEARN_MORE.LINK_TEXT")),9,wK)]),_:1})]),m("div",$K,[S(te,{disabled:u.value,"is-loading":u.value,faded:"",slate:"",class:"w-full",onClick:_},{default:Y(()=>[xe(I(x.$t("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.SUBMIT_BUTTON")),1)]),_:1},8,["disabled","is-loading"])])]))]))}},LK={class:"overflow-auto col-span-6 p-6 w-full h-full"},DK={key:0},PK={class:"mb-10 text-left"},kK={class:"mb-2 text-lg font-medium text-n-slate-12"},BK={class:"text-sm leading-relaxed text-n-slate-11"},UK={class:"flex gap-6 justify-start"},FK={key:1},GK={class:"px-6 py-5 rounded-2xl border border-n-weak"},VK={key:0},HK={class:"pt-6 mt-6 border-t border-n-weak"},WK={__name:"Whatsapp",setup(e){const t=wt(),n=Ft(),{t:s}=be(),a={WHATSAPP:"whatsapp",TWILIO:"twilio",WHATSAPP_MANUAL:"whatsapp_manual",THREE_SIXTY_DIALOG:"360dialog"},o=y(()=>{var g;return((g=window.chatwootConfig)==null?void 0:g.whatsappAppId)&&window.chatwootConfig.whatsappAppId!=="none"}),i=y(()=>t.query.provider),l=y(()=>!i.value),r=y(()=>!!i.value),c=y(()=>[{key:a.WHATSAPP,title:s("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.WHATSAPP_CLOUD"),description:s("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.WHATSAPP_CLOUD_DESC"),icon:"i-woot-whatsapp"},{key:a.TWILIO,title:s("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.TWILIO"),description:s("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.TWILIO_DESC"),icon:"i-woot-twilio"}]),u=g=>{n.push({name:t.name,params:t.params,query:{provider:g}})},d=g=>g===a.WHATSAPP_MANUAL||g===a.WHATSAPP&&!o.value,h=()=>{u(a.WHATSAPP_MANUAL)};return(g,f)=>(p(),E("div",LK,[l.value?(p(),E("div",DK,[m("div",PK,[m("h1",kK,I(g.$t("INBOX_MGMT.ADD.WHATSAPP.SELECT_PROVIDER.TITLE")),1),m("p",BK,I(g.$t("INBOX_MGMT.ADD.WHATSAPP.SELECT_PROVIDER.DESCRIPTION")),1)]),m("div",UK,[(p(!0),E(ue,null,Ae(c.value,b=>(p(),L(p_,{key:b.key,title:b.title,description:b.description,icon:b.icon,onClick:A=>u(b.key)},null,8,["title","description","icon","onClick"]))),128))])])):r.value?(p(),E("div",FK,[m("div",GK,[o.value&&i.value===a.WHATSAPP?(p(),E("div",VK,[S(MK),m("div",HK,[S(C(mS),{keypath:"INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.MANUAL_FALLBACK",tag:"p",class:"text-sm text-n-slate-11"},{link:Y(()=>[m("a",{href:"#",class:"underline text-n-brand",onClick:Ve(h,["prevent"])},I(g.$t("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.MANUAL_LINK_TEXT")),1)]),_:1})])])):d(i.value)?(p(),L(nb,{key:1})):i.value===a.TWILIO?(p(),L(wA,{key:2,type:"whatsapp"})):i.value===a.THREE_SIXTY_DIALOG?(p(),L(tK,{key:3})):(p(),L(nb,{key:4}))])])):$("",!0)]))}},zK={components:{PageHeader:Xs,NextButton:te},setup(){return{v$:bt()}},data(){return{channelName:"",lineChannelId:"",lineChannelSecret:"",lineChannelToken:""}},computed:{...mt({uiFlags:"inboxes/getUIFlags"})},validations:{channelName:{required:Ye},lineChannelId:{required:Ye},lineChannelSecret:{required:Ye},lineChannelToken:{required:Ye}},methods:{async createChannel(){var e;if(this.v$.$touch(),!this.v$.$invalid)try{const t=await this.$store.dispatch("inboxes/createChannel",{name:(e=this.channelName)==null?void 0:e.trim(),channel:{type:"line",line_channel_id:this.lineChannelId,line_channel_secret:this.lineChannelSecret,line_channel_token:this.lineChannelToken}});ps.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:t.id}})}catch{ne(this.$t("INBOX_MGMT.ADD.LINE_CHANNEL.API.ERROR_MESSAGE"))}}}},YK={class:"h-full w-full p-6 col-span-6"},jK={class:"flex-shrink-0 flex-grow-0"},KK=["placeholder"],XK={key:0,class:"message"},qK={class:"flex-shrink-0 flex-grow-0"},ZK=["placeholder"],QK={class:"flex-shrink-0 flex-grow-0"},JK=["placeholder"],eX={class:"flex-shrink-0 flex-grow-0"},tX=["placeholder"],nX={class:"w-full mt-4"};function sX(e,t,n,s,a,o){const i=W("PageHeader"),l=W("NextButton");return p(),E("div",YK,[S(i,{"header-title":e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.DESC")},null,8,["header-title","header-content"]),m("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[8]||(t[8]=Ve(r=>o.createChannel(),["prevent"]))},[m("div",jK,[m("label",{class:ae({error:s.v$.channelName.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.CHANNEL_NAME.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>a.channelName=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.CHANNEL_NAME.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...r)=>s.v$.channelName.$touch&&s.v$.channelName.$touch(...r))},null,40,KK),[[gt,a.channelName]]),s.v$.channelName.$error?(p(),E("span",XK,I(e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.CHANNEL_NAME.ERROR")),1)):$("",!0)],2)]),m("div",qK,[m("label",{class:ae({error:s.v$.lineChannelId.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_ID.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>a.lineChannelId=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_ID.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...r)=>s.v$.lineChannelId.$touch&&s.v$.lineChannelId.$touch(...r))},null,40,ZK),[[gt,a.lineChannelId]])],2)]),m("div",QK,[m("label",{class:ae({error:s.v$.lineChannelSecret.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_SECRET.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>a.lineChannelSecret=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_SECRET.PLACEHOLDER"),onBlur:t[5]||(t[5]=(...r)=>s.v$.lineChannelSecret.$touch&&s.v$.lineChannelSecret.$touch(...r))},null,40,JK),[[gt,a.lineChannelSecret]])],2)]),m("div",eX,[m("label",{class:ae({error:s.v$.lineChannelToken.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_TOKEN.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>a.lineChannelToken=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.LINE_CHANNEL_TOKEN.PLACEHOLDER"),onBlur:t[7]||(t[7]=(...r)=>s.v$.lineChannelToken.$touch&&s.v$.lineChannelToken.$touch(...r))},null,40,tX),[[gt,a.lineChannelToken]])],2)]),m("div",nX,[S(l,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)])}const aX=De(zK,[["render",sX]]),oX={components:{PageHeader:Xs,NextButton:te},setup(){return{v$:bt()}},data(){return{botToken:""}},computed:{...mt({uiFlags:"inboxes/getUIFlags"})},validations:{botToken:{required:Ye}},methods:{async createChannel(){if(this.v$.$touch(),!this.v$.$invalid)try{const e=await this.$store.dispatch("inboxes/createChannel",{channel:{type:"telegram",bot_token:this.botToken}});ps.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:e.id}})}catch(e){ne(e.message||this.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.API.ERROR_MESSAGE"))}}}},iX={class:"h-full w-full p-6 col-span-6"},lX={class:"flex-shrink-0 flex-grow-0"},rX=["placeholder"],cX={class:"help-text"},uX={class:"w-full mt-4"};function dX(e,t,n,s,a,o){const i=W("PageHeader"),l=W("NextButton");return p(),E("div",iX,[S(i,{"header-title":e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.DESC")},null,8,["header-title","header-content"]),m("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[2]||(t[2]=Ve(r=>o.createChannel(),["prevent"]))},[m("div",lX,[m("label",{class:ae({error:s.v$.botToken.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.BOT_TOKEN.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>a.botToken=r),type:"text",placeholder:e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.BOT_TOKEN.PLACEHOLDER"),onBlur:t[1]||(t[1]=(...r)=>s.v$.botToken.$touch&&s.v$.botToken.$touch(...r))},null,40,rX),[[gt,a.botToken]])],2),m("p",cX,I(e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.BOT_TOKEN.SUBTITLE")),1)]),m("div",uX,[S(l,{"is-loading":e.uiFlags.isCreating,type:"submit",solid:"",blue:"",label:e.$t("INBOX_MGMT.ADD.TELEGRAM_CHANNEL.SUBMIT_BUTTON")},null,8,["is-loading","label"])])],32)])}const pX=De(oX,[["render",dX]]);class mX extends Ea{constructor(){super("instagram",{accountScoped:!0})}generateAuthorization(t){return axios.post(`${this.url}/authorization`,t)}}const PA=new mX,hX={setup(){const{accountId:e}=ln();return{accountId:e,v$:bt()}},data(){return{isCreating:!1,hasError:!1,errorStateMessage:"",errorStateDescription:"",isRequestingAuthorization:!1}},mounted(){const e=new URLSearchParams(window.location.search),t=e.get("code"),n=e.get("error_message");n&&(this.hasError=!0,t==="400"?(this.errorStateMessage=n,this.errorStateDescription=this.$t("INBOX_MGMT.ADD.INSTAGRAM.ERROR_AUTH")):(this.errorStateMessage=this.$t("INBOX_MGMT.ADD.INSTAGRAM.ERROR_MESSAGE"),this.errorStateDescription=n));const s=window.location.pathname;window.history.replaceState({},document.title,s)},methods:{async requestAuthorization(){this.isRequestingAuthorization=!0;const e=await PA.generateAuthorization(),{data:{url:t}}=e;window.location.href=t}}},fX={class:"h-full p-6 w-full max-w-full flex-shrink-0 flex-grow-0"},gX={class:"flex flex-col items-center justify-start h-full text-center"},_X={key:0,class:"max-w-lg mx-auto text-center"},vX={key:0},EX={key:1,class:"flex flex-col items-center justify-center px-8 py-10 text-center rounded-2xl outline outline-1 outline-n-weak"},bX={class:"text-2xl font-medium"},TX={class:"py-6 text-sm text-n-slate-11"},SX=["disabled"],AX={class:"text-base font-medium"},yX={key:0,class:"ml-2"};function IX(e,t,n,s,a,o){const i=Qe("dompurify-html");return p(),E("div",fX,[m("div",gX,[a.hasError?(p(),E("div",_X,[m("h5",null,I(a.errorStateMessage),1),a.errorStateDescription?re((p(),E("p",vX,null,512)),[[i,a.errorStateDescription]]):$("",!0)])):(p(),E("div",EX,[m("h6",bX,I(e.$t("INBOX_MGMT.ADD.INSTAGRAM.CONNECT_YOUR_INSTAGRAM_PROFILE")),1),m("p",TX,I(e.$t("INBOX_MGMT.ADD.INSTAGRAM.HELP")),1),m("button",{class:"flex items-center justify-center px-8 py-3.5 gap-2 text-white rounded-full bg-gradient-to-r from-[#833AB4] via-[#FD1D1D] to-[#FCAF45] hover:shadow-lg transition-all duration-300 min-w-[240px] overflow-hidden",disabled:a.isRequestingAuthorization,onClick:t[0]||(t[0]=l=>o.requestAuthorization())},[t[2]||(t[2]=m("span",{class:"i-ri-instagram-line size-5"},null,-1)),m("span",AX,I(e.$t("INBOX_MGMT.ADD.INSTAGRAM.CONTINUE_WITH_INSTAGRAM")),1),a.isRequestingAuthorization?(p(),E("span",yX,t[1]||(t[1]=[m("svg",{class:"w-5 h-5 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[m("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),m("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):$("",!0)],8,SX)]))])])}const CX=De(hX,[["render",IX]]),NX={class:"overflow-auto col-span-6 p-6 w-full h-full"},OX={__name:"Voice",setup(e){const{t}=be(),n=rt(),s=Ft(),a=gn({phoneNumber:"",accountSid:"",authToken:"",apiKeySid:"",apiKeySecret:""}),o=_e("inboxes/getUIFlags"),l=bt({phoneNumber:{required:Ye,isPhoneE164:lO},accountSid:{required:Ye},authToken:{required:Ye},apiKeySid:{required:Ye},apiKeySecret:{required:Ye}},a),r=y(()=>l.value.$invalid),c=y(()=>{var h,g,f,b,A;return{phoneNumber:(h=l.value.phoneNumber)!=null&&h.$error?t("INBOX_MGMT.ADD.VOICE.PHONE_NUMBER.ERROR"):"",accountSid:(g=l.value.accountSid)!=null&&g.$error?t("INBOX_MGMT.ADD.VOICE.TWILIO.ACCOUNT_SID.REQUIRED"):"",authToken:(f=l.value.authToken)!=null&&f.$error?t("INBOX_MGMT.ADD.VOICE.TWILIO.AUTH_TOKEN.REQUIRED"):"",apiKeySid:(b=l.value.apiKeySid)!=null&&b.$error?t("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SID.REQUIRED"):"",apiKeySecret:(A=l.value.apiKeySecret)!=null&&A.$error?t("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SECRET.REQUIRED"):""}});function u(){return{account_sid:a.accountSid,auth_token:a.authToken,api_key_sid:a.apiKeySid,api_key_secret:a.apiKeySecret}}async function d(){var g,f;if(await l.value.$validate())try{const b=await n.dispatch("inboxes/createVoiceChannel",{name:`Voice (${a.phoneNumber})`,voice:{phone_number:a.phoneNumber,provider:"twilio",provider_config:u()}});s.replace({name:"settings_inboxes_add_agents",params:{page:"new",inbox_id:b.id}})}catch(b){ne(((f=(g=b.response)==null?void 0:g.data)==null?void 0:f.message)||t("INBOX_MGMT.ADD.VOICE.API.ERROR_MESSAGE"))}}return(h,g)=>{var f,b,A,v,T;return p(),E("div",NX,[S(Xs,{"header-title":C(t)("INBOX_MGMT.ADD.VOICE.TITLE"),"header-content":C(t)("INBOX_MGMT.ADD.VOICE.DESC")},null,8,["header-title","header-content"]),m("form",{class:"flex flex-col gap-4 flex-wrap mx-0",onSubmit:Ve(d,["prevent"])},[S(Tt,{modelValue:a.phoneNumber,"onUpdate:modelValue":g[0]||(g[0]=_=>a.phoneNumber=_),label:C(t)("INBOX_MGMT.ADD.VOICE.PHONE_NUMBER.LABEL"),placeholder:C(t)("INBOX_MGMT.ADD.VOICE.PHONE_NUMBER.PLACEHOLDER"),message:c.value.phoneNumber,"message-type":c.value.phoneNumber?"error":"info",onBlur:(f=C(l).phoneNumber)==null?void 0:f.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),S(Tt,{modelValue:a.accountSid,"onUpdate:modelValue":g[1]||(g[1]=_=>a.accountSid=_),label:C(t)("INBOX_MGMT.ADD.VOICE.TWILIO.ACCOUNT_SID.LABEL"),placeholder:C(t)("INBOX_MGMT.ADD.VOICE.TWILIO.ACCOUNT_SID.PLACEHOLDER"),message:c.value.accountSid,"message-type":c.value.accountSid?"error":"info",onBlur:(b=C(l).accountSid)==null?void 0:b.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),S(Tt,{modelValue:a.authToken,"onUpdate:modelValue":g[2]||(g[2]=_=>a.authToken=_),type:"password",label:C(t)("INBOX_MGMT.ADD.VOICE.TWILIO.AUTH_TOKEN.LABEL"),placeholder:C(t)("INBOX_MGMT.ADD.VOICE.TWILIO.AUTH_TOKEN.PLACEHOLDER"),message:c.value.authToken,"message-type":c.value.authToken?"error":"info",onBlur:(A=C(l).authToken)==null?void 0:A.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),S(Tt,{modelValue:a.apiKeySid,"onUpdate:modelValue":g[3]||(g[3]=_=>a.apiKeySid=_),label:C(t)("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SID.LABEL"),placeholder:C(t)("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SID.PLACEHOLDER"),message:c.value.apiKeySid,"message-type":c.value.apiKeySid?"error":"info",onBlur:(v=C(l).apiKeySid)==null?void 0:v.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),S(Tt,{modelValue:a.apiKeySecret,"onUpdate:modelValue":g[4]||(g[4]=_=>a.apiKeySecret=_),type:"password",label:C(t)("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SECRET.LABEL"),placeholder:C(t)("INBOX_MGMT.ADD.VOICE.TWILIO.API_KEY_SECRET.PLACEHOLDER"),message:c.value.apiKeySecret,"message-type":c.value.apiKeySecret?"error":"info",onBlur:(T=C(l).apiKeySecret)==null?void 0:T.$touch},null,8,["modelValue","label","placeholder","message","message-type","onBlur"]),m("div",null,[S(te,{"is-loading":C(o).isCreating,disabled:r.value,label:C(t)("INBOX_MGMT.ADD.VOICE.SUBMIT_BUTTON"),type:"submit"},null,8,["is-loading","disabled","label"])])],32)])}}},RX={facebook:Oz,website:Zz,twitter:aY,api:gY,email:GY,sms:Vj,whatsapp:WK,line:aX,telegram:pX,instagram:CX,voice:OX},xX=Jo({name:"NewChannelView",props:{channelName:{type:String,required:!0}},render(){const e=RX[this.channelName];return e?On(e):null}}),wX={components:{BackButton:Rr},props:{headerTitle:{default:"",type:String},icon:{default:"",type:String},showBackButton:{type:Boolean,default:!1},backUrl:{type:[String,Object],default:""},backButtonLabel:{type:String,default:""}},setup(){const{isAdmin:e}=za();return{isAdmin:e}},computed:{iconClass(){return`icon ${this.icon} header--icon`}}},$X={class:"flex justify-between items-center h-20 min-h-[3.5rem] px-4 py-2 bg-n-background"},MX={class:"flex items-center mb-0 text-2xl text-n-slate-12"},LX={class:"text-xl font-medium text-n-slate-12"};function DX(e,t,n,s,a,o){const i=W("BackButton");return p(),E("div",$X,[m("h1",MX,[n.showBackButton?(p(),L(i,{key:0,"button-label":n.backButtonLabel,"back-url":n.backUrl,class:"ml-2 mr-4"},null,8,["button-label","back-url"])):$("",!0),We(e.$slots,"default"),m("span",LX,I(n.headerTitle),1)])])}const PX=De(wX,[["render",DX]]),kX={class:"flex flex-1 flex-col m-0 bg-n-background overflow-auto"},au={__name:"Wrapper",props:{headerTitle:{type:String,default:""},icon:{type:String,default:""},keepAlive:{type:Boolean,default:!0},showBackButton:{type:Boolean,default:!1},backUrl:{type:[String,Object],default:""},fullWidth:{type:Boolean,default:!1}},setup(e){const t=e,{t:n}=be(),s=y(()=>t.headerTitle||t.icon||t.showBackButton);return(a,o)=>{const i=W("router-view");return p(),E("div",kX,[m("div",{class:ae(["mx-auto w-full flex flex-col flex-1",{"max-w-6xl":!e.fullWidth}])},[s.value?(p(),L(PX,{key:0,icon:e.icon,"header-title":C(n)(e.headerTitle),"show-back-button":e.showBackButton,"back-url":e.backUrl,class:ae(["sticky top-0 z-20",{"max-w-6xl w-full mx-auto":e.fullWidth}])},null,8,["icon","header-title","show-back-button","back-url","class"])):$("",!0),S(i,{class:"px-5 flex-1 overflow-hidden"},{default:Y(({Component:l})=>[e.keepAlive?(p(),L(Qd,{key:1},[(p(),L(ds(l),{key:a.$route.fullPath}))],1024)):(p(),L(ds(l),{key:a.$route.fullPath}))]),_:1})],2)])}}},BX={__name:"ChannelName",props:{channelType:{type:String,required:!0},medium:{type:String,default:""}},setup(e){const t=e,n=pn(),{t:s}=be(),a=y(()=>n["globalConfig/get"].value),o={"Channel::FacebookPage":"MESSENGER","Channel::WebWidget":"WEB_WIDGET","Channel::TwitterProfile":"TWITTER_PROFILE","Channel::TwilioSms":"TWILIO_SMS","Channel::Whatsapp":"WHATSAPP","Channel::Sms":"SMS","Channel::Email":"EMAIL","Channel::Telegram":"TELEGRAM","Channel::Line":"LINE","Channel::Api":"API","Channel::Instagram":"INSTAGRAM","Channel::Voice":"VOICE"},i=()=>t.medium==="whatsapp"?s("INBOX_MGMT.CHANNELS.WHATSAPP"):s("INBOX_MGMT.CHANNELS.TWILIO_SMS"),l=y(()=>t.channelType==="Channel::Api"?a.value.apiChannelName||s("INBOX_MGMT.CHANNELS.API"):t.channelType==="Channel::TwilioSms"?i():s(`INBOX_MGMT.CHANNELS.${o[t.channelType]}`));return(r,c)=>(p(),E("span",null,I(l.value),1))}},UX={class:"min-w-full overflow-x-auto"},FX={class:"divide-y divide-n-weak flex-1 text-n-slate-12"},GX={class:"py-4 ltr:pr-4 rtl:pl-4"},VX={class:"flex items-center flex-row gap-4"},HX={key:0,class:"bg-n-alpha-3 rounded-full size-12 p-2 ring ring-n-solid-1 border border-n-strong shadow-sm"},WX={key:1,class:"size-12 flex justify-center items-center bg-n-alpha-3 rounded-full p-2 ring ring-n-solid-1 border border-n-strong shadow-sm"},zX={class:"block font-medium capitalize"},YX={class:"py-4"},jX={class:"flex gap-1 justify-end"},KX={__name:"Index",setup(e){const t=pn(),n=rt(),{t:s}=be(),{isAdmin:a}=za(),o=j(!1),i=j({}),l=_e("inboxes/getInboxes"),r=y(()=>{var T;return(T=l.value)==null?void 0:T.slice().sort((_,N)=>_.name.localeCompare(N.name))}),c=y(()=>t["inboxes/getUIFlags"].value),u=y(()=>`${s("INBOX_MGMT.DELETE.CONFIRM.YES")} ${i.value.name}`),d=y(()=>`${s("INBOX_MGMT.DELETE.CONFIRM.NO")} ${i.value.name}`),h=y(()=>`${s("INBOX_MGMT.DELETE.CONFIRM.MESSAGE")} ${i.value.name}?`),g=y(()=>`${s("INBOX_MGMT.DELETE.CONFIRM.PLACE_HOLDER",{inboxName:i.value.name})}`),f=async({id:T})=>{try{await n.dispatch("inboxes/delete",T),ne(s("INBOX_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch{ne(s("INBOX_MGMT.DELETE.API.ERROR_MESSAGE"))}},b=()=>{o.value=!1,i.value={}},A=()=>{f(i.value),b()},v=T=>{o.value=!0,i.value=T};return(T,_)=>{const N=W("router-link"),R=W("woot-confirm-delete-modal"),O=Qe("tooltip");return p(),L(Es,{"no-records-found":!r.value.length,"no-records-message":T.$t("INBOX_MGMT.LIST.404"),"is-loading":c.value.isFetching},{header:Y(()=>[S(hs,{title:T.$t("INBOX_MGMT.HEADER"),description:T.$t("INBOX_MGMT.DESCRIPTION"),"link-text":T.$t("INBOX_MGMT.LEARN_MORE"),"feature-name":"inboxes"},{actions:Y(()=>[C(a)?(p(),L(N,{key:0,to:{name:"settings_inbox_new"}},{default:Y(()=>[S(te,{icon:"i-lucide-circle-plus",label:T.$t("SETTINGS.INBOXES.NEW_INBOX")},null,8,["label"])]),_:1})):$("",!0)]),_:1},8,["title","description","link-text"])]),body:Y(()=>[m("table",UX,[m("tbody",FX,[(p(!0),E(ue,null,Ae(r.value,x=>(p(),E("tr",{key:x.id},[m("td",GX,[m("div",VX,[x.avatar_url?(p(),E("div",HX,[S(kt,{src:x.avatar_url,name:x.name,size:30,"rounded-full":""},null,8,["src","name"])])):(p(),E("div",WX,[S(hg,{class:"size-5 text-n-slate-10",inbox:x},null,8,["inbox"])])),m("div",null,[m("span",zX,I(x.name),1),S(BX,{"channel-type":x.channel_type,medium:x.medium},null,8,["channel-type","medium"])])])]),m("td",YX,[m("div",jX,[S(N,{to:{name:"settings_inbox_show",params:{inboxId:x.id}}},{default:Y(()=>[C(a)?re((p(),L(te,{key:0,icon:"i-lucide-settings",slate:"",xs:"",faded:""},null,512)),[[O,T.$t("INBOX_MGMT.SETTINGS"),void 0,{top:!0}]]):$("",!0)]),_:2},1032,["to"]),C(a)?re((p(),L(te,{key:0,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:w=>v(x)},null,8,["onClick"])),[[O,T.$t("INBOX_MGMT.DELETE.BUTTON_TEXT"),void 0,{top:!0}]]):$("",!0)])])]))),128))])])]),default:Y(()=>[o.value?(p(),L(R,{key:0,show:o.value,"onUpdate:show":_[0]||(_[0]=x=>o.value=x),title:T.$t("INBOX_MGMT.DELETE.CONFIRM.TITLE"),message:h.value,"confirm-text":u.value,"reject-text":d.value,"confirm-value":i.value.name,"confirm-place-holder-text":g.value,onOnConfirm:A,onOnClose:b},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):$("",!0)]),_:1},8,["no-records-found","no-records-message","is-loading"])}}},XX={props:{headerTitle:{type:String,default:""},headerContent:{type:String,default:""}}},qX={class:"border-b border-solid border-n-weak/60"},ZX={class:"max-w-6xl w-full mx-auto pt-4 pb-0 px-8"},QX={class:"text-2xl text-n-slate-12 mb-1 font-medium"},JX={key:0,class:"w-full text-n-slate-11 text-sm mb-2"};function eq(e,t,n,s,a,o){return p(),E("div",qX,[m("div",ZX,[m("h2",QX,I(n.headerTitle),1),n.headerContent?(p(),E("p",JX,I(n.headerContent),1)):$("",!0),We(e.$slots,"default")])])}const tq=De(XX,[["render",eq]]),nq={props:{title:{type:String,default:""},subTitle:{type:String,default:""},showBorder:{type:Boolean,default:!0},note:{type:String,default:""}}},sq={class:"grid grid-cols-1 lg:grid-cols-8 gap-6"},aq={class:"col-span-2"},oq={key:0,class:"text-base text-n-brand mb-0 font-medium"},iq={class:"text-sm mb-2 text-n-slate-11 leading-5 tracking-normal mt-2"},lq={key:1},rq={class:"font-semibold"},cq={class:"col-span-6 xl:col-span-5"};function uq(e,t,n,s,a,o){return p(),E("div",{class:ae(["ml-0 mr-0 py-8 w-full",{"border-b border-solid border-n-weak/60 dark:border-n-weak":n.showBorder}])},[m("div",sq,[m("div",aq,[n.title?(p(),E("p",oq,I(n.title),1)):$("",!0),m("p",iq,[n.subTitle?We(e.$slots,"subTitle",{key:0},()=>[xe(I(n.subTitle),1)]):$("",!0)]),n.note?(p(),E("p",lq,[m("span",rq,I(e.$t("INBOX_MGMT.NOTE")),1),xe(" "+I(n.note),1)])):$("",!0)]),m("div",cq,[We(e.$slots,"default")])])],2)}const yl=De(nq,[["render",uq]]),zc={REPLY_TO:"replyTo",REPLY_TO_OUTGOING:"replyToOutgoing"},dq={[zc.REPLY_TO]:[St.FB,St.WEB,St.TWITTER,St.WHATSAPP,St.TELEGRAM,St.API],[zc.REPLY_TO_OUTGOING]:[St.WEB,St.TWITTER,St.WHATSAPP,St.TELEGRAM,St.API]},wr={computed:{channelType(){return this.inbox.channel_type},whatsAppAPIProvider(){return this.inbox.provider||""},isAMicrosoftInbox(){return this.isAnEmailChannel&&this.inbox.provider==="microsoft"},isAGoogleInbox(){return this.isAnEmailChannel&&this.inbox.provider==="google"},isAPIInbox(){return this.channelType===St.API},isATwitterInbox(){return this.channelType===St.TWITTER},isAFacebookInbox(){return this.channelType===St.FB},isAWebWidgetInbox(){return this.channelType===St.WEB},isATwilioChannel(){return this.channelType===St.TWILIO},isALineChannel(){return this.channelType===St.LINE},isAVoiceChannel(){return this.channelType===St.VOICE},isAnEmailChannel(){return this.channelType===St.EMAIL},isATelegramChannel(){return this.channelType===St.TELEGRAM},isATwilioSMSChannel(){const{medium:e=""}=this.inbox;return this.isATwilioChannel&&e==="sms"},isASmsInbox(){return this.channelType===St.SMS||this.isATwilioSMSChannel},isATwilioWhatsAppChannel(){const{medium:e=""}=this.inbox;return this.isATwilioChannel&&e==="whatsapp"},isAWhatsAppCloudChannel(){return this.channelType===St.WHATSAPP&&this.whatsAppAPIProvider==="whatsapp_cloud"},is360DialogWhatsAppChannel(){return this.channelType===St.WHATSAPP&&this.whatsAppAPIProvider==="default"},chatAdditionalAttributes(){const{additional_attributes:e}=this.chat||{};return e||{}},isTwitterInboxTweet(){return this.chatAdditionalAttributes.type==="tweet"},twilioBadge(){return`${this.isATwilioSMSChannel?"sms":"whatsapp"}`},twitterBadge(){return`${this.isTwitterInboxTweet?"twitter-tweet":"twitter-dm"}`},facebookBadge(){return this.chatAdditionalAttributes.type||"facebook"},inboxBadge(){let e="";return this.isATwitterInbox?e=this.twitterBadge:this.isAFacebookInbox?e=this.facebookBadge:this.isATwilioChannel?e=this.twilioBadge:this.isAWhatsAppChannel&&(e="whatsapp"),e||this.channelType},isAWhatsAppChannel(){return this.channelType===St.WHATSAPP||this.isATwilioWhatsAppChannel},isAnInstagramChannel(){return this.channelType===St.INSTAGRAM}},methods:{inboxHasFeature(e){var t;return((t=dq[e])==null?void 0:t.includes(this.channelType))??!1}}},ou={__name:"Banner",props:{color:{type:String,default:"slate",validator:e=>["blue","ruby","amber","slate","teal"].includes(e)},actionLabel:{type:String,default:null}},emits:["action"],setup(e,{emit:t}){const n=e,s=t,a=y(()=>({slate:"bg-n-slate-3 border-n-slate-4 text-n-slate-11",amber:"bg-n-amber-3 border-n-amber-4 text-n-amber-11",teal:"bg-n-teal-3 border-n-teal-4 text-n-teal-11",ruby:"bg-n-ruby-3 border-n-ruby-4 text-n-ruby-11",blue:"bg-n-blue-3 border-n-blue-4 text-n-blue-11"})[n.color]),o=y(()=>({slate:"bg-n-slate-4 hover:bg-n-slate-5 text-n-slate-11",amber:"bg-n-amber-4 hover:bg-n-amber-5 text-n-amber-11",teal:"bg-n-teal-4 hover:bg-n-teal-5 text-n-teal-11",ruby:"bg-n-ruby-4 hover:bg-n-ruby-5 text-n-ruby-11",blue:"bg-n-blue-4 hover:bg-n-blue-5 text-n-blue-11"})[n.color]),i=()=>{s("action")};return(l,r)=>(p(),E("div",{class:ae(["text-sm rounded-xl flex items-center justify-between gap-2 border",[a.value,{"py-2 px-3":!e.actionLabel,"pl-3 p-2":e.actionLabel}]])},[m("div",null,[We(l.$slots,"default")]),m("div",null,[e.actionLabel?(p(),E("button",{key:0,class:ae(["px-3 py-1 w-auto grid place-content-center rounded-lg",o.value]),onClick:i},I(e.actionLabel),3)):$("",!0)])],2))}},iu={__name:"InboxReconnectionRequired",props:{actionLabel:{type:String,default:null},description:{type:String,default:null}},emits:["reauthorize"],setup(e,{emit:t}){const n=t;return(s,a)=>(p(),L(ou,{color:"ruby","action-label":e.actionLabel||s.$t("INBOX_MGMT.CLICK_TO_RECONNECT"),onAction:a[0]||(a[0]=o=>n("reauthorize"))},{default:Y(()=>[xe(I(e.description||s.$t("INBOX_MGMT.RECONNECTION_REQUIRED")),1)]),_:1},8,["action-label"]))}},pq={components:{InboxReconnectionRequired:iu},props:{inbox:{type:Object,required:!0}},computed:{inboxId(){return this.inbox.id}},mounted(){window.fbAsyncInit=this.runFBInit},methods:{runFBInit(){FB.init({appId:window.chatwootConfig.fbAppId,xfbml:!0,version:window.chatwootConfig.fbApiVersion,status:!0}),window.fbSDKLoaded=!0,FB.AppEvents.logPageView()},async loadFBsdk(){return d_("https://connect.facebook.net/en_US/sdk.js",{id:"facebook-jssdk"})},async startLogin(){this.hasLoginStarted=!0;try{await this.loadFBsdk(),this.runFBInit(),this.tryFBlogin()}catch(e){e.name==="ScriptLoaderError"?ne(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_LOADING")):(gg(e),ne(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH")))}},tryFBlogin(){FB.login(e=>{e.status==="connected"?this.reauthorizeFBPage(e.authResponse.accessToken):e.status==="not_authorized"?ne(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH")):ne(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH"))},{scope:"pages_manage_metadata,business_management,pages_messaging,instagram_basic,pages_show_list,pages_read_engagement,instagram_manage_messages",auth_type:"reauthorize"})},async reauthorizeFBPage(e){try{await this.$store.dispatch("inboxes/reauthorizeFacebookPage",{omniauthToken:e,inboxId:this.inboxId}),ne(this.$t("INBOX_MGMT.FACEBOOK_REAUTHORIZE.MESSAGE_SUCCESS"))}catch{ne(this.$t("INBOX_MGMT.FACEBOOK_REAUTHORIZE.MESSAGE_ERROR"))}}}};function mq(e,t,n,s,a,o){const i=W("InboxReconnectionRequired");return p(),L(i,{class:"mx-8 mt-5",onReauthorize:o.startLogin},null,8,["onReauthorize"])}const hq=De(pq,[["render",mq],["__scopeId","data-v-f74239b8"]]),fq={__name:"Reauthorize",setup(e){const{t}=be(),n=j(!1);async function s(){try{n.value=!0;const a=await PA.generateAuthorization(),{data:{url:o}}=a;window.location.href=o}catch{ne(t("INBOX_MGMT.ADD.INSTAGRAM.ERROR_AUTH"))}finally{n.value=!1}}return(a,o)=>(p(),L(iu,{class:"mx-8 mt-5",onReauthorize:s}))}},gq={class:"flex items-center gap-2"},kA={__name:"DuplicateInboxBanner",props:{content:{type:String,default:""}},setup(e){return(t,n)=>(p(),L(ou,{color:"amber"},{default:Y(()=>[m("div",gq,[S(dt,{icon:"i-lucide-info",class:"flex-shrink-0 size-4"}),m("span",null,I(e.content),1)])]),_:1}))}},_q={__name:"Reauthorize",props:{inbox:{type:Object,default:()=>({})}},setup(e){const t=e,{t:n}=be(),s=j(!1);async function a(){try{s.value=!0;const o=await OA.generateAuthorization({email:t.inbox.email}),{data:{url:i}}=o;window.location.href=i}catch{ne(n("INBOX_MGMT.ADD.MICROSOFT.ERROR_MESSAGE"))}finally{s.value=!1}}return(o,i)=>(p(),L(iu,{class:"mx-8 mt-5",onReauthorize:a}))}},vq={__name:"Reauthorize",props:{inbox:{type:Object,default:()=>({})}},setup(e){const t=e,{t:n}=be(),s=j(!1),a=y(()=>t.inbox.imap_login&&t.inbox.imap_enabled?t.inbox.imap_login:t.inbox.email);async function o(){try{s.value=!0;const i=await RA.generateAuthorization({email:a.value}),{data:{url:l}}=i;window.location.href=l}catch{ne(n("INBOX_MGMT.ADD.GOOGLE.ERROR_MESSAGE"))}finally{s.value=!1}}return(i,l)=>(p(),L(iu,{class:"mx-8 mt-5",onReauthorize:o}))}},BA={__name:"Reauthorize",props:{inbox:{type:Object,required:!0},whatsappRegistrationIncomplete:{type:Boolean,default:!1}},setup(e,{expose:t}){const n=e,{t:s}=be(),a=j(!1),o=j(!0),i=y(()=>window.chatwootConfig.whatsappAppId),l=y(()=>window.chatwootConfig.whatsappConfigurationId),r=y(()=>n.whatsappRegistrationIncomplete?s("INBOX_MGMT.COMPLETE_REGISTRATION"):""),c=y(()=>n.whatsappRegistrationIncomplete?s("INBOX_MGMT.WHATSAPP_REGISTRATION_INCOMPLETE"):""),u=async b=>{a.value=!0;try{const A=await yO.reauthorizeWhatsApp({inboxId:n.inbox.id,...b});A.data.success?ne(s("INBOX.REAUTHORIZE.SUCCESS")):ne(A.data.message||s("INBOX.REAUTHORIZE.ERROR"))}catch(A){ne(A.message||s("INBOX.REAUTHORIZE.ERROR"))}finally{a.value=!1}},d=async(b,A)=>{if(!(!b||typeof b!="object"))if(b.event==="FINISH"){const v=b.data;$A(v)&&v.phone_number_id?await u({code:A,business_id:v.business_id,waba_id:v.waba_id,phone_number_id:v.phone_number_id}):ne(s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.INVALID_BUSINESS_DATA"))}else b.event==="CANCEL"?(a.value=!1,ne(s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.CANCELLED"))):b.event==="error"&&(a.value=!1,ne(b.error_message||s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.SIGNUP_ERROR")))},h=b=>{const A=MA(v=>d(v,b));window.addEventListener("message",A)},g=async()=>{if(!i.value)throw new Error("WhatsApp App ID is required");if(!l.value)throw new Error("WhatsApp Configuration ID is required");try{const b=await LA(l.value),A=n.inbox.provider_config;A&&A.business_account_id&&A.phone_number_id?await u({code:b,business_id:A.business_account_id,waba_id:A.business_account_id,phone_number_id:A.phone_number_id}):h(b)}catch(b){throw b.message==="Login cancelled"?ne(s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.CANCELLED")):ne(b.message||s("INBOX_MGMT.ADD.WHATSAPP.EMBEDDED_SIGNUP.AUTH_NOT_COMPLETED")),b}},f=async()=>{if(o.value){ne(s("INBOX.REAUTHORIZE.LOADING_FACEBOOK"));return}a.value=!0;try{await g()}catch(b){ne(b.message||s("INBOX.REAUTHORIZE.CONFIGURATION_ERROR"))}finally{(!window.FB||!window.FB.getLoginStatus)&&(a.value=!1)}};return lt(async()=>{var b;try{if(!i.value){ne(s("INBOX.REAUTHORIZE.WHATSAPP_APP_ID_MISSING"));return}if(!l.value){ne(s("INBOX.REAUTHORIZE.WHATSAPP_CONFIG_ID_MISSING"));return}await DA(i.value,(b=window.chatwootConfig)==null?void 0:b.whatsappApiVersion)}catch{ne(s("INBOX.REAUTHORIZE.FACEBOOK_LOAD_ERROR"))}finally{o.value=!1}}),t({requestAuthorization:f}),(b,A)=>(p(),L(iu,{class:"mx-8 mt-5","is-loading":a.value,"action-label":r.value,description:c.value,onReauthorize:f},null,8,["is-loading","action-label","description"]))}};class Eq extends Ea{constructor(){super("inboxes",{accountScoped:!0})}getHealthStatus(t){return axios.get(`${this.url}/${t}/health`)}}const bq=new Eq;var UA={exports:{}};/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function sb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function $o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sb(Object(n),!0).forEach(function(s){Tq(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sb(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function pd(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?pd=function(t){return typeof t}:pd=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pd(e)}function Tq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ga(){return Ga=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ga.apply(this,arguments)}function Sq(e,t){if(e==null)return{};var n={},s=Object.keys(e),a,o;for(o=0;o<s.length;o++)a=s[o],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Aq(e,t){if(e==null)return{};var n=Sq(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function yq(e){return Iq(e)||Cq(e)||Nq(e)||Oq()}function Iq(e){if(Array.isArray(e))return Df(e)}function Cq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Nq(e,t){if(e){if(typeof e=="string")return Df(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Df(e,t)}}function Df(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Oq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Rq="1.14.0";function jo(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var oi=jo(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),lu=jo(/Edge/i),ab=jo(/firefox/i),yc=jo(/safari/i)&&!jo(/chrome/i)&&!jo(/android/i),FA=jo(/iP(ad|od|hone)/i),xq=jo(/chrome/i)&&jo(/android/i),GA={capture:!1,passive:!1};function cn(e,t,n){e.addEventListener(t,n,!oi&&GA)}function on(e,t,n){e.removeEventListener(t,n,!oi&&GA)}function Fd(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function wq(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Ja(e,t,n,s){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Fd(e,t):Fd(e,t))||s&&e===n)return e;if(e===n)break}while(e=wq(e))}return null}var ob=/\s+/g;function Zn(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var s=(" "+e.className+" ").replace(ob," ").replace(" "+t+" "," ");e.className=(s+(n?" "+t:"")).replace(ob," ")}}function Rt(e,t,n){var s=e&&e.style;if(s){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in s)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),s[t]=n+(typeof n=="string"?"":"px")}}function pl(e,t){var n="";if(typeof e=="string")n=e;else do{var s=Rt(e,"transform");s&&s!=="none"&&(n=s+" "+n)}while(!t&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function VA(e,t,n){if(e){var s=e.getElementsByTagName(t),a=0,o=s.length;if(n)for(;a<o;a++)n(s[a],a);return s}return[]}function Oo(){var e=document.scrollingElement;return e||document.documentElement}function zn(e,t,n,s,a){if(!(!e.getBoundingClientRect&&e!==window)){var o,i,l,r,c,u,d;if(e!==window&&e.parentNode&&e!==Oo()?(o=e.getBoundingClientRect(),i=o.top,l=o.left,r=o.bottom,c=o.right,u=o.height,d=o.width):(i=0,l=0,r=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(a=a||e.parentNode,!oi))do if(a&&a.getBoundingClientRect&&(Rt(a,"transform")!=="none"||n&&Rt(a,"position")!=="static")){var h=a.getBoundingClientRect();i-=h.top+parseInt(Rt(a,"border-top-width")),l-=h.left+parseInt(Rt(a,"border-left-width")),r=i+o.height,c=l+o.width;break}while(a=a.parentNode);if(s&&e!==window){var g=pl(a||e),f=g&&g.a,b=g&&g.d;g&&(i/=b,l/=f,d/=f,u/=b,r=i+u,c=l+d)}return{top:i,left:l,bottom:r,right:c,width:d,height:u}}}function ib(e,t,n){for(var s=Si(e,!0),a=zn(e)[t];s;){var o=zn(s)[n],i=void 0;if(i=a>=o,!i)return s;if(s===Oo())break;s=Si(s,!1)}return!1}function gr(e,t,n,s){for(var a=0,o=0,i=e.children;o<i.length;){if(i[o].style.display!=="none"&&i[o]!==Ut.ghost&&(s||i[o]!==Ut.dragged)&&Ja(i[o],n.draggable,e,!1)){if(a===t)return i[o];a++}o++}return null}function m_(e,t){for(var n=e.lastElementChild;n&&(n===Ut.ghost||Rt(n,"display")==="none"||t&&!Fd(n,t));)n=n.previousElementSibling;return n||null}function os(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==Ut.clone&&(!t||Fd(e,t))&&n++;return n}function lb(e){var t=0,n=0,s=Oo();if(e)do{var a=pl(e),o=a.a,i=a.d;t+=e.scrollLeft*o,n+=e.scrollTop*i}while(e!==s&&(e=e.parentNode));return[t,n]}function $q(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var s in t)if(t.hasOwnProperty(s)&&t[s]===e[n][s])return Number(n)}return-1}function Si(e,t){if(!e||!e.getBoundingClientRect)return Oo();var n=e,s=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=Rt(n);if(n.clientWidth<n.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Oo();if(s||t)return n;s=!0}}while(n=n.parentNode);return Oo()}function Mq(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function mh(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Ic;function HA(e,t){return function(){if(!Ic){var n=arguments,s=this;n.length===1?e.call(s,n[0]):e.apply(s,n),Ic=setTimeout(function(){Ic=void 0},t)}}}function Lq(){clearTimeout(Ic),Ic=void 0}function WA(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function h_(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function rb(e,t){Rt(e,"position","absolute"),Rt(e,"top",t.top),Rt(e,"left",t.left),Rt(e,"width",t.width),Rt(e,"height",t.height)}function hh(e){Rt(e,"position",""),Rt(e,"top",""),Rt(e,"left",""),Rt(e,"width",""),Rt(e,"height","")}var Ws="Sortable"+new Date().getTime();function Dq(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var s=[].slice.call(this.el.children);s.forEach(function(a){if(!(Rt(a,"display")==="none"||a===Ut.ghost)){e.push({target:a,rect:zn(a)});var o=$o({},e[e.length-1].rect);if(a.thisAnimationDuration){var i=pl(a,!0);i&&(o.top-=i.f,o.left-=i.e)}a.fromRect=o}})}},addAnimationState:function(s){e.push(s)},removeAnimationState:function(s){e.splice($q(e,{target:s}),1)},animateAll:function(s){var a=this;if(!this.options.animation){clearTimeout(t),typeof s=="function"&&s();return}var o=!1,i=0;e.forEach(function(l){var r=0,c=l.target,u=c.fromRect,d=zn(c),h=c.prevFromRect,g=c.prevToRect,f=l.rect,b=pl(c,!0);b&&(d.top-=b.f,d.left-=b.e),c.toRect=d,c.thisAnimationDuration&&mh(h,d)&&!mh(u,d)&&(f.top-d.top)/(f.left-d.left)===(u.top-d.top)/(u.left-d.left)&&(r=kq(f,h,g,a.options)),mh(d,u)||(c.prevFromRect=u,c.prevToRect=d,r||(r=a.options.animation),a.animate(c,f,d,r)),r&&(o=!0,i=Math.max(i,r),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},r),c.thisAnimationDuration=r)}),clearTimeout(t),o?t=setTimeout(function(){typeof s=="function"&&s()},i):typeof s=="function"&&s(),e=[]},animate:function(s,a,o,i){if(i){Rt(s,"transition",""),Rt(s,"transform","");var l=pl(this.el),r=l&&l.a,c=l&&l.d,u=(a.left-o.left)/(r||1),d=(a.top-o.top)/(c||1);s.animatingX=!!u,s.animatingY=!!d,Rt(s,"transform","translate3d("+u+"px,"+d+"px,0)"),this.forRepaintDummy=Pq(s),Rt(s,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),Rt(s,"transform","translate3d(0,0,0)"),typeof s.animated=="number"&&clearTimeout(s.animated),s.animated=setTimeout(function(){Rt(s,"transition",""),Rt(s,"transform",""),s.animated=!1,s.animatingX=!1,s.animatingY=!1},i)}}}}function Pq(e){return e.offsetWidth}function kq(e,t,n,s){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*s.animation}var Pl=[],fh={initializeByDefault:!0},ru={mount:function(t){for(var n in fh)fh.hasOwnProperty(n)&&!(n in t)&&(t[n]=fh[n]);Pl.forEach(function(s){if(s.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Pl.push(t)},pluginEvent:function(t,n,s){var a=this;this.eventCanceled=!1,s.cancel=function(){a.eventCanceled=!0};var o=t+"Global";Pl.forEach(function(i){n[i.pluginName]&&(n[i.pluginName][o]&&n[i.pluginName][o]($o({sortable:n},s)),n.options[i.pluginName]&&n[i.pluginName][t]&&n[i.pluginName][t]($o({sortable:n},s)))})},initializePlugins:function(t,n,s,a){Pl.forEach(function(l){var r=l.pluginName;if(!(!t.options[r]&&!l.initializeByDefault)){var c=new l(t,n,t.options);c.sortable=t,c.options=t.options,t[r]=c,Ga(s,c.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var i=this.modifyOption(t,o,t.options[o]);typeof i<"u"&&(t.options[o]=i)}},getEventProperties:function(t,n){var s={};return Pl.forEach(function(a){typeof a.eventProperties=="function"&&Ga(s,a.eventProperties.call(n[a.pluginName],t))}),s},modifyOption:function(t,n,s){var a;return Pl.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[n]=="function"&&(a=o.optionListeners[n].call(t[o.pluginName],s))}),a}};function uc(e){var t=e.sortable,n=e.rootEl,s=e.name,a=e.targetEl,o=e.cloneEl,i=e.toEl,l=e.fromEl,r=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,h=e.originalEvent,g=e.putSortable,f=e.extraEventProperties;if(t=t||n&&n[Ws],!!t){var b,A=t.options,v="on"+s.charAt(0).toUpperCase()+s.substr(1);window.CustomEvent&&!oi&&!lu?b=new CustomEvent(s,{bubbles:!0,cancelable:!0}):(b=document.createEvent("Event"),b.initEvent(s,!0,!0)),b.to=i||n,b.from=l||n,b.item=a||n,b.clone=o,b.oldIndex=r,b.newIndex=c,b.oldDraggableIndex=u,b.newDraggableIndex=d,b.originalEvent=h,b.pullMode=g?g.lastPutMode:void 0;var T=$o($o({},f),ru.getEventProperties(s,t));for(var _ in T)b[_]=T[_];n&&n.dispatchEvent(b),A[v]&&A[v].call(t,b)}}var Bq=["evt"],da=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=s.evt,o=Aq(s,Bq);ru.pluginEvent.bind(Ut)(t,n,$o({dragEl:ht,parentEl:ts,ghostEl:Jt,rootEl:Vn,nextEl:al,lastDownEl:md,cloneEl:ns,cloneHidden:vi,dragStarted:dc,putSortable:$s,activeSortable:Ut.active,originalEvent:a,oldIndex:Zl,oldDraggableIndex:Cc,newIndex:Aa,newDraggableIndex:gi,hideGhostForTarget:KA,unhideGhostForTarget:XA,cloneNowHidden:function(){vi=!0},cloneNowShown:function(){vi=!1},dispatchSortableEvent:function(l){Qs({sortable:n,name:l,originalEvent:a})}},o))};function Qs(e){uc($o({putSortable:$s,cloneEl:ns,targetEl:ht,rootEl:Vn,oldIndex:Zl,oldDraggableIndex:Cc,newIndex:Aa,newDraggableIndex:gi},e))}var ht,ts,Jt,Vn,al,md,ns,vi,Zl,Aa,Cc,gi,$u,$s,zl=!1,Gd=!1,Vd=[],Ki,Ka,gh,_h,cb,ub,dc,kl,Nc,Oc=!1,Mu=!1,hd,ks,vh=[],Pf=!1,Hd=[],Sp=typeof document<"u",Lu=FA,db=lu||oi?"cssFloat":"float",Uq=Sp&&!xq&&!FA&&"draggable"in document.createElement("div"),zA=function(){if(Sp){if(oi)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),YA=function(t,n){var s=Rt(t),a=parseInt(s.width)-parseInt(s.paddingLeft)-parseInt(s.paddingRight)-parseInt(s.borderLeftWidth)-parseInt(s.borderRightWidth),o=gr(t,0,n),i=gr(t,1,n),l=o&&Rt(o),r=i&&Rt(i),c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+zn(o).width,u=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+zn(i).width;if(s.display==="flex")return s.flexDirection==="column"||s.flexDirection==="column-reverse"?"vertical":"horizontal";if(s.display==="grid")return s.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&l.float&&l.float!=="none"){var d=l.float==="left"?"left":"right";return i&&(r.clear==="both"||r.clear===d)?"vertical":"horizontal"}return o&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||c>=a&&s[db]==="none"||i&&s[db]==="none"&&c+u>a)?"vertical":"horizontal"},Fq=function(t,n,s){var a=s?t.left:t.top,o=s?t.right:t.bottom,i=s?t.width:t.height,l=s?n.left:n.top,r=s?n.right:n.bottom,c=s?n.width:n.height;return a===l||o===r||a+i/2===l+c/2},Gq=function(t,n){var s;return Vd.some(function(a){var o=a[Ws].options.emptyInsertThreshold;if(!(!o||m_(a))){var i=zn(a),l=t>=i.left-o&&t<=i.right+o,r=n>=i.top-o&&n<=i.bottom+o;if(l&&r)return s=a}}),s},jA=function(t){function n(o,i){return function(l,r,c,u){var d=l.options.group.name&&r.options.group.name&&l.options.group.name===r.options.group.name;if(o==null&&(i||d))return!0;if(o==null||o===!1)return!1;if(i&&o==="clone")return o;if(typeof o=="function")return n(o(l,r,c,u),i)(l,r,c,u);var h=(i?l:r).options.group.name;return o===!0||typeof o=="string"&&o===h||o.join&&o.indexOf(h)>-1}}var s={},a=t.group;(!a||pd(a)!="object")&&(a={name:a}),s.name=a.name,s.checkPull=n(a.pull,!0),s.checkPut=n(a.put),s.revertClone=a.revertClone,t.group=s},KA=function(){!zA&&Jt&&Rt(Jt,"display","none")},XA=function(){!zA&&Jt&&Rt(Jt,"display","")};Sp&&document.addEventListener("click",function(e){if(Gd)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Gd=!1,!1},!0);var Xi=function(t){if(ht){t=t.touches?t.touches[0]:t;var n=Gq(t.clientX,t.clientY);if(n){var s={};for(var a in t)t.hasOwnProperty(a)&&(s[a]=t[a]);s.target=s.rootEl=n,s.preventDefault=void 0,s.stopPropagation=void 0,n[Ws]._onDragOver(s)}}},Vq=function(t){ht&&ht.parentNode[Ws]._isOutsideThisEl(t.target)};function Ut(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Ga({},t),e[Ws]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return YA(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,l){i.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ut.supportPointer!==!1&&"PointerEvent"in window&&!yc,emptyInsertThreshold:5};ru.initializePlugins(this,e,n);for(var s in n)!(s in t)&&(t[s]=n[s]);jA(t);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=t.forceFallback?!1:Uq,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?cn(e,"pointerdown",this._onTapStart):(cn(e,"mousedown",this._onTapStart),cn(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(cn(e,"dragover",this),cn(e,"dragenter",this)),Vd.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Ga(this,Dq())}Ut.prototype={constructor:Ut,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(kl=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,ht):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,s=this.el,a=this.options,o=a.preventOnFilter,i=t.type,l=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,r=(l||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||r,u=a.filter;if(qq(s),!ht&&!(/mousedown|pointerdown/.test(i)&&t.button!==0||a.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&yc&&r&&r.tagName.toUpperCase()==="SELECT")&&(r=Ja(r,a.draggable,s,!1),!(r&&r.animated)&&md!==r)){if(Zl=os(r),Cc=os(r,a.draggable),typeof u=="function"){if(u.call(this,t,r,this)){Qs({sortable:n,rootEl:c,name:"filter",targetEl:r,toEl:s,fromEl:s}),da("filter",n,{evt:t}),o&&t.cancelable&&t.preventDefault();return}}else if(u&&(u=u.split(",").some(function(d){if(d=Ja(c,d.trim(),s,!1),d)return Qs({sortable:n,rootEl:d,name:"filter",targetEl:r,fromEl:s,toEl:s}),da("filter",n,{evt:t}),!0}),u)){o&&t.cancelable&&t.preventDefault();return}a.handle&&!Ja(c,a.handle,s,!1)||this._prepareDragStart(t,l,r)}}},_prepareDragStart:function(t,n,s){var a=this,o=a.el,i=a.options,l=o.ownerDocument,r;if(s&&!ht&&s.parentNode===o){var c=zn(s);if(Vn=o,ht=s,ts=ht.parentNode,al=ht.nextSibling,md=s,$u=i.group,Ut.dragged=ht,Ki={target:ht,clientX:(n||t).clientX,clientY:(n||t).clientY},cb=Ki.clientX-c.left,ub=Ki.clientY-c.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,ht.style["will-change"]="all",r=function(){if(da("delayEnded",a,{evt:t}),Ut.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!ab&&a.nativeDraggable&&(ht.draggable=!0),a._triggerDragStart(t,n),Qs({sortable:a,name:"choose",originalEvent:t}),Zn(ht,i.chosenClass,!0)},i.ignore.split(",").forEach(function(u){VA(ht,u.trim(),Eh)}),cn(l,"dragover",Xi),cn(l,"mousemove",Xi),cn(l,"touchmove",Xi),cn(l,"mouseup",a._onDrop),cn(l,"touchend",a._onDrop),cn(l,"touchcancel",a._onDrop),ab&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ht.draggable=!0),da("delayStart",this,{evt:t}),i.delay&&(!i.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(lu||oi))){if(Ut.eventCanceled){this._onDrop();return}cn(l,"mouseup",a._disableDelayedDrag),cn(l,"touchend",a._disableDelayedDrag),cn(l,"touchcancel",a._disableDelayedDrag),cn(l,"mousemove",a._delayedDragTouchMoveHandler),cn(l,"touchmove",a._delayedDragTouchMoveHandler),i.supportPointer&&cn(l,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(r,i.delay)}else r()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ht&&Eh(ht),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;on(t,"mouseup",this._disableDelayedDrag),on(t,"touchend",this._disableDelayedDrag),on(t,"touchcancel",this._disableDelayedDrag),on(t,"mousemove",this._delayedDragTouchMoveHandler),on(t,"touchmove",this._delayedDragTouchMoveHandler),on(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?cn(document,"pointermove",this._onTouchMove):n?cn(document,"touchmove",this._onTouchMove):cn(document,"mousemove",this._onTouchMove):(cn(ht,"dragend",this),cn(Vn,"dragstart",this._onDragStart));try{document.selection?fd(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(zl=!1,Vn&&ht){da("dragStarted",this,{evt:n}),this.nativeDraggable&&cn(document,"dragover",Vq);var s=this.options;!t&&Zn(ht,s.dragClass,!1),Zn(ht,s.ghostClass,!0),Ut.active=this,t&&this._appendGhost(),Qs({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Ka){this._lastX=Ka.clientX,this._lastY=Ka.clientY,KA();for(var t=document.elementFromPoint(Ka.clientX,Ka.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Ka.clientX,Ka.clientY),t!==n);)n=t;if(ht.parentNode[Ws]._isOutsideThisEl(t),n)do{if(n[Ws]){var s=void 0;if(s=n[Ws]._onDragOver({clientX:Ka.clientX,clientY:Ka.clientY,target:t,rootEl:n}),s&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);XA()}},_onTouchMove:function(t){if(Ki){var n=this.options,s=n.fallbackTolerance,a=n.fallbackOffset,o=t.touches?t.touches[0]:t,i=Jt&&pl(Jt,!0),l=Jt&&i&&i.a,r=Jt&&i&&i.d,c=Lu&&ks&&lb(ks),u=(o.clientX-Ki.clientX+a.x)/(l||1)+(c?c[0]-vh[0]:0)/(l||1),d=(o.clientY-Ki.clientY+a.y)/(r||1)+(c?c[1]-vh[1]:0)/(r||1);if(!Ut.active&&!zl){if(s&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<s)return;this._onDragStart(t,!0)}if(Jt){i?(i.e+=u-(gh||0),i.f+=d-(_h||0)):i={a:1,b:0,c:0,d:1,e:u,f:d};var h="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");Rt(Jt,"webkitTransform",h),Rt(Jt,"mozTransform",h),Rt(Jt,"msTransform",h),Rt(Jt,"transform",h),gh=u,_h=d,Ka=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Jt){var t=this.options.fallbackOnBody?document.body:Vn,n=zn(ht,!0,Lu,!0,t),s=this.options;if(Lu){for(ks=t;Rt(ks,"position")==="static"&&Rt(ks,"transform")==="none"&&ks!==document;)ks=ks.parentNode;ks!==document.body&&ks!==document.documentElement?(ks===document&&(ks=Oo()),n.top+=ks.scrollTop,n.left+=ks.scrollLeft):ks=Oo(),vh=lb(ks)}Jt=ht.cloneNode(!0),Zn(Jt,s.ghostClass,!1),Zn(Jt,s.fallbackClass,!0),Zn(Jt,s.dragClass,!0),Rt(Jt,"transition",""),Rt(Jt,"transform",""),Rt(Jt,"box-sizing","border-box"),Rt(Jt,"margin",0),Rt(Jt,"top",n.top),Rt(Jt,"left",n.left),Rt(Jt,"width",n.width),Rt(Jt,"height",n.height),Rt(Jt,"opacity","0.8"),Rt(Jt,"position",Lu?"absolute":"fixed"),Rt(Jt,"zIndex","100000"),Rt(Jt,"pointerEvents","none"),Ut.ghost=Jt,t.appendChild(Jt),Rt(Jt,"transform-origin",cb/parseInt(Jt.style.width)*100+"% "+ub/parseInt(Jt.style.height)*100+"%")}},_onDragStart:function(t,n){var s=this,a=t.dataTransfer,o=s.options;if(da("dragStart",this,{evt:t}),Ut.eventCanceled){this._onDrop();return}da("setupClone",this),Ut.eventCanceled||(ns=h_(ht),ns.draggable=!1,ns.style["will-change"]="",this._hideClone(),Zn(ns,this.options.chosenClass,!1),Ut.clone=ns),s.cloneId=fd(function(){da("clone",s),!Ut.eventCanceled&&(s.options.removeCloneOnHide||Vn.insertBefore(ns,ht),s._hideClone(),Qs({sortable:s,name:"clone"}))}),!n&&Zn(ht,o.dragClass,!0),n?(Gd=!0,s._loopId=setInterval(s._emulateDragOver,50)):(on(document,"mouseup",s._onDrop),on(document,"touchend",s._onDrop),on(document,"touchcancel",s._onDrop),a&&(a.effectAllowed="move",o.setData&&o.setData.call(s,a,ht)),cn(document,"drop",s),Rt(ht,"transform","translateZ(0)")),zl=!0,s._dragStartId=fd(s._dragStarted.bind(s,n,t)),cn(document,"selectstart",s),dc=!0,yc&&Rt(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,s=t.target,a,o,i,l=this.options,r=l.group,c=Ut.active,u=$u===r,d=l.sort,h=$s||c,g,f=this,b=!1;if(Pf)return;function A(K,se){da(K,f,$o({evt:t,isOwner:u,axis:g?"vertical":"horizontal",revert:i,dragRect:a,targetRect:o,canSort:d,fromSortable:h,target:s,completed:T,onMove:function(X,z){return Du(Vn,n,ht,a,X,zn(X),t,z)},changed:_},se))}function v(){A("dragOverAnimationCapture"),f.captureAnimationState(),f!==h&&h.captureAnimationState()}function T(K){return A("dragOverCompleted",{insertion:K}),K&&(u?c._hideClone():c._showClone(f),f!==h&&(Zn(ht,$s?$s.options.ghostClass:c.options.ghostClass,!1),Zn(ht,l.ghostClass,!0)),$s!==f&&f!==Ut.active?$s=f:f===Ut.active&&$s&&($s=null),h===f&&(f._ignoreWhileAnimating=s),f.animateAll(function(){A("dragOverAnimationComplete"),f._ignoreWhileAnimating=null}),f!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(s===ht&&!ht.animated||s===n&&!s.animated)&&(kl=null),!l.dragoverBubble&&!t.rootEl&&s!==document&&(ht.parentNode[Ws]._isOutsideThisEl(t.target),!K&&Xi(t)),!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),b=!0}function _(){Aa=os(ht),gi=os(ht,l.draggable),Qs({sortable:f,name:"change",toEl:n,newIndex:Aa,newDraggableIndex:gi,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),s=Ja(s,l.draggable,n,!0),A("dragOver"),Ut.eventCanceled)return b;if(ht.contains(t.target)||s.animated&&s.animatingX&&s.animatingY||f._ignoreWhileAnimating===s)return T(!1);if(Gd=!1,c&&!l.disabled&&(u?d||(i=ts!==Vn):$s===this||(this.lastPutMode=$u.checkPull(this,c,ht,t))&&r.checkPut(this,c,ht,t))){if(g=this._getDirection(t,s)==="vertical",a=zn(ht),A("dragOverValid"),Ut.eventCanceled)return b;if(i)return ts=Vn,v(),this._hideClone(),A("revert"),Ut.eventCanceled||(al?Vn.insertBefore(ht,al):Vn.appendChild(ht)),T(!0);var N=m_(n,l.draggable);if(!N||Yq(t,g,this)&&!N.animated){if(N===ht)return T(!1);if(N&&n===t.target&&(s=N),s&&(o=zn(s)),Du(Vn,n,ht,a,s,o,t,!!s)!==!1)return v(),n.appendChild(ht),ts=n,_(),T(!0)}else if(N&&zq(t,g,this)){var R=gr(n,0,l,!0);if(R===ht)return T(!1);if(s=R,o=zn(s),Du(Vn,n,ht,a,s,o,t,!1)!==!1)return v(),n.insertBefore(ht,R),ts=n,_(),T(!0)}else if(s.parentNode===n){o=zn(s);var O=0,x,w=ht.parentNode!==n,D=!Fq(ht.animated&&ht.toRect||a,s.animated&&s.toRect||o,g),M=g?"top":"left",P=ib(s,"top","top")||ib(ht,"top","top"),U=P?P.scrollTop:void 0;kl!==s&&(x=o[M],Oc=!1,Mu=!D&&l.invertSwap||w),O=jq(t,s,o,g,D?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,Mu,kl===s);var F;if(O!==0){var k=os(ht);do k-=O,F=ts.children[k];while(F&&(Rt(F,"display")==="none"||F===Jt))}if(O===0||F===s)return T(!1);kl=s,Nc=O;var B=s.nextElementSibling,V=!1;V=O===1;var G=Du(Vn,n,ht,a,s,o,t,V);if(G!==!1)return(G===1||G===-1)&&(V=G===1),Pf=!0,setTimeout(Wq,30),v(),V&&!B?n.appendChild(ht):s.parentNode.insertBefore(ht,V?B:s),P&&WA(P,0,U-P.scrollTop),ts=ht.parentNode,x!==void 0&&!Mu&&(hd=Math.abs(x-zn(s)[M])),_(),T(!0)}if(n.contains(ht))return T(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){on(document,"mousemove",this._onTouchMove),on(document,"touchmove",this._onTouchMove),on(document,"pointermove",this._onTouchMove),on(document,"dragover",Xi),on(document,"mousemove",Xi),on(document,"touchmove",Xi)},_offUpEvents:function(){var t=this.el.ownerDocument;on(t,"mouseup",this._onDrop),on(t,"touchend",this._onDrop),on(t,"pointerup",this._onDrop),on(t,"touchcancel",this._onDrop),on(document,"selectstart",this)},_onDrop:function(t){var n=this.el,s=this.options;if(Aa=os(ht),gi=os(ht,s.draggable),da("drop",this,{evt:t}),ts=ht&&ht.parentNode,Aa=os(ht),gi=os(ht,s.draggable),Ut.eventCanceled){this._nulling();return}zl=!1,Mu=!1,Oc=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),kf(this.cloneId),kf(this._dragStartId),this.nativeDraggable&&(on(document,"drop",this),on(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),yc&&Rt(document.body,"user-select",""),Rt(ht,"transform",""),t&&(dc&&(t.cancelable&&t.preventDefault(),!s.dropBubble&&t.stopPropagation()),Jt&&Jt.parentNode&&Jt.parentNode.removeChild(Jt),(Vn===ts||$s&&$s.lastPutMode!=="clone")&&ns&&ns.parentNode&&ns.parentNode.removeChild(ns),ht&&(this.nativeDraggable&&on(ht,"dragend",this),Eh(ht),ht.style["will-change"]="",dc&&!zl&&Zn(ht,$s?$s.options.ghostClass:this.options.ghostClass,!1),Zn(ht,this.options.chosenClass,!1),Qs({sortable:this,name:"unchoose",toEl:ts,newIndex:null,newDraggableIndex:null,originalEvent:t}),Vn!==ts?(Aa>=0&&(Qs({rootEl:ts,name:"add",toEl:ts,fromEl:Vn,originalEvent:t}),Qs({sortable:this,name:"remove",toEl:ts,originalEvent:t}),Qs({rootEl:ts,name:"sort",toEl:ts,fromEl:Vn,originalEvent:t}),Qs({sortable:this,name:"sort",toEl:ts,originalEvent:t})),$s&&$s.save()):Aa!==Zl&&Aa>=0&&(Qs({sortable:this,name:"update",toEl:ts,originalEvent:t}),Qs({sortable:this,name:"sort",toEl:ts,originalEvent:t})),Ut.active&&((Aa==null||Aa===-1)&&(Aa=Zl,gi=Cc),Qs({sortable:this,name:"end",toEl:ts,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){da("nulling",this),Vn=ht=ts=Jt=al=ns=md=vi=Ki=Ka=dc=Aa=gi=Zl=Cc=kl=Nc=$s=$u=Ut.dragged=Ut.ghost=Ut.clone=Ut.active=null,Hd.forEach(function(t){t.checked=!0}),Hd.length=gh=_h=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":ht&&(this._onDragOver(t),Hq(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,s=this.el.children,a=0,o=s.length,i=this.options;a<o;a++)n=s[a],Ja(n,i.draggable,this.el,!1)&&t.push(n.getAttribute(i.dataIdAttr)||Xq(n));return t},sort:function(t,n){var s={},a=this.el;this.toArray().forEach(function(o,i){var l=a.children[i];Ja(l,this.options.draggable,a,!1)&&(s[o]=l)},this),n&&this.captureAnimationState(),t.forEach(function(o){s[o]&&(a.removeChild(s[o]),a.appendChild(s[o]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return Ja(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var s=this.options;if(n===void 0)return s[t];var a=ru.modifyOption(this,t,n);typeof a<"u"?s[t]=a:s[t]=n,t==="group"&&jA(s)},destroy:function(){da("destroy",this);var t=this.el;t[Ws]=null,on(t,"mousedown",this._onTapStart),on(t,"touchstart",this._onTapStart),on(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(on(t,"dragover",this),on(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Vd.splice(Vd.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!vi){if(da("hideClone",this),Ut.eventCanceled)return;Rt(ns,"display","none"),this.options.removeCloneOnHide&&ns.parentNode&&ns.parentNode.removeChild(ns),vi=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(vi){if(da("showClone",this),Ut.eventCanceled)return;ht.parentNode==Vn&&!this.options.group.revertClone?Vn.insertBefore(ns,ht):al?Vn.insertBefore(ns,al):Vn.appendChild(ns),this.options.group.revertClone&&this.animate(ht,ns),Rt(ns,"display",""),vi=!1}}};function Hq(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Du(e,t,n,s,a,o,i,l){var r,c=e[Ws],u=c.options.onMove,d;return window.CustomEvent&&!oi&&!lu?r=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(r=document.createEvent("Event"),r.initEvent("move",!0,!0)),r.to=t,r.from=e,r.dragged=n,r.draggedRect=s,r.related=a||t,r.relatedRect=o||zn(t),r.willInsertAfter=l,r.originalEvent=i,e.dispatchEvent(r),u&&(d=u.call(c,r,i)),d}function Eh(e){e.draggable=!1}function Wq(){Pf=!1}function zq(e,t,n){var s=zn(gr(n.el,0,n.options,!0)),a=10;return t?e.clientX<s.left-a||e.clientY<s.top&&e.clientX<s.right:e.clientY<s.top-a||e.clientY<s.bottom&&e.clientX<s.left}function Yq(e,t,n){var s=zn(m_(n.el,n.options.draggable)),a=10;return t?e.clientX>s.right+a||e.clientX<=s.right&&e.clientY>s.bottom&&e.clientX>=s.left:e.clientX>s.right&&e.clientY>s.top||e.clientX<=s.right&&e.clientY>s.bottom+a}function jq(e,t,n,s,a,o,i,l){var r=s?e.clientY:e.clientX,c=s?n.height:n.width,u=s?n.top:n.left,d=s?n.bottom:n.right,h=!1;if(!i){if(l&&hd<c*a){if(!Oc&&(Nc===1?r>u+c*o/2:r<d-c*o/2)&&(Oc=!0),Oc)h=!0;else if(Nc===1?r<u+hd:r>d-hd)return-Nc}else if(r>u+c*(1-a)/2&&r<d-c*(1-a)/2)return Kq(t)}return h=h||i,h&&(r<u+c*o/2||r>d-c*o/2)?r>u+c/2?1:-1:0}function Kq(e){return os(ht)<os(e)?1:-1}function Xq(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,s=0;n--;)s+=t.charCodeAt(n);return s.toString(36)}function qq(e){Hd.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var s=t[n];s.checked&&Hd.push(s)}}function fd(e){return setTimeout(e,0)}function kf(e){return clearTimeout(e)}Sp&&cn(document,"touchmove",function(e){(Ut.active||zl)&&e.cancelable&&e.preventDefault()});Ut.utils={on:cn,off:on,css:Rt,find:VA,is:function(t,n){return!!Ja(t,n,t,!1)},extend:Mq,throttle:HA,closest:Ja,toggleClass:Zn,clone:h_,index:os,nextTick:fd,cancelNextTick:kf,detectDirection:YA,getChild:gr};Ut.get=function(e){return e[Ws]};Ut.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(s){if(!s.prototype||!s.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(s));s.utils&&(Ut.utils=$o($o({},Ut.utils),s.utils)),ru.mount(s)})};Ut.create=function(e,t){return new Ut(e,t)};Ut.version=Rq;var vs=[],pc,Bf,Uf=!1,bh,Th,Wd,mc;function Zq(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var s=n.originalEvent;this.sortable.nativeDraggable?cn(document,"dragover",this._handleAutoScroll):this.options.supportPointer?cn(document,"pointermove",this._handleFallbackAutoScroll):s.touches?cn(document,"touchmove",this._handleFallbackAutoScroll):cn(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var s=n.originalEvent;!this.options.dragOverBubble&&!s.rootEl&&this._handleAutoScroll(s)},drop:function(){this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):(on(document,"pointermove",this._handleFallbackAutoScroll),on(document,"touchmove",this._handleFallbackAutoScroll),on(document,"mousemove",this._handleFallbackAutoScroll)),pb(),gd(),Lq()},nulling:function(){Wd=Bf=pc=Uf=mc=bh=Th=null,vs.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,s){var a=this,o=(n.touches?n.touches[0]:n).clientX,i=(n.touches?n.touches[0]:n).clientY,l=document.elementFromPoint(o,i);if(Wd=n,s||this.options.forceAutoScrollFallback||lu||oi||yc){Sh(n,this.options,l,s);var r=Si(l,!0);Uf&&(!mc||o!==bh||i!==Th)&&(mc&&pb(),mc=setInterval(function(){var c=Si(document.elementFromPoint(o,i),!0);c!==r&&(r=c,gd()),Sh(n,a.options,c,s)},10),bh=o,Th=i)}else{if(!this.options.bubbleScroll||Si(l,!0)===Oo()){gd();return}Sh(n,this.options,Si(l,!1),!1)}}},Ga(e,{pluginName:"scroll",initializeByDefault:!0})}function gd(){vs.forEach(function(e){clearInterval(e.pid)}),vs=[]}function pb(){clearInterval(mc)}var Sh=HA(function(e,t,n,s){if(t.scroll){var a=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,i=t.scrollSensitivity,l=t.scrollSpeed,r=Oo(),c=!1,u;Bf!==n&&(Bf=n,gd(),pc=t.scroll,u=t.scrollFn,pc===!0&&(pc=Si(n,!0)));var d=0,h=pc;do{var g=h,f=zn(g),b=f.top,A=f.bottom,v=f.left,T=f.right,_=f.width,N=f.height,R=void 0,O=void 0,x=g.scrollWidth,w=g.scrollHeight,D=Rt(g),M=g.scrollLeft,P=g.scrollTop;g===r?(R=_<x&&(D.overflowX==="auto"||D.overflowX==="scroll"||D.overflowX==="visible"),O=N<w&&(D.overflowY==="auto"||D.overflowY==="scroll"||D.overflowY==="visible")):(R=_<x&&(D.overflowX==="auto"||D.overflowX==="scroll"),O=N<w&&(D.overflowY==="auto"||D.overflowY==="scroll"));var U=R&&(Math.abs(T-a)<=i&&M+_<x)-(Math.abs(v-a)<=i&&!!M),F=O&&(Math.abs(A-o)<=i&&P+N<w)-(Math.abs(b-o)<=i&&!!P);if(!vs[d])for(var k=0;k<=d;k++)vs[k]||(vs[k]={});(vs[d].vx!=U||vs[d].vy!=F||vs[d].el!==g)&&(vs[d].el=g,vs[d].vx=U,vs[d].vy=F,clearInterval(vs[d].pid),(U!=0||F!=0)&&(c=!0,vs[d].pid=setInterval((function(){s&&this.layer===0&&Ut.active._onTouchMove(Wd);var B=vs[this.layer].vy?vs[this.layer].vy*l:0,V=vs[this.layer].vx?vs[this.layer].vx*l:0;typeof u=="function"&&u.call(Ut.dragged.parentNode[Ws],V,B,e,Wd,vs[this.layer].el)!=="continue"||WA(vs[this.layer].el,V,B)}).bind({layer:d}),24))),d++}while(t.bubbleScroll&&h!==r&&(h=Si(h,!1)));Uf=c}},30),qA=function(t){var n=t.originalEvent,s=t.putSortable,a=t.dragEl,o=t.activeSortable,i=t.dispatchSortableEvent,l=t.hideGhostForTarget,r=t.unhideGhostForTarget;if(n){var c=s||o;l();var u=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(u.clientX,u.clientY);r(),c&&!c.el.contains(d)&&(i("spill"),this.onSpill({dragEl:a,putSortable:s}))}};function f_(){}f_.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,s=t.putSortable;this.sortable.captureAnimationState(),s&&s.captureAnimationState();var a=gr(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(n,a):this.sortable.el.appendChild(n),this.sortable.animateAll(),s&&s.animateAll()},drop:qA};Ga(f_,{pluginName:"revertOnSpill"});function g_(){}g_.prototype={onSpill:function(t){var n=t.dragEl,s=t.putSortable,a=s||this.sortable;a.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),a.animateAll()},drop:qA};Ga(g_,{pluginName:"removeOnSpill"});var Ma;function Qq(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(n){var s=n.dragEl;Ma=s},dragOverValid:function(n){var s=n.completed,a=n.target,o=n.onMove,i=n.activeSortable,l=n.changed,r=n.cancel;if(i.options.swap){var c=this.sortable.el,u=this.options;if(a&&a!==c){var d=Ma;o(a)!==!1?(Zn(a,u.swapClass,!0),Ma=a):Ma=null,d&&d!==Ma&&Zn(d,u.swapClass,!1)}l(),s(!0),r()}},drop:function(n){var s=n.activeSortable,a=n.putSortable,o=n.dragEl,i=a||this.sortable,l=this.options;Ma&&Zn(Ma,l.swapClass,!1),Ma&&(l.swap||a&&a.options.swap)&&o!==Ma&&(i.captureAnimationState(),i!==s&&s.captureAnimationState(),Jq(o,Ma),i.animateAll(),i!==s&&s.animateAll())},nulling:function(){Ma=null}},Ga(e,{pluginName:"swap",eventProperties:function(){return{swapItem:Ma}}})}function Jq(e,t){var n=e.parentNode,s=t.parentNode,a,o;!n||!s||n.isEqualNode(t)||s.isEqualNode(e)||(a=os(e),o=os(t),n.isEqualNode(s)&&a<o&&o++,n.insertBefore(t,n.children[a]),s.insertBefore(e,s.children[o]))}var qt=[],Sa=[],Xr,Xa,qr=!1,pa=!1,Bl=!1,Bn,Zr,Pu;function eZ(){function e(t){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));t.options.supportPointer?cn(document,"pointerup",this._deselectMultiDrag):(cn(document,"mouseup",this._deselectMultiDrag),cn(document,"touchend",this._deselectMultiDrag)),cn(document,"keydown",this._checkKeyDown),cn(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(a,o){var i="";qt.length&&Xa===t?qt.forEach(function(l,r){i+=(r?", ":"")+l.textContent}):i=o.textContent,a.setData("Text",i)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var s=n.dragEl;Bn=s},delayEnded:function(){this.isMultiDrag=~qt.indexOf(Bn)},setupClone:function(n){var s=n.sortable,a=n.cancel;if(this.isMultiDrag){for(var o=0;o<qt.length;o++)Sa.push(h_(qt[o])),Sa[o].sortableIndex=qt[o].sortableIndex,Sa[o].draggable=!1,Sa[o].style["will-change"]="",Zn(Sa[o],this.options.selectedClass,!1),qt[o]===Bn&&Zn(Sa[o],this.options.chosenClass,!1);s._hideClone(),a()}},clone:function(n){var s=n.sortable,a=n.rootEl,o=n.dispatchSortableEvent,i=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||qt.length&&Xa===s&&(mb(!0,a),o("clone"),i()))},showClone:function(n){var s=n.cloneNowShown,a=n.rootEl,o=n.cancel;this.isMultiDrag&&(mb(!1,a),Sa.forEach(function(i){Rt(i,"display","")}),s(),Pu=!1,o())},hideClone:function(n){var s=this;n.sortable;var a=n.cloneNowHidden,o=n.cancel;this.isMultiDrag&&(Sa.forEach(function(i){Rt(i,"display","none"),s.options.removeCloneOnHide&&i.parentNode&&i.parentNode.removeChild(i)}),a(),Pu=!0,o())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&Xa&&Xa.multiDrag._deselectMultiDrag(),qt.forEach(function(s){s.sortableIndex=os(s)}),qt=qt.sort(function(s,a){return s.sortableIndex-a.sortableIndex}),Bl=!0},dragStarted:function(n){var s=this,a=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(a.captureAnimationState(),this.options.animation)){qt.forEach(function(i){i!==Bn&&Rt(i,"position","absolute")});var o=zn(Bn,!1,!0,!0);qt.forEach(function(i){i!==Bn&&rb(i,o)}),pa=!0,qr=!0}a.animateAll(function(){pa=!1,qr=!1,s.options.animation&&qt.forEach(function(i){hh(i)}),s.options.sort&&ku()})}},dragOver:function(n){var s=n.target,a=n.completed,o=n.cancel;pa&&~qt.indexOf(s)&&(a(!1),o())},revert:function(n){var s=n.fromSortable,a=n.rootEl,o=n.sortable,i=n.dragRect;qt.length>1&&(qt.forEach(function(l){o.addAnimationState({target:l,rect:pa?zn(l):i}),hh(l),l.fromRect=i,s.removeAnimationState(l)}),pa=!1,tZ(!this.options.removeCloneOnHide,a))},dragOverCompleted:function(n){var s=n.sortable,a=n.isOwner,o=n.insertion,i=n.activeSortable,l=n.parentEl,r=n.putSortable,c=this.options;if(o){if(a&&i._hideClone(),qr=!1,c.animation&&qt.length>1&&(pa||!a&&!i.options.sort&&!r)){var u=zn(Bn,!1,!0,!0);qt.forEach(function(h){h!==Bn&&(rb(h,u),l.appendChild(h))}),pa=!0}if(!a)if(pa||ku(),qt.length>1){var d=Pu;i._showClone(s),i.options.animation&&!Pu&&d&&Sa.forEach(function(h){i.addAnimationState({target:h,rect:Zr}),h.fromRect=Zr,h.thisAnimationDuration=null})}else i._showClone(s)}},dragOverAnimationCapture:function(n){var s=n.dragRect,a=n.isOwner,o=n.activeSortable;if(qt.forEach(function(l){l.thisAnimationDuration=null}),o.options.animation&&!a&&o.multiDrag.isMultiDrag){Zr=Ga({},s);var i=pl(Bn,!0);Zr.top-=i.f,Zr.left-=i.e}},dragOverAnimationComplete:function(){pa&&(pa=!1,ku())},drop:function(n){var s=n.originalEvent,a=n.rootEl,o=n.parentEl,i=n.sortable,l=n.dispatchSortableEvent,r=n.oldIndex,c=n.putSortable,u=c||this.sortable;if(s){var d=this.options,h=o.children;if(!Bl)if(d.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Zn(Bn,d.selectedClass,!~qt.indexOf(Bn)),~qt.indexOf(Bn))qt.splice(qt.indexOf(Bn),1),Xr=null,uc({sortable:i,rootEl:a,name:"deselect",targetEl:Bn});else{if(qt.push(Bn),uc({sortable:i,rootEl:a,name:"select",targetEl:Bn}),s.shiftKey&&Xr&&i.el.contains(Xr)){var g=os(Xr),f=os(Bn);if(~g&&~f&&g!==f){var b,A;for(f>g?(A=g,b=f):(A=f,b=g+1);A<b;A++)~qt.indexOf(h[A])||(Zn(h[A],d.selectedClass,!0),qt.push(h[A]),uc({sortable:i,rootEl:a,name:"select",targetEl:h[A]}))}}else Xr=Bn;Xa=u}if(Bl&&this.isMultiDrag){if(pa=!1,(o[Ws].options.sort||o!==a)&&qt.length>1){var v=zn(Bn),T=os(Bn,":not(."+this.options.selectedClass+")");if(!qr&&d.animation&&(Bn.thisAnimationDuration=null),u.captureAnimationState(),!qr&&(d.animation&&(Bn.fromRect=v,qt.forEach(function(N){if(N.thisAnimationDuration=null,N!==Bn){var R=pa?zn(N):v;N.fromRect=R,u.addAnimationState({target:N,rect:R})}})),ku(),qt.forEach(function(N){h[T]?o.insertBefore(N,h[T]):o.appendChild(N),T++}),r===os(Bn))){var _=!1;qt.forEach(function(N){if(N.sortableIndex!==os(N)){_=!0;return}}),_&&l("update")}qt.forEach(function(N){hh(N)}),u.animateAll()}Xa=u}(a===o||c&&c.lastPutMode!=="clone")&&Sa.forEach(function(N){N.parentNode&&N.parentNode.removeChild(N)})}},nullingGlobal:function(){this.isMultiDrag=Bl=!1,Sa.length=0},destroyGlobal:function(){this._deselectMultiDrag(),on(document,"pointerup",this._deselectMultiDrag),on(document,"mouseup",this._deselectMultiDrag),on(document,"touchend",this._deselectMultiDrag),on(document,"keydown",this._checkKeyDown),on(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Bl<"u"&&Bl)&&Xa===this.sortable&&!(n&&Ja(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;qt.length;){var s=qt[0];Zn(s,this.options.selectedClass,!1),qt.shift(),uc({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:s})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Ga(e,{pluginName:"multiDrag",utils:{select:function(n){var s=n.parentNode[Ws];!s||!s.options.multiDrag||~qt.indexOf(n)||(Xa&&Xa!==s&&(Xa.multiDrag._deselectMultiDrag(),Xa=s),Zn(n,s.options.selectedClass,!0),qt.push(n))},deselect:function(n){var s=n.parentNode[Ws],a=qt.indexOf(n);!s||!s.options.multiDrag||!~a||(Zn(n,s.options.selectedClass,!1),qt.splice(a,1))}},eventProperties:function(){var n=this,s=[],a=[];return qt.forEach(function(o){s.push({multiDragElement:o,index:o.sortableIndex});var i;pa&&o!==Bn?i=-1:pa?i=os(o,":not(."+n.options.selectedClass+")"):i=os(o),a.push({multiDragElement:o,index:i})}),{items:yq(qt),clones:[].concat(Sa),oldIndicies:s,newIndicies:a}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function tZ(e,t){qt.forEach(function(n,s){var a=t.children[n.sortableIndex+(e?Number(s):0)];a?t.insertBefore(n,a):t.appendChild(n)})}function mb(e,t){Sa.forEach(function(n,s){var a=t.children[n.sortableIndex+(e?Number(s):0)];a?t.insertBefore(n,a):t.appendChild(n)})}function ku(){qt.forEach(function(e){e!==Bn&&e.parentNode&&e.parentNode.removeChild(e)})}Ut.mount(new Zq);Ut.mount(g_,f_);const nZ=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:eZ,Sortable:Ut,Swap:Qq,default:Ut},Symbol.toStringTag,{value:"Module"})),sZ=YN(nZ);(function(e,t){(function(s,a){e.exports=a(IS,sZ)})(typeof self<"u"?self:jN,function(n,s){return function(a){var o={};function i(l){if(o[l])return o[l].exports;var r=o[l]={i:l,l:!1,exports:{}};return a[l].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=a,i.c=o,i.d=function(l,r,c){i.o(l,r)||Object.defineProperty(l,r,{enumerable:!0,get:c})},i.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},i.t=function(l,r){if(r&1&&(l=i(l)),r&8||r&4&&typeof l=="object"&&l&&l.__esModule)return l;var c=Object.create(null);if(i.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:l}),r&2&&typeof l!="string")for(var u in l)i.d(c,u,(function(d){return l[d]}).bind(null,u));return c},i.n=function(l){var r=l&&l.__esModule?function(){return l.default}:function(){return l};return i.d(r,"a",r),r},i.o=function(l,r){return Object.prototype.hasOwnProperty.call(l,r)},i.p="",i(i.s="fb15")}({"00ee":function(a,o,i){var l=i("b622"),r=l("toStringTag"),c={};c[r]="z",a.exports=String(c)==="[object z]"},"0366":function(a,o,i){var l=i("1c0b");a.exports=function(r,c,u){if(l(r),c===void 0)return r;switch(u){case 0:return function(){return r.call(c)};case 1:return function(d){return r.call(c,d)};case 2:return function(d,h){return r.call(c,d,h)};case 3:return function(d,h,g){return r.call(c,d,h,g)}}return function(){return r.apply(c,arguments)}}},"057f":function(a,o,i){var l=i("fc6a"),r=i("241c").f,c={}.toString,u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],d=function(h){try{return r(h)}catch{return u.slice()}};a.exports.f=function(g){return u&&c.call(g)=="[object Window]"?d(g):r(l(g))}},"06cf":function(a,o,i){var l=i("83ab"),r=i("d1e7"),c=i("5c6c"),u=i("fc6a"),d=i("c04e"),h=i("5135"),g=i("0cfb"),f=Object.getOwnPropertyDescriptor;o.f=l?f:function(A,v){if(A=u(A),v=d(v,!0),g)try{return f(A,v)}catch{}if(h(A,v))return c(!r.f.call(A,v),A[v])}},"0cfb":function(a,o,i){var l=i("83ab"),r=i("d039"),c=i("cc12");a.exports=!l&&!r(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(a,o,i){var l=i("23e7"),r=i("d58f").left,c=i("a640"),u=i("ae40"),d=c("reduce"),h=u("reduce",{1:0});l({target:"Array",proto:!0,forced:!d||!h},{reduce:function(f){return r(this,f,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(a,o,i){var l=i("c6b6"),r=i("9263");a.exports=function(c,u){var d=c.exec;if(typeof d=="function"){var h=d.call(c,u);if(typeof h!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return h}if(l(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return r.call(c,u)}},"159b":function(a,o,i){var l=i("da84"),r=i("fdbc"),c=i("17c2"),u=i("9112");for(var d in r){var h=l[d],g=h&&h.prototype;if(g&&g.forEach!==c)try{u(g,"forEach",c)}catch{g.forEach=c}}},"17c2":function(a,o,i){var l=i("b727").forEach,r=i("a640"),c=i("ae40"),u=r("forEach"),d=c("forEach");a.exports=!u||!d?function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(a,o,i){var l=i("d066");a.exports=l("document","documentElement")},"1c0b":function(a,o){a.exports=function(i){if(typeof i!="function")throw TypeError(String(i)+" is not a function");return i}},"1c7e":function(a,o,i){var l=i("b622"),r=l("iterator"),c=!1;try{var u=0,d={next:function(){return{done:!!u++}},return:function(){c=!0}};d[r]=function(){return this},Array.from(d,function(){throw 2})}catch{}a.exports=function(h,g){if(!g&&!c)return!1;var f=!1;try{var b={};b[r]=function(){return{next:function(){return{done:f=!0}}}},h(b)}catch{}return f}},"1d80":function(a,o){a.exports=function(i){if(i==null)throw TypeError("Can't call method on "+i);return i}},"1dde":function(a,o,i){var l=i("d039"),r=i("b622"),c=i("2d00"),u=r("species");a.exports=function(d){return c>=51||!l(function(){var h=[],g=h.constructor={};return g[u]=function(){return{foo:1}},h[d](Boolean).foo!==1})}},"23cb":function(a,o,i){var l=i("a691"),r=Math.max,c=Math.min;a.exports=function(u,d){var h=l(u);return h<0?r(h+d,0):c(h,d)}},"23e7":function(a,o,i){var l=i("da84"),r=i("06cf").f,c=i("9112"),u=i("6eeb"),d=i("ce4e"),h=i("e893"),g=i("94ca");a.exports=function(f,b){var A=f.target,v=f.global,T=f.stat,_,N,R,O,x,w;if(v?N=l:T?N=l[A]||d(A,{}):N=(l[A]||{}).prototype,N)for(R in b){if(x=b[R],f.noTargetGet?(w=r(N,R),O=w&&w.value):O=N[R],_=g(v?R:A+(T?".":"#")+R,f.forced),!_&&O!==void 0){if(typeof x==typeof O)continue;h(x,O)}(f.sham||O&&O.sham)&&c(x,"sham",!0),u(N,R,x,f)}}},"241c":function(a,o,i){var l=i("ca84"),r=i("7839"),c=r.concat("length","prototype");o.f=Object.getOwnPropertyNames||function(d){return l(d,c)}},"25f0":function(a,o,i){var l=i("6eeb"),r=i("825a"),c=i("d039"),u=i("ad6d"),d="toString",h=RegExp.prototype,g=h[d],f=c(function(){return g.call({source:"a",flags:"b"})!="/a/b"}),b=g.name!=d;(f||b)&&l(RegExp.prototype,d,function(){var v=r(this),T=String(v.source),_=v.flags,N=String(_===void 0&&v instanceof RegExp&&!("flags"in h)?u.call(v):_);return"/"+T+"/"+N},{unsafe:!0})},"2ca0":function(a,o,i){var l=i("23e7"),r=i("06cf").f,c=i("50c4"),u=i("5a34"),d=i("1d80"),h=i("ab13"),g=i("c430"),f="".startsWith,b=Math.min,A=h("startsWith"),v=!g&&!A&&!!function(){var T=r(String.prototype,"startsWith");return T&&!T.writable}();l({target:"String",proto:!0,forced:!v&&!A},{startsWith:function(_){var N=String(d(this));u(_);var R=c(b(arguments.length>1?arguments[1]:void 0,N.length)),O=String(_);return f?f.call(N,O,R):N.slice(R,R+O.length)===O}})},"2d00":function(a,o,i){var l=i("da84"),r=i("342f"),c=l.process,u=c&&c.versions,d=u&&u.v8,h,g;d?(h=d.split("."),g=h[0]+h[1]):r&&(h=r.match(/Edge\/(\d+)/),(!h||h[1]>=74)&&(h=r.match(/Chrome\/(\d+)/),h&&(g=h[1]))),a.exports=g&&+g},"342f":function(a,o,i){var l=i("d066");a.exports=l("navigator","userAgent")||""},"35a1":function(a,o,i){var l=i("f5df"),r=i("3f8c"),c=i("b622"),u=c("iterator");a.exports=function(d){if(d!=null)return d[u]||d["@@iterator"]||r[l(d)]}},"37e8":function(a,o,i){var l=i("83ab"),r=i("9bf2"),c=i("825a"),u=i("df75");a.exports=l?Object.defineProperties:function(h,g){c(h);for(var f=u(g),b=f.length,A=0,v;b>A;)r.f(h,v=f[A++],g[v]);return h}},"3bbe":function(a,o,i){var l=i("861d");a.exports=function(r){if(!l(r)&&r!==null)throw TypeError("Can't set "+String(r)+" as a prototype");return r}},"3ca3":function(a,o,i){var l=i("6547").charAt,r=i("69f3"),c=i("7dd0"),u="String Iterator",d=r.set,h=r.getterFor(u);c(String,"String",function(g){d(this,{type:u,string:String(g),index:0})},function(){var f=h(this),b=f.string,A=f.index,v;return A>=b.length?{value:void 0,done:!0}:(v=l(b,A),f.index+=v.length,{value:v,done:!1})})},"3f8c":function(a,o){a.exports={}},4160:function(a,o,i){var l=i("23e7"),r=i("17c2");l({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},"428f":function(a,o,i){var l=i("da84");a.exports=l},"44ad":function(a,o,i){var l=i("d039"),r=i("c6b6"),c="".split;a.exports=l(function(){return!Object("z").propertyIsEnumerable(0)})?function(u){return r(u)=="String"?c.call(u,""):Object(u)}:Object},"44d2":function(a,o,i){var l=i("b622"),r=i("7c73"),c=i("9bf2"),u=l("unscopables"),d=Array.prototype;d[u]==null&&c.f(d,u,{configurable:!0,value:r(null)}),a.exports=function(h){d[u][h]=!0}},"44e7":function(a,o,i){var l=i("861d"),r=i("c6b6"),c=i("b622"),u=c("match");a.exports=function(d){var h;return l(d)&&((h=d[u])!==void 0?!!h:r(d)=="RegExp")}},4930:function(a,o,i){var l=i("d039");a.exports=!!Object.getOwnPropertySymbols&&!l(function(){return!String(Symbol())})},"4d64":function(a,o,i){var l=i("fc6a"),r=i("50c4"),c=i("23cb"),u=function(d){return function(h,g,f){var b=l(h),A=r(b.length),v=c(f,A),T;if(d&&g!=g){for(;A>v;)if(T=b[v++],T!=T)return!0}else for(;A>v;v++)if((d||v in b)&&b[v]===g)return d||v||0;return!d&&-1}};a.exports={includes:u(!0),indexOf:u(!1)}},"4de4":function(a,o,i){var l=i("23e7"),r=i("b727").filter,c=i("1dde"),u=i("ae40"),d=c("filter"),h=u("filter");l({target:"Array",proto:!0,forced:!d||!h},{filter:function(f){return r(this,f,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(a,o,i){var l=i("0366"),r=i("7b0b"),c=i("9bdd"),u=i("e95a"),d=i("50c4"),h=i("8418"),g=i("35a1");a.exports=function(b){var A=r(b),v=typeof this=="function"?this:Array,T=arguments.length,_=T>1?arguments[1]:void 0,N=_!==void 0,R=g(A),O=0,x,w,D,M,P,U;if(N&&(_=l(_,T>2?arguments[2]:void 0,2)),R!=null&&!(v==Array&&u(R)))for(M=R.call(A),P=M.next,w=new v;!(D=P.call(M)).done;O++)U=N?c(M,_,[D.value,O],!0):D.value,h(w,O,U);else for(x=d(A.length),w=new v(x);x>O;O++)U=N?_(A[O],O):A[O],h(w,O,U);return w.length=O,w}},"4fad":function(a,o,i){var l=i("23e7"),r=i("6f53").entries;l({target:"Object",stat:!0},{entries:function(u){return r(u)}})},"50c4":function(a,o,i){var l=i("a691"),r=Math.min;a.exports=function(c){return c>0?r(l(c),9007199254740991):0}},5135:function(a,o){var i={}.hasOwnProperty;a.exports=function(l,r){return i.call(l,r)}},5319:function(a,o,i){var l=i("d784"),r=i("825a"),c=i("7b0b"),u=i("50c4"),d=i("a691"),h=i("1d80"),g=i("8aa5"),f=i("14c3"),b=Math.max,A=Math.min,v=Math.floor,T=/\$([$&'`]|\d\d?|<[^>]*>)/g,_=/\$([$&'`]|\d\d?)/g,N=function(R){return R===void 0?R:String(R)};l("replace",2,function(R,O,x,w){var D=w.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,M=w.REPLACE_KEEPS_$0,P=D?"$":"$0";return[function(k,B){var V=h(this),G=k==null?void 0:k[R];return G!==void 0?G.call(k,V,B):O.call(String(V),k,B)},function(F,k){if(!D&&M||typeof k=="string"&&k.indexOf(P)===-1){var B=x(O,F,this,k);if(B.done)return B.value}var V=r(F),G=String(this),K=typeof k=="function";K||(k=String(k));var se=V.global;if(se){var ee=V.unicode;V.lastIndex=0}for(var X=[];;){var z=f(V,G);if(z===null||(X.push(z),!se))break;var H=String(z[0]);H===""&&(V.lastIndex=g(G,u(V.lastIndex),ee))}for(var q="",J=0,de=0;de<X.length;de++){z=X[de];for(var Te=String(z[0]),ce=b(A(d(z.index),G.length),0),Ne=[],Me=1;Me<z.length;Me++)Ne.push(N(z[Me]));var Fe=z.groups;if(K){var Ge=[Te].concat(Ne,ce,G);Fe!==void 0&&Ge.push(Fe);var je=String(k.apply(void 0,Ge))}else je=U(Te,G,ce,Ne,Fe,k);ce>=J&&(q+=G.slice(J,ce)+je,J=ce+Te.length)}return q+G.slice(J)}];function U(F,k,B,V,G,K){var se=B+F.length,ee=V.length,X=_;return G!==void 0&&(G=c(G),X=T),O.call(K,X,function(z,H){var q;switch(H.charAt(0)){case"$":return"$";case"&":return F;case"`":return k.slice(0,B);case"'":return k.slice(se);case"<":q=G[H.slice(1,-1)];break;default:var J=+H;if(J===0)return z;if(J>ee){var de=v(J/10);return de===0?z:de<=ee?V[de-1]===void 0?H.charAt(1):V[de-1]+H.charAt(1):z}q=V[J-1]}return q===void 0?"":q})}})},5692:function(a,o,i){var l=i("c430"),r=i("c6cd");(a.exports=function(c,u){return r[c]||(r[c]=u!==void 0?u:{})})("versions",[]).push({version:"3.6.5",mode:l?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(a,o,i){var l=i("d066"),r=i("241c"),c=i("7418"),u=i("825a");a.exports=l("Reflect","ownKeys")||function(h){var g=r.f(u(h)),f=c.f;return f?g.concat(f(h)):g}},"5a34":function(a,o,i){var l=i("44e7");a.exports=function(r){if(l(r))throw TypeError("The method doesn't accept regular expressions");return r}},"5c6c":function(a,o){a.exports=function(i,l){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:l}}},"5db7":function(a,o,i){var l=i("23e7"),r=i("a2bf"),c=i("7b0b"),u=i("50c4"),d=i("1c0b"),h=i("65f0");l({target:"Array",proto:!0},{flatMap:function(f){var b=c(this),A=u(b.length),v;return d(f),v=h(b,0),v.length=r(v,b,b,A,0,1,f,arguments.length>1?arguments[1]:void 0),v}})},6547:function(a,o,i){var l=i("a691"),r=i("1d80"),c=function(u){return function(d,h){var g=String(r(d)),f=l(h),b=g.length,A,v;return f<0||f>=b?u?"":void 0:(A=g.charCodeAt(f),A<55296||A>56319||f+1===b||(v=g.charCodeAt(f+1))<56320||v>57343?u?g.charAt(f):A:u?g.slice(f,f+2):(A-55296<<10)+(v-56320)+65536)}};a.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(a,o,i){var l=i("861d"),r=i("e8b5"),c=i("b622"),u=c("species");a.exports=function(d,h){var g;return r(d)&&(g=d.constructor,typeof g=="function"&&(g===Array||r(g.prototype))?g=void 0:l(g)&&(g=g[u],g===null&&(g=void 0))),new(g===void 0?Array:g)(h===0?0:h)}},"69f3":function(a,o,i){var l=i("7f9a"),r=i("da84"),c=i("861d"),u=i("9112"),d=i("5135"),h=i("f772"),g=i("d012"),f=r.WeakMap,b,A,v,T=function(D){return v(D)?A(D):b(D,{})},_=function(D){return function(M){var P;if(!c(M)||(P=A(M)).type!==D)throw TypeError("Incompatible receiver, "+D+" required");return P}};if(l){var N=new f,R=N.get,O=N.has,x=N.set;b=function(D,M){return x.call(N,D,M),M},A=function(D){return R.call(N,D)||{}},v=function(D){return O.call(N,D)}}else{var w=h("state");g[w]=!0,b=function(D,M){return u(D,w,M),M},A=function(D){return d(D,w)?D[w]:{}},v=function(D){return d(D,w)}}a.exports={set:b,get:A,has:v,enforce:T,getterFor:_}},"6eeb":function(a,o,i){var l=i("da84"),r=i("9112"),c=i("5135"),u=i("ce4e"),d=i("8925"),h=i("69f3"),g=h.get,f=h.enforce,b=String(String).split("String");(a.exports=function(A,v,T,_){var N=_?!!_.unsafe:!1,R=_?!!_.enumerable:!1,O=_?!!_.noTargetGet:!1;if(typeof T=="function"&&(typeof v=="string"&&!c(T,"name")&&r(T,"name",v),f(T).source=b.join(typeof v=="string"?v:"")),A===l){R?A[v]=T:u(v,T);return}else N?!O&&A[v]&&(R=!0):delete A[v];R?A[v]=T:r(A,v,T)})(Function.prototype,"toString",function(){return typeof this=="function"&&g(this).source||d(this)})},"6f53":function(a,o,i){var l=i("83ab"),r=i("df75"),c=i("fc6a"),u=i("d1e7").f,d=function(h){return function(g){for(var f=c(g),b=r(f),A=b.length,v=0,T=[],_;A>v;)_=b[v++],(!l||u.call(f,_))&&T.push(h?[_,f[_]]:f[_]);return T}};a.exports={entries:d(!0),values:d(!1)}},"73d9":function(a,o,i){var l=i("44d2");l("flatMap")},7418:function(a,o){o.f=Object.getOwnPropertySymbols},"746f":function(a,o,i){var l=i("428f"),r=i("5135"),c=i("e538"),u=i("9bf2").f;a.exports=function(d){var h=l.Symbol||(l.Symbol={});r(h,d)||u(h,d,{value:c.f(d)})}},7839:function(a,o){a.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(a,o,i){var l=i("1d80");a.exports=function(r){return Object(l(r))}},"7c73":function(a,o,i){var l=i("825a"),r=i("37e8"),c=i("7839"),u=i("d012"),d=i("1be4"),h=i("cc12"),g=i("f772"),f=">",b="<",A="prototype",v="script",T=g("IE_PROTO"),_=function(){},N=function(D){return b+v+f+D+b+"/"+v+f},R=function(D){D.write(N("")),D.close();var M=D.parentWindow.Object;return D=null,M},O=function(){var D=h("iframe"),M="java"+v+":",P;return D.style.display="none",d.appendChild(D),D.src=String(M),P=D.contentWindow.document,P.open(),P.write(N("document.F=Object")),P.close(),P.F},x,w=function(){try{x=document.domain&&new ActiveXObject("htmlfile")}catch{}w=x?R(x):O();for(var D=c.length;D--;)delete w[A][c[D]];return w()};u[T]=!0,a.exports=Object.create||function(M,P){var U;return M!==null?(_[A]=l(M),U=new _,_[A]=null,U[T]=M):U=w(),P===void 0?U:r(U,P)}},"7dd0":function(a,o,i){var l=i("23e7"),r=i("9ed3"),c=i("e163"),u=i("d2bb"),d=i("d44e"),h=i("9112"),g=i("6eeb"),f=i("b622"),b=i("c430"),A=i("3f8c"),v=i("ae93"),T=v.IteratorPrototype,_=v.BUGGY_SAFARI_ITERATORS,N=f("iterator"),R="keys",O="values",x="entries",w=function(){return this};a.exports=function(D,M,P,U,F,k,B){r(P,M,U);var V=function(de){if(de===F&&X)return X;if(!_&&de in se)return se[de];switch(de){case R:return function(){return new P(this,de)};case O:return function(){return new P(this,de)};case x:return function(){return new P(this,de)}}return function(){return new P(this)}},G=M+" Iterator",K=!1,se=D.prototype,ee=se[N]||se["@@iterator"]||F&&se[F],X=!_&&ee||V(F),z=M=="Array"&&se.entries||ee,H,q,J;if(z&&(H=c(z.call(new D)),T!==Object.prototype&&H.next&&(!b&&c(H)!==T&&(u?u(H,T):typeof H[N]!="function"&&h(H,N,w)),d(H,G,!0,!0),b&&(A[G]=w))),F==O&&ee&&ee.name!==O&&(K=!0,X=function(){return ee.call(this)}),(!b||B)&&se[N]!==X&&h(se,N,X),A[M]=X,F)if(q={values:V(O),keys:k?X:V(R),entries:V(x)},B)for(J in q)(_||K||!(J in se))&&g(se,J,q[J]);else l({target:M,proto:!0,forced:_||K},q);return q}},"7f9a":function(a,o,i){var l=i("da84"),r=i("8925"),c=l.WeakMap;a.exports=typeof c=="function"&&/native code/.test(r(c))},"825a":function(a,o,i){var l=i("861d");a.exports=function(r){if(!l(r))throw TypeError(String(r)+" is not an object");return r}},"83ab":function(a,o,i){var l=i("d039");a.exports=!l(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(a,o,i){var l=i("c04e"),r=i("9bf2"),c=i("5c6c");a.exports=function(u,d,h){var g=l(d);g in u?r.f(u,g,c(0,h)):u[g]=h}},"861d":function(a,o){a.exports=function(i){return typeof i=="object"?i!==null:typeof i=="function"}},8875:function(a,o,i){var l,r,c;(function(u,d){r=[],l=d,c=typeof l=="function"?l.apply(o,r):l,c!==void 0&&(a.exports=c)})(typeof self<"u"?self:this,function(){function u(){var d=Object.getOwnPropertyDescriptor(document,"currentScript");if(!d&&"currentScript"in document&&document.currentScript||d&&d.get!==u&&document.currentScript)return document.currentScript;try{throw new Error}catch(x){var h=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,g=/@([^@]*):(\d+):(\d+)\s*$/ig,f=h.exec(x.stack)||g.exec(x.stack),b=f&&f[1]||!1,A=f&&f[2]||!1,v=document.location.href.replace(document.location.hash,""),T,_,N,R=document.getElementsByTagName("script");b===v&&(T=document.documentElement.outerHTML,_=new RegExp("(?:[^\\n]+?\\n){0,"+(A-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),N=T.replace(_,"$1").trim());for(var O=0;O<R.length;O++)if(R[O].readyState==="interactive"||R[O].src===b||b===v&&R[O].innerHTML&&R[O].innerHTML.trim()===N)return R[O];return null}}return u})},8925:function(a,o,i){var l=i("c6cd"),r=Function.toString;typeof l.inspectSource!="function"&&(l.inspectSource=function(c){return r.call(c)}),a.exports=l.inspectSource},"8aa5":function(a,o,i){var l=i("6547").charAt;a.exports=function(r,c,u){return c+(u?l(r,c).length:1)}},"8bbf":function(a,o){a.exports=n},"90e3":function(a,o){var i=0,l=Math.random();a.exports=function(r){return"Symbol("+String(r===void 0?"":r)+")_"+(++i+l).toString(36)}},9112:function(a,o,i){var l=i("83ab"),r=i("9bf2"),c=i("5c6c");a.exports=l?function(u,d,h){return r.f(u,d,c(1,h))}:function(u,d,h){return u[d]=h,u}},9263:function(a,o,i){var l=i("ad6d"),r=i("9f7f"),c=RegExp.prototype.exec,u=String.prototype.replace,d=c,h=function(){var A=/a/,v=/b*/g;return c.call(A,"a"),c.call(v,"a"),A.lastIndex!==0||v.lastIndex!==0}(),g=r.UNSUPPORTED_Y||r.BROKEN_CARET,f=/()??/.exec("")[1]!==void 0,b=h||f||g;b&&(d=function(v){var T=this,_,N,R,O,x=g&&T.sticky,w=l.call(T),D=T.source,M=0,P=v;return x&&(w=w.replace("y",""),w.indexOf("g")===-1&&(w+="g"),P=String(v).slice(T.lastIndex),T.lastIndex>0&&(!T.multiline||T.multiline&&v[T.lastIndex-1]!==`
`)&&(D="(?: "+D+")",P=" "+P,M++),N=new RegExp("^(?:"+D+")",w)),f&&(N=new RegExp("^"+D+"$(?!\\s)",w)),h&&(_=T.lastIndex),R=c.call(x?N:T,P),x?R?(R.input=R.input.slice(M),R[0]=R[0].slice(M),R.index=T.lastIndex,T.lastIndex+=R[0].length):T.lastIndex=0:h&&R&&(T.lastIndex=T.global?R.index+R[0].length:_),f&&R&&R.length>1&&u.call(R[0],N,function(){for(O=1;O<arguments.length-2;O++)arguments[O]===void 0&&(R[O]=void 0)}),R}),a.exports=d},"94ca":function(a,o,i){var l=i("d039"),r=/#|\.prototype\./,c=function(f,b){var A=d[u(f)];return A==g?!0:A==h?!1:typeof b=="function"?l(b):!!b},u=c.normalize=function(f){return String(f).replace(r,".").toLowerCase()},d=c.data={},h=c.NATIVE="N",g=c.POLYFILL="P";a.exports=c},"99af":function(a,o,i){var l=i("23e7"),r=i("d039"),c=i("e8b5"),u=i("861d"),d=i("7b0b"),h=i("50c4"),g=i("8418"),f=i("65f0"),b=i("1dde"),A=i("b622"),v=i("2d00"),T=A("isConcatSpreadable"),_=9007199254740991,N="Maximum allowed index exceeded",R=v>=51||!r(function(){var D=[];return D[T]=!1,D.concat()[0]!==D}),O=b("concat"),x=function(D){if(!u(D))return!1;var M=D[T];return M!==void 0?!!M:c(D)},w=!R||!O;l({target:"Array",proto:!0,forced:w},{concat:function(M){var P=d(this),U=f(P,0),F=0,k,B,V,G,K;for(k=-1,V=arguments.length;k<V;k++)if(K=k===-1?P:arguments[k],x(K)){if(G=h(K.length),F+G>_)throw TypeError(N);for(B=0;B<G;B++,F++)B in K&&g(U,F,K[B])}else{if(F>=_)throw TypeError(N);g(U,F++,K)}return U.length=F,U}})},"9bdd":function(a,o,i){var l=i("825a");a.exports=function(r,c,u,d){try{return d?c(l(u)[0],u[1]):c(u)}catch(g){var h=r.return;throw h!==void 0&&l(h.call(r)),g}}},"9bf2":function(a,o,i){var l=i("83ab"),r=i("0cfb"),c=i("825a"),u=i("c04e"),d=Object.defineProperty;o.f=l?d:function(g,f,b){if(c(g),f=u(f,!0),c(b),r)try{return d(g,f,b)}catch{}if("get"in b||"set"in b)throw TypeError("Accessors not supported");return"value"in b&&(g[f]=b.value),g}},"9ed3":function(a,o,i){var l=i("ae93").IteratorPrototype,r=i("7c73"),c=i("5c6c"),u=i("d44e"),d=i("3f8c"),h=function(){return this};a.exports=function(g,f,b){var A=f+" Iterator";return g.prototype=r(l,{next:c(1,b)}),u(g,A,!1,!0),d[A]=h,g}},"9f7f":function(a,o,i){var l=i("d039");function r(c,u){return RegExp(c,u)}o.UNSUPPORTED_Y=l(function(){var c=r("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),o.BROKEN_CARET=l(function(){var c=r("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(a,o,i){var l=i("e8b5"),r=i("50c4"),c=i("0366"),u=function(d,h,g,f,b,A,v,T){for(var _=b,N=0,R=v?c(v,T,3):!1,O;N<f;){if(N in g){if(O=R?R(g[N],N,h):g[N],A>0&&l(O))_=u(d,h,O,r(O.length),_,A-1)-1;else{if(_>=9007199254740991)throw TypeError("Exceed the acceptable array length");d[_]=O}_++}N++}return _};a.exports=u},a352:function(a,o){a.exports=s},a434:function(a,o,i){var l=i("23e7"),r=i("23cb"),c=i("a691"),u=i("50c4"),d=i("7b0b"),h=i("65f0"),g=i("8418"),f=i("1dde"),b=i("ae40"),A=f("splice"),v=b("splice",{ACCESSORS:!0,0:0,1:2}),T=Math.max,_=Math.min,N=9007199254740991,R="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!A||!v},{splice:function(x,w){var D=d(this),M=u(D.length),P=r(x,M),U=arguments.length,F,k,B,V,G,K;if(U===0?F=k=0:U===1?(F=0,k=M-P):(F=U-2,k=_(T(c(w),0),M-P)),M+F-k>N)throw TypeError(R);for(B=h(D,k),V=0;V<k;V++)G=P+V,G in D&&g(B,V,D[G]);if(B.length=k,F<k){for(V=P;V<M-k;V++)G=V+k,K=V+F,G in D?D[K]=D[G]:delete D[K];for(V=M;V>M-k+F;V--)delete D[V-1]}else if(F>k)for(V=M-k;V>P;V--)G=V+k-1,K=V+F-1,G in D?D[K]=D[G]:delete D[K];for(V=0;V<F;V++)D[V+P]=arguments[V+2];return D.length=M-k+F,B}})},a4d3:function(a,o,i){var l=i("23e7"),r=i("da84"),c=i("d066"),u=i("c430"),d=i("83ab"),h=i("4930"),g=i("fdbf"),f=i("d039"),b=i("5135"),A=i("e8b5"),v=i("861d"),T=i("825a"),_=i("7b0b"),N=i("fc6a"),R=i("c04e"),O=i("5c6c"),x=i("7c73"),w=i("df75"),D=i("241c"),M=i("057f"),P=i("7418"),U=i("06cf"),F=i("9bf2"),k=i("d1e7"),B=i("9112"),V=i("6eeb"),G=i("5692"),K=i("f772"),se=i("d012"),ee=i("90e3"),X=i("b622"),z=i("e538"),H=i("746f"),q=i("d44e"),J=i("69f3"),de=i("b727").forEach,Te=K("hidden"),ce="Symbol",Ne="prototype",Me=X("toPrimitive"),Fe=J.set,Ge=J.getterFor(ce),je=Object[Ne],Ze=r.Symbol,nt=c("JSON","stringify"),st=U.f,At=F.f,Mt=M.f,Z=k.f,ie=G("symbols"),le=G("op-symbols"),ve=G("string-to-symbol-registry"),ge=G("symbol-to-string-registry"),Ie=G("wks"),Be=r.QObject,ye=!Be||!Be[Ne]||!Be[Ne].findChild,$e=d&&f(function(){return x(At({},"a",{get:function(){return At(this,"a",{value:7}).a}})).a!=7})?function(Se,Re,Ce){var Ue=st(je,Re);Ue&&delete je[Re],At(Se,Re,Ce),Ue&&Se!==je&&At(je,Re,Ue)}:At,Pe=function(Se,Re){var Ce=ie[Se]=x(Ze[Ne]);return Fe(Ce,{type:ce,tag:Se,description:Re}),d||(Ce.description=Re),Ce},pe=g?function(Se){return typeof Se=="symbol"}:function(Se){return Object(Se)instanceof Ze},Oe=function(Re,Ce,Ue){Re===je&&Oe(le,Ce,Ue),T(Re);var Le=R(Ce,!0);return T(Ue),b(ie,Le)?(Ue.enumerable?(b(Re,Te)&&Re[Te][Le]&&(Re[Te][Le]=!1),Ue=x(Ue,{enumerable:O(0,!1)})):(b(Re,Te)||At(Re,Te,O(1,{})),Re[Te][Le]=!0),$e(Re,Le,Ue)):At(Re,Le,Ue)},ke=function(Re,Ce){T(Re);var Ue=N(Ce),Le=w(Ue).concat(we(Ue));return de(Le,function(He){(!d||oe.call(Ue,He))&&Oe(Re,He,Ue[He])}),Re},Q=function(Re,Ce){return Ce===void 0?x(Re):ke(x(Re),Ce)},oe=function(Re){var Ce=R(Re,!0),Ue=Z.call(this,Ce);return this===je&&b(ie,Ce)&&!b(le,Ce)?!1:Ue||!b(this,Ce)||!b(ie,Ce)||b(this,Te)&&this[Te][Ce]?Ue:!0},me=function(Re,Ce){var Ue=N(Re),Le=R(Ce,!0);if(!(Ue===je&&b(ie,Le)&&!b(le,Le))){var He=st(Ue,Le);return He&&b(ie,Le)&&!(b(Ue,Te)&&Ue[Te][Le])&&(He.enumerable=!0),He}},Ee=function(Re){var Ce=Mt(N(Re)),Ue=[];return de(Ce,function(Le){!b(ie,Le)&&!b(se,Le)&&Ue.push(Le)}),Ue},we=function(Re){var Ce=Re===je,Ue=Mt(Ce?le:N(Re)),Le=[];return de(Ue,function(He){b(ie,He)&&(!Ce||b(je,He))&&Le.push(ie[He])}),Le};if(h||(Ze=function(){if(this instanceof Ze)throw TypeError("Symbol is not a constructor");var Re=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),Ce=ee(Re),Ue=function(Le){this===je&&Ue.call(le,Le),b(this,Te)&&b(this[Te],Ce)&&(this[Te][Ce]=!1),$e(this,Ce,O(1,Le))};return d&&ye&&$e(je,Ce,{configurable:!0,set:Ue}),Pe(Ce,Re)},V(Ze[Ne],"toString",function(){return Ge(this).tag}),V(Ze,"withoutSetter",function(Se){return Pe(ee(Se),Se)}),k.f=oe,F.f=Oe,U.f=me,D.f=M.f=Ee,P.f=we,z.f=function(Se){return Pe(X(Se),Se)},d&&(At(Ze[Ne],"description",{configurable:!0,get:function(){return Ge(this).description}}),u||V(je,"propertyIsEnumerable",oe,{unsafe:!0}))),l({global:!0,wrap:!0,forced:!h,sham:!h},{Symbol:Ze}),de(w(Ie),function(Se){H(Se)}),l({target:ce,stat:!0,forced:!h},{for:function(Se){var Re=String(Se);if(b(ve,Re))return ve[Re];var Ce=Ze(Re);return ve[Re]=Ce,ge[Ce]=Re,Ce},keyFor:function(Re){if(!pe(Re))throw TypeError(Re+" is not a symbol");if(b(ge,Re))return ge[Re]},useSetter:function(){ye=!0},useSimple:function(){ye=!1}}),l({target:"Object",stat:!0,forced:!h,sham:!d},{create:Q,defineProperty:Oe,defineProperties:ke,getOwnPropertyDescriptor:me}),l({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:Ee,getOwnPropertySymbols:we}),l({target:"Object",stat:!0,forced:f(function(){P.f(1)})},{getOwnPropertySymbols:function(Re){return P.f(_(Re))}}),nt){var he=!h||f(function(){var Se=Ze();return nt([Se])!="[null]"||nt({a:Se})!="{}"||nt(Object(Se))!="{}"});l({target:"JSON",stat:!0,forced:he},{stringify:function(Re,Ce,Ue){for(var Le=[Re],He=1,ct;arguments.length>He;)Le.push(arguments[He++]);if(ct=Ce,!(!v(Ce)&&Re===void 0||pe(Re)))return A(Ce)||(Ce=function(Ct,Je){if(typeof ct=="function"&&(Je=ct.call(this,Ct,Je)),!pe(Je))return Je}),Le[1]=Ce,nt.apply(null,Le)}})}Ze[Ne][Me]||B(Ze[Ne],Me,Ze[Ne].valueOf),q(Ze,ce),se[Te]=!0},a630:function(a,o,i){var l=i("23e7"),r=i("4df4"),c=i("1c7e"),u=!c(function(d){Array.from(d)});l({target:"Array",stat:!0,forced:u},{from:r})},a640:function(a,o,i){var l=i("d039");a.exports=function(r,c){var u=[][r];return!!u&&l(function(){u.call(null,c||function(){throw 1},1)})}},a691:function(a,o){var i=Math.ceil,l=Math.floor;a.exports=function(r){return isNaN(r=+r)?0:(r>0?l:i)(r)}},ab13:function(a,o,i){var l=i("b622"),r=l("match");a.exports=function(c){var u=/./;try{"/./"[c](u)}catch{try{return u[r]=!1,"/./"[c](u)}catch{}}return!1}},ac1f:function(a,o,i){var l=i("23e7"),r=i("9263");l({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(a,o,i){var l=i("825a");a.exports=function(){var r=l(this),c="";return r.global&&(c+="g"),r.ignoreCase&&(c+="i"),r.multiline&&(c+="m"),r.dotAll&&(c+="s"),r.unicode&&(c+="u"),r.sticky&&(c+="y"),c}},ae40:function(a,o,i){var l=i("83ab"),r=i("d039"),c=i("5135"),u=Object.defineProperty,d={},h=function(g){throw g};a.exports=function(g,f){if(c(d,g))return d[g];f||(f={});var b=[][g],A=c(f,"ACCESSORS")?f.ACCESSORS:!1,v=c(f,0)?f[0]:h,T=c(f,1)?f[1]:void 0;return d[g]=!!b&&!r(function(){if(A&&!l)return!0;var _={length:-1};A?u(_,1,{enumerable:!0,get:h}):_[1]=1,b.call(_,v,T)})}},ae93:function(a,o,i){var l=i("e163"),r=i("9112"),c=i("5135"),u=i("b622"),d=i("c430"),h=u("iterator"),g=!1,f=function(){return this},b,A,v;[].keys&&(v=[].keys(),"next"in v?(A=l(l(v)),A!==Object.prototype&&(b=A)):g=!0),b==null&&(b={}),!d&&!c(b,h)&&r(b,h,f),a.exports={IteratorPrototype:b,BUGGY_SAFARI_ITERATORS:g}},b041:function(a,o,i){var l=i("00ee"),r=i("f5df");a.exports=l?{}.toString:function(){return"[object "+r(this)+"]"}},b0c0:function(a,o,i){var l=i("83ab"),r=i("9bf2").f,c=Function.prototype,u=c.toString,d=/^\s*function ([^ (]*)/,h="name";l&&!(h in c)&&r(c,h,{configurable:!0,get:function(){try{return u.call(this).match(d)[1]}catch{return""}}})},b622:function(a,o,i){var l=i("da84"),r=i("5692"),c=i("5135"),u=i("90e3"),d=i("4930"),h=i("fdbf"),g=r("wks"),f=l.Symbol,b=h?f:f&&f.withoutSetter||u;a.exports=function(A){return c(g,A)||(d&&c(f,A)?g[A]=f[A]:g[A]=b("Symbol."+A)),g[A]}},b64b:function(a,o,i){var l=i("23e7"),r=i("7b0b"),c=i("df75"),u=i("d039"),d=u(function(){c(1)});l({target:"Object",stat:!0,forced:d},{keys:function(g){return c(r(g))}})},b727:function(a,o,i){var l=i("0366"),r=i("44ad"),c=i("7b0b"),u=i("50c4"),d=i("65f0"),h=[].push,g=function(f){var b=f==1,A=f==2,v=f==3,T=f==4,_=f==6,N=f==5||_;return function(R,O,x,w){for(var D=c(R),M=r(D),P=l(O,x,3),U=u(M.length),F=0,k=w||d,B=b?k(R,U):A?k(R,0):void 0,V,G;U>F;F++)if((N||F in M)&&(V=M[F],G=P(V,F,D),f)){if(b)B[F]=G;else if(G)switch(f){case 3:return!0;case 5:return V;case 6:return F;case 2:h.call(B,V)}else if(T)return!1}return _?-1:v||T?T:B}};a.exports={forEach:g(0),map:g(1),filter:g(2),some:g(3),every:g(4),find:g(5),findIndex:g(6)}},c04e:function(a,o,i){var l=i("861d");a.exports=function(r,c){if(!l(r))return r;var u,d;if(c&&typeof(u=r.toString)=="function"&&!l(d=u.call(r))||typeof(u=r.valueOf)=="function"&&!l(d=u.call(r))||!c&&typeof(u=r.toString)=="function"&&!l(d=u.call(r)))return d;throw TypeError("Can't convert object to primitive value")}},c430:function(a,o){a.exports=!1},c6b6:function(a,o){var i={}.toString;a.exports=function(l){return i.call(l).slice(8,-1)}},c6cd:function(a,o,i){var l=i("da84"),r=i("ce4e"),c="__core-js_shared__",u=l[c]||r(c,{});a.exports=u},c740:function(a,o,i){var l=i("23e7"),r=i("b727").findIndex,c=i("44d2"),u=i("ae40"),d="findIndex",h=!0,g=u(d);d in[]&&Array(1)[d](function(){h=!1}),l({target:"Array",proto:!0,forced:h||!g},{findIndex:function(b){return r(this,b,arguments.length>1?arguments[1]:void 0)}}),c(d)},c8ba:function(a,o){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}a.exports=i},c975:function(a,o,i){var l=i("23e7"),r=i("4d64").indexOf,c=i("a640"),u=i("ae40"),d=[].indexOf,h=!!d&&1/[1].indexOf(1,-0)<0,g=c("indexOf"),f=u("indexOf",{ACCESSORS:!0,1:0});l({target:"Array",proto:!0,forced:h||!g||!f},{indexOf:function(A){return h?d.apply(this,arguments)||0:r(this,A,arguments.length>1?arguments[1]:void 0)}})},ca84:function(a,o,i){var l=i("5135"),r=i("fc6a"),c=i("4d64").indexOf,u=i("d012");a.exports=function(d,h){var g=r(d),f=0,b=[],A;for(A in g)!l(u,A)&&l(g,A)&&b.push(A);for(;h.length>f;)l(g,A=h[f++])&&(~c(b,A)||b.push(A));return b}},caad:function(a,o,i){var l=i("23e7"),r=i("4d64").includes,c=i("44d2"),u=i("ae40"),d=u("indexOf",{ACCESSORS:!0,1:0});l({target:"Array",proto:!0,forced:!d},{includes:function(g){return r(this,g,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(a,o,i){var l=i("da84"),r=i("861d"),c=l.document,u=r(c)&&r(c.createElement);a.exports=function(d){return u?c.createElement(d):{}}},ce4e:function(a,o,i){var l=i("da84"),r=i("9112");a.exports=function(c,u){try{r(l,c,u)}catch{l[c]=u}return u}},d012:function(a,o){a.exports={}},d039:function(a,o){a.exports=function(i){try{return!!i()}catch{return!0}}},d066:function(a,o,i){var l=i("428f"),r=i("da84"),c=function(u){return typeof u=="function"?u:void 0};a.exports=function(u,d){return arguments.length<2?c(l[u])||c(r[u]):l[u]&&l[u][d]||r[u]&&r[u][d]}},d1e7:function(a,o,i){var l={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,c=r&&!l.call({1:2},1);o.f=c?function(d){var h=r(this,d);return!!h&&h.enumerable}:l},d28b:function(a,o,i){var l=i("746f");l("iterator")},d2bb:function(a,o,i){var l=i("825a"),r=i("3bbe");a.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,u={},d;try{d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,d.call(u,[]),c=u instanceof Array}catch{}return function(g,f){return l(g),r(f),c?d.call(g,f):g.__proto__=f,g}}():void 0)},d3b7:function(a,o,i){var l=i("00ee"),r=i("6eeb"),c=i("b041");l||r(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(a,o,i){var l=i("9bf2").f,r=i("5135"),c=i("b622"),u=c("toStringTag");a.exports=function(d,h,g){d&&!r(d=g?d:d.prototype,u)&&l(d,u,{configurable:!0,value:h})}},d58f:function(a,o,i){var l=i("1c0b"),r=i("7b0b"),c=i("44ad"),u=i("50c4"),d=function(h){return function(g,f,b,A){l(f);var v=r(g),T=c(v),_=u(v.length),N=h?_-1:0,R=h?-1:1;if(b<2)for(;;){if(N in T){A=T[N],N+=R;break}if(N+=R,h?N<0:_<=N)throw TypeError("Reduce of empty array with no initial value")}for(;h?N>=0:_>N;N+=R)N in T&&(A=f(A,T[N],N,v));return A}};a.exports={left:d(!1),right:d(!0)}},d784:function(a,o,i){i("ac1f");var l=i("6eeb"),r=i("d039"),c=i("b622"),u=i("9263"),d=i("9112"),h=c("species"),g=!r(function(){var T=/./;return T.exec=function(){var _=[];return _.groups={a:"7"},_},"".replace(T,"$<a>")!=="7"}),f=function(){return"a".replace(/./,"$0")==="$0"}(),b=c("replace"),A=function(){return/./[b]?/./[b]("a","$0")==="":!1}(),v=!r(function(){var T=/(?:)/,_=T.exec;T.exec=function(){return _.apply(this,arguments)};var N="ab".split(T);return N.length!==2||N[0]!=="a"||N[1]!=="b"});a.exports=function(T,_,N,R){var O=c(T),x=!r(function(){var F={};return F[O]=function(){return 7},""[T](F)!=7}),w=x&&!r(function(){var F=!1,k=/a/;return T==="split"&&(k={},k.constructor={},k.constructor[h]=function(){return k},k.flags="",k[O]=/./[O]),k.exec=function(){return F=!0,null},k[O](""),!F});if(!x||!w||T==="replace"&&!(g&&f&&!A)||T==="split"&&!v){var D=/./[O],M=N(O,""[T],function(F,k,B,V,G){return k.exec===u?x&&!G?{done:!0,value:D.call(k,B,V)}:{done:!0,value:F.call(B,k,V)}:{done:!1}},{REPLACE_KEEPS_$0:f,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:A}),P=M[0],U=M[1];l(String.prototype,T,P),l(RegExp.prototype,O,_==2?function(F,k){return U.call(F,this,k)}:function(F){return U.call(F,this)})}R&&d(RegExp.prototype[O],"sham",!0)}},d81d:function(a,o,i){var l=i("23e7"),r=i("b727").map,c=i("1dde"),u=i("ae40"),d=c("map"),h=u("map");l({target:"Array",proto:!0,forced:!d||!h},{map:function(f){return r(this,f,arguments.length>1?arguments[1]:void 0)}})},da84:function(a,o,i){(function(l){var r=function(c){return c&&c.Math==Math&&c};a.exports=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof l=="object"&&l)||Function("return this")()}).call(this,i("c8ba"))},dbb4:function(a,o,i){var l=i("23e7"),r=i("83ab"),c=i("56ef"),u=i("fc6a"),d=i("06cf"),h=i("8418");l({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(f){for(var b=u(f),A=d.f,v=c(b),T={},_=0,N,R;v.length>_;)R=A(b,N=v[_++]),R!==void 0&&h(T,N,R);return T}})},dbf1:function(a,o,i){(function(l){i.d(o,"a",function(){return c});function r(){return typeof window<"u"?window.console:l.console}var c=r()}).call(this,i("c8ba"))},ddb0:function(a,o,i){var l=i("da84"),r=i("fdbc"),c=i("e260"),u=i("9112"),d=i("b622"),h=d("iterator"),g=d("toStringTag"),f=c.values;for(var b in r){var A=l[b],v=A&&A.prototype;if(v){if(v[h]!==f)try{u(v,h,f)}catch{v[h]=f}if(v[g]||u(v,g,b),r[b]){for(var T in c)if(v[T]!==c[T])try{u(v,T,c[T])}catch{v[T]=c[T]}}}}},df75:function(a,o,i){var l=i("ca84"),r=i("7839");a.exports=Object.keys||function(u){return l(u,r)}},e01a:function(a,o,i){var l=i("23e7"),r=i("83ab"),c=i("da84"),u=i("5135"),d=i("861d"),h=i("9bf2").f,g=i("e893"),f=c.Symbol;if(r&&typeof f=="function"&&(!("description"in f.prototype)||f().description!==void 0)){var b={},A=function(){var O=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),x=this instanceof A?new f(O):O===void 0?f():f(O);return O===""&&(b[x]=!0),x};g(A,f);var v=A.prototype=f.prototype;v.constructor=A;var T=v.toString,_=String(f("test"))=="Symbol(test)",N=/^Symbol\((.*)\)[^)]+$/;h(v,"description",{configurable:!0,get:function(){var O=d(this)?this.valueOf():this,x=T.call(O);if(u(b,O))return"";var w=_?x.slice(7,-1):x.replace(N,"$1");return w===""?void 0:w}}),l({global:!0,forced:!0},{Symbol:A})}},e163:function(a,o,i){var l=i("5135"),r=i("7b0b"),c=i("f772"),u=i("e177"),d=c("IE_PROTO"),h=Object.prototype;a.exports=u?Object.getPrototypeOf:function(g){return g=r(g),l(g,d)?g[d]:typeof g.constructor=="function"&&g instanceof g.constructor?g.constructor.prototype:g instanceof Object?h:null}},e177:function(a,o,i){var l=i("d039");a.exports=!l(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype})},e260:function(a,o,i){var l=i("fc6a"),r=i("44d2"),c=i("3f8c"),u=i("69f3"),d=i("7dd0"),h="Array Iterator",g=u.set,f=u.getterFor(h);a.exports=d(Array,"Array",function(b,A){g(this,{type:h,target:l(b),index:0,kind:A})},function(){var b=f(this),A=b.target,v=b.kind,T=b.index++;return!A||T>=A.length?(b.target=void 0,{value:void 0,done:!0}):v=="keys"?{value:T,done:!1}:v=="values"?{value:A[T],done:!1}:{value:[T,A[T]],done:!1}},"values"),c.Arguments=c.Array,r("keys"),r("values"),r("entries")},e439:function(a,o,i){var l=i("23e7"),r=i("d039"),c=i("fc6a"),u=i("06cf").f,d=i("83ab"),h=r(function(){u(1)}),g=!d||h;l({target:"Object",stat:!0,forced:g,sham:!d},{getOwnPropertyDescriptor:function(b,A){return u(c(b),A)}})},e538:function(a,o,i){var l=i("b622");o.f=l},e893:function(a,o,i){var l=i("5135"),r=i("56ef"),c=i("06cf"),u=i("9bf2");a.exports=function(d,h){for(var g=r(h),f=u.f,b=c.f,A=0;A<g.length;A++){var v=g[A];l(d,v)||f(d,v,b(h,v))}}},e8b5:function(a,o,i){var l=i("c6b6");a.exports=Array.isArray||function(c){return l(c)=="Array"}},e95a:function(a,o,i){var l=i("b622"),r=i("3f8c"),c=l("iterator"),u=Array.prototype;a.exports=function(d){return d!==void 0&&(r.Array===d||u[c]===d)}},f5df:function(a,o,i){var l=i("00ee"),r=i("c6b6"),c=i("b622"),u=c("toStringTag"),d=r(function(){return arguments}())=="Arguments",h=function(g,f){try{return g[f]}catch{}};a.exports=l?r:function(g){var f,b,A;return g===void 0?"Undefined":g===null?"Null":typeof(b=h(f=Object(g),u))=="string"?b:d?r(f):(A=r(f))=="Object"&&typeof f.callee=="function"?"Arguments":A}},f772:function(a,o,i){var l=i("5692"),r=i("90e3"),c=l("keys");a.exports=function(u){return c[u]||(c[u]=r(u))}},fb15:function(a,o,i){if(i.r(o),typeof window<"u"){var l=window.document.currentScript;{var r=i("8875");l=r(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:r})}var c=l&&l.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(i.p=c[1])}i("99af"),i("4de4"),i("4160"),i("c975"),i("d81d"),i("a434"),i("159b"),i("a4d3"),i("e439"),i("dbb4"),i("b64b");function u(pe,Oe,ke){return Oe in pe?Object.defineProperty(pe,Oe,{value:ke,enumerable:!0,configurable:!0,writable:!0}):pe[Oe]=ke,pe}function d(pe,Oe){var ke=Object.keys(pe);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(pe);Oe&&(Q=Q.filter(function(oe){return Object.getOwnPropertyDescriptor(pe,oe).enumerable})),ke.push.apply(ke,Q)}return ke}function h(pe){for(var Oe=1;Oe<arguments.length;Oe++){var ke=arguments[Oe]!=null?arguments[Oe]:{};Oe%2?d(Object(ke),!0).forEach(function(Q){u(pe,Q,ke[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(ke)):d(Object(ke)).forEach(function(Q){Object.defineProperty(pe,Q,Object.getOwnPropertyDescriptor(ke,Q))})}return pe}function g(pe){if(Array.isArray(pe))return pe}i("e01a"),i("d28b"),i("e260"),i("d3b7"),i("3ca3"),i("ddb0");function f(pe,Oe){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(pe)))){var ke=[],Q=!0,oe=!1,me=void 0;try{for(var Ee=pe[Symbol.iterator](),we;!(Q=(we=Ee.next()).done)&&(ke.push(we.value),!(Oe&&ke.length===Oe));Q=!0);}catch(he){oe=!0,me=he}finally{try{!Q&&Ee.return!=null&&Ee.return()}finally{if(oe)throw me}}return ke}}i("a630"),i("fb6a"),i("b0c0"),i("25f0");function b(pe,Oe){(Oe==null||Oe>pe.length)&&(Oe=pe.length);for(var ke=0,Q=new Array(Oe);ke<Oe;ke++)Q[ke]=pe[ke];return Q}function A(pe,Oe){if(pe){if(typeof pe=="string")return b(pe,Oe);var ke=Object.prototype.toString.call(pe).slice(8,-1);if(ke==="Object"&&pe.constructor&&(ke=pe.constructor.name),ke==="Map"||ke==="Set")return Array.from(pe);if(ke==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ke))return b(pe,Oe)}}function v(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T(pe,Oe){return g(pe)||f(pe,Oe)||A(pe,Oe)||v()}function _(pe){if(Array.isArray(pe))return b(pe)}function N(pe){if(typeof Symbol<"u"&&Symbol.iterator in Object(pe))return Array.from(pe)}function R(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O(pe){return _(pe)||N(pe)||A(pe)||R()}var x=i("a352"),w=i.n(x);function D(pe){pe.parentElement!==null&&pe.parentElement.removeChild(pe)}function M(pe,Oe,ke){var Q=ke===0?pe.children[0]:pe.children[ke-1].nextSibling;pe.insertBefore(Oe,Q)}var P=i("dbf1");i("13d5"),i("4fad"),i("ac1f"),i("5319");function U(pe){var Oe=Object.create(null);return function(Q){var oe=Oe[Q];return oe||(Oe[Q]=pe(Q))}}var F=/-(\w)/g,k=U(function(pe){return pe.replace(F,function(Oe,ke){return ke.toUpperCase()})});i("5db7"),i("73d9");var B=["Start","Add","Remove","Update","End"],V=["Choose","Unchoose","Sort","Filter","Clone"],G=["Move"],K=[G,B,V].flatMap(function(pe){return pe}).map(function(pe){return"on".concat(pe)}),se={manage:G,manageAndEmit:B,emit:V};function ee(pe){return K.indexOf(pe)!==-1}i("caad"),i("2ca0");var X=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function z(pe){return X.includes(pe)}function H(pe){return["transition-group","TransitionGroup"].includes(pe)}function q(pe){return["id","class","role","style"].includes(pe)||pe.startsWith("data-")||pe.startsWith("aria-")||pe.startsWith("on")}function J(pe){return pe.reduce(function(Oe,ke){var Q=T(ke,2),oe=Q[0],me=Q[1];return Oe[oe]=me,Oe},{})}function de(pe){var Oe=pe.$attrs,ke=pe.componentData,Q=ke===void 0?{}:ke,oe=J(Object.entries(Oe).filter(function(me){var Ee=T(me,2),we=Ee[0];return Ee[1],q(we)}));return h(h({},oe),Q)}function Te(pe){var Oe=pe.$attrs,ke=pe.callBackBuilder,Q=J(ce(Oe));Object.entries(ke).forEach(function(me){var Ee=T(me,2),we=Ee[0],he=Ee[1];se[we].forEach(function(Se){Q["on".concat(Se)]=he(Se)})});var oe="[data-draggable]".concat(Q.draggable||"");return h(h({},Q),{},{draggable:oe})}function ce(pe){return Object.entries(pe).filter(function(Oe){var ke=T(Oe,2),Q=ke[0];return ke[1],!q(Q)}).map(function(Oe){var ke=T(Oe,2),Q=ke[0],oe=ke[1];return[k(Q),oe]}).filter(function(Oe){var ke=T(Oe,2),Q=ke[0];return ke[1],!ee(Q)})}i("c740");function Ne(pe,Oe){if(!(pe instanceof Oe))throw new TypeError("Cannot call a class as a function")}function Me(pe,Oe){for(var ke=0;ke<Oe.length;ke++){var Q=Oe[ke];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(pe,Q.key,Q)}}function Fe(pe,Oe,ke){return Oe&&Me(pe.prototype,Oe),pe}var Ge=function(Oe){var ke=Oe.el;return ke},je=function(Oe,ke){return Oe.__draggable_context=ke},Ze=function(Oe){return Oe.__draggable_context},nt=function(){function pe(Oe){var ke=Oe.nodes,Q=ke.header,oe=ke.default,me=ke.footer,Ee=Oe.root,we=Oe.realList;Ne(this,pe),this.defaultNodes=oe,this.children=[].concat(O(Q),O(oe),O(me)),this.externalComponent=Ee.externalComponent,this.rootTransition=Ee.transition,this.tag=Ee.tag,this.realList=we}return Fe(pe,[{key:"render",value:function(ke,Q){var oe=this.tag,me=this.children,Ee=this._isRootComponent,we=Ee?{default:function(){return me}}:me;return ke(oe,Q,we)}},{key:"updated",value:function(){var ke=this.defaultNodes,Q=this.realList;ke.forEach(function(oe,me){je(Ge(oe),{element:Q[me],index:me})})}},{key:"getUnderlyingVm",value:function(ke){return Ze(ke)}},{key:"getVmIndexFromDomIndex",value:function(ke,Q){var oe=this.defaultNodes,me=oe.length,Ee=Q.children,we=Ee.item(ke);if(we===null)return me;var he=Ze(we);if(he)return he.index;if(me===0)return 0;var Se=Ge(oe[0]),Re=O(Ee).findIndex(function(Ce){return Ce===Se});return ke<Re?0:me}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),pe}(),st=i("8bbf");function At(pe,Oe){var ke=pe[Oe];return ke?ke():[]}function Mt(pe){var Oe=pe.$slots,ke=pe.realList,Q=pe.getKey,oe=ke||[],me=["header","footer"].map(function(Ce){return At(Oe,Ce)}),Ee=T(me,2),we=Ee[0],he=Ee[1],Se=Oe.item;if(!Se)throw new Error("draggable element must have an item slot");var Re=oe.flatMap(function(Ce,Ue){return Se({element:Ce,index:Ue}).map(function(Le){return Le.key=Q(Ce),Le.props=h(h({},Le.props||{}),{},{"data-draggable":!0}),Le})});if(Re.length!==oe.length)throw new Error("Item slot must have only one child");return{header:we,footer:he,default:Re}}function Z(pe){var Oe=H(pe),ke=!z(pe)&&!Oe;return{transition:Oe,externalComponent:ke,tag:ke?Object(st.resolveComponent)(pe):Oe?st.TransitionGroup:pe}}function ie(pe){var Oe=pe.$slots,ke=pe.tag,Q=pe.realList,oe=pe.getKey,me=Mt({$slots:Oe,realList:Q,getKey:oe}),Ee=Z(ke);return new nt({nodes:me,root:Ee,realList:Q})}function le(pe,Oe){var ke=this;Object(st.nextTick)(function(){return ke.$emit(pe.toLowerCase(),Oe)})}function ve(pe){var Oe=this;return function(ke,Q){if(Oe.realList!==null)return Oe["onDrag".concat(pe)](ke,Q)}}function ge(pe){var Oe=this,ke=ve.call(this,pe);return function(Q,oe){ke.call(Oe,Q,oe),le.call(Oe,pe,Q)}}var Ie=null,Be={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(Oe){return Oe}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},ye=["update:modelValue","change"].concat(O([].concat(O(se.manageAndEmit),O(se.emit)).map(function(pe){return pe.toLowerCase()}))),$e=Object(st.defineComponent)({name:"draggable",inheritAttrs:!1,props:Be,emits:ye,data:function(){return{error:!1}},render:function(){try{this.error=!1;var Oe=this.$slots,ke=this.$attrs,Q=this.tag,oe=this.componentData,me=this.realList,Ee=this.getKey,we=ie({$slots:Oe,tag:Q,realList:me,getKey:Ee});this.componentStructure=we;var he=de({$attrs:ke,componentData:oe});return we.render(st.h,he)}catch(Se){return this.error=!0,Object(st.h)("pre",{style:{color:"red"}},Se.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&P.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var Oe=this;if(!this.error){var ke=this.$attrs,Q=this.$el,oe=this.componentStructure;oe.updated();var me=Te({$attrs:ke,callBackBuilder:{manageAndEmit:function(he){return ge.call(Oe,he)},emit:function(he){return le.bind(Oe,he)},manage:function(he){return ve.call(Oe,he)}}}),Ee=Q.nodeType===1?Q:Q.parentElement;this._sortable=new w.a(Ee,me),this.targetDomElement=Ee,Ee.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var Oe=this.list;return Oe||this.modelValue},getKey:function(){var Oe=this.itemKey;return typeof Oe=="function"?Oe:function(ke){return ke[Oe]}}},watch:{$attrs:{handler:function(Oe){var ke=this._sortable;ke&&ce(Oe).forEach(function(Q){var oe=T(Q,2),me=oe[0],Ee=oe[1];ke.option(me,Ee)})},deep:!0}},methods:{getUnderlyingVm:function(Oe){return this.componentStructure.getUnderlyingVm(Oe)||null},getUnderlyingPotencialDraggableComponent:function(Oe){return Oe.__draggable_component__},emitChanges:function(Oe){var ke=this;Object(st.nextTick)(function(){return ke.$emit("change",Oe)})},alterList:function(Oe){if(this.list){Oe(this.list);return}var ke=O(this.modelValue);Oe(ke),this.$emit("update:modelValue",ke)},spliceList:function(){var Oe=arguments,ke=function(oe){return oe.splice.apply(oe,O(Oe))};this.alterList(ke)},updatePosition:function(Oe,ke){var Q=function(me){return me.splice(ke,0,me.splice(Oe,1)[0])};this.alterList(Q)},getRelatedContextFromMoveEvent:function(Oe){var ke=Oe.to,Q=Oe.related,oe=this.getUnderlyingPotencialDraggableComponent(ke);if(!oe)return{component:oe};var me=oe.realList,Ee={list:me,component:oe};if(ke!==Q&&me){var we=oe.getUnderlyingVm(Q)||{};return h(h({},we),Ee)}return Ee},getVmIndexFromDomIndex:function(Oe){return this.componentStructure.getVmIndexFromDomIndex(Oe,this.targetDomElement)},onDragStart:function(Oe){this.context=this.getUnderlyingVm(Oe.item),Oe.item._underlying_vm_=this.clone(this.context.element),Ie=Oe.item},onDragAdd:function(Oe){var ke=Oe.item._underlying_vm_;if(ke!==void 0){D(Oe.item);var Q=this.getVmIndexFromDomIndex(Oe.newIndex);this.spliceList(Q,0,ke);var oe={element:ke,newIndex:Q};this.emitChanges({added:oe})}},onDragRemove:function(Oe){if(M(this.$el,Oe.item,Oe.oldIndex),Oe.pullMode==="clone"){D(Oe.clone);return}var ke=this.context,Q=ke.index,oe=ke.element;this.spliceList(Q,1);var me={element:oe,oldIndex:Q};this.emitChanges({removed:me})},onDragUpdate:function(Oe){D(Oe.item),M(Oe.from,Oe.item,Oe.oldIndex);var ke=this.context.index,Q=this.getVmIndexFromDomIndex(Oe.newIndex);this.updatePosition(ke,Q);var oe={element:this.context.element,oldIndex:ke,newIndex:Q};this.emitChanges({moved:oe})},computeFutureIndex:function(Oe,ke){if(!Oe.element)return 0;var Q=O(ke.to.children).filter(function(we){return we.style.display!=="none"}),oe=Q.indexOf(ke.related),me=Oe.component.getVmIndexFromDomIndex(oe),Ee=Q.indexOf(Ie)!==-1;return Ee||!ke.willInsertAfter?me:me+1},onDragMove:function(Oe,ke){var Q=this.move,oe=this.realList;if(!Q||!oe)return!0;var me=this.getRelatedContextFromMoveEvent(Oe),Ee=this.computeFutureIndex(me,Oe),we=h(h({},this.context),{},{futureIndex:Ee}),he=h(h({},Oe),{},{relatedContext:me,draggedContext:we});return Q(he,ke)},onDragEnd:function(){Ie=null}}}),Pe=$e;o.default=Pe},fb6a:function(a,o,i){var l=i("23e7"),r=i("861d"),c=i("e8b5"),u=i("23cb"),d=i("50c4"),h=i("fc6a"),g=i("8418"),f=i("b622"),b=i("1dde"),A=i("ae40"),v=b("slice"),T=A("slice",{ACCESSORS:!0,0:0,1:2}),_=f("species"),N=[].slice,R=Math.max;l({target:"Array",proto:!0,forced:!v||!T},{slice:function(x,w){var D=h(this),M=d(D.length),P=u(x,M),U=u(w===void 0?M:w,M),F,k,B;if(c(D)&&(F=D.constructor,typeof F=="function"&&(F===Array||c(F.prototype))?F=void 0:r(F)&&(F=F[_],F===null&&(F=void 0)),F===Array||F===void 0))return N.call(D,P,U);for(k=new(F===void 0?Array:F)(R(U-P,0)),B=0;P<U;P++,B++)P in D&&g(k,B,D[P]);return k.length=B,k}})},fc6a:function(a,o,i){var l=i("44ad"),r=i("1d80");a.exports=function(c){return l(r(c))}},fdbc:function(a,o){a.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(a,o,i){var l=i("4930");a.exports=l&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(UA);var aZ=UA.exports;const cu=mg(aZ),oZ={components:{Draggable:cu,ToggleSwitch:va},props:{preChatFields:{type:Array,default:()=>[]}},emits:["update","dragEnd"],data(){return{preChatFieldOptions:this.preChatFields}},watch:{preChatFields(){this.preChatFieldOptions=this.preChatFields}},methods:{isFieldEditable(e){return!e.enabled},handlePreChatFieldOptions(e,t,n){this.$emit("update",e,t,n)},onDragEnd(){this.$emit("dragEnd",this.preChatFieldOptions)}}},iZ={class:"border-b border-n-weak"},lZ={class:"pre-chat-field"},rZ={class:"pre-chat-field"},cZ={class:"pre-chat-field"},uZ=["onUpdate:modelValue","value","disabled","onClick"],dZ=["onUpdate:modelValue","disabled"],pZ=["onUpdate:modelValue","disabled"];function mZ(e,t,n,s,a,o){const i=W("fluent-icon"),l=W("ToggleSwitch"),r=W("Draggable");return p(),L(r,{modelValue:a.preChatFieldOptions,"onUpdate:modelValue":t[0]||(t[0]=c=>a.preChatFieldOptions=c),tag:"tbody","item-key":"name",onEnd:o.onDragEnd},{item:Y(({element:c})=>[m("tr",iZ,[m("td",lZ,[S(i,{icon:"drag"})]),m("td",rZ,[S(l,{"model-value":c.enabled,onChange:u=>o.handlePreChatFieldOptions(u,"enabled",c)},null,8,["model-value","onChange"])]),m("td",{class:ae(["pre-chat-field",{"disabled-text":!c.enabled}])},I(c.name),3),m("td",{class:ae(["pre-chat-field",{"disabled-text":!c.enabled}])},I(c.type),3),m("td",cZ,[re(m("input",{"onUpdate:modelValue":u=>c.required=u,type:"checkbox",value:`${c.name}-required`,disabled:!c.enabled,onClick:u=>o.handlePreChatFieldOptions(u,"required",c)},null,8,uZ),[[dn,c.required]])]),m("td",{class:ae(["pre-chat-field",{"disabled-text":!c.enabled}])},[re(m("input",{"onUpdate:modelValue":u=>c.label=u,type:"text",disabled:o.isFieldEditable(c)},null,8,dZ),[[gt,c.label]])],2),m("td",{class:ae(["pre-chat-field",{"disabled-text":!c.enabled}])},[re(m("input",{"onUpdate:modelValue":u=>c.placeholder=u,type:"text",disabled:o.isFieldEditable(c)},null,8,pZ),[[gt,c.placeholder]])],2)])]),_:1},8,["modelValue","onEnd"])}const hZ=De(oZ,[["render",mZ],["__scopeId","data-v-8bd42b45"]]),zd=Object.fromEntries(Object.entries(qN).filter(([e])=>e.includes("en"))).en,fZ={emailAddress:{key:"EMAIL_ADDRESS",label:"Email Id",placeholder:"Please enter your email address"},fullName:{key:"FULL_NAME",label:"Full Name",placeholder:"Please enter your full name"},phoneNumber:{key:"PHONE_NUMBER",label:"Phone Number",placeholder:"Please enter your phone number"}},gZ=({key:e,label:t})=>zd.PRE_CHAT_FORM.FIELDS[e]?zd.PRE_CHAT_FORM.FIELDS[e].LABEL:t,_Z=({key:e,placeholder:t})=>zd.PRE_CHAT_FORM.FIELDS[e]?zd.PRE_CHAT_FORM.FIELDS[e].PLACEHOLDER:t,vZ=({standardFields:e,customAttributes:t})=>{let n=[];const{pre_chat_fields:s}=e;return t.forEach(a=>{s.find(i=>i.name===a.attribute_key)||n.push({label:a.attribute_display_name,placeholder:a.attribute_display_name,name:a.attribute_key,type:a.attribute_display_type,values:a.attribute_values,field_type:a.attribute_model,regex_pattern:a.regex_pattern,regex_cue:a.regex_cue,required:!1,enabled:!1})}),n},EZ=({preChatFields:e})=>e.map(t=>({...t,label:gZ({key:t.name,label:t.label?t.label:t.name}),placeholder:_Z({key:t.name,placeholder:t.placeholder?t.placeholder:t.name})})),bZ=({preChatFormOptions:e={},customAttributes:t=[]})=>{const{pre_chat_message:n,pre_chat_fields:s}=e;let a={},o={};const i=EZ({preChatFields:s});return a=vZ({standardFields:{pre_chat_fields:i},customAttributes:t}),o=[...i,...a],{pre_chat_message:n,pre_chat_fields:o}},TZ={components:{PreChatFields:hZ,WootMessageEditor:ai,NextButton:te},props:{inbox:{type:Object,default:()=>({})}},data(){return{preChatFormEnabled:!1,preChatMessage:"",preChatFields:[]}},computed:{...mt({uiFlags:"inboxes/getUIFlags",customAttributes:"attributes/getAttributes"}),preChatFieldOptions(){const{pre_chat_form_options:e}=this.inbox;return bZ({preChatFormOptions:e,customAttributes:this.customAttributes})}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{pre_chat_form_enabled:e}=this.inbox;this.preChatFormEnabled=e;const{pre_chat_message:t,pre_chat_fields:n}=this.preChatFieldOptions||{};this.preChatMessage=t,this.preChatFields=n},isFieldEditable(e){return!!fZ[e.name]||!e.enabled},handlePreChatFieldOptions(e,t,n){this.preChatFields.forEach((s,a)=>{s.name===n.name&&(this.preChatFields[a][t]=!n[t])})},changePreChatFieldFieldsOrder(e){this.preChatFields=e},async updateInbox(){try{const e={id:this.inbox.id,formData:!1,channel:{pre_chat_form_enabled:this.preChatFormEnabled,pre_chat_form_options:{pre_chat_message:this.preChatMessage,pre_chat_fields:this.preChatFields}}};await this.$store.dispatch("inboxes/updateInbox",e),ne(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{ne(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}}}},SZ={class:"mx-8 my-2 text-base"},AZ={class:"mx-0 mt-6 mb-3"},yZ={class:"w-1/4"},IZ={value:!0},CZ={value:!1},NZ={key:0},OZ={class:"mt-4"},RZ={class:"table w-full table-striped mt-4"},xZ={class:"thead-dark"},wZ={class:"[&>th]:font-semibold [&>th]:tracking-[1px] ltr:[&>th]:text-left rtl:[&>th]:text-right [&>th]:px-2.5 [&>th]:uppercase [&>th]:text-n-slate-12"},$Z={scope:"col"},MZ={scope:"col"},LZ={scope:"col"},DZ={scope:"col"},PZ={scope:"col"},kZ={class:"w-auto my-4"};function BZ(e,t,n,s,a,o){const i=W("WootMessageEditor"),l=W("PreChatFields"),r=W("NextButton");return p(),E("div",SZ,[m("div",AZ,I(e.$t("INBOX_MGMT.PRE_CHAT_FORM.DESCRIPTION")),1),m("form",{class:"flex flex-col",onSubmit:t[2]||(t[2]=Ve((...c)=>o.updateInbox&&o.updateInbox(...c),["prevent"]))},[m("label",yZ,[xe(I(e.$t("INBOX_MGMT.PRE_CHAT_FORM.ENABLE.LABEL"))+" ",1),re(m("select",{"onUpdate:modelValue":t[0]||(t[0]=c=>a.preChatFormEnabled=c)},[m("option",IZ,I(e.$t("INBOX_MGMT.PRE_CHAT_FORM.ENABLE.OPTIONS.ENABLED")),1),m("option",CZ,I(e.$t("INBOX_MGMT.PRE_CHAT_FORM.ENABLE.OPTIONS.DISABLED")),1)],512),[[Nn,a.preChatFormEnabled]])]),a.preChatFormEnabled?(p(),E("div",NZ,[m("div",null,[m("label",null,I(e.$t("INBOX_MGMT.PRE_CHAT_FORM.PRE_CHAT_MESSAGE.LABEL")),1),S(i,{modelValue:a.preChatMessage,"onUpdate:modelValue":t[1]||(t[1]=c=>a.preChatMessage=c),class:"message-editor",placeholder:e.$t("INBOX_MGMT.PRE_CHAT_FORM.PRE_CHAT_MESSAGE.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),m("div",OZ,[m("label",null,I(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS")),1),m("table",RZ,[m("thead",xZ,[m("tr",wZ,[t[3]||(t[3]=m("th",{scope:"col"},null,-1)),t[4]||(t[4]=m("th",{scope:"col"},null,-1)),m("th",$Z,I(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.KEY")),1),m("th",MZ,I(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.TYPE")),1),m("th",LZ,I(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.REQUIRED")),1),m("th",DZ,I(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.LABEL")),1),m("th",PZ,I(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.PLACE_HOLDER")),1)])]),S(l,{"pre-chat-fields":a.preChatFields,onUpdate:o.handlePreChatFieldOptions,onDragEnd:o.changePreChatFieldFieldsOrder},null,8,["pre-chat-fields","onUpdate","onDragEnd"])])])])):$("",!0),m("div",kZ,[S(r,{type:"submit",label:e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE_PRE_CHAT_FORM_SETTINGS"),"is-loading":e.uiFlags.isUpdating},null,8,["label","is-loading"])])],32)])}const UZ=De(TZ,[["render",BZ],["__scopeId","data-v-26636f87"]]),Bu=ZN(30),FZ={components:{},props:{dayName:{type:String,required:!0},timeSlot:{type:Object,default:()=>({from:"",to:""})}},emits:["update"],computed:{fromTimeSlots(){return Bu},toTimeSlots(){return Bu.filter(e=>e!=="12:00 AM")},isDayEnabled:{get(){return!!(this.timeSlot.from&&this.timeSlot.to)},set(e){const t=e?{...this.timeSlot,from:Bu[0],to:Bu[16],valid:!0,openAllDay:!1}:{...this.timeSlot,from:"",to:"",valid:!1,openAllDay:!1};this.$emit("update",t)}},fromTime:{get(){return this.timeSlot.from},set(e){const t=lc(e,"hh:mm a",new Date),n=dd(this.toDate,t)/60>0;this.$emit("update",{...this.timeSlot,from:e,valid:n})}},toTime:{get(){return this.timeSlot.to},set(e){const t=lc(e,"hh:mm a",new Date);if(e==="12:00 AM")this.$emit("update",{...this.timeSlot,to:e,valid:!0});else{const n=dd(t,this.fromDate)/60>0;this.$emit("update",{...this.timeSlot,to:e,valid:n})}}},fromDate(){return lc(this.fromTime,"hh:mm a",new Date)},toDate(){return lc(this.toTime,"hh:mm a",new Date)},totalHours(){if(this.timeSlot.openAllDay)return"24h";const e=dd(this.toDate,this.fromDate),[t,n]=[Math.floor(e/60),e%60];return[t&&`${t}h`,n&&`${n}m`].filter(Boolean).join(" ")||"0m"},hasError(){return!this.timeSlot.valid},isOpenAllDay:{get(){return this.timeSlot.openAllDay},set(e){e?this.$emit("update",{...this.timeSlot,from:"12:00 AM",to:"11:59 PM",valid:!0,openAllDay:e}):this.$emit("update",{...this.timeSlot,from:"09:00 AM",to:"05:00 PM",valid:!0,openAllDay:e})}}}},GZ={class:"day-wrap flex py-2 gap-1 items-center px-0 min-h-[3rem] box-content border-b border-solid border-n-weak"},VZ={class:"checkbox-wrap flex items-center"},HZ=["title"],WZ={class:"day flex items-center py-0 px-3 text-sm font-medium flex-shrink-0 min-w-28"},zZ={key:0,class:"flex flex-col flex-shrink-0 flex-grow relative"},YZ={class:"flex items-center flex-shrink-0 flex-grow"},jZ={class:"checkbox-wrap flex items-center open-all-day mr-6"},KZ=["title"],XZ={class:"text-sm font-medium ml-1"},qZ={class:"separator-icon flex items-center py-0 px-3"},ZZ={key:0,class:"date-error pt-1"},QZ={class:"error text-xs text-n-ruby-9"},JZ={key:1,class:"flex items-center flex-shrink-0 flex-grow text-sm text-n-slate-11"},eQ={key:0,class:"label bg-n-brand/10 dark:bg-n-brand/30 text-n-blue-text text-xs inline-block px-2 py-1 rounded-lg cursor-default whitespace-nowrap"};function tQ(e,t,n,s,a,o){const i=W("multiselect"),l=W("fluent-icon");return p(),E("div",GZ,[m("div",VZ,[re(m("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.isDayEnabled=r),name:"enable-day",class:"m-0",type:"checkbox",title:e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.ENABLE")},null,8,HZ),[[dn,o.isDayEnabled]])]),m("div",WZ,[m("span",null,I(n.dayName),1)]),o.isDayEnabled?(p(),E("div",zZ,[m("div",YZ,[m("div",jZ,[re(m("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>o.isOpenAllDay=r),name:"enable-open-all-day",class:"enable-checkbox text-sm font-medium",type:"checkbox",title:e.$t("INBOX_MGMT.BUSINESS_HOURS.ALL_DAY")},null,8,KZ),[[dn,o.isOpenAllDay]]),m("span",XZ,I(e.$t("INBOX_MGMT.BUSINESS_HOURS.ALL_DAY")),1)]),S(i,{modelValue:o.fromTime,"onUpdate:modelValue":t[2]||(t[2]=r=>o.fromTime=r),options:o.fromTimeSlots,"deselect-label":"","select-label":"","selected-label":"",placeholder:e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.CHOOSE"),"allow-empty":!1,disabled:o.isOpenAllDay},null,8,["modelValue","options","placeholder","disabled"]),m("div",qZ,[S(l,{icon:"subtract",type:"solid",size:"16"})]),S(i,{modelValue:o.toTime,"onUpdate:modelValue":t[3]||(t[3]=r=>o.toTime=r),options:o.toTimeSlots,"deselect-label":"","select-label":"","selected-label":"",placeholder:e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.CHOOSE"),"allow-empty":!1,disabled:o.isOpenAllDay},null,8,["modelValue","options","placeholder","disabled"])]),o.hasError?(p(),E("div",ZZ,[m("span",QZ,I(e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.VALIDATION_ERROR")),1)])):$("",!0)])):(p(),E("div",JZ,[m("span",null,I(e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.UNAVAILABLE")),1)])),m("div",null,[o.isDayEnabled&&!o.hasError?(p(),E("span",eQ,I(o.totalHours),1)):$("",!0)])])}const nQ=De(FZ,[["render",tQ],["__scopeId","data-v-10b21ee7"]]),hb={label:"Pacific Time (US & Canada) (GMT-07:00)",value:"America/Los_Angeles"},sQ={components:{SettingsSection:yl,BusinessDay:nQ,NextButton:te,WootMessageEditor:ai},mixins:[wr],props:{inbox:{type:Object,default:()=>({})}},data(){return{isBusinessHoursEnabled:!1,unavailableMessage:"",timeZone:hb,dayNames:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},timeSlots:[...yv]}},computed:{...mt({uiFlags:"inboxes/getUIFlags"}),hasError(){return this.isBusinessHoursEnabled?this.timeSlots.filter(e=>e.from&&!e.valid).length>0:!1},timeZones(){return[...JN()]},isRichEditorEnabled(){return!(this.isATwilioChannel||this.isATwitterInbox||this.isAFacebookInbox)}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{working_hours_enabled:e=!1,out_of_office_message:t,working_hours:n=[],timezone:s}=this.inbox,a=Av(n).length?Av(n):yv;this.isBusinessHoursEnabled=e,this.unavailableMessage=t||"",this.timeSlots=a,this.timeZone=this.timeZones.find(o=>s===o.value)||hb},onSlotUpdate(e,t){this.timeSlots=this.timeSlots.map(n=>n.day===e?t:n)},async updateInbox(){try{const e={id:this.inbox.id,formData:!1,working_hours_enabled:this.isBusinessHoursEnabled,out_of_office_message:this.unavailableMessage,working_hours:QN(this.timeSlots),timezone:this.timeZone.value,channel:{}};await this.$store.dispatch("inboxes/updateInbox",e),ne(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch(e){ne(e.message||this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}}}},aQ={class:"mx-8"},oQ={for:"toggle-business-hours",class:"toggle-input-wrap"},iQ={class:"mb-4 text-n-slate-11"},lQ={key:0,class:"mb-6"},rQ={class:"unavailable-input-wrap"},cQ={key:0,class:"px-4 py-0 mx-0 mt-0 mb-4 rounded-lg outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 bg-n-alpha-black2"},uQ={class:"timezone-input-wrap"};function dQ(e,t,n,s,a,o){const i=W("WootMessageEditor"),l=W("multiselect"),r=W("BusinessDay"),c=W("NextButton"),u=W("SettingsSection");return p(),E("div",aQ,[S(u,{title:e.$t("INBOX_MGMT.BUSINESS_HOURS.TITLE"),"sub-title":e.$t("INBOX_MGMT.BUSINESS_HOURS.SUBTITLE")},{default:Y(()=>[m("form",{onSubmit:t[4]||(t[4]=Ve((...d)=>o.updateInbox&&o.updateInbox(...d),["prevent"]))},[m("label",oQ,[re(m("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>a.isBusinessHoursEnabled=d),type:"checkbox",class:"ltr:mr-2 rtl:ml-2",name:"toggle-business-hours"},null,512),[[dn,a.isBusinessHoursEnabled]]),xe(" "+I(e.$t("INBOX_MGMT.BUSINESS_HOURS.TOGGLE_AVAILABILITY")),1)]),m("p",iQ,I(e.$t("INBOX_MGMT.BUSINESS_HOURS.TOGGLE_HELP")),1),a.isBusinessHoursEnabled?(p(),E("div",lQ,[m("div",null,[m("label",rQ,I(e.$t("INBOX_MGMT.BUSINESS_HOURS.UNAVAILABLE_MESSAGE_LABEL")),1),o.isRichEditorEnabled?(p(),E("div",cQ,[S(i,{modelValue:a.unavailableMessage,"onUpdate:modelValue":t[1]||(t[1]=d=>a.unavailableMessage=d),"enable-variables":"","is-format-mode":"","min-height":4},null,8,["modelValue"])])):re((p(),E("textarea",{key:1,"onUpdate:modelValue":t[2]||(t[2]=d=>a.unavailableMessage=d),type:"text"},null,512)),[[gt,a.unavailableMessage]])]),m("div",uQ,[m("label",null,I(e.$t("INBOX_MGMT.BUSINESS_HOURS.TIMEZONE_LABEL")),1),S(l,{modelValue:a.timeZone,"onUpdate:modelValue":t[3]||(t[3]=d=>a.timeZone=d),options:o.timeZones,"deselect-label":"","select-label":"","selected-label":"","track-by":"value",label:"label","close-on-select":"",placeholder:e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.CHOOSE"),"allow-empty":!1},null,8,["modelValue","options","placeholder"])]),m("label",null,I(e.$t("INBOX_MGMT.BUSINESS_HOURS.WEEKLY_TITLE")),1),(p(!0),E(ue,null,Ae(a.timeSlots,d=>(p(),L(r,{key:d.day,"day-name":a.dayNames[d.day],"time-slot":d,onUpdate:h=>o.onSlotUpdate(d.day,h)},null,8,["day-name","time-slot","onUpdate"]))),128))])):$("",!0),S(c,{type:"submit",label:e.$t("INBOX_MGMT.BUSINESS_HOURS.UPDATE"),"is-loading":e.uiFlags.isUpdating,disabled:o.hasError},null,8,["label","is-loading","disabled"])],32)]),_:1},8,["title","sub-title"])])}const pQ=De(sQ,[["render",dQ],["__scopeId","data-v-76b4d2fe"]]),mQ={components:{SettingsSection:yl,NextButton:te},props:{inbox:{type:Object,default:()=>({})}},setup(){return{v$:bt()}},data(){return{isIMAPEnabled:!1,address:"",port:"",login:"",password:"",isSSLEnabled:!0}},validations:{address:{required:Ye},port:{required:Ye,minLength:en(2)},login:{required:Ye},password:{required:Ye}},computed:{...mt({uiFlags:"inboxes/getUIFlags"})},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{imap_enabled:e,imap_address:t,imap_port:n,imap_login:s,imap_password:a,imap_enable_ssl:o}=this.inbox;this.isIMAPEnabled=e,this.address=t,this.port=n,this.login=s,this.password=a,this.isSSLEnabled=o},async updateInbox(){try{this.loading=!0;let e={id:this.inbox.id,formData:!1,channel:{imap_enabled:this.isIMAPEnabled,imap_address:this.address,imap_port:this.port,imap_login:this.login,imap_password:this.password,imap_enable_ssl:this.isSSLEnabled}};this.isIMAPEnabled||(e.channel.smtp_enabled=!1),await this.$store.dispatch("inboxes/updateInboxIMAP",e),ne(this.$t("INBOX_MGMT.IMAP.EDIT.SUCCESS_MESSAGE"))}catch(e){ne(e.message)}}}},hQ={class:"mx-8"},fQ={for:"toggle-imap-enable"},gQ={key:0,class:"mb-6"},_Q={for:"toggle-enable-ssl"};function vQ(e,t,n,s,a,o){const i=W("woot-input"),l=W("NextButton"),r=W("SettingsSection");return p(),E("div",hQ,[S(r,{title:e.$t("INBOX_MGMT.IMAP.TITLE"),"sub-title":e.$t("INBOX_MGMT.IMAP.SUBTITLE"),note:e.$t("INBOX_MGMT.IMAP.NOTE_TEXT")},{default:Y(()=>[m("form",{onSubmit:t[6]||(t[6]=Ve((...c)=>o.updateInbox&&o.updateInbox(...c),["prevent"]))},[m("label",fQ,[re(m("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>a.isIMAPEnabled=c),type:"checkbox",class:"ltr:mr-2 rtl:ml-2",name:"toggle-imap-enable"},null,512),[[dn,a.isIMAPEnabled]]),xe(" "+I(e.$t("INBOX_MGMT.IMAP.TOGGLE_AVAILABILITY")),1)]),m("p",null,I(e.$t("INBOX_MGMT.IMAP.TOGGLE_HELP")),1),a.isIMAPEnabled?(p(),E("div",gQ,[S(i,{modelValue:a.address,"onUpdate:modelValue":t[1]||(t[1]=c=>a.address=c),class:ae([{error:s.v$.address.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.IMAP.ADDRESS.LABEL"),placeholder:e.$t("INBOX_MGMT.IMAP.ADDRESS.PLACE_HOLDER"),onBlur:s.v$.address.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),S(i,{modelValue:a.port,"onUpdate:modelValue":t[2]||(t[2]=c=>a.port=c),type:"number",class:ae([{error:s.v$.port.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.IMAP.PORT.LABEL"),placeholder:e.$t("INBOX_MGMT.IMAP.PORT.PLACE_HOLDER"),onBlur:s.v$.port.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),S(i,{modelValue:a.login,"onUpdate:modelValue":t[3]||(t[3]=c=>a.login=c),class:ae([{error:s.v$.login.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.IMAP.LOGIN.LABEL"),placeholder:e.$t("INBOX_MGMT.IMAP.LOGIN.PLACE_HOLDER"),onBlur:s.v$.login.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),S(i,{modelValue:a.password,"onUpdate:modelValue":t[4]||(t[4]=c=>a.password=c),class:ae([{error:s.v$.password.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.IMAP.PASSWORD.LABEL"),placeholder:e.$t("INBOX_MGMT.IMAP.PASSWORD.PLACE_HOLDER"),type:"password",onBlur:s.v$.password.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),m("label",_Q,[re(m("input",{"onUpdate:modelValue":t[5]||(t[5]=c=>a.isSSLEnabled=c),type:"checkbox",class:"ltr:mr-2 rtl:ml-2",name:"toggle-enable-ssl"},null,512),[[dn,a.isSSLEnabled]]),xe(" "+I(e.$t("INBOX_MGMT.IMAP.ENABLE_SSL")),1)])])):$("",!0),S(l,{type:"submit",label:e.$t("INBOX_MGMT.IMAP.UPDATE"),"is-loading":e.uiFlags.isUpdatingIMAP,disabled:s.v$.$invalid&&a.isIMAPEnabled||e.uiFlags.isUpdatingIMAP},null,8,["label","is-loading","disabled"])],32)]),_:1},8,["title","sub-title","note"])])}const bQ=De(mQ,[["render",vQ]]),TQ={props:{name:{type:String,default:"string"},label:{type:String,default:""},items:{type:Array,default:()=>[]},action:{type:Function,default:()=>{}}}},SQ={class:"radio-group-label"},AQ={class:"radio-group"},yQ={class:"radio-group-item-label"},IQ=["name","checked","onChange"];function CQ(e,t,n,s,a,o){return p(),E("div",null,[m("label",SQ,I(n.label),1),m("div",AQ,[(p(!0),E(ue,null,Ae(n.items,i=>(p(),E("div",{key:i.id,class:"radio-group-item"},[m("label",yQ,[m("input",{class:"radio-input",name:`${n.name} -radio-input`,type:"radio",checked:i.checked,onChange:l=>n.action({...i,checked:!0})},null,40,IQ),m("span",null,I(i.title),1)])]))),128))])])}const __=De(TQ,[["render",CQ],["__scopeId","data-v-531e88a8"]]),NQ={props:{label:{type:String,default:""},options:{type:Array,default:()=>[]},selected:{type:String,default:""},action:{type:Function,default:()=>{}}},data(){return{value:this.selected}}},OQ={for:"dropdown-select"};function RQ(e,t,n,s,a,o){return p(),E("div",null,[m("label",OQ,I(n.label),1),re(m("select",{id:"dropdown-select","onUpdate:modelValue":t[0]||(t[0]=i=>a.value=i),name:"dropdown-select",onChange:t[1]||(t[1]=i=>n.action(a.value))},[(p(!0),E(ue,null,Ae(n.options,i=>(p(),E("option",{key:i.key},I(i.value),1))),128))],544),[[Nn,a.value]])])}const xQ=De(NQ,[["render",RQ]]),wQ={components:{SettingsSection:yl,InputRadioGroup:__,SingleSelectDropdown:xQ,NextButton:te},props:{inbox:{type:Object,default:()=>({})}},setup(){return{v$:bt()}},data(){return{isSMTPEnabled:!1,address:"",port:"",login:"",password:"",domain:"",ssl:!1,starttls:!0,openSSLVerifyMode:"none",authMechanism:"login",encryptionProtocols:[{id:"ssl",title:"SSL/TLS",checked:!1},{id:"starttls",title:"STARTTLS",checked:!0}],openSSLVerifyModes:[{key:1,value:"none"},{key:2,value:"peer"},{key:3,value:"client_once"},{key:4,value:"fail_if_no_peer_cert"}],authMechanisms:[{key:1,value:"plain"},{key:2,value:"login"},{key:3,value:"cram-md5"},{key:4,value:"xoauth"},{key:5,value:"xoauth2"},{key:6,value:"ntlm"},{key:7,value:"gssapi"}]}},validations:{address:{required:Ye},port:{required:Ye,minLength:en(2)},login:{required:Ye},password:{required:Ye},domain:{required:Ye}},computed:{...mt({uiFlags:"inboxes/getUIFlags"})},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{smtp_enabled:e,smtp_address:t,smtp_port:n,smtp_login:s,smtp_password:a,smtp_domain:o,smtp_enable_starttls_auto:i,smtp_enable_ssl_tls:l,smtp_openssl_verify_mode:r,smtp_authentication:c}=this.inbox;this.isSMTPEnabled=e,this.address=t,this.port=n,this.login=s,this.password=a,this.domain=o,this.starttls=i,this.ssl=l,this.openSSLVerifyMode=r,this.authMechanism=c,this.encryptionProtocols=[{id:"ssl",title:"SSL/TLS",checked:l},{id:"starttls",title:"STARTTLS",checked:i}]},handleEncryptionChange(e){e.id==="ssl"?(this.ssl=!0,this.starttls=!1):(this.ssl=!1,this.starttls=!0)},handleSSLModeChange(e){this.openSSLVerifyMode=e},handleAuthMechanismChange(e){this.authMechanism=e},async updateInbox(){try{const e={id:this.inbox.id,channel:{smtp_enabled:this.isSMTPEnabled,smtp_address:this.address,smtp_port:this.port,smtp_login:this.login,smtp_password:this.password,smtp_domain:this.domain,smtp_enable_ssl_tls:this.ssl,smtp_enable_starttls_auto:this.starttls,smtp_openssl_verify_mode:this.openSSLVerifyMode,smtp_authentication:this.authMechanism}};await this.$store.dispatch("inboxes/updateInboxSMTP",e),ne(this.$t("INBOX_MGMT.SMTP.EDIT.SUCCESS_MESSAGE"))}catch{ne(this.$t("INBOX_MGMT.SMTP.EDIT.ERROR_MESSAGE"))}}}},$Q={class:"mx-8"},MQ={for:"toggle-enable-smtp"},LQ={key:0,class:"mb-6"};function DQ(e,t,n,s,a,o){const i=W("woot-input"),l=W("InputRadioGroup"),r=W("SingleSelectDropdown"),c=W("NextButton"),u=W("SettingsSection");return p(),E("div",$Q,[S(u,{title:e.$t("INBOX_MGMT.SMTP.TITLE"),"sub-title":e.$t("INBOX_MGMT.SMTP.SUBTITLE")},{default:Y(()=>[m("form",{onSubmit:t[6]||(t[6]=Ve((...d)=>o.updateInbox&&o.updateInbox(...d),["prevent"]))},[m("label",MQ,[re(m("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>a.isSMTPEnabled=d),type:"checkbox",name:"toggle-enable-smtp"},null,512),[[dn,a.isSMTPEnabled]]),xe(" "+I(e.$t("INBOX_MGMT.SMTP.TOGGLE_AVAILABILITY")),1)]),m("p",null,I(e.$t("INBOX_MGMT.SMTP.TOGGLE_HELP")),1),a.isSMTPEnabled?(p(),E("div",LQ,[S(i,{modelValue:a.address,"onUpdate:modelValue":t[1]||(t[1]=d=>a.address=d),class:ae([{error:s.v$.address.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.ADDRESS.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.ADDRESS.PLACE_HOLDER"),onBlur:s.v$.address.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),S(i,{modelValue:a.port,"onUpdate:modelValue":t[2]||(t[2]=d=>a.port=d),type:"number",class:ae([{error:s.v$.port.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.PORT.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.PORT.PLACE_HOLDER"),onBlur:s.v$.port.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),S(i,{modelValue:a.login,"onUpdate:modelValue":t[3]||(t[3]=d=>a.login=d),class:ae([{error:s.v$.login.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.LOGIN.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.LOGIN.PLACE_HOLDER"),onBlur:s.v$.login.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),S(i,{modelValue:a.password,"onUpdate:modelValue":t[4]||(t[4]=d=>a.password=d),class:ae([{error:s.v$.password.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.PASSWORD.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.PASSWORD.PLACE_HOLDER"),type:"password",onBlur:s.v$.password.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),S(i,{modelValue:a.domain,"onUpdate:modelValue":t[5]||(t[5]=d=>a.domain=d),class:ae([{error:s.v$.domain.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.DOMAIN.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.DOMAIN.PLACE_HOLDER"),onBlur:s.v$.domain.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),S(l,{label:e.$t("INBOX_MGMT.SMTP.ENCRYPTION"),items:a.encryptionProtocols,action:o.handleEncryptionChange},null,8,["label","items","action"]),S(r,{class:"max-w-[75%] w-full",label:e.$t("INBOX_MGMT.SMTP.OPEN_SSL_VERIFY_MODE"),selected:a.openSSLVerifyMode,options:a.openSSLVerifyModes,action:o.handleSSLModeChange},null,8,["label","selected","options","action"]),S(r,{class:"max-w-[75%] w-full",label:e.$t("INBOX_MGMT.SMTP.AUTH_MECHANISM"),selected:a.authMechanism,options:a.authMechanisms,action:o.handleAuthMechanismChange},null,8,["label","selected","options","action"])])):$("",!0),S(c,{type:"submit",label:e.$t("INBOX_MGMT.SMTP.UPDATE"),"is-loading":e.uiFlags.isUpdatingSMTP,disabled:s.v$.$invalid&&a.isSMTPEnabled||e.uiFlags.isUpdatingSMTP},null,8,["label","is-loading","disabled"])],32)]),_:1},8,["title","sub-title"])])}const PQ=De(wQ,[["render",DQ]]),kQ={components:{SettingsSection:yl,ImapSettings:bQ,SmtpSettings:PQ,NextButton:te,TextArea:lo,WhatsappReauthorize:BA},mixins:[wr],props:{inbox:{type:Object,default:()=>({})}},setup(){return{v$:bt()}},data(){return{hmacMandatory:!1,whatsAppInboxAPIKey:"",isRequestingReauthorization:!1,isSyncingTemplates:!1,allowedDomains:"",isUpdatingAllowedDomains:!1}},validations:{whatsAppInboxAPIKey:{required:Ye}},computed:{isEmbeddedSignupWhatsApp(){var e;return((e=this.inbox.provider_config)==null?void 0:e.source)==="embedded_signup"},whatsappAppId(){var e;return(e=window.chatwootConfig)==null?void 0:e.whatsappAppId},isForwardingEnabled(){return!!this.inbox.forwarding_enabled}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){this.hmacMandatory=this.inbox.hmac_mandatory||!1,this.allowedDomains=this.inbox.allowed_domains||""},handleHmacFlag(){this.updateInbox()},async updateInbox(){try{const e={id:this.inbox.id,formData:!1,channel:{hmac_mandatory:this.hmacMandatory}};await this.$store.dispatch("inboxes/updateInbox",e),ne(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{ne(this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}},async updateAllowedDomains(){this.isUpdatingAllowedDomains=!0;const e=IO(this.allowedDomains);try{const t={id:this.inbox.id,formData:!1,channel:{allowed_domains:e}};await this.$store.dispatch("inboxes/updateInbox",t),this.allowedDomains=e,ne(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{ne(this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}finally{this.isUpdatingAllowedDomains=!1}},async updateWhatsAppInboxAPIKey(){try{const e={id:this.inbox.id,formData:!1,channel:{}};e.channel.provider_config={...this.inbox.provider_config,api_key:this.whatsAppInboxAPIKey},await this.$store.dispatch("inboxes/updateInbox",e),ne(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{ne(this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}},async handleReconfigure(){this.$refs.whatsappReauth&&await this.$refs.whatsappReauth.requestAuthorization()},async syncTemplates(){this.isSyncingTemplates=!0;try{await this.$store.dispatch("inboxes/syncTemplates",this.inbox.id),ne(this.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_TEMPLATES_SYNC_SUCCESS"))}catch{ne(this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}finally{this.isSyncingTemplates=!1}}}},BQ={key:0,class:"mx-8"},UQ={class:"flex justify-start items-center mt-2"},FQ={key:1,class:"mx-8"},GQ={key:2,class:"mx-8"},VQ={key:3},HQ={class:"mx-8"},WQ={class:"flex flex-col w-full max-w-3xl gap-4"},zQ={target:"_blank",rel:"noopener noreferrer",href:"https://www.chatwoot.com/docs/product/channels/live-chat/sdk/identity-validation/"},YQ={class:"flex gap-2 items-center"},jQ={for:"hmacMandatory"},KQ={key:4,class:"mx-8"},XQ={class:"flex gap-2 items-center"},qQ={for:"hmacMandatory"},ZQ={key:5},QQ={class:"mx-8"},JQ={key:1,class:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg"},eJ={class:"text-sm text-yellow-800 dark:text-yellow-200 mb-0"},tJ={key:6},nJ={key:0,class:"mx-8"},sJ={class:"flex gap-4 items-center"},aJ={class:"text-sm text-n-slate-11"},oJ={class:"flex flex-1 justify-between items-center mt-2 whatsapp-settings--content"},iJ={class:"flex justify-start items-center mt-2"};function lJ(e,t,n,s,a,o){const i=W("woot-code"),l=W("SettingsSection"),r=W("NextButton"),c=W("TextArea"),u=W("ImapSettings"),d=W("SmtpSettings"),h=W("woot-input"),g=W("WhatsappReauthorize");return e.isATwilioChannel?(p(),E("div",BQ,[S(l,{title:e.$t("INBOX_MGMT.ADD.TWILIO.API_CALLBACK.TITLE"),"sub-title":e.$t("INBOX_MGMT.ADD.TWILIO.API_CALLBACK.SUBTITLE")},{default:Y(()=>[S(i,{script:n.inbox.callback_webhook_url,lang:"html"},null,8,["script"])]),_:1},8,["title","sub-title"]),e.isATwilioWhatsAppChannel?(p(),L(l,{key:0,title:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_TEMPLATES_SYNC_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_TEMPLATES_SYNC_SUBHEADER")},{default:Y(()=>[m("div",UQ,[S(r,{disabled:a.isSyncingTemplates,onClick:o.syncTemplates},{default:Y(()=>[xe(I(e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_TEMPLATES_SYNC_BUTTON")),1)]),_:1},8,["disabled","onClick"])])]),_:1},8,["title","sub-title"])):$("",!0)])):e.isAVoiceChannel?(p(),E("div",FQ,[S(l,{title:e.$t("INBOX_MGMT.ADD.VOICE.CONFIGURATION.TWILIO_VOICE_URL_TITLE"),"sub-title":e.$t("INBOX_MGMT.ADD.VOICE.CONFIGURATION.TWILIO_VOICE_URL_SUBTITLE")},{default:Y(()=>[S(i,{script:n.inbox.voice_call_webhook_url,lang:"html"},null,8,["script"])]),_:1},8,["title","sub-title"]),S(l,{title:e.$t("INBOX_MGMT.ADD.VOICE.CONFIGURATION.TWILIO_STATUS_URL_TITLE"),"sub-title":e.$t("INBOX_MGMT.ADD.VOICE.CONFIGURATION.TWILIO_STATUS_URL_SUBTITLE")},{default:Y(()=>[S(i,{script:n.inbox.voice_status_webhook_url,lang:"html"},null,8,["script"])]),_:1},8,["title","sub-title"])])):e.isALineChannel?(p(),E("div",GQ,[S(l,{title:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.API_CALLBACK.TITLE"),"sub-title":e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.API_CALLBACK.SUBTITLE")},{default:Y(()=>[S(i,{script:n.inbox.callback_webhook_url,lang:"html"},null,8,["script"])]),_:1},8,["title","sub-title"])])):e.isAWebWidgetInbox?(p(),E("div",VQ,[m("div",HQ,[S(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.MESSENGER_HEADING"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.MESSENGER_SUB_HEAD")},{default:Y(()=>[S(i,{script:n.inbox.web_widget_script,lang:"html","codepen-title":`${n.inbox.name} - Chatwoot Widget Test`,"enable-code-pen":""},null,8,["script","codepen-title"])]),_:1},8,["title","sub-title"]),S(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.ALLOWED_DOMAINS.TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.ALLOWED_DOMAINS.SUBTITLE")},{default:Y(()=>[m("div",WQ,[S(c,{modelValue:a.allowedDomains,"onUpdate:modelValue":t[0]||(t[0]=f=>a.allowedDomains=f),placeholder:e.$t("INBOX_MGMT.SETTINGS_POPUP.ALLOWED_DOMAINS.PLACEHOLDER"),"auto-height":"","min-height":"8rem",class:"w-full"},null,8,["modelValue","placeholder"]),m("div",null,[S(r,{label:e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),"is-loading":a.isUpdatingAllowedDomains,onClick:o.updateAllowedDomains},null,8,["label","is-loading","onClick"])])])]),_:1},8,["title","sub-title"]),S(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_VERIFICATION")},{subTitle:Y(()=>[xe(I(e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_DESCRIPTION"))+" ",1),m("a",zQ,I(e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_LINK_TO_DOCS")),1)]),default:Y(()=>[S(i,{script:n.inbox.hmac_token},null,8,["script"])]),_:1},8,["title"]),S(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_VERIFICATION"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_DESCRIPTION")},{default:Y(()=>[m("div",YQ,[re(m("input",{id:"hmacMandatory","onUpdate:modelValue":t[1]||(t[1]=f=>a.hmacMandatory=f),type:"checkbox",onChange:t[2]||(t[2]=(...f)=>o.handleHmacFlag&&o.handleHmacFlag(...f))},null,544),[[dn,a.hmacMandatory]]),m("label",jQ,I(e.$t("INBOX_MGMT.EDIT.ENABLE_HMAC.LABEL")),1)])]),_:1},8,["title","sub-title"])])])):e.isAPIInbox?(p(),E("div",KQ,[S(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_IDENTIFIER"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_IDENTIFIER_SUB_TEXT")},{default:Y(()=>[S(i,{script:n.inbox.inbox_identifier},null,8,["script"])]),_:1},8,["title","sub-title"]),S(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_VERIFICATION"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_DESCRIPTION")},{default:Y(()=>[S(i,{script:n.inbox.hmac_token},null,8,["script"])]),_:1},8,["title","sub-title"]),S(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_VERIFICATION"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_DESCRIPTION")},{default:Y(()=>[m("div",XQ,[re(m("input",{id:"hmacMandatory","onUpdate:modelValue":t[3]||(t[3]=f=>a.hmacMandatory=f),type:"checkbox",onChange:t[4]||(t[4]=(...f)=>o.handleHmacFlag&&o.handleHmacFlag(...f))},null,544),[[dn,a.hmacMandatory]]),m("label",qQ,I(e.$t("INBOX_MGMT.EDIT.ENABLE_HMAC.LABEL")),1)])]),_:1},8,["title","sub-title"])])):e.isAnEmailChannel?(p(),E("div",ZQ,[m("div",QQ,[S(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.FORWARD_EMAIL_TITLE"),"sub-title":o.isForwardingEnabled?e.$t("INBOX_MGMT.SETTINGS_POPUP.FORWARD_EMAIL_SUB_TEXT"):""},{default:Y(()=>[o.isForwardingEnabled?(p(),L(i,{key:0,script:n.inbox.forward_to_email},null,8,["script"])):(p(),E("div",JQ,[m("p",eJ,I(e.$t("INBOX_MGMT.SETTINGS_POPUP.FORWARD_EMAIL_NOT_CONFIGURED")),1)]))]),_:1},8,["title","sub-title"])]),S(u,{inbox:n.inbox},null,8,["inbox"]),n.inbox.imap_enabled?(p(),L(d,{key:0,inbox:n.inbox},null,8,["inbox"])):$("",!0)])):e.isAWhatsAppChannel&&!e.isATwilioChannel?(p(),E("div",tJ,[n.inbox.provider_config?(p(),E("div",nJ,[o.isEmbeddedSignupWhatsApp?(p(),E(ue,{key:0},[o.whatsappAppId?(p(),L(l,{key:0,title:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_EMBEDDED_SIGNUP_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_EMBEDDED_SIGNUP_SUBHEADER")},{default:Y(()=>[m("div",sJ,[m("p",aJ,I(e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_EMBEDDED_SIGNUP_DESCRIPTION")),1),S(r,{onClick:o.handleReconfigure},{default:Y(()=>[xe(I(e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_RECONFIGURE_BUTTON")),1)]),_:1},8,["onClick"])])]),_:1},8,["title","sub-title"])):$("",!0)],64)):(p(),E(ue,{key:1},[S(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_WEBHOOK_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_WEBHOOK_SUBHEADER")},{default:Y(()=>[S(i,{script:n.inbox.provider_config.webhook_verify_token},null,8,["script"])]),_:1},8,["title","sub-title"]),S(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_SUBHEADER")},{default:Y(()=>[S(i,{script:n.inbox.provider_config.api_key},null,8,["script"])]),_:1},8,["title","sub-title"]),S(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_SUBHEADER")},{default:Y(()=>[m("div",oJ,[S(h,{modelValue:a.whatsAppInboxAPIKey,"onUpdate:modelValue":t[5]||(t[5]=f=>a.whatsAppInboxAPIKey=f),type:"text",class:"flex-1 mr-2 [&>input]:!mb-0",placeholder:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_PLACEHOLDER")},null,8,["modelValue","placeholder"]),S(r,{disabled:s.v$.whatsAppInboxAPIKey.$invalid,onClick:o.updateWhatsAppInboxAPIKey},{default:Y(()=>[xe(I(e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_BUTTON")),1)]),_:1},8,["disabled","onClick"])])]),_:1},8,["title","sub-title"])],64)),S(l,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_TEMPLATES_SYNC_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_TEMPLATES_SYNC_SUBHEADER")},{default:Y(()=>[m("div",iJ,[S(r,{disabled:a.isSyncingTemplates,onClick:o.syncTemplates},{default:Y(()=>[xe(I(e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_TEMPLATES_SYNC_BUTTON")),1)]),_:1},8,["disabled","onClick"])])]),_:1},8,["title","sub-title"])])):$("",!0),o.isEmbeddedSignupWhatsApp?(p(),L(g,{key:1,ref:"whatsappReauth",inbox:n.inbox,class:"hidden"},null,8,["inbox"])):$("",!0)])):$("",!0)}const rJ=De(kQ,[["render",lJ],["__scopeId","data-v-f3cbd362"]]),cJ={__name:"CSATEmojiInput",props:{selected:{type:Boolean,default:!1}},emits:["update"],setup(e,{emit:t}){const n=e,s=t,a=y(()=>n.selected?"outline-n-brand bg-n-brand/5":"outline-n-weak bg-n-alpha-black2"),o=cl,i=j(5);return(l,r)=>(p(),E("button",{class:ae(["flex items-center rounded-lg transition-all duration-500 cursor-pointer outline outline-1 px-4 py-2 gap-2 min-w-56",a.value]),onClick:r[0]||(r[0]=c=>s("update",C(Oi).EMOJI))},[(p(!0),E(ue,null,Ae(C(o),c=>(p(),E("div",{key:c.key,class:"rounded-full p-1 transition-transform duration-150 focus:outline-none flex items-center flex-shrink-0"},[m("span",{class:ae(["text-2xl",i.value===c.value?"":"grayscale opacity-60"])},I(c.emoji),3)]))),128))],2))}},uJ=["aria-label"],dJ={__name:"CSATStarInput",props:{selected:{type:Boolean,default:!1}},emits:["update"],setup(e,{emit:t}){const n=e,s=t,a=y(()=>n.selected?"bg-n-brand/5 outline-n-brand":"bg-n-alpha-black2 outline-n-weak");return(o,i)=>(p(),E("button",{class:ae(["flex items-center rounded-lg transition-all duration-300 cursor-pointer outline outline-1 px-4 py-2 gap-2 min-w-56",a.value]),onClick:i[0]||(i[0]=l=>s("update",C(Oi).STAR))},[(p(),E(ue,null,Ae(5,l=>m("div",{key:"star-"+l,class:"rounded-full p-1 transition-transform duration-150 focus:outline-none flex items-center flex-shrink-0","aria-label":`Star ${l}`},i[1]||(i[1]=[m("i",{class:"i-ri-star-fill text-n-amber-9 text-2xl"},null,-1)]),8,uJ)),64))],2))}},pJ={class:"flex flex-wrap gap-6 mt-2"},mJ={__name:"CSATDisplayTypeSelector",props:{selectedType:{type:String,default:Oi.EMOJI}},emits:["update"],setup(e,{emit:t}){const n=e,s=t;return(a,o)=>(p(),E("div",pJ,[S(cJ,{selected:n.selectedType===C(Oi).EMOJI,onUpdate:o[0]||(o[0]=i=>s("update",i))},null,8,["selected"]),S(dJ,{selected:n.selectedType===C(Oi).STAR,onUpdate:o[1]||(o[1]=i=>s("update",i))},null,8,["selected"])]))}},ar={__name:"FilterSelect",props:jt({options:{type:Array,required:!0},hideLabel:{type:Boolean,default:!1},hideIcon:{type:Boolean,default:!1},variant:{type:String,default:"faded"},label:{type:String,default:null}},{modelValue:{type:[String,Number],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,n=Xt(e,"modelValue"),s=j(null),a=j(null),{top:o}=pr(s),{height:i}=Di(),{height:l}=pr(a),r=y(()=>t.options.find(h=>h.value===n.value)||{}),c=y(()=>t.hideIcon?null:r.value.icon||"i-lucide-chevron-down"),u=y(()=>{const g=l.value?l.value+20:340;return i.value-o.value<g?"bottom-0":"top-0"}),d=h=>{n.value=h};return(h,g)=>(p(),L(Tl,null,{trigger:Y(({toggle:f})=>[We(h.$slots,"trigger",{toggle:f},()=>[S(te,{ref_key:"triggerRef",ref:s,type:"button",sm:"",slate:"",variant:e.variant,icon:c.value,"trailing-icon":!r.value.icon,label:e.label||(e.hideLabel?null:r.value.label),onClick:f},null,8,["variant","icon","trailing-icon","label","onClick"])])]),default:Y(()=>[S(Sl,{ref_key:"dropdownRef",ref:a,class:ae(["min-w-48 z-50",u.value]),strong:""},{default:Y(()=>[S(xr,{class:"[&>ul]:max-h-80"},{default:Y(()=>[(p(!0),E(ue,null,Ae(e.options,f=>(p(),L(Ba,{key:f.value,label:f.label,icon:f.icon,onClick:b=>d(f.value)},null,8,["label","icon","onClick"]))),128))]),_:1})]),_:1},8,["class"])]),_:3}))}},hJ={class:"mx-8"},fJ={class:"flex justify-end"},gJ={class:"grid gap-5"},_J={class:"mb-4"},vJ={class:"inline-flex flex-wrap items-center gap-1.5 text-sm text-n-slate-12"},EJ={class:"text-sm italic text-n-slate-11"},bJ={__name:"CustomerSatisfactionPage",props:{inbox:{type:Object,required:!0}},setup(e){const t=e,{t:n}=be(),s=rt(),a=_e("labels/getLabels"),o=j(!1),i=j([]),l=j(""),r=gn({csatSurveyEnabled:!1,displayType:"emoji",message:"",surveyRuleOperator:"contains"}),c=[{label:n("INBOX_MGMT.CSAT.SURVEY_RULE.OPERATOR.CONTAINS"),value:"contains"},{label:n("INBOX_MGMT.CSAT.SURVEY_RULE.OPERATOR.DOES_NOT_CONTAINS"),value:"does_not_contain"}],u=y(()=>{var T;return(T=a.value)!=null&&T.length?a.value.map(_=>({label:_.title,value:_.title})).filter(_=>!i.value.includes(_.value)):[]}),d=()=>{if(!t.inbox)return;const{csat_survey_enabled:T,csat_config:_}=t.inbox;if(r.csatSurveyEnabled=T||!1,!_)return;const{display_type:N=Oi.EMOJI,message:R="",survey_rules:O={}}=_;r.displayType=N,r.message=R,r.surveyRuleOperator=O.operator||"contains",i.value=Array.isArray(O.values)?[...O.values]:[]};lt(()=>{var T;d(),(T=a.value)!=null&&T.length||s.dispatch("labels/get")}),it(()=>t.inbox,d,{immediate:!0});const h=T=>{!T||i.value.includes(T)||i.value.push(T)},g=T=>{r.displayType=T},f=T=>{r.surveyRuleOperator=T},b=T=>{const _=i.value.indexOf(T);_!==-1&&i.value.splice(_,1)},A=async T=>{const _={id:t.inbox.id,formData:!1,...T};return s.dispatch("inboxes/updateInbox",_)},v=async()=>{try{o.value=!0;const T={display_type:r.displayType,message:r.message,survey_rules:{operator:r.surveyRuleOperator,values:i.value}};await A({csat_survey_enabled:r.csatSurveyEnabled,csat_config:T}),ne(n("INBOX_MGMT.CSAT.API.SUCCESS_MESSAGE"))}catch{ne(n("INBOX_MGMT.CSAT.API.ERROR_MESSAGE"))}finally{o.value=!1}};return(T,_)=>(p(),E("div",hJ,[S(Pi,{title:T.$t("INBOX_MGMT.CSAT.TITLE"),description:T.$t("INBOX_MGMT.CSAT.SUBTITLE")},{headerActions:Y(()=>[m("div",fJ,[S(va,{modelValue:r.csatSurveyEnabled,"onUpdate:modelValue":_[0]||(_[0]=N=>r.csatSurveyEnabled=N)},null,8,["modelValue"])])]),default:Y(()=>[m("div",gJ,[S(ta,{label:T.$t("INBOX_MGMT.CSAT.DISPLAY_TYPE.LABEL"),name:"display_type"},{default:Y(()=>[S(mJ,{"selected-type":r.displayType,onUpdate:g},null,8,["selected-type"])]),_:1},8,["label"]),S(ta,{label:T.$t("INBOX_MGMT.CSAT.MESSAGE.LABEL"),name:"message"},{default:Y(()=>[S(Ks,{modelValue:r.message,"onUpdate:modelValue":_[1]||(_[1]=N=>r.message=N),placeholder:T.$t("INBOX_MGMT.CSAT.MESSAGE.PLACEHOLDER"),"max-length":200,class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),S(ta,{label:T.$t("INBOX_MGMT.CSAT.SURVEY_RULE.LABEL"),name:"survey_rule"},{default:Y(()=>[m("div",_J,[m("span",vJ,[xe(I(T.$t("INBOX_MGMT.CSAT.SURVEY_RULE.DESCRIPTION_PREFIX"))+" ",1),S(ar,{modelValue:r.surveyRuleOperator,"onUpdate:modelValue":[_[2]||(_[2]=N=>r.surveyRuleOperator=N),f],variant:"faded",options:c,class:"inline-flex shrink-0"},null,8,["modelValue"]),xe(" "+I(T.$t("INBOX_MGMT.CSAT.SURVEY_RULE.DESCRIPTION_SUFFIX"))+" ",1),(p(!0),E(ue,null,Ae(i.value,N=>(p(),L(te,{key:N,sm:"",faded:"",slate:"","trailing-icon":"",label:N,icon:"i-lucide-x",class:"inline-flex shrink-0",onClick:R=>b(N)},null,8,["label","onClick"]))),128)),S(ar,{modelValue:l.value,"onUpdate:modelValue":[_[3]||(_[3]=N=>l.value=N),h],options:u.value,label:T.$t("INBOX_MGMT.CSAT.SURVEY_RULE.SELECT_PLACEHOLDER"),"hide-label":"",variant:"faded",class:"inline-flex shrink-0"},null,8,["modelValue","options","label"])])])]),_:1},8,["label"]),m("p",EJ,I(T.$t("INBOX_MGMT.CSAT.NOTE")),1),m("div",null,[S(te,{type:"submit",label:T.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),"is-loading":o.value,onClick:v},null,8,["label","is-loading"])])])]),_:1},8,["title","description"])]))}},TJ={components:{SettingsSection:yl,NextButton:te},props:{inbox:{type:Object,default:()=>({})}},setup(){const{isEnterprise:e}=si();return{v$:bt(),isEnterprise:e}},data(){return{selectedAgents:[],isAgentListUpdating:!1,enableAutoAssignment:!1,maxAssignmentLimit:null}},computed:{...mt({agentList:"agents/getAgents"}),maxAssignmentLimitErrors(){return this.v$.maxAssignmentLimit.$error?this.$t("INBOX_MGMT.AUTO_ASSIGNMENT.MAX_ASSIGNMENT_LIMIT_RANGE_ERROR"):""}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){var e,t;this.enableAutoAssignment=this.inbox.enable_auto_assignment,this.maxAssignmentLimit=((t=(e=this.inbox)==null?void 0:e.auto_assignment_config)==null?void 0:t.max_assignment_limit)||null,this.fetchAttachedAgents()},async fetchAttachedAgents(){try{const e=await this.$store.dispatch("inboxMembers/get",{inboxId:this.inbox.id}),{data:{payload:t}}=e;this.selectedAgents=t}catch{}},handleEnableAutoAssignment(){this.updateInbox()},async updateAgents(){const e=this.selectedAgents.map(t=>t.id);this.isAgentListUpdating=!0;try{await this.$store.dispatch("inboxMembers/create",{inboxId:this.inbox.id,agentList:e}),ne(this.$t("AGENT_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{ne(this.$t("AGENT_MGMT.EDIT.API.ERROR_MESSAGE"))}this.isAgentListUpdating=!1},async updateInbox(){try{const e={id:this.inbox.id,formData:!1,enable_auto_assignment:this.enableAutoAssignment,auto_assignment_config:{max_assignment_limit:this.maxAssignmentLimit}};await this.$store.dispatch("inboxes/updateInbox",e),ne(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{ne(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}}},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}},maxAssignmentLimit:{minValue:TS(1)}}},SJ={class:"w-3/4 settings-item"},AJ={class:"flex items-center gap-2"},yJ={for:"enableAutoAssignment"},IJ={class:"pb-1 text-sm not-italic text-n-slate-11"},CJ={key:0,class:"py-3"},NJ={class:"pb-1 text-sm not-italic text-n-slate-11"};function OJ(e,t,n,s,a,o){const i=W("multiselect"),l=W("NextButton"),r=W("SettingsSection"),c=W("woot-input");return p(),E("div",null,[S(r,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_AGENTS"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_AGENTS_SUB_TEXT")},{default:Y(()=>[S(i,{modelValue:a.selectedAgents,"onUpdate:modelValue":t[0]||(t[0]=u=>a.selectedAgents=u),options:e.agentList,"track-by":"id",label:"name",multiple:"","close-on-select":!1,"clear-on-select":!1,"hide-selected":"",placeholder:"Pick some","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":e.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE"),onSelect:s.v$.selectedAgents.$touch},null,8,["modelValue","options","select-label","deselect-label","onSelect"]),S(l,{label:e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),"is-loading":a.isAgentListUpdating,onClick:o.updateAgents},null,8,["label","is-loading","onClick"])]),_:1},8,["title","sub-title"]),S(r,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.AGENT_ASSIGNMENT"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.AGENT_ASSIGNMENT_SUB_TEXT")},{default:Y(()=>[m("label",SJ,[m("div",AJ,[re(m("input",{id:"enableAutoAssignment","onUpdate:modelValue":t[1]||(t[1]=u=>a.enableAutoAssignment=u),type:"checkbox",onChange:t[2]||(t[2]=(...u)=>o.handleEnableAutoAssignment&&o.handleEnableAutoAssignment(...u))},null,544),[[dn,a.enableAutoAssignment]]),m("label",yJ,I(e.$t("INBOX_MGMT.SETTINGS_POPUP.AUTO_ASSIGNMENT")),1)]),m("p",IJ,I(e.$t("INBOX_MGMT.SETTINGS_POPUP.AUTO_ASSIGNMENT_SUB_TEXT")),1)]),a.enableAutoAssignment&&s.isEnterprise?(p(),E("div",CJ,[S(c,{modelValue:a.maxAssignmentLimit,"onUpdate:modelValue":t[3]||(t[3]=u=>a.maxAssignmentLimit=u),type:"number",class:ae({error:s.v$.maxAssignmentLimit.$error}),error:o.maxAssignmentLimitErrors,label:e.$t("INBOX_MGMT.AUTO_ASSIGNMENT.MAX_ASSIGNMENT_LIMIT"),onBlur:s.v$.maxAssignmentLimit.$touch},null,8,["modelValue","class","error","label","onBlur"]),m("p",NJ,I(e.$t("INBOX_MGMT.AUTO_ASSIGNMENT.MAX_ASSIGNMENT_LIMIT_SUB_TEXT")),1),S(l,{label:e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),disabled:s.v$.maxAssignmentLimit.$invalid,onClick:o.updateInbox},null,8,["label","disabled","onClick"])])):$("",!0)]),_:1},8,["title","sub-title"])])}const RJ=De(TJ,[["render",OJ]]),xJ={class:"relative top-px"},wJ={class:"flex items-center justify-start"},$J=["src"],MJ={key:1},LJ={class:"flex items-center justify-start gap-1"},DJ={class:"text-base font-medium leading-3 text-n-slate-12"},PJ={key:0,class:"w-2 h-2 bg-n-teal-10 rounded-full"},kJ={class:"mt-1 text-xs text-n-slate-11"},BJ={key:0,class:"overflow-auto max-h-60"},UJ={class:"mb-2 text-2xl break-words text-n-slate-12"},FJ={class:"text-sm break-words text-n-slate-11 [&_a]:!text-n-slate-11 [&_a]:underline"},GJ={__name:"WidgetHead",props:{config:{type:Object,default:()=>({})}},setup(e){const t=e,{formatMessage:n}=sa(),s=y(()=>t.config.isDefaultScreen&&(t.config.welcomeHeading&&t.config.welcomeHeading.length!==0||t.config.welcomeTagLine&&t.config.welcomeTagline.length!==0));return(a,o)=>{const i=Qe("dompurify-html");return p(),E("div",{class:ae(["rounded-t-lg flex-shrink-0 transition-[max-height] duration-300",s.value?"bg-n-slate-2 dark:bg-n-solid-1 px-4 py-5":"bg-n-slate-2 dark:bg-n-solid-1 p-4"])},[m("div",xJ,[m("div",wJ,[e.config.logo?(p(),E("img",{key:0,src:e.config.logo,class:ae(["mr-2 rounded-full logo",s.value?"h-12 w-12 mb-2":"h-8 w-8 mb-1"])},null,10,$J)):$("",!0),s.value?$("",!0):(p(),E("div",MJ,[m("div",LJ,[m("span",DJ,I(e.config.websiteName),1),e.config.isOnline?(p(),E("div",PJ)):$("",!0)]),m("span",kJ,I(e.config.replyTime),1)]))]),s.value?(p(),E("div",BJ,[m("h2",UJ,I(e.config.welcomeHeading),1),re(m("p",FJ,null,512),[[i,C(n)(e.config.welcomeTagline)]])])):$("",!0)])],2)}}},VJ={class:"h-[calc(2rem*10)] px-4 overflow-y-auto"},HJ={class:"items-end flex justify-end ml-auto mb-1 mt-0 max-w-[85%] text-right"},WJ={class:"m-0"},zJ={class:"shadow rounded-[1.25rem] rounded-bl-[0.25rem] px-4 py-3 inline-block text-sm text-n-slate-12 bg-n-background dark:bg-n-solid-3"},YJ={class:"m-0"},jJ={__name:"WidgetBody",props:{config:{type:Object,default:()=>({})}},setup(e){return(t,n)=>(p(),E("div",VJ,[m("div",null,[m("div",null,[m("div",HJ,[m("div",{class:"rounded-[1.25rem] rounded-br-[0.25rem] text-white dark:text-white text-sm px-4 py-3",style:Zt({background:e.config.color})},[m("p",WJ,I(t.$t("INBOX_MGMT.WIDGET_BUILDER.BODY.USER_MESSAGE")),1)],4)])]),m("div",zJ,[m("div",null,[m("p",YJ,I(t.$t("INBOX_MGMT.WIDGET_BUILDER.BODY.AGENT_MESSAGE")),1)])])])]))}},KJ={class:"relative flex flex-col w-full px-4"},XJ={key:0,class:"p-4 rounded-md shadow-sm bg-n-background dark:bg-n-solid-2"},qJ={class:"flex items-center justify-between"},ZJ={class:"text-sm font-medium leading-4 text-n-slate-12 dark:text-n-slate-50"},QJ={class:"mt-1 text-xs text-n-slate-11"},JJ={class:"pr-2 text-xs"},eee={class:"flex items-center gap-2 px-2"},tee={__name:"WidgetFooter",props:{config:{type:Object,default:()=>({})}},setup(e){const t=e,{t:n}=be(),s=j(!1),a=y(()=>t.config.isOnline?n("INBOX_MGMT.WIDGET_BUILDER.BODY.TEAM_AVAILABILITY.ONLINE"):n("INBOX_MGMT.WIDGET_BUILDER.BODY.TEAM_AVAILABILITY.OFFLINE"));return(o,i)=>(p(),E("div",KJ,[e.config.isDefaultScreen?(p(),E("div",XJ,[m("div",qJ,[m("div",null,[m("div",ZJ,I(a.value),1),m("div",QJ,I(e.config.replyTime),1)]),S(kt,{name:"C",size:34,"rounded-full":""})]),e.config.isDefaultScreen?(p(),E("button",{key:0,class:"inline-flex items-center justify-between px-2 py-1 mt-1 -ml-2 font-medium leading-6 bg-transparent rounded-md text-n-slate-12 dark:bg-transparent",style:Zt({color:e.config.color})},[m("span",JJ,I(o.$t("INBOX_MGMT.WIDGET_BUILDER.FOOTER.START_CONVERSATION_BUTTON_TEXT")),1),S(cm,{icon:"arrow-right",size:"14"})],4)):$("",!0)])):(p(),E("div",{key:1,class:ae(["flex items-center h-10 bg-white rounded-md dark:!bg-n-slate-3",{"ring-2 ring-n-brand dark:ring-n-brand":s.value}])},[S(yg,{id:"chat-input",rows:1,placeholder:o.$t("INBOX_MGMT.WIDGET_BUILDER.FOOTER.CHAT_INPUT_PLACEHOLDER"),class:"flex-grow !bg-white border-0 outline-none !outline-0 border-none h-8 text-sm dark:!bg-n-slate-3 pb-0 !pt-1.5 resize-none px-3 !mb-0 focus:outline-none rounded-md",onFocus:i[0]||(i[0]=l=>s.value=!0),onBlur:i[1]||(i[1]=l=>s.value=!1)},null,8,["placeholder"]),m("div",eee,[S(cm,{icon:"emoji"}),S(cm,{class:"icon-send",icon:"send"})])],2))]))}},nee="data:image/svg+xml,%3csvg%20width='66'%20height='66'%20viewBox='0%200%2066%2066'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M63%2063H32.9976C16.4591%2063%202.99996%2049.5399%202.99996%2032.9973C2.99996%2016.4601%2016.4591%203%2032.9979%203C49.5408%203%2063%2016.4601%2063%2032.9973V63Z'%20fill='white'%20stroke='white'%20stroke-width='6'/%3e%3c/svg%3e",see={name:"Widget",components:{WidgetHead:GJ,WidgetBody:jJ,WidgetFooter:tee,InputRadioGroup:__},props:{welcomeHeading:{type:String,default:""},welcomeTagline:{type:String,default:""},websiteName:{type:String,required:!0},logo:{type:String,default:""},isOnline:{type:Boolean,default:!0},replyTime:{type:String,default:""},color:{type:String,default:""},widgetBubblePosition:{type:String,default:""},widgetBubbleLauncherTitle:{type:String,default:""},widgetBubbleType:{type:String,default:""}},setup(){const{replaceInstallationName:e}=Wa();return{replaceInstallationName:e}},data(){return{widgetScreens:[{id:"default",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_SCREEN.DEFAULT"),checked:!0},{id:"chat",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_SCREEN.CHAT"),checked:!1}],isDefaultScreen:!0,isWidgetVisible:!0}},computed:{...mt({globalConfig:"globalConfig/get"}),getWidgetConfig(){return{welcomeHeading:this.welcomeHeading,welcomeTagline:this.welcomeTagline,websiteName:this.websiteName,logo:this.logo,isDefaultScreen:this.isDefaultScreen,isOnline:this.isOnline,replyTime:this.replyTimeText,color:this.color}},replyTimeText(){switch(this.replyTime){case"in_a_few_minutes":return this.$t("INBOX_MGMT.WIDGET_BUILDER.REPLY_TIME.IN_A_FEW_MINUTES");case"in_a_day":return this.$t("INBOX_MGMT.WIDGET_BUILDER.REPLY_TIME.IN_A_DAY");default:return this.$t("INBOX_MGMT.WIDGET_BUILDER.REPLY_TIME.IN_A_FEW_HOURS")}},getBubblePositionStyle(){return{justifyContent:this.widgetBubblePosition==="left"?"start":"end"}},isBubbleExpanded(){return!this.isWidgetVisible&&this.widgetBubbleType==="expanded_bubble"},getWidgetBubbleLauncherTitle(){return this.isWidgetVisible||this.widgetBubbleType==="standard"?" ":this.widgetBubbleLauncherTitle}},methods:{handleScreenChange(e){this.isDefaultScreen=e.id==="default"},toggleWidget(){this.isWidgetVisible=!this.isWidgetVisible,this.isDefaultScreen=!0}}},aee={key:0,class:"flex flex-col items-center"},oee={key:1,class:"widget-wrapper flex flex-col justify-between rounded-lg shadow-md bg-n-slate-2 dark:bg-n-solid-1 h-[31.25rem] w-80"},iee={class:"py-2.5 flex justify-center"},lee={class:"items-center gap-0.5 text-n-slate-11 cursor-pointer flex filter grayscale opacity-90 hover:grayscale-0 hover:opacity-100 text-xxs"},ree=["src"],cee={key:0,src:nee,alt:"",draggable:"false",class:"w-6 h-6 mx-auto"},uee={key:1,class:"ltr:pl-2.5 rtl:pr-2.5"},dee={key:2,class:"relative"};function pee(e,t,n,s,a,o){const i=W("InputRadioGroup"),l=W("WidgetHead"),r=W("WidgetBody"),c=W("WidgetFooter");return p(),E("div",null,[a.isWidgetVisible?(p(),E("div",aee,[S(i,{name:"widget-screen",items:a.widgetScreens,action:o.handleScreenChange},null,8,["items","action"])])):$("",!0),a.isWidgetVisible?(p(),E("div",oee,[S(l,{config:o.getWidgetConfig},null,8,["config"]),m("div",null,[o.getWidgetConfig.isDefaultScreen?$("",!0):(p(),L(r,{key:0,config:o.getWidgetConfig},null,8,["config"])),S(c,{config:o.getWidgetConfig},null,8,["config"]),m("div",iee,[m("a",lee,[m("img",{class:"max-w-2.5 max-h-2.5",src:e.globalConfig.logoThumbnail},null,8,ree),m("span",null,I(s.replaceInstallationName(e.$t("INBOX_MGMT.WIDGET_BUILDER.BRANDING_TEXT"))),1)])])])])):$("",!0),m("div",{class:"flex mt-4 w-[320px]",style:Zt(o.getBubblePositionStyle)},[m("button",{class:ae(["relative flex items-center justify-center rounded-full cursor-pointer",o.isBubbleExpanded?"w-auto font-medium text-base text-white dark:text-white h-12 px-4":"w-16 h-16"]),style:Zt({background:n.color}),onClick:t[0]||(t[0]=(...u)=>o.toggleWidget&&o.toggleWidget(...u))},[a.isWidgetVisible?$("",!0):(p(),E("img",cee)),o.isBubbleExpanded?(p(),E("div",uee,I(o.getWidgetBubbleLauncherTitle),1)):$("",!0),a.isWidgetVisible?(p(),E("div",dee,t[1]||(t[1]=[m("div",{class:"absolute w-0.5 h-8 rotate-45 -translate-y-1/2 bg-white"},null,-1),m("div",{class:"absolute w-0.5 h-8 -rotate-45 -translate-y-1/2 bg-white"},null,-1)]))):$("",!0)],6)],4)])}const mee=De(see,[["render",pee]]),hee={components:{Widget:mee,InputRadioGroup:__,NextButton:te,Editor:Ks,Avatar:kt},props:{inbox:{type:Object,default:()=>{}}},setup(){return{v$:bt()}},data(){return{isWidgetPreview:!0,color:"#1f93ff",websiteName:"",welcomeHeading:"",welcomeTagline:"",replyTime:"in_a_few_minutes",avatarFile:null,avatarUrl:"",widgetBubblePosition:"right",widgetBubbleLauncherTitle:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_LAUNCHER_TITLE.DEFAULT"),widgetBubbleType:"standard",widgetBubblePositions:[{id:"left",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_POSITION.LEFT"),checked:!1},{id:"right",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_POSITION.RIGHT"),checked:!0}],widgetBubbleTypes:[{id:"standard",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_TYPE.STANDARD"),checked:!0},{id:"expanded_bubble",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_TYPE.EXPANDED_BUBBLE"),checked:!1}],welcomeTaglineEditorMenuOptions:i_}},computed:{...mt({uiFlags:"inboxes/getUIFlags"}),storageKey(){return`${ao.WIDGET_BUILDER}${this.inbox.id}`},widgetScript(){let e={position:this.widgetBubblePosition,type:this.widgetBubbleType,launcherTitle:this.widgetBubbleLauncherTitle},t=this.inbox.web_widget_script;return t.substring(0,13)+this.$t("INBOX_MGMT.WIDGET_BUILDER.SCRIPT_SETTINGS",{options:JSON.stringify(e)})+t.substring(13)},getWidgetViewOptions(){return[{id:"preview",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_VIEW_OPTION.PREVIEW"),checked:!0},{id:"script",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_VIEW_OPTION.SCRIPT"),checked:!1}]},getReplyTimeOptions(){return[{key:"in_a_few_minutes",value:"in_a_few_minutes",text:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.IN_A_FEW_MINUTES")},{key:"in_a_few_hours",value:"in_a_few_hours",text:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.IN_A_FEW_HOURS")},{key:"in_a_day",value:"in_a_day",text:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.IN_A_DAY")}]},websiteNameValidationErrorMsg(){return this.v$.websiteName.$error?this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WEBSITE_NAME.ERROR"):""}},mounted(){this.setDefaults()},validations:{websiteName:{required:Ye}},methods:{setDefaults(){const{name:e,welcome_title:t,welcome_tagline:n,widget_color:s,reply_time:a,avatar_url:o}=this.inbox;this.websiteName=e,this.welcomeHeading=t,this.welcomeTagline=n,this.color=s,this.replyTime=a,this.avatarUrl=o;const i=this.getSavedInboxInformation();i&&(this.widgetBubblePositions=this.widgetBubblePositions.map(l=>(l.id===i.position&&(l.checked=!0,this.widgetBubblePosition=l.id),l)),this.widgetBubbleTypes=this.widgetBubbleTypes.map(l=>(l.id===i.type&&(l.checked=!0,this.widgetBubbleType=l.id),l)),this.widgetBubbleLauncherTitle=i.launcherTitle||"Chat with us")},handleWidgetBubblePositionChange(e){this.widgetBubblePosition=e.id},handleWidgetBubbleTypeChange(e){this.widgetBubbleType=e.id},handleWidgetViewChange(e){this.isWidgetPreview=e.id==="preview"},handleImageUpload({file:e,url:t}){this.avatarFile=e,this.avatarUrl=t},async handleAvatarDelete(){try{await this.$store.dispatch("inboxes/deleteInboxAvatar",this.inbox.id),this.avatarFile=null,this.avatarUrl="",ne(this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.AVATAR.DELETE.API.SUCCESS_MESSAGE"))}catch(e){ne(e.message?e.message:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.AVATAR.DELETE.API.ERROR_MESSAGE"))}},async updateWidget(){const e={position:this.widgetBubblePosition,launcherTitle:this.widgetBubbleLauncherTitle,type:this.widgetBubbleType};ka.set(this.storageKey,e);try{const t={id:this.inbox.id,name:this.websiteName,channel:{widget_color:this.color,welcome_title:this.welcomeHeading,welcome_tagline:this.welcomeTagline,reply_time:this.replyTime}};this.avatarFile&&(t.avatar=this.avatarFile),await this.$store.dispatch("inboxes/updateInbox",t),ne(this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.UPDATE.API.SUCCESS_MESSAGE"))}catch(t){ne(t.message||this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.UPDATE.API.ERROR_MESSAGE"))}},getSavedInboxInformation(){return ka.get(this.storageKey)}}},fee={class:"mx-8"},gee={class:"flex p-2.5"},_ee={class:"w-100 lg:w-[40%]"},vee={class:"min-h-full py-4 overflow-y-scroll px-px"},Eee={class:"flex flex-col mb-4 items-start gap-1 w-full"},bee={class:"mb-0.5 text-sm font-medium text-n-slate-12"},Tee=["value"],See={class:"w-100 lg:w-3/5"},Aee={key:0,class:"flex flex-col items-center justify-end min-h-[40.625rem] mx-5 mb-5 p-2.5 bg-n-slate-3 rounded-lg"},yee={key:1,class:"mx-5 p-2.5 bg-n-slate-3 rounded-lg dark:bg-n-solid-3"};function Iee(e,t,n,s,a,o){const i=W("Avatar"),l=W("woot-input"),r=W("Editor"),c=W("woot-color-picker"),u=W("InputRadioGroup"),d=W("NextButton"),h=W("Widget"),g=W("woot-code");return p(),E("div",fee,[m("div",gee,[m("div",_ee,[m("div",vee,[m("form",{onSubmit:t[6]||(t[6]=Ve((...f)=>o.updateWidget&&o.updateWidget(...f),["prevent"]))},[m("div",Eee,[m("label",bee,I(e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.AVATAR.LABEL")),1),S(i,{src:a.avatarUrl,size:72,"icon-name":"i-ri-global-fill",name:"","allow-upload":"","rounded-full":"",onUpload:o.handleImageUpload,onDelete:o.handleAvatarDelete},null,8,["src","onUpload","onDelete"])]),S(l,{modelValue:a.websiteName,"onUpdate:modelValue":t[0]||(t[0]=f=>a.websiteName=f),class:ae({error:s.v$.websiteName.$error}),label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WEBSITE_NAME.LABEL"),placeholder:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WEBSITE_NAME.PLACE_HOLDER"),error:o.websiteNameValidationErrorMsg,onBlur:s.v$.websiteName.$touch},null,8,["modelValue","class","label","placeholder","error","onBlur"]),S(l,{modelValue:a.welcomeHeading,"onUpdate:modelValue":t[1]||(t[1]=f=>a.welcomeHeading=f),label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_HEADING.LABEL"),placeholder:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_HEADING.PLACE_HOLDER")},null,8,["modelValue","label","placeholder"]),S(r,{modelValue:a.welcomeTagline,"onUpdate:modelValue":t[2]||(t[2]=f=>a.welcomeTagline=f),label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_TAGLINE.LABEL"),placeholder:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_TAGLINE.PLACE_HOLDER"),"max-length":255,"enabled-menu-options":a.welcomeTaglineEditorMenuOptions,class:"mb-4"},null,8,["modelValue","label","placeholder","enabled-menu-options"]),m("label",null,[xe(I(e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.LABEL"))+" ",1),re(m("select",{"onUpdate:modelValue":t[3]||(t[3]=f=>a.replyTime=f)},[(p(!0),E(ue,null,Ae(o.getReplyTimeOptions,f=>(p(),E("option",{key:f.key,value:f.value},I(f.text),9,Tee))),128))],512),[[Nn,a.replyTime]])]),m("label",null,[xe(I(e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_COLOR_LABEL"))+" ",1),S(c,{modelValue:a.color,"onUpdate:modelValue":t[4]||(t[4]=f=>a.color=f)},null,8,["modelValue"])]),S(u,{name:"widget-bubble-position",label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_POSITION_LABEL"),items:a.widgetBubblePositions,action:o.handleWidgetBubblePositionChange},null,8,["label","items","action"]),S(u,{name:"widget-bubble-type",label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_TYPE_LABEL"),items:a.widgetBubbleTypes,action:o.handleWidgetBubbleTypeChange},null,8,["label","items","action"]),S(l,{modelValue:a.widgetBubbleLauncherTitle,"onUpdate:modelValue":t[5]||(t[5]=f=>a.widgetBubbleLauncherTitle=f),label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_LAUNCHER_TITLE.LABEL"),placeholder:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_LAUNCHER_TITLE.PLACE_HOLDER")},null,8,["modelValue","label","placeholder"]),S(d,{type:"submit",class:"mt-4",label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.UPDATE.BUTTON_TEXT"),"is-loading":e.uiFlags.isUpdating,disabled:s.v$.$invalid||e.uiFlags.isUpdating},null,8,["label","is-loading","disabled"])],32)])]),m("div",See,[S(u,{name:"widget-view-options",class:"text-center",items:o.getWidgetViewOptions,action:o.handleWidgetViewChange},null,8,["items","action"]),a.isWidgetPreview?(p(),E("div",Aee,[S(h,{"welcome-heading":a.welcomeHeading,"welcome-tagline":a.welcomeTagline,"website-name":a.websiteName,logo:a.avatarUrl,"is-online":"","reply-time":a.replyTime,color:a.color,"widget-bubble-position":a.widgetBubblePosition,"widget-bubble-launcher-title":a.widgetBubbleLauncherTitle,"widget-bubble-type":a.widgetBubbleType},null,8,["welcome-heading","welcome-tagline","website-name","logo","reply-time","color","widget-bubble-position","widget-bubble-launcher-title","widget-bubble-type"])])):(p(),E("div",yee,[S(g,{script:o.widgetScript},null,8,["script"])]))])])])}const Cee=De(hee,[["render",Iee]]),Nee={components:{LoadingState:Nr,SettingsSection:yl,NextButton:te},props:{inbox:{type:Object,default:()=>({})}},data(){return{selectedAgentBotId:null}},computed:{...mt({agentBots:"agentBots/getBots",uiFlags:"agentBots/getUIFlags"}),activeAgentBot(){return this.$store.getters["agentBots/getActiveAgentBot"](this.inbox.id)}},watch:{activeAgentBot(){this.selectedAgentBotId=this.activeAgentBot.id}},mounted(){this.$store.dispatch("agentBots/get"),this.$store.dispatch("agentBots/fetchAgentBotInbox",this.inbox.id)},methods:{async updateActiveAgentBot(){try{await this.$store.dispatch("agentBots/setAgentBotInbox",{inboxId:this.inbox.id,botId:this.selectedAgentBotId?this.selectedAgentBotId:void 0}),ne(this.$t("AGENT_BOTS.BOT_CONFIGURATION.SUCCESS_MESSAGE"))}catch{ne(this.$t("AGENT_BOTS.BOT_CONFIGURATION.ERROR_MESSAGE"))}},async disconnectBot(){try{await this.$store.dispatch("agentBots/disconnectBot",{inboxId:this.inbox.id}),ne(this.$t("AGENT_BOTS.BOT_CONFIGURATION.DISCONNECTED_SUCCESS_MESSAGE"))}catch(e){ne((e==null?void 0:e.message)||this.$t("AGENT_BOTS.BOT_CONFIGURATION.DISCONNECTED_ERROR_MESSAGE"))}}}},Oee={class:"mx-8"},Ree={value:"",disabled:"",selected:""},xee=["value"],wee={class:"button-container space-x-2"};function $ee(e,t,n,s,a,o){const i=W("LoadingState"),l=W("NextButton"),r=W("SettingsSection");return p(),E("div",Oee,[e.uiFlags.isFetching||e.uiFlags.isFetchingAgentBot?(p(),L(i,{key:0})):(p(),E("form",{key:1,class:"flex flex-wrap mx-0",onSubmit:t[1]||(t[1]=Ve((...c)=>o.updateActiveAgentBot&&o.updateActiveAgentBot(...c),["prevent"]))},[S(r,{title:e.$t("AGENT_BOTS.BOT_CONFIGURATION.TITLE"),"sub-title":e.$t("AGENT_BOTS.BOT_CONFIGURATION.DESC")},{default:Y(()=>[m("div",null,[m("label",null,[re(m("select",{"onUpdate:modelValue":t[0]||(t[0]=c=>a.selectedAgentBotId=c)},[m("option",Ree,I(e.$t("AGENT_BOTS.BOT_CONFIGURATION.SELECT_PLACEHOLDER")),1),(p(!0),E(ue,null,Ae(e.agentBots,c=>(p(),E("option",{key:c.id,value:c.id},I(c.name),9,xee))),128))],512),[[Nn,a.selectedAgentBotId]])]),m("div",wee,[S(l,{type:"submit",label:e.$t("AGENT_BOTS.BOT_CONFIGURATION.SUBMIT"),"is-loading":e.uiFlags.isSettingAgentBot},null,8,["label","is-loading"]),S(l,{type:"button",disabled:!a.selectedAgentBotId,"is-loading":e.uiFlags.isDisconnecting,faded:"",ruby:"",onClick:o.disconnectBot},{default:Y(()=>[xe(I(e.$t("AGENT_BOTS.BOT_CONFIGURATION.DISCONNECT")),1)]),_:1},8,["disabled","is-loading","onClick"])])])]),_:1},8,["title","sub-title"])],32))])}const Mee=De(Nee,[["render",$ee]]),Lee={class:"gap-4 pt-8 mx-8"},Dee={class:"px-5 py-5 space-y-6 rounded-xl border shadow-sm border-n-weak bg-n-solid-2"},Pee={class:"flex flex-col gap-5 justify-between items-start w-full md:flex-row"},kee={class:"text-base font-medium text-n-slate-12"},Bee={class:"mt-1 text-sm text-n-slate-11"},Uee={key:0,class:"grid grid-cols-1 gap-4 xs:grid-cols-2"},Fee={class:"flex gap-2 items-center"},Gee={class:"text-sm font-medium text-n-slate-11"},Vee={class:"flex items-center"},Hee={key:3,class:"text-sm font-medium text-n-slate-12"},Wee={key:4,class:"text-sm font-medium text-n-slate-12"},zee={key:1,class:"pt-8"},Yee={class:"flex justify-center items-center p-8 text-center text-n-slate-11"},jee={class:"text-sm"},Kee={__name:"AccountHealth",props:{healthData:{type:Object,default:null}},setup(e){const t=e,{t:n}=be(),s={GREEN:"text-n-teal-11",YELLOW:"text-n-amber-11",RED:"text-n-ruby-11",UNKNOWN:"text-n-slate-12"},a={APPROVED:"text-n-teal-11",PENDING_REVIEW:"text-n-amber-11",AVAILABLE_WITHOUT_REVIEW:"text-n-teal-11",REJECTED:"text-n-ruby-9",DECLINED:"text-n-ruby-9"},o={LIVE:"text-n-teal-11",SANDBOX:"text-n-slate-11"},i=y(()=>{if(!t.healthData)return[];const{display_phone_number:f,verified_name:b,name_status:A,quality_rating:v,messaging_limit_tier:T,account_mode:_}=t.healthData;return[{key:"displayPhoneNumber",label:n("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.DISPLAY_PHONE_NUMBER.LABEL"),value:f||"N/A",tooltip:n("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.DISPLAY_PHONE_NUMBER.TOOLTIP"),show:!0},{key:"verifiedName",label:n("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.VERIFIED_NAME.LABEL"),value:b||"N/A",tooltip:n("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.VERIFIED_NAME.TOOLTIP"),show:!0},{key:"displayNameStatus",label:n("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.DISPLAY_NAME_STATUS.LABEL"),value:A||"UNKNOWN",tooltip:n("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.DISPLAY_NAME_STATUS.TOOLTIP"),show:!0,type:"status"},{key:"qualityRating",label:n("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.QUALITY_RATING.LABEL"),value:v||"UNKNOWN",tooltip:n("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.QUALITY_RATING.TOOLTIP"),show:!0,type:"quality"},{key:"messagingLimitTier",label:n("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.MESSAGING_LIMIT_TIER.LABEL"),value:T||"UNKNOWN",tooltip:n("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.MESSAGING_LIMIT_TIER.TOOLTIP"),show:!0,type:"tier"},{key:"accountMode",label:n("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.ACCOUNT_MODE.LABEL"),value:_||"UNKNOWN",tooltip:n("INBOX_MGMT.ACCOUNT_HEALTH.FIELDS.ACCOUNT_MODE.TOOLTIP"),show:!0,type:"mode"}]}),l=()=>{const{business_id:f}=t.healthData||{};if(f){const b=`https://business.facebook.com/latest/whatsapp_manager/phone_numbers/?business_id=${f}&tab=phone-numbers`;window.open(b,"_blank")}else window.open("https://business.facebook.com/","_blank")},r=f=>s[f]||s.UNKNOWN,c=f=>n(`INBOX_MGMT.ACCOUNT_HEALTH.VALUES.TIERS.${f}`)||f,u=f=>n(`INBOX_MGMT.ACCOUNT_HEALTH.VALUES.STATUSES.${f}`)||f,d=f=>n(`INBOX_MGMT.ACCOUNT_HEALTH.VALUES.MODES.${f}`)||f,h=f=>o[f]||"text-n-slate-12",g=f=>a[f]||"text-n-slate-12";return(f,b)=>{const A=Qe("tooltip");return p(),E("div",Lee,[m("div",Dee,[m("div",Pee,[m("div",null,[m("span",kee,I(C(n)("INBOX_MGMT.ACCOUNT_HEALTH.TITLE")),1),m("p",Bee,I(C(n)("INBOX_MGMT.ACCOUNT_HEALTH.DESCRIPTION")),1)]),S(te,{sm:"",solid:"",blue:"",class:"flex-shrink-0",onClick:l},{default:Y(()=>[xe(I(C(n)("INBOX_MGMT.ACCOUNT_HEALTH.GO_TO_SETTINGS")),1)]),_:1})]),e.healthData?(p(),E("div",Uee,[(p(!0),E(ue,null,Ae(i.value,v=>(p(),E("div",{key:v.key,class:"flex flex-col gap-2 p-4 rounded-lg border border-n-weak bg-n-solid-1"},[m("div",Fee,[m("span",Gee,I(v.label),1),re(S(dt,{icon:"i-lucide-info",class:"flex-shrink-0 w-4 h-4 cursor-help text-n-slate-9"},null,512),[[A,v.tooltip,void 0,{top:!0}]])]),m("div",Vee,[v.type==="quality"?(p(),E("span",{key:0,class:ae(["inline-flex items-center px-2 py-0.5 min-h-6 text-xs font-medium rounded-md bg-n-alpha-2",r(v.value)])},I(v.value),3)):v.type==="status"?(p(),E("span",{key:1,class:ae(["inline-flex items-center px-2 py-0.5 min-h-6 text-xs font-medium rounded-md bg-n-alpha-2",g(v.value)])},I(u(v.value)),3)):v.type==="mode"?(p(),E("span",{key:2,class:ae(["inline-flex items-center px-2 py-0.5 min-h-6 text-xs font-medium rounded-md bg-n-alpha-2",h(v.value)])},I(d(v.value)),3)):v.type==="tier"?(p(),E("span",Hee,I(c(v.value)),1)):(p(),E("span",Wee,I(v.value),1))])]))),128))])):(p(),E("div",zee,[m("div",Yee,[m("div",null,[S(dt,{icon:"i-lucide-activity",class:"mb-2 w-8 h-8"}),m("p",jee,I(C(n)("INBOX_MGMT.ACCOUNT_HEALTH.NO_DATA")),1)])])]))])])}}},Xee={props:{heading:{type:String,default:""},content:{type:String,default:""},active:{type:Boolean,default:!1},src:{type:String,default:""}}},qee={class:"flex items-center p-1 text-sm font-medium"},Zee={class:"text-n-slate-11 text-xs leading-[1.4] px-3 pt-3 pb-0 text-start"},Qee={key:0,class:"p-3"},Jee=["src"];function ete(e,t,n,s,a,o){const i=W("fluent-icon");return p(),E("div",{class:ae(["flex flex-col min-w-[15rem] max-h-[21.25rem] max-w-[23.75rem] rounded-md border border-solid",{"bg-n-blue-1 dark:bg-n-solid-2 border-n-blue-4":n.active,"border-n-weak":!n.active}])},[m("div",{class:ae(["flex justify-between items-center rounded-t-md px-2 w-full h-10 border-b border-solid",{"bg-n-blue-2 border-n-blue-4":n.active,"bg-n-slate-2 border-n-weak":!n.active}])},[m("div",qee,I(n.heading),1),n.active?(p(),L(i,{key:0,icon:"checkmark-circle",type:"solid",size:"24",class:"text-n-brand"})):$("",!0)],2),m("div",Zee,I(n.content),1),n.src?(p(),E("div",Qee,[m("img",{src:n.src,class:ae(["border rounded-md",n.active?"border-n-blue-border":"border-n-weak"])},null,10,Jee)])):We(e.$slots,"default",{key:1})],2)}const tte=De(Xee,[["render",ete]]),nte={components:{PreviewCard:tte,Avatar:kt},props:{senderNameType:{type:String,default:"friendly"},businessName:{type:String,default:""}},emits:["update"],data(){return{senderNameKeyOptions:[{key:"friendly",heading:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FRIENDLY.TITLE"),content:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FRIENDLY.SUBTITLE"),preview:{senderName:"Smith",businessName:"Chatwoot",email:"<support@yourbusiness.com>"}},{key:"professional",heading:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.PROFESSIONAL.TITLE"),content:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.PROFESSIONAL.SUBTITLE"),preview:{senderName:"",businessName:"Chatwoot   ",email:"<support@yourbusiness.com>"}}]}},methods:{isKeyOptionFriendly(e){return e==="friendly"},userName(e){return this.isKeyOptionFriendly(e.key)?e.preview.senderName:e.preview.businessName},toggleSenderNameType(e){this.$emit("update",e)}}},ste={class:"flex flex-col lg:flex-row items-start lg:items-center gap-4"},ate=["onClick"],ote={class:"flex flex-col items-start p-3 gap-2"},ite={class:"text-xs"},lte={class:"flex flex-row items-center gap-2"},rte={class:"flex flex-col items-start gap-1"},cte={class:"items-center flex flex-row gap-0.5 max-w-[18rem]"},ute={key:0,class:"text-xs font-semibold leading-tight"},dte={key:1,class:"text-xs"},pte={class:"text-xs font-semibold leading-tight overflow-hidden whitespace-nowrap text-ellipsis"},mte={class:"text-xs"};function hte(e,t,n,s,a,o){const i=W("Avatar"),l=W("PreviewCard");return p(),E("div",ste,[(p(!0),E(ue,null,Ae(a.senderNameKeyOptions,r=>(p(),E("button",{key:r.key,class:"text-n-slate-12 cursor-pointer p-0",onClick:c=>o.toggleSenderNameType(r.key)},[S(l,{heading:r.heading,content:r.content,active:r.key===n.senderNameType},{default:Y(()=>[m("div",ote,[m("span",ite,I(e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FOR_EG")),1),m("div",lte,[S(i,{name:o.userName(r),size:32,"rounded-full":""},null,8,["name"]),m("div",rte,[m("div",cte,[o.isKeyOptionFriendly(r.key)?(p(),E("span",ute,I(r.preview.senderName),1)):$("",!0),o.isKeyOptionFriendly(r.key)?(p(),E("span",dte,I(e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FRIENDLY.FROM")),1)):$("",!0),m("span",pte,I(n.businessName||r.preview.businessName),1)]),m("span",mte,I(r.preview.email),1)])])])]),_:2},1032,["heading","content","active"])],8,ate))),128))])}const fte=De(nte,[["render",hte]]),gte={components:{BotConfiguration:Mee,CollaboratorsPage:RJ,ConfigurationPage:rJ,CustomerSatisfactionPage:bJ,FacebookReauthorize:hq,GreetingsEditor:NA,PreChatFormSettings:UZ,SettingIntroBanner:tq,SettingsSection:yl,WeeklyAvailability:pQ,WidgetBuilder:Cee,SenderNameExamplePreview:fte,MicrosoftReauthorize:_q,GoogleReauthorize:vq,NextButton:te,InstagramReauthorize:fq,WhatsappReauthorize:BA,DuplicateInboxBanner:kA,Editor:Ks,Avatar:kt,AccountHealth:Kee},mixins:[wr],setup(){return{v$:bt()}},data(){return{avatarFile:null,avatarUrl:"",greetingEnabled:!0,greetingMessage:"",emailCollectEnabled:!1,senderNameType:"friendly",businessName:"",locktoSingleConversation:!1,allowMessagesAfterResolved:!0,continuityViaEmail:!0,selectedInboxName:"",channelWebsiteUrl:"",webhookUrl:"",channelWelcomeTitle:"",channelWelcomeTagline:"",selectedFeatureFlags:[],replyTime:"",selectedTabIndex:0,selectedPortalSlug:"",showBusinessNameInput:!1,welcomeTaglineEditorMenuOptions:i_,healthData:null,isLoadingHealth:!1,healthError:null}},computed:{...mt({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",uiFlags:"inboxes/getUIFlags",portals:"portals/allPortals"}),selectedTabKey(){var e;return(e=this.tabs[this.selectedTabIndex])==null?void 0:e.key},shouldShowWhatsAppConfiguration(){return this.isAWhatsAppCloudChannel},whatsAppAPIProviderName(){return this.isAWhatsAppCloudChannel?this.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.WHATSAPP_CLOUD"):this.is360DialogWhatsAppChannel?this.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.360_DIALOG"):this.isATwilioWhatsAppChannel?this.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.TWILIO"):""},tabs(){let e=[{key:"inbox-settings",name:this.$t("INBOX_MGMT.TABS.SETTINGS")},{key:"collaborators",name:this.$t("INBOX_MGMT.TABS.COLLABORATORS")}];return this.isAVoiceChannel||(e=[...e,{key:"business-hours",name:this.$t("INBOX_MGMT.TABS.BUSINESS_HOURS")},{key:"csat",name:this.$t("INBOX_MGMT.TABS.CSAT")}]),this.isAWebWidgetInbox&&(e=[...e,{key:"pre-chat-form",name:this.$t("INBOX_MGMT.TABS.PRE_CHAT_FORM")},{key:"widget-builder",name:this.$t("INBOX_MGMT.TABS.WIDGET_BUILDER")}]),(this.isATwilioChannel||this.isALineChannel||this.isAPIInbox||this.isAVoiceChannel||this.isAnEmailChannel&&!this.inbox.provider||this.shouldShowWhatsAppConfiguration||this.isAWebWidgetInbox)&&(e=[...e,{key:"configuration",name:this.$t("INBOX_MGMT.TABS.CONFIGURATION")}]),this.isFeatureEnabledonAccount(this.accountId,ft.AGENT_BOTS)&&(e=[...e,{key:"bot-configuration",name:this.$t("INBOX_MGMT.TABS.BOT_CONFIGURATION")}]),this.shouldShowWhatsAppConfiguration&&(e=[...e,{key:"whatsapp-health",name:this.$t("INBOX_MGMT.TABS.ACCOUNT_HEALTH")}]),e},currentInboxId(){return this.$route.params.inboxId},inbox(){return this.$store.getters["inboxes/getInbox"](this.currentInboxId)},inboxIcon(){const{medium:e,channel_type:t}=this.inbox;return ni(t,e)},inboxName(){return this.isATwilioSMSChannel||this.isATwilioWhatsAppChannel?`${this.inbox.name} (${this.inbox.messaging_service_sid||this.inbox.phone_number})`:this.isAWhatsAppChannel?`${this.inbox.name} (${this.inbox.phone_number})`:this.isAnEmailChannel?`${this.inbox.name} (${this.inbox.email})`:this.inbox.name},canLocktoSingleConversation(){return this.isASmsInbox||this.isAWhatsAppChannel||this.isAFacebookInbox||this.isAPIInbox||this.isATelegramChannel},inboxNameLabel(){return this.isAWebWidgetInbox?this.$t("INBOX_MGMT.ADD.WEBSITE_NAME.LABEL"):this.$t("INBOX_MGMT.ADD.CHANNEL_NAME.LABEL")},inboxNamePlaceHolder(){return this.isAWebWidgetInbox?this.$t("INBOX_MGMT.ADD.WEBSITE_NAME.PLACEHOLDER"):this.$t("INBOX_MGMT.ADD.CHANNEL_NAME.PLACEHOLDER")},textAreaChannels(){return!!(this.isATwilioChannel||this.isATwitterInbox||this.isAFacebookInbox)},instagramUnauthorized(){return this.isAnInstagramChannel&&this.inbox.reauthorization_required},hasDuplicateInstagramInbox(){const e=this.inbox.instagram_id,t=this.$store.getters["inboxes/getInstagramInboxByInstagramId"](e);return this.inbox.channel_type===St.FB&&t},microsoftUnauthorized(){return this.isAMicrosoftInbox&&this.inbox.reauthorization_required},facebookUnauthorized(){return this.isAFacebookInbox&&this.inbox.reauthorization_required},googleUnauthorized(){const e=["imap.gmail.com","imap.google.com"].includes(this.inbox.imap_address);return(this.isAGoogleInbox||e)&&this.inbox.reauthorization_required},isEmbeddedSignupWhatsApp(){var e;return((e=this.inbox.provider_config)==null?void 0:e.source)==="embedded_signup"},whatsappUnauthorized(){return this.isAWhatsAppCloudChannel&&this.isEmbeddedSignupWhatsApp&&this.inbox.reauthorization_required},whatsappRegistrationIncomplete(){var e;return!this.healthData||!this.isAWhatsAppCloudChannel||!this.isEmbeddedSignupWhatsApp?!1:this.healthData.platform_type==="NOT_APPLICABLE"||((e=this.healthData.throughput)==null?void 0:e.level)==="NOT_APPLICABLE"}},watch:{$route(e){e.name==="settings_inbox_show"&&this.fetchInboxSettings()},inbox:{handler(){this.fetchHealthData()},immediate:!1}},mounted(){this.fetchInboxSettings(),this.fetchPortals(),this.fetchHealthData()},methods:{fetchPortals(){this.$store.dispatch("portals/index")},async fetchHealthData(){if(this.inbox&&this.isAWhatsAppCloudChannel)try{this.isLoadingHealth=!0,this.healthError=null;const e=await bq.getHealthStatus(this.inbox.id);this.healthData=e.data}catch(e){this.healthError=e.message||"Failed to fetch health data"}finally{this.isLoadingHealth=!1}},handleFeatureFlag(e){this.selectedFeatureFlags=this.toggleInput(this.selectedFeatureFlags,e.target.value)},toggleInput(e,t){return e.includes(t)?e.filter(s=>s!==t):[...e,t]},refreshAvatarUrlOnTabChange(e){this.inbox&&["inbox-settings","widget-builder"].includes(this.tabs[e].key)&&(this.avatarUrl=this.inbox.avatar_url)},onTabChange(e){this.selectedTabIndex=e,this.refreshAvatarUrlOnTabChange(e),this.updateRouteWithoutRefresh(e)},updateRouteWithoutRefresh(e){const t=this.tabs[e];if(!t)return;const{accountId:n,inboxId:s}=this.$route.params,a=`/app/accounts/${n}/settings/inboxes/${s}`,o=t.key==="inbox-settings"?a:`${a}/${t.key}`;window.history.replaceState(null,"",o)},setTabFromRouteParam(){const{tab:e}=this.$route.params;if(!e)return;const t=this.tabs.findIndex(n=>n.key===e);this.selectedTabIndex=t===-1?0:t},fetchInboxSettings(){this.selectedAgents=[],this.$store.dispatch("agents/get"),this.$store.dispatch("teams/get"),this.$store.dispatch("labels/get"),this.$store.dispatch("inboxes/get").then(()=>{this.avatarUrl=this.inbox.avatar_url,this.selectedInboxName=this.inbox.name,this.webhookUrl=this.inbox.webhook_url,this.greetingEnabled=this.inbox.greeting_enabled||!1,this.greetingMessage=this.inbox.greeting_message||"",this.emailCollectEnabled=this.inbox.enable_email_collect,this.senderNameType=this.inbox.sender_name_type,this.businessName=this.inbox.business_name,this.allowMessagesAfterResolved=this.inbox.allow_messages_after_resolved,this.continuityViaEmail=this.inbox.continuity_via_email,this.channelWebsiteUrl=this.inbox.website_url,this.channelWelcomeTitle=this.inbox.welcome_title,this.channelWelcomeTagline=this.inbox.welcome_tagline||"",this.selectedFeatureFlags=this.inbox.selected_feature_flags||[],this.replyTime=this.inbox.reply_time,this.locktoSingleConversation=this.inbox.lock_to_single_conversation,this.selectedPortalSlug=this.inbox.help_center?this.inbox.help_center.slug:"",this.setTabFromRouteParam()})},async updateInbox(){var e;try{const t={id:this.currentInboxId,name:(e=this.selectedInboxName)==null?void 0:e.trim(),enable_email_collect:this.emailCollectEnabled,allow_messages_after_resolved:this.allowMessagesAfterResolved,greeting_enabled:this.greetingEnabled,greeting_message:this.greetingMessage||"",portal_id:this.selectedPortalSlug?this.portals.find(n=>n.slug===this.selectedPortalSlug).id:null,lock_to_single_conversation:this.locktoSingleConversation,sender_name_type:this.senderNameType,business_name:this.businessName||null,channel:{widget_color:this.inbox.widget_color,website_url:this.channelWebsiteUrl,webhook_url:this.webhookUrl,welcome_title:this.channelWelcomeTitle||"",welcome_tagline:this.channelWelcomeTagline||"",selectedFeatureFlags:this.selectedFeatureFlags,reply_time:this.replyTime||"in_a_few_minutes",continuity_via_email:this.continuityViaEmail}};this.avatarFile&&(t.avatar=this.avatarFile),await this.$store.dispatch("inboxes/updateInbox",t),ne(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch(t){ne(t.message||this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}},handleImageUpload({file:e,url:t}){this.avatarFile=e,this.avatarUrl=t},async handleAvatarDelete(){try{await this.$store.dispatch("inboxes/deleteInboxAvatar",this.currentInboxId),this.avatarFile=null,this.avatarUrl="",ne(this.$t("INBOX_MGMT.DELETE.API.AVATAR_SUCCESS_MESSAGE"))}catch(e){ne(e.message?e.message:this.$t("INBOX_MGMT.DELETE.API.AVATAR_ERROR_MESSAGE"))}},toggleSenderNameType(e){this.senderNameType=e},onClickShowBusinessNameInput(){this.showBusinessNameInput=!this.showBusinessNameInput,this.showBusinessNameInput&&this.$nextTick(()=>{this.$refs.businessNameInput.focus()})}},validations:{webhookUrl:{shouldBeUrl:rO},selectedInboxName:{}}},_te={class:"overflow-auto flex-grow flex-shrink pr-0 pl-0 w-full min-w-0 settings"},vte={class:"mx-auto w-full max-w-6xl"},Ete={key:6,class:"mx-8"},bte={class:"flex flex-col gap-1 items-start mb-4"},Tte={class:"mb-0.5 text-sm font-medium text-n-slate-12"},Ste={key:4,class:"pb-4"},Ate={key:5,class:"pb-4"},yte={class:"pb-4"},Ite={value:!0},Cte={value:!1},Nte={class:"pb-1 text-sm not-italic text-n-slate-11"},Ote={key:6,class:"pb-4"},Rte={key:7,class:"pb-4"},xte={key:"in_a_few_minutes",value:"in_a_few_minutes"},wte={key:"in_a_few_hours",value:"in_a_few_hours"},$te={key:"in_a_day",value:"in_a_day"},Mte={class:"pb-1 text-sm not-italic text-n-slate-11"},Lte={key:8,class:"pb-4"},Dte={value:!0},Pte={value:!1},kte={class:"pb-1 text-sm not-italic text-n-slate-11"},Bte={key:9,class:"pb-4"},Ute={value:!0},Fte={value:!1},Gte={class:"pb-1 text-sm not-italic text-n-slate-11"},Vte={key:10,class:"pb-4"},Hte={value:!0},Wte={value:!1},zte={class:"pb-1 text-sm not-italic text-n-slate-11"},Yte={key:11,class:"pb-4"},jte={value:""},Kte=["value"],Xte={class:"pb-1 text-sm not-italic text-n-slate-11"},qte={key:12,class:"pb-4"},Zte={value:!0},Qte={value:!1},Jte={class:"pb-1 text-sm not-italic text-n-slate-11"},ene={key:13},tne={key:14,class:"flex gap-2 pt-2 pb-4"},nne={for:"attachments"},sne={key:15,class:"flex gap-2 pb-4"},ane={for:"emoji_picker"},one={key:16,class:"flex gap-2 pb-4"},ine={for:"end_conversation"},lne={key:17,class:"flex gap-2 pb-4"},rne={for:"use_inbox_avatar_for_bot"},cne={class:"pb-4"},une={class:"flex flex-col gap-2 items-start mt-2"},dne={key:0,class:"flex gap-2 w-[80%]"},pne=["placeholder"],mne={key:7,class:"mx-8"},hne={key:8},fne={key:9},gne={key:10},_ne={key:11},vne={key:12},Ene={key:13},bne={key:14};function Tne(e,t,n,s,a,o){const i=W("woot-tabs-item"),l=W("woot-tabs"),r=W("SettingIntroBanner"),c=W("MicrosoftReauthorize"),u=W("FacebookReauthorize"),d=W("GoogleReauthorize"),h=W("InstagramReauthorize"),g=W("WhatsappReauthorize"),f=W("DuplicateInboxBanner"),b=W("Avatar"),A=W("woot-input"),v=W("Editor"),T=W("woot-color-picker"),_=W("GreetingsEditor"),N=W("SettingsSection"),R=W("SenderNameExamplePreview"),O=W("NextButton"),x=W("CollaboratorsPage"),w=W("ConfigurationPage"),D=W("CustomerSatisfactionPage"),M=W("PreChatFormSettings"),P=W("WeeklyAvailability"),U=W("WidgetBuilder"),F=W("BotConfiguration"),k=W("AccountHealth");return p(),E("div",_te,[S(r,{"header-image":o.inbox.avatarUrl,"header-title":o.inboxName},{default:Y(()=>[S(l,{class:"[&_ul]:p-0",index:a.selectedTabIndex,border:!1,onChange:o.onTabChange},{default:Y(()=>[(p(!0),E(ue,null,Ae(o.tabs,(B,V)=>(p(),L(i,{key:B.key,index:V,name:B.name,"show-badge":!1,"is-compact":""},null,8,["index","name"]))),128))]),_:1},8,["index","onChange"])]),_:1},8,["header-image","header-title"]),m("section",vte,[o.microsoftUnauthorized?(p(),L(c,{key:0,inbox:o.inbox},null,8,["inbox"])):$("",!0),o.facebookUnauthorized?(p(),L(u,{key:1,inbox:o.inbox},null,8,["inbox"])):$("",!0),o.googleUnauthorized?(p(),L(d,{key:2,inbox:o.inbox},null,8,["inbox"])):$("",!0),o.instagramUnauthorized?(p(),L(h,{key:3,inbox:o.inbox},null,8,["inbox"])):$("",!0),o.whatsappUnauthorized?(p(),L(g,{key:4,"whatsapp-registration-incomplete":o.whatsappRegistrationIncomplete,inbox:o.inbox},null,8,["whatsapp-registration-incomplete","inbox"])):$("",!0),o.hasDuplicateInstagramInbox?(p(),L(f,{key:5,content:e.$t("INBOX_MGMT.ADD.INSTAGRAM.DUPLICATE_INBOX_BANNER"),class:"mx-8 mt-5"},null,8,["content"])):$("",!0),o.selectedTabKey==="inbox-settings"?(p(),E("div",Ete,[S(N,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_UPDATE_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_UPDATE_SUB_TEXT"),"show-border":!1},{default:Y(()=>[m("div",bte,[m("label",Tte,I(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_AVATAR.LABEL")),1),S(b,{src:a.avatarUrl,size:72,"icon-name":o.inboxIcon,name:"","allow-upload":"","rounded-full":"",onUpload:o.handleImageUpload,onDelete:o.handleAvatarDelete},null,8,["src","icon-name","onUpload","onDelete"])]),S(A,{modelValue:a.selectedInboxName,"onUpdate:modelValue":t[0]||(t[0]=B=>a.selectedInboxName=B),class:ae(["pb-4",{error:s.v$.selectedInboxName.$error}]),label:o.inboxNameLabel,placeholder:o.inboxNamePlaceHolder,error:s.v$.selectedInboxName.$error?e.$t("INBOX_MGMT.ADD.CHANNEL_NAME.ERROR"):"",onBlur:s.v$.selectedInboxName.$touch},null,8,["modelValue","class","label","placeholder","error","onBlur"]),e.isAPIInbox?(p(),L(A,{key:0,modelValue:a.webhookUrl,"onUpdate:modelValue":t[1]||(t[1]=B=>a.webhookUrl=B),class:ae(["pb-4",{error:s.v$.webhookUrl.$error}]),label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WEBHOOK_URL.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WEBHOOK_URL.PLACEHOLDER"),error:s.v$.webhookUrl.$error?e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WEBHOOK_URL.ERROR"):"",onBlur:s.v$.webhookUrl.$touch},null,8,["modelValue","class","label","placeholder","error","onBlur"])):$("",!0),e.isAWebWidgetInbox?(p(),L(A,{key:1,modelValue:a.channelWebsiteUrl,"onUpdate:modelValue":t[2]||(t[2]=B=>a.channelWebsiteUrl=B),class:"pb-4",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):$("",!0),e.isAWebWidgetInbox?(p(),L(A,{key:2,modelValue:a.channelWelcomeTitle,"onUpdate:modelValue":t[3]||(t[3]=B=>a.channelWelcomeTitle=B),class:"pb-4",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):$("",!0),e.isAWebWidgetInbox?(p(),L(v,{key:3,modelValue:a.channelWelcomeTagline,"onUpdate:modelValue":t[4]||(t[4]=B=>a.channelWelcomeTagline=B),class:"mb-4",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.PLACEHOLDER"),"max-length":255,"enabled-menu-options":a.welcomeTaglineEditorMenuOptions},null,8,["modelValue","label","placeholder","enabled-menu-options"])):$("",!0),e.isAWebWidgetInbox?(p(),E("label",Ste,[xe(I(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.WIDGET_COLOR.LABEL"))+" ",1),S(T,{modelValue:o.inbox.widget_color,"onUpdate:modelValue":t[5]||(t[5]=B=>o.inbox.widget_color=B)},null,8,["modelValue"])])):$("",!0),e.isAWhatsAppChannel?(p(),E("label",Ate,[xe(I(e.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[6]||(t[6]=B=>o.whatsAppAPIProviderName=B),type:"text",disabled:""},null,512),[[gt,o.whatsAppAPIProviderName]])])):$("",!0),m("label",yte,[xe(I(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.LABEL"))+" ",1),re(m("select",{"onUpdate:modelValue":t[7]||(t[7]=B=>a.greetingEnabled=B)},[m("option",Ite,I(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.ENABLED")),1),m("option",Cte,I(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.DISABLED")),1)],512),[[Nn,a.greetingEnabled]]),m("p",Nte,I(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.HELP_TEXT")),1)]),a.greetingEnabled?(p(),E("div",Ote,[S(_,{modelValue:a.greetingMessage,"onUpdate:modelValue":t[8]||(t[8]=B=>a.greetingMessage=B),label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.PLACEHOLDER"),richtext:!o.textAreaChannels},null,8,["modelValue","label","placeholder","richtext"])])):$("",!0),e.isAWebWidgetInbox?(p(),E("label",Rte,[xe(I(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.TITLE"))+" ",1),re(m("select",{"onUpdate:modelValue":t[9]||(t[9]=B=>a.replyTime=B)},[m("option",xte,I(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.IN_A_FEW_MINUTES")),1),m("option",wte,I(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.IN_A_FEW_HOURS")),1),m("option",$te,I(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.IN_A_DAY")),1)],512),[[Nn,a.replyTime]]),m("p",Mte,I(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.HELP_TEXT")),1)])):$("",!0),e.isAWebWidgetInbox?(p(),E("label",Lte,[xe(I(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_EMAIL_COLLECT_BOX"))+" ",1),re(m("select",{"onUpdate:modelValue":t[10]||(t[10]=B=>a.emailCollectEnabled=B)},[m("option",Dte,I(e.$t("INBOX_MGMT.EDIT.EMAIL_COLLECT_BOX.ENABLED")),1),m("option",Pte,I(e.$t("INBOX_MGMT.EDIT.EMAIL_COLLECT_BOX.DISABLED")),1)],512),[[Nn,a.emailCollectEnabled]]),m("p",kte,I(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_EMAIL_COLLECT_BOX_SUB_TEXT")),1)])):$("",!0),e.isAWebWidgetInbox?(p(),E("label",Bte,[xe(I(e.$t("INBOX_MGMT.SETTINGS_POPUP.ALLOW_MESSAGES_AFTER_RESOLVED"))+" ",1),re(m("select",{"onUpdate:modelValue":t[11]||(t[11]=B=>a.allowMessagesAfterResolved=B)},[m("option",Ute,I(e.$t("INBOX_MGMT.EDIT.ALLOW_MESSAGES_AFTER_RESOLVED.ENABLED")),1),m("option",Fte,I(e.$t("INBOX_MGMT.EDIT.ALLOW_MESSAGES_AFTER_RESOLVED.DISABLED")),1)],512),[[Nn,a.allowMessagesAfterResolved]]),m("p",Gte,I(e.$t("INBOX_MGMT.SETTINGS_POPUP.ALLOW_MESSAGES_AFTER_RESOLVED_SUB_TEXT")),1)])):$("",!0),e.isAWebWidgetInbox?(p(),E("label",Vte,[xe(I(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_CONTINUITY_VIA_EMAIL"))+" ",1),re(m("select",{"onUpdate:modelValue":t[12]||(t[12]=B=>a.continuityViaEmail=B)},[m("option",Hte,I(e.$t("INBOX_MGMT.EDIT.ENABLE_CONTINUITY_VIA_EMAIL.ENABLED")),1),m("option",Wte,I(e.$t("INBOX_MGMT.EDIT.ENABLE_CONTINUITY_VIA_EMAIL.DISABLED")),1)],512),[[Nn,a.continuityViaEmail]]),m("p",zte,I(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_CONTINUITY_VIA_EMAIL_SUB_TEXT")),1)])):$("",!0),e.isAVoiceChannel?$("",!0):(p(),E("div",Yte,[m("label",null,I(e.$t("INBOX_MGMT.HELP_CENTER.LABEL")),1),re(m("select",{"onUpdate:modelValue":t[13]||(t[13]=B=>a.selectedPortalSlug=B),class:"filter__question"},[m("option",jte,I(e.$t("INBOX_MGMT.HELP_CENTER.PLACEHOLDER")),1),(p(!0),E(ue,null,Ae(e.portals,B=>(p(),E("option",{key:B.slug,value:B.slug},I(B.name),9,Kte))),128))],512),[[Nn,a.selectedPortalSlug]]),m("p",Xte,I(e.$t("INBOX_MGMT.HELP_CENTER.SUB_TEXT")),1)])),o.canLocktoSingleConversation?(p(),E("label",qte,[xe(I(e.$t("INBOX_MGMT.SETTINGS_POPUP.LOCK_TO_SINGLE_CONVERSATION"))+" ",1),re(m("select",{"onUpdate:modelValue":t[14]||(t[14]=B=>a.locktoSingleConversation=B)},[m("option",Zte,I(e.$t("INBOX_MGMT.EDIT.LOCK_TO_SINGLE_CONVERSATION.ENABLED")),1),m("option",Qte,I(e.$t("INBOX_MGMT.EDIT.LOCK_TO_SINGLE_CONVERSATION.DISABLED")),1)],512),[[Nn,a.locktoSingleConversation]]),m("p",Jte,I(e.$t("INBOX_MGMT.SETTINGS_POPUP.LOCK_TO_SINGLE_CONVERSATION_SUB_TEXT")),1)])):$("",!0),e.isAWebWidgetInbox?(p(),E("label",ene,I(e.$t("INBOX_MGMT.FEATURES.LABEL")),1)):$("",!0),e.isAWebWidgetInbox?(p(),E("div",tne,[re(m("input",{"onUpdate:modelValue":t[15]||(t[15]=B=>a.selectedFeatureFlags=B),type:"checkbox",value:"attachments",onInput:t[16]||(t[16]=(...B)=>o.handleFeatureFlag&&o.handleFeatureFlag(...B))},null,544),[[dn,a.selectedFeatureFlags]]),m("label",nne,I(e.$t("INBOX_MGMT.FEATURES.DISPLAY_FILE_PICKER")),1)])):$("",!0),e.isAWebWidgetInbox?(p(),E("div",sne,[re(m("input",{"onUpdate:modelValue":t[17]||(t[17]=B=>a.selectedFeatureFlags=B),type:"checkbox",value:"emoji_picker",onInput:t[18]||(t[18]=(...B)=>o.handleFeatureFlag&&o.handleFeatureFlag(...B))},null,544),[[dn,a.selectedFeatureFlags]]),m("label",ane,I(e.$t("INBOX_MGMT.FEATURES.DISPLAY_EMOJI_PICKER")),1)])):$("",!0),e.isAWebWidgetInbox?(p(),E("div",one,[re(m("input",{"onUpdate:modelValue":t[19]||(t[19]=B=>a.selectedFeatureFlags=B),type:"checkbox",value:"end_conversation",onInput:t[20]||(t[20]=(...B)=>o.handleFeatureFlag&&o.handleFeatureFlag(...B))},null,544),[[dn,a.selectedFeatureFlags]]),m("label",ine,I(e.$t("INBOX_MGMT.FEATURES.ALLOW_END_CONVERSATION")),1)])):$("",!0),e.isAWebWidgetInbox?(p(),E("div",lne,[re(m("input",{"onUpdate:modelValue":t[21]||(t[21]=B=>a.selectedFeatureFlags=B),type:"checkbox",value:"use_inbox_avatar_for_bot",onInput:t[22]||(t[22]=(...B)=>o.handleFeatureFlag&&o.handleFeatureFlag(...B))},null,544),[[dn,a.selectedFeatureFlags]]),m("label",rne,I(e.$t("INBOX_MGMT.FEATURES.USE_INBOX_AVATAR_FOR_BOT")),1)])):$("",!0)]),_:1},8,["title","sub-title"]),e.isAWebWidgetInbox||e.isAnEmailChannel?(p(),L(N,{key:0,title:e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.TITLE"),"sub-title":e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.SUB_TEXT"),"show-border":!1},{default:Y(()=>[m("div",cne,[S(R,{"sender-name-type":a.senderNameType,"business-name":a.businessName,onUpdate:o.toggleSenderNameType},null,8,["sender-name-type","business-name","onUpdate"]),m("div",une,[S(O,{ghost:"",blue:"",label:e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.BUSINESS_NAME.BUTTON_TEXT"),onClick:o.onClickShowBusinessNameInput},null,8,["label","onClick"]),a.showBusinessNameInput?(p(),E("div",dne,[re(m("input",{ref:"businessNameInput","onUpdate:modelValue":t[23]||(t[23]=B=>a.businessName=B),placeholder:e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.BUSINESS_NAME.PLACEHOLDER"),class:"mb-0",type:"text"},null,8,pne),[[gt,a.businessName]]),S(O,{label:e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.BUSINESS_NAME.SAVE_BUTTON_TEXT"),class:"flex-shrink-0",onClick:o.updateInbox},null,8,["label","onClick"])])):$("",!0)])])]),_:1},8,["title","sub-title"])):$("",!0),S(N,{"show-border":!1},{default:Y(()=>[e.isAPIInbox?(p(),L(O,{key:0,type:"submit",disabled:s.v$.webhookUrl.$invalid,label:e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),"is-loading":e.uiFlags.isUpdating,onClick:o.updateInbox},null,8,["disabled","label","is-loading","onClick"])):(p(),L(O,{key:1,type:"submit",disabled:s.v$.$invalid,label:e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),"is-loading":e.uiFlags.isUpdating,onClick:o.updateInbox},null,8,["disabled","label","is-loading","onClick"]))]),_:1})])):$("",!0),o.selectedTabKey==="collaborators"?(p(),E("div",mne,[S(x,{inbox:o.inbox},null,8,["inbox"])])):$("",!0),o.selectedTabKey==="configuration"?(p(),E("div",hne,[S(w,{inbox:o.inbox},null,8,["inbox"])])):$("",!0),o.selectedTabKey==="csat"?(p(),E("div",fne,[S(D,{inbox:o.inbox},null,8,["inbox"])])):$("",!0),o.selectedTabKey==="pre-chat-form"?(p(),E("div",gne,[S(M,{inbox:o.inbox},null,8,["inbox"])])):$("",!0),o.selectedTabKey==="business-hours"?(p(),E("div",_ne,[S(P,{inbox:o.inbox},null,8,["inbox"])])):$("",!0),o.selectedTabKey==="widget-builder"?(p(),E("div",vne,[S(U,{inbox:o.inbox},null,8,["inbox"])])):$("",!0),o.selectedTabKey==="bot-configuration"?(p(),E("div",Ene,[S(F,{inbox:o.inbox},null,8,["inbox"])])):$("",!0),o.selectedTabKey==="whatsapp-health"?(p(),E("div",bne,[S(k,{"health-data":a.healthData},null,8,["health-data"])])):$("",!0)])])}const Sne=De(gte,[["render",Tne]]),Ane={class:"mx-2 flex flex-col gap-6 mb-8"},yne={class:"grid grid-cols-1 lg:grid-cols-8 lg:divide-x lg:divide-n-weak rounded-xl border border-n-weak min-h-[52rem]"},Ine={class:"col-span-6 overflow-hidden"},Cne={__name:"InboxChannels",setup(e){const{t}=be(),n=wt(),{replaceInstallationName:s}=Wa(),a=_e("globalConfig/get"),o=y(()=>{const u=["CHANNEL","INBOX","AGENT","FINISH"],d={CHANNEL:"settings_inbox_new",INBOX:"settings_inboxes_page_channel",AGENT:"settings_inboxes_add_agents",FINISH:"settings_inbox_finish"};return u.map(h=>({title:t(`INBOX_MGMT.CREATE_FLOW.${h}.TITLE`),body:t(`INBOX_MGMT.CREATE_FLOW.${h}.BODY`),route:d[h]}))}),i=y(()=>n.name==="settings_inbox_new"),l=y(()=>n.name==="settings_inbox_finish"),r=y(()=>i.value?t("INBOX_MGMT.ADD.AUTH.TITLE"):l.value?t("INBOX_MGMT.ADD.AUTH.TITLE_FINISH"):t("INBOX_MGMT.ADD.AUTH.TITLE_NEXT")),c=y(()=>o.value.map(u=>({...u,body:s(u.body)})));return(u,d)=>{const h=W("woot-wizard"),g=W("router-view");return p(),E("div",Ane,[S(Xs,{class:"block lg:hidden !mb-0","header-title":r.value},null,8,["header-title"]),m("div",yne,[S(h,{class:"hidden lg:block col-span-2 h-fit py-8 px-6","global-config":C(a),items:c.value},null,8,["global-config","items"]),m("div",Ine,[S(g)])])])}}},Nne={__name:"ChannelItem",props:{channel:{type:Object,required:!0},enabledFeatures:{type:Object,required:!0}},emits:["channelItemClick"],setup(e,{emit:t}){const n=e,s=t,a=y(()=>{var c;return(c=window.chatwootConfig)==null?void 0:c.fbAppId}),o=y(()=>{var c;return(c=window.chatwootConfig)==null?void 0:c.instagramAppId}),i=y(()=>{const{key:c}=n.channel;return Object.keys(n.enabledFeatures).length===0?!1:c==="website"?n.enabledFeatures.channel_website:c==="facebook"?n.enabledFeatures.channel_facebook&&a.value:c==="email"?n.enabledFeatures.channel_email:c==="instagram"?n.enabledFeatures.channel_instagram&&o.value:c==="voice"?n.enabledFeatures.channel_voice:["website","twilio","api","whatsapp","sms","telegram","line","instagram","voice"].includes(c)}),l=y(()=>{const{key:c}=n.channel;return["voice"].includes(c)&&!i.value}),r=()=>{i.value&&s("channelItemClick",n.channel.key)};return(c,u)=>(p(),L(p_,{title:e.channel.title,description:e.channel.description,icon:e.channel.icon,"is-coming-soon":l.value,disabled:!i.value,onClick:r},null,8,["title","description","icon","is-coming-soon","disabled"]))}},One={class:"w-full p-8 overflow-auto"},Rne={class:"grid max-w-3xl grid-cols-1 xs:grid-cols-2 mx-0 gap-6 sm:grid-cols-3"},xne={__name:"ChannelList",setup(e){const{t}=be(),n=Ft(),{accountId:s,currentAccount:a}=ln(),o=_e("globalConfig/get"),i=j({}),l=y(()=>{const{apiChannelName:u}=o.value;return[{key:"website",title:t("INBOX_MGMT.ADD.AUTH.CHANNEL.WEBSITE.TITLE"),description:t("INBOX_MGMT.ADD.AUTH.CHANNEL.WEBSITE.DESCRIPTION"),icon:"i-woot-website"},{key:"facebook",title:t("INBOX_MGMT.ADD.AUTH.CHANNEL.FACEBOOK.TITLE"),description:t("INBOX_MGMT.ADD.AUTH.CHANNEL.FACEBOOK.DESCRIPTION"),icon:"i-woot-messenger"},{key:"whatsapp",title:t("INBOX_MGMT.ADD.AUTH.CHANNEL.WHATSAPP.TITLE"),description:t("INBOX_MGMT.ADD.AUTH.CHANNEL.WHATSAPP.DESCRIPTION"),icon:"i-woot-whatsapp"},{key:"sms",title:t("INBOX_MGMT.ADD.AUTH.CHANNEL.SMS.TITLE"),description:t("INBOX_MGMT.ADD.AUTH.CHANNEL.SMS.DESCRIPTION"),icon:"i-woot-sms"},{key:"email",title:t("INBOX_MGMT.ADD.AUTH.CHANNEL.EMAIL.TITLE"),description:t("INBOX_MGMT.ADD.AUTH.CHANNEL.EMAIL.DESCRIPTION"),icon:"i-woot-mail"},{key:"api",title:u||t("INBOX_MGMT.ADD.AUTH.CHANNEL.API.TITLE"),description:t("INBOX_MGMT.ADD.AUTH.CHANNEL.API.DESCRIPTION"),icon:"i-woot-api"},{key:"telegram",title:t("INBOX_MGMT.ADD.AUTH.CHANNEL.TELEGRAM.TITLE"),description:t("INBOX_MGMT.ADD.AUTH.CHANNEL.TELEGRAM.DESCRIPTION"),icon:"i-woot-telegram"},{key:"line",title:t("INBOX_MGMT.ADD.AUTH.CHANNEL.LINE.TITLE"),description:t("INBOX_MGMT.ADD.AUTH.CHANNEL.LINE.DESCRIPTION"),icon:"i-woot-line"},{key:"instagram",title:t("INBOX_MGMT.ADD.AUTH.CHANNEL.INSTAGRAM.TITLE"),description:t("INBOX_MGMT.ADD.AUTH.CHANNEL.INSTAGRAM.DESCRIPTION"),icon:"i-woot-instagram"},{key:"voice",title:t("INBOX_MGMT.ADD.AUTH.CHANNEL.VOICE.TITLE"),description:t("INBOX_MGMT.ADD.AUTH.CHANNEL.VOICE.DESCRIPTION"),icon:"i-ri-phone-fill"}]}),r=async()=>{i.value=a.value.features},c=u=>{const d={sub_page:u,accountId:s.value};n.push({name:"settings_inboxes_page_channel",params:d})};return lt(()=>{r()}),(u,d)=>(p(),E("div",One,[m("div",Rne,[(p(!0),E(ue,null,Ae(l.value,h=>(p(),L(Nne,{key:h.key,channel:h,"enabled-features":i.value,onChannelItemClick:c},null,8,["channel","enabled-features"]))),128))])]))}},wne={components:{PageHeader:Xs,NextButton:te},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}}},setup(){return{v$:bt()}},data(){return{selectedAgents:[],isCreating:!1}},computed:{...mt({agentList:"agents/getAgents"})},mounted(){this.$store.dispatch("agents/get")},methods:{async addAgents(){this.isCreating=!0;const e=this.$route.params.inbox_id,t=this.selectedAgents.map(n=>n.id);try{await CO.update({inboxId:e,agentList:t}),ps.replace({name:"settings_inbox_finish",params:{page:"new",inbox_id:this.$route.params.inbox_id}})}catch(n){ne(n.message)}this.isCreating=!1}}},$ne={class:"h-full w-full p-6 col-span-6"},Mne={class:"w-full"},Lne={class:"w-full"},Dne={key:0,class:"message"},Pne={class:"w-full"};function kne(e,t,n,s,a,o){const i=W("PageHeader"),l=W("multiselect"),r=W("NextButton");return p(),E("div",$ne,[m("form",{class:"flex flex-wrap flex-col mx-0",onSubmit:t[1]||(t[1]=Ve(c=>o.addAgents(),["prevent"]))},[m("div",Mne,[S(i,{"header-title":e.$t("INBOX_MGMT.ADD.AGENTS.TITLE"),"header-content":e.$t("INBOX_MGMT.ADD.AGENTS.DESC")},null,8,["header-title","header-content"])]),m("div",null,[m("div",Lne,[m("label",{class:ae({error:s.v$.selectedAgents.$error})},[xe(I(e.$t("INBOX_MGMT.ADD.AGENTS.TITLE"))+" ",1),S(l,{modelValue:a.selectedAgents,"onUpdate:modelValue":t[0]||(t[0]=c=>a.selectedAgents=c),options:e.agentList,"track-by":"id",label:"name",multiple:"","close-on-select":!1,"clear-on-select":!1,"hide-selected":"","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":e.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE"),placeholder:e.$t("INBOX_MGMT.ADD.AGENTS.PICK_AGENTS"),onSelect:s.v$.selectedAgents.$touch},null,8,["modelValue","options","select-label","deselect-label","placeholder","onSelect"]),s.v$.selectedAgents.$error?(p(),E("span",Dne,I(e.$t("INBOX_MGMT.ADD.AGENTS.VALIDATION_ERROR")),1)):$("",!0)],2)]),m("div",Pne,[S(r,{type:"submit","is-loading":a.isCreating,solid:"",blue:"",label:e.$t("INBOX_MGMT.AGENTS.BUTTON_TEXT")},null,8,["is-loading","label"])])])],32)])}const Bne=De(wne,[["render",kne]]);var $r={},Une=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},ZA={},wa={};let v_;const Fne=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];wa.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};wa.getSymbolTotalCodewords=function(t){return Fne[t]};wa.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};wa.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');v_=t};wa.isKanjiModeEnabled=function(){return typeof v_<"u"};wa.toSJIS=function(t){return v_(t)};var Ap={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(s){return s&&typeof s.bit<"u"&&s.bit>=0&&s.bit<4},e.from=function(s,a){if(e.isValid(s))return s;try{return t(s)}catch{return a}}})(Ap);function QA(){this.buffer=[],this.length=0}QA.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var Gne=QA;function uu(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}uu.prototype.set=function(e,t,n,s){const a=e*this.size+t;this.data[a]=n,s&&(this.reservedBit[a]=!0)};uu.prototype.get=function(e,t){return this.data[e*this.size+t]};uu.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};uu.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var Vne=uu,JA={};(function(e){const t=wa.getSymbolSize;e.getRowColCoords=function(s){if(s===1)return[];const a=Math.floor(s/7)+2,o=t(s),i=o===145?26:Math.ceil((o-13)/(2*a-2))*2,l=[o-7];for(let r=1;r<a-1;r++)l[r]=l[r-1]-i;return l.push(6),l.reverse()},e.getPositions=function(s){const a=[],o=e.getRowColCoords(s),i=o.length;for(let l=0;l<i;l++)for(let r=0;r<i;r++)l===0&&r===0||l===0&&r===i-1||l===i-1&&r===0||a.push([o[l],o[r]]);return a}})(JA);var ey={};const Hne=wa.getSymbolSize,fb=7;ey.getPositions=function(t){const n=Hne(t);return[[0,0],[n-fb,0],[0,n-fb]]};var ty={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(a){return a!=null&&a!==""&&!isNaN(a)&&a>=0&&a<=7},e.from=function(a){return e.isValid(a)?parseInt(a,10):void 0},e.getPenaltyN1=function(a){const o=a.size;let i=0,l=0,r=0,c=null,u=null;for(let d=0;d<o;d++){l=r=0,c=u=null;for(let h=0;h<o;h++){let g=a.get(d,h);g===c?l++:(l>=5&&(i+=t.N1+(l-5)),c=g,l=1),g=a.get(h,d),g===u?r++:(r>=5&&(i+=t.N1+(r-5)),u=g,r=1)}l>=5&&(i+=t.N1+(l-5)),r>=5&&(i+=t.N1+(r-5))}return i},e.getPenaltyN2=function(a){const o=a.size;let i=0;for(let l=0;l<o-1;l++)for(let r=0;r<o-1;r++){const c=a.get(l,r)+a.get(l,r+1)+a.get(l+1,r)+a.get(l+1,r+1);(c===4||c===0)&&i++}return i*t.N2},e.getPenaltyN3=function(a){const o=a.size;let i=0,l=0,r=0;for(let c=0;c<o;c++){l=r=0;for(let u=0;u<o;u++)l=l<<1&2047|a.get(c,u),u>=10&&(l===1488||l===93)&&i++,r=r<<1&2047|a.get(u,c),u>=10&&(r===1488||r===93)&&i++}return i*t.N3},e.getPenaltyN4=function(a){let o=0;const i=a.data.length;for(let r=0;r<i;r++)o+=a.data[r];return Math.abs(Math.ceil(o*100/i/5)-10)*t.N4};function n(s,a,o){switch(s){case e.Patterns.PATTERN000:return(a+o)%2===0;case e.Patterns.PATTERN001:return a%2===0;case e.Patterns.PATTERN010:return o%3===0;case e.Patterns.PATTERN011:return(a+o)%3===0;case e.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(o/3))%2===0;case e.Patterns.PATTERN101:return a*o%2+a*o%3===0;case e.Patterns.PATTERN110:return(a*o%2+a*o%3)%2===0;case e.Patterns.PATTERN111:return(a*o%3+(a+o)%2)%2===0;default:throw new Error("bad maskPattern:"+s)}}e.applyMask=function(a,o){const i=o.size;for(let l=0;l<i;l++)for(let r=0;r<i;r++)o.isReserved(r,l)||o.xor(r,l,n(a,r,l))},e.getBestMask=function(a,o){const i=Object.keys(e.Patterns).length;let l=0,r=1/0;for(let c=0;c<i;c++){o(c),e.applyMask(c,a);const u=e.getPenaltyN1(a)+e.getPenaltyN2(a)+e.getPenaltyN3(a)+e.getPenaltyN4(a);e.applyMask(c,a),u<r&&(r=u,l=c)}return l}})(ty);var yp={};const Ai=Ap,Uu=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Fu=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];yp.getBlocksCount=function(t,n){switch(n){case Ai.L:return Uu[(t-1)*4+0];case Ai.M:return Uu[(t-1)*4+1];case Ai.Q:return Uu[(t-1)*4+2];case Ai.H:return Uu[(t-1)*4+3];default:return}};yp.getTotalCodewordsCount=function(t,n){switch(n){case Ai.L:return Fu[(t-1)*4+0];case Ai.M:return Fu[(t-1)*4+1];case Ai.Q:return Fu[(t-1)*4+2];case Ai.H:return Fu[(t-1)*4+3];default:return}};var ny={},Ip={};const Rc=new Uint8Array(512),Yd=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)Rc[n]=t,Yd[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)Rc[n]=Rc[n-255]})();Ip.log=function(t){if(t<1)throw new Error("log("+t+")");return Yd[t]};Ip.exp=function(t){return Rc[t]};Ip.mul=function(t,n){return t===0||n===0?0:Rc[Yd[t]+Yd[n]]};(function(e){const t=Ip;e.mul=function(s,a){const o=new Uint8Array(s.length+a.length-1);for(let i=0;i<s.length;i++)for(let l=0;l<a.length;l++)o[i+l]^=t.mul(s[i],a[l]);return o},e.mod=function(s,a){let o=new Uint8Array(s);for(;o.length-a.length>=0;){const i=o[0];for(let r=0;r<a.length;r++)o[r]^=t.mul(a[r],i);let l=0;for(;l<o.length&&o[l]===0;)l++;o=o.slice(l)}return o},e.generateECPolynomial=function(s){let a=new Uint8Array([1]);for(let o=0;o<s;o++)a=e.mul(a,new Uint8Array([1,t.exp(o)]));return a}})(ny);const sy=ny;function E_(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}E_.prototype.initialize=function(t){this.degree=t,this.genPoly=sy.generateECPolynomial(this.degree)};E_.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(t.length+this.degree);n.set(t);const s=sy.mod(n,this.genPoly),a=this.degree-s.length;if(a>0){const o=new Uint8Array(this.degree);return o.set(s,a),o}return s};var Wne=E_,ay={},ki={},b_={};b_.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var Mo={};const oy="[0-9]+",zne="[A-Z $%*+\\-./:]+";let Yc="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Yc=Yc.replace(/u/g,"\\u");const Yne="(?:(?![A-Z0-9 $%*+\\-./:]|"+Yc+`)(?:.|[\r
]))+`;Mo.KANJI=new RegExp(Yc,"g");Mo.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Mo.BYTE=new RegExp(Yne,"g");Mo.NUMERIC=new RegExp(oy,"g");Mo.ALPHANUMERIC=new RegExp(zne,"g");const jne=new RegExp("^"+Yc+"$"),Kne=new RegExp("^"+oy+"$"),Xne=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Mo.testKanji=function(t){return jne.test(t)};Mo.testNumeric=function(t){return Kne.test(t)};Mo.testAlphanumeric=function(t){return Xne.test(t)};(function(e){const t=b_,n=Mo;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(o,i){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!t.isValid(i))throw new Error("Invalid version: "+i);return i>=1&&i<10?o.ccBits[0]:i<27?o.ccBits[1]:o.ccBits[2]},e.getBestModeForData=function(o){return n.testNumeric(o)?e.NUMERIC:n.testAlphanumeric(o)?e.ALPHANUMERIC:n.testKanji(o)?e.KANJI:e.BYTE},e.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},e.isValid=function(o){return o&&o.bit&&o.ccBits};function s(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+a)}}e.from=function(o,i){if(e.isValid(o))return o;try{return s(o)}catch{return i}}})(ki);(function(e){const t=wa,n=yp,s=Ap,a=ki,o=b_,i=7973,l=t.getBCHDigit(i);function r(h,g,f){for(let b=1;b<=40;b++)if(g<=e.getCapacity(b,f,h))return b}function c(h,g){return a.getCharCountIndicator(h,g)+4}function u(h,g){let f=0;return h.forEach(function(b){const A=c(b.mode,g);f+=A+b.getBitsLength()}),f}function d(h,g){for(let f=1;f<=40;f++)if(u(h,f)<=e.getCapacity(f,g,a.MIXED))return f}e.from=function(g,f){return o.isValid(g)?parseInt(g,10):f},e.getCapacity=function(g,f,b){if(!o.isValid(g))throw new Error("Invalid QR Code version");typeof b>"u"&&(b=a.BYTE);const A=t.getSymbolTotalCodewords(g),v=n.getTotalCodewordsCount(g,f),T=(A-v)*8;if(b===a.MIXED)return T;const _=T-c(b,g);switch(b){case a.NUMERIC:return Math.floor(_/10*3);case a.ALPHANUMERIC:return Math.floor(_/11*2);case a.KANJI:return Math.floor(_/13);case a.BYTE:default:return Math.floor(_/8)}},e.getBestVersionForData=function(g,f){let b;const A=s.from(f,s.M);if(Array.isArray(g)){if(g.length>1)return d(g,A);if(g.length===0)return 1;b=g[0]}else b=g;return r(b.mode,b.getLength(),A)},e.getEncodedBits=function(g){if(!o.isValid(g)||g<7)throw new Error("Invalid QR Code version");let f=g<<12;for(;t.getBCHDigit(f)-l>=0;)f^=i<<t.getBCHDigit(f)-l;return g<<12|f}})(ay);var iy={};const Ff=wa,ly=1335,qne=21522,gb=Ff.getBCHDigit(ly);iy.getEncodedBits=function(t,n){const s=t.bit<<3|n;let a=s<<10;for(;Ff.getBCHDigit(a)-gb>=0;)a^=ly<<Ff.getBCHDigit(a)-gb;return(s<<10|a)^qne};var ry={};const Zne=ki;function _r(e){this.mode=Zne.NUMERIC,this.data=e.toString()}_r.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};_r.prototype.getLength=function(){return this.data.length};_r.prototype.getBitsLength=function(){return _r.getBitsLength(this.data.length)};_r.prototype.write=function(t){let n,s,a;for(n=0;n+3<=this.data.length;n+=3)s=this.data.substr(n,3),a=parseInt(s,10),t.put(a,10);const o=this.data.length-n;o>0&&(s=this.data.substr(n),a=parseInt(s,10),t.put(a,o*3+1))};var Qne=_r;const Jne=ki,Ah=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function vr(e){this.mode=Jne.ALPHANUMERIC,this.data=e}vr.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};vr.prototype.getLength=function(){return this.data.length};vr.prototype.getBitsLength=function(){return vr.getBitsLength(this.data.length)};vr.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let s=Ah.indexOf(this.data[n])*45;s+=Ah.indexOf(this.data[n+1]),t.put(s,11)}this.data.length%2&&t.put(Ah.indexOf(this.data[n]),6)};var ese=vr;const tse=ki;function Er(e){this.mode=tse.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}Er.getBitsLength=function(t){return t*8};Er.prototype.getLength=function(){return this.data.length};Er.prototype.getBitsLength=function(){return Er.getBitsLength(this.data.length)};Er.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var nse=Er;const sse=ki,ase=wa;function br(e){this.mode=sse.KANJI,this.data=e}br.getBitsLength=function(t){return t*13};br.prototype.getLength=function(){return this.data.length};br.prototype.getBitsLength=function(){return br.getBitsLength(this.data.length)};br.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=ase.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};var ose=br,cy={exports:{}};(function(e){var t={single_source_shortest_paths:function(n,s,a){var o={},i={};i[s]=0;var l=t.PriorityQueue.make();l.push(s,0);for(var r,c,u,d,h,g,f,b,A;!l.empty();){r=l.pop(),c=r.value,d=r.cost,h=n[c]||{};for(u in h)h.hasOwnProperty(u)&&(g=h[u],f=d+g,b=i[u],A=typeof i[u]>"u",(A||b>f)&&(i[u]=f,l.push(u,f),o[u]=c))}if(typeof a<"u"&&typeof i[a]>"u"){var v=["Could not find a path from ",s," to ",a,"."].join("");throw new Error(v)}return o},extract_shortest_path_from_predecessor_list:function(n,s){for(var a=[],o=s;o;)a.push(o),n[o],o=n[o];return a.reverse(),a},find_path:function(n,s,a){var o=t.single_source_shortest_paths(n,s,a);return t.extract_shortest_path_from_predecessor_list(o,a)},PriorityQueue:{make:function(n){var s=t.PriorityQueue,a={},o;n=n||{};for(o in s)s.hasOwnProperty(o)&&(a[o]=s[o]);return a.queue=[],a.sorter=n.sorter||s.default_sorter,a},default_sorter:function(n,s){return n.cost-s.cost},push:function(n,s){var a={value:n,cost:s};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(cy);var ise=cy.exports;(function(e){const t=ki,n=Qne,s=ese,a=nse,o=ose,i=Mo,l=wa,r=ise;function c(v){return unescape(encodeURIComponent(v)).length}function u(v,T,_){const N=[];let R;for(;(R=v.exec(_))!==null;)N.push({data:R[0],index:R.index,mode:T,length:R[0].length});return N}function d(v){const T=u(i.NUMERIC,t.NUMERIC,v),_=u(i.ALPHANUMERIC,t.ALPHANUMERIC,v);let N,R;return l.isKanjiModeEnabled()?(N=u(i.BYTE,t.BYTE,v),R=u(i.KANJI,t.KANJI,v)):(N=u(i.BYTE_KANJI,t.BYTE,v),R=[]),T.concat(_,N,R).sort(function(x,w){return x.index-w.index}).map(function(x){return{data:x.data,mode:x.mode,length:x.length}})}function h(v,T){switch(T){case t.NUMERIC:return n.getBitsLength(v);case t.ALPHANUMERIC:return s.getBitsLength(v);case t.KANJI:return o.getBitsLength(v);case t.BYTE:return a.getBitsLength(v)}}function g(v){return v.reduce(function(T,_){const N=T.length-1>=0?T[T.length-1]:null;return N&&N.mode===_.mode?(T[T.length-1].data+=_.data,T):(T.push(_),T)},[])}function f(v){const T=[];for(let _=0;_<v.length;_++){const N=v[_];switch(N.mode){case t.NUMERIC:T.push([N,{data:N.data,mode:t.ALPHANUMERIC,length:N.length},{data:N.data,mode:t.BYTE,length:N.length}]);break;case t.ALPHANUMERIC:T.push([N,{data:N.data,mode:t.BYTE,length:N.length}]);break;case t.KANJI:T.push([N,{data:N.data,mode:t.BYTE,length:c(N.data)}]);break;case t.BYTE:T.push([{data:N.data,mode:t.BYTE,length:c(N.data)}])}}return T}function b(v,T){const _={},N={start:{}};let R=["start"];for(let O=0;O<v.length;O++){const x=v[O],w=[];for(let D=0;D<x.length;D++){const M=x[D],P=""+O+D;w.push(P),_[P]={node:M,lastCount:0},N[P]={};for(let U=0;U<R.length;U++){const F=R[U];_[F]&&_[F].node.mode===M.mode?(N[F][P]=h(_[F].lastCount+M.length,M.mode)-h(_[F].lastCount,M.mode),_[F].lastCount+=M.length):(_[F]&&(_[F].lastCount=M.length),N[F][P]=h(M.length,M.mode)+4+t.getCharCountIndicator(M.mode,T))}}R=w}for(let O=0;O<R.length;O++)N[R[O]].end=0;return{map:N,table:_}}function A(v,T){let _;const N=t.getBestModeForData(v);if(_=t.from(T,N),_!==t.BYTE&&_.bit<N.bit)throw new Error('"'+v+'" cannot be encoded with mode '+t.toString(_)+`.
 Suggested mode is: `+t.toString(N));switch(_===t.KANJI&&!l.isKanjiModeEnabled()&&(_=t.BYTE),_){case t.NUMERIC:return new n(v);case t.ALPHANUMERIC:return new s(v);case t.KANJI:return new o(v);case t.BYTE:return new a(v)}}e.fromArray=function(T){return T.reduce(function(_,N){return typeof N=="string"?_.push(A(N,null)):N.data&&_.push(A(N.data,N.mode)),_},[])},e.fromString=function(T,_){const N=d(T,l.isKanjiModeEnabled()),R=f(N),O=b(R,_),x=r.find_path(O.map,"start","end"),w=[];for(let D=1;D<x.length-1;D++)w.push(O.table[x[D]].node);return e.fromArray(g(w))},e.rawSplit=function(T){return e.fromArray(d(T,l.isKanjiModeEnabled()))}})(ry);const Cp=wa,yh=Ap,lse=Gne,rse=Vne,cse=JA,use=ey,Gf=ty,Vf=yp,dse=Wne,jd=ay,pse=iy,mse=ki,Ih=ry;function hse(e,t){const n=e.size,s=use.getPositions(t);for(let a=0;a<s.length;a++){const o=s[a][0],i=s[a][1];for(let l=-1;l<=7;l++)if(!(o+l<=-1||n<=o+l))for(let r=-1;r<=7;r++)i+r<=-1||n<=i+r||(l>=0&&l<=6&&(r===0||r===6)||r>=0&&r<=6&&(l===0||l===6)||l>=2&&l<=4&&r>=2&&r<=4?e.set(o+l,i+r,!0,!0):e.set(o+l,i+r,!1,!0))}}function fse(e){const t=e.size;for(let n=8;n<t-8;n++){const s=n%2===0;e.set(n,6,s,!0),e.set(6,n,s,!0)}}function gse(e,t){const n=cse.getPositions(t);for(let s=0;s<n.length;s++){const a=n[s][0],o=n[s][1];for(let i=-2;i<=2;i++)for(let l=-2;l<=2;l++)i===-2||i===2||l===-2||l===2||i===0&&l===0?e.set(a+i,o+l,!0,!0):e.set(a+i,o+l,!1,!0)}}function _se(e,t){const n=e.size,s=jd.getEncodedBits(t);let a,o,i;for(let l=0;l<18;l++)a=Math.floor(l/3),o=l%3+n-8-3,i=(s>>l&1)===1,e.set(a,o,i,!0),e.set(o,a,i,!0)}function Ch(e,t,n){const s=e.size,a=pse.getEncodedBits(t,n);let o,i;for(o=0;o<15;o++)i=(a>>o&1)===1,o<6?e.set(o,8,i,!0):o<8?e.set(o+1,8,i,!0):e.set(s-15+o,8,i,!0),o<8?e.set(8,s-o-1,i,!0):o<9?e.set(8,15-o-1+1,i,!0):e.set(8,15-o-1,i,!0);e.set(s-8,8,1,!0)}function vse(e,t){const n=e.size;let s=-1,a=n-1,o=7,i=0;for(let l=n-1;l>0;l-=2)for(l===6&&l--;;){for(let r=0;r<2;r++)if(!e.isReserved(a,l-r)){let c=!1;i<t.length&&(c=(t[i]>>>o&1)===1),e.set(a,l-r,c),o--,o===-1&&(i++,o=7)}if(a+=s,a<0||n<=a){a-=s,s=-s;break}}}function Ese(e,t,n){const s=new lse;n.forEach(function(r){s.put(r.mode.bit,4),s.put(r.getLength(),mse.getCharCountIndicator(r.mode,e)),r.write(s)});const a=Cp.getSymbolTotalCodewords(e),o=Vf.getTotalCodewordsCount(e,t),i=(a-o)*8;for(s.getLengthInBits()+4<=i&&s.put(0,4);s.getLengthInBits()%8!==0;)s.putBit(0);const l=(i-s.getLengthInBits())/8;for(let r=0;r<l;r++)s.put(r%2?17:236,8);return bse(s,e,t)}function bse(e,t,n){const s=Cp.getSymbolTotalCodewords(t),a=Vf.getTotalCodewordsCount(t,n),o=s-a,i=Vf.getBlocksCount(t,n),l=s%i,r=i-l,c=Math.floor(s/i),u=Math.floor(o/i),d=u+1,h=c-u,g=new dse(h);let f=0;const b=new Array(i),A=new Array(i);let v=0;const T=new Uint8Array(e.buffer);for(let x=0;x<i;x++){const w=x<r?u:d;b[x]=T.slice(f,f+w),A[x]=g.encode(b[x]),f+=w,v=Math.max(v,w)}const _=new Uint8Array(s);let N=0,R,O;for(R=0;R<v;R++)for(O=0;O<i;O++)R<b[O].length&&(_[N++]=b[O][R]);for(R=0;R<h;R++)for(O=0;O<i;O++)_[N++]=A[O][R];return _}function Tse(e,t,n,s){let a;if(Array.isArray(e))a=Ih.fromArray(e);else if(typeof e=="string"){let c=t;if(!c){const u=Ih.rawSplit(e);c=jd.getBestVersionForData(u,n)}a=Ih.fromString(e,c||40)}else throw new Error("Invalid data");const o=jd.getBestVersionForData(a,n);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=o;else if(t<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);const i=Ese(t,n,a),l=Cp.getSymbolSize(t),r=new rse(l);return hse(r,t),fse(r),gse(r,t),Ch(r,n,0),t>=7&&_se(r,t),vse(r,i),isNaN(s)&&(s=Gf.getBestMask(r,Ch.bind(null,r,n))),Gf.applyMask(s,r),Ch(r,n,s),{modules:r,version:t,errorCorrectionLevel:n,maskPattern:s,segments:a}}ZA.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let s=yh.M,a,o;return typeof n<"u"&&(s=yh.from(n.errorCorrectionLevel,yh.M),a=jd.from(n.version),o=Gf.from(n.maskPattern),n.toSJISFunc&&Cp.setToSJISFunction(n.toSJISFunc)),Tse(t,a,s,o)};var uy={},T_={};(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let s=n.slice().replace("#","").split("");if(s.length<3||s.length===5||s.length>8)throw new Error("Invalid hex color: "+n);(s.length===3||s.length===4)&&(s=Array.prototype.concat.apply([],s.map(function(o){return[o,o]}))),s.length===6&&s.push("F","F");const a=parseInt(s.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:a&255,hex:"#"+s.slice(0,6).join("")}}e.getOptions=function(s){s||(s={}),s.color||(s.color={});const a=typeof s.margin>"u"||s.margin===null||s.margin<0?4:s.margin,o=s.width&&s.width>=21?s.width:void 0,i=s.scale||4;return{width:o,scale:o?4:i,margin:a,color:{dark:t(s.color.dark||"#000000ff"),light:t(s.color.light||"#ffffffff")},type:s.type,rendererOpts:s.rendererOpts||{}}},e.getScale=function(s,a){return a.width&&a.width>=s+a.margin*2?a.width/(s+a.margin*2):a.scale},e.getImageWidth=function(s,a){const o=e.getScale(s,a);return Math.floor((s+a.margin*2)*o)},e.qrToImageData=function(s,a,o){const i=a.modules.size,l=a.modules.data,r=e.getScale(i,o),c=Math.floor((i+o.margin*2)*r),u=o.margin*r,d=[o.color.light,o.color.dark];for(let h=0;h<c;h++)for(let g=0;g<c;g++){let f=(h*c+g)*4,b=o.color.light;if(h>=u&&g>=u&&h<c-u&&g<c-u){const A=Math.floor((h-u)/r),v=Math.floor((g-u)/r);b=d[l[A*i+v]?1:0]}s[f++]=b.r,s[f++]=b.g,s[f++]=b.b,s[f]=b.a}}})(T_);(function(e){const t=T_;function n(a,o,i){a.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=i,o.width=i,o.style.height=i+"px",o.style.width=i+"px"}function s(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(o,i,l){let r=l,c=i;typeof r>"u"&&(!i||!i.getContext)&&(r=i,i=void 0),i||(c=s()),r=t.getOptions(r);const u=t.getImageWidth(o.modules.size,r),d=c.getContext("2d"),h=d.createImageData(u,u);return t.qrToImageData(h.data,o,r),n(d,c,u),d.putImageData(h,0,0),c},e.renderToDataURL=function(o,i,l){let r=l;typeof r>"u"&&(!i||!i.getContext)&&(r=i,i=void 0),r||(r={});const c=e.render(o,i,r),u=r.type||"image/png",d=r.rendererOpts||{};return c.toDataURL(u,d.quality)}})(uy);var dy={};const Sse=T_;function _b(e,t){const n=e.a/255,s=t+'="'+e.hex+'"';return n<1?s+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':s}function Nh(e,t,n){let s=e+t;return typeof n<"u"&&(s+=" "+n),s}function Ase(e,t,n){let s="",a=0,o=!1,i=0;for(let l=0;l<e.length;l++){const r=Math.floor(l%t),c=Math.floor(l/t);!r&&!o&&(o=!0),e[l]?(i++,l>0&&r>0&&e[l-1]||(s+=o?Nh("M",r+n,.5+c+n):Nh("m",a,0),a=0,o=!1),r+1<t&&e[l+1]||(s+=Nh("h",i),i=0)):a++}return s}dy.render=function(t,n,s){const a=Sse.getOptions(n),o=t.modules.size,i=t.modules.data,l=o+a.margin*2,r=a.color.light.a?"<path "+_b(a.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",c="<path "+_b(a.color.dark,"stroke")+' d="'+Ase(i,o,a.margin)+'"/>',u='viewBox="0 0 '+l+" "+l+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+u+' shape-rendering="crispEdges">'+r+c+`</svg>
`;return typeof s=="function"&&s(null,h),h};const yse=Une,Hf=ZA,py=uy,Ise=dy;function S_(e,t,n,s,a){const o=[].slice.call(arguments,1),i=o.length,l=typeof o[i-1]=="function";if(!l&&!yse())throw new Error("Callback required as last argument");if(l){if(i<2)throw new Error("Too few arguments provided");i===2?(a=n,n=t,t=s=void 0):i===3&&(t.getContext&&typeof a>"u"?(a=s,s=void 0):(a=s,s=n,n=t,t=void 0))}else{if(i<1)throw new Error("Too few arguments provided");return i===1?(n=t,t=s=void 0):i===2&&!t.getContext&&(s=n,n=t,t=void 0),new Promise(function(r,c){try{const u=Hf.create(n,s);r(e(u,t,s))}catch(u){c(u)}})}try{const r=Hf.create(n,s);a(null,e(r,t,s))}catch(r){a(r)}}$r.create=Hf.create;$r.toCanvas=S_.bind(null,py.render);$r.toDataURL=S_.bind(null,py.renderToDataURL);$r.toString=S_.bind(null,function(e,t,n){return Ise.render(e,n)});const Cse={props:{title:{type:String,default:""},message:{type:String,default:""}}},Nse={class:"empty-state py-16 px-1 ml-0 mr-0"},Ose={key:0,class:"text-n-slate-12 block text-center w-full text-xl font-medium"},Rse={key:1,class:"block text-center text-n-slate-11 my-4 mx-auto w-[90%]"};function xse(e,t,n,s,a,o){return p(),E("div",Nse,[n.title?(p(),E("h3",Ose,I(n.title),1)):$("",!0),n.message?(p(),E("p",Rse,I(n.message),1)):$("",!0),We(e.$slots,"default")])}const Il=De(Cse,[["render",xse]]),wse={class:"w-full text-center"},$se={class:"text-base text-n-slate-11 mt-4 w-4/5 mx-auto leading-7"},Mse={key:0,class:"w-[50%] max-w-[50%] mx-auto"},Lse={class:"mt-8 mb-4 font-medium text-n-slate-11"},Dse={class:"mt-8 text-sm text-n-slate-11 pb-4"},Pse={__name:"EmailInboxFinish",props:{inbox:{type:Object,required:!0},inboxId:{type:[String,Number],required:!0}},setup(e){const t=e,{t:n}=be(),s=y(()=>t.inbox.forwarding_enabled?n("INBOX_MGMT.ADD.EMAIL_CHANNEL.FINISH_MESSAGE"):n("INBOX_MGMT.ADD.EMAIL_CHANNEL.FINISH_MESSAGE_NO_FORWARDING")),a=y(()=>t.inbox.forwarding_enabled);return(o,i)=>{const l=W("woot-code"),r=W("router-link");return p(),E("div",wse,[m("p",$se,I(s.value),1),a.value?(p(),E("div",Mse,[m("p",Lse,I(o.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.FORWARDING_ADDRESS_LABEL")),1),S(l,{lang:"html",script:e.inbox.forward_to_email},null,8,["script"])])):$("",!0),m("p",Dse,[S(r,{to:{name:"settings_inbox_show",params:{inboxId:e.inboxId,tab:"configuration"}},class:"text-n-woot-600 hover:text-n-woot-700 underline"},{default:Y(()=>[xe(I(o.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.CONFIGURE_SMTP_IMAP_LINK")),1)]),_:1},8,["to"]),xe(" "+I(o.$t("INBOX_MGMT.ADD.EMAIL_CHANNEL.CONFIGURE_SMTP_IMAP_TEXT")),1)])])}}},Np=(e=null)=>{const t=_e("getSelectedChat"),n=_e("inboxes/getInboxById"),s=y(()=>{var w;const x=e||((w=t.value)==null?void 0:w.inbox_id);return x?so(n.value(x),{deep:!0}):null}),a=y(()=>{var x;return(x=s.value)==null?void 0:x.channelType}),o=y(()=>a.value===St.API),i=y(()=>a.value===St.FB),l=y(()=>a.value===St.WEB),r=y(()=>a.value===St.TWILIO),c=y(()=>a.value===St.LINE),u=y(()=>a.value===St.EMAIL),d=y(()=>a.value===St.TELEGRAM),h=y(()=>{var x;return((x=s.value)==null?void 0:x.provider)||""}),g=y(()=>{var x;return u.value&&((x=s.value)==null?void 0:x.provider)==="microsoft"}),f=y(()=>{var x;return u.value&&((x=s.value)==null?void 0:x.provider)==="google"}),b=y(()=>{const{medium:x=""}=s.value||{};return r.value&&x==="sms"}),A=y(()=>a.value===St.SMS||b.value),v=y(()=>{const{medium:x=""}=s.value||{};return r.value&&x==="whatsapp"}),T=y(()=>a.value===St.WHATSAPP&&h.value==="whatsapp_cloud"),_=y(()=>a.value===St.WHATSAPP&&h.value==="default"),N=y(()=>a.value===St.WHATSAPP||v.value),R=y(()=>a.value===St.INSTAGRAM),O=y(()=>a.value===St.VOICE);return{inbox:s,isAFacebookInbox:i,isALineChannel:c,isAPIInbox:o,isASmsInbox:A,isATelegramChannel:d,isATwilioChannel:r,isAWebWidgetInbox:l,isAWhatsAppChannel:N,isAMicrosoftInbox:g,isAGoogleInbox:f,isATwilioWhatsAppChannel:v,isAWhatsAppCloudChannel:T,is360DialogWhatsAppChannel:_,isAnEmailChannel:u,isAnInstagramChannel:R,isAVoiceChannel:O}},kse={class:"overflow-auto col-span-6 p-6 w-full h-full"},Bse={class:"w-full text-center"},Use={class:"my-4 mx-auto max-w-[70%]"},Fse={class:"w-[50%] max-w-[50%] ml-[25%]"},Gse={key:0,class:"w-[50%] max-w-[50%] ml-[25%]"},Vse={class:"mt-8 font-medium text-n-slate-11"},Hse={class:"mt-8 font-medium text-n-slate-11"},Wse={class:"w-[50%] max-w-[50%] ml-[25%]"},zse={class:"w-[50%] max-w-[50%] ml-[25%]"},Yse={key:2,class:"flex flex-col gap-3 items-center mt-8"},jse={class:"mt-2 text-sm text-n-slate-9"},Kse={class:"rounded-lg shadow outline-1 outline-n-strong outline"},Xse=["src"],qse={key:3,class:"flex flex-col gap-3 items-center mt-8"},Zse={class:"mt-2 text-sm text-n-slate-9"},Qse={class:"rounded-lg shadow outline-1 outline-n-strong outline"},Jse=["src"],eae={key:4,class:"flex flex-col gap-4 items-center mt-8"},tae={class:"mt-2 text-sm text-n-slate-9"},nae={class:"rounded-lg shadow outline-1 outline-n-strong outline"},sae=["src"],aae={class:"flex gap-2 justify-center mt-4"},oae={__name:"FinishSetup",setup(e){const{t}=be(),n=wt(),s=na(),a=gn({whatsapp:"",messenger:"",telegram:""}),o=y(()=>s.getters["inboxes/getInbox"](n.params.inbox_id)),{isAWhatsAppCloudChannel:i,isATwilioChannel:l,isASmsInbox:r,isALineChannel:c,isAnEmailChannel:u,isAWhatsAppChannel:d,isAFacebookInbox:h,isATelegramChannel:g,isATwilioWhatsAppChannel:f}=Np(n.params.inbox_id),b=y(()=>{const R=o.value.instagram_id,O=s.getters["inboxes/getFacebookInboxByInstagramId"](R);return o.value.channel_type===St.INSTAGRAM&&O}),A=y(()=>{var R;return i.value&&((R=o.value.provider_config)==null?void 0:R.source)!=="embedded_signup"}),v=y(()=>{var R;return i.value&&((R=o.value.provider_config)==null?void 0:R.source)==="embedded_signup"}),T=y(()=>l.value?`${t("INBOX_MGMT.FINISH.MESSAGE")}. ${t("INBOX_MGMT.ADD.TWILIO.API_CALLBACK.SUBTITLE")}`:r.value?`${t("INBOX_MGMT.FINISH.MESSAGE")}. ${t("INBOX_MGMT.ADD.SMS.BANDWIDTH.API_CALLBACK.SUBTITLE")}`:c.value?`${t("INBOX_MGMT.FINISH.MESSAGE")}. ${t("INBOX_MGMT.ADD.LINE_CHANNEL.API_CALLBACK.SUBTITLE")}`:i.value&&A.value?`${t("INBOX_MGMT.FINISH.MESSAGE")}. ${t("INBOX_MGMT.ADD.WHATSAPP.API_CALLBACK.SUBTITLE")}`:o.value.web_widget_script?t("INBOX_MGMT.FINISH.WEBSITE_SUCCESS"):v.value?`${t("INBOX_MGMT.FINISH.MESSAGE")}. ${t("INBOX_MGMT.FINISH.WHATSAPP_QR_INSTRUCTION")}`:t("INBOX_MGMT.FINISH.MESSAGE"));async function _(R,O){if(!O||!O.trim()){console.warn(`Invalid identifier for ${R} QR code`);return}try{const w={whatsapp:M=>`https://wa.me/${M}`,messenger:M=>`https://m.me/${M}`,telegram:M=>`https://t.me/${M}`}[R](O),D=await $r.toDataURL(w);a[R]=D}catch(x){console.error(`Error generating ${R} QR code:`,x),a[R]=""}}async function N(){if(o.value){if(o.value.phone_number&&d.value){const R=o.value.phone_number.replace("whatsapp:","");await _("whatsapp",R)}o.value.page_id&&h.value&&await _("messenger",o.value.page_id),g.value&&o.value.bot_name&&await _("telegram",o.value.bot_name)}}return it(o,R=>{R&&N()},{immediate:!0}),lt(()=>{N()}),(R,O)=>{const x=W("woot-code"),w=W("router-link");return p(),E("div",kse,[b.value?(p(),L(kA,{key:0,content:R.$t("INBOX_MGMT.ADD.INSTAGRAM.NEW_INBOX_SUGGESTION")},null,8,["content"])):$("",!0),S(Il,{title:R.$t("INBOX_MGMT.FINISH.TITLE"),message:C(u)&&!o.value.provider?"":T.value,"button-text":R.$t("INBOX_MGMT.FINISH.BUTTON_TEXT")},{default:Y(()=>[m("div",Bse,[m("div",Use,[o.value.web_widget_script?(p(),L(x,{key:0,script:o.value.web_widget_script},null,8,["script"])):$("",!0)]),m("div",Fse,[C(f)?(p(),L(x,{key:0,lang:"html",script:o.value.callback_webhook_url},null,8,["script"])):$("",!0)]),A.value?(p(),E("div",Gse,[m("p",Vse,I(R.$t("INBOX_MGMT.ADD.WHATSAPP.API_CALLBACK.WEBHOOK_URL")),1),S(x,{lang:"html",script:o.value.callback_webhook_url},null,8,["script"]),m("p",Hse,I(R.$t("INBOX_MGMT.ADD.WHATSAPP.API_CALLBACK.WEBHOOK_VERIFICATION_TOKEN")),1),S(x,{lang:"html",script:o.value.provider_config.webhook_verify_token},null,8,["script"])])):$("",!0),m("div",Wse,[C(c)?(p(),L(x,{key:0,lang:"html",script:o.value.callback_webhook_url},null,8,["script"])):$("",!0)]),m("div",zse,[C(r)?(p(),L(x,{key:0,lang:"html",script:o.value.callback_webhook_url},null,8,["script"])):$("",!0)]),C(u)&&!o.value.provider?(p(),L(Pse,{key:1,inbox:o.value,"inbox-id":R.$route.params.inbox_id},null,8,["inbox","inbox-id"])):$("",!0),C(d)&&a.whatsapp?(p(),E("div",Yse,[m("p",jse,I(R.$t("INBOX_MGMT.FINISH.WHATSAPP_QR_INSTRUCTION")),1),m("div",Kse,[m("img",{src:a.whatsapp,alt:"WhatsApp QR Code",class:"rounded-lg size-48 dark:invert"},null,8,Xse)])])):$("",!0),C(h)&&a.messenger?(p(),E("div",qse,[m("p",Zse,I(R.$t("INBOX_MGMT.FINISH.MESSENGER_QR_INSTRUCTION")),1),m("div",Qse,[m("img",{src:a.messenger,alt:"Messenger QR Code",class:"rounded-lg size-48 dark:invert"},null,8,Jse)])])):$("",!0),C(g)&&a.telegram?(p(),E("div",eae,[m("p",tae,I(R.$t("INBOX_MGMT.FINISH.TELEGRAM_QR_INSTRUCTION")),1),m("div",nae,[m("img",{src:a.telegram,alt:"Telegram QR Code",class:"rounded-lg size-48 dark:invert"},null,8,sae)])])):$("",!0),m("div",aae,[S(w,{to:{name:"settings_inbox_show",params:{inboxId:R.$route.params.inbox_id}}},{default:Y(()=>[S(te,{outline:"",slate:"",label:R.$t("INBOX_MGMT.FINISH.MORE_SETTINGS")},null,8,["label"])]),_:1},8,["to"]),S(w,{to:{name:"inbox_dashboard",params:{inboxId:R.$route.params.inbox_id}}},{default:Y(()=>[S(te,{solid:"",teal:"",label:R.$t("INBOX_MGMT.FINISH.BUTTON_TEXT")},null,8,["label"])]),_:1},8,["to"])])])]),_:1},8,["title","message","button-text"])])}}},iae={routes:[{path:vt("accounts/:accountId/settings/inboxes"),component:Rs,children:[{path:"",redirect:e=>({name:"settings_inbox_list",params:e.params})},{path:"list",name:"settings_inbox_list",component:KX,meta:{featureFlag:ft.INBOX_MANAGEMENT,permissions:["administrator"]}}]},{path:vt("accounts/:accountId/settings/inboxes"),component:au,props:e=>{const t=e.name!=="settings_inbox_list",n=e.name==="settings_inbox_show";return{headerTitle:"INBOX_MGMT.HEADER",icon:"mail-inbox-all",showBackButton:t,fullWidth:n}},children:[{path:"new",component:Cne,children:[{path:"",name:"settings_inbox_new",component:xne,meta:{featureFlag:ft.INBOX_MANAGEMENT,permissions:["administrator"]}},{path:":inbox_id/finish",name:"settings_inbox_finish",component:oae,meta:{featureFlag:ft.INBOX_MANAGEMENT,permissions:["administrator"]}},{path:":sub_page",name:"settings_inboxes_page_channel",component:xX,meta:{featureFlag:ft.INBOX_MANAGEMENT,permissions:["administrator"]},props:e=>({channelName:e.params.sub_page})},{path:":inbox_id/agents",name:"settings_inboxes_add_agents",meta:{featureFlag:ft.INBOX_MANAGEMENT,permissions:["administrator"]},component:Bne}]},{path:":inboxId/:tab?",name:"settings_inbox_show",component:Sne,meta:{featureFlag:ft.INBOX_MANAGEMENT,permissions:["administrator"]}}]}]},Op=e=>{const t=_e("integrations/getIntegration"),n=y(()=>t.value(e)),s=y(()=>n.value.hook_type==="inbox"),a=y(()=>!!n.value.hooks.length),o=y(()=>n.value.allow_multiple_hooks?"multiple":"single"),i=y(()=>o.value==="multiple"),l=y(()=>o.value==="single");return{integration:n,integrationType:o,isIntegrationMultiple:i,isIntegrationSingle:l,isHookTypeInbox:s,hasConnectedHooks:a}},lae={components:{FormKit:eO,NextButton:te},props:{integrationId:{type:String,required:!0}},emits:["close"],setup(e){const{integration:t,isHookTypeInbox:n}=Op(e.integrationId),{replaceInstallationName:s}=Wa();return{integration:t,isHookTypeInbox:n,replaceInstallationName:s}},data(){return{endPoint:"",alertMessage:"",values:{}}},computed:{...mt({uiFlags:"integrations/getUIFlags",dialogFlowEnabledInboxes:"inboxes/dialogFlowEnabledInboxes"}),inboxes(){return this.dialogFlowEnabledInboxes.filter(e=>this.isIntegrationDialogflow?!this.connectedDialogflowInboxIds.includes(e.id):!0).map(e=>({label:e.name,value:e.id}))},connectedDialogflowInboxIds(){return this.isIntegrationDialogflow?this.integration.hooks.map(e=>{var t;return(t=e.inbox)==null?void 0:t.id}):[]},formItems(){return this.integration.settings_form_schema},isIntegrationDialogflow(){return this.integration.id==="dialogflow"}},methods:{onClose(){this.$emit("close")},buildHookPayload(){const e={app_id:this.integration.id,settings:{}};return e.settings=Object.keys(this.values).reduce((t,n)=>(n!=="inbox"&&(t[n]=this.values[n]),t),{}),this.formItems.forEach(t=>{var n;(n=t.validation)!=null&&n.includes("JSON")&&(e.settings[t.name]=JSON.parse(e.settings[t.name]))}),this.isHookTypeInbox&&this.values.inbox&&(e.inbox_id=this.values.inbox),e},async submitForm(){var e,t;try{await this.$store.dispatch("integrations/createHook",this.buildHookPayload()),this.alertMessage=this.$t("INTEGRATION_APPS.ADD.API.SUCCESS_MESSAGE"),this.onClose()}catch(n){const s=(t=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:t.message;this.alertMessage=s||this.$t("INTEGRATION_APPS.ADD.API.ERROR_MESSAGE")}finally{ne(this.alertMessage)}}}},rae={class:"flex flex-col h-auto overflow-auto integration-hooks"},cae={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function uae(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("FormKit"),r=W("NextButton");return p(),E("div",rae,[S(i,{"header-title":s.integration.name,"header-content":s.replaceInstallationName(s.integration.short_description)},null,8,["header-title","header-content"]),S(l,{modelValue:a.values,"onUpdate:modelValue":t[0]||(t[0]=c=>a.values=c),type:"form","form-class":"w-full grid gap-4","submit-attrs":{inputClass:"hidden",wrapperClass:"hidden"},"incomplete-message":!1,onSubmit:o.submitForm},{default:Y(()=>[(p(!0),E(ue,null,Ae(o.formItems,c=>(p(),L(l,Qn({key:c.name,ref_for:!0},c),null,16))),128)),s.isHookTypeInbox?(p(),L(l,{key:0,options:o.inboxes,type:"select",name:"inbox","input-class":"reset-base",placeholder:e.$t("INTEGRATION_APPS.ADD.FORM.INBOX.LABEL"),label:e.$t("INTEGRATION_APPS.ADD.FORM.INBOX.PLACEHOLDER"),validation:"required","validation-name":"Inbox"},null,8,["options","placeholder","label"])):$("",!0),m("div",cae,[S(r,{faded:"",slate:"",type:"reset",label:e.$t("INTEGRATION_APPS.ADD.FORM.CANCEL"),onClick:Ve(o.onClose,["prevent"])},null,8,["label","onClick"]),S(r,{type:"submit",label:e.$t("INTEGRATION_APPS.ADD.FORM.SUBMIT"),"is-loading":e.uiFlags.isCreatingHook},null,8,["label","is-loading"])])]),_:1},8,["modelValue","onSubmit"])])}const dae=De(lae,[["render",uae]]),pae={class:"outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow flex-grow overflow-auto p-4"},mae={class:"flex items-center justify-center"},hae={class:"flex h-16 w-16 items-center justify-center"},fae=["src"],gae=["src"],_ae={class:"flex flex-col justify-center m-0 mx-4 flex-1"},vae={class:"mb-1 text-xl font-medium text-n-slate-12"},Eae={class:"text-n-slate-11 text-sm leading-6"},bae={class:"flex justify-center items-center mb-0 w-[15%]"},Tae={key:0},Sae={key:1},Aae={__name:"SingleIntegrationHooks",props:{integrationId:{type:String,required:!0}},emits:["add","delete"],setup(e){const t=e,{integration:n,hasConnectedHooks:s}=Op(t.integrationId),{replaceInstallationName:a}=Wa();return(o,i)=>(p(),E("div",pae,[m("div",mae,[m("div",hae,[m("img",{src:`/dashboard/images/integrations/${e.integrationId}.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm block dark:hidden bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,fae),m("img",{src:`/dashboard/images/integrations/${e.integrationId}-dark.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm hidden dark:block bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,gae)]),m("div",_ae,[m("h3",vae,I(C(n).name),1),m("p",Eae,I(C(a)(C(n).description)),1)]),m("div",bae,[C(s)?(p(),E("div",Tae,[m("div",{onClick:i[0]||(i[0]=l=>o.$emit("delete",C(n).hooks[0]))},[S(te,{ruby:"",faded:"",label:o.$t("INTEGRATION_APPS.DISCONNECT.BUTTON_TEXT")},null,8,["label"])])])):(p(),E("div",Sae,[S(te,{blue:"",faded:"",label:o.$t("INTEGRATION_APPS.CONNECT.BUTTON_TEXT"),onClick:i[1]||(i[1]=l=>o.$emit("add"))},null,8,["label"])]))])])]))}},yae={components:{BaseSettingsHeader:hs,NextButton:te},props:{integrationId:{type:String,required:!0},showAddButton:{type:Boolean,default:!1}},emits:["delete","add"],setup(e){const{integration:t,isHookTypeInbox:n,hasConnectedHooks:s}=Op(e.integrationId);return{integration:t,isHookTypeInbox:n,hasConnectedHooks:s}},computed:{...mt({globalConfig:"globalConfig/get"}),hookHeaders(){return this.integration.visible_properties},hooks(){if(!this.hasConnectedHooks)return[];const{hooks:e}=this.integration;return e.map(t=>({...t,id:t.id,properties:this.hookHeaders.map(n=>t.settings[n]?t.settings[n]:"--")}))}},mounted(){},methods:{inboxName(e){return e.inbox?e.inbox.name:""}}},Iae={class:"flex flex-col flex-1 gap-8 overflow-auto"},Cae={class:"w-full"},Nae={key:0},Oae={class:"[&>th]:font-semibold [&>th]:tracking-[1px] ltr:[&>th]:text-left rtl:[&>th]:text-right [&>th]:px-2.5 [&>th]:uppercase [&>th]:text-n-slate-12"},Rae={key:0},xae={key:0,class:"break-words"},wae={class:"flex justify-end gap-1"},$ae={key:1,class:"flex flex-col items-center justify-center h-full"};function Mae(e,t,n,s,a,o){const i=W("NextButton"),l=W("BaseSettingsHeader"),r=Qe("tooltip");return p(),E("div",Iae,[S(l,{title:s.integration.name,description:e.$t(`INTEGRATION_APPS.SIDEBAR_DESCRIPTION.${s.integration.name.toUpperCase()}`,{installationName:e.globalConfig.installationName}),"feature-name":n.integrationId,"back-button-label":e.$t("INTEGRATION_SETTINGS.HEADER")},{actions:Y(()=>[n.showAddButton?(p(),L(i,{key:0,icon:"i-lucide-circle-plus",label:e.$t("INTEGRATION_APPS.ADD_BUTTON"),onClick:t[0]||(t[0]=c=>e.$emit("add"))},null,8,["label"])):$("",!0)]),_:1},8,["title","description","feature-name","back-button-label"]),m("div",Cae,[s.hasConnectedHooks?(p(),E("table",Nae,[m("thead",Oae,[(p(!0),E(ue,null,Ae(o.hookHeaders,c=>(p(),E("th",{key:c,class:"ltr:!pl-0 rtl:!pr-0"},I(c),1))),128)),s.isHookTypeInbox?(p(),E("th",Rae,I(e.$t("INTEGRATION_APPS.LIST.INBOX")),1)):$("",!0)]),m("tbody",null,[(p(!0),E(ue,null,Ae(o.hooks,c=>(p(),E("tr",{key:c.id,class:"border-b border-n-weak [&>td]:p-2.5 [&>td]:text-n-slate-12"},[(p(!0),E(ue,null,Ae(c.properties,u=>(p(),E("td",{key:u,class:"ltr:!pl-0 rtl:!pr-0"},I(u),1))),128)),s.isHookTypeInbox?(p(),E("td",xae,I(o.inboxName(c)),1)):$("",!0),m("td",wae,[re(S(i,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:u=>e.$emit("delete",c)},null,8,["onClick"]),[[r,e.$t("INTEGRATION_APPS.LIST.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])]))),128))])])):(p(),E("p",$ae,I(e.$t("INTEGRATION_APPS.NO_HOOK_CONFIGURED",{integrationId:s.integration.id})),1))])])}const Lae=De(yae,[["render",Mae]]),Dae={components:{NewHook:dae,SingleIntegrationHooks:Aae,MultipleIntegrationHooks:Lae},props:{integrationId:{type:[String,Number],required:!0}},setup(e){const{integrationId:t}=e,{integration:n,isIntegrationMultiple:s,isIntegrationSingle:a,isHookTypeInbox:o}=Op(t);return{integration:n,isIntegrationMultiple:s,isIntegrationSingle:a,isHookTypeInbox:o}},data(){return{loading:{},showAddHookModal:!1,showDeleteConfirmationPopup:!1,selectedHook:{},alertMessage:""}},computed:{...mt({uiFlags:"integrations/getUIFlags"}),showIntegrationHooks(){return!this.uiFlags.isFetching&&!NO(this.integration)},showAddButton(){return this.showIntegrationHooks&&this.isIntegrationMultiple},deleteTitle(){return this.isHookTypeInbox?this.$t("INTEGRATION_APPS.DELETE.TITLE.INBOX"):this.$t("INTEGRATION_APPS.DELETE.TITLE.ACCOUNT")},deleteMessage(){return this.isHookTypeInbox?this.$t("INTEGRATION_APPS.DELETE.MESSAGE.INBOX"):this.$t("INTEGRATION_APPS.DELETE.MESSAGE.ACCOUNT")},confirmText(){return this.isHookTypeInbox?this.$t("INTEGRATION_APPS.DELETE.CONFIRM_BUTTON_TEXT.INBOX"):this.$t("INTEGRATION_APPS.DELETE.CONFIRM_BUTTON_TEXT.ACCOUNT")},cancelText(){return this.$t("INTEGRATION_APPS.DELETE.CANCEL_BUTTON_TEXT")}},methods:{openAddHookModal(){this.showAddHookModal=!0},hideAddHookModal(){this.showAddHookModal=!1},openDeletePopup(e){this.showDeleteConfirmationPopup=!0,this.selectedHook=e},closeDeletePopup(){this.showDeleteConfirmationPopup=!1},async confirmDeletion(){var e,t;try{await this.$store.dispatch("integrations/deleteHook",{hookId:this.selectedHook.id,appId:this.selectedHook.app_id}),this.alertMessage=this.$t("INTEGRATION_APPS.DELETE.API.SUCCESS_MESSAGE"),this.closeDeletePopup()}catch(n){const s=(t=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:t.message;this.alertMessage=s||this.$t("INTEGRATION_APPS.DELETE.API.ERROR_MESSAGE")}finally{ne(this.alertMessage)}}}},Pae={class:"overflow-auto p-4 w-full my-auto flex flex-wrap h-full"},kae={key:0,class:"w-full"},Bae={key:0},Uae={key:1};function Fae(e,t,n,s,a,o){const i=W("MultipleIntegrationHooks"),l=W("SingleIntegrationHooks"),r=W("NewHook"),c=W("woot-modal"),u=W("woot-delete-modal");return p(),E("div",Pae,[o.showIntegrationHooks?(p(),E("div",kae,[s.isIntegrationMultiple?(p(),E("div",Bae,[S(i,{"integration-id":n.integrationId,"show-add-button":o.showAddButton,onAdd:o.openAddHookModal,onDelete:o.openDeletePopup},null,8,["integration-id","show-add-button","onAdd","onDelete"])])):$("",!0),s.isIntegrationSingle?(p(),E("div",Uae,[S(l,{"integration-id":n.integrationId,onAdd:o.openAddHookModal,onDelete:o.openDeletePopup},null,8,["integration-id","onAdd","onDelete"])])):$("",!0)])):$("",!0),S(c,{show:a.showAddHookModal,"onUpdate:show":t[0]||(t[0]=d=>a.showAddHookModal=d),"on-close":o.hideAddHookModal},{default:Y(()=>[S(r,{"integration-id":n.integrationId,onClose:o.hideAddHookModal},null,8,["integration-id","onClose"])]),_:1},8,["show","on-close"]),S(u,{show:a.showDeleteConfirmationPopup,"onUpdate:show":t[1]||(t[1]=d=>a.showDeleteConfirmationPopup=d),"on-close":o.closeDeletePopup,"on-confirm":o.confirmDeletion,title:o.deleteTitle,message:o.deleteMessage,"confirm-text":o.confirmText,"reject-text":o.cancelText},null,8,["show","on-close","on-confirm","title","message","confirm-text","reject-text"])])}const Gae=De(Dae,[["render",Fae]]),Vae={class:"flex flex-col flex-1 p-6 m-[1px] outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow"},Hae={class:"flex items-start justify-between"},Wae={class:"flex h-12 w-12 mb-4"},zae=["src"],Yae=["src"],jae={class:"flex flex-col m-0 flex-1"},Kae={class:"font-medium mb-2 text-n-slate-12 flex justify-between items-center"},Xae={class:"text-base font-semibold"},qae={class:"text-n-slate-11"},Zae={__name:"IntegrationItem",props:{id:{type:[String,Number],required:!0},name:{type:String,default:""},description:{type:String,default:""},enabled:{type:Boolean,default:!1}},setup(e){const t=e,s=pn().getCurrentAccountId,{t:a}=be(),{replaceInstallationName:o}=Wa(),i=y(()=>t.enabled?a("INTEGRATION_APPS.STATUS.ENABLED"):a("INTEGRATION_APPS.STATUS.DISABLED")),l=y(()=>t.enabled?"bg-n-teal-9":"bg-n-slate-8"),r=y(()=>vt(`accounts/${s.value}/settings/integrations/${t.id}`));return(c,u)=>{const d=W("router-link"),h=Qe("tooltip");return p(),E("div",Vae,[m("div",Hae,[m("div",Wae,[m("img",{src:`/dashboard/images/integrations/${e.id}.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm block dark:hidden bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,zae),m("img",{src:`/dashboard/images/integrations/${e.id}-dark.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm hidden dark:block bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,Yae)]),re((p(),E("span",{class:ae(["text-white p-0.5 rounded-full w-5 h-5 flex items-center justify-center",l.value])},u[0]||(u[0]=[m("i",{class:"i-ph-check-bold text-sm"},null,-1)]),2)),[[h,i.value]])]),m("div",jae,[m("div",Kae,[m("span",Xae,I(e.name),1),S(d,{to:r.value},{default:Y(()=>[S(te,{label:c.$t("INTEGRATION_APPS.CONFIGURE"),link:""},null,8,["label"])]),_:1},8,["to"])]),m("p",qae,I(C(o)(e.description)),1)])])}}},Qae={class:"flex-grow flex-shrink overflow-auto"},Jae={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4"},eoe={__name:"Index",setup(e){const t=rt(),n=pn(),{replaceInstallationName:s}=Wa(),a=n["integrations/getUIFlags"],o=y(()=>n["integrations/getAppIntegrations"].value);return lt(()=>{t.dispatch("integrations/get")}),(i,l)=>(p(),L(Es,{"is-loading":C(a).isFetching,"loading-message":i.$t("INTEGRATION_SETTINGS.LOADING")},{header:Y(()=>[S(hs,{title:i.$t("INTEGRATION_SETTINGS.HEADER"),description:C(s)(i.$t("INTEGRATION_SETTINGS.DESCRIPTION")),"link-text":i.$t("INTEGRATION_SETTINGS.LEARN_MORE"),"feature-name":"integrations"},null,8,["title","description","link-text"])]),body:Y(()=>[m("div",Qae,[m("div",Jae,[(p(!0),E(ue,null,Ae(o.value,r=>(p(),L(Zae,{id:r.id,key:r.id,logo:r.logo,name:r.name,description:r.description,enabled:r.enabled},null,8,["id","logo","name","description","enabled"]))),128))])])]),_:1},8,["is-loading","loading-message"]))}},A_=(e,t)=>{const n=t.toUpperCase();return`${e}.${n}`},{EXAMPLE_WEBHOOK_URL:toe}=yt,noe=["conversation_created","conversation_status_changed","conversation_updated","message_created","message_updated","webwidget_triggered","contact_created","contact_updated","conversation_typing_on","conversation_typing_off"],soe={components:{NextButton:te},props:{value:{type:Object,default:()=>({})},isSubmitting:{type:Boolean,default:!1},submitLabel:{type:String,required:!0}},emits:["submit","cancel"],setup(){return{v$:bt()}},validations:{url:{required:Ye,minLength:en(7),url:Qc},subscriptions:{required:Ye}},data(){return{url:this.value.url||"",name:this.value.name||"",subscriptions:this.value.subscriptions||[],supportedWebhookEvents:noe}},computed:{webhookURLInputPlaceholder(){return this.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.END_POINT.PLACEHOLDER",{webhookExampleURL:toe})},webhookNameInputPlaceholder(){return this.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.NAME.PLACEHOLDER")}},methods:{onSubmit(){this.$emit("submit",{url:this.url,name:this.name,subscriptions:this.subscriptions})},getI18nKey:A_}},aoe={class:"w-full"},ooe=["placeholder"],ioe={key:0,class:"message"},loe=["placeholder"],roe={class:"flex flex-col gap-2.5 mb-4"},coe=["id","value"],uoe=["for"],doe={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function poe(e,t,n,s,a,o){const i=W("NextButton");return p(),E("form",{class:"flex flex-col w-full",onSubmit:t[5]||(t[5]=Ve((...l)=>o.onSubmit&&o.onSubmit(...l),["prevent"]))},[m("div",aoe,[m("label",{class:ae({error:s.v$.url.$error})},[xe(I(e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.END_POINT.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>a.url=l),type:"text",name:"url",placeholder:o.webhookURLInputPlaceholder,onInput:t[1]||(t[1]=(...l)=>s.v$.url.$touch&&s.v$.url.$touch(...l))},null,40,ooe),[[gt,a.url]]),s.v$.url.$error?(p(),E("span",ioe,I(e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.END_POINT.ERROR")),1)):$("",!0)],2),m("label",null,[xe(I(e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.NAME.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>a.name=l),type:"text",name:"name",placeholder:o.webhookNameInputPlaceholder},null,8,loe),[[gt,a.name]])]),m("label",{class:ae([{error:s.v$.url.$error},"mb-2"])},I(e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.SUBSCRIPTIONS.LABEL")),3),m("div",roe,[(p(!0),E(ue,null,Ae(a.supportedWebhookEvents,l=>(p(),E("div",{key:l,class:"flex items-center"},[re(m("input",{id:l,"onUpdate:modelValue":t[3]||(t[3]=r=>a.subscriptions=r),type:"checkbox",value:l,name:"subscriptions",class:"mr-2"},null,8,coe),[[dn,a.subscriptions]]),m("label",{for:l,class:"text-sm"},I(`${e.$t(o.getI18nKey("INTEGRATION_SETTINGS.WEBHOOK.FORM.SUBSCRIPTIONS.EVENTS",l))} (${l})`),9,uoe)]))),128))])]),m("div",doe,[S(i,{faded:"",slate:"",type:"reset",label:e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.CANCEL"),onClick:t[4]||(t[4]=Ve(l=>e.$emit("cancel"),["prevent"]))},null,8,["label"]),S(i,{type:"submit",disabled:s.v$.$invalid||n.isSubmitting,"is-loading":n.isSubmitting,label:n.submitLabel},null,8,["disabled","is-loading","label"])])],32)}const my=De(soe,[["render",poe]]),moe={components:{WebhookForm:my},props:{onClose:{type:Function,required:!0}},setup(){const{replaceInstallationName:e}=Wa();return{replaceInstallationName:e}},computed:{...mt({uiFlags:"webhooks/getUIFlags"})},methods:{async onSubmit(e){try{await this.$store.dispatch("webhooks/create",{webhook:e}),ne(this.$t("INTEGRATION_SETTINGS.WEBHOOK.ADD.API.SUCCESS_MESSAGE")),this.onClose()}catch(t){const n=t.response.data.message||this.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.API.ERROR_MESSAGE");ne(n)}}}},hoe={class:"h-auto overflow-auto flex flex-col"};function foe(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("WebhookForm");return p(),E("div",hoe,[S(i,{"header-title":e.$t("INTEGRATION_SETTINGS.WEBHOOK.ADD.TITLE"),"header-content":s.replaceInstallationName(e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.DESC"))},null,8,["header-title","header-content"]),S(l,{"is-submitting":e.uiFlags.creatingItem,"submit-label":e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.ADD_SUBMIT"),onSubmit:o.onSubmit,onCancel:n.onClose},null,8,["is-submitting","submit-label","onSubmit","onCancel"])])}const goe=De(moe,[["render",foe]]),_oe={components:{WebhookForm:my},props:{value:{type:Object,required:!0},id:{type:[Number,String],required:!0},onClose:{type:Function,required:!0}},computed:{...mt({uiFlags:"webhooks/getUIFlags"})},methods:{async onSubmit(e){var t,n;try{await this.$store.dispatch("webhooks/update",{webhook:e,id:this.id}),ne(this.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.API.SUCCESS_MESSAGE")),this.onClose()}catch(s){const a=((n=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:n.message)||this.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.API.ERROR_MESSAGE");ne(a)}}}},voe={class:"flex flex-col h-auto overflow-auto"};function Eoe(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("WebhookForm");return p(),E("div",voe,[S(i,{"header-title":e.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.TITLE")},null,8,["header-title"]),S(l,{value:n.value,"is-submitting":e.uiFlags.updatingItem,"submit-label":e.$t("INTEGRATION_SETTINGS.WEBHOOK.FORM.EDIT_SUBMIT"),onSubmit:o.onSubmit,onCancel:n.onClose},null,8,["value","is-submitting","submit-label","onSubmit","onCancel"])])}const boe=De(_oe,[["render",Eoe]]),Toe={__name:"ShowMore",props:{text:{type:String,default:""},limit:{type:Number,default:120}},setup(e){const t=e,{t:n}=be(),s=j(!1),a=y(()=>s.value||t.text.length<=t.limit?t.text:t.text.slice(0,t.limit)+"..."),o=y(()=>{const l=s.value?"SHOW_LESS":"SHOW_MORE";return n(`COMPONENTS.SHOW_MORE_BLOCK.${l}`)}),i=()=>{s.value=!s.value};return(l,r)=>(p(),E("span",null,[xe(I(a.value)+" ",1),e.text.length>e.limit?(p(),E("button",{key:0,class:"text-n-brand !p-0 !border-0 align-top",onClick:i},I(o.value),1)):$("",!0)]))}},Soe={class:"py-4 ltr:pr-4 rtl:pl-4"},Aoe={class:"flex gap-2 font-medium break-words text-n-slate-12"},yoe={class:"text-n-slate-11"},Ioe={class:"block mt-1 text-sm text-n-slate-11"},Coe={class:"font-medium"},Noe={class:"py-4 min-w-xs"},Ooe={class:"flex justify-end gap-1"},Roe={__name:"WebhookRow",props:{webhook:{type:Object,required:!0},index:{type:Number,required:!0}},emits:["edit","delete"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=y(()=>{const{subscriptions:i}=n.webhook;return i.map(l=>a(A_("INTEGRATION_SETTINGS.WEBHOOK.FORM.SUBSCRIPTIONS.EVENTS",l))).join(", ")});return(i,l)=>{const r=Qe("tooltip");return p(),E("tr",null,[m("td",Soe,[m("div",Aoe,[e.webhook.name?(p(),E(ue,{key:0},[xe(I(e.webhook.name)+" ",1),m("span",yoe,I(e.webhook.url),1)],64)):(p(),E(ue,{key:1},[xe(I(e.webhook.url),1)],64))]),m("div",Ioe,[m("span",Coe,I(i.$t("INTEGRATION_SETTINGS.WEBHOOK.SUBSCRIBED_EVENTS"))+": ",1),S(Toe,{text:o.value,limit:60},null,8,["text"])])]),m("td",Noe,[m("div",Ooe,[re(S(te,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:l[0]||(l[0]=c=>s("edit",e.webhook))},null,512),[[r,i.$t("INTEGRATION_SETTINGS.WEBHOOK.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]),re(S(te,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:l[1]||(l[1]=c=>s("delete",e.webhook,e.index))},null,512),[[r,i.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])])])}}},xoe={components:{SettingsLayout:Es,NextButton:te,BaseSettingsHeader:hs,NewWebhook:goe,EditWebhook:boe,WebhookRow:Roe},setup(){const{replaceInstallationName:e}=Wa();return{replaceInstallationName:e}},data(){return{loading:{},showAddPopup:!1,showEditPopup:!1,showDeleteConfirmationPopup:!1,selectedWebHook:{}}},computed:{...mt({records:"webhooks/getWebhooks",uiFlags:"webhooks/getUIFlags"}),integration(){return this.$store.getters["integrations/getIntegration"]("webhook")},tableHeaders(){return[this.$t("INTEGRATION_SETTINGS.WEBHOOK.LIST.TABLE_HEADER.WEBHOOK_ENDPOINT"),this.$t("INTEGRATION_SETTINGS.WEBHOOK.LIST.TABLE_HEADER.ACTIONS")]}},mounted(){this.$store.dispatch("webhooks/get")},methods:{openAddPopup(){this.showAddPopup=!0},hideAddPopup(){this.showAddPopup=!1},openDeletePopup(e){this.showDeleteConfirmationPopup=!0,this.selectedWebHook=e},closeDeletePopup(){this.showDeleteConfirmationPopup=!1},openEditPopup(e){this.showEditPopup=!0,this.selectedWebHook=e},hideEditPopup(){this.showEditPopup=!1},confirmDeletion(){this.loading[this.selectedWebHook.id]=!0,this.closeDeletePopup(),this.deleteWebhook(this.selectedWebHook.id)},async deleteWebhook(e){try{await this.$store.dispatch("webhooks/delete",e),ne(this.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.API.SUCCESS_MESSAGE"))}catch{ne(this.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.API.ERROR_MESSAGE"))}}}},woe={class:"min-w-full divide-y divide-n-weak"},$oe={class:"divide-y divide-n-weak flex-1 text-n-slate-12"};function Moe(e,t,n,s,a,o){const i=W("NextButton"),l=W("BaseSettingsHeader"),r=W("WebhookRow"),c=W("NewWebhook"),u=W("woot-modal"),d=W("EditWebhook"),h=W("woot-delete-modal"),g=W("SettingsLayout");return p(),L(g,{"is-loading":e.uiFlags.fetchingList,"loading-message":e.$t("INTEGRATION_SETTINGS.WEBHOOK.LOADING"),"no-records-message":e.$t("INTEGRATION_SETTINGS.WEBHOOK.LIST.404"),"no-records-found":!e.records.length},{header:Y(()=>[o.integration.name?(p(),L(l,{key:0,title:o.integration.name,description:s.replaceInstallationName(o.integration.description),"link-text":e.$t("INTEGRATION_SETTINGS.WEBHOOK.LEARN_MORE"),"feature-name":"webhook","back-button-label":e.$t("INTEGRATION_SETTINGS.HEADER")},{actions:Y(()=>[S(i,{blue:"",icon:"i-lucide-circle-plus",label:e.$t("INTEGRATION_SETTINGS.WEBHOOK.HEADER_BTN_TXT"),onClick:o.openAddPopup},null,8,["label","onClick"])]),_:1},8,["title","description","link-text","back-button-label"])):$("",!0)]),body:Y(()=>[m("table",woe,[m("thead",null,[(p(!0),E(ue,null,Ae(o.tableHeaders,f=>(p(),E("th",{key:f,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11 last:text-right last:pr-4"},I(f),1))),128))]),m("tbody",$oe,[(p(!0),E(ue,null,Ae(e.records,(f,b)=>(p(),L(r,{key:f.id,index:b,webhook:f,onEdit:o.openEditPopup,onDelete:o.openDeletePopup},null,8,["index","webhook","onEdit","onDelete"]))),128))])])]),default:Y(()=>[S(u,{show:a.showAddPopup,"onUpdate:show":t[0]||(t[0]=f=>a.showAddPopup=f),"on-close":o.hideAddPopup},{default:Y(()=>[a.showAddPopup?(p(),L(c,{key:0,"on-close":o.hideAddPopup},null,8,["on-close"])):$("",!0)]),_:1},8,["show","on-close"]),S(u,{show:a.showEditPopup,"onUpdate:show":t[1]||(t[1]=f=>a.showEditPopup=f),"on-close":o.hideEditPopup},{default:Y(()=>[a.showEditPopup?(p(),L(d,{key:0,id:a.selectedWebHook.id,value:a.selectedWebHook,"on-close":o.hideEditPopup},null,8,["id","value","on-close"])):$("",!0)]),_:1},8,["show","on-close"]),S(h,{show:a.showDeleteConfirmationPopup,"onUpdate:show":t[2]||(t[2]=f=>a.showDeleteConfirmationPopup=f),"on-close":o.closeDeletePopup,"on-confirm":o.confirmDeletion,title:e.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.TITLE"),message:e.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.MESSAGE",{webhookURL:a.selectedWebHook.url}),"confirm-text":e.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.YES"),"reject-text":e.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.NO")},null,8,["show","on-close","on-confirm","title","message","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message","no-records-message","no-records-found"])}const Loe=De(xoe,[["render",Moe]]),Doe={components:{NextButton:te},props:{show:{type:Boolean,default:!1},mode:{type:String,default:"create"},selectedAppData:{type:Object,default:()=>({})}},emits:["close"],setup(){return{v$:bt()}},validations:{app:{title:{required:Ye},content:{type:{required:Ye},url:{required:Ye,url:Qc}}}},data(){return{isLoading:!1,app:{title:"",content:{type:"frame",url:""}}}},computed:{header(){return this.$t(`INTEGRATION_SETTINGS.DASHBOARD_APPS.${this.mode}.HEADER`)},submitButtonLabel(){return this.$t(`INTEGRATION_SETTINGS.DASHBOARD_APPS.${this.mode}.FORM_SUBMIT`)}},mounted(){this.mode==="UPDATE"&&this.selectedAppData&&(this.app.title=this.selectedAppData.title,this.app.content=this.selectedAppData.content[0])},methods:{closeModal(){this.app={title:"",content:{type:"frame",url:""}},this.$emit("close")},async submit(){try{if(this.v$.$touch(),this.v$.$invalid)return;const e=this.mode.toLowerCase(),t={title:this.app.title,content:[this.app.content]};e==="update"&&(t.id=this.selectedAppData.id),this.isLoading=!0,await this.$store.dispatch(`dashboardApps/${e}`,t),ne(this.$t(`INTEGRATION_SETTINGS.DASHBOARD_APPS.${this.mode}.API_SUCCESS`)),this.closeModal()}catch{ne(this.$t(`INTEGRATION_SETTINGS.DASHBOARD_APPS.${this.mode}.API_ERROR`))}finally{this.isLoading=!1}}}},Poe={class:"flex flex-col h-auto overflow-auto"},koe={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function Boe(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("woot-input"),r=W("NextButton"),c=W("woot-modal");return p(),L(c,{show:n.show,"on-close":o.closeModal},{default:Y(()=>[m("div",Poe,[S(i,{"header-title":o.header},null,8,["header-title"]),m("form",{class:"w-full",onSubmit:t[2]||(t[2]=Ve((...u)=>o.submit&&o.submit(...u),["prevent"]))},[S(l,{modelValue:a.app.title,"onUpdate:modelValue":t[0]||(t[0]=u=>a.app.title=u),class:ae([{error:s.v$.app.title.$error},"w-full"]),label:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.TITLE_LABEL"),placeholder:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.TITLE_PLACEHOLDER"),error:s.v$.app.title.$error?e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.TITLE_ERROR"):null,"data-testid":"app-title",onInput:s.v$.app.title.$touch,onBlur:s.v$.app.title.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),S(l,{modelValue:a.app.content.url,"onUpdate:modelValue":t[1]||(t[1]=u=>a.app.content.url=u),class:ae([{error:s.v$.app.content.url.$error},"w-full"]),label:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.URL_LABEL"),placeholder:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.URL_PLACEHOLDER"),error:s.v$.app.content.url.$error?e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.FORM.URL_ERROR"):null,"data-testid":"app-url",onInput:s.v$.app.content.url.$touch,onBlur:s.v$.app.content.url.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),m("div",koe,[S(r,{faded:"",slate:"",type:"reset",label:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.CREATE.FORM_CANCEL"),onClick:Ve(o.closeModal,["prevent"])},null,8,["label","onClick"]),S(r,{type:"submit",label:o.submitButtonLabel,disabled:s.v$.$invalid,"is-loading":a.isLoading},null,8,["label","disabled","is-loading"])])],32)])]),_:1},8,["show","on-close"])}const Uoe=De(Doe,[["render",Boe]]),Foe={class:"max-w-full py-1"},Goe=["title"],Voe=["title"],Hoe={class:"flex gap-1 py-4 ltr:pr-4 rtl:pl-4 text-sm sm:pr-0 justify-end"},Woe={__name:"DashboardAppsRow",props:{app:{type:Object,default:()=>({})}},emits:["edit","delete"],setup(e){return(t,n)=>{const s=Qe("tooltip");return p(),E("tr",Foe,[m("td",{class:"py-4 ltr:pr-4 rtl:pl-4 text-sm w-40 max-w-[10rem] truncate",title:e.app.title},I(e.app.title),9,Goe),m("td",{class:"max-w-lg py-4 ltr:pr-4 rtl:pl-4 text-sm truncate",title:e.app.content[0].url},I(e.app.content[0].url),9,Voe),m("td",Hoe,[re(S(te,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:n[0]||(n[0]=a=>t.$emit("edit",e.app))},null,512),[[s,t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.EDIT_TOOLTIP"),void 0,{top:!0}]]),re(S(te,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:n[1]||(n[1]=a=>t.$emit("delete",e.app))},null,512),[[s,t.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.DELETE_TOOLTIP"),void 0,{top:!0}]])])])}}},zoe={components:{BaseSettingsHeader:hs,DashboardAppModal:Uoe,DashboardAppsRow:Woe,NextButton:te},data(){return{loading:{},showDashboardAppPopup:!1,showDeleteConfirmationPopup:!1,selectedApp:{},mode:"CREATE"}},computed:{...mt({records:"dashboardApps/getRecords",uiFlags:"dashboardApps/getUIFlags"}),tableHeaders(){return[this.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.TABLE_HEADER.NAME"),this.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.TABLE_HEADER.ENDPOINT")]}},mounted(){this.$store.dispatch("dashboardApps/get")},methods:{toggleDashboardAppPopup(){this.showDashboardAppPopup=!this.showDashboardAppPopup,this.selectedApp={}},openDeletePopup(e){this.showDeleteConfirmationPopup=!0,this.selectedApp=e},openCreatePopup(){this.mode="CREATE",this.selectedApp={},this.showDashboardAppPopup=!0},closeDeletePopup(){this.showDeleteConfirmationPopup=!1},editApp(e){this.loading[e.id]=!0,this.mode="UPDATE",this.selectedApp=e,this.showDashboardAppPopup=!0},confirmDeletion(){this.loading[this.selectedApp.id]=!0,this.closeDeletePopup(),this.deleteApp(this.selectedApp.id)},async deleteApp(e){try{await this.$store.dispatch("dashboardApps/delete",e),ne(this.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.API_SUCCESS"))}catch{ne(this.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.API_ERROR"))}}}},Yoe={class:"flex flex-col flex-1 gap-8 overflow-auto"},joe={class:"w-full overflow-x-auto text-n-slate-11"},Koe={key:0,class:"flex flex-col items-center justify-center h-full"},Xoe={key:2,class:"min-w-full divide-y divide-n-weak"},qoe={class:"divide-y divide-n-weak"};function Zoe(e,t,n,s,a,o){const i=W("NextButton"),l=W("BaseSettingsHeader"),r=W("woot-loading-state"),c=W("DashboardAppsRow"),u=W("DashboardAppModal"),d=W("woot-delete-modal");return p(),E("div",Yoe,[S(l,{title:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.TITLE"),description:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DESCRIPTION"),"link-text":e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LEARN_MORE"),"feature-name":"dashboard_apps","back-button-label":e.$t("INTEGRATION_SETTINGS.HEADER")},{actions:Y(()=>[S(i,{icon:"i-lucide-circle-plus",label:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.HEADER_BTN_TXT"),onClick:o.openCreatePopup},null,8,["label","onClick"])]),_:1},8,["title","description","link-text","back-button-label"]),m("div",joe,[!e.uiFlags.isFetching&&!e.records.length?(p(),E("p",Koe,I(e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.404")),1)):$("",!0),e.uiFlags.isFetching?(p(),L(r,{key:1,message:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.LIST.LOADING")},null,8,["message"])):$("",!0),!e.uiFlags.isFetching&&e.records.length?(p(),E("table",Xoe,[m("thead",null,[(p(!0),E(ue,null,Ae(o.tableHeaders,h=>(p(),E("th",{key:h,class:"py-4 ltr:pr-4 rtl:pl-4 font-semibold text-left text-n-slate-11"},I(h),1))),128))]),m("tbody",qoe,[(p(!0),E(ue,null,Ae(e.records,(h,g)=>(p(),L(c,{key:h.id,index:g,app:h,onEdit:o.editApp,onDelete:o.openDeletePopup},null,8,["index","app","onEdit","onDelete"]))),128))])])):$("",!0)]),a.showDashboardAppPopup?(p(),L(u,{key:0,show:a.showDashboardAppPopup,mode:a.mode,"selected-app-data":a.selectedApp,onClose:o.toggleDashboardAppPopup},null,8,["show","mode","selected-app-data","onClose"])):$("",!0),S(d,{show:a.showDeleteConfirmationPopup,"onUpdate:show":t[0]||(t[0]=h=>a.showDeleteConfirmationPopup=h),"on-close":o.closeDeletePopup,"on-confirm":o.confirmDeletion,title:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.TITLE"),message:e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.MESSAGE",{appName:a.selectedApp.title}),"confirm-text":e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.CONFIRM_YES"),"reject-text":e.$t("INTEGRATION_SETTINGS.DASHBOARD_APPS.DELETE.CONFIRM_NO")},null,8,["show","on-close","on-confirm","title","message","confirm-text","reject-text"])])}const Qoe=De(zoe,[["render",Zoe]]),Joe={class:"flex flex-col items-start justify-between lg:flex-row lg:items-center p-6 outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow gap-6"},eie={class:"flex items-start lg:items-center justify-start flex-1 m-0 gap-6 flex-col lg:flex-row"},tie={class:"flex h-16 w-16 items-center justify-center flex-shrink-0"},nie=["src"],sie=["src"],aie={class:"mb-1 text-xl font-medium text-n-slate-12"},oie={class:"text-n-slate-11 text-sm leading-6"},iie={class:"flex justify-center items-center mb-0"},lie={key:0},rie={key:0},cie={key:1},uie={key:0},die=["href"],Rp={__name:"Integration",props:{integrationId:{type:[String,Number],required:!0},integrationName:{type:String,default:""},integrationDescription:{type:String,default:""},integrationEnabled:{type:Boolean,default:!1},integrationAction:{type:String,default:""},actionButtonText:{type:String,default:""},deleteConfirmationText:{type:Object,default:()=>({})}},setup(e){const t=e,{t:n}=be(),s=na(),a=Ft(),{replaceInstallationName:o}=Wa(),i=j(null),l=y(()=>s.getters.getCurrentAccountId),r=()=>{i.value&&i.value.open()},c=()=>{i.value&&i.value.close()},u=async()=>{try{await s.dispatch("integrations/deleteIntegration",t.integrationId),ne(n("INTEGRATION_SETTINGS.DELETE.API.SUCCESS_MESSAGE"))}catch{ne(n("INTEGRATION_SETTINGS.WEBHOOK.DELETE.API.ERROR_MESSAGE"))}},d=()=>{c(),u(),a.push({name:"settings_applications"})};return(h,g)=>{const f=W("router-link");return p(),E("div",Joe,[m("div",eie,[m("div",tie,[m("img",{src:`/dashboard/images/integrations/${e.integrationId}.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm block dark:hidden bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,nie),m("img",{src:`/dashboard/images/integrations/${e.integrationId}-dark.png`,class:"max-w-full rounded-md border border-n-weak shadow-sm hidden dark:block bg-n-alpha-3 dark:bg-n-alpha-2"},null,8,sie)]),m("div",null,[m("h3",aie,I(e.integrationName),1),m("p",oie,I(C(o)(e.integrationDescription)),1)])]),m("div",iie,[S(f,{to:C(vt)(`accounts/${l.value}/settings/integrations/`+e.integrationId)},{default:Y(()=>[e.integrationEnabled?(p(),E("div",lie,[e.integrationAction==="disconnect"?(p(),E("div",rie,[S(te,{label:e.actionButtonText||h.$t("INTEGRATION_SETTINGS.WEBHOOK.DELETE.BUTTON_TEXT"),faded:"",ruby:"",onClick:r},null,8,["label"])])):(p(),E("div",cie,[S(te,{faded:"",blue:"",label:C(n)("INTEGRATION_SETTINGS.WEBHOOK.CONFIGURE")},null,8,["label"])]))])):$("",!0)]),_:1},8,["to"]),e.integrationEnabled?$("",!0):(p(),E("div",uie,[We(h.$slots,"action",{},()=>[m("a",{href:e.integrationAction},[S(te,{faded:"",blue:"",label:C(n)("INTEGRATION_SETTINGS.CONNECT.BUTTON_TEXT")},null,8,["label"])],8,die)])]))]),S($n,{ref_key:"dialogRef",ref:i,type:"alert",title:e.deleteConfirmationText.title||C(n)("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.TITLE"),description:e.deleteConfirmationText.message||C(n)("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.MESSAGE"),"confirm-button-label":C(n)("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.YES"),"cancel-button-label":C(n)("INTEGRATION_SETTINGS.WEBHOOK.DELETE.CONFIRM.NO"),onConfirm:d},null,8,["title","description","confirm-button-label","cancel-button-label"])])}}},pie={class:"px-6 py-4 mb-4 outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow"},mie={class:"flex"},hie={class:"ml-3"},fie={class:"mb-1 text-base font-semibold text-n-slate-12"},gie={class:"mt-2 text-sm text-n-slate-11 mb-3"},_ie={key:0,class:"mb-2 mt-1 ml-8"},vie={key:1,class:"inline-flex"},Eie={value:""},bie=["value"],Tie={__name:"SelectChannelWarning",props:{hasConnectedAChannel:{type:Boolean,default:!0}},setup(e){const t=e,n=na(),{t:s}=be(),{formatMessage:a}=sa(),{replaceInstallationName:o}=Wa(),i=j(""),l=j([]),r=y(()=>n.getters["integrations/getUIFlags"]),c=y(()=>t.hasConnectedAChannel?s("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.EXPIRED"):s("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.DESCRIPTION")),u=y(()=>a(o(c.value),!1)),d=async()=>{try{l.value=await n.dispatch("integrations/listAllSlackChannels"),l.value.sort((g,f)=>g.name-f.name)}catch{s("INTEGRATION_SETTINGS.SLACK.FAILED_TO_FETCH_CHANNELS"),l.value=[]}},h=async()=>{try{await n.dispatch("integrations/updateSlack",{referenceId:i.value}),ne(s("INTEGRATION_SETTINGS.SLACK.UPDATE_SUCCESS"))}catch(g){ne(g.message||"INTEGRATION_SETTINGS.SLACK.UPDATE_ERROR")}};return(g,f)=>{const b=Qe("dompurify-html");return p(),E("div",pie,[m("div",mie,[f[1]||(f[1]=m("div",{class:"flex-shrink-0"},[m("div",{class:"i-lucide-bell text-xl text-n-amber-11 mt-1"})],-1)),m("div",hie,[m("p",fie,I(g.$t("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.ATTENTION_REQUIRED")),1),m("div",gie,[re(m("p",null,null,512),[[b,u.value]])])])]),e.hasConnectedAChannel?$("",!0):(p(),E("div",_ie,[l.value.length?(p(),E("div",vie,[re(m("select",{"onUpdate:modelValue":f[0]||(f[0]=A=>i.value=A),class:"h-8 py-1 mr-4 text-xs leading-4 border border-n-amber-10"},[m("option",Eie,I(g.$t("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.OPTION_LABEL")),1),(p(!0),E(ue,null,Ae(l.value,A=>(p(),E("option",{key:A.id,value:A.id}," #"+I(A.name),9,bie))),128))],512),[[Nn,i.value]]),S(te,{teal:"",sm:"","is-loading":r.value.isUpdatingSlack,onClick:h},{default:Y(()=>[xe(I(g.$t("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.UPDATE")),1)]),_:1},8,["is-loading"])])):(p(),L(te,{key:0,amber:"",sm:"","is-loading":r.value.isFetchingSlackChannels,onClick:d},{default:Y(()=>[xe(I(g.$t("INTEGRATION_SETTINGS.SLACK.SELECT_CHANNEL.BUTTON_TEXT")),1)]),_:1},8,["is-loading"]))]))])}}},Sie={class:"flex-1 w-full px-6 py-5 outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow"},Aie={class:"prose-lg max-w-5xl"},yie={class:"text-n-slate-12 tracking-tight"},Iie={class:"text-n-slate-11"},Cie={__name:"SlackIntegrationHelpText",props:{selectedChannelName:{type:String,required:!0}},setup(e){const t=e,{t:n}=be(),{formatMessage:s}=sa(),a=y(()=>s(n("INTEGRATION_SETTINGS.SLACK.HELP_TEXT.BODY",{selectedChannelName:t.selectedChannelName}),!1));return(o,i)=>{const l=Qe("dompurify-html");return p(),E("div",Sie,[m("div",Aie,[m("h5",yie,I(C(n)("INTEGRATION_SETTINGS.SLACK.HELP_TEXT.TITLE")),1),re(m("div",Iie,null,512),[[l,a.value]])])])}}},Nie={key:0,class:"flex flex-col flex-1 overflow-auto gap-5 pt-1 pb-10"},Oie={key:0,class:"flex-1"},Rie={key:1,class:"flex items-center justify-center flex-1"},xie={__name:"Slack",props:{code:{type:String,default:""}},setup(e){const t=e,n=na(),s=Ft(),a=wt(),{t:o}=be(),i=j(!1),l=y(()=>n.getters["integrations/getIntegration"]("slack")),r=y(()=>{const{hooks:A=[]}=l.value||{};return!!A.length}),c=y(()=>{const{hooks:A=[]}=l.value||{},[v]=A;return v||{}}),u=y(()=>c.value.status||!1),d=y(()=>!!c.value.reference_id),h=y(()=>{if(c.value.status){const{settings:{channel_name:A=""}={}}=c.value;return A||"customer-conversations"}return o("INTEGRATION_SETTINGS.SLACK.HELP_TEXT.SELECTED")}),g=y(()=>n.getters["integrations/getUIFlags"]),f=y(()=>l.value.enabled?"disconnect":l.value.action),b=async()=>{await n.dispatch("integrations/get","slack"),t.code&&(await n.dispatch("integrations/connectSlack",t.code),s.replace(a.path)),i.value=!0};return lt(()=>{b()}),(A,v)=>i.value&&!g.value.isCreatingSlack?(p(),E("div",Nie,[S(Rp,{"integration-id":l.value.id,"integration-logo":l.value.logo,"integration-name":l.value.name,"integration-description":l.value.description,"integration-enabled":l.value.enabled,"integration-action":f.value,"action-button-text":A.$t("INTEGRATION_SETTINGS.SLACK.DELETE"),"delete-confirmation-text":{title:A.$t("INTEGRATION_SETTINGS.SLACK.DELETE_CONFIRMATION.TITLE"),message:A.$t("INTEGRATION_SETTINGS.SLACK.DELETE_CONFIRMATION.MESSAGE")}},null,8,["integration-id","integration-logo","integration-name","integration-description","integration-enabled","integration-action","action-button-text","delete-confirmation-text"]),r.value?(p(),E("div",Oie,[u.value?$("",!0):(p(),L(Tie,{key:0,"has-connected-a-channel":d.value},null,8,["has-connected-a-channel"])),S(Cie,{"selected-channel-name":h.value},null,8,["selected-channel-name"])])):$("",!0)])):(p(),E("div",Rie,[S(Ls,{size:"","color-scheme":"primary"})]))}},wie={class:"flex-grow flex-shrink p-4 overflow-auto max-w-6xl mx-auto"},$ie={key:0},Mie={key:1,class:"flex items-center justify-center flex-1"},Lie={__name:"Linear",setup(e){const t=rt(),n=j(!1),s=Hs("integrations/getIntegration","linear"),a=_e("integrations/getUIFlags"),o=y(()=>s.value.enabled?"disconnect":s.value.action),i=async()=>{await t.dispatch("integrations/get","linear"),n.value=!0};return lt(()=>{i()}),(l,r)=>(p(),E("div",wie,[n.value&&!C(a).isCreatingLinear?(p(),E("div",$ie,[S(Rp,{"integration-id":C(s).id,"integration-logo":C(s).logo,"integration-name":C(s).name,"integration-description":C(s).description,"integration-enabled":C(s).enabled,"integration-action":o.value,"delete-confirmation-text":{title:l.$t("INTEGRATION_SETTINGS.LINEAR.DELETE.TITLE"),message:l.$t("INTEGRATION_SETTINGS.LINEAR.DELETE.MESSAGE")}},null,8,["integration-id","integration-logo","integration-name","integration-description","integration-enabled","integration-action","delete-confirmation-text"])])):(p(),E("div",Mie,[S(Ls,{size:"","color-scheme":"primary"})]))]))}};class Die extends Ea{constructor(){super("notion",{accountScoped:!0})}generateAuthorization(){return axios.post(`${this.url}/authorization`)}}const Pie=new Die,kie={class:"flex-grow flex-shrink p-4 overflow-auto mx-auto"},Bie={key:0},Uie={key:1,class:"flex items-center justify-center flex-1"},Fie={__name:"Notion",setup(e){const{t}=be(),n=rt(),s=j(!1),a=Hs("integrations/getIntegration","notion"),o=_e("integrations/getUIFlags"),i=y(()=>a.value.enabled?"disconnect":""),l=async()=>{const c=await Pie.generateAuthorization(),{data:{url:u}}=c;window.location.href=u},r=async()=>{await n.dispatch("integrations/get","notion"),s.value=!0};return lt(()=>{r()}),(c,u)=>(p(),E("div",kie,[s.value&&!C(o).isCreatingNotion?(p(),E("div",Bie,[S(Rp,{"integration-id":C(a).id,"integration-logo":C(a).logo,"integration-name":C(a).name,"integration-description":C(a).description,"integration-enabled":C(a).enabled,"integration-action":i.value,"delete-confirmation-text":{title:C(t)("INTEGRATION_SETTINGS.NOTION.DELETE.TITLE"),message:C(t)("INTEGRATION_SETTINGS.NOTION.DELETE.MESSAGE")}},{action:Y(()=>[S(te,{faded:"",blue:"",label:C(t)("INTEGRATION_SETTINGS.CONNECT.BUTTON_TEXT"),onClick:l},null,8,["label"])]),_:1},8,["integration-id","integration-logo","integration-name","integration-description","integration-enabled","integration-action","delete-confirmation-text"])])):(p(),E("div",Uie,[S(Ls,{size:"","color-scheme":"primary"})]))]))}},Gie={class:"flex-grow flex-shrink p-4 overflow-auto max-w-6xl mx-auto"},Vie={key:0,class:"flex flex-col gap-6"},Hie={key:0,class:"flex items-center justify-center flex-1 outline outline-n-container outline-1 bg-n-alpha-3 rounded-md shadow p-6"},Wie={class:"text-n-ruby-9"},zie={key:1,class:"flex items-center justify-center flex-1"},Yie={__name:"Shopify",props:{error:{type:String,default:""}},setup(e){const t=rt(),n=j(null),s=j(!1),a=j(""),o=j(!1),i=j(""),l=Hs("integrations/getIntegration","shopify"),r=_e("integrations/getUIFlags"),c=y(()=>l.value.enabled?"disconnect":"connect"),u=()=>{a.value="",i.value="",o.value=!1},d=b=>/^[a-zA-Z0-9][a-zA-Z0-9-]*\.myshopify\.com$/.test(b),h=()=>{n.value&&n.value.open()},g=async()=>{try{if(i.value="",!d(a.value)){i.value="Please enter a valid Shopify store URL (e.g., your-store.myshopify.com)";return}o.value=!0;const{data:b}=await OO.connectShopify({shopDomain:a.value});b.redirect_url&&(window.location.href=b.redirect_url)}catch(b){i.value=b.message}finally{o.value=!1}},f=async()=>{await t.dispatch("integrations/get","shopify"),s.value=!0};return lt(()=>{f()}),(b,A)=>(p(),E("div",Gie,[s.value&&!C(r).isCreatingShopify?(p(),E("div",Vie,[S(Rp,{"integration-id":C(l).id,"integration-logo":C(l).logo,"integration-name":C(l).name,"integration-description":C(l).description,"integration-enabled":C(l).enabled,"integration-action":c.value,"delete-confirmation-text":{title:b.$t("INTEGRATION_SETTINGS.SHOPIFY.DELETE.TITLE"),message:b.$t("INTEGRATION_SETTINGS.SHOPIFY.DELETE.MESSAGE")}},{action:Y(()=>[S(te,{teal:"",label:b.$t("INTEGRATION_SETTINGS.CONNECT.BUTTON_TEXT"),onClick:h},null,8,["label"])]),_:1},8,["integration-id","integration-logo","integration-name","integration-description","integration-enabled","integration-action","delete-confirmation-text"]),e.error?(p(),E("div",Hie,[m("p",Wie,I(b.$t("INTEGRATION_SETTINGS.SHOPIFY.ERROR")),1)])):$("",!0),S($n,{ref_key:"dialogRef",ref:n,title:b.$t("INTEGRATION_SETTINGS.SHOPIFY.STORE_URL.TITLE"),"is-loading":o.value,onConfirm:g,onClose:u},{default:Y(()=>[S(Tt,{modelValue:a.value,"onUpdate:modelValue":A[0]||(A[0]=v=>a.value=v),label:b.$t("INTEGRATION_SETTINGS.SHOPIFY.STORE_URL.LABEL"),placeholder:b.$t("INTEGRATION_SETTINGS.SHOPIFY.STORE_URL.PLACEHOLDER"),message:i.value?i.value:b.$t("INTEGRATION_SETTINGS.SHOPIFY.STORE_URL.HELP"),"message-type":i.value?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"])]),_:1},8,["title","is-loading"])])):(p(),E("div",zie,[S(Ls,{size:"","color-scheme":"primary"})]))]))}},jie={routes:[{path:vt("accounts/:accountId/settings/integrations"),component:Rs,props:{},children:[{path:"",name:"settings_applications",component:eoe,meta:{featureFlag:ft.INTEGRATIONS,permissions:["administrator"]}},{path:"dashboard_apps",component:Qoe,name:"settings_integrations_dashboard_apps",meta:{featureFlag:ft.INTEGRATIONS,permissions:["administrator"]}},{path:"webhook",component:Loe,name:"settings_integrations_webhook",meta:{featureFlag:ft.INTEGRATIONS,permissions:["administrator"]}}]},{path:vt("accounts/:accountId/settings/integrations"),component:au,props:e=>{var o;const t=(o=e.params)==null?void 0:o.integration_id;if(["dialogflow"].includes(t))return{};const s=e.name!=="settings_integrations",a=e.name==="settings_integrations_integration"?{name:"settings_integrations"}:"";return{headerTitle:"INTEGRATION_SETTINGS.HEADER",icon:"flash-on",showBackButton:s,backUrl:a}},children:[{path:"slack",name:"settings_integrations_slack",component:xie,meta:{featureFlag:ft.INTEGRATIONS,permissions:["administrator"]},props:e=>({code:e.query.code})},{path:"linear",name:"settings_integrations_linear",component:Lie,meta:{permissions:["administrator"]},props:e=>({code:e.query.code})},{path:"notion",name:"settings_integrations_notion",component:Fie,meta:{permissions:["administrator"]},props:e=>({code:e.query.code})},{path:"shopify",name:"settings_integrations_shopify",component:Yie,meta:{featureFlag:ft.INTEGRATIONS,permissions:["administrator"]},props:e=>({error:e.query.error})},{path:":integration_id",name:"settings_applications_integration",component:Gae,meta:{featureFlag:ft.INTEGRATIONS,permissions:["administrator"]},props:e=>({integrationId:e.params.integration_id})}]}]},Kie=(e="")=>!!e&&!e.includes(" "),hy=e=>{let t="";return e.title.$error?e.title.required?e.title.minLength?e.title.validLabelCharacters||(t="LABEL_MGMT.FORM.NAME.VALID_ERROR"):t="LABEL_MGMT.FORM.NAME.MINIMUM_LENGTH_ERROR":t="LABEL_MGMT.FORM.NAME.REQUIRED_ERROR":t="",t},fy={title:{required:Ye,minLength:en(2),validLabelCharacters:Kie},description:{},color:{required:Ye},showOnSidebar:{}},Xie=()=>{const e="0123456789ABCDEF";let t="#";for(let n=0;n<6;n+=1)t+=e[Math.floor(Math.random()*16)];return t},qie={components:{NextButton:te},props:{prefillTitle:{type:String,default:""}},emits:["close"],setup(){return{v$:bt()}},data(){return{color:"#000",description:"",title:"",showOnSidebar:!0}},validations:fy,computed:{...mt({uiFlags:"labels/getUIFlags"}),labelTitleErrorMessage(){const e=hy(this.v$);return this.$t(e)}},mounted(){this.color=Xie(),this.title=this.prefillTitle.toLowerCase()},methods:{onClose(){this.$emit("close")},async addLabel(){try{await this.$store.dispatch("labels/create",{color:this.color,description:this.description,title:this.title.toLowerCase(),show_on_sidebar:this.showOnSidebar}),ne(this.$t("LABEL_MGMT.ADD.API.SUCCESS_MESSAGE")),this.onClose()}catch(e){const t=e.message||this.$t("LABEL_MGMT.ADD.API.ERROR_MESSAGE");ne(t)}}}},Zie={class:"flex flex-col h-auto overflow-auto"},Qie={class:"w-full"},Jie={class:"flex items-center w-full gap-2"},ele={for:"conversation_creation"},tle={class:"flex items-center justify-end w-full gap-2 px-0 py-2"};function nle(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("woot-input"),r=W("woot-color-picker"),c=W("NextButton");return p(),E("div",Zie,[S(i,{"header-title":e.$t("LABEL_MGMT.ADD.TITLE"),"header-content":e.$t("LABEL_MGMT.ADD.DESC")},null,8,["header-title","header-content"]),m("form",{class:"flex flex-wrap mx-0",onSubmit:t[4]||(t[4]=Ve((...u)=>o.addLabel&&o.addLabel(...u),["prevent"]))},[S(l,{modelValue:a.title,"onUpdate:modelValue":t[0]||(t[0]=u=>a.title=u),class:ae([{error:s.v$.title.$error},"w-full label-name--input"]),label:e.$t("LABEL_MGMT.FORM.NAME.LABEL"),placeholder:e.$t("LABEL_MGMT.FORM.NAME.PLACEHOLDER"),error:o.labelTitleErrorMessage,"data-testid":"label-title",onInput:s.v$.title.$touch,onBlur:s.v$.title.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),S(l,{modelValue:a.description,"onUpdate:modelValue":t[1]||(t[1]=u=>a.description=u),class:ae([{error:s.v$.description.$error},"w-full"]),label:e.$t("LABEL_MGMT.FORM.DESCRIPTION.LABEL"),placeholder:e.$t("LABEL_MGMT.FORM.DESCRIPTION.PLACEHOLDER"),"data-testid":"label-description",onInput:s.v$.description.$touch,onBlur:s.v$.description.$touch},null,8,["modelValue","class","label","placeholder","onInput","onBlur"]),m("div",Qie,[m("label",null,[xe(I(e.$t("LABEL_MGMT.FORM.COLOR.LABEL"))+" ",1),S(r,{modelValue:a.color,"onUpdate:modelValue":t[2]||(t[2]=u=>a.color=u)},null,8,["modelValue"])])]),m("div",Jie,[re(m("input",{"onUpdate:modelValue":t[3]||(t[3]=u=>a.showOnSidebar=u),type:"checkbox",value:!0},null,512),[[dn,a.showOnSidebar]]),m("label",ele,I(e.$t("LABEL_MGMT.FORM.SHOW_ON_SIDEBAR.LABEL")),1)]),m("div",tle,[S(c,{faded:"",slate:"",type:"reset",label:e.$t("LABEL_MGMT.FORM.CANCEL"),onClick:Ve(o.onClose,["prevent"])},null,8,["label","onClick"]),S(c,{type:"submit","data-testid":"label-submit",label:e.$t("LABEL_MGMT.FORM.CREATE"),disabled:s.v$.title.$invalid||e.uiFlags.isCreating,"is-loading":e.uiFlags.isCreating},null,8,["label","disabled","is-loading"])])],32)])}const gy=De(qie,[["render",nle],["__scopeId","data-v-5e6cb446"]]),sle={components:{NextButton:te},props:{selectedResponse:{type:Object,default:()=>{}}},emits:["close"],setup(){return{v$:bt()}},data(){return{title:"",description:"",showOnSidebar:!0,color:""}},validations:fy,computed:{...mt({uiFlags:"labels/getUIFlags"}),pageTitle(){return`${this.$t("LABEL_MGMT.EDIT.TITLE")} - ${this.selectedResponse.title}`},labelTitleErrorMessage(){const e=hy(this.v$);return this.$t(e)}},mounted(){this.setFormValues()},methods:{onClose(){this.$emit("close")},setFormValues(){this.title=this.selectedResponse.title,this.description=this.selectedResponse.description,this.showOnSidebar=this.selectedResponse.show_on_sidebar,this.color=this.selectedResponse.color},editLabel(){this.$store.dispatch("labels/update",{id:this.selectedResponse.id,color:this.color,description:this.description,title:this.title.toLowerCase(),show_on_sidebar:this.showOnSidebar}).then(()=>{ne(this.$t("LABEL_MGMT.EDIT.API.SUCCESS_MESSAGE")),setTimeout(()=>this.onClose(),10)}).catch(()=>{ne(this.$t("LABEL_MGMT.EDIT.API.ERROR_MESSAGE"))})}}},ale={class:"flex flex-col h-auto overflow-auto"},ole={class:"w-full"},ile={class:"flex items-center w-full gap-2"},lle={for:"conversation_creation"},rle={class:"flex items-center justify-end w-full gap-2 px-0 py-2"};function cle(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("woot-input"),r=W("woot-color-picker"),c=W("NextButton");return p(),E("div",ale,[S(i,{"header-title":o.pageTitle},null,8,["header-title"]),m("form",{class:"flex flex-wrap mx-0",onSubmit:t[4]||(t[4]=Ve((...u)=>o.editLabel&&o.editLabel(...u),["prevent"]))},[S(l,{modelValue:a.title,"onUpdate:modelValue":t[0]||(t[0]=u=>a.title=u),class:ae([{error:s.v$.title.$error},"w-full label-name--input"]),label:e.$t("LABEL_MGMT.FORM.NAME.LABEL"),placeholder:e.$t("LABEL_MGMT.FORM.NAME.PLACEHOLDER"),error:o.labelTitleErrorMessage,onInput:s.v$.title.$touch,onBlur:s.v$.title.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),S(l,{modelValue:a.description,"onUpdate:modelValue":t[1]||(t[1]=u=>a.description=u),class:ae([{error:s.v$.description.$error},"w-full"]),label:e.$t("LABEL_MGMT.FORM.DESCRIPTION.LABEL"),placeholder:e.$t("LABEL_MGMT.FORM.DESCRIPTION.PLACEHOLDER"),onInput:s.v$.description.$touch,onBlur:s.v$.description.$touch},null,8,["modelValue","class","label","placeholder","onInput","onBlur"]),m("div",ole,[m("label",null,[xe(I(e.$t("LABEL_MGMT.FORM.COLOR.LABEL"))+" ",1),S(r,{modelValue:a.color,"onUpdate:modelValue":t[2]||(t[2]=u=>a.color=u)},null,8,["modelValue"])])]),m("div",ile,[re(m("input",{"onUpdate:modelValue":t[3]||(t[3]=u=>a.showOnSidebar=u),type:"checkbox",value:!0},null,512),[[dn,a.showOnSidebar]]),m("label",lle,I(e.$t("LABEL_MGMT.FORM.SHOW_ON_SIDEBAR.LABEL")),1)]),m("div",rle,[S(c,{faded:"",slate:"",type:"reset",label:e.$t("LABEL_MGMT.FORM.CANCEL"),onClick:Ve(o.onClose,["prevent"])},null,8,["label","onClick"]),S(c,{type:"submit",label:e.$t("LABEL_MGMT.FORM.EDIT"),disabled:s.v$.title.$invalid||e.uiFlags.isUpdating,"is-loading":e.uiFlags.isUpdating},null,8,["label","disabled","is-loading"])])],32)])}const ule=De(sle,[["render",cle],["__scopeId","data-v-c9b7cbf5"]]),dle={class:"min-w-full overflow-x-auto divide-y divide-n-weak"},ple={class:"flex-1 divide-y divide-n-weak text-n-slate-12"},mle={class:"py-4 ltr:pr-4 rtl:pl-4"},hle={class:"mb-1 font-medium break-words text-n-slate-12"},fle={class:"py-4 ltr:pr-4 rtl:pl-4"},gle={class:"py-4 leading-6 ltr:pr-4 rtl:pl-4"},_le={class:"flex items-center"},vle={class:"py-4 min-w-xs"},Ele={class:"flex gap-1 justify-end"},ble={__name:"Index",setup(e){const t=pn(),n=rt(),{t:s}=be(),a=j({}),o=j(!1),i=j(!1),l=j(!1),r=j({}),c=y(()=>t["labels/getLabels"].value),u=y(()=>t["labels/getUIFlags"].value),d=y(()=>` ${r.value.title}?`),h=()=>{o.value=!0},g=()=>{o.value=!1},f=R=>{i.value=!0,r.value=R},b=()=>{i.value=!1},A=R=>{l.value=!0,r.value=R},v=()=>{l.value=!1},T=async R=>{try{await n.dispatch("labels/delete",R),ne(s("LABEL_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch(O){const x=(O==null?void 0:O.message)||s("LABEL_MGMT.DELETE.API.ERROR_MESSAGE");ne(x)}finally{a.value[r.value.id]=!1}},_=()=>{a.value[r.value.id]=!0,v(),T(r.value.id)},N=y(()=>[s("LABEL_MGMT.LIST.TABLE_HEADER.NAME"),s("LABEL_MGMT.LIST.TABLE_HEADER.DESCRIPTION"),s("LABEL_MGMT.LIST.TABLE_HEADER.COLOR")]);return uS(()=>{n.dispatch("labels/get")}),(R,O)=>{const x=W("woot-modal"),w=W("woot-delete-modal"),D=Qe("tooltip");return p(),L(Es,{"is-loading":u.value.isFetching,"loading-message":R.$t("LABEL_MGMT.LOADING"),"no-records-found":!c.value.length,"no-records-message":R.$t("LABEL_MGMT.LIST.404")},{header:Y(()=>[S(hs,{title:R.$t("LABEL_MGMT.HEADER"),description:R.$t("LABEL_MGMT.DESCRIPTION"),"link-text":R.$t("LABEL_MGMT.LEARN_MORE"),"feature-name":"labels"},{actions:Y(()=>[S(te,{icon:"i-lucide-circle-plus",label:R.$t("LABEL_MGMT.HEADER_BTN_TXT"),onClick:h},null,8,["label"])]),_:1},8,["title","description","link-text"])]),body:Y(()=>[m("table",dle,[m("thead",null,[(p(!0),E(ue,null,Ae(N.value,M=>(p(),E("th",{key:M,class:"py-4 font-semibold text-left ltr:pr-4 rtl:pl-4 text-n-slate-11"},I(M),1))),128))]),m("tbody",ple,[(p(!0),E(ue,null,Ae(c.value,(M,P)=>(p(),E("tr",{key:M.title},[m("td",mle,[m("span",hle,I(M.title),1)]),m("td",fle,I(M.description),1),m("td",gle,[m("div",_le,[m("span",{class:"w-4 h-4 mr-1 border border-solid rounded rtl:mr-0 rtl:ml-1 border-n-weak",style:Zt({backgroundColor:M.color})},null,4),xe(" "+I(M.color),1)])]),m("td",vle,[m("div",Ele,[re(S(te,{icon:"i-lucide-pen",slate:"",xs:"",faded:"","is-loading":a.value[M.id],onClick:U=>f(M)},null,8,["is-loading","onClick"]),[[D,R.$t("LABEL_MGMT.FORM.EDIT"),void 0,{top:!0}]]),re(S(te,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":a.value[M.id],onClick:U=>A(M,P)},null,8,["is-loading","onClick"]),[[D,R.$t("LABEL_MGMT.FORM.DELETE"),void 0,{top:!0}]])])])]))),128))])])]),default:Y(()=>[S(x,{show:o.value,"onUpdate:show":O[0]||(O[0]=M=>o.value=M),"on-close":g},{default:Y(()=>[S(gy,{onClose:g})]),_:1},8,["show"]),S(x,{show:i.value,"onUpdate:show":O[1]||(O[1]=M=>i.value=M),"on-close":b},{default:Y(()=>[S(ule,{"selected-response":r.value,onClose:b},null,8,["selected-response"])]),_:1},8,["show"]),S(w,{show:l.value,"onUpdate:show":O[2]||(O[2]=M=>l.value=M),"on-close":v,"on-confirm":_,title:R.$t("LABEL_MGMT.DELETE.CONFIRM.TITLE"),message:R.$t("LABEL_MGMT.DELETE.CONFIRM.MESSAGE"),"message-value":d.value,"confirm-text":R.$t("LABEL_MGMT.DELETE.CONFIRM.YES"),"reject-text":R.$t("LABEL_MGMT.DELETE.CONFIRM.NO")},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},Tle={routes:[{path:vt("accounts/:accountId/settings/labels"),component:Rs,children:[{path:"",name:"labels_wrapper",meta:{permissions:["administrator"]},redirect:e=>({name:"labels_list",params:e.params})},{path:"list",name:"labels_list",meta:{featureFlag:ft.LABELS,permissions:["administrator"]},component:ble}]}]},Sle={class:"py-4 ltr:pr-4 rtl:pl-4 truncate"},Ale={class:"py-4 ltr:pr-4 rtl:pl-4"},yle={key:0,class:"flex items-center"},Ile={class:"mx-2"},Cle={key:1},Nle={class:"py-4 ltr:pr-4 rtl:pl-4"},Ole={key:0,class:"flex items-center"},Rle={class:"mx-2"},xle={key:1},wle={class:"py-4 ltr:pr-4 rtl:pl-4"},$le={class:"py-4 flex justify-end gap-1"},Mle={__name:"MacrosTableRow",props:{macro:{type:Object,required:!0}},emits:["delete"],setup(e){const t=e,{t:n}=be(),s=y(()=>{const i=t.macro.created_by;return i.available_name??i.email??""}),a=y(()=>{const i=t.macro.updated_by;return i.available_name??i.email??""}),o=y(()=>{const i=t.macro.visibility==="global"?"MACROS.EDITOR.VISIBILITY.GLOBAL.LABEL":"MACROS.EDITOR.VISIBILITY.PERSONAL.LABEL";return n(i)});return(i,l)=>{const r=W("router-link"),c=Qe("tooltip");return p(),E("tr",null,[m("td",Sle,I(e.macro.name),1),m("td",Ale,[e.macro.created_by?(p(),E("div",yle,[S(kt,{name:s.value,size:24,"rounded-full":""},null,8,["name"]),m("span",Ile,I(s.value),1)])):(p(),E("div",Cle,"--"))]),m("td",Nle,[e.macro.updated_by?(p(),E("div",Ole,[S(kt,{name:a.value,size:24,"rounded-full":""},null,8,["name"]),m("span",Rle,I(a.value),1)])):(p(),E("div",xle,"--"))]),m("td",wle,I(o.value),1),m("td",$le,[S(r,{to:{name:"macros_edit",params:{macroId:e.macro.id}}},{default:Y(()=>[re(S(te,{icon:"i-lucide-pen",slate:"",xs:"",faded:""},null,512),[[c,i.$t("MACROS.EDIT.TOOLTIP"),void 0,{top:!0}]])]),_:1},8,["to"]),re(S(te,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"",onClick:l[0]||(l[0]=u=>i.$emit("delete"))},null,512),[[c,i.$t("MACROS.DELETE.TOOLTIP"),void 0,{top:!0}]])])])}}},Lle={class:"min-w-full divide-y divide-n-weak"},Dle={class:"divide-y divide-n-weak text-n-slate-11"},Ple={__name:"Index",setup(e){const t=pn(),n=rt(),{t:s}=be(),a=j(!1),o=j({}),i=y(()=>t["macros/getMacros"].value),l=y(()=>t["macros/getUIFlags"].value),r=y(()=>` ${o.value.name}?`);lt(()=>{n.dispatch("macros/get")});const c=async f=>{try{await n.dispatch("macros/delete",f),ne(s("MACROS.DELETE.API.SUCCESS_MESSAGE"))}catch{ne(s("MACROS.DELETE.API.ERROR_MESSAGE"))}},u=f=>{a.value=!0,o.value=f},d=()=>{a.value=!1},h=()=>{d(),c(o.value.id)},g=y(()=>[s("MACROS.LIST.TABLE_HEADER.NAME"),s("MACROS.LIST.TABLE_HEADER.CREATED BY"),s("MACROS.LIST.TABLE_HEADER.LAST_UPDATED_BY"),s("MACROS.LIST.TABLE_HEADER.VISIBILITY")]);return(f,b)=>{const A=W("router-link"),v=W("woot-delete-modal");return p(),L(Es,{"no-records-message":f.$t("MACROS.LIST.404"),"no-records-found":!i.value.length,"is-loading":l.value.isFetching,"loading-message":f.$t("MACROS.LOADING"),"feature-name":"macros"},{header:Y(()=>[S(hs,{title:f.$t("MACROS.HEADER"),description:f.$t("MACROS.DESCRIPTION"),"link-text":f.$t("MACROS.LEARN_MORE"),"feature-name":"macros"},{actions:Y(()=>[S(A,{to:{name:"macros_new"}},{default:Y(()=>[S(te,{icon:"i-lucide-circle-plus",label:f.$t("MACROS.HEADER_BTN_TXT")},null,8,["label"])]),_:1})]),_:1},8,["title","description","link-text"])]),body:Y(()=>[m("table",Lle,[m("thead",null,[(p(!0),E(ue,null,Ae(g.value,T=>(p(),E("th",{key:T,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-n-slate-11"},I(T),1))),128))]),m("tbody",Dle,[(p(!0),E(ue,null,Ae(i.value,(T,_)=>(p(),L(Mle,{key:_,macro:T,onDelete:N=>u(T)},null,8,["macro","onDelete"]))),128))])]),S(v,{show:a.value,"onUpdate:show":b[0]||(b[0]=T=>a.value=T),"on-close":d,"on-confirm":h,title:f.$t("LABEL_MGMT.DELETE.CONFIRM.TITLE"),message:f.$t("MACROS.DELETE.CONFIRM.MESSAGE"),"message-value":r.value,"confirm-text":f.$t("MACROS.DELETE.CONFIRM.YES"),"reject-text":f.$t("MACROS.DELETE.CONFIRM.NO")},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["no-records-message","no-records-found","is-loading","loading-message"])}}},_y=()=>{const{t:e}=be(),t=pn(),n=y(()=>t["labels/getLabels"].value),s=y(()=>t["teams/getTeams"].value),a=y(()=>t["agents/getAgents"].value);return{getMacroDropdownValues:i=>{switch(i){case"assign_team":case"send_email_to_team":return s.value;case"assign_agent":return[{id:"self",name:"Self"},...a.value];case"add_label":case"remove_label":return n.value.map(l=>({id:l.title,name:l.title}));case"change_priority":return cA.map(l=>({id:l.id,name:e(`MACROS.PRIORITY_TYPES.${l.i18nKey}`)}));default:return[]}}}},kle={class:"relative flex items-start w-full min-w-0 basis-full"},Ble={__name:"MacroNode",props:jt({singleNode:{type:Boolean,default:!1},errorKey:{type:String,default:""},fileName:{type:String,default:""}},{modelValue:{type:Object,required:!0},modelModifiers:{}}),emits:jt(["resetAction","deleteNode"],["update:modelValue"]),setup(e){const t=e,{t:n}=be(),s=Ro("macroActionTypes"),{getMacroDropdownValues:a}=_y(),o=Xt(e,"modelValue"),i=y(()=>t.errorKey?n(`MACROS.ERRORS.${t.errorKey}`):""),l=y(()=>o.value.action_name==="send_email_to_team"||o.value.action_name==="send_message"?!1:!!s.value.find(u=>u.key===o.value.action_name).inputType),r=()=>a(o.value.action_name);return(c,u)=>{const d=Qe("tooltip");return p(),E("div",kle,[e.singleNode?$("",!0):(p(),L(te,{key:0,ghost:"",sm:"",slate:"",icon:"i-lucide-menu",class:"absolute cursor-move ltr:-left-10 rtl:-right-10 ltr:mr-2 rtl:ml-2 macros__node-drag-handle"})),m("div",{class:ae(["flex-grow p-2 ltr:mr-2 rtl:ml-2 rounded-md shadow-sm outline outline-1 outline-n-weak",e.errorKey?"animate-shake bg-n-ruby-8/20 outline-n-ruby-5 dark:outline-n-ruby-5":"bg-n-background dark:bg-n-solid-1"])},[S(l_,{modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=h=>o.value=h),"action-types":C(s),"dropdown-values":r(),"show-action-input":l.value,"show-remove-button":!1,"is-macro":"","error-message":i.value,"initial-file-name":e.fileName,onResetAction:u[1]||(u[1]=h=>c.$emit("resetAction"))},null,8,["modelValue","action-types","dropdown-values","show-action-input","error-message","initial-file-name"])],2),e.singleNode?$("",!0):re((p(),L(te,{key:1,icon:"i-lucide-trash-2",sm:"",faded:"",ruby:"",class:"flex-shrink-0",onClick:u[2]||(u[2]=h=>c.$emit("deleteNode"))},null,512)),[[d,c.$t("MACROS.EDITOR.DELETE_BTN_TOOLTIP")]])])}}},vy=[{key:"assign_team",label:"ASSIGN_TEAM",inputType:"search_select"},{key:"assign_agent",label:"ASSIGN_AGENT",inputType:"search_select"},{key:"add_label",label:"ADD_LABEL",inputType:"multi_select"},{key:"remove_label",label:"REMOVE_LABEL",inputType:"multi_select"},{key:"remove_assigned_team",label:"REMOVE_ASSIGNED_TEAM",inputType:null},{key:"send_email_transcript",label:"SEND_EMAIL_TRANSCRIPT",inputType:"email"},{key:"mute_conversation",label:"MUTE_CONVERSATION",inputType:null},{key:"snooze_conversation",label:"SNOOZE_CONVERSATION",inputType:null},{key:"resolve_conversation",label:"RESOLVE_CONVERSATION",inputType:null},{key:"send_attachment",label:"SEND_ATTACHMENT",inputType:"attachment"},{key:"send_message",label:"SEND_MESSAGE",inputType:"textarea"},{key:"add_private_note",label:"ADD_PRIVATE_NOTE",inputType:"textarea"},{key:"change_priority",label:"CHANGE_PRIORITY",inputType:"search_select"},{key:"send_webhook_event",label:"SEND_WEBHOOK_EVENT",inputType:"url"}],Ule=e=>vy.find(t=>t.key===e).label,Fle=(e,t)=>t.map(n=>{const s=e.find(a=>a.id===n);return s?s.name:""}).join(", "),vb=(e,t)=>t.map(n=>{const s=e.find(a=>a.title===n);return s?s.title:""}).join(", "),Gle=(e,t)=>t.map(n=>{const s=e.find(a=>a.id===n);return s?s.name:""}).join(", "),Vle=(e,t,n)=>{if(!e||!n)return"";if(t==="send_attachment"){const s=n.find(a=>a.blob_id===e);if(s)return s.filename.toString()}return""},Hle={components:{Draggable:cu,MacroNode:Ble,NextButton:te},props:{errors:{type:Object,default:()=>({})},modelValue:{type:Array,default:()=>[]},files:{type:Array,default:()=>[]}},emits:["update:modelValue","resetAction","deleteNode","addNewNode"],computed:{actionData:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{fileName(){return Vle(...arguments)}}},Wle={class:"macros__nodes"},zle={class:"macro__node"},Yle={class:"bg-n-solid-blue text-n-blue-text py-1 px-1.5 leading-none text-sm rounded-md"},jle={class:"macro__node"},Kle={class:"macro__node"},Xle={class:"bg-n-solid-blue text-n-blue-text py-1 px-1.5 leading-none text-sm rounded-md"};function qle(e,t,n,s,a,o){const i=W("MacroNode"),l=W("Draggable"),r=W("NextButton");return p(),E("div",Wle,[m("div",zle,[m("div",null,[m("span",Yle,I(e.$t("MACROS.EDITOR.START_FLOW")),1)])]),S(l,{list:o.actionData,animation:"200","item-key":"id","ghost-class":"ghost",tag:"div",class:"macros__nodes-draggable",handle:".macros__node-drag-handle"},{item:Y(({index:c})=>[(p(),E("div",{key:c,class:"macro__node"},[S(i,{modelValue:o.actionData[c],"onUpdate:modelValue":u=>o.actionData[c]=u,class:"macros__node-action",type:"add",index:c,"error-key":n.errors[`action_${c}`],"file-name":o.fileName(o.actionData[c].action_params[0],o.actionData[c].action_name,n.files),"single-node":o.actionData.length===1,onResetAction:u=>e.$emit("resetAction",c),onDeleteNode:u=>e.$emit("deleteNode",c)},null,8,["modelValue","onUpdate:modelValue","index","error-key","file-name","single-node","onResetAction","onDeleteNode"])]))]),_:1},8,["list"]),m("div",jle,[m("div",null,[S(r,{title:e.$t("MACROS.EDITOR.ADD_BTN_TOOLTIP"),class:"shadow-sm",solid:"",teal:"",icon:"i-lucide-plus-circle",onClick:t[0]||(t[0]=c=>e.$emit("addNewNode"))},{default:Y(()=>[xe(I(e.$t("MACROS.EDITOR.ADD_BTN_TOOLTIP")),1)]),_:1},8,["title"])])]),m("div",Kle,[m("div",null,[m("span",Xle,I(e.$t("MACROS.EDITOR.END_FLOW")),1)])])])}const Zle=De(Hle,[["render",qle],["__scopeId","data-v-a47d35a7"]]),Qle={components:{NextButton:te},inject:["v$"],props:{macroName:{type:String,default:""},macroVisibility:{type:String,default:"global"}},emits:["update:name","update:visibility","submit"],methods:{isActive(e){return this.macroVisibility===e?"bg-n-blue-2 dark:bg-n-blue-1 border-n-blue-3 dark:border-n-blue-4":"bg-white dark:bg-n-solid-2 border-n-weak dark:border-n-strong"},onUpdateName(e){this.$emit("update:name",e)},onUpdateVisibility(e){this.$emit("update:visibility",e)}}},Jle={class:"p-4 bg-n-solid-2 border border-n-weak rounded-lg shadow-sm h-full flex flex-col"},ere={class:"mt-2"},tre={class:"block m-0 text-sm font-medium leading-[1.8] text-n-slate-12"},nre={class:"grid grid-cols-1 lg:grid-cols-2 gap-3"},sre={class:"block m-0 text-sm font-medium leading-[1.8] text-n-slate-12"},are={class:"text-xs text-n-slate-11"},ore={class:"block m-0 text-sm font-medium leading-[1.8] text-n-slate-12"},ire={class:"text-xs text-n-slate-11"},lre={class:"mt-2 flex items-start p-2 bg-n-slate-3 dark:bg-n-solid-3 rounded-md"},rre={class:"ml-2 rtl:ml-0 rtl:mr-2 mb-0 text-n-slate-11"},cre={class:"mt-auto w-full"};function ure(e,t,n,s,a,o){const i=W("woot-input"),l=W("fluent-icon"),r=W("NextButton");return p(),E("div",Jle,[m("div",null,[S(i,{"model-value":n.macroName,label:e.$t("MACROS.ADD.FORM.NAME.LABEL"),placeholder:e.$t("MACROS.ADD.FORM.NAME.PLACEHOLDER"),error:o.v$.macro.name.$error?e.$t("MACROS.ADD.FORM.NAME.ERROR"):null,class:ae({error:o.v$.macro.name.$error}),"onUpdate:modelValue":o.onUpdateName},null,8,["model-value","label","placeholder","error","class","onUpdate:modelValue"])]),m("div",ere,[m("p",tre,I(e.$t("MACROS.EDITOR.VISIBILITY.LABEL")),1),m("div",nre,[m("button",{class:ae(["p-2 relative rounded-md border border-solid text-left cursor-default",o.isActive("global")]),onClick:t[0]||(t[0]=c=>o.onUpdateVisibility("global"))},[n.macroVisibility==="global"?(p(),L(l,{key:0,icon:"checkmark-circle",type:"solid",class:"absolute text-n-brand top-2 right-2"})):$("",!0),m("p",sre,I(e.$t("MACROS.EDITOR.VISIBILITY.GLOBAL.LABEL")),1),m("p",are,I(e.$t("MACROS.EDITOR.VISIBILITY.GLOBAL.DESCRIPTION")),1)],2),m("button",{class:ae(["p-2 relative rounded-md border border-solid text-left cursor-default",o.isActive("personal")]),onClick:t[1]||(t[1]=c=>o.onUpdateVisibility("personal"))},[n.macroVisibility==="personal"?(p(),L(l,{key:0,icon:"checkmark-circle",type:"solid",class:"absolute text-n-brand top-2 right-2"})):$("",!0),m("p",ore,I(e.$t("MACROS.EDITOR.VISIBILITY.PERSONAL.LABEL")),1),m("p",ire,I(e.$t("MACROS.EDITOR.VISIBILITY.PERSONAL.DESCRIPTION")),1)],2)]),m("div",lre,[S(l,{icon:"info",size:"16",class:"flex-shrink-0 mt-0.5"}),m("p",rre,I(e.$t("MACROS.ORDER_INFO")),1)])]),m("div",cre,[S(r,{blue:"",solid:"",label:e.$t("MACROS.HEADER_BTN_TXT_SAVE"),class:"w-full",onClick:t[2]||(t[2]=c=>e.$emit("submit"))},null,8,["label"])])])}const dre=De(Qle,[["render",ure],["__scopeId","data-v-7c88e010"]]),pre={components:{MacroNodes:Zle,MacroProperties:dre},props:{macroData:{type:Object,default:()=>({})}},emits:["submit"],setup(){const e=bt();return Hn("v$",e),{v$:e}},data(){return{macro:this.macroData,errors:{}}},computed:{files(){return this.macro&&this.macro.files?this.macro.files:[]}},watch:{$route:{handler(){this.resetValidation()},immediate:!0},macroData:{handler(){this.macro=this.macroData},immediate:!0}},validations:{macro:{name:{required:Ye},visibility:{required:Ye}}},methods:{removeObjectProperty(e,t){return Object.fromEntries(Object.entries(e).filter(([n])=>n!==t))},updateName(e){this.macro.name=e},updateVisibility(e){this.macro.visibility=e},appendNode(){this.macro.actions.push({action_name:"assign_team",action_params:[]})},deleteNode(e){this.errors=this.removeObjectProperty(this.errors,`action_${e}`),this.macro.actions.splice(e,1)},submit(){this.errors=SA(this.macro.actions),Object.keys(this.errors).length===0&&(this.v$.$touch(),!this.v$.$invalid&&this.$emit("submit",this.macro))},resetNode(e){this.errors=this.removeObjectProperty(this.errors,`action_${e}`),this.macro.actions[e].action_params=[]},resetValidation(){var e,t;this.errors={},(t=(e=this.v$)==null?void 0:e.$reset)==null||t.call(e)}}},mre={class:"flex flex-col w-full h-auto md:flex-row md:h-full"},hre={class:"flex-1 w-full h-full max-h-full px-12 py-4 overflow-y-auto md:w-auto macro-gradient-radial dark:macro-dark-gradient-radial macro-gradient-radial-size"},fre={class:"w-full md:w-1/3 pb-4"};function gre(e,t,n,s,a,o){const i=W("MacroNodes"),l=W("MacroProperties");return p(),E("div",mre,[m("div",hre,[S(i,{modelValue:a.macro.actions,"onUpdate:modelValue":t[0]||(t[0]=r=>a.macro.actions=r),files:o.files,errors:a.errors,onAddNewNode:o.appendNode,onDeleteNode:o.deleteNode,onResetAction:o.resetNode},null,8,["modelValue","files","errors","onAddNewNode","onDeleteNode","onResetAction"])]),m("div",fre,[S(l,{"macro-name":a.macro.name,"macro-visibility":a.macro.visibility,"onUpdate:name":o.updateName,"onUpdate:visibility":o.updateVisibility,onSubmit:o.submit},null,8,["macro-name","macro-visibility","onUpdate:name","onUpdate:visibility","onSubmit"])])])}const _re=De(pre,[["render",gre],["__scopeId","data-v-b13e6dc3"]]),vre={class:"flex flex-col flex-1 h-full overflow-auto"},Eb={__name:"MacroEditor",setup(e){const t=rt(),n=pn(),s=wt(),a=Ft(),{t:o}=be(),{getMacroDropdownValues:i}=_y(),l=j(null),r=j("CREATE"),c=y(()=>vy.map(T=>({...T,label:o(`MACROS.ACTIONS.${T.label}`)})));Hn("macroActionTypes",c);const u=y(()=>n["macros/getUIFlags"].value),d=y(()=>s.params.macroId),h=()=>{t.dispatch("agents/get"),t.dispatch("teams/get"),t.dispatch("labels/get")},g=T=>{const _=T.actions.map(N=>{let R=[];if(N.action_params.length){const O=c.value.find(x=>x.key===N.action_name).inputType;O==="multi_select"||O==="search_select"?R=i(N.action_name).filter(x=>[...N.action_params].includes(x.id)):O==="team_message"?R={team_ids:i(N.action_name).filter(x=>[...N.action_params[0].team_ids].includes(x.id)),message:N.action_params[0].message}:R=[...N.action_params]}return{...N,action_params:R}});return{...T,actions:_}},f=async()=>{await t.dispatch("macros/getSingleMacro",d.value);const T=t.getters["macros/getMacro"](d.value);l.value=g(T)},b=()=>{r.value="EDIT",f()},A=()=>{r.value="CREATE",l.value={name:"",actions:[{action_name:"assign_team",action_params:[]}],visibility:"global"}};it(()=>s,()=>{h(),s.params.macroId?b():A()},{immediate:!0,deep:!0});const v=async T=>{try{const _=r.value==="EDIT"?"macros/update":"macros/create",N=r.value==="EDIT"?o("MACROS.EDIT.API.SUCCESS_MESSAGE"):o("MACROS.ADD.API.SUCCESS_MESSAGE");let R=JSON.parse(JSON.stringify(T));R.actions=uA(R.actions),await t.dispatch(_,R),ne(N),a.push({name:"macros_wrapper"})}catch{ne(o("MACROS.ERROR"))}};return(T,_)=>{const N=W("woot-loading-state");return p(),E("div",vre,[u.value.isFetchingItem?(p(),L(N,{key:0,message:C(o)("MACROS.EDITOR.LOADING")},null,8,["message"])):$("",!0),l.value&&!u.value.isFetchingItem?(p(),L(_re,{key:1,"macro-data":l.value,"onUpdate:macroData":_[0]||(_[0]=R=>l.value=R),onSubmit:v},null,8,["macro-data"])):$("",!0)])}}},Ere={routes:[{path:vt("accounts/:accountId/settings/macros"),component:Rs,children:[{path:"",name:"macros_wrapper",component:Ple,meta:{featureFlag:ft.MACROS,permissions:[...qn,...Ms]}}]},{path:vt("accounts/:accountId/settings/macros"),component:au,props:()=>({headerTitle:"MACROS.HEADER",icon:"flash-settings",showBackButton:!0}),children:[{path:":macroId/edit",name:"macros_edit",component:Eb,meta:{featureFlag:ft.MACROS,permissions:[...qn,...Ms]}},{path:"new",name:"macros_new",component:Eb,meta:{featureFlag:ft.MACROS,permissions:[...qn,...Ms]}}]}]},bre={},Tre={class:"reports--wrapper overflow-auto bg-n-background w-full px-6"},Sre={class:"max-w-[60rem] mx-auto pb-12"};function Are(e,t){const n=W("router-view");return p(),E("div",Tre,[m("div",Sre,[S(n)])])}const yre=De(bre,[["render",Are],["__scopeId","data-v-7a827951"]]);function Ey(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function xp(e){return Ey(e)?new Date(e.getTime()):e==null?new Date(NaN):new Date(e)}function Ire(e){return Ey(e)&&!isNaN(e.getTime())}function by(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!(t>=0&&t<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var n=xp(e),s=n.getDay(),a=(s+7-t)%7;return n.setDate(n.getDate()-a),n.setHours(0,0,0,0),n}function Ty(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.firstDayOfWeek,s=n===void 0?0:n,a=t.firstWeekContainsDate,o=a===void 0?1:a;if(!(o>=1&&o<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7");for(var i=xp(e),l=i.getFullYear(),r=new Date(0),c=l+1;c>=l-1&&(r.setFullYear(c,0,o),r.setHours(0,0,0,0),r=by(r,s),!(i.getTime()>=r.getTime()));c--);return r}function y_(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.firstDayOfWeek,s=n===void 0?0:n,a=t.firstWeekContainsDate,o=a===void 0?1:a,i=xp(e),l=by(i,s),r=Ty(i,{firstDayOfWeek:s,firstWeekContainsDate:o}),c=l.getTime()-r.getTime();return Math.round(c/(7*24*3600*1e3))+1}var I_={months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],firstDayOfWeek:0,firstWeekContainsDate:1},Cre=/\[([^\]]+)]|YYYY|YY?|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|Z{1,2}|S{1,3}|w{1,2}|x|X|a|A/g;function ya(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n="".concat(Math.abs(e)),s=e<0?"-":"";n.length<t;)n="0".concat(n);return s+n}function bb(e){return Math.round(e.getTimezoneOffset()/15)*15}function Tb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=e>0?"-":"+",s=Math.abs(e),a=Math.floor(s/60),o=s%60;return n+ya(a,2)+t+ya(o,2)}var Sb=function(t,n,s){var a=t<12?"AM":"PM";return s?a.toLocaleLowerCase():a},xc={Y:function(t){var n=t.getFullYear();return n<=9999?"".concat(n):"+".concat(n)},YY:function(t){return ya(t.getFullYear(),4).substr(2)},YYYY:function(t){return ya(t.getFullYear(),4)},M:function(t){return t.getMonth()+1},MM:function(t){return ya(t.getMonth()+1,2)},MMM:function(t,n){return n.monthsShort[t.getMonth()]},MMMM:function(t,n){return n.months[t.getMonth()]},D:function(t){return t.getDate()},DD:function(t){return ya(t.getDate(),2)},H:function(t){return t.getHours()},HH:function(t){return ya(t.getHours(),2)},h:function(t){var n=t.getHours();return n===0?12:n>12?n%12:n},hh:function(){var t=xc.h.apply(xc,arguments);return ya(t,2)},m:function(t){return t.getMinutes()},mm:function(t){return ya(t.getMinutes(),2)},s:function(t){return t.getSeconds()},ss:function(t){return ya(t.getSeconds(),2)},S:function(t){return Math.floor(t.getMilliseconds()/100)},SS:function(t){return ya(Math.floor(t.getMilliseconds()/10),2)},SSS:function(t){return ya(t.getMilliseconds(),3)},d:function(t){return t.getDay()},dd:function(t,n){return n.weekdaysMin[t.getDay()]},ddd:function(t,n){return n.weekdaysShort[t.getDay()]},dddd:function(t,n){return n.weekdays[t.getDay()]},A:function(t,n){var s=n.meridiem||Sb;return s(t.getHours(),t.getMinutes(),!1)},a:function(t,n){var s=n.meridiem||Sb;return s(t.getHours(),t.getMinutes(),!0)},Z:function(t){return Tb(bb(t),":")},ZZ:function(t){return Tb(bb(t))},X:function(t){return Math.floor(t.getTime()/1e3)},x:function(t){return t.getTime()},w:function(t,n){return y_(t,{firstDayOfWeek:n.firstDayOfWeek,firstWeekContainsDate:n.firstWeekContainsDate})},ww:function(t,n){return ya(xc.w(t,n),2)}};function C_(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=t?String(t):"YYYY-MM-DDTHH:mm:ss.SSSZ",a=xp(e);if(!Ire(a))return"Invalid Date";var o=n.locale||I_;return s.replace(Cre,function(i,l){return l||(typeof xc[i]=="function"?"".concat(xc[i](a,o)):i)})}function Ab(e){return Rre(e)||Ore(e)||Nre()}function Nre(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Ore(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function Rre(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function yb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function xre(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yb(n,!0).forEach(function(s){Bi(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yb(n).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function wre(e,t){return Lre(e)||Mre(e,t)||$re()}function $re(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Mre(e,t){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]"){var n=[],s=!0,a=!1,o=void 0;try{for(var i=e[Symbol.iterator](),l;!(s=(l=i.next()).done)&&(n.push(l.value),!(t&&n.length===t));s=!0);}catch(r){a=!0,o=r}finally{try{!s&&i.return!=null&&i.return()}finally{if(a)throw o}}return n}}function Lre(e){if(Array.isArray(e))return e}function Bi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Dre=/(\[[^\[]*\])|(MM?M?M?|Do|DD?|ddd?d?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|S{1,3}|x|X|ZZ?|.)/g,Sy=/\d/,Ui=/\d\d/,Pre=/\d{3}/,kre=/\d{4}/,Mr=/\d\d?/,Bre=/[+-]\d\d:?\d\d/,Ay=/[+-]?\d+/,Ure=/[+-]?\d+(\.\d{1,3})?/,N_="year",wp="month",yy="day",Iy="hour",Cy="minute",Ny="second",O_="millisecond",Oy={},Ln=function(t,n,s){var a=Array.isArray(t)?t:[t],o;typeof s=="string"?o=function(l){var r=parseInt(l,10);return Bi({},s,r)}:o=s,a.forEach(function(i){Oy[i]=[n,o]})},Fre=function(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},du=function(t){return function(n){var s=n[t];if(!Array.isArray(s))throw new Error("Locale[".concat(t,"] need an array"));return new RegExp(s.map(Fre).join("|"))}},pu=function(t,n){return function(s,a){var o=a[t];if(!Array.isArray(o))throw new Error("Locale[".concat(t,"] need an array"));var i=o.indexOf(s);if(i<0)throw new Error("Invalid Word");return Bi({},n,i)}};Ln("Y",Ay,N_);Ln("YY",Ui,function(e){var t=new Date().getFullYear(),n=Math.floor(t/100),s=parseInt(e,10);return s=(s>68?n-1:n)*100+s,Bi({},N_,s)});Ln("YYYY",kre,N_);Ln("M",Mr,function(e){return Bi({},wp,parseInt(e,10)-1)});Ln("MM",Ui,function(e){return Bi({},wp,parseInt(e,10)-1)});Ln("MMM",du("monthsShort"),pu("monthsShort",wp));Ln("MMMM",du("months"),pu("months",wp));Ln("D",Mr,yy);Ln("DD",Ui,yy);Ln(["H","h"],Mr,Iy);Ln(["HH","hh"],Ui,Iy);Ln("m",Mr,Cy);Ln("mm",Ui,Cy);Ln("s",Mr,Ny);Ln("ss",Ui,Ny);Ln("S",Sy,function(e){return Bi({},O_,parseInt(e,10)*100)});Ln("SS",Ui,function(e){return Bi({},O_,parseInt(e,10)*10)});Ln("SSS",Pre,O_);function Gre(e){return e.meridiemParse||/[ap]\.?m?\.?/i}function Vre(e){return"".concat(e).toLowerCase().charAt(0)==="p"}Ln(["A","a"],Gre,function(e,t){var n=typeof t.isPM=="function"?t.isPM(e):Vre(e);return{isPM:n}});function Hre(e){var t=e.match(/([+-]|\d\d)/g)||["-","0","0"],n=wre(t,3),s=n[0],a=n[1],o=n[2],i=parseInt(a,10)*60+parseInt(o,10);return i===0?0:s==="+"?-i:+i}Ln(["Z","ZZ"],Bre,function(e){return{offset:Hre(e)}});Ln("x",Ay,function(e){return{date:new Date(parseInt(e,10))}});Ln("X",Ure,function(e){return{date:new Date(parseFloat(e)*1e3)}});Ln("d",Sy,"weekday");Ln("dd",du("weekdaysMin"),pu("weekdaysMin","weekday"));Ln("ddd",du("weekdaysShort"),pu("weekdaysShort","weekday"));Ln("dddd",du("weekdays"),pu("weekdays","weekday"));Ln("w",Mr,"week");Ln("ww",Ui,"week");function Wre(e,t){if(e!==void 0&&t!==void 0){if(t){if(e<12)return e+12}else if(e===12)return 0}return e}function zre(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Date,n=[0,0,1,0,0,0,0],s=[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()],a=!0,o=0;o<7;o++)e[o]===void 0?n[o]=a?s[o]:n[o]:(n[o]=e[o],a=!1);return n}function Yre(e,t,n,s,a,o,i){var l;return e<100&&e>=0?(l=new Date(e+400,t,n,s,a,o,i),isFinite(l.getFullYear())&&l.setFullYear(e)):l=new Date(e,t,n,s,a,o,i),l}function jre(){for(var e,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var a=n[0];return a<100&&a>=0?(n[0]+=400,e=new Date(Date.UTC.apply(Date,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(a)):e=new Date(Date.UTC.apply(Date,n)),e}function Kre(e,t,n){var s=t.match(Dre);if(!s)throw new Error;for(var a=s.length,o={},i=0;i<a;i+=1){var l=s[i],r=Oy[l];if(r){var u=typeof r[0]=="function"?r[0](n):r[0],d=r[1],h=(u.exec(e)||[])[0],g=d(h,n);o=xre({},o,{},g),e=e.replace(h,"")}else{var c=l.replace(/^\[|\]$/g,"");if(e.indexOf(c)===0)e=e.substr(c.length);else throw new Error("not match")}}return o}function Xre(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};try{var s=n.locale,a=s===void 0?I_:s,o=n.backupDate,i=o===void 0?new Date:o,l=Kre(e,t,a),r=l.year,c=l.month,u=l.day,d=l.hour,h=l.minute,g=l.second,f=l.millisecond,b=l.isPM,A=l.date,v=l.offset,T=l.weekday,_=l.week;if(A)return A;var N=[r,c,u,d,h,g,f];if(N[3]=Wre(N[3],b),_!==void 0&&c===void 0&&u===void 0){var R=Ty(r===void 0?i:new Date(r,3),{firstDayOfWeek:a.firstDayOfWeek,firstWeekContainsDate:a.firstWeekContainsDate});return new Date(R.getTime()+(_-1)*7*24*3600*1e3)}var O,x=zre(N,i);return v!==void 0?(x[6]+=v*60*1e3,O=jre.apply(void 0,Ab(x))):O=Yre.apply(void 0,Ab(x)),T!==void 0&&O.getDay()!==T?new Date(NaN):O}catch{return new Date(NaN)}}var qre=Object.defineProperty,Zre=Object.defineProperties,Qre=Object.getOwnPropertyDescriptors,Kd=Object.getOwnPropertySymbols,Ry=Object.prototype.hasOwnProperty,xy=Object.prototype.propertyIsEnumerable,Ib=(e,t,n)=>t in e?qre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ns=(e,t)=>{for(var n in t||(t={}))Ry.call(t,n)&&Ib(e,n,t[n]);if(Kd)for(var n of Kd(t))xy.call(t,n)&&Ib(e,n,t[n]);return e},Va=(e,t)=>Zre(e,Qre(t)),Jre=(e,t)=>{var n={};for(var s in e)Ry.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&Kd)for(var s of Kd(e))t.indexOf(s)<0&&xy.call(e,s)&&(n[s]=e[s]);return n};const ece={formatLocale:I_,yearFormat:"YYYY",monthFormat:"MMM",monthBeforeYear:!0};let hc="en";const Yl={};Yl[hc]=ece;function wy(e,t,n=!1){if(typeof e!="string")return Yl[hc];let s=hc;return Yl[e]&&(s=e),t&&(Yl[e]=t,s=e),n||(hc=s),Yl[e]||Yl[hc]}function Wf(e){return wy(e,void 0,!0)}function R_(e,t){if(!Array.isArray(e))return[];const n=[],s=e.length;let a=0;for(t=t||s;a<s;)n.push(e.slice(a,a+=t));return n}function Cb(e){return Array.isArray(e)?e[e.length-1]:void 0}function yi(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ko(e,t){const n={};return yi(e)&&(Array.isArray(t)||(t=[t]),t.forEach(s=>{Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])})),n}function $y(e,t){if(!yi(e))return{};let n=e;return yi(t)&&Object.keys(t).forEach(s=>{let a=t[s];const o=e[s];yi(a)&&yi(o)&&(a=$y(o,a)),n=Va(Ns({},n),{[s]:a})}),n}function Oh(e){const t=parseInt(String(e),10);return t<10?`0${t}`:`${t}`}function tce(e){const t=/-(\w)/g;return e.replace(t,(n,s)=>s?s.toUpperCase():"")}const My="datepicker_locale",Ly="datepicker_prefixClass",Dy="datepicker_getWeek";function x_(){return Ro(My,og(Wf()))}function nce(e){const t=y(()=>yi(e.value)?$y(Wf(),e.value):Wf(e.value));return Hn(My,t),t}function sce(e){Hn(Ly,e)}function ia(){return Ro(Ly,"mx")}function ace(e){Hn(Dy,e)}function oce(){return Ro(Dy,y_)}function ice(e){const t=e.style.display,n=e.style.visibility;e.style.display="block",e.style.visibility="hidden";const s=window.getComputedStyle(e),a=e.offsetWidth+parseInt(s.marginLeft,10)+parseInt(s.marginRight,10),o=e.offsetHeight+parseInt(s.marginTop,10)+parseInt(s.marginBottom,10);return e.style.display=t,e.style.visibility=n,{width:a,height:o}}function lce(e,t,n,s){let a=0,o=0,i=0,l=0;const r=e.getBoundingClientRect(),c=document.documentElement.clientWidth,u=document.documentElement.clientHeight;return s&&(i=window.pageXOffset+r.left,l=window.pageYOffset+r.top),c-r.left<t&&r.right<t?a=i-r.left+1:r.left+r.width/2<=c/2?a=i:a=i+r.width-t,r.top<=n&&u-r.bottom<=n?o=l+u-r.top-n:r.top+r.height/2<=u/2?o=l+r.height:o=l-n,{left:`${a}px`,top:`${o}px`}}function w_(e,t=document.body){if(!e||e===t)return null;const n=(o,i)=>getComputedStyle(o,null).getPropertyValue(i);return/(auto|scroll)/.test(n(e,"overflow")+n(e,"overflow-y")+n(e,"overflow-x"))?e:w_(e.parentElement,t)}let Gu;function rce(){if(typeof window>"u")return 0;if(Gu!==void 0)return Gu;const e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);const t=document.createElement("div");return t.style.width="100%",e.appendChild(t),Gu=e.offsetWidth-t.offsetWidth,e.parentNode.removeChild(e),Gu}const Nb="ontouchend"in document?"touchstart":"mousedown";function cce(e){let t=!1;return function(...s){t||(t=!0,requestAnimationFrame(()=>{t=!1,e.apply(this,s)}))}}function ii(e,t){return{setup:e,name:e.name,props:t}}function li(e,t){return new Proxy(e,{get(s,a){const o=s[a];return o!==void 0?o:t[a]}})}const Fi=()=>e=>e,uce=(e,t)=>{const n={};for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const a=tce(s);let o=e[s];t.indexOf(a)!==-1&&o===""&&(o=!0),n[a]=o}return n};function dce(e,{slots:t}){const n=li(e,{appendToBody:!0}),s=ia(),a=j(null),o=j({left:"",top:""}),i=()=>{if(!n.visible||!a.value)return;const r=n.getRelativeElement();if(!r)return;const{width:c,height:u}=ice(a.value);o.value=lce(r,c,u,n.appendToBody)};Na(i,{flush:"post"}),Na(r=>{const c=n.getRelativeElement();if(!c)return;const u=w_(c)||window,d=cce(i);u.addEventListener("scroll",d),window.addEventListener("resize",d),r(()=>{u.removeEventListener("scroll",d),window.removeEventListener("resize",d)})},{flush:"post"});const l=r=>{if(!n.visible)return;const c=r.target,u=a.value,d=n.getRelativeElement();u&&!u.contains(c)&&d&&!d.contains(c)&&n.onClickOutside(r)};return Na(r=>{document.addEventListener(Nb,l),r(()=>{document.removeEventListener(Nb,l)})}),()=>S(bN,{to:"body",disabled:!n.appendToBody},{default:()=>[S(Ys,{name:`${s}-zoom-in-down`},{default:()=>{var r;return[n.visible&&S("div",{ref:a,class:`${s}-datepicker-main ${s}-datepicker-popup ${n.className}`,style:[Ns({position:"absolute"},o.value),n.style||{}]},[(r=t.default)==null?void 0:r.call(t)])]}})]})}const pce=Fi()(["style","className","visible","appendToBody","onClickOutside","getRelativeElement"]);var mce=ii(dce,pce);const hce={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},fce=m("path",{d:"M940.218 107.055H730.764v-60.51H665.6v60.51H363.055v-60.51H297.89v60.51H83.78c-18.617 0-32.581 13.963-32.581 32.581v805.237c0 18.618 13.964 32.582 32.582 32.582h861.09c18.619 0 32.583-13.964 32.583-32.582V139.636c-4.655-18.618-18.619-32.581-37.237-32.581zm-642.327 65.163v60.51h65.164v-60.51h307.2v60.51h65.163v-60.51h176.873v204.8H116.364v-204.8H297.89zM116.364 912.291V442.18H912.29v470.11H116.364z"},null,-1),gce=[fce];function Py(e,t){return p(),E("svg",hce,gce)}const _ce={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},vce=m("path",{d:"M810.005 274.005 572.011 512l237.994 237.995-60.01 60.01L512 572.011 274.005 810.005l-60.01-60.01L451.989 512 213.995 274.005l60.01-60.01L512 451.989l237.995-237.994z"},null,-1),Ece=[vce];function bce(e,t){return p(),E("svg",_ce,Ece)}const Tce={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em"},Sce=m("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Ace=m("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},null,-1),yce=m("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},null,-1),Ice=[Sce,Ace,yce];function Cce(e,t){return p(),E("svg",Tce,Ice)}function ll(e,t=0,n=1,s=0,a=0,o=0,i=0){const l=new Date(e,t,n,s,a,o,i);return e<100&&e>=0&&l.setFullYear(e),l}function Zo(e){return e instanceof Date&&!isNaN(e.getTime())}function rl(e){return Array.isArray(e)&&e.length===2&&e.every(Zo)&&e[0]<=e[1]}function Nce(e){return Array.isArray(e)&&e.every(Zo)}function $p(...e){if(e[0]!==void 0&&e[0]!==null){const n=new Date(e[0]);if(Zo(n))return n}const t=e.slice(1);return t.length?$p(...t):new Date}function Oce(e){const t=new Date(e);return t.setMonth(0,1),t.setHours(0,0,0,0),t}function Ob(e){const t=new Date(e);return t.setDate(1),t.setHours(0,0,0,0),t}function $i(e){const t=new Date(e);return t.setHours(0,0,0,0),t}function Rce({firstDayOfWeek:e,year:t,month:n}){const s=[],a=ll(t,n,0),o=a.getDate(),i=o-(a.getDay()+7-e)%7;for(let u=i;u<=o;u++)s.push(ll(t,n,u-o));a.setMonth(n+1,0);const l=a.getDate();for(let u=1;u<=l;u++)s.push(ll(t,n,u));const r=o-i+1,c=6*7-r-l;for(let u=1;u<=c;u++)s.push(ll(t,n,l+u));return s}function Xd(e,t){const n=new Date(e),s=typeof t=="function"?t(n.getMonth()):Number(t),a=n.getFullYear(),o=ll(a,s+1,0).getDate(),i=n.getDate();return n.setMonth(s,Math.min(i,o)),n}function Ql(e,t){const n=new Date(e),s=typeof t=="function"?t(n.getFullYear()):t;return n.setFullYear(s),n}function xce(e,t){const n=new Date(t),s=new Date(e),a=n.getFullYear()-s.getFullYear(),o=n.getMonth()-s.getMonth();return a*12+o}function qd(e,t){const n=new Date(e),s=new Date(t);return n.setHours(s.getHours(),s.getMinutes(),s.getSeconds()),n}function wce(e,{slots:t}){const n=li(e,{editable:!0,disabled:!1,clearable:!0,range:!1,multiple:!1}),s=ia(),a=j(null),o=y(()=>n.separator||(n.range?" ~ ":",")),i=g=>n.range?rl(g):n.multiple?Nce(g):Zo(g),l=g=>Array.isArray(g)?g.some(f=>n.disabledDate(f)):n.disabledDate(g),r=y(()=>a.value!==null?a.value:typeof n.renderInputText=="function"?n.renderInputText(n.value):i(n.value)?Array.isArray(n.value)?n.value.map(g=>n.formatDate(g)).join(o.value):n.formatDate(n.value):""),c=g=>{var f;g&&g.stopPropagation(),n.onChange(n.range?[null,null]:null),(f=n.onClear)==null||f.call(n)},u=()=>{var g;if(!n.editable||a.value===null)return;const f=a.value.trim();if(a.value=null,f===""){c();return}let b;if(n.range){let A=f.split(o.value);A.length!==2&&(A=f.split(o.value.trim())),b=A.map(v=>n.parseDate(v.trim()))}else n.multiple?b=f.split(o.value).map(A=>n.parseDate(A.trim())):b=n.parseDate(f);i(b)&&!l(b)?n.onChange(b):(g=n.onInputError)==null||g.call(n,f)},d=g=>{a.value=typeof g=="string"?g:g.target.value},h=g=>{const{keyCode:f}=g;f===9?n.onBlur():f===13&&u()};return()=>{var g,f,b;const A=!n.disabled&&n.clearable&&r.value,v=Va(Ns({name:"date",type:"text",autocomplete:"off",value:r.value,class:n.inputClass||`${s}-input`,readonly:!n.editable,disabled:n.disabled,placeholder:n.placeholder},n.inputAttr),{onFocus:n.onFocus,onKeydown:h,onInput:d,onChange:u});return S("div",{class:`${s}-input-wrapper`,onClick:n.onClick},[((g=t.input)==null?void 0:g.call(t,v))||S("input",v,null),A?S("i",{class:`${s}-icon-clear`,onClick:c},[((f=t["icon-clear"])==null?void 0:f.call(t))||S(bce,null,null)]):null,S("i",{class:`${s}-icon-calendar`},[((b=t["icon-calendar"])==null?void 0:b.call(t))||S(Py,null,null)])])}}const $_=Fi()(["placeholder","editable","disabled","clearable","inputClass","inputAttr","range","multiple","separator","renderInputText","onInputError","onClear"]),$ce=Fi()(["value","formatDate","parseDate","disabledDate","onChange","onFocus","onBlur","onClick",...$_]);var Mce=ii(wce,$ce);function Lce(e,{slots:t}){var n;const s=li(e,{prefixClass:"mx",valueType:"date",format:"YYYY-MM-DD",type:"date",disabledDate:()=>!1,disabledTime:()=>!1,confirmText:"OK"});sce(s.prefixClass),ace(((n=s.formatter)==null?void 0:n.getWeek)||y_);const a=nce(cr(e,"lang")),o=j(),i=()=>o.value,l=j(!1),r=y(()=>!s.disabled&&(typeof s.open=="boolean"?s.open:l.value)),c=()=>{var O,x;s.disabled||r.value||(l.value=!0,(O=s["onUpdate:open"])==null||O.call(s,!0),(x=s.onOpen)==null||x.call(s))},u=()=>{var O,x;r.value&&(l.value=!1,(O=s["onUpdate:open"])==null||O.call(s,!1),(x=s.onClose)==null||x.call(s))},d=(O,x)=>(x=x||s.format,yi(s.formatter)&&typeof s.formatter.stringify=="function"?s.formatter.stringify(O,x):C_(O,x,{locale:a.value.formatLocale})),h=(O,x)=>{if(x=x||s.format,yi(s.formatter)&&typeof s.formatter.parse=="function")return s.formatter.parse(O,x);const w=new Date;return Xre(O,x,{locale:a.value.formatLocale,backupDate:w})},g=O=>{switch(s.valueType){case"date":return O instanceof Date?new Date(O.getTime()):new Date(NaN);case"timestamp":return typeof O=="number"?new Date(O):new Date(NaN);case"format":return typeof O=="string"?h(O):new Date(NaN);default:return typeof O=="string"?h(O,s.valueType):new Date(NaN)}},f=O=>{if(!Zo(O))return null;switch(s.valueType){case"date":return O;case"timestamp":return O.getTime();case"format":return d(O);default:return d(O,s.valueType)}},b=y(()=>{const O=s.value;return s.range?(Array.isArray(O)?O.slice(0,2):[null,null]).map(g):s.multiple?(Array.isArray(O)?O:[]).map(g):g(O)}),A=(O,x,w=!0)=>{var D,M;const P=Array.isArray(O)?O.map(f):f(O);return(D=s["onUpdate:value"])==null||D.call(s,P),(M=s.onChange)==null||M.call(s,P,x),w&&u(),P},v=j(new Date);Na(()=>{r.value&&(v.value=b.value)});const T=(O,x)=>{s.confirm?v.value=O:A(O,x,!s.multiple&&(x===s.type||x==="time"))},_=()=>{var O;const x=A(v.value);(O=s.onConfirm)==null||O.call(s,x)},N=O=>s.disabledDate(O)||s.disabledTime(O),R=O=>{var x;const{prefixClass:w}=s;return S("div",{class:`${w}-datepicker-sidebar`},[(x=t.sidebar)==null?void 0:x.call(t,O),(s.shortcuts||[]).map((D,M)=>S("button",{key:M,"data-index":M,type:"button",class:`${w}-btn ${w}-btn-text ${w}-btn-shortcut`,onClick:()=>{var P;const U=(P=D.onClick)==null?void 0:P.call(D);U&&A(U)}},[D.text]))])};return()=>{var O,x;const{prefixClass:w,disabled:D,confirm:M,range:P,popupClass:U,popupStyle:F,appendToBody:k}=s,B={value:v.value,"onUpdate:value":T,emit:A},V=t.header&&S("div",{class:`${w}-datepicker-header`},[t.header(B)]),G=(t.footer||M)&&S("div",{class:`${w}-datepicker-footer`},[(O=t.footer)==null?void 0:O.call(t,B),M&&S("button",{type:"button",class:`${w}-btn ${w}-datepicker-btn-confirm`,onClick:_},[s.confirmText])]),K=(x=t.content)==null?void 0:x.call(t,B),se=(t.sidebar||s.shortcuts)&&R(B);return S("div",{ref:o,class:{[`${w}-datepicker`]:!0,[`${w}-datepicker-range`]:P,disabled:D}},[S(Mce,Va(Ns({},Ko(s,$_)),{value:b.value,formatDate:d,parseDate:h,disabledDate:N,onChange:A,onClick:c,onFocus:c,onBlur:u}),Ko(t,["icon-calendar","icon-clear","input"])),S(mce,{className:U,style:F,visible:r.value,appendToBody:k,getRelativeElement:i,onClickOutside:u},{default:()=>[se,S("div",{class:`${w}-datepicker-content`},[V,K,G])]})])}}const Dce=Fi()(["value","valueType","type","format","formatter","lang","prefixClass","appendToBody","open","popupClass","popupStyle","confirm","confirmText","shortcuts","disabledDate","disabledTime","onOpen","onClose","onConfirm","onChange","onUpdate:open","onUpdate:value"]),Pce=[...Dce,...$_];var Rb=ii(Lce,Pce);function Vu(e){var t=e,{value:n}=t,s=Jre(t,["value"]);const a=ia();return S("button",Va(Ns({},s),{type:"button",class:`${a}-btn ${a}-btn-text ${a}-btn-icon-${n}`}),[S("i",{class:`${a}-icon-${n}`},null)])}function M_({type:e,calendar:t,onUpdateCalendar:n},{slots:s}){var a;const o=ia(),i=()=>{n(Xd(t,h=>h-1))},l=()=>{n(Xd(t,h=>h+1))},r=()=>{n(Ql(t,h=>h-1))},c=()=>{n(Ql(t,h=>h+1))},u=()=>{n(Ql(t,h=>h-10))},d=()=>{n(Ql(t,h=>h+10))};return S("div",{class:`${o}-calendar-header`},[S(Vu,{value:"double-left",onClick:e==="year"?u:r},null),e==="date"&&S(Vu,{value:"left",onClick:i},null),S(Vu,{value:"double-right",onClick:e==="year"?d:c},null),e==="date"&&S(Vu,{value:"right",onClick:l},null),S("span",{class:`${o}-calendar-header-label`},[(a=s.default)==null?void 0:a.call(s)])])}function kce({calendar:e,isWeekMode:t,showWeekNumber:n,titleFormat:s,getWeekActive:a,getCellClasses:o,onSelect:i,onUpdatePanel:l,onUpdateCalendar:r,onDateMouseEnter:c,onDateMouseLeave:u}){const d=ia(),h=oce(),g=x_().value,{yearFormat:f,monthBeforeYear:b,monthFormat:A="MMM",formatLocale:v}=g,T=v.firstDayOfWeek||0;let _=g.days||v.weekdaysMin;_=_.concat(_).slice(T,T+7);const N=e.getFullYear(),R=e.getMonth(),O=R_(Rce({firstDayOfWeek:T,year:N,month:R}),7),x=(B,V)=>C_(B,V,{locale:g.formatLocale}),w=B=>{l(B)},D=B=>{const V=B.getAttribute("data-index"),[G,K]=V.split(",").map(ee=>parseInt(ee,10)),se=O[G][K];return new Date(se)},M=B=>{i(D(B.currentTarget))},P=B=>{c&&c(D(B.currentTarget))},U=B=>{u&&u(D(B.currentTarget))},F=S("button",{type:"button",class:`${d}-btn ${d}-btn-text ${d}-btn-current-year`,onClick:()=>w("year")},[x(e,f)]),k=S("button",{type:"button",class:`${d}-btn ${d}-btn-text ${d}-btn-current-month`,onClick:()=>w("month")},[x(e,A)]);return n=typeof n=="boolean"?n:t,S("div",{class:[`${d}-calendar ${d}-calendar-panel-date`,{[`${d}-calendar-week-mode`]:t}]},[S(M_,{type:"date",calendar:e,onUpdateCalendar:r},{default:()=>[b?[k,F]:[F,k]]}),S("div",{class:`${d}-calendar-content`},[S("table",{class:`${d}-table ${d}-table-date`},[S("thead",null,[S("tr",null,[n&&S("th",{class:`${d}-week-number-header`},null),_.map(B=>S("th",{key:B},[B]))])]),S("tbody",null,[O.map((B,V)=>S("tr",{key:V,class:[`${d}-date-row`,{[`${d}-active-week`]:a(B)}]},[n&&S("td",{class:`${d}-week-number`,"data-index":`${V},0`,onClick:M},[S("div",null,[h(B[0])])]),B.map((G,K)=>S("td",{key:K,class:["cell",o(G)],title:x(G,s),"data-index":`${V},${K}`,onClick:M,onMouseenter:P,onMouseleave:U},[S("div",null,[G.getDate()])]))]))])])])])}function Bce({calendar:e,getCellClasses:t,onSelect:n,onUpdateCalendar:s,onUpdatePanel:a}){const o=ia(),i=x_().value,l=i.months||i.formatLocale.monthsShort,r=u=>ll(e.getFullYear(),u),c=u=>{const h=u.currentTarget.getAttribute("data-month");n(r(parseInt(h,10)))};return S("div",{class:`${o}-calendar ${o}-calendar-panel-month`},[S(M_,{type:"month",calendar:e,onUpdateCalendar:s},{default:()=>[S("button",{type:"button",class:`${o}-btn ${o}-btn-text ${o}-btn-current-year`,onClick:()=>a("year")},[e.getFullYear()])]}),S("div",{class:`${o}-calendar-content`},[S("table",{class:`${o}-table ${o}-table-month`},[R_(l,3).map((u,d)=>S("tr",{key:d},[u.map((h,g)=>{const f=d*3+g;return S("td",{key:g,class:["cell",t(r(f))],"data-month":f,onClick:c},[S("div",null,[h])])})]))])])])}const Uce=e=>{const t=Math.floor(e.getFullYear()/10)*10,n=[];for(let s=0;s<10;s++)n.push(t+s);return R_(n,2)};function Fce({calendar:e,getCellClasses:t=()=>[],getYearPanel:n=Uce,onSelect:s,onUpdateCalendar:a}){const o=ia(),i=d=>ll(d,0),l=d=>{const g=d.currentTarget.getAttribute("data-year");s(i(parseInt(g,10)))},r=n(new Date(e)),c=r[0][0],u=Cb(Cb(r));return S("div",{class:`${o}-calendar ${o}-calendar-panel-year`},[S(M_,{type:"year",calendar:e,onUpdateCalendar:a},{default:()=>[S("span",null,[c]),S("span",{class:`${o}-calendar-decade-separator`},null),S("span",null,[u])]}),S("div",{class:`${o}-calendar-content`},[S("table",{class:`${o}-table ${o}-table-year`},[r.map((d,h)=>S("tr",{key:h},[d.map((g,f)=>S("td",{key:f,class:["cell",t(i(g))],"data-year":g,onClick:l},[S("div",null,[g])]))]))])])])}function Gce(e){const t=li(e,{defaultValue:$i(new Date),type:"date",disabledDate:()=>!1,getClasses:()=>[],titleFormat:"YYYY-MM-DD"}),n=y(()=>(Array.isArray(t.value)?t.value:[t.value]).filter(Zo).map(T=>t.type==="year"?Oce(T):t.type==="month"?Ob(T):$i(T))),s=j(new Date);Na(()=>{let v=t.calendar;if(!Zo(v)){const{length:T}=n.value;v=$p(T>0?n.value[T-1]:t.defaultValue)}s.value=Ob(v)});const a=v=>{var T;s.value=v,(T=t.onCalendarChange)==null||T.call(t,v)},o=j("date");Na(()=>{const v=["date","month","year"],T=Math.max(v.indexOf(t.type),v.indexOf(t.defaultPanel));o.value=T!==-1?v[T]:"date"});const i=v=>{var T;const _=o.value;o.value=v,(T=t.onPanelChange)==null||T.call(t,v,_)},l=v=>t.disabledDate(new Date(v),n.value),r=(v,T)=>{var _,N,R;if(!l(v))if((_=t.onPick)==null||_.call(t,v),t.multiple===!0){const O=n.value.filter(x=>x.getTime()!==v.getTime());O.length===n.value.length&&O.push(v),(N=t["onUpdate:value"])==null||N.call(t,O,T)}else(R=t["onUpdate:value"])==null||R.call(t,v,T)},c=v=>{r(v,t.type==="week"?"week":"date")},u=v=>{if(t.type==="year")r(v,"year");else if(a(v),i("month"),t.partialUpdate&&n.value.length===1){const T=Ql(n.value[0],v.getFullYear());r(T,"year")}},d=v=>{if(t.type==="month")r(v,"month");else if(a(v),i("date"),t.partialUpdate&&n.value.length===1){const T=Xd(Ql(n.value[0],v.getFullYear()),v.getMonth());r(T,"month")}},h=(v,T=[])=>(l(v)?T.push("disabled"):n.value.some(_=>_.getTime()===v.getTime())&&T.push("active"),T.concat(t.getClasses(v,n.value,T.join(" ")))),g=v=>{const T=v.getMonth()!==s.value.getMonth(),_=[];return v.getTime()===new Date().setHours(0,0,0,0)&&_.push("today"),T&&_.push("not-current-month"),h(v,_)},f=v=>t.type!=="month"?s.value.getMonth()===v.getMonth()?"active":"":h(v),b=v=>t.type!=="year"?s.value.getFullYear()===v.getFullYear()?"active":"":h(v),A=v=>{if(t.type!=="week")return!1;const T=v[0].getTime(),_=v[6].getTime();return n.value.some(N=>{const R=N.getTime();return R>=T&&R<=_})};return()=>o.value==="year"?S(Fce,{calendar:s.value,getCellClasses:b,getYearPanel:t.getYearPanel,onSelect:u,onUpdateCalendar:a},null):o.value==="month"?S(Bce,{calendar:s.value,getCellClasses:f,onSelect:d,onUpdatePanel:i,onUpdateCalendar:a},null):S(kce,{isWeekMode:t.type==="week",showWeekNumber:t.showWeekNumber,titleFormat:t.titleFormat,calendar:s.value,getCellClasses:g,getWeekActive:A,onSelect:c,onUpdatePanel:i,onUpdateCalendar:a,onDateMouseEnter:t.onDateMouseEnter,onDateMouseLeave:t.onDateMouseLeave},null)}const Mp=Fi()(["type","value","defaultValue","defaultPanel","disabledDate","getClasses","calendar","multiple","partialUpdate","showWeekNumber","titleFormat","getYearPanel","onDateMouseEnter","onDateMouseLeave","onCalendarChange","onPanelChange","onUpdate:value","onPick"]);var Lp=ii(Gce,Mp);const xb=(e,t)=>{const n=e.getTime();let[s,a]=t.map(o=>o.getTime());return s>a&&([s,a]=[a,s]),n>s&&n<a};function Vce(e){const t=li(e,{defaultValue:new Date,type:"date"}),n=ia(),s=y(()=>{let A=Array.isArray(t.defaultValue)?t.defaultValue:[t.defaultValue,t.defaultValue];return A=A.map(v=>$i(v)),rl(A)?A:[new Date,new Date].map(v=>$i(v))}),a=j([new Date(NaN),new Date(NaN)]);Na(()=>{rl(t.value)&&(a.value=t.value)});const o=(A,v)=>{var T;const[_,N]=a.value;Zo(_)&&!Zo(N)?(_.getTime()>A.getTime()?a.value=[A,_]:a.value=[_,A],(T=t["onUpdate:value"])==null||T.call(t,a.value,v)):a.value=[A,new Date(NaN)]},i=j([new Date,new Date]),l=y(()=>rl(t.calendar)?t.calendar:i.value),r=y(()=>t.type==="year"?10*12:t.type==="month"?1*12:1),c=(A,v)=>{var T;const _=xce(A[0],A[1]),N=r.value-_;if(N>0){const R=v===1?0:1;A[R]=Xd(A[R],O=>O+(R===0?-N:N))}i.value=A,(T=t.onCalendarChange)==null||T.call(t,A,v)},u=A=>{c([A,l.value[1]],0)},d=A=>{c([l.value[0],A],1)};Na(()=>{const A=rl(t.value)?t.value:s.value;c(A.slice(0,2))});const h=j(null),g=A=>h.value=A,f=()=>h.value=null,b=(A,v,T)=>{const _=t.getClasses?t.getClasses(A,v,T):[],N=Array.isArray(_)?_:[_];return/disabled|active/.test(T)?N:(v.length===2&&xb(A,v)&&N.push("in-range"),v.length===1&&h.value&&xb(A,[v[0],h.value])?N.concat("hover-in-range"):N)};return()=>{const A=l.value.map((v,T)=>{const _=Va(Ns({},t),{calendar:v,value:a.value,defaultValue:s.value[T],getClasses:b,partialUpdate:!1,multiple:!1,"onUpdate:value":o,onCalendarChange:T===0?u:d,onDateMouseLeave:f,onDateMouseEnter:g});return S(Lp,_,null)});return S("div",{class:`${n}-calendar-range`},[A])}}const L_=Mp;var D_=ii(Vce,L_);const ky=Jo({setup(e,{slots:t}){const n=ia(),s=j(),a=j(""),o=j("");lt(()=>{if(!s.value)return;const f=s.value,b=f.clientHeight*100/f.scrollHeight;a.value=b<100?`${b}%`:""});const l=rce(),r=f=>{const b=f.currentTarget,{scrollHeight:A,scrollTop:v}=b;o.value=`${v*100/A}%`};let c=!1,u=0;const d=f=>{f.stopImmediatePropagation();const b=f.currentTarget,{offsetTop:A}=b;c=!0,u=f.clientY-A},h=f=>{if(!c||!s.value)return;const{clientY:b}=f,{scrollHeight:A,clientHeight:v}=s.value,_=(b-u)*A/v;s.value.scrollTop=_},g=()=>{c=!1};return lt(()=>{document.addEventListener("mousemove",h),document.addEventListener("mouseup",g)}),ei(()=>{document.addEventListener("mousemove",h),document.addEventListener("mouseup",g)}),()=>{var f;return S("div",{class:`${n}-scrollbar`,style:{position:"relative",overflow:"hidden"}},[S("div",{ref:s,class:`${n}-scrollbar-wrap`,style:{marginRight:`-${l}px`},onScroll:r},[(f=t.default)==null?void 0:f.call(t)]),S("div",{class:`${n}-scrollbar-track`},[S("div",{class:`${n}-scrollbar-thumb`,style:{height:a.value,top:o.value},onMousedown:d},null)])])}}});function Hce({options:e,getClasses:t,onSelect:n}){const s=ia(),a=o=>{const i=o.target,l=o.currentTarget;if(i.tagName.toUpperCase()!=="LI")return;const r=l.getAttribute("data-type"),c=parseInt(l.getAttribute("data-index"),10),u=parseInt(i.getAttribute("data-index"),10),d=e[c].list[u].value;n(d,r)};return S("div",{class:`${s}-time-columns`},[e.map((o,i)=>S(ky,{key:o.type,class:`${s}-time-column`},{default:()=>[S("ul",{class:`${s}-time-list`,"data-index":i,"data-type":o.type,onClick:a},[o.list.map((l,r)=>S("li",{key:l.text,"data-index":r,class:[`${s}-time-item`,t(l.value,o.type)]},[l.text]))])]}))])}function Wce(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!dS(e)}function zce(e){let t;const n=ia();return S(ky,null,Wce(t=e.options.map(s=>S("div",{key:s.text,class:[`${n}-time-option`,e.getClasses(s.value,"time")],onClick:()=>e.onSelect(s.value,"time")},[s.text])))?t:{default:()=>[t]})}function Rh({length:e,step:t=1,options:n}){if(Array.isArray(n))return n.filter(a=>a>=0&&a<e);t<=0&&(t=1);const s=[];for(let a=0;a<e;a+=t)s.push(a);return s}function Yce(e,t){let{showHour:n,showMinute:s,showSecond:a,use12h:o}=t;const i=t.format||"HH:mm:ss";n=typeof n=="boolean"?n:/[HhKk]/.test(i),s=typeof s=="boolean"?s:/m/.test(i),a=typeof a=="boolean"?a:/s/.test(i),o=typeof o=="boolean"?o:/a/i.test(i);const l=[],r=o&&e.getHours()>=12;return n&&l.push({type:"hour",list:Rh({length:o?12:24,step:t.hourStep,options:t.hourOptions}).map(c=>{const u=c===0&&o?"12":Oh(c),d=new Date(e);return d.setHours(r?c+12:c),{value:d,text:u}})}),s&&l.push({type:"minute",list:Rh({length:60,step:t.minuteStep,options:t.minuteOptions}).map(c=>{const u=new Date(e);return u.setMinutes(c),{value:u,text:Oh(c)}})}),a&&l.push({type:"second",list:Rh({length:60,step:t.secondStep,options:t.secondOptions}).map(c=>{const u=new Date(e);return u.setSeconds(c),{value:u,text:Oh(c)}})}),o&&l.push({type:"ampm",list:["AM","PM"].map((c,u)=>{const d=new Date(e);return d.setHours(d.getHours()%12+u*12),{text:c,value:d}})}),l}function xh(e=""){const t=e.split(":");if(t.length>=2){const n=parseInt(t[0],10),s=parseInt(t[1],10);return{hours:n,minutes:s}}return null}function jce({date:e,option:t,format:n,formatDate:s}){const a=[];if(typeof t=="function")return t()||[];const o=xh(t.start),i=xh(t.end),l=xh(t.step),r=t.format||n;if(o&&i&&l){const c=o.minutes+o.hours*60,u=i.minutes+i.hours*60,d=l.minutes+l.hours*60,h=Math.floor((u-c)/d);for(let g=0;g<=h;g++){const f=c+g*d,b=Math.floor(f/60),A=f%60,v=new Date(e);v.setHours(b,A,0),a.push({value:v,text:s(v,r)})}}return a}const By=(e,t,n=0)=>{if(n<=0){requestAnimationFrame(()=>{e.scrollTop=t});return}const a=(t-e.scrollTop)/n*10;requestAnimationFrame(()=>{const o=e.scrollTop+a;if(o>=t){e.scrollTop=t;return}e.scrollTop=o,By(e,t,n-10)})};function Kce(e){const t=li(e,{defaultValue:$i(new Date),format:"HH:mm:ss",timeTitleFormat:"YYYY-MM-DD",disabledTime:()=>!1,scrollDuration:100}),n=ia(),s=x_(),a=(b,A)=>C_(b,A,{locale:s.value.formatLocale}),o=j(new Date);Na(()=>{o.value=$p(t.value,t.defaultValue)});const i=b=>Array.isArray(b)?b.every(A=>t.disabledTime(new Date(A))):t.disabledTime(new Date(b)),l=b=>{const A=new Date(b);return i([A.getTime(),A.setMinutes(0,0,0),A.setMinutes(59,59,999)])},r=b=>{const A=new Date(b);return i([A.getTime(),A.setSeconds(0,0),A.setSeconds(59,999)])},c=b=>{const A=new Date(b),v=A.getHours()<12?0:12,T=v+11;return i([A.getTime(),A.setHours(v,0,0,0),A.setHours(T,59,59,999)])},u=(b,A)=>A==="hour"?l(b):A==="minute"?r(b):A==="ampm"?c(b):i(b),d=(b,A)=>{var v;if(!u(b,A)){const T=new Date(b);o.value=T,i(T)||(v=t["onUpdate:value"])==null||v.call(t,T,A)}},h=(b,A)=>u(b,A)?"disabled":b.getTime()===o.value.getTime()?"active":"",g=j(),f=b=>{if(!g.value)return;const A=g.value.querySelectorAll(".active");for(let v=0;v<A.length;v++){const T=A[v],_=w_(T,g.value);if(_){const N=T.offsetTop;By(_,N,b)}}};return lt(()=>f(0)),it(o,()=>f(t.scrollDuration),{flush:"post"}),()=>{let b;return t.timePickerOptions?b=S(zce,{onSelect:d,getClasses:h,options:jce({date:o.value,format:t.format,option:t.timePickerOptions,formatDate:a})},null):b=S(Hce,{options:Yce(o.value,t),onSelect:d,getClasses:h},null),S("div",{class:`${n}-time`,ref:g},[t.showTimeHeader&&S("div",{class:`${n}-time-header`},[S("button",{type:"button",class:`${n}-btn ${n}-btn-text ${n}-time-header-title`,onClick:t.onClickTitle},[a(o.value,t.timeTitleFormat)])]),S("div",{class:`${n}-time-content`},[b])])}}const Dp=Fi()(["value","defaultValue","format","timeTitleFormat","showTimeHeader","disabledTime","timePickerOptions","hourOptions","minuteOptions","secondOptions","hourStep","minuteStep","secondStep","showHour","showMinute","showSecond","use12h","scrollDuration","onClickTitle","onUpdate:value"]);var jc=ii(Kce,Dp);function Xce(e){const t=li(e,{defaultValue:$i(new Date),disabledTime:()=>!1}),n=ia(),s=j([new Date(NaN),new Date(NaN)]);Na(()=>{rl(t.value)?s.value=t.value:s.value=[new Date(NaN),new Date(NaN)]});const a=(c,u)=>{var d;(d=t["onUpdate:value"])==null||d.call(t,s.value,c==="time"?"time-range":c,u)},o=(c,u)=>{s.value[0]=c,s.value[1].getTime()>=c.getTime()||(s.value[1]=c),a(u,0)},i=(c,u)=>{s.value[1]=c,s.value[0].getTime()<=c.getTime()||(s.value[0]=c),a(u,1)},l=c=>t.disabledTime(c,0),r=c=>c.getTime()<s.value[0].getTime()||t.disabledTime(c,1);return()=>{const c=Array.isArray(t.defaultValue)?t.defaultValue:[t.defaultValue,t.defaultValue];return S("div",{class:`${n}-time-range`},[S(jc,Va(Ns({},t),{"onUpdate:value":o,value:s.value[0],defaultValue:c[0],disabledTime:l}),null),S(jc,Va(Ns({},t),{"onUpdate:value":i,value:s.value[1],defaultValue:c[1],disabledTime:r}),null)])}}const P_=Dp;var k_=ii(Xce,P_);function Uy(e){const t=j(!1),n=()=>{var o;t.value=!1,(o=e.onShowTimePanelChange)==null||o.call(e,!1)},s=()=>{var o;t.value=!0,(o=e.onShowTimePanelChange)==null||o.call(e,!0)};return{timeVisible:y(()=>typeof e.showTimePanel=="boolean"?e.showTimePanel:t.value),openTimePanel:s,closeTimePanel:n}}function qce(e){const t=li(e,{disabledTime:()=>!1,defaultValue:$i(new Date)}),n=j(t.value);Na(()=>{n.value=t.value});const{openTimePanel:s,closeTimePanel:a,timeVisible:o}=Uy(t),i=(l,r)=>{var c;r==="date"&&s();let u=qd(l,$p(t.value,t.defaultValue));if(t.disabledTime(new Date(u))&&(u=qd(l,t.defaultValue),t.disabledTime(new Date(u)))){n.value=u;return}(c=t["onUpdate:value"])==null||c.call(t,u,r)};return()=>{const l=ia(),r=Va(Ns({},Ko(t,Mp)),{multiple:!1,type:"date",value:n.value,"onUpdate:value":i}),c=Va(Ns({},Ko(t,Dp)),{showTimeHeader:!0,value:n.value,"onUpdate:value":t["onUpdate:value"],onClickTitle:a});return S("div",{class:`${l}-date-time`},[S(Lp,r,null),o.value&&S(jc,c,null)])}}const Fy=Fi()(["showTimePanel","onShowTimePanelChange"]),Zce=[...Fy,...Mp,...Dp];var Gy=ii(qce,Zce);function Qce(e){const t=li(e,{defaultValue:$i(new Date),disabledTime:()=>!1}),n=j(t.value);Na(()=>{n.value=t.value});const{openTimePanel:s,closeTimePanel:a,timeVisible:o}=Uy(t),i=(l,r)=>{var c;r==="date"&&s();const u=Array.isArray(t.defaultValue)?t.defaultValue:[t.defaultValue,t.defaultValue];let d=l.map((h,g)=>{const f=rl(t.value)?t.value[g]:u[g];return qd(h,f)});if(d[1].getTime()<d[0].getTime()&&(d=[d[0],d[0]]),d.some(t.disabledTime)&&(d=l.map((h,g)=>qd(h,u[g])),d.some(t.disabledTime))){n.value=d;return}(c=t["onUpdate:value"])==null||c.call(t,d,r)};return()=>{const l=ia(),r=Va(Ns({},Ko(t,L_)),{type:"date",value:n.value,"onUpdate:value":i}),c=Va(Ns({},Ko(t,P_)),{showTimeHeader:!0,value:n.value,"onUpdate:value":t["onUpdate:value"],onClickTitle:a});return S("div",{class:`${l}-date-time-range`},[S(D_,r,null),o.value&&S(k_,c,null)])}}const Jce=[...Fy,...P_,...L_];var Vy=ii(Qce,Jce);const eue=Fi()(["range","open","appendToBody","clearable","confirm","disabled","editable","multiple","partialUpdate","showHour","showMinute","showSecond","showTimeHeader","showTimePanel","showWeekNumber","use12h"]),wb={date:"YYYY-MM-DD",datetime:"YYYY-MM-DD HH:mm:ss",year:"YYYY",month:"YYYY-MM",time:"HH:mm:ss",week:"w"};function Hy(e,{slots:t}){const n=e.type||"date",s=e.format||wb[n]||wb.date,a=Va(Ns({},uce(e,eue)),{type:n,format:s});return S(Rb,Ko(a,Rb.props),Ns({content:o=>{if(a.range){const i=n==="time"?k_:n==="datetime"?Vy:D_;return On(i,Ko(Ns(Ns({},a),o),i.props))}else{const i=n==="time"?jc:n==="datetime"?Gy:Lp;return On(i,Ko(Ns(Ns({},a),o),i.props))}},"icon-calendar":()=>n==="time"?S(Cce,null,null):S(Py,null,null)},t))}const tue={locale:wy,install:e=>{e.component("DatePicker",Hy)}};var Wy=Object.assign(Hy,tue,{Calendar:Lp,CalendarRange:D_,TimePanel:jc,TimeRange:k_,DateTime:Gy,DateTimeRange:Vy});const nue={components:{DatePicker:Wy},props:{confirmText:{type:String,default:""},placeholder:{type:String,default:""},value:{type:Array,default:()=>[]}},emits:["change"],methods:{handleChange(e){this.$emit("change",e)}}},sue={class:"date-picker"};function aue(e,t,n,s,a,o){const i=W("DatePicker");return p(),E("div",sue,[S(i,{range:"",confirm:"",clearable:!1,editable:!1,"confirm-text":n.confirmText,placeholder:n.placeholder,value:n.value,onChange:o.handleChange},null,8,["confirm-text","placeholder","value","onChange"])])}const zy=De(nue,[["render",aue]]),oue=e=>e?e<60?`${e}s`:e<3600?`${Math.floor(e/60)}m`:e<86400?`${Math.floor(e/3600)}h`:`${Math.floor(e/86400)}d`:"",Is={1:{id:1,period:"day"},2:{id:2,period:"week"},3:{id:3,period:"month"},4:{id:4,period:"year"}},Gs={DAY:{id:"DAY",period:"day",translationKey:"REPORT.GROUPING_OPTIONS.DAY"},WEEK:{id:"WEEK",period:"week",translationKey:"REPORT.GROUPING_OPTIONS.WEEK"},MONTH:{id:"MONTH",period:"month",translationKey:"REPORT.GROUPING_OPTIONS.MONTH"},YEAR:{id:"YEAR",period:"year",translationKey:"REPORT.GROUPING_OPTIONS.YEAR"}},or={LAST_7_DAYS:{id:"LAST_7_DAYS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS",offset:6,groupByOptions:[Gs.DAY]},LAST_30_DAYS:{id:"LAST_30_DAYS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_30_DAYS",offset:29,groupByOptions:[Gs.DAY,Gs.WEEK]},LAST_3_MONTHS:{id:"LAST_3_MONTHS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_3_MONTHS",offset:89,groupByOptions:[Gs.DAY,Gs.WEEK,Gs.MONTH]},LAST_6_MONTHS:{id:"LAST_6_MONTHS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_6_MONTHS",offset:179,groupByOptions:[Gs.WEEK,Gs.MONTH]},LAST_YEAR:{id:"LAST_YEAR",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_YEAR",offset:364,groupByOptions:[Gs.WEEK,Gs.MONTH]},CUSTOM_DATE_RANGE:{id:"CUSTOM_DATE_RANGE",translationKey:"REPORT.DATE_RANGE_OPTIONS.CUSTOM_DATE_RANGE",offset:null,groupByOptions:[Gs.DAY,Gs.WEEK,Gs.MONTH,Gs.YEAR]}},$b='Inter,-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif',iue={type:"bar",backgroundColor:"rgb(31, 147, 255)"},Yy=e=>({datasets:[iue],scales:{x:{ticks:{fontFamily:$b},grid:{drawOnChartArea:!1}},y:{type:"linear",position:"left",ticks:{fontFamily:$b,beginAtZero:!0,stepSize:1,callback:e},grid:{drawOnChartArea:!1}}}}),Ul=Yy((e,t,n)=>!t||t===n.length-1?e:""),wh=Yy((e,t,n)=>!t||t===n.length-1?oue(e):""),Mb={conversations_count:Ul,incoming_messages_count:Ul,outgoing_messages_count:Ul,avg_first_response_time:wh,reply_time:wh,avg_resolution_time:wh,resolutions_count:Ul,bot_resolutions_count:Ul,bot_handoffs_count:Ul},Lb={open:"OPEN",unattended:"UNATTENDED",unassigned:"UNASSIGNED",pending:"PENDING",online:"ONLINE",busy:"BUSY",offline:"OFFLINE"},lue={class:"multiselect-wrap--small"},rue={__name:"DateRange",emits:["onRangeChange"],setup(e,{emit:t}){const n=t,{t:s}=be(),a=y(()=>Object.values(or).map(r=>({...r,name:s(r.translationKey)}))),o=j(Object.values(or)[0].id),i=y({get(){return a.value.find(r=>r.id===o.value)},set(r){o.value=r.id}}),l=r=>{i.value=r,n("onRangeChange",r)};return(r,c)=>{const u=W("multiselect");return p(),E("div",lue,[S(u,{modelValue:i.value,"onUpdate:modelValue":c[0]||(c[0]=d=>i.value=d),class:"no-margin","track-by":"id",label:"name",placeholder:r.$t("FORMS.MULTISELECT.SELECT_ONE"),"selected-label":"","select-label":r.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"",options:a.value,searchable:!1,"allow-empty":!1,onSelect:l},null,8,["modelValue","placeholder","select-label","options"])])}}},cue={name:"ReportsFiltersDateGroupBy",props:{validGroupOptions:{type:Array,default:()=>[Gs.DAY]},selectedOption:{type:Object,default:()=>Gs.DAY}},emits:["onGroupingChange"],data(){return{currentSelectedFilter:null}},computed:{translatedOptions(){return this.validGroupOptions.map(e=>({...e,groupBy:this.$t(e.translationKey)}))}},watch:{selectedOption:{handler(){this.currentSelectedFilter={...this.selectedOption,groupBy:this.$t(this.selectedOption.translationKey)}},immediate:!0}},methods:{changeFilterSelection(e){this.groupByOptions=this.$emit("onGroupingChange",e)}}},uue={class:"multiselect-wrap--small"},due={"aria-hidden":"true",class:"hidden"};function pue(e,t,n,s,a,o){const i=W("multiselect");return p(),E("div",uue,[m("p",due,I(e.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL")),1),S(i,{modelValue:a.currentSelectedFilter,"onUpdate:modelValue":t[0]||(t[0]=l=>a.currentSelectedFilter=l),class:"no-margin","track-by":"id",label:"groupBy",placeholder:e.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL"),options:o.translatedOptions,"allow-empty":!1,"show-labels":!1,onSelect:o.changeFilterSelection},null,8,["modelValue","placeholder","options","onSelect"])])}const mue=De(cue,[["render",pue]]),hue={name:"ReportsFiltersAgents",emits:["agentsFilterSelection"],data(){return{selectedOptions:[]}},computed:{...mt({options:"agents/getAgents"})},mounted(){this.$store.dispatch("agents/get")},methods:{handleInput(){this.$emit("agentsFilterSelection",this.selectedOptions)}}},fue={class:"multiselect-wrap--small"};function gue(e,t,n,s,a,o){const i=W("multiselect");return p(),E("div",fue,[S(i,{modelValue:a.selectedOptions,"onUpdate:modelValue":[t[0]||(t[0]=l=>a.selectedOptions=l),o.handleInput],class:"no-margin",options:e.options,"track-by":"id",label:"name",multiple:"","close-on-select":!1,"clear-on-select":!1,"hide-selected":"",placeholder:e.$t("CSAT_REPORTS.FILTERS.AGENTS.PLACEHOLDER"),"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":e.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE")},null,8,["modelValue","options","placeholder","select-label","deselect-label","onUpdate:modelValue"])])}const _ue=De(hue,[["render",gue]]),vue={name:"ReportsFiltersLabels",emits:["labelsFilterSelection"],data(){return{selectedOption:null}},computed:{...mt({options:"labels/getLabels"})},mounted(){this.$store.dispatch("labels/get")},methods:{handleInput(){this.$emit("labelsFilterSelection",this.selectedOption)}}},Eue={class:"multiselect-wrap--small"},bue={class:"flex items-center min-w-0 gap-2"},Tue={class:"my-0 text-n-slate-12"},Sue={class:"flex items-center gap-2"},Aue={class:"my-0 text-n-slate-12 truncate min-w-0"};function yue(e,t,n,s,a,o){const i=W("multiselect");return p(),E("div",Eue,[S(i,{modelValue:a.selectedOption,"onUpdate:modelValue":[t[0]||(t[0]=l=>a.selectedOption=l),o.handleInput],class:"no-margin",placeholder:e.$t("LABEL_REPORTS.FILTER_DROPDOWN_LABEL"),label:"title","track-by":"id",options:e.options,"option-height":24,"show-labels":!1},{singleLabel:Y(l=>[m("div",bue,[m("div",{style:Zt({backgroundColor:l.option.color}),class:"w-5 h-5 rounded-full"},null,4),m("span",Tue,I(l.option.title),1)])]),option:Y(l=>[m("div",Sue,[m("div",{style:Zt({backgroundColor:l.option.color}),class:"flex-shrink-0 w-5 h-5 border border-solid rounded-full border-n-weak"},null,4),m("span",Aue,I(l.option.title),1)])]),_:1},8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const Iue=De(vue,[["render",yue]]),Cue={name:"ReportsFiltersInboxes",emits:["inboxFilterSelection"],data(){return{selectedOption:null}},computed:{...mt({options:"inboxes/getInboxes"})},mounted(){this.$store.dispatch("inboxes/get")},methods:{handleInput(){this.$emit("inboxFilterSelection",this.selectedOption)}}},Nue={class:"multiselect-wrap--small"};function Oue(e,t,n,s,a,o){const i=W("multiselect");return p(),E("div",Nue,[S(i,{modelValue:a.selectedOption,"onUpdate:modelValue":[t[0]||(t[0]=l=>a.selectedOption=l),o.handleInput],class:"no-margin",placeholder:e.$t("INBOX_REPORTS.FILTER_DROPDOWN_LABEL"),label:"name","track-by":"id",options:e.options,"option-height":24,"show-labels":!1},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const Rue=De(Cue,[["render",Oue]]),xue={name:"ReportsFiltersTeams",emits:["teamFilterSelection"],data(){return{selectedOption:null}},computed:{...mt({options:"teams/getTeams"})},mounted(){this.$store.dispatch("teams/get")},methods:{handleInput(){this.$emit("teamFilterSelection",this.selectedOption)}}},wue={class:"multiselect-wrap--small"};function $ue(e,t,n,s,a,o){const i=W("multiselect");return p(),E("div",wue,[S(i,{modelValue:a.selectedOption,"onUpdate:modelValue":[t[0]||(t[0]=l=>a.selectedOption=l),o.handleInput],class:"no-margin",placeholder:e.$t("TEAM_REPORTS.FILTER_DROPDOWN_LABEL"),label:"name","track-by":"id",options:e.options,"option-height":24,"show-labels":!1},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const Mue=De(xue,[["render",$ue]]),Lue={name:"ReportFiltersRatings",emits:["ratingFilterSelection"],data(){return{selectedOption:null,options:cl.reverse().map(t=>({...t,label:this.$t(t.translationKey)}))}},methods:{handleInput(e){this.$emit("ratingFilterSelection",e)}}},Due={class:"multiselect-wrap--small"};function Pue(e,t,n,s,a,o){const i=W("multiselect");return p(),E("div",Due,[S(i,{modelValue:a.selectedOption,"onUpdate:modelValue":[t[0]||(t[0]=l=>a.selectedOption=l),o.handleInput],class:"no-margin","option-height":24,placeholder:e.$t("FORMS.MULTISELECT.SELECT_ONE"),options:a.options,"show-labels":!1,"track-by":"value",label:"label"},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const kue=De(Lue,[["render",Pue]]),Bue={components:{WootDateRangePicker:zy,ReportsFiltersDateRange:rue,ReportsFiltersDateGroupBy:mue,ReportsFiltersAgents:_ue,ReportsFiltersLabels:Iue,ReportsFiltersInboxes:Rue,ReportsFiltersTeams:Mue,ReportsFiltersRatings:kue,ToggleSwitch:va},props:{showGroupByFilter:{type:Boolean,default:!1},showAgentsFilter:{type:Boolean,default:!1},showLabelsFilter:{type:Boolean,default:!1},showInboxFilter:{type:Boolean,default:!1},showRatingFilter:{type:Boolean,default:!1},showTeamFilter:{type:Boolean,default:!1},showBusinessHoursSwitch:{type:Boolean,default:!0}},emits:["filterChange"],data(){return{selectedDateRange:or.LAST_7_DAYS,selectedGroupByFilter:null,selectedLabel:null,selectedInbox:null,selectedTeam:null,selectedRating:null,selectedAgents:[],customDateRange:[new Date,new Date],businessHoursSelected:!1}},computed:{isDateRangeSelected(){return this.selectedDateRange.id===or.CUSTOM_DATE_RANGE.id},isGroupByPossible(){return this.selectedDateRange.id!==or.LAST_7_DAYS.id},to(){return this.isDateRangeSelected?bd(this.customDateRange[1]):bd(new Date)},from(){if(this.isDateRangeSelected)return Ed(this.customDateRange[0]);const{offset:e}=this.selectedDateRange,t=xo(new Date,e);return Ed(t)},validGroupOptions(){return this.selectedDateRange.groupByOptions},validGroupBy(){return this.selectedGroupByFilter?this.validGroupOptions.map(t=>t.id).includes(this.selectedGroupByFilter.id)?this.selectedGroupByFilter:this.validGroupOptions[0]:this.validGroupOptions[0]}},mounted(){this.emitChange()},methods:{emitChange(){const{from:e,to:t,selectedGroupByFilter:n,businessHoursSelected:s,selectedAgents:a,selectedLabel:o,selectedInbox:i,selectedTeam:l,selectedRating:r}=this;this.$emit("filterChange",{from:e,to:t,groupBy:n,businessHours:s,selectedAgents:a,selectedLabel:o,selectedInbox:i,selectedTeam:l,selectedRating:r})},onDateRangeChange(e){this.selectedDateRange=e,this.selectedGroupByFilter=this.validGroupBy,this.emitChange()},onCustomDateRangeChange(e){this.customDateRange=e,this.selectedGroupByFilter=this.validGroupBy,this.emitChange()},onGroupingChange(e){this.selectedGroupByFilter=e,this.emitChange()},handleAgentsFilterSelection(e){this.selectedAgents=e,this.emitChange()},handleLabelsFilterSelection(e){this.selectedLabel=e,this.emitChange()},handleInboxFilterSelection(e){this.selectedInbox=e,this.emitChange()},handleTeamFilterSelection(e){this.selectedTeam=e,this.emitChange()},handleRatingFilterSelection(e){this.selectedRating=e,this.emitChange()}}},Uue={class:"flex flex-col justify-between gap-3 md:flex-row"},Fue={class:"w-full grid gap-y-2 gap-x-1.5 grid-cols-[repeat(auto-fill,minmax(250px,1fr))]"},Gue={key:0,class:"flex items-center"},Vue={class:"mx-2 text-sm whitespace-nowrap"};function Hue(e,t,n,s,a,o){const i=W("ReportsFiltersDateRange"),l=W("WootDateRangePicker"),r=W("ReportsFiltersDateGroupBy"),c=W("ReportsFiltersAgents"),u=W("ReportsFiltersLabels"),d=W("ReportsFiltersTeams"),h=W("ReportsFiltersInboxes"),g=W("ReportsFiltersRatings"),f=W("ToggleSwitch");return p(),E("div",Uue,[m("div",Fue,[S(i,{onOnRangeChange:o.onDateRangeChange},null,8,["onOnRangeChange"]),o.isDateRangeSelected?(p(),L(l,{key:0,"show-range":"",class:"no-margin auto-width",value:a.customDateRange,"confirm-text":e.$t("REPORT.CUSTOM_DATE_RANGE.CONFIRM"),placeholder:e.$t("REPORT.CUSTOM_DATE_RANGE.PLACEHOLDER"),onChange:o.onCustomDateRangeChange},null,8,["value","confirm-text","placeholder","onChange"])):$("",!0),n.showGroupByFilter&&o.isGroupByPossible?(p(),L(r,{key:1,"valid-group-options":o.validGroupOptions,"selected-option":a.selectedGroupByFilter,onOnGroupingChange:o.onGroupingChange},null,8,["valid-group-options","selected-option","onOnGroupingChange"])):$("",!0),n.showAgentsFilter?(p(),L(c,{key:2,onAgentsFilterSelection:o.handleAgentsFilterSelection},null,8,["onAgentsFilterSelection"])):$("",!0),n.showLabelsFilter?(p(),L(u,{key:3,onLabelsFilterSelection:o.handleLabelsFilterSelection},null,8,["onLabelsFilterSelection"])):$("",!0),n.showTeamFilter?(p(),L(d,{key:4,onTeamFilterSelection:o.handleTeamFilterSelection},null,8,["onTeamFilterSelection"])):$("",!0),n.showInboxFilter?(p(),L(h,{key:5,onInboxFilterSelection:o.handleInboxFilterSelection},null,8,["onInboxFilterSelection"])):$("",!0),n.showRatingFilter?(p(),L(g,{key:6,onRatingFilterSelection:o.handleRatingFilterSelection},null,8,["onRatingFilterSelection"])):$("",!0)]),n.showBusinessHoursSwitch?(p(),E("div",Gue,[m("span",Vue,I(e.$t("REPORT.BUSINESS_HOURS")),1),m("span",null,[S(f,{modelValue:a.businessHoursSelected,"onUpdate:modelValue":t[0]||(t[0]=b=>a.businessHoursSelected=b),onChange:o.emitChange},null,8,["modelValue","onChange"])])])):$("",!0)])}const Pp=De(Bue,[["render",Hue]]);function jy(e="getAccountSummary",t="getAccountSummaryFetchingStatus"){const n=_e(e),s=_e(t),a=l=>{if(!n.value.previous[l])return 0;const r=n.value[l]-n.value.previous[l];return Math.round(r/n.value.previous[l]*100)},o=l=>["avg_first_response_time","avg_resolution_time","reply_time"].includes(l);return{calculateTrend:a,isAverageMetricType:o,displayMetric:l=>o(l)?cg(n.value[l]):Number(n.value[l]||"").toLocaleString(),fetchingStatus:s}}const Wue={class:"text-n-slate-11"},zue={class:"text-sm"},Yue={class:"flex items-end text-n-slate-12"},jue={key:0},Kue={key:1,class:"text-n-ruby-10 text-sm"},Xue={key:2,class:"text-xl font-medium"},que={key:3,class:"text-xs ml-4 flex items-center mb-0.5"},Zue={__name:"ChartStats",props:{metric:{type:Object,default:()=>({})},accountSummaryKey:{type:String,default:"getAccountSummary"},summaryFetchingKey:{type:String,default:"getAccountSummaryFetchingStatus"}},setup(e){const t=e,{t:n}=be(),{calculateTrend:s,displayMetric:a,isAverageMetricType:o,fetchingStatus:i}=jy(t.accountSummaryKey,t.summaryFetchingKey),l=(r,c)=>o(c)?r>0?"border-n-ruby-9 text-n-ruby-9":"border-n-teal-10 text-n-teal-10":r<0?"border-n-ruby-9 text-n-ruby-9":"border-n-teal-10 text-n-teal-10";return(r,c)=>(p(),E("div",Wue,[m("span",zue,I(e.metric.NAME),1),m("div",Yue,[C(i)===C(Tu).FETCHING?(p(),E("div",jue,[S(An)])):C(i)===C(Tu).FAILED?(p(),E("div",Kue,I(C(n)("REPORT.SUMMARY_FETCHING_FAILED")),1)):C(i)===C(Tu).FINISHED?(p(),E("div",Xue,I(C(a)(e.metric.KEY)),1)):$("",!0),e.metric.trend&&C(i)===C(Tu).FINISHED?(p(),E("div",que,[e.metric.trend<0?(p(),E("div",{key:0,class:ae(["h-0 w-0 border-x-4 medium border-x-transparent border-t-[8px] mr-1",l(e.metric.trend,e.metric.KEY)])},null,2)):(p(),E("div",{key:1,class:ae(["h-0 w-0 border-x-4 medium border-x-transparent border-b-[8px] mr-1",l(e.metric.trend,e.metric.KEY)])},null,2)),m("span",{class:ae(["font-medium",l(e.metric.trend,e.metric.KEY)])},I(C(s)(e.metric.KEY))+"% ",3)])):$("",!0)])]))}},Que={components:{ChartStats:Zue,BarChart:$S},props:{groupBy:{type:Object,default:()=>({})},accountSummaryKey:{type:String,default:"getAccountSummary"},summaryFetchingKey:{type:String,default:"getAccountSummaryFetchingStatus"},reportKeys:{type:Object,default:()=>({CONVERSATIONS:"conversations_count",INCOMING_MESSAGES:"incoming_messages_count",OUTGOING_MESSAGES:"outgoing_messages_count",FIRST_RESPONSE_TIME:"avg_first_response_time",RESOLUTION_TIME:"avg_resolution_time",RESOLUTION_COUNT:"resolutions_count",REPLY_TIME:"reply_time"})}},setup(e){const{calculateTrend:t,isAverageMetricType:n}=jy(e.accountSummaryKey);return{calculateTrend:t,isAverageMetricType:n}},computed:{...mt({accountReport:"getAccountReports"}),metrics(){const e=Object.keys(this.reportKeys),t={FIRST_RESPONSE_TIME:this.$t("REPORT.METRICS.FIRST_RESPONSE_TIME.INFO_TEXT"),RESOLUTION_TIME:this.$t("REPORT.METRICS.RESOLUTION_TIME.INFO_TEXT")};return e.map(n=>({NAME:this.$t(`REPORT.METRICS.${n}.NAME`),KEY:this.reportKeys[n],DESC:this.$t(`REPORT.METRICS.${n}.DESC`),INFO_TEXT:t[n],TOOLTIP_TEXT:`REPORT.METRICS.${n}.TOOLTIP_TEXT`,trend:this.calculateTrend(this.reportKeys[n])}))}},methods:{getCollection(e){if(!this.accountReport.data[e.KEY])return{};const t=this.accountReport.data[e.KEY],n=t.map(a=>{var o,i,l;if(((o=this.groupBy)==null?void 0:o.period)===Is[2].period){let r=new Date(rc(a.timestamp));const c=r.getDate()-r.getDay(),u=c+6,d=new Date(r.setDate(c)),h=new Date(r.setDate(u));return`${Yn(d,"dd-MMM")} - ${Yn(h,"dd-MMM")}`}return((i=this.groupBy)==null?void 0:i.period)===Is[3].period?Yn(rc(a.timestamp),"MMM-yyyy"):((l=this.groupBy)==null?void 0:l.period)===Is[4].period?Yn(rc(a.timestamp),"yyyy"):Yn(rc(a.timestamp),"dd-MMM")}),s=Mb[e.KEY].datasets.map(a=>{switch(a.type){case"bar":return{...a,yAxisID:"y",label:e.NAME,data:t.map(o=>o.value)};case"line":return{...a,yAxisID:"y",label:this.metrics[0].NAME,data:t.map(o=>o.count)};default:return a}});return{labels:n,datasets:s}},getChartOptions(e){const t={scales:Mb[e.KEY].scales};return this.isAverageMetricType(e.KEY)&&(t.plugins={tooltip:{callbacks:{label:({raw:n,dataIndex:s})=>{var a;return this.$t(e.TOOLTIP_TEXT,{metricValue:cg(n||0),conversationCount:((a=this.accountReport.data[e.KEY][s])==null?void 0:a.count)||0})}}}}),t}}},Jue={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 px-6 py-5 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2"},ede={class:"mt-4 h-72"},tde={key:1,class:"flex items-center justify-center h-72"},nde={key:1,class:"text-sm text-n-slate-10"};function sde(e,t,n,s,a,o){const i=W("ChartStats"),l=W("woot-loading-state"),r=W("BarChart");return p(),E("div",Jue,[(p(!0),E(ue,null,Ae(o.metrics,c=>(p(),E("div",{key:c.KEY,class:"p-4 mb-3 rounded-md"},[S(i,{metric:c,"account-summary-key":n.accountSummaryKey,"summary-fetching-key":n.summaryFetchingKey},null,8,["metric","account-summary-key","summary-fetching-key"]),m("div",ede,[e.accountReport.isFetching[c.KEY]?(p(),L(l,{key:0,class:"text-xs",message:e.$t("REPORT.LOADING_CHART")},null,8,["message"])):(p(),E("div",tde,[e.accountReport.data[c.KEY].length?(p(),L(r,{key:0,collection:o.getCollection(c),"chart-options":o.getChartOptions(c)},null,8,["collection","chart-options"])):(p(),E("span",nde,I(e.$t("REPORT.NO_ENOUGH_DATA")),1))]))])]))),128))])}const B_=De(Que,[["render",sde]]),ade={class:"flex flex-col gap-1 pt-10 pb-5"},ode={key:0},ide={class:"flex justify-between w-full gap-5"},lde={class:"flex flex-col gap-2"},rde={class:"text-xl font-medium text-n-slate-12"},cde={key:0,class:"text-n-slate-12 mt-2"},ude={class:"flex-shrink-0"},Lo={__name:"ReportHeader",props:{headerTitle:{required:!0,type:String},headerDescription:{type:String,default:""},hasBackButton:{type:Boolean,default:!1}},setup(e){return(t,n)=>(p(),E("section",ade,[e.hasBackButton?(p(),E("div",ode,[S(Rr,{compact:""})])):$("",!0),m("div",ide,[m("div",lde,[m("div",null,[m("span",rde,I(e.headerTitle),1),e.headerDescription?(p(),E("p",cde,I(e.headerDescription),1)):$("",!0)])]),m("div",ude,[We(t.$slots,"default")])])]))}},dde={CONVERSATIONS:"conversations_count",INCOMING_MESSAGES:"incoming_messages_count",OUTGOING_MESSAGES:"outgoing_messages_count",FIRST_RESPONSE_TIME:"avg_first_response_time",RESOLUTION_TIME:"avg_resolution_time",RESOLUTION_COUNT:"resolutions_count",REPLY_TIME:"reply_time"},pde={name:"ConversationReports",components:{ReportHeader:Lo,ReportFilterSelector:Pp,ReportContainer:B_,V4Button:te},data(){return{from:0,to:0,groupBy:Is[1],businessHours:!1}},methods:{fetchAllData(){this.fetchAccountSummary(),this.fetchChartData()},fetchAccountSummary(){try{this.$store.dispatch("fetchAccountSummary",this.getRequestPayload())}catch{ne(this.$t("REPORT.SUMMARY_FETCHING_FAILED"))}},fetchChartData(){["CONVERSATIONS","INCOMING_MESSAGES","OUTGOING_MESSAGES","FIRST_RESPONSE_TIME","RESOLUTION_TIME","RESOLUTION_COUNT","REPLY_TIME"].forEach(async e=>{try{await this.$store.dispatch("fetchAccountReport",{metric:dde[e],...this.getRequestPayload()})}catch{ne(this.$t("REPORT.DATA_FETCHING_FAILED"))}})},getRequestPayload(){const{from:e,to:t,groupBy:n,businessHours:s}=this;return{from:e,to:t,groupBy:n==null?void 0:n.period,businessHours:s}},downloadAgentReports(){const{from:e,to:t}=this,n=Jc({type:"agent",to:t,businessHours:this.businessHours});this.$store.dispatch("downloadAgentReports",{from:e,to:t,fileName:n,businessHours:this.businessHours})},onFilterChange({from:e,to:t,groupBy:n,businessHours:s}){this.from=e,this.to=t,this.groupBy=n,this.businessHours=s,this.fetchAllData(),zt(er.FILTER_REPORT,{filterValue:{from:e,to:t,groupBy:n,businessHours:s},reportType:"conversations"})}}},mde={class:"flex flex-col gap-3"};function hde(e,t,n,s,a,o){const i=W("V4Button"),l=W("ReportHeader"),r=W("ReportFilterSelector"),c=W("ReportContainer");return p(),E(ue,null,[S(l,{"header-title":e.$t("REPORT.HEADER")},{default:Y(()=>[S(i,{label:e.$t("REPORT.DOWNLOAD_AGENT_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:o.downloadAgentReports},null,8,["label","onClick"])]),_:1},8,["header-title"]),m("div",mde,[S(r,{"show-agents-filter":!1,"show-group-by-filter":"",onFilterChange:o.onFilterChange},null,8,["onFilterChange"]),S(c,{"group-by":a.groupBy},null,8,["group-by"])])],64)}const fde=De(pde,[["render",hde]]);/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function kp(){return{accessor:(e,t)=>typeof e=="function"?{...t,accessorFn:e}:{...t,accessorKey:e},display:e=>e,group:e=>e}}function Ii(e,t){return typeof e=="function"?e(t):e}function Ra(e,t){return n=>{t.setState(s=>({...s,[e]:Ii(n,s[e])}))}}function Bp(e){return e instanceof Function}function gde(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function _de(e,t){const n=[],s=a=>{a.forEach(o=>{n.push(o);const i=t(o);i!=null&&i.length&&s(i)})};return s(e),n}function Vt(e,t,n){let s=[],a;return o=>{let i;n.key&&n.debug&&(i=Date.now());const l=e(o);if(!(l.length!==s.length||l.some((u,d)=>s[d]!==u)))return a;s=l;let c;if(n.key&&n.debug&&(c=Date.now()),a=t(...l),n==null||n.onChange==null||n.onChange(a),n.key&&n.debug&&n!=null&&n.debug()){const u=Math.round((Date.now()-i)*100)/100,d=Math.round((Date.now()-c)*100)/100,h=d/16,g=(f,b)=>{for(f=String(f);f.length<b;)f=" "+f;return f};console.info(`%c ${g(d,5)} /${g(u,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*h,120))}deg 100% 31%);`,n==null?void 0:n.key)}return a}}function Ht(e,t,n,s){return{debug:()=>{var a;return(a=e==null?void 0:e.debugAll)!=null?a:e[t]},key:!1,onChange:s}}function vde(e,t,n,s){const a=()=>{var i;return(i=o.getValue())!=null?i:e.options.renderFallbackValue},o={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(s),renderValue:a,getContext:Vt(()=>[e,n,t,o],(i,l,r,c)=>({table:i,column:l,row:r,cell:c,getValue:c.getValue,renderValue:c.renderValue}),Ht(e.options,"debugCells"))};return e._features.forEach(i=>{i.createCell==null||i.createCell(o,n,t,e)},{}),o}function Ede(e,t,n,s){var a,o;const l={...e._getDefaultColumnDef(),...t},r=l.accessorKey;let c=(a=(o=l.id)!=null?o:r?typeof String.prototype.replaceAll=="function"?r.replaceAll(".","_"):r.replace(/\./g,"_"):void 0)!=null?a:typeof l.header=="string"?l.header:void 0,u;if(l.accessorFn?u=l.accessorFn:r&&(r.includes(".")?u=h=>{let g=h;for(const b of r.split(".")){var f;g=(f=g)==null?void 0:f[b]}return g}:u=h=>h[l.accessorKey]),!c)throw new Error;let d={id:`${String(c)}`,accessorFn:u,parent:s,depth:n,columnDef:l,columns:[],getFlatColumns:Vt(()=>[!0],()=>{var h;return[d,...(h=d.columns)==null?void 0:h.flatMap(g=>g.getFlatColumns())]},Ht(e.options,"debugColumns")),getLeafColumns:Vt(()=>[e._getOrderColumnsFn()],h=>{var g;if((g=d.columns)!=null&&g.length){let f=d.columns.flatMap(b=>b.getLeafColumns());return h(f)}return[d]},Ht(e.options,"debugColumns"))};for(const h of e._features)h.createColumn==null||h.createColumn(d,e);return d}const Bs="debugHeaders";function Db(e,t,n){var s;let o={id:(s=n.id)!=null?s:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const i=[],l=r=>{r.subHeaders&&r.subHeaders.length&&r.subHeaders.map(l),i.push(r)};return l(o),i},getContext:()=>({table:e,header:o,column:t})};return e._features.forEach(i=>{i.createHeader==null||i.createHeader(o,e)}),o}const bde={createTable:e=>{e.getHeaderGroups=Vt(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,s,a)=>{var o,i;const l=(o=s==null?void 0:s.map(d=>n.find(h=>h.id===d)).filter(Boolean))!=null?o:[],r=(i=a==null?void 0:a.map(d=>n.find(h=>h.id===d)).filter(Boolean))!=null?i:[],c=n.filter(d=>!(s!=null&&s.includes(d.id))&&!(a!=null&&a.includes(d.id)));return Hu(t,[...l,...c,...r],e)},Ht(e.options,Bs)),e.getCenterHeaderGroups=Vt(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,s,a)=>(n=n.filter(o=>!(s!=null&&s.includes(o.id))&&!(a!=null&&a.includes(o.id))),Hu(t,n,e,"center")),Ht(e.options,Bs)),e.getLeftHeaderGroups=Vt(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,s)=>{var a;const o=(a=s==null?void 0:s.map(i=>n.find(l=>l.id===i)).filter(Boolean))!=null?a:[];return Hu(t,o,e,"left")},Ht(e.options,Bs)),e.getRightHeaderGroups=Vt(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,s)=>{var a;const o=(a=s==null?void 0:s.map(i=>n.find(l=>l.id===i)).filter(Boolean))!=null?a:[];return Hu(t,o,e,"right")},Ht(e.options,Bs)),e.getFooterGroups=Vt(()=>[e.getHeaderGroups()],t=>[...t].reverse(),Ht(e.options,Bs)),e.getLeftFooterGroups=Vt(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),Ht(e.options,Bs)),e.getCenterFooterGroups=Vt(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),Ht(e.options,Bs)),e.getRightFooterGroups=Vt(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),Ht(e.options,Bs)),e.getFlatHeaders=Vt(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),Ht(e.options,Bs)),e.getLeftFlatHeaders=Vt(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),Ht(e.options,Bs)),e.getCenterFlatHeaders=Vt(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),Ht(e.options,Bs)),e.getRightFlatHeaders=Vt(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),Ht(e.options,Bs)),e.getCenterLeafHeaders=Vt(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),Ht(e.options,Bs)),e.getLeftLeafHeaders=Vt(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),Ht(e.options,Bs)),e.getRightLeafHeaders=Vt(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),Ht(e.options,Bs)),e.getLeafHeaders=Vt(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,s)=>{var a,o,i,l,r,c;return[...(a=(o=t[0])==null?void 0:o.headers)!=null?a:[],...(i=(l=n[0])==null?void 0:l.headers)!=null?i:[],...(r=(c=s[0])==null?void 0:c.headers)!=null?r:[]].map(u=>u.getLeafHeaders()).flat()},Ht(e.options,Bs))}};function Hu(e,t,n,s){var a,o;let i=0;const l=function(h,g){g===void 0&&(g=1),i=Math.max(i,g),h.filter(f=>f.getIsVisible()).forEach(f=>{var b;(b=f.columns)!=null&&b.length&&l(f.columns,g+1)},0)};l(e);let r=[];const c=(h,g)=>{const f={depth:g,id:[s,`${g}`].filter(Boolean).join("_"),headers:[]},b=[];h.forEach(A=>{const v=[...b].reverse()[0],T=A.column.depth===f.depth;let _,N=!1;if(T&&A.column.parent?_=A.column.parent:(_=A.column,N=!0),v&&(v==null?void 0:v.column)===_)v.subHeaders.push(A);else{const R=Db(n,_,{id:[s,g,_.id,A==null?void 0:A.id].filter(Boolean).join("_"),isPlaceholder:N,placeholderId:N?`${b.filter(O=>O.column===_).length}`:void 0,depth:g,index:b.length});R.subHeaders.push(A),b.push(R)}f.headers.push(A),A.headerGroup=f}),r.push(f),g>0&&c(b,g-1)},u=t.map((h,g)=>Db(n,h,{depth:i,index:g}));c(u,i-1),r.reverse();const d=h=>h.filter(f=>f.column.getIsVisible()).map(f=>{let b=0,A=0,v=[0];f.subHeaders&&f.subHeaders.length?(v=[],d(f.subHeaders).forEach(_=>{let{colSpan:N,rowSpan:R}=_;b+=N,v.push(R)})):b=1;const T=Math.min(...v);return A=A+T,f.colSpan=b,f.rowSpan=A,{colSpan:b,rowSpan:A}});return d((a=(o=r[0])==null?void 0:o.headers)!=null?a:[]),r}const Tde=(e,t,n,s,a,o,i)=>{let l={id:t,index:s,original:n,depth:a,parentId:i,_valuesCache:{},_uniqueValuesCache:{},getValue:r=>{if(l._valuesCache.hasOwnProperty(r))return l._valuesCache[r];const c=e.getColumn(r);if(c!=null&&c.accessorFn)return l._valuesCache[r]=c.accessorFn(l.original,s),l._valuesCache[r]},getUniqueValues:r=>{if(l._uniqueValuesCache.hasOwnProperty(r))return l._uniqueValuesCache[r];const c=e.getColumn(r);if(c!=null&&c.accessorFn)return c.columnDef.getUniqueValues?(l._uniqueValuesCache[r]=c.columnDef.getUniqueValues(l.original,s),l._uniqueValuesCache[r]):(l._uniqueValuesCache[r]=[l.getValue(r)],l._uniqueValuesCache[r])},renderValue:r=>{var c;return(c=l.getValue(r))!=null?c:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>_de(l.subRows,r=>r.subRows),getParentRow:()=>l.parentId?e.getRow(l.parentId,!0):void 0,getParentRows:()=>{let r=[],c=l;for(;;){const u=c.getParentRow();if(!u)break;r.push(u),c=u}return r.reverse()},getAllCells:Vt(()=>[e.getAllLeafColumns()],r=>r.map(c=>vde(e,l,c,c.id)),Ht(e.options,"debugRows")),_getAllCellsByColumnId:Vt(()=>[l.getAllCells()],r=>r.reduce((c,u)=>(c[u.column.id]=u,c),{}),Ht(e.options,"debugRows"))};for(let r=0;r<e._features.length;r++){const c=e._features[r];c==null||c.createRow==null||c.createRow(l,e)}return l},Sde={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},Ky=(e,t,n)=>{var s,a;const o=n==null||(s=n.toString())==null?void 0:s.toLowerCase();return!!(!((a=e.getValue(t))==null||(a=a.toString())==null||(a=a.toLowerCase())==null)&&a.includes(o))};Ky.autoRemove=e=>ro(e);const Xy=(e,t,n)=>{var s;return!!(!((s=e.getValue(t))==null||(s=s.toString())==null)&&s.includes(n))};Xy.autoRemove=e=>ro(e);const qy=(e,t,n)=>{var s;return((s=e.getValue(t))==null||(s=s.toString())==null?void 0:s.toLowerCase())===(n==null?void 0:n.toLowerCase())};qy.autoRemove=e=>ro(e);const Zy=(e,t,n)=>{var s;return(s=e.getValue(t))==null?void 0:s.includes(n)};Zy.autoRemove=e=>ro(e)||!(e!=null&&e.length);const Qy=(e,t,n)=>!n.some(s=>{var a;return!((a=e.getValue(t))!=null&&a.includes(s))});Qy.autoRemove=e=>ro(e)||!(e!=null&&e.length);const Jy=(e,t,n)=>n.some(s=>{var a;return(a=e.getValue(t))==null?void 0:a.includes(s)});Jy.autoRemove=e=>ro(e)||!(e!=null&&e.length);const eI=(e,t,n)=>e.getValue(t)===n;eI.autoRemove=e=>ro(e);const tI=(e,t,n)=>e.getValue(t)==n;tI.autoRemove=e=>ro(e);const U_=(e,t,n)=>{let[s,a]=n;const o=e.getValue(t);return o>=s&&o<=a};U_.resolveFilterValue=e=>{let[t,n]=e,s=typeof t!="number"?parseFloat(t):t,a=typeof n!="number"?parseFloat(n):n,o=t===null||Number.isNaN(s)?-1/0:s,i=n===null||Number.isNaN(a)?1/0:a;if(o>i){const l=o;o=i,i=l}return[o,i]};U_.autoRemove=e=>ro(e)||ro(e[0])&&ro(e[1]);const Go={includesString:Ky,includesStringSensitive:Xy,equalsString:qy,arrIncludes:Zy,arrIncludesAll:Qy,arrIncludesSome:Jy,equals:eI,weakEquals:tI,inNumberRange:U_};function ro(e){return e==null||e===""}const Ade={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:Ra("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],s=n==null?void 0:n.getValue(e.id);return typeof s=="string"?Go.includesString:typeof s=="number"?Go.inNumberRange:typeof s=="boolean"||s!==null&&typeof s=="object"?Go.equals:Array.isArray(s)?Go.arrIncludes:Go.weakEquals},e.getFilterFn=()=>{var n,s;return Bp(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(s=t.options.filterFns)==null?void 0:s[e.columnDef.filterFn])!=null?n:Go[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,s,a;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((s=t.options.enableColumnFilters)!=null?s:!0)&&((a=t.options.enableFilters)!=null?a:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=t.getState().columnFilters)==null||(n=n.find(s=>s.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,s;return(n=(s=t.getState().columnFilters)==null?void 0:s.findIndex(a=>a.id===e.id))!=null?n:-1},e.setFilterValue=n=>{t.setColumnFilters(s=>{const a=e.getFilterFn(),o=s==null?void 0:s.find(u=>u.id===e.id),i=Ii(n,o?o.value:void 0);if(Pb(a,i,e)){var l;return(l=s==null?void 0:s.filter(u=>u.id!==e.id))!=null?l:[]}const r={id:e.id,value:i};if(o){var c;return(c=s==null?void 0:s.map(u=>u.id===e.id?r:u))!=null?c:[]}return s!=null&&s.length?[...s,r]:[r]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns(),s=a=>{var o;return(o=Ii(t,a))==null?void 0:o.filter(i=>{const l=n.find(r=>r.id===i.id);if(l){const r=l.getFilterFn();if(Pb(r,i.value,l))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(s)},e.resetColumnFilters=t=>{var n,s;e.setColumnFilters(t?[]:(n=(s=e.initialState)==null?void 0:s.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function Pb(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const yde=(e,t,n)=>n.reduce((s,a)=>{const o=a.getValue(e);return s+(typeof o=="number"?o:0)},0),Ide=(e,t,n)=>{let s;return n.forEach(a=>{const o=a.getValue(e);o!=null&&(s>o||s===void 0&&o>=o)&&(s=o)}),s},Cde=(e,t,n)=>{let s;return n.forEach(a=>{const o=a.getValue(e);o!=null&&(s<o||s===void 0&&o>=o)&&(s=o)}),s},Nde=(e,t,n)=>{let s,a;return n.forEach(o=>{const i=o.getValue(e);i!=null&&(s===void 0?i>=i&&(s=a=i):(s>i&&(s=i),a<i&&(a=i)))}),[s,a]},Ode=(e,t)=>{let n=0,s=0;if(t.forEach(a=>{let o=a.getValue(e);o!=null&&(o=+o)>=o&&(++n,s+=o)}),n)return s/n},Rde=(e,t)=>{if(!t.length)return;const n=t.map(o=>o.getValue(e));if(!gde(n))return;if(n.length===1)return n[0];const s=Math.floor(n.length/2),a=n.sort((o,i)=>o-i);return n.length%2!==0?a[s]:(a[s-1]+a[s])/2},xde=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),wde=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,$de=(e,t)=>t.length,$h={sum:yde,min:Ide,max:Cde,extent:Nde,mean:Ode,median:Rde,unique:xde,uniqueCount:wde,count:$de},Mde={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:Ra("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(s=>s!==e.id):[...n??[],e.id])},e.getCanGroup=()=>{var n,s;return((n=e.columnDef.enableGrouping)!=null?n:!0)&&((s=t.options.enableGrouping)!=null?s:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],s=n==null?void 0:n.getValue(e.id);if(typeof s=="number")return $h.sum;if(Object.prototype.toString.call(s)==="[object Date]")return $h.extent},e.getAggregationFn=()=>{var n,s;if(!e)throw new Error;return Bp(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(s=t.options.aggregationFns)==null?void 0:s[e.columnDef.aggregationFn])!=null?n:$h[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,s;e.setGrouping(t?[]:(n=(s=e.initialState)==null?void 0:s.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const s=t.getColumn(n);return s!=null&&s.columnDef.getGroupingValue?(e._groupingValuesCache[n]=s.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,s)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var a;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((a=n.subRows)!=null&&a.length)}}};function Lde(e,t,n){if(!(t!=null&&t.length)||!n)return e;const s=e.filter(o=>!t.includes(o.id));return n==="remove"?s:[...t.map(o=>e.find(i=>i.id===o)).filter(Boolean),...s]}const Dde={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:Ra("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=Vt(n=>[wc(t,n)],n=>n.findIndex(s=>s.id===e.id),Ht(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var s;return((s=wc(t,n)[0])==null?void 0:s.id)===e.id},e.getIsLastColumn=n=>{var s;const a=wc(t,n);return((s=a[a.length-1])==null?void 0:s.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=Vt(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,s)=>a=>{let o=[];if(!(t!=null&&t.length))o=a;else{const i=[...t],l=[...a];for(;l.length&&i.length;){const r=i.shift(),c=l.findIndex(u=>u.id===r);c>-1&&o.push(l.splice(c,1)[0])}o=[...o,...l]}return Lde(o,n,s)},Ht(e.options,"debugTable"))}},Mh=()=>({left:[],right:[]}),Pde={getInitialState:e=>({columnPinning:Mh(),...e}),getDefaultOptions:e=>({onColumnPinningChange:Ra("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const s=e.getLeafColumns().map(a=>a.id).filter(Boolean);t.setColumnPinning(a=>{var o,i;if(n==="right"){var l,r;return{left:((l=a==null?void 0:a.left)!=null?l:[]).filter(d=>!(s!=null&&s.includes(d))),right:[...((r=a==null?void 0:a.right)!=null?r:[]).filter(d=>!(s!=null&&s.includes(d))),...s]}}if(n==="left"){var c,u;return{left:[...((c=a==null?void 0:a.left)!=null?c:[]).filter(d=>!(s!=null&&s.includes(d))),...s],right:((u=a==null?void 0:a.right)!=null?u:[]).filter(d=>!(s!=null&&s.includes(d)))}}return{left:((o=a==null?void 0:a.left)!=null?o:[]).filter(d=>!(s!=null&&s.includes(d))),right:((i=a==null?void 0:a.right)!=null?i:[]).filter(d=>!(s!=null&&s.includes(d)))}})},e.getCanPin=()=>e.getLeafColumns().some(s=>{var a,o,i;return((a=s.columnDef.enablePinning)!=null?a:!0)&&((o=(i=t.options.enableColumnPinning)!=null?i:t.options.enablePinning)!=null?o:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(l=>l.id),{left:s,right:a}=t.getState().columnPinning,o=n.some(l=>s==null?void 0:s.includes(l)),i=n.some(l=>a==null?void 0:a.includes(l));return o?"left":i?"right":!1},e.getPinnedIndex=()=>{var n,s;const a=e.getIsPinned();return a?(n=(s=t.getState().columnPinning)==null||(s=s[a])==null?void 0:s.indexOf(e.id))!=null?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=Vt(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,s,a)=>{const o=[...s??[],...a??[]];return n.filter(i=>!o.includes(i.column.id))},Ht(t.options,"debugRows")),e.getLeftVisibleCells=Vt(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(n,s)=>(s??[]).map(o=>n.find(i=>i.column.id===o)).filter(Boolean).map(o=>({...o,position:"left"})),Ht(t.options,"debugRows")),e.getRightVisibleCells=Vt(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,s)=>(s??[]).map(o=>n.find(i=>i.column.id===o)).filter(Boolean).map(o=>({...o,position:"right"})),Ht(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,s;return e.setColumnPinning(t?Mh():(n=(s=e.initialState)==null?void 0:s.columnPinning)!=null?n:Mh())},e.getIsSomeColumnsPinned=t=>{var n;const s=e.getState().columnPinning;if(!t){var a,o;return!!((a=s.left)!=null&&a.length||(o=s.right)!=null&&o.length)}return!!((n=s[t])!=null&&n.length)},e.getLeftLeafColumns=Vt(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(s=>t.find(a=>a.id===s)).filter(Boolean),Ht(e.options,"debugColumns")),e.getRightLeafColumns=Vt(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(s=>t.find(a=>a.id===s)).filter(Boolean),Ht(e.options,"debugColumns")),e.getCenterLeafColumns=Vt(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,s)=>{const a=[...n??[],...s??[]];return t.filter(o=>!a.includes(o.id))},Ht(e.options,"debugColumns"))}},Wu={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Lh=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),kde={getDefaultColumnDef:()=>Wu,getInitialState:e=>({columnSizing:{},columnSizingInfo:Lh(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:Ra("columnSizing",e),onColumnSizingInfoChange:Ra("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,s,a;const o=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:Wu.minSize,(s=o??e.columnDef.size)!=null?s:Wu.size),(a=e.columnDef.maxSize)!=null?a:Wu.maxSize)},e.getStart=Vt(n=>[n,wc(t,n),t.getState().columnSizing],(n,s)=>s.slice(0,e.getIndex(n)).reduce((a,o)=>a+o.getSize(),0),Ht(t.options,"debugColumns")),e.getAfter=Vt(n=>[n,wc(t,n),t.getState().columnSizing],(n,s)=>s.slice(e.getIndex(n)+1).reduce((a,o)=>a+o.getSize(),0),Ht(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(n=>{let{[e.id]:s,...a}=n;return a})},e.getCanResize=()=>{var n,s;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((s=t.options.enableColumnResizing)!=null?s:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let n=0;const s=a=>{if(a.subHeaders.length)a.subHeaders.forEach(s);else{var o;n+=(o=a.column.getSize())!=null?o:0}};return s(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const s=t.getColumn(e.column.id),a=s==null?void 0:s.getCanResize();return o=>{if(!s||!a||(o.persist==null||o.persist(),Dh(o)&&o.touches&&o.touches.length>1))return;const i=e.getSize(),l=e?e.getLeafHeaders().map(v=>[v.column.id,v.column.getSize()]):[[s.id,s.getSize()]],r=Dh(o)?Math.round(o.touches[0].clientX):o.clientX,c={},u=(v,T)=>{typeof T=="number"&&(t.setColumnSizingInfo(_=>{var N,R;const O=t.options.columnResizeDirection==="rtl"?-1:1,x=(T-((N=_==null?void 0:_.startOffset)!=null?N:0))*O,w=Math.max(x/((R=_==null?void 0:_.startSize)!=null?R:0),-.999999);return _.columnSizingStart.forEach(D=>{let[M,P]=D;c[M]=Math.round(Math.max(P+P*w,0)*100)/100}),{..._,deltaOffset:x,deltaPercentage:w}}),(t.options.columnResizeMode==="onChange"||v==="end")&&t.setColumnSizing(_=>({..._,...c})))},d=v=>u("move",v),h=v=>{u("end",v),t.setColumnSizingInfo(T=>({...T,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g=n||typeof document<"u"?document:null,f={moveHandler:v=>d(v.clientX),upHandler:v=>{g==null||g.removeEventListener("mousemove",f.moveHandler),g==null||g.removeEventListener("mouseup",f.upHandler),h(v.clientX)}},b={moveHandler:v=>(v.cancelable&&(v.preventDefault(),v.stopPropagation()),d(v.touches[0].clientX),!1),upHandler:v=>{var T;g==null||g.removeEventListener("touchmove",b.moveHandler),g==null||g.removeEventListener("touchend",b.upHandler),v.cancelable&&(v.preventDefault(),v.stopPropagation()),h((T=v.touches[0])==null?void 0:T.clientX)}},A=Bde()?{passive:!1}:!1;Dh(o)?(g==null||g.addEventListener("touchmove",b.moveHandler,A),g==null||g.addEventListener("touchend",b.upHandler,A)):(g==null||g.addEventListener("mousemove",f.moveHandler,A),g==null||g.addEventListener("mouseup",f.upHandler,A)),t.setColumnSizingInfo(v=>({...v,startOffset:r,startSize:i,deltaOffset:0,deltaPercentage:0,columnSizingStart:l,isResizingColumn:s.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?Lh():(n=e.initialState.columnSizingInfo)!=null?n:Lh())},e.getTotalSize=()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?t:0}}};let zu=null;function Bde(){if(typeof zu=="boolean")return zu;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return zu=e,zu}function Dh(e){return e.type==="touchstart"}const Ude={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:Ra("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(s=>({...s,[e.id]:n??!e.getIsVisible()}))},e.getIsVisible=()=>{var n,s;const a=e.columns;return(n=a.length?a.some(o=>o.getIsVisible()):(s=t.getState().columnVisibility)==null?void 0:s[e.id])!=null?n:!0},e.getCanHide=()=>{var n,s;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((s=t.options.enableHiding)!=null?s:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=Vt(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(s=>s.column.getIsVisible()),Ht(t.options,"debugRows")),e.getVisibleCells=Vt(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,s,a)=>[...n,...s,...a],Ht(t.options,"debugRows"))},createTable:e=>{const t=(n,s)=>Vt(()=>[s(),s().filter(a=>a.getIsVisible()).map(a=>a.id).join("_")],a=>a.filter(o=>o.getIsVisible==null?void 0:o.getIsVisible()),Ht(e.options,"debugColumns"));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var s;e.setColumnVisibility(n?{}:(s=e.initialState.columnVisibility)!=null?s:{})},e.toggleAllColumnsVisible=n=>{var s;n=(s=n)!=null?s:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((a,o)=>({...a,[o.id]:n||!(o.getCanHide!=null&&o.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var s;e.toggleAllColumnsVisible((s=n.target)==null?void 0:s.checked)}}};function wc(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const Fde={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},Gde={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:Ra("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const s=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[t.id])==null?void 0:n.getValue();return typeof s=="string"||typeof s=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,s,a,o;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((s=t.options.enableGlobalFilter)!=null?s:!0)&&((a=t.options.enableFilters)!=null?a:!0)&&((o=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?o:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>Go.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:s}=e.options;return Bp(s)?s:s==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[s])!=null?t:Go[s]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},Vde={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:Ra("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var s,a;if(!t){e._queue(()=>{t=!0});return}if((s=(a=e.options.autoResetAll)!=null?a:e.options.autoResetExpanded)!=null?s:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=s=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(s),e.toggleAllRowsExpanded=s=>{s??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=s=>{var a,o;e.setExpanded(s?{}:(a=(o=e.initialState)==null?void 0:o.expanded)!=null?a:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(s=>s.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>s=>{s.persist==null||s.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const s=e.getState().expanded;return s===!0||Object.values(s).some(Boolean)},e.getIsAllRowsExpanded=()=>{const s=e.getState().expanded;return typeof s=="boolean"?s===!0:!(!Object.keys(s).length||e.getRowModel().flatRows.some(a=>!a.getIsExpanded()))},e.getExpandedDepth=()=>{let s=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(o=>{const i=o.split(".");s=Math.max(s,i.length)}),s},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(s=>{var a;const o=s===!0?!0:!!(s!=null&&s[e.id]);let i={};if(s===!0?Object.keys(t.getRowModel().rowsById).forEach(l=>{i[l]=!0}):i=s,n=(a=n)!=null?a:!o,!o&&n)return{...i,[e.id]:!0};if(o&&!n){const{[e.id]:l,...r}=i;return r}return s})},e.getIsExpanded=()=>{var n;const s=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:s===!0||s!=null&&s[e.id])},e.getCanExpand=()=>{var n,s,a;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((s=t.options.enableExpanding)!=null?s:!0)&&!!((a=e.subRows)!=null&&a.length)},e.getIsAllParentsExpanded=()=>{let n=!0,s=e;for(;n&&s.parentId;)s=t.getRow(s.parentId,!0),n=s.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},zf=0,Yf=10,Ph=()=>({pageIndex:zf,pageSize:Yf}),Hde={getInitialState:e=>({...e,pagination:{...Ph(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:Ra("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var s,a;if(!t){e._queue(()=>{t=!0});return}if((s=(a=e.options.autoResetAll)!=null?a:e.options.autoResetPageIndex)!=null?s:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=s=>{const a=o=>Ii(s,o);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(a)},e.resetPagination=s=>{var a;e.setPagination(s?Ph():(a=e.initialState.pagination)!=null?a:Ph())},e.setPageIndex=s=>{e.setPagination(a=>{let o=Ii(s,a.pageIndex);const i=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return o=Math.max(0,Math.min(o,i)),{...a,pageIndex:o}})},e.resetPageIndex=s=>{var a,o;e.setPageIndex(s?zf:(a=(o=e.initialState)==null||(o=o.pagination)==null?void 0:o.pageIndex)!=null?a:zf)},e.resetPageSize=s=>{var a,o;e.setPageSize(s?Yf:(a=(o=e.initialState)==null||(o=o.pagination)==null?void 0:o.pageSize)!=null?a:Yf)},e.setPageSize=s=>{e.setPagination(a=>{const o=Math.max(1,Ii(s,a.pageSize)),i=a.pageSize*a.pageIndex,l=Math.floor(i/o);return{...a,pageIndex:l,pageSize:o}})},e.setPageCount=s=>e.setPagination(a=>{var o;let i=Ii(s,(o=e.options.pageCount)!=null?o:-1);return typeof i=="number"&&(i=Math.max(-1,i)),{...a,pageCount:i}}),e.getPageOptions=Vt(()=>[e.getPageCount()],s=>{let a=[];return s&&s>0&&(a=[...new Array(s)].fill(null).map((o,i)=>i)),a},Ht(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:s}=e.getState().pagination,a=e.getPageCount();return a===-1?!0:a===0?!1:s<a-1},e.previousPage=()=>e.setPageIndex(s=>s-1),e.nextPage=()=>e.setPageIndex(s=>s+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var s;return(s=e.options.pageCount)!=null?s:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var s;return(s=e.options.rowCount)!=null?s:e.getPrePaginationRowModel().rows.length}}},kh=()=>({top:[],bottom:[]}),Wde={getInitialState:e=>({rowPinning:kh(),...e}),getDefaultOptions:e=>({onRowPinningChange:Ra("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,s,a)=>{const o=s?e.getLeafRows().map(r=>{let{id:c}=r;return c}):[],i=a?e.getParentRows().map(r=>{let{id:c}=r;return c}):[],l=new Set([...i,e.id,...o]);t.setRowPinning(r=>{var c,u;if(n==="bottom"){var d,h;return{top:((d=r==null?void 0:r.top)!=null?d:[]).filter(b=>!(l!=null&&l.has(b))),bottom:[...((h=r==null?void 0:r.bottom)!=null?h:[]).filter(b=>!(l!=null&&l.has(b))),...Array.from(l)]}}if(n==="top"){var g,f;return{top:[...((g=r==null?void 0:r.top)!=null?g:[]).filter(b=>!(l!=null&&l.has(b))),...Array.from(l)],bottom:((f=r==null?void 0:r.bottom)!=null?f:[]).filter(b=>!(l!=null&&l.has(b)))}}return{top:((c=r==null?void 0:r.top)!=null?c:[]).filter(b=>!(l!=null&&l.has(b))),bottom:((u=r==null?void 0:r.bottom)!=null?u:[]).filter(b=>!(l!=null&&l.has(b)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:s,enablePinning:a}=t.options;return typeof s=="function"?s(e):(n=s??a)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:s,bottom:a}=t.getState().rowPinning,o=n.some(l=>s==null?void 0:s.includes(l)),i=n.some(l=>a==null?void 0:a.includes(l));return o?"top":i?"bottom":!1},e.getPinnedIndex=()=>{var n,s;const a=e.getIsPinned();if(!a)return-1;const o=(n=a==="top"?t.getTopRows():t.getBottomRows())==null?void 0:n.map(i=>{let{id:l}=i;return l});return(s=o==null?void 0:o.indexOf(e.id))!=null?s:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,s;return e.setRowPinning(t?kh():(n=(s=e.initialState)==null?void 0:s.rowPinning)!=null?n:kh())},e.getIsSomeRowsPinned=t=>{var n;const s=e.getState().rowPinning;if(!t){var a,o;return!!((a=s.top)!=null&&a.length||(o=s.bottom)!=null&&o.length)}return!!((n=s[t])!=null&&n.length)},e._getPinnedRows=(t,n,s)=>{var a;return((a=e.options.keepPinnedRows)==null||a?(n??[]).map(i=>{const l=e.getRow(i,!0);return l.getIsAllParentsExpanded()?l:null}):(n??[]).map(i=>t.find(l=>l.id===i))).filter(Boolean).map(i=>({...i,position:s}))},e.getTopRows=Vt(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),Ht(e.options,"debugRows")),e.getBottomRows=Vt(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),Ht(e.options,"debugRows")),e.getCenterRows=Vt(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,n,s)=>{const a=new Set([...n??[],...s??[]]);return t.filter(o=>!a.has(o.id))},Ht(e.options,"debugRows"))}},zde={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:Ra("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const s={...n},a=e.getPreGroupedRowModel().flatRows;return t?a.forEach(o=>{o.getCanSelect()&&(s[o.id]=!0)}):a.forEach(o=>{delete s[o.id]}),s})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const s=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),a={...n};return e.getRowModel().rows.forEach(o=>{jf(a,o.id,s,!0,e)}),a}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=Vt(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?Bh(e,n):{rows:[],flatRows:[],rowsById:{}},Ht(e.options,"debugTable")),e.getFilteredSelectedRowModel=Vt(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?Bh(e,n):{rows:[],flatRows:[],rowsById:{}},Ht(e.options,"debugTable")),e.getGroupedSelectedRowModel=Vt(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?Bh(e,n):{rows:[],flatRows:[],rowsById:{}},Ht(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let s=!!(t.length&&Object.keys(n).length);return s&&t.some(a=>a.getCanSelect()&&!n[a.id])&&(s=!1),s},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(a=>a.getCanSelect()),{rowSelection:n}=e.getState();let s=!!t.length;return s&&t.some(a=>!n[a.id])&&(s=!1),s},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,s)=>{const a=e.getIsSelected();t.setRowSelection(o=>{var i;if(n=typeof n<"u"?n:!a,e.getCanSelect()&&a===n)return o;const l={...o};return jf(l,e.id,n,(i=s==null?void 0:s.selectChildren)!=null?i:!0,t),l})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return F_(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return Kf(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return Kf(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return s=>{var a;n&&e.toggleSelected((a=s.target)==null?void 0:a.checked)}}}},jf=(e,t,n,s,a)=>{var o;const i=a.getRow(t,!0);n?(i.getCanMultiSelect()||Object.keys(e).forEach(l=>delete e[l]),i.getCanSelect()&&(e[t]=!0)):delete e[t],s&&(o=i.subRows)!=null&&o.length&&i.getCanSelectSubRows()&&i.subRows.forEach(l=>jf(e,l.id,n,s,a))};function Bh(e,t){const n=e.getState().rowSelection,s=[],a={},o=function(i,l){return i.map(r=>{var c;const u=F_(r,n);if(u&&(s.push(r),a[r.id]=r),(c=r.subRows)!=null&&c.length&&(r={...r,subRows:o(r.subRows)}),u)return r}).filter(Boolean)};return{rows:o(t.rows),flatRows:s,rowsById:a}}function F_(e,t){var n;return(n=t[e.id])!=null?n:!1}function Kf(e,t,n){var s;if(!((s=e.subRows)!=null&&s.length))return!1;let a=!0,o=!1;return e.subRows.forEach(i=>{if(!(o&&!a)&&(i.getCanSelect()&&(F_(i,t)?o=!0:a=!1),i.subRows&&i.subRows.length)){const l=Kf(i,t);l==="all"?o=!0:(l==="some"&&(o=!0),a=!1)}}),a?"all":o?"some":!1}const Xf=/([0-9]+)/gm,Yde=(e,t,n)=>nI(Mi(e.getValue(n)).toLowerCase(),Mi(t.getValue(n)).toLowerCase()),jde=(e,t,n)=>nI(Mi(e.getValue(n)),Mi(t.getValue(n))),Kde=(e,t,n)=>G_(Mi(e.getValue(n)).toLowerCase(),Mi(t.getValue(n)).toLowerCase()),Xde=(e,t,n)=>G_(Mi(e.getValue(n)),Mi(t.getValue(n))),qde=(e,t,n)=>{const s=e.getValue(n),a=t.getValue(n);return s>a?1:s<a?-1:0},Zde=(e,t,n)=>G_(e.getValue(n),t.getValue(n));function G_(e,t){return e===t?0:e>t?1:-1}function Mi(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function nI(e,t){const n=e.split(Xf).filter(Boolean),s=t.split(Xf).filter(Boolean);for(;n.length&&s.length;){const a=n.shift(),o=s.shift(),i=parseInt(a,10),l=parseInt(o,10),r=[i,l].sort();if(isNaN(r[0])){if(a>o)return 1;if(o>a)return-1;continue}if(isNaN(r[1]))return isNaN(i)?-1:1;if(i>l)return 1;if(l>i)return-1}return n.length-s.length}const Qr={alphanumeric:Yde,alphanumericCaseSensitive:jde,text:Kde,textCaseSensitive:Xde,datetime:qde,basic:Zde},Qde={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:Ra("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let s=!1;for(const a of n){const o=a==null?void 0:a.getValue(e.id);if(Object.prototype.toString.call(o)==="[object Date]")return Qr.datetime;if(typeof o=="string"&&(s=!0,o.split(Xf).length>1))return Qr.alphanumeric}return s?Qr.text:Qr.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,s;if(!e)throw new Error;return Bp(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(s=t.options.sortingFns)==null?void 0:s[e.columnDef.sortingFn])!=null?n:Qr[e.columnDef.sortingFn]},e.toggleSorting=(n,s)=>{const a=e.getNextSortingOrder(),o=typeof n<"u"&&n!==null;t.setSorting(i=>{const l=i==null?void 0:i.find(g=>g.id===e.id),r=i==null?void 0:i.findIndex(g=>g.id===e.id);let c=[],u,d=o?n:a==="desc";if(i!=null&&i.length&&e.getCanMultiSort()&&s?l?u="toggle":u="add":i!=null&&i.length&&r!==i.length-1?u="replace":l?u="toggle":u="replace",u==="toggle"&&(o||a||(u="remove")),u==="add"){var h;c=[...i,{id:e.id,desc:d}],c.splice(0,c.length-((h=t.options.maxMultiSortColCount)!=null?h:Number.MAX_SAFE_INTEGER))}else u==="toggle"?c=i.map(g=>g.id===e.id?{...g,desc:d}:g):u==="remove"?c=i.filter(g=>g.id!==e.id):c=[{id:e.id,desc:d}];return c})},e.getFirstSortDir=()=>{var n,s;return((n=(s=e.columnDef.sortDescFirst)!=null?s:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var s,a;const o=e.getFirstSortDir(),i=e.getIsSorted();return i?i!==o&&((s=t.options.enableSortingRemoval)==null||s)&&(!(n&&(a=t.options.enableMultiRemove)!=null)||a)?!1:i==="desc"?"asc":"desc":o},e.getCanSort=()=>{var n,s;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((s=t.options.enableSorting)!=null?s:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,s;return(n=(s=e.columnDef.enableMultiSort)!=null?s:t.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const s=(n=t.getState().sorting)==null?void 0:n.find(a=>a.id===e.id);return s?s.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,s;return(n=(s=t.getState().sorting)==null?void 0:s.findIndex(a=>a.id===e.id))!=null?n:-1},e.clearSorting=()=>{t.setSorting(n=>n!=null&&n.length?n.filter(s=>s.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return s=>{n&&(s.persist==null||s.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(s):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,s;e.setSorting(t?[]:(n=(s=e.initialState)==null?void 0:s.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},Jde=[bde,Ude,Dde,Pde,Sde,Ade,Fde,Gde,Qde,Mde,Vde,Hde,Wde,zde,kde];function epe(e){var t,n;const s=[...Jde,...(t=e._features)!=null?t:[]];let a={_features:s};const o=a._features.reduce((h,g)=>Object.assign(h,g.getDefaultOptions==null?void 0:g.getDefaultOptions(a)),{}),i=h=>a.options.mergeOptions?a.options.mergeOptions(o,h):{...o,...h};let r={...{},...(n=e.initialState)!=null?n:{}};a._features.forEach(h=>{var g;r=(g=h.getInitialState==null?void 0:h.getInitialState(r))!=null?g:r});const c=[];let u=!1;const d={_features:s,options:{...o,...e},initialState:r,_queue:h=>{c.push(h),u||(u=!0,Promise.resolve().then(()=>{for(;c.length;)c.shift()();u=!1}).catch(g=>setTimeout(()=>{throw g})))},reset:()=>{a.setState(a.initialState)},setOptions:h=>{const g=Ii(h,a.options);a.options=i(g)},getState:()=>a.options.state,setState:h=>{a.options.onStateChange==null||a.options.onStateChange(h)},_getRowId:(h,g,f)=>{var b;return(b=a.options.getRowId==null?void 0:a.options.getRowId(h,g,f))!=null?b:`${f?[f.id,g].join("."):g}`},getCoreRowModel:()=>(a._getCoreRowModel||(a._getCoreRowModel=a.options.getCoreRowModel(a)),a._getCoreRowModel()),getRowModel:()=>a.getPaginationRowModel(),getRow:(h,g)=>{let f=(g?a.getPrePaginationRowModel():a.getRowModel()).rowsById[h];if(!f&&(f=a.getCoreRowModel().rowsById[h],!f))throw new Error;return f},_getDefaultColumnDef:Vt(()=>[a.options.defaultColumn],h=>{var g;return h=(g=h)!=null?g:{},{header:f=>{const b=f.header.column.columnDef;return b.accessorKey?b.accessorKey:b.accessorFn?b.id:null},cell:f=>{var b,A;return(b=(A=f.renderValue())==null||A.toString==null?void 0:A.toString())!=null?b:null},...a._features.reduce((f,b)=>Object.assign(f,b.getDefaultColumnDef==null?void 0:b.getDefaultColumnDef()),{}),...h}},Ht(e,"debugColumns")),_getColumnDefs:()=>a.options.columns,getAllColumns:Vt(()=>[a._getColumnDefs()],h=>{const g=function(f,b,A){return A===void 0&&(A=0),f.map(v=>{const T=Ede(a,v,A,b),_=v;return T.columns=_.columns?g(_.columns,T,A+1):[],T})};return g(h)},Ht(e,"debugColumns")),getAllFlatColumns:Vt(()=>[a.getAllColumns()],h=>h.flatMap(g=>g.getFlatColumns()),Ht(e,"debugColumns")),_getAllFlatColumnsById:Vt(()=>[a.getAllFlatColumns()],h=>h.reduce((g,f)=>(g[f.id]=f,g),{}),Ht(e,"debugColumns")),getAllLeafColumns:Vt(()=>[a.getAllColumns(),a._getOrderColumnsFn()],(h,g)=>{let f=h.flatMap(b=>b.getLeafColumns());return g(f)},Ht(e,"debugColumns")),getColumn:h=>a._getAllFlatColumnsById()[h]};Object.assign(a,d);for(let h=0;h<a._features.length;h++){const g=a._features[h];g==null||g.createTable==null||g.createTable(a)}return a}function Up(){return e=>Vt(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},s=function(a,o,i){o===void 0&&(o=0);const l=[];for(let c=0;c<a.length;c++){const u=Tde(e,e._getRowId(a[c],c,i),a[c],c,o,void 0,i==null?void 0:i.id);if(n.flatRows.push(u),n.rowsById[u.id]=u,l.push(u),e.options.getSubRows){var r;u.originalSubRows=e.options.getSubRows(a[c],c),(r=u.originalSubRows)!=null&&r.length&&(u.subRows=s(u.originalSubRows,o+1,u))}}return l};return n.rows=s(t),n},Ht(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function tpe(e){const t=[],n=s=>{var a;t.push(s),(a=s.subRows)!=null&&a.length&&s.getIsExpanded()&&s.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function sI(e){return t=>Vt(()=>[t.getState().pagination,t.getPrePaginationRowModel(),t.options.paginateExpandedRows?void 0:t.getState().expanded],(n,s)=>{if(!s.rows.length)return s;const{pageSize:a,pageIndex:o}=n;let{rows:i,flatRows:l,rowsById:r}=s;const c=a*o,u=c+a;i=i.slice(c,u);let d;t.options.paginateExpandedRows?d={rows:i,flatRows:l,rowsById:r}:d=tpe({rows:i,flatRows:l,rowsById:r}),d.flatRows=[];const h=g=>{d.flatRows.push(g),g.subRows.length&&g.subRows.forEach(h)};return d.rows.forEach(h),d},Ht(t.options,"debugTable"))}/**
   * vue-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Yu(){return!0}const npe=Symbol("merge-proxy"),spe={get(e,t,n){return t===npe?n:e.get(t)},has(e,t){return e.has(t)},set:Yu,deleteProperty:Yu,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Yu,deleteProperty:Yu}},ownKeys(e){return e.keys()}};function Uh(e){return"value"in e?e.value:e}function fc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Proxy({get(s){for(let a=t.length-1;a>=0;a--){const o=Uh(t[a])[s];if(o!==void 0)return o}},has(s){for(let a=t.length-1;a>=0;a--)if(s in Uh(t[a]))return!0;return!1},keys(){const s=[];for(let a=0;a<t.length;a++)s.push(...Object.keys(Uh(t[a])));return[...Array.from(new Set(s))]}},spe)}const kb=Jo({props:["render","props"],setup:e=>()=>typeof e.render=="function"||typeof e.render=="object"?On(e.render,e.props):e.render});function Bb(e){return fc(e,{data:C(e.data)})}function Fp(e){const t=cS(e.data),n=fc({state:{},onStateChange:()=>{},renderFallbackValue:null,mergeOptions(o,i){return t?{...o,...i}:fc(o,i)}},t?Bb(e):e),s=epe(n);if(t){const o=og(e.data);it(o,()=>{s.setState(i=>({...i,data:o.value}))},{immediate:!0})}const a=j(s.initialState);return Na(()=>{s.setOptions(o=>{var i;const l=new Proxy({},{get:(r,c)=>a.value[c]});return fc(o,t?Bb(e):e,{state:fc(l,(i=e.state)!=null?i:{}),onStateChange:r=>{r instanceof Function?a.value=r(a.value):a.value=r,e.onStateChange==null||e.onStateChange(r)}})})}),s}const ape={__name:"SortButton",props:{header:{type:Object,required:!0}},setup(e){const t={default:"i-lucide-chevrons-up-down",asc:"i-lucide-chevron-up",desc:"i-lucide-chevron-down"};return(n,s)=>(p(),E("span",{class:ae(t[e.header.column.getIsSorted()||"default"])},null,2))}},ope={class:"sticky top-0 z-10 bg-n-slate-1"},ipe=["onClick"],lpe={key:0,class:"flex place-items-center gap-1"},rpe={class:"divide-y divide-n-slate-2"},Gp={__name:"Table",props:{table:{type:Object,required:!0},fixed:{type:Boolean,default:!1},type:{type:String,default:"relaxed"}},setup(e){const t=e,n=y(()=>t.type==="relaxed"),s=y(()=>n.value?"ltr:first:rounded-bl-lg ltr:first:rounded-tl-lg ltr:last:rounded-br-lg ltr:last:rounded-tr-lg rtl:first:rounded-br-lg rtl:first:rounded-tr-lg rtl:last:rounded-bl-lg rtl:last:rounded-tl-lg":"");return(a,o)=>(p(),E("table",{class:ae({"table-fixed":e.fixed})},[m("thead",ope,[(p(!0),E(ue,null,Ae(e.table.getHeaderGroups(),i=>(p(),E("tr",{key:i.id,class:"rounded-xl"},[(p(!0),E(ue,null,Ae(i.headers,l=>(p(),E("th",{key:l.id,style:Zt({width:`${l.getSize()}px`}),class:ae(["text-left py-3 px-5 font-medium text-sm text-n-slate-12",s.value]),onClick:r=>l.column.getCanSort()&&l.column.toggleSorting()},[l.isPlaceholder?$("",!0):(p(),E("div",lpe,[S(C(kb),{render:l.column.columnDef.header,props:l.getContext()},null,8,["render","props"]),l.column.getCanSort()?(p(),L(ape,{key:0,header:l},null,8,["header"])):$("",!0)]))],14,ipe))),128))]))),128))]),m("tbody",rpe,[(p(!0),E(ue,null,Ae(e.table.getRowModel().rows,i=>(p(),E("tr",{key:i.id},[(p(!0),E(ue,null,Ae(i.getVisibleCells(),l=>(p(),E("td",{key:l.id,class:ae(n.value?"py-4 px-5":"py-2 px-5")},[S(C(kb),{render:l.column.columnDef.cell,props:l.getContext()},null,8,["render","props"])],2))),128))]))),128))])],2))}},cpe={__name:"SummaryReportLink",props:{row:{type:Object,required:!0}},setup(e){const t=e,n=y(()=>`${t.row.original.type}_reports_show`);return(s,a)=>{const o=W("router-link");return p(),L(o,{to:{name:n.value,params:{id:e.row.original.id}},class:"text-n-slate-12 hover:underline"},{default:Y(()=>[xe(I(e.row.original.name),1)]),_:1},8,["to"])}}},upe={class:"flex-1 overflow-auto px-2 py-2 mt-5 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2"},Vp={__name:"SummaryReports",props:{type:{type:String,default:"account"},getterKey:{type:String,default:""},actionKey:{type:String,default:""},summaryKey:{type:String,default:""},fetchItemsKey:{type:String,required:!0}},setup(e,{expose:t}){const n=e,s=rt(),a=j(0),o=j(0),i=j(!1),l=_e([n.getterKey])||[],r=_e([n.summaryKey])||[],c=R=>r.value.find(O=>O.id===Number(R))||{},u=kp(),{t:d}=be(),h=R=>On("span",{class:R.getValue()?"":"text-n-slate-12"},R.getValue()),g=y(()=>[u.accessor("name",{header:d(`SUMMARY_REPORTS.${n.type.toUpperCase()}`),width:300,cell:R=>On(cpe,R)}),u.accessor("conversationsCount",{header:d("SUMMARY_REPORTS.CONVERSATIONS"),width:200,cell:h}),u.accessor("avgFirstResponseTime",{header:d("SUMMARY_REPORTS.AVG_FIRST_RESPONSE_TIME"),width:200,cell:h}),u.accessor("avgResolutionTime",{header:d("SUMMARY_REPORTS.AVG_RESOLUTION_TIME"),width:200,cell:h}),u.accessor("avgReplyTime",{header:d("SUMMARY_REPORTS.AVG_REPLY_TIME"),width:200,cell:h}),u.accessor("resolutionsCount",{header:d("SUMMARY_REPORTS.RESOLUTION_COUNT"),width:200,cell:h})]),f=R=>R?cg(R):"--",b=R=>R?R.toLocaleString():"--",A=y(()=>l.value.map(R=>{const O=c(R.id),{conversationsCount:x,avgFirstResponseTime:w,avgResolutionTime:D,avgReplyTime:M,resolvedConversationsCount:P}=O;return{id:R.id,name:R.name??R.title,type:n.type,conversationsCount:b(x),avgFirstResponseTime:f(w),avgReplyTime:f(M),avgResolutionTime:f(D),resolutionsCount:b(P)}})),v=()=>{s.dispatch(n.fetchItemsKey),s.dispatch(n.actionKey,{since:a.value,until:o.value,businessHours:i.value})};lt(()=>v());const T=R=>{a.value=R.from,o.value=R.to,i.value=R.businessHours,v()},_=Fp({get data(){return A.value},get columns(){return g.value},enableSorting:!1,getCoreRowModel:Up()});return t({downloadReports:()=>{const R={agent:"downloadAgentReports",label:"downloadLabelReports",inbox:"downloadInboxReports",team:"downloadTeamReports"};if(R[n.type]){const O=Jc({type:n.type,to:o.value,businessHours:i.value}),x={from:a.value,to:o.value,fileName:O,businessHours:i.value};s.dispatch(R[n.type],x)}}}),(R,O)=>(p(),E(ue,null,[S(Pp,{onFilterChange:T}),m("div",upe,[S(Gp,{table:C(_)},null,8,["table"])])],64))}},dpe={__name:"AgentReportsIndex",setup(e){const t=j(null),n=()=>{t.value.downloadReports()};return(s,a)=>(p(),E(ue,null,[S(Lo,{"header-title":s.$t("AGENT_REPORTS.HEADER"),"header-description":s.$t("AGENT_REPORTS.DESCRIPTION")},{default:Y(()=>[S(te,{label:s.$t("AGENT_REPORTS.DOWNLOAD_AGENT_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:n},null,8,["label"])]),_:1},8,["header-title","header-description"]),S(Vp,{ref_key:"summarReportsRef",ref:t,"action-key":"summaryReports/fetchAgentSummaryReports","getter-key":"agents/getAgents","fetch-items-key":"agents/get","summary-key":"summaryReports/getAgentSummaryReports",type:"agent"},null,512)],64))}},ppe={__name:"InboxReportsIndex",setup(e){const t=j(null),n=()=>{t.value.downloadReports()};return(s,a)=>(p(),E(ue,null,[S(Lo,{"header-title":s.$t("INBOX_REPORTS.HEADER"),"header-description":s.$t("INBOX_REPORTS.DESCRIPTION")},{default:Y(()=>[S(te,{label:s.$t("INBOX_REPORTS.DOWNLOAD_INBOX_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:n},null,8,["label"])]),_:1},8,["header-title","header-description"]),S(Vp,{ref_key:"summarReportsRef",ref:t,"action-key":"summaryReports/fetchInboxSummaryReports","getter-key":"inboxes/getInboxes","fetch-items-key":"inboxes/get","summary-key":"summaryReports/getInboxSummaryReports",type:"inbox"},null,512)],64))}},mpe={__name:"TeamReportsIndex",setup(e){const t=j(null),n=()=>{t.value.downloadReports()};return(s,a)=>(p(),E(ue,null,[S(Lo,{"header-title":s.$t("TEAM_REPORTS.HEADER"),"header-description":s.$t("TEAM_REPORTS.DESCRIPTION")},{default:Y(()=>[S(te,{label:s.$t("TEAM_REPORTS.DOWNLOAD_TEAM_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:n},null,8,["label"])]),_:1},8,["header-title","header-description"]),S(Vp,{ref_key:"summarReportsRef",ref:t,"action-key":"summaryReports/fetchTeamSummaryReports","getter-key":"teams/getTeams","fetch-items-key":"teams/get","summary-key":"summaryReports/getTeamSummaryReports",type:"team"},null,512)],64))}},hpe={__name:"LabelReportsIndex",setup(e){const t=j(null),n=()=>{t.value.downloadReports()};return(s,a)=>(p(),E(ue,null,[S(Lo,{"header-title":s.$t("LABEL_REPORTS.HEADER"),"header-description":s.$t("LABEL_REPORTS.DESCRIPTION")},{default:Y(()=>[S(te,{label:s.$t("LABEL_REPORTS.DOWNLOAD_LABEL_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:n},null,8,["label"])]),_:1},8,["header-title","header-description"]),S(Vp,{ref_key:"summarReportsRef",ref:t,"action-key":"summaryReports/fetchLabelSummaryReports","getter-key":"labels/getLabels","fetch-items-key":"labels/get","summary-key":"summaryReports/getLabelSummaryReports",type:"label"},null,512)],64))}},fpe=5,gpe={components:{WootDateRangePicker:zy,Avatar:kt,ToggleSwitch:va},props:{currentFilter:{type:Object,default:()=>null},filterItemsList:{type:Array,default:()=>[]},groupByFilterItemsList:{type:Array,default:()=>[]},type:{type:String,default:"agent"},selectedGroupByFilter:{type:Object,default:()=>{}}},emits:["businessHoursToggle","dateRangeChange","filterChange","groupByFilterChange"],data(){return{currentSelectedFilter:this.currentFilter||null,currentDateRangeSelection:{id:0,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS")},customDateRange:[new Date,new Date],currentSelectedGroupByFilter:null,businessHoursSelected:!1}},computed:{dateRange(){return[{id:0,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS")},{id:1,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_30_DAYS")},{id:2,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_3_MONTHS")},{id:3,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_6_MONTHS")},{id:4,name:this.$t("REPORT.DATE_RANGE_OPTIONS.LAST_YEAR")},{id:5,name:this.$t("REPORT.DATE_RANGE_OPTIONS.CUSTOM_DATE_RANGE")}]},isDateRangeSelected(){return this.currentDateRangeSelection.id===fpe},to(){return this.isDateRangeSelected?this.toCustomDate(this.customDateRange[1]):this.toCustomDate(new Date)},from(){if(this.isDateRangeSelected)return this.fromCustomDate(this.customDateRange[0]);const t={0:6,1:29,2:89,3:179,4:364}[this.currentDateRangeSelection.id],n=xo(new Date,t);return this.fromCustomDate(n)},multiselectLabel(){return{agent:this.$t("AGENT_REPORTS.FILTER_DROPDOWN_LABEL"),label:this.$t("LABEL_REPORTS.FILTER_DROPDOWN_LABEL"),inbox:this.$t("INBOX_REPORTS.FILTER_DROPDOWN_LABEL"),team:this.$t("TEAM_REPORTS.FILTER_DROPDOWN_LABEL")}[this.type]||this.$t("FORMS.MULTISELECT.SELECT_ONE")},groupBy(){return this.isDateRangeSelected?Is[4].period:{0:Is[1].period,1:Is[2].period,2:Is[3].period,3:Is[3].period,4:Is[4].period}[this.currentDateRangeSelection.id]},notLast7Days(){return this.groupBy!==Is[1].period}},watch:{filterItemsList(e){this.currentSelectedFilter=this.currentFilter?this.currentFilter:e[0],this.changeFilterSelection()},groupByFilterItemsList(){this.currentSelectedGroupByFilter=this.selectedGroupByFilter}},mounted(){this.onDateRangeChange()},methods:{onDateRangeChange(){this.$emit("dateRangeChange",{from:this.from,to:this.to,groupBy:this.groupBy})},onBusinessHoursToggle(){this.$emit("businessHoursToggle",this.businessHoursSelected)},fromCustomDate(e){return Ao(Cs(e))},toCustomDate(e){return Ao(Ia(e))},changeDateSelection(e){this.currentDateRangeSelection=e,this.onDateRangeChange()},changeFilterSelection(){this.$emit("filterChange",this.currentSelectedFilter)},onChange(e){this.customDateRange=e,this.onDateRangeChange()},changeGroupByFilterSelection(){this.$emit("groupByFilterChange",this.currentSelectedGroupByFilter)}}},_pe={class:"grid grid-cols-1 md:grid-cols-3 gap-y-0.5 gap-x-2"},vpe={key:0,class:"multiselect-wrap--small"},Epe={class:"mb-2 text-xs font-medium"},bpe={class:"flex min-w-0 items-center gap-2"},Tpe={class:"my-0 text-n-slate-12 truncate"},Spe={class:"flex items-center gap-2"},Ape={class:"my-0 text-n-slate-12"},ype={key:1,class:"multiselect-wrap--small"},Ipe={class:"mb-2 text-xs font-medium"},Cpe={class:"flex items-center min-w-0 gap-2"},Npe={class:"my-0 text-n-slate-12 truncate"},Ope={class:"flex items-center min-w-0 gap-2"},Rpe={class:"my-0 text-n-slate-12 truncate"},xpe={key:2,class:"multiselect-wrap--small"},wpe={class:"mb-2 text-xs font-medium"},$pe={class:"multiselect-wrap--small"},Mpe={class:"mb-2 text-xs font-medium"},Lpe={class:"flex items-center h-10 self-center order-5 md:order-2 md:justify-self-end"},Dpe={class:"mr-2 text-sm whitespace-nowrap"},Ppe={key:3,class:"order-3 md:order-4"},kpe={class:"mb-2 text-xs font-medium"},Bpe={key:4,class:"multiselect-wrap--small order-4 md:order-5"},Upe={class:"mb-2 text-xs font-medium"};function Fpe(e,t,n,s,a,o){const i=W("Avatar"),l=W("multiselect"),r=W("ToggleSwitch"),c=W("WootDateRangePicker");return p(),E("div",_pe,[n.type==="agent"?(p(),E("div",vpe,[m("p",Epe,I(e.$t("AGENT_REPORTS.FILTER_DROPDOWN_LABEL")),1),S(l,{modelValue:a.currentSelectedFilter,"onUpdate:modelValue":[t[0]||(t[0]=u=>a.currentSelectedFilter=u),o.changeFilterSelection],placeholder:o.multiselectLabel,label:"name","track-by":"id",options:n.filterItemsList,"option-height":24,"show-labels":!1},{singleLabel:Y(u=>[m("div",bpe,[S(i,{src:u.option.thumbnail,status:u.option.availability_status,name:u.option.name,size:22,"hide-offline-status":"","rounded-full":""},null,8,["src","status","name"]),m("span",Tpe,I(u.option.name),1)])]),options:Y(u=>[m("div",Spe,[S(i,{src:u.option.thumbnail,status:u.option.availability_status,name:u.option.name,size:22,"hide-offline-status":"","rounded-full":""},null,8,["src","status","name"]),m("p",Ape,I(u.option.name),1)])]),_:1},8,["modelValue","placeholder","options","onUpdate:modelValue"])])):n.type==="label"?(p(),E("div",ype,[m("p",Ipe,I(e.$t("LABEL_REPORTS.FILTER_DROPDOWN_LABEL")),1),S(l,{modelValue:a.currentSelectedFilter,"onUpdate:modelValue":[t[1]||(t[1]=u=>a.currentSelectedFilter=u),o.changeFilterSelection],placeholder:o.multiselectLabel,label:"title","track-by":"id",options:n.filterItemsList,"option-height":24,"show-labels":!1},{singleLabel:Y(u=>[m("div",Cpe,[m("div",{style:Zt({backgroundColor:u.option.color}),class:"w-5 h-5 rounded-full"},null,4),m("span",Npe,I(u.option.title),1)])]),option:Y(u=>[m("div",Ope,[m("div",{style:Zt({backgroundColor:u.option.color}),class:"flex-shrink-0 w-5 h-5 border border-solid rounded-full border-n-weak"},null,4),m("span",Rpe,I(u.option.title),1)])]),_:1},8,["modelValue","placeholder","options","onUpdate:modelValue"])])):(p(),E("div",xpe,[m("p",wpe,[n.type==="inbox"?(p(),E(ue,{key:0},[xe(I(e.$t("INBOX_REPORTS.FILTER_DROPDOWN_LABEL")),1)],64)):n.type==="team"?(p(),E(ue,{key:1},[xe(I(e.$t("TEAM_REPORTS.FILTER_DROPDOWN_LABEL")),1)],64)):(p(),E(ue,{key:2},[xe(I(e.$t("FORMS.MULTISELECT.SELECT_ONE")),1)],64))]),S(l,{modelValue:a.currentSelectedFilter,"onUpdate:modelValue":[t[2]||(t[2]=u=>a.currentSelectedFilter=u),o.changeFilterSelection],"track-by":"id",label:"name",placeholder:o.multiselectLabel,"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"",options:n.filterItemsList,searchable:!1,"allow-empty":!1},null,8,["modelValue","placeholder","select-label","options","onUpdate:modelValue"])])),m("div",$pe,[m("p",Mpe,I(e.$t("REPORT.DURATION_FILTER_LABEL")),1),S(l,{modelValue:a.currentDateRangeSelection,"onUpdate:modelValue":t[3]||(t[3]=u=>a.currentDateRangeSelection=u),"track-by":"name",label:"name",placeholder:e.$t("FORMS.MULTISELECT.SELECT_ONE"),"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"",options:o.dateRange,searchable:!1,"allow-empty":!1,onSelect:o.changeDateSelection},null,8,["modelValue","placeholder","select-label","options","onSelect"])]),m("div",Lpe,[m("span",Dpe,I(e.$t("REPORT.BUSINESS_HOURS")),1),m("span",null,[S(r,{modelValue:a.businessHoursSelected,"onUpdate:modelValue":t[4]||(t[4]=u=>a.businessHoursSelected=u),onChange:o.onBusinessHoursToggle},null,8,["modelValue","onChange"])])]),o.isDateRangeSelected?(p(),E("div",Ppe,[m("p",kpe,I(e.$t("REPORT.CUSTOM_DATE_RANGE.PLACEHOLDER")),1),S(c,{"show-range":"",value:a.customDateRange,"confirm-text":e.$t("REPORT.CUSTOM_DATE_RANGE.CONFIRM"),placeholder:e.$t("REPORT.CUSTOM_DATE_RANGE.PLACEHOLDER"),class:"auto-width",onChange:o.onChange},null,8,["value","confirm-text","placeholder","onChange"])])):$("",!0),o.notLast7Days?(p(),E("div",Bpe,[m("p",Upe,I(e.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL")),1),S(l,{modelValue:a.currentSelectedGroupByFilter,"onUpdate:modelValue":[t[5]||(t[5]=u=>a.currentSelectedGroupByFilter=u),o.changeGroupByFilterSelection],"track-by":"id",label:"groupBy",placeholder:e.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL"),options:n.groupByFilterItemsList,"allow-empty":!1,"show-labels":!1},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])):$("",!0)])}const Gpe=De(gpe,[["render",Fpe]]),Jr={DAY:[{id:1,groupByKey:"REPORT.GROUPING_OPTIONS.DAY"}],WEEK:[{id:1,groupByKey:"REPORT.GROUPING_OPTIONS.DAY"},{id:2,groupByKey:"REPORT.GROUPING_OPTIONS.WEEK"}],MONTH:[{id:1,groupByKey:"REPORT.GROUPING_OPTIONS.DAY"},{id:2,groupByKey:"REPORT.GROUPING_OPTIONS.WEEK"},{id:3,groupByKey:"REPORT.GROUPING_OPTIONS.MONTH"}],YEAR:[{id:2,groupByKey:"REPORT.GROUPING_OPTIONS.WEEK"},{id:3,groupByKey:"REPORT.GROUPING_OPTIONS.MONTH"},{id:4,groupByKey:"REPORT.GROUPING_OPTIONS.YEAR"}]},Vpe={components:{ReportHeader:Lo,V4Button:te,ReportFilters:Gpe,ReportContainer:B_},props:{type:{type:String,default:"account"},getterKey:{type:String,default:""},actionKey:{type:String,default:""},downloadButtonLabel:{type:String,default:"Download Reports"},reportTitle:{type:String,default:"Download Reports"},hasBackButton:{type:Boolean,default:!1},selectedItem:{type:Object,default:null}},data(){return{from:0,to:0,selectedFilter:this.selectedItem,groupBy:Is[1],groupByfilterItemsList:Jr.DAY.map(this.translateOptions),selectedGroupByFilter:null,businessHours:!1}},computed:{filterItemsList(){return this.$store.getters[this.getterKey]||[]},isAgentType(){return this.type==="agent"},reportKeys(){return{CONVERSATIONS:"conversations_count",...!this.isAgentType&&{INCOMING_MESSAGES:"incoming_messages_count"},OUTGOING_MESSAGES:"outgoing_messages_count",FIRST_RESPONSE_TIME:"avg_first_response_time",RESOLUTION_TIME:"avg_resolution_time",RESOLUTION_COUNT:"resolutions_count",REPLY_TIME:"reply_time"}}},mounted(){this.$store.dispatch(this.actionKey)},methods:{fetchAllData(){if(this.selectedFilter){const{from:e,to:t,groupBy:n,businessHours:s}=this;this.$store.dispatch("fetchAccountSummary",{from:e,to:t,type:this.type,id:this.selectedFilter.id,groupBy:n.period,businessHours:s}),this.fetchChartData()}},fetchChartData(){Object.keys(this.reportKeys).forEach(async e=>{try{const{from:t,to:n,groupBy:s,businessHours:a}=this;this.$store.dispatch("fetchAccountReport",{metric:this.reportKeys[e],from:t,to:n,type:this.type,id:this.selectedFilter.id,groupBy:s.period,businessHours:a})}catch{ne(this.$t("REPORT.DATA_FETCHING_FAILED"))}})},downloadReports(){const{from:e,to:t,type:n,businessHours:s}=this,a={agent:"downloadAgentReports",label:"downloadLabelReports",inbox:"downloadInboxReports",team:"downloadTeamReports"};if(a[n]){const o=Jc({type:n,to:t,businessHours:s}),i={from:e,to:t,fileName:o,businessHours:s};this.$store.dispatch(a[n],i)}},onDateRangeChange({from:e,to:t,groupBy:n}){this.from!==0&&this.to!==0&&zt(er.FILTER_REPORT,{filterType:"date",reportType:this.type}),this.from=e,this.to=t,this.groupByfilterItemsList=this.fetchFilterItems(n);const s=this.groupByfilterItemsList.filter(a=>a.id===this.groupBy.id);s.length>0?this.selectedGroupByFilter=s[0]:(this.selectedGroupByFilter=this.groupByfilterItemsList[0],this.groupBy=Is[this.selectedGroupByFilter.id]),this.fetchAllData()},onFilterChange(e){e&&(this.selectedFilter=e,this.fetchAllData())},onGroupByFilterChange(e){var t;this.groupBy=Is[e.id],this.fetchAllData(),zt(er.FILTER_REPORT,{filterType:"groupBy",filterValue:(t=this.groupBy)==null?void 0:t.period,reportType:this.type})},fetchFilterItems(e){switch(e){case Is[2].period:return Jr.WEEK.map(this.translateOptions);case Is[3].period:return Jr.MONTH.map(this.translateOptions);case Is[4].period:return Jr.YEAR.map(this.translateOptions);default:return Jr.DAY.map(this.translateOptions)}},translateOptions(e){return{id:e.id,groupBy:this.$t(e.groupByKey)}},onBusinessHoursToggle(e){this.businessHours=e,this.fetchAllData(),zt(er.FILTER_REPORT,{filterType:"businessHours",filterValue:e,reportType:this.type})}}};function Hpe(e,t,n,s,a,o){const i=W("V4Button"),l=W("ReportHeader"),r=W("ReportFilters"),c=W("ReportContainer");return p(),E(ue,null,[S(l,{"header-title":n.reportTitle,"has-back-button":n.hasBackButton},{default:Y(()=>[S(i,{label:n.downloadButtonLabel,icon:"i-ph-download-simple",size:"sm",onClick:o.downloadReports},null,8,["label","onClick"])]),_:1},8,["header-title","has-back-button"]),o.filterItemsList?(p(),L(r,{key:0,type:n.type,"filter-items-list":o.filterItemsList,"group-by-filter-items-list":a.groupByfilterItemsList,"selected-group-by-filter":a.selectedGroupByFilter,"current-filter":a.selectedFilter,onDateRangeChange:o.onDateRangeChange,onFilterChange:o.onFilterChange,onGroupByFilterChange:o.onGroupByFilterChange,onBusinessHoursToggle:o.onBusinessHoursToggle},null,8,["type","filter-items-list","group-by-filter-items-list","selected-group-by-filter","current-filter","onDateRangeChange","onFilterChange","onGroupByFilterChange","onBusinessHoursToggle"])):$("",!0),o.filterItemsList.length?(p(),L(c,{key:1,"group-by":a.groupBy,"report-keys":o.reportKeys},null,8,["group-by","report-keys"])):$("",!0)],64)}const Gi=De(Vpe,[["render",Hpe]]),Wpe={key:1,class:"w-full py-20"},zpe={__name:"AgentReportsShow",setup(e){const t=wt(),n=rt(),s=Hs("agents/getAgentById",t.params.id);return lt(()=>n.dispatch("agents/get")),(a,o)=>C(s).id?(p(),L(Gi,{key:C(s).id,type:"agent","getter-key":"agents/getAgents","action-key":"agents/get","selected-item":C(s),"download-button-label":a.$t("AGENT_REPORTS.DOWNLOAD_AGENT_REPORTS"),"report-title":a.$t("AGENT_REPORTS.HEADER"),"has-back-button":""},null,8,["selected-item","download-button-label","report-title"])):(p(),E("div",Wpe,[S(An,{class:"mx-auto"})]))}},Ype={key:1,class:"w-full py-20"},jpe={__name:"InboxReportsShow",setup(e){const t=wt(),n=Hs("inboxes/getInboxById",t.params.id);return(s,a)=>C(n).id?(p(),L(Gi,{key:C(n).id,type:"inbox","getter-key":"inboxes/getInboxes","action-key":"inboxes/get","selected-item":C(n),"download-button-label":s.$t("INBOX_REPORTS.DOWNLOAD_INBOX_REPORTS"),"report-title":s.$t("INBOX_REPORTS.HEADER"),"has-back-button":""},null,8,["selected-item","download-button-label","report-title"])):(p(),E("div",Ype,[S(An,{class:"mx-auto"})]))}},Kpe={key:1,class:"w-full py-20"},Xpe={__name:"TeamReportsShow",setup(e){const t=wt(),n=Hs("teams/getTeamById",t.params.id);return(s,a)=>C(n).id?(p(),L(Gi,{key:C(n).id,type:"team","getter-key":"teams/getTeams","action-key":"teams/get","selected-item":C(n),"download-button-label":s.$t("TEAM_REPORTS.DOWNLOAD_TEAM_REPORTS"),"report-title":s.$t("TEAM_REPORTS.HEADER"),"has-back-button":""},null,8,["selected-item","download-button-label","report-title"])):(p(),E("div",Kpe,[S(An,{class:"mx-auto"})]))}},qpe={key:1,class:"w-full py-20"},Zpe={__name:"LabelReportsShow",setup(e){const t=wt(),n=rt(),s=Hs("labels/getLabelById",t.params.id);return lt(()=>n.dispatch("labels/get")),(a,o)=>C(s).id?(p(),L(Gi,{key:C(s).id,type:"label","getter-key":"labels/getLabels","action-key":"labels/get","selected-item":C(s),"download-button-label":a.$t("LABEL_REPORTS.DOWNLOAD_LABEL_REPORTS"),"report-title":a.$t("LABEL_REPORTS.HEADER"),"has-back-button":""},null,8,["selected-item","download-button-label","report-title"])):(p(),E("div",qpe,[S(An,{class:"mx-auto"})]))}},Qpe={__name:"AgentReports",setup(e){return(t,n)=>(p(),L(Gi,{key:"agent-reports",type:"agent","getter-key":"agents/getAgents","action-key":"agents/get","download-button-label":t.$t("REPORT.DOWNLOAD_AGENT_REPORTS"),"report-title":t.$t("AGENT_REPORTS.HEADER")},null,8,["download-button-label","report-title"]))}},Jpe={__name:"InboxReports",setup(e){return(t,n)=>(p(),L(Gi,{key:"inbox-reports",type:"inbox","getter-key":"inboxes/getInboxes","action-key":"inboxes/get","download-button-label":t.$t("INBOX_REPORTS.DOWNLOAD_INBOX_REPORTS"),"report-title":t.$t("INBOX_REPORTS.HEADER")},null,8,["download-button-label","report-title"]))}},eme={__name:"LabelReports",setup(e){return(t,n)=>(p(),L(Gi,{key:"label-reports",type:"label","getter-key":"labels/getLabels","action-key":"labels/get","download-button-label":t.$t("LABEL_REPORTS.DOWNLOAD_LABEL_REPORTS"),"report-title":t.$t("LABEL_REPORTS.HEADER")},null,8,["download-button-label","report-title"]))}},tme={__name:"TeamReports",setup(e){return(t,n)=>(p(),L(Gi,{key:"team-reports",type:"team","getter-key":"teams/getTeams","action-key":"teams/get","download-button-label":t.$t("TEAM_REPORTS.DOWNLOAD_TEAM_REPORTS"),"report-title":t.$t("TEAM_REPORTS.HEADER")},null,8,["download-button-label","report-title"]))}},nme={class:"flex items-center m-0 text-sm font-medium text-n-slate-11"},sme={"data-test-id":"reportMetricLabel"},ame={"data-test-id":"reportMetricValue",class:"mt-1 mb-0 text-2xl text-n-slate-12"},gc={__name:"ReportMetricCard",props:{label:{type:String,required:!0},value:{type:String,required:!0},infoText:{type:String,required:!0},disabled:{type:Boolean,default:!1}},setup(e){return(t,n)=>{const s=W("fluent-icon"),a=Qe("tooltip");return p(),E("div",{"data-test-id":"reportMetricContainer",class:ae({"grayscale pointer-events-none opacity-30":e.disabled})},[m("h3",nme,[m("span",sme,I(e.label),1),re(S(s,{"data-test-id":"reportMetricInfo",size:"14",icon:"info",class:"text-n-slate-11 my-0 mx-1 mt-0.5"},null,512),[[a,e.infoText]])]),m("h4",ame,I(e.value),1)],2)}}},ome={components:{BarChart:$S,CsatMetricCard:gc},props:{filters:{type:Object,required:!0}},data(){return{csatRatings:cl}},computed:{...mt({metrics:"csat/getMetrics",ratingPercentage:"csat/getRatingPercentage",satisfactionScore:"csat/getSatisfactionScore",responseRate:"csat/getResponseRate"}),ratingFilterEnabled(){return!!this.filters.rating},chartData(){const e=[...cl].sort((t,n)=>n.value-t.value);return{labels:["Rating"],datasets:e.map(t=>({label:t.emoji,data:[this.ratingPercentage[t.value]],backgroundColor:t.color}))}},responseCount(){return this.metrics.totalResponseCount?this.metrics.totalResponseCount.toLocaleString():"--"},chartOptions(){return{indexAxis:"y",responsive:!0,plugins:{legend:{display:!1},title:{display:!1},tooltip:{enabled:!1}},scales:{x:{display:!1,stacked:!0},y:{display:!1,stacked:!0}}}}},methods:{formatToPercent(e){return e?`${e}%`:"--"},ratingToEmoji(e){return cl.find(t=>t.value===Number(e)).emoji}}},ime={class:"flex-col lg:flex-row flex flex-wrap mx-0 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 px-6 py-8 gap-4"},lme={key:0,ref:"csatBarChart",class:"w-full md:w-1/2 md:max-w-[50%] flex-1 rtl:[direction:initial]"},rme={class:"flex items-center m-0 text-xs font-medium md:text-sm text-n-slate-12"},cme={class:"flex flex-row-reverse justify-end"},ume={class:"my-0 mx-0.5"},dme={class:"mt-2 h-6"};function pme(e,t,n,s,a,o){const i=W("CsatMetricCard"),l=W("BarChart");return p(),E("div",ime,[S(i,{label:e.$t("CSAT_REPORTS.METRIC.TOTAL_RESPONSES.LABEL"),"info-text":e.$t("CSAT_REPORTS.METRIC.TOTAL_RESPONSES.TOOLTIP"),value:o.responseCount,class:"xs:w-full sm:max-w-[50%] lg:w-1/6 lg:max-w-[16%]"},null,8,["label","info-text","value"]),S(i,{disabled:o.ratingFilterEnabled,label:e.$t("CSAT_REPORTS.METRIC.SATISFACTION_SCORE.LABEL"),"info-text":e.$t("CSAT_REPORTS.METRIC.SATISFACTION_SCORE.TOOLTIP"),value:o.ratingFilterEnabled?"--":o.formatToPercent(e.satisfactionScore),class:"xs:w-full sm:max-w-[50%] lg:w-1/6 lg:max-w-[16%]"},null,8,["disabled","label","info-text","value"]),S(i,{label:e.$t("CSAT_REPORTS.METRIC.RESPONSE_RATE.LABEL"),"info-text":e.$t("CSAT_REPORTS.METRIC.RESPONSE_RATE.TOOLTIP"),value:o.formatToPercent(e.responseRate),class:"xs:w-full sm:max-w-[50%] lg:w-1/6 lg:max-w-[16%]"},null,8,["label","info-text","value"]),e.metrics.totalResponseCount&&!o.ratingFilterEnabled?(p(),E("div",lme,[m("h3",rme,[m("div",cme,[(p(!0),E(ue,null,Ae(e.ratingPercentage,(r,c,u)=>(p(),E("div",{key:r+c+u,class:"ltr:pr-4 rtl:pl-4"},[m("span",ume,I(o.ratingToEmoji(c)),1),m("span",null,I(o.formatToPercent(r)),1)]))),128))])]),m("div",dme,[S(l,{collection:o.chartData,"chart-options":o.chartOptions},null,8,["collection","chart-options"])])],512)):$("",!0)])}const mme=De(ome,[["render",pme]]),hme={class:"flex items-center justify-between"},fme={class:"flex flex-1 items-center gap-2 justify-between"},gme={class:"text-sm truncate text-n-slate-11 mb-0"},_me={class:"flex items-center gap-2"},vme={class:"isolate inline-flex items-center gap-1.5"},V_={__name:"Pagination",props:{table:{type:Object,required:!0},defaultPageSize:{type:Number,default:10},showPageSizeSelector:{type:Boolean,default:!1}},emits:["pageSizeChange"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=[{label:`${a("REPORT.PAGINATION.PER_PAGE_TEMPLATE",{size:10})}`,value:10},{label:`${a("REPORT.PAGINATION.PER_PAGE_TEMPLATE",{size:20})}`,value:20},{label:`${a("REPORT.PAGINATION.PER_PAGE_TEMPLATE",{size:50})}`,value:50},{label:`${a("REPORT.PAGINATION.PER_PAGE_TEMPLATE",{size:100})}`,value:100}],i=(f,b)=>{const A=new Intl.NumberFormat(navigator.language);return Array.from({length:b-f+1},(v,T)=>A.format(f+T))},l=y(()=>n.table.getState().pagination.pageIndex+1),r=y(()=>n.table.getPageCount()),c=y(()=>r.value<=3?i(1,r.value):l.value===1?i(1,3):l.value===r.value?i(r.value-2,r.value):i(l.value-1,l.value+1)),u=y(()=>n.table.getRowCount()),d=y(()=>{const{pagination:f}=n.table.getState();return f.pageIndex*f.pageSize+1}),h=y(()=>{const{pagination:f}=n.table.getState();return Math.min((f.pageIndex+1)*f.pageSize,u.value)}),g=y({get(){return n.table.getState().pagination.pageSize},set(f){n.table.setPageSize(Number(f)),s("pageSizeChange",Number(f))}});return lt(()=>{n.showPageSizeSelector&&n.defaultPageSize&&n.defaultPageSize!==10&&n.table.setPageSize(n.defaultPageSize)}),(f,b)=>(p(),E("div",hme,[m("div",fme,[m("p",gme,I(f.$t("REPORT.PAGINATION.RESULTS",{start:d.value,end:h.value,total:u.value})),1),m("div",_me,[e.showPageSizeSelector?(p(),L(ar,{key:0,modelValue:g.value,"onUpdate:modelValue":b[0]||(b[0]=A=>g.value=A),variant:"outline","hide-icon":"",class:"[&>button]:text-n-slate-11 [&>button]:hover:text-n-slate-12 [&>button]:h-6",options:o},null,8,["modelValue"])):$("",!0),m("nav",vme,[S(te,{icon:"i-lucide-chevrons-left",ghost:"",slate:"",sm:"",class:"!size-6",disabled:!e.table.getCanPreviousPage(),onClick:b[1]||(b[1]=A=>e.table.setPageIndex(0))},null,8,["disabled"]),S(te,{icon:"i-lucide-chevron-left",ghost:"",slate:"",sm:"",class:"!size-6",disabled:!e.table.getCanPreviousPage(),onClick:b[2]||(b[2]=A=>e.table.previousPage())},null,8,["disabled"]),(p(!0),E(ue,null,Ae(c.value,A=>(p(),L(te,{key:A,xs:"",outline:"",color:A==l.value?"blue":"slate",class:"!h-6 min-w-6",onClick:v=>e.table.setPageIndex(A-1)},{default:Y(()=>[m("span",{class:ae(["text-center",{"text-n-brand":A==l.value}])},I(A),3)]),_:2},1032,["color","onClick"]))),128)),S(te,{icon:"i-lucide-chevron-right",ghost:"",slate:"",sm:"",class:"!size-6",disabled:!e.table.getCanNextPage(),onClick:b[3]||(b[3]=A=>e.table.nextPage())},null,8,["disabled"]),S(te,{icon:"i-lucide-chevrons-right",ghost:"",slate:"",sm:"",class:"!size-6",disabled:!e.table.getCanNextPage(),onClick:b[4]||(b[4]=A=>e.table.setPageIndex(e.table.getPageCount()-1))},null,8,["disabled"])])])])]))}},Eme={class:"flex items-center gap-1.5 text-left"},qf={__name:"UserAvatarWithName",props:{user:{type:Object,default:()=>({})},size:{type:Number,default:20},textClass:{type:String,default:"text-sm text-n-slate-12"}},setup(e){return(t,n)=>(p(),E("div",Eme,[S(kt,{src:e.user.thumbnail,size:e.size,name:e.user.name,status:e.user.availability_status,"hide-offline-status":"","rounded-full":""},null,8,["src","size","name","status"]),m("span",{class:ae(["my-0 truncate text-capitalize",e.textClass])},I(e.user.name),3)]))}},bme={class:"text-right"},Tme={class:"text-n-slate-11 text-sm"},Sme={__name:"ConversationCell",props:{row:{type:Object,required:!0}},setup(e){const t=y(()=>({name:"inbox_conversation",params:{conversation_id:e.row.original.conversationId}}));return(n,s)=>{const a=W("router-link"),o=Qe("tooltip");return p(),E("div",bme,[S(a,{to:t.value,class:"hover:underline"},{default:Y(()=>[xe(I(`#${e.row.original.conversationId}`),1)]),_:1},8,["to"]),re((p(),E("div",Tme,[xe(I(e.row.original.createdAgo),1)])),[[o,e.row.original.createdAt]])])}}},Ame={class:"shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 px-6 py-5"},yme={key:0,class:"table-pagination"},Ime={__name:"CsatTable",props:{pageIndex:{type:Number,default:0}},emits:["pageChange"],setup(e,{emit:t}){const n=t,{t:s}=be(),a=_e("csat/getCSATResponses"),o=_e("csat/getMetrics"),i=y(()=>a.value.map(h=>({contact:h.contact,assignedAgent:h.assigned_agent,rating:h.rating,feedbackText:h.feedback_message||"---",conversationId:h.conversation_id,createdAgo:us(h.created_at),createdAt:yd(h.created_at,"LLL d yyyy, h:mm a")}))),l=h=>{const g=h.getValue()||"---";return On("span",{class:"line-clamp-5 break-words max-w-full text-n-slate-12",title:g},g)},r=kp(),c=y(()=>[r.accessor("contact",{header:s("CSAT_REPORTS.TABLE.HEADER.CONTACT_NAME"),width:200,cell:h=>{const{contact:g}=h.row.original;return g?On(qf,{user:g,class:"max-w-[200px] overflow-hidden"}):"--"}}),r.accessor("assignedAgent",{header:s("CSAT_REPORTS.TABLE.HEADER.AGENT_NAME"),width:200,cell:h=>{const{assignedAgent:g}=h.row.original;return g?On(qf,{user:g,class:"max-w-[200px] overflow-hidden"}):"--"}}),r.accessor("rating",{header:s("CSAT_REPORTS.TABLE.HEADER.RATING"),align:"center",width:80,cell:h=>{const{rating:g}=h.row.original,[f={}]=cl.filter(b=>b.value===g);return On("span",{class:f.emoji?"emoji-response text-lg":"text-n-slate-10"},f.emoji||"---")}}),r.accessor("feedbackText",{header:s("CSAT_REPORTS.TABLE.HEADER.FEEDBACK_TEXT"),width:400,cell:l}),r.accessor("conversationId",{header:"",width:100,cell:h=>On(Sme,h)})]),u=y(()=>({pageIndex:e.pageIndex,pageSize:25})),d=Fp({get data(){return i.value},get columns(){return c.value},manualPagination:!0,enableSorting:!1,getCoreRowModel:Up(),get rowCount(){return o.value.totalResponseCount},state:{get pagination(){return u.value}},onPaginationChange:h=>{const g=h(u.value);n("pageChange",g.pageIndex)}});return(h,g)=>(p(),E("div",Ame,[S(Gp,{table:C(d),class:"max-h-[calc(100vh-21.875rem)]"},null,8,["table"]),re(m("div",{class:"h-48 flex items-center justify-center text-n-slate-12 text-sm"},I(h.$t("CSAT_REPORTS.NO_RECORDS")),513),[[rn,!i.value.length]]),C(o).totalResponseCount?(p(),E("div",yme,[S(V_,{class:"mt-2",table:C(d)},null,8,["table"])])):$("",!0)]))}},Cme={name:"CsatResponses",components:{CsatMetrics:mme,CsatTable:Ime,ReportFilterSelector:Pp,ReportHeader:Lo,V4Button:te},data(){return{pageIndex:0,from:0,to:0,userIds:[],inbox:null,team:null,rating:null}},computed:{...mt({accountId:"getCurrentAccountId",isFeatureEnabledOnAccount:"accounts/isFeatureEnabledonAccount"}),requestPayload(){return{from:this.from,to:this.to,user_ids:this.userIds,inbox_id:this.inbox,team_id:this.team,rating:this.rating}},isTeamsEnabled(){return this.isFeatureEnabledOnAccount(this.accountId,ft.TEAM_MANAGEMENT)}},methods:{getAllData(){try{this.$store.dispatch("csat/getMetrics",this.requestPayload),this.getResponses()}catch{ne(this.$t("REPORT.DATA_FETCHING_FAILED"))}},getResponses(){this.$store.dispatch("csat/get",{page:this.pageIndex+1,...this.requestPayload})},downloadReports(){const e="csat";try{this.$store.dispatch("csat/downloadCSATReports",{fileName:Jc({type:e,to:this.to}),...this.requestPayload})}catch{ne(this.$t("REPORT.CSAT_REPORTS.DOWNLOAD_FAILED"))}},onPageNumberChange(e){this.pageIndex=e,this.getResponses()},onFilterChange({from:e,to:t,selectedAgents:n,selectedInbox:s,selectedTeam:a,selectedRating:o}){this.from!==0&&this.to!==0&&zt(er.FILTER_REPORT,{filterType:"date",reportType:"csat"}),this.from=e,this.to=t,this.userIds=n.map(i=>i.id),this.inbox=s==null?void 0:s.id,this.team=a==null?void 0:a.id,this.rating=o==null?void 0:o.value,this.getAllData()}}},Nme={class:"flex flex-col gap-4"};function Ome(e,t,n,s,a,o){const i=W("V4Button"),l=W("ReportHeader"),r=W("ReportFilterSelector"),c=W("CsatMetrics"),u=W("CsatTable");return p(),E(ue,null,[S(l,{"header-title":e.$t("CSAT_REPORTS.HEADER")},{default:Y(()=>[S(i,{label:e.$t("CSAT_REPORTS.DOWNLOAD"),icon:"i-ph-download-simple",size:"sm",onClick:o.downloadReports},null,8,["label","onClick"])]),_:1},8,["header-title"]),m("div",Nme,[S(r,{"show-agents-filter":"","show-inbox-filter":"","show-rating-filter":"","show-team-filter":o.isTeamsEnabled,"show-business-hours-switch":!1,onFilterChange:o.onFilterChange},null,8,["show-team-filter","onFilterChange"]),S(c,{filters:o.requestPayload},null,8,["filters"]),S(u,{"page-index":a.pageIndex,onPageChange:o.onPageNumberChange},null,8,["page-index","onPageChange"])])],64)}const Rme=De(Cme,[["render",Ome]]),xme={class:"flex flex-wrap mx-0 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 px-6 py-5"},wme={__name:"BotMetrics",props:{filters:{type:Object,required:!0}},setup(e){const t=e,n=j("0"),s=j("0"),a=j("0"),o=j("0"),i=r=>r?`${r}%`:"--",l=()=>{!t.filters.to||!t.filters.from||RO.getBotMetrics(t.filters).then(r=>{n.value=r.data.conversation_count.toLocaleString(),s.value=r.data.message_count.toLocaleString(),a.value=r.data.resolution_rate.toString(),o.value=r.data.handoff_rate.toString()})};return it(()=>t.filters,l,{deep:!0}),lt(l),(r,c)=>(p(),E("div",xme,[S(gc,{label:r.$t("BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.LABEL"),"info-text":r.$t("BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.TOOLTIP"),value:n.value,class:"flex-1"},null,8,["label","info-text","value"]),S(gc,{label:r.$t("BOT_REPORTS.METRIC.TOTAL_RESPONSES.LABEL"),"info-text":r.$t("BOT_REPORTS.METRIC.TOTAL_RESPONSES.TOOLTIP"),value:s.value,class:"flex-1"},null,8,["label","info-text","value"]),S(gc,{label:r.$t("BOT_REPORTS.METRIC.RESOLUTION_RATE.LABEL"),"info-text":r.$t("BOT_REPORTS.METRIC.RESOLUTION_RATE.TOOLTIP"),value:i(a.value),class:"flex-1"},null,8,["label","info-text","value"]),S(gc,{label:r.$t("BOT_REPORTS.METRIC.HANDOFF_RATE.LABEL"),"info-text":r.$t("BOT_REPORTS.METRIC.HANDOFF_RATE.TOOLTIP"),value:i(o.value),class:"flex-1"},null,8,["label","info-text","value"])]))}},$me={name:"BotReports",components:{BotMetrics:wme,ReportHeader:Lo,ReportFilterSelector:Pp,ReportContainer:B_},data(){return{from:0,to:0,groupBy:Is[1],reportKeys:{BOT_RESOLUTION_COUNT:"bot_resolutions_count",BOT_HANDOFF_COUNT:"bot_handoffs_count"},businessHours:!1}},computed:{requestPayload(){return{from:this.from,to:this.to}}},methods:{fetchAllData(){this.fetchBotSummary(),this.fetchChartData()},fetchBotSummary(){try{this.$store.dispatch("fetchBotSummary",this.getRequestPayload())}catch{ne(this.$t("REPORT.SUMMARY_FETCHING_FAILED"))}},fetchChartData(){Object.keys(this.reportKeys).forEach(async e=>{try{await this.$store.dispatch("fetchAccountReport",{metric:this.reportKeys[e],...this.getRequestPayload()})}catch{ne(this.$t("REPORT.DATA_FETCHING_FAILED"))}})},getRequestPayload(){const{from:e,to:t,groupBy:n,businessHours:s}=this;return{from:e,to:t,groupBy:n==null?void 0:n.period,businessHours:s}},onFilterChange({from:e,to:t,groupBy:n,businessHours:s}){this.from=e,this.to=t,this.groupBy=n,this.businessHours=s,this.fetchAllData(),zt(er.FILTER_REPORT,{filterValue:{from:e,to:t,groupBy:n,businessHours:s},reportType:"bots"})}}},Mme={class:"flex flex-col gap-4"};function Lme(e,t,n,s,a,o){const i=W("ReportHeader"),l=W("ReportFilterSelector"),r=W("BotMetrics"),c=W("ReportContainer");return p(),E(ue,null,[S(i,{"header-title":e.$t("BOT_REPORTS.HEADER")},null,8,["header-title"]),m("div",Mme,[S(l,{"show-agents-filter":!1,"show-group-by-filter":"","show-business-hours-switch":!1,onFilterChange:o.onFilterChange},null,8,["onFilterChange"]),S(r,{filters:o.requestPayload},null,8,["filters"]),S(c,{"account-summary-key":"getBotSummary","summary-fetching-key":"getBotSummaryFetchingStatus","group-by":a.groupBy,"report-keys":a.reportKeys},null,8,["group-by","report-keys"])])],64)}const Dme=De($me,[["render",Lme]]),Pme={class:"flex flex-col m-0.5 px-6 py-5 rounded-xl flex-grow text-n-slate-12 shadow outline-1 outline outline-n-container bg-n-solid-2 min-h-[10rem]"},kme={class:"card-header grid w-full mb-6 grid-cols-[repeat(auto-fit,minmax(max-content,50%))] gap-y-2"},Bme={class:"flex items-center gap-2 flex-row"},Ume={class:"mb-0 text-n-slate-12 font-medium text-lg"},Fme={class:"flex flex-row items-center py-0.5 px-2 rounded bg-n-teal-3 text-xs"},Gme={class:"text-xs text-n-teal-11"},Vme={class:"flex flex-row items-center justify-end gap-2"},Hme={key:0,class:"card-body max-w-full w-full ml-auto mr-auto justify-between flex"},Wme={key:1,class:"items-center flex text-base justify-center px-12 py-6"},zme={class:"text-n-slate-11"},Kc={__name:"MetricCard",props:{header:{type:String,default:""},isLoading:{type:Boolean,default:!1},loadingMessage:{type:String,default:""}},setup(e){return(t,n)=>(p(),E("div",Pme,[m("div",kme,[We(t.$slots,"header",{},()=>[m("div",Bme,[m("h5",Ume,I(e.header),1),m("span",Fme,[n[0]||(n[0]=m("span",{class:"bg-n-teal-9 h-1 w-1 rounded-full mr-1 rtl:mr-0 rtl:ml-0"},null,-1)),m("span",Gme,I(t.$t("OVERVIEW_REPORTS.LIVE")),1)])]),m("div",Vme,[We(t.$slots,"control")])])]),e.isLoading?e.isLoading?(p(),E("div",Wme,[S(Ls),m("span",zme,I(e.loadingMessage),1)])):$("",!0):(p(),E("div",Hme,[We(t.$slots,"default")]))]))}};function Yme(){const e=j(!1),t=j(0),n=j(0),s=j(null);let a=null;return{visible:e,x:t,y:n,value:s,show:(l,r)=>{clearTimeout(a);const c=l.target.getBoundingClientRect();t.value=c.left+c.width/2,n.value=c.top,a=setTimeout(()=>{s.value=r,e.value=!0},100)},hide:()=>{clearTimeout(a),a=setTimeout(()=>{e.value=!1},50)}}}const jme={__name:"HeatmapTooltip",props:{visible:{type:Boolean,default:!1},x:{type:Number,default:0},y:{type:Number,default:0},value:{type:Number,default:null}},setup(e){const t=e,{t:n}=be(),s=y(()=>t.value?t.value===1?n("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.CONVERSATION",{count:t.value}):n("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.CONVERSATIONS",{count:t.value}):n("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.NO_CONVERSATIONS"));return(a,o)=>(p(),E("div",{class:ae(["fixed z-50 px-2 py-1 text-xs font-medium text-n-slate-6 bg-n-slate-12 rounded shadow-lg pointer-events-none transition-[opacity,transform] duration-75",{"opacity-100":e.visible,"opacity-0":!e.visible}]),style:Zt({left:`${e.x}px`,top:`${e.y-15}px`,transform:"translateX(-50%) translateZ(0)",willChange:"transform, opacity"})},I(s.value),7))}},Kme={class:"grid relative w-full gap-x-4 gap-y-2.5 overflow-y-scroll md:overflow-visible grid-cols-[80px_1fr]"},Xme={class:"grid gap-[5px] flex-shrink-0"},qme={class:"grid gap-[5px] w-full min-w-[700px]"},Zme={class:"grid grid-cols-[repeat(24,_1fr)] gap-[5px] w-full text-[8px] font-semibold h-5 text-n-slate-11"},Qme={class:"grid gap-[5px] flex-shrink-0"},Jme={class:"font-normal text-n-slate-11"},ehe={class:"grid gap-[5px] w-full min-w-[700px]",style:{"content-visibility":"auto"}},the=["onMouseenter"],nhe={class:"grid grid-cols-[repeat(24,_1fr)] gap-[5px] w-full text-[8px] font-semibold h-5 text-n-slate-12"},she={__name:"BaseHeatmap",props:{heatmapData:{type:Array,default:()=>[]},numberOfRows:{type:Number,default:7},isLoading:{type:Boolean,default:!1},colorScheme:{type:String,default:"blue",validator:e=>["blue","green"].includes(e)}},setup(e){const t=e,{t:n}=be(),s=y(()=>{const h=xO(t.heatmapData);return Array.from(h.keys()).map(g=>{const f=h.get(g);return{dateKey:g,data:f,dataHash:f.map(b=>b.value).join(",")}})}),a=y(()=>{const h=t.heatmapData.map(g=>g.value);return wN(h,[.2,.4,.6,.8,.9,.99])});function o(h){return Yn(new Date(h),"MMM d, yyyy")}const i=[n("DAYS_OF_WEEK.SUNDAY"),n("DAYS_OF_WEEK.MONDAY"),n("DAYS_OF_WEEK.TUESDAY"),n("DAYS_OF_WEEK.WEDNESDAY"),n("DAYS_OF_WEEK.THURSDAY"),n("DAYS_OF_WEEK.FRIDAY"),n("DAYS_OF_WEEK.SATURDAY")];function l(h){const g=bD(h);return i[g]}const r={blue:["bg-n-blue-3 border border-n-blue-4/30","bg-n-blue-5 border border-n-blue-6/30","bg-n-blue-7 border border-n-blue-8/30","bg-n-blue-8 border border-n-blue-9/30","bg-n-blue-10 border border-n-blue-8/30","bg-n-blue-11 border border-n-blue-10/30"],green:["bg-n-teal-3 border border-n-teal-4/30","bg-n-teal-5 border border-n-teal-6/30","bg-n-teal-7 border border-n-teal-8/30","bg-n-teal-8 border border-n-teal-9/30","bg-n-teal-10 border border-n-teal-8/30","bg-n-teal-11 border border-n-teal-10/30"]},c=wO((h,g,f)=>{if(!h)return"border border-n-container bg-n-slate-2 dark:bg-n-slate-1/30";let b=[...g,1/0].findIndex(A=>h<=A&&h>0);return b>6&&(b=5),b===0?"border border-n-container bg-n-slate-2 dark:bg-n-slate-1/30":r[f][b-1]});function u(h){return c(h,a.value,t.colorScheme)}const d=Yme();return(h,g)=>(p(),E("div",Kme,[e.isLoading?(p(),E(ue,{key:0},[m("div",Xme,[(p(!0),E(ue,null,Ae(e.numberOfRows,f=>(p(),E("div",{key:f,class:"w-full rounded-sm bg-n-slate-3 dark:bg-n-slate-1 animate-loader-pulse h-8 min-w-[70px]"}))),128))]),m("div",qme,[(p(!0),E(ue,null,Ae(e.numberOfRows,f=>(p(),E("div",{key:f,class:"grid gap-[5px] grid-cols-[repeat(24,_1fr)]"},[(p(),E(ue,null,Ae(24,b=>m("div",{key:b,class:"w-full h-8 rounded-sm bg-n-slate-3 dark:bg-n-slate-1 animate-loader-pulse"})),64))]))),128))]),g[5]||(g[5]=m("div",null,null,-1)),m("div",Zme,[(p(),E(ue,null,Ae(24,f=>m("div",{key:f,class:"flex items-center justify-center"},I(f-1),1)),64))])],64)):(p(),E(ue,{key:1},[m("div",Qme,[(p(!0),E(ue,null,Ae(s.value,(f,b,A,v)=>{const T=[f.dateKey];if(v&&v.key===f.dateKey&&Sv(v,T))return v;const _=(p(),E("div",{key:f.dateKey,class:"h-8 min-w-[70px] text-n-slate-12 text-[10px] font-semibold flex flex-col items-end justify-center"},[xe(I(l(new Date(f.dateKey)))+" ",1),m("time",Jme,I(o(f.dateKey)),1)]));return _.memo=T,_},g,0),128))]),m("div",ehe,[(p(!0),E(ue,null,Ae(s.value,(f,b,A,v)=>{const T=[f.dataHash,e.colorScheme];if(v&&v.key===f.dateKey&&Sv(v,T))return v;const _=(p(),E("div",{key:f.dateKey,class:"grid gap-[5px] grid-cols-[repeat(24,_1fr)]",style:{"content-visibility":"auto"}},[(p(!0),E(ue,null,Ae(f.data,N=>(p(),E("div",{key:N.timestamp,class:ae(["h-8 rounded-sm cursor-pointer",u(N.value)]),onMouseenter:R=>C(d).show(R,N.value),onMouseleave:g[2]||(g[2]=(...R)=>C(d).hide&&C(d).hide(...R))},null,42,the))),128))]));return _.memo=T,_},g,3),128))]),g[6]||(g[6]=m("div",null,null,-1)),m("div",nhe,[(p(),E(ue,null,Ae(24,f=>m("div",{key:f,class:"flex items-center justify-center"},I(f-1),1)),64))])],64)),S(jme,{visible:C(d).visible.value,x:C(d).x.value,y:C(d).y.value,value:C(d).value.value},null,8,["visible","x","y","value"])]))}},ahe={key:0,class:"sticky top-0 bg-n-alpha-3 backdrop-blur-sm pt-2"},ohe={class:"relative"},ihe=["placeholder"],lhe={key:0,class:"px-2 pt-2 text-xs font-medium text-n-slate-11 uppercase tracking-wide"},rhe=["disabled","onClick"],che={key:1,class:"flex-shrink-0"},uhe={key:1,class:"h-px bg-n-alpha-2 mx-2 my-1"},dhe=["disabled","onClick"],phe={key:1,class:"flex-shrink-0"},mhe={key:3,class:"text-sm text-n-slate-11 px-2 py-1.5"},qs={__name:"DropdownMenu",props:{menuItems:{type:Array,default:()=>[],validator:e=>e.every(t=>t.action&&t.value&&t.label)},menuSections:{type:Array,default:()=>[]},thumbnailSize:{type:Number,default:20},showSearch:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:""},isSearching:{type:Boolean,default:!1},labelClass:{type:String,default:""}},emits:["action"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=j(null),i=j(""),l=y(()=>n.menuSections.length>0),r=y(()=>l.value?n.menuSections.flatMap(g=>g.items||[]):n.menuItems),c=y(()=>i.value?r.value.filter(g=>g.label.toLowerCase().includes(i.value.toLowerCase())):r.value),u=y(()=>{if(!l.value)return[];if(!i.value)return n.menuSections;const g=i.value.toLowerCase();return n.menuSections.map(f=>{const b=(f.items||[]).filter(A=>A.label.toLowerCase().includes(g));return{...f,items:b}}).filter(f=>f.items.length>0)}),d=g=>{const{action:f,value:b,...A}=g;s("action",{action:f,value:b,...A})},h=y(()=>l.value?u.value.length===0:c.value.length===0);return lt(()=>{o.value&&n.showSearch&&o.value.focus()}),(g,f)=>(p(),E("div",{class:ae(["bg-n-alpha-3 backdrop-blur-[100px] border-0 outline outline-1 outline-n-container absolute rounded-xl z-50 gap-2 flex flex-col min-w-[136px] shadow-lg pb-2 px-2",{"pt-2":!e.showSearch}])},[e.showSearch?(p(),E("div",ahe,[m("div",ohe,[f[1]||(f[1]=m("span",{class:"absolute i-lucide-search size-3.5 top-2 left-3"},null,-1)),re(m("input",{ref_key:"searchInput",ref:o,"onUpdate:modelValue":f[0]||(f[0]=b=>i.value=b),type:"search",placeholder:e.searchPlaceholder||C(a)("DROPDOWN_MENU.SEARCH_PLACEHOLDER"),class:"reset-base w-full h-8 py-2 pl-10 pr-2 text-sm focus:outline-none border-none rounded-lg bg-n-alpha-black2 dark:bg-n-solid-1 text-n-slate-12"},null,8,ihe),[[gt,i.value]])])])):$("",!0),l.value?(p(!0),E(ue,{key:1},Ae(u.value,(b,A)=>(p(),E("div",{key:b.title||A,class:"flex flex-col gap-1"},[b.title?(p(),E("p",lhe,I(b.title),1)):$("",!0),(p(!0),E(ue,null,Ae(b.items,(v,T)=>(p(),E("button",{key:v.value||T,type:"button",class:ae(["inline-flex items-center justify-start w-full h-8 min-w-0 gap-2 px-2 py-1.5 transition-all duration-200 ease-in-out border-0 rounded-lg z-60 hover:bg-n-alpha-1 dark:hover:bg-n-alpha-2 disabled:cursor-not-allowed disabled:pointer-events-none disabled:opacity-50",{"bg-n-alpha-1 dark:bg-n-solid-active":v.isSelected,"text-n-ruby-11":v.action==="delete","text-n-slate-12":v.action!=="delete"}]),disabled:v.disabled,onClick:_=>d(v)},[We(g.$slots,"thumbnail",{item:v},()=>[v.thumbnail?(p(),L(kt,{key:0,name:v.thumbnail.name,src:v.thumbnail.src,size:e.thumbnailSize,"rounded-full":""},null,8,["name","src","size"])):$("",!0)]),v.icon?(p(),L(dt,{key:0,icon:v.icon,class:"flex-shrink-0 size-3.5"},null,8,["icon"])):$("",!0),v.emoji?(p(),E("span",che,I(v.emoji),1)):$("",!0),v.label?(p(),E("span",{key:2,class:ae(["min-w-0 text-sm truncate",e.labelClass])},I(v.label),3)):$("",!0)],10,rhe))),128)),A<u.value.length-1?(p(),E("div",uhe)):$("",!0)]))),128)):(p(!0),E(ue,{key:2},Ae(c.value,(b,A)=>(p(),E("button",{key:A,type:"button",class:ae(["inline-flex items-center justify-start w-full h-8 min-w-0 gap-2 px-2 py-1.5 transition-all duration-200 ease-in-out border-0 rounded-lg z-60 hover:bg-n-alpha-1 dark:hover:bg-n-alpha-2 disabled:cursor-not-allowed disabled:pointer-events-none disabled:opacity-50",{"bg-n-alpha-1 dark:bg-n-solid-active":b.isSelected,"text-n-ruby-11":b.action==="delete","text-n-slate-12":b.action!=="delete"}]),disabled:b.disabled,onClick:v=>d(b)},[We(g.$slots,"thumbnail",{item:b},()=>[b.thumbnail?(p(),L(kt,{key:0,name:b.thumbnail.name,src:b.thumbnail.src,size:e.thumbnailSize,"rounded-full":""},null,8,["name","src","size"])):$("",!0)]),b.icon?(p(),L(dt,{key:0,icon:b.icon,class:"flex-shrink-0 size-3.5"},null,8,["icon"])):$("",!0),b.emoji?(p(),E("span",phe,I(b.emoji),1)):$("",!0),b.label?(p(),E("span",{key:2,class:ae(["min-w-0 text-sm truncate",e.labelClass])},I(b.label),3)):$("",!0)],10,dhe))),128)),h.value?(p(),E("div",mhe,I(e.isSearching?C(a)("DROPDOWN_MENU.SEARCHING"):C(a)("DROPDOWN_MENU.EMPTY_STATE")),1)):$("",!0)],2))}},hhe={class:"relative flex items-center group"},ec="select_date_range",fhe={__name:"HeatmapDateRangeSelector",props:{from:{type:Date,default:null},fromModifiers:{},to:{type:Date,default:null},toModifiers:{},daysNum:{type:Number,default:null},daysNumModifiers:{}},emits:jt(["rangeTypeChange","monthOffsetChange"],["update:from","update:to","update:daysNum"]),setup(e,{emit:t}){var w;const n=t,s=Xt(e,"from"),a=Xt(e,"to"),o=Xt(e,"daysNum"),{t:i,locale:l}=be(),r={DAY:"day",MONTH:"month"},c=y(()=>[{label:i("REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS"),value:"last_7_days",action:ec,type:r.DAY,daysBefore:6},{label:i("REPORT.DATE_RANGE_OPTIONS.LAST_14_DAYS"),value:"last_14_days",action:ec,type:r.DAY,daysBefore:13},{label:i("REPORT.DATE_RANGE_OPTIONS.LAST_30_DAYS"),value:"last_30_days",action:ec,type:r.DAY,daysBefore:29}]),u=y(()=>l.value||(typeof navigator<"u"?navigator.language:"en")),d=y(()=>new Intl.DateTimeFormat(u.value,{month:"long",year:"numeric"})),h=y(()=>{const D=new Date;return[0,-1,-2].map(P=>({label:P===0?i("REPORT.DATE_RANGE_OPTIONS.THIS_MONTH"):d.value.format(So(D,P)),value:P===0?"this_month":`month_${P}`,action:ec,type:r.MONTH,monthOffset:P}))}),g=j(""),[f,b]=yn(),A=j(0),v=y(()=>{const D=g.value;return[...c.value,...h.value].map(M=>({...M,isSelected:D===M.value}))});g.value=((w=v.value[0])==null?void 0:w.value)||"";const T=y(()=>{const D=v.value.filter(P=>P.type===r.DAY),M=v.value.filter(P=>P.type===r.MONTH);return[{items:D},{items:M}].filter(P=>P.items.length>0)}),_=y(()=>v.value.find(D=>D.value===g.value)||v.value[0]),N=y(()=>{const D=v.value.find(M=>M.value===g.value);return(D==null?void 0:D.label)||""}),R=D=>{if(!D)return null;if(D.type===r.MONTH){const U=new Date,F=Wo(So(U,A.value)),k=Cs(F),V=D.value==="this_month"&&A.value===0?Ia(U):Ia(OS(F)),G=SS(V,k);return{from:k,to:V,daysBefore:G}}const M=Ia(new Date);return{from:Cs(xo(M,Number(D.daysBefore))),to:M,daysBefore:Number(D.daysBefore)}},O=D=>{if(!D)return;D.type===r.MONTH?A.value=D.monthOffset||0:A.value=0;const M=R(D);if(!M)return;const{from:P,to:U,daysBefore:F}=M;s.value=P,a.value=U,o.value=F,n("rangeTypeChange",D.type),n("monthOffsetChange",A.value)},x=({action:D,value:M})=>{b(!1),D===ec&&(g.value=M)};return it(()=>_.value,D=>{O(D)},{immediate:!0}),(D,M)=>re((p(),E("div",hhe,[S(te,{sm:"",slate:"",faded:"",label:N.value,class:"rounded-md group-hover:bg-n-alpha-2",onClick:M[0]||(M[0]=P=>C(b)())},null,8,["label"]),C(f)?(p(),L(qs,{key:0,"menu-items":v.value,"menu-sections":T.value,class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:right-0 xl:rtl:left-0 top-full",onAction:M[1]||(M[1]=P=>x(P))},null,8,["menu-items","menu-sections"])):$("",!0)])),[[C(ms),()=>C(b)(!1)]])}},Hp=(e,t=6e4)=>{const n=j(null),s=()=>{n.value=setTimeout(async()=>{await e(),s()},t)},a=()=>{n.value&&(clearTimeout(n.value),n.value=null)};return Ar(()=>{a()}),{startRefetching:s,stopRefetching:a}},ghe={class:"flex flex-row flex-wrap max-w-full"},_he={class:"relative flex items-center group"},aI={__name:"BaseHeatmapContainer",props:{metric:{type:String,required:!0},title:{type:String,required:!0},downloadTitle:{type:String,required:!0},storeGetter:{type:String,required:!0},storeAction:{type:String,required:!0},downloadAction:{type:String,default:""},uiFlagKey:{type:String,required:!0},colorScheme:{type:String,default:"blue"}},setup(e){const t=e,n=rt(),{t:s}=be(),a=_e("getOverviewUIFlags"),o=_e(t.storeGetter),i=_e("inboxes/getInboxes"),l=j(null),r=j(null),c=j(null),u=j(null),d=j(!1),h=j(0),g=y(()=>!l.value||!r.value?null:{from:l.value,to:r.value}),f=y(()=>g.value?SS(g.value.to,g.value.from)+1:0),b=y(()=>[{label:s("INBOX_REPORTS.ALL_INBOXES"),value:null,action:"select_inbox"},...i.value.map(P=>({label:P.name,value:P.id,action:"select_inbox"}))]),A=y(()=>u.value?b.value.find(P=>P.value===u.value.id):{label:s("INBOX_REPORTS.ALL_INBOXES")}),v=y(()=>a.value[t.uiFlagKey]),T=()=>{if(d.value&&h.value===0){const P=new Date,U=Wo(P);return{from:Cs(U),to:Ia(P)}}if(!d.value&&c.value!==null){const P=Ia(new Date);return{from:Cs(xo(P,Number(c.value))),to:P}}return g.value},_=()=>{const P=T();if(!P)return;const{to:U}=P;if(!d.value&&!u.value&&t.downloadAction){n.dispatch(t.downloadAction,{daysBefore:c.value,to:Ao(U)});return}if(!o.value||o.value.length===0)return;const B=[["Date","Hour",t.title]];o.value.forEach(se=>{const ee=new Date(se.timestamp*1e3),X=Yn(ee,"yyyy-MM-dd"),z=ee.getHours();B.push([X,`${z}:00 - ${z+1}:00`,se.value])});const V=B.map(se=>se.join(",")).join(`
`),G=u.value?`_${u.value.name.replace(/[^a-z0-9]/gi,"_")}`:"",K=`${t.downloadTitle}${G}_${Yn(new Date,"dd-MM-yyyy")}.csv`;$O(K,V)},[N,R]=yn(),O=()=>{if(v.value)return;const P=T();if(!P)return;const{from:U,to:F}=P,k={metric:t.metric,from:Ao(U),to:Ao(F),groupBy:"hour",businessHours:!1};u.value&&(k.type="inbox",k.id=u.value.id),n.dispatch(t.storeAction,k)},x=({value:P})=>{R(!1),u.value=P?i.value.find(U=>U.id===P):null},{startRefetching:w}=Hp(O),D=P=>{d.value=P==="month"},M=P=>{h.value=P};return it(()=>[l.value,r.value],([P,U])=>{P&&U&&O()}),it(()=>u.value,()=>{g.value&&O()}),lt(()=>{n.dispatch("inboxes/get"),w()}),(P,U)=>{const F=Qe("on-clickaway"),k=Qe("tooltip");return p(),E("div",ghe,[S(Kc,{header:e.title},{control:Y(()=>[S(fhe,{from:l.value,"onUpdate:from":U[0]||(U[0]=B=>l.value=B),to:r.value,"onUpdate:to":U[1]||(U[1]=B=>r.value=B),"days-num":c.value,"onUpdate:daysNum":U[2]||(U[2]=B=>c.value=B),onRangeTypeChange:D,onMonthOffsetChange:M},null,8,["from","to","days-num"]),re((p(),E("div",_he,[S(te,{sm:"",slate:"",faded:"",label:A.value.label,class:"rounded-md group-hover:bg-n-alpha-2 max-w-[200px]",onClick:U[3]||(U[3]=B=>C(R)())},null,8,["label"]),C(N)?(p(),L(qs,{key:0,"menu-items":b.value,"show-search":"","search-placeholder":C(s)("INBOX_REPORTS.SEARCH_INBOX"),class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:right-0 xl:rtl:left-0 top-full !min-w-56 max-w-56 max-h-96 overflow-y-auto",onAction:U[4]||(U[4]=B=>x(B))},null,8,["menu-items","search-placeholder"])):$("",!0)])),[[F,()=>C(R)(!1)]]),re(S(te,{sm:"",slate:"",faded:"",icon:"i-lucide-download",class:"rounded-md group-hover:bg-n-alpha-2",onClick:_},null,512),[[k,C(s)("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.DOWNLOAD_REPORT")]])]),default:Y(()=>[S(she,{"heatmap-data":C(o),"number-of-rows":f.value,"is-loading":v.value,"color-scheme":e.colorScheme},null,8,["heatmap-data","number-of-rows","is-loading","color-scheme"])]),_:1},8,["header"])])}}},vhe={__name:"ConversationHeatmapContainer",setup(e){const{t}=be();return(n,s)=>(p(),L(aI,{metric:"conversations_count",title:C(t)("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.HEADER"),"download-title":"conversation_heatmap","store-getter":"getAccountConversationHeatmapData","store-action":"fetchAccountConversationHeatmap","download-action":"downloadAccountConversationHeatmap","ui-flag-key":"isFetchingAccountConversationsHeatmap"},null,8,["title"]))}},Ehe={__name:"ResolutionHeatmapContainer",setup(e){const{t}=be();return(n,s)=>(p(),L(aI,{metric:"resolutions_count",title:C(t)("OVERVIEW_REPORTS.RESOLUTION_HEATMAP.HEADER"),"download-title":"resolution_heatmap","store-getter":"getAccountResolutionHeatmapData","store-action":"fetchAccountResolutionHeatmap","ui-flag-key":"isFetchingAccountResolutionsHeatmap","color-scheme":"green"},null,8,["title"]))}},bhe={key:1,class:"text-n-slate-10"},The={__name:"BaseCell",props:{content:{type:String,default:""}},setup(e){const t=_e("accounts/isRTL");return(n,s)=>(p(),E("div",{class:ae(["overflow-hidden whitespace-nowrap text-ellipsis",{"text-right":C(t)}])},[n.$slots.default||e.content?We(n.$slots,"default",{key:0},()=>[e.content?(p(),E(ue,{key:0},[xe(I(e.content),1)],64)):$("",!0)]):(p(),E("span",bhe," --- "))],2))}},She={class:"items-start flex flex-col min-w-0 my-0 mx-2"},Ahe={class:"overflow-hidden text-sm m-0 leading-[1.2] text-n-slate-12 whitespace-nowrap text-ellipsis"},yhe={class:"text-xs text-n-slate-11"},Ihe={__name:"AgentCell",props:{row:{type:Object,required:!0}},setup(e){const t=_e("accounts/isRTL");return(n,s)=>(p(),L(The,null,{default:Y(()=>[m("div",{class:ae(["items-center flex text-left",{"flex-row-reverse":C(t)}])},[S(kt,{src:e.row.original.thumbnail,name:e.row.original.agent,status:e.row.original.status,size:32,"hide-offline-status":"","rounded-full":""},null,8,["src","name","status"]),m("div",She,[m("h6",Ahe,I(e.row.original.agent),1),m("span",yhe,I(e.row.original.email),1)])],2)]),_:1}))}},Che={class:"flex flex-col flex-1"},Nhe={key:0,class:"items-center flex text-base justify-center p-8"},Ub="report_overview_agent_table_page_size",Ohe={__name:"AgentTable",props:{agents:{type:Array,default:()=>[]},agentMetrics:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1}},setup(e){const{t}=be(),{uiSettings:n,updateUISettings:s}=tn(),a=()=>n.value[Ub]||10,o=h=>{s({[Ub]:h})},i=h=>e.agentMetrics.find(g=>g.assignee_id===Number(h))||{},l=y(()=>e.agents.map(h=>{const g=i(h.id);return{agent:h.available_name||h.name,email:h.email,thumbnail:h.thumbnail,open:g.open||0,unattended:g.unattended||0,status:h.availability_status}}).sort((h,g)=>{const f=g.open-h.open;return f===0?h.agent.localeCompare(g.agent):f})),r=h=>On("span",{class:h.getValue()?"capitalize text-n-slate-12":"capitalize text-n-slate-11"},h.getValue()?h.getValue():"---"),c=kp(),u=[c.accessor("agent",{header:t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.AGENT"),cell:h=>On(Ihe,h),size:250}),c.accessor("open",{header:t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.OPEN"),cell:r,size:100}),c.accessor("unattended",{header:t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.UNATTENDED"),cell:r,size:100})],d=Fp({get data(){return l.value},columns:u,enableSorting:!1,getCoreRowModel:Up(),getPaginationRowModel:sI(),initialState:{pagination:{pageSize:a()}}});return(h,g)=>(p(),E("div",Che,[S(Gp,{table:C(d),class:"max-h-[calc(100vh-21.875rem)]"},null,8,["table"]),S(V_,{class:"mt-2",table:C(d),"show-page-size-selector":"","default-page-size":a(),onPageSizeChange:o},null,8,["table","default-page-size"]),e.isLoading?(p(),E("div",Nhe,[S(Ls),m("span",null,I(h.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.LOADING_MESSAGE")),1)])):!e.isLoading&&!e.agents.length?(p(),L(Il,{key:1,title:h.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.NO_AGENTS")},null,8,["title"])):$("",!0)]))}},Rhe={class:"flex flex-row flex-wrap max-w-full"},xhe={__name:"AgentLiveReportContainer",setup(e){const t=rt(),n=_e("getOverviewUIFlags"),s=_e("getAgentConversationMetric"),a=_e("agents/getAgents"),o=()=>t.dispatch("fetchAgentConversationMetric"),{startRefetching:i}=Hp(o);return lt(()=>{t.dispatch("agents/get"),o(),i()}),(l,r)=>(p(),E("div",Rhe,[S(Kc,{header:l.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.HEADER")},{default:Y(()=>[S(Ohe,{agents:C(a),"agent-metrics":C(s),"is-loading":C(n).isFetchingAgentConversationMetric},null,8,["agents","agent-metrics","is-loading"])]),_:1},8,["header"])]))}},whe={class:"flex flex-col flex-1"},$he={key:0,class:"items-center flex text-base justify-center p-8"},Fb="report_overview_team_table_page_size",Mhe={__name:"TeamTable",props:{teams:{type:Array,default:()=>[]},teamMetrics:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1}},setup(e){const{t}=be(),{uiSettings:n,updateUISettings:s}=tn(),a=()=>n.value[Fb]||10,o=h=>{s({[Fb]:h})},i=h=>e.teamMetrics.find(g=>g.team_id===Number(h))||{},l=y(()=>e.teams.map(h=>{const g=i(h.id);return{agent:h.name,open:g.open||0,unattended:g.unattended||0}}).sort((h,g)=>{const f=g.open-h.open;return f===0?h.agent.localeCompare(g.agent):f})),r=h=>On("span",{class:h.getValue()?"capitalize text-n-slate-12":"capitalize text-n-slate-11"},h.getValue()?h.getValue():"---"),c=kp(),u=[c.accessor("agent",{header:t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.TABLE_HEADER.TEAM"),cell:r,size:250}),c.accessor("open",{header:t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.TABLE_HEADER.OPEN"),cell:r,size:100}),c.accessor("unattended",{header:t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.TABLE_HEADER.UNATTENDED"),cell:r,size:100})],d=Fp({get data(){return l.value},columns:u,enableSorting:!1,getCoreRowModel:Up(),getPaginationRowModel:sI(),initialState:{pagination:{pageSize:a()}}});return(h,g)=>(p(),E("div",whe,[S(Gp,{table:C(d),class:"max-h-[calc(100vh-21.875rem)]"},null,8,["table"]),S(V_,{class:"mt-2",table:C(d),"show-page-size-selector":"","default-page-size":a(),onPageSizeChange:o},null,8,["table","default-page-size"]),e.isLoading?(p(),E("div",$he,[S(Ls),m("span",null,I(h.$t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.LOADING_MESSAGE")),1)])):!e.isLoading&&!e.teams.length?(p(),L(Il,{key:1,title:h.$t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.NO_TEAMS")},null,8,["title"])):$("",!0)]))}},Lhe={class:"flex flex-row flex-wrap max-w-full"},Dhe={__name:"TeamLiveReportContainer",setup(e){const t=rt(),n=_e("getOverviewUIFlags"),s=_e("getTeamConversationMetric"),a=_e("teams/getTeams"),o=()=>t.dispatch("fetchTeamConversationMetric"),{startRefetching:i}=Hp(o);return lt(()=>{t.dispatch("teams/get"),o(),i()}),(l,r)=>(p(),E("div",Lhe,[S(Kc,{header:l.$t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.HEADER")},{default:Y(()=>[S(Mhe,{teams:C(a),"team-metrics":C(s),"is-loading":C(n).isFetchingTeamConversationMetric},null,8,["teams","team-metrics","is-loading"])]),_:1},8,["header"])]))}},Phe={class:"flex flex-col items-center md:flex-row gap-4"},khe={class:"flex-1 w-full max-w-full md:w-[65%] md:max-w-[65%] conversation-metric"},Bhe={class:"relative flex items-center group z-50"},Uhe={class:"text-base text-n-slate-11"},Fhe={class:"text-n-slate-12 text-3xl mb-0 mt-1"},Ghe={class:"flex-1 w-full max-w-full md:w-[35%] md:max-w-[35%]"},Vhe={class:"text-base text-n-slate-11"},Hhe={class:"text-n-slate-12 text-3xl mb-0 mt-1"},Fh="OVERVIEW_REPORTS.ACCOUNT_CONVERSATIONS",Whe={__name:"StatsLiveReportsContainer",setup(e){const{t}=be(),n=_e("getOverviewUIFlags"),s=_e("agents/getAgentStatus"),a=_e("getAccountConversationMetric"),o=rt(),i=_e("teams/getTeams"),l=y(()=>[{label:t("OVERVIEW_REPORTS.TEAM_CONVERSATIONS.ALL_TEAMS"),value:null},...i.value.map(v=>({label:v.name,value:v.id}))]),r=y(()=>{let v={};return Object.keys(s.value).forEach(T=>{const _=t(`OVERVIEW_REPORTS.AGENT_STATUS.${Lb[T]}`);v[_]=s.value[T]}),v}),c=y(()=>{let v={};return Object.keys(a.value).forEach(T=>{const _=t(`${Fh}.${Lb[T]}`);v[_]=a.value[T]}),v}),u=j(null),d=y(()=>(l.value.find(T=>T.value===u.value)||{}).label),h=()=>{const v={};u.value&&(v.team_id=u.value),o.dispatch("fetchAccountConversationMetric",v)},{startRefetching:g}=Hp(h),[f,b]=yn(),A=({value:v})=>{b(!1),u.value=v,h()};return lt(()=>{h(),g()}),(v,T)=>{const _=Qe("on-clickaway");return p(),E("div",Phe,[m("div",khe,[S(Kc,{header:C(t)(`${Fh}.HEADER`),"is-loading":C(n).isFetchingAccountConversationMetric,"loading-message":C(t)(`${Fh}.LOADING_MESSAGE`)},co({default:Y(()=>[(p(!0),E(ue,null,Ae(c.value,(N,R,O)=>(p(),E("div",{key:O,class:"flex-1 min-w-0 pb-2"},[m("h3",Uhe,I(R),1),m("p",Fhe,I(N),1)]))),128))]),_:2},[C(i).length?{name:"control",fn:Y(()=>[re((p(),E("div",Bhe,[S(te,{sm:"",slate:"",faded:"",label:d.value,class:"capitalize rounded-md group-hover:bg-n-alpha-2",onClick:T[0]||(T[0]=N=>C(b)())},null,8,["label"]),C(f)?(p(),L(qs,{key:0,"menu-items":l.value,class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:right-0 xl:rtl:left-0 top-full","label-class":"capitalize",onAction:T[1]||(T[1]=N=>A(N))},null,8,["menu-items"])):$("",!0)])),[[_,()=>C(b)(!1)]])]),key:"0"}:void 0]),1032,["header","is-loading","loading-message"])]),m("div",Ghe,[S(Kc,{header:v.$t("OVERVIEW_REPORTS.AGENT_STATUS.HEADER")},{default:Y(()=>[(p(!0),E(ue,null,Ae(r.value,(N,R,O)=>(p(),E("div",{key:O,class:"flex-1 min-w-0 pb-2"},[m("h3",Vhe,I(R),1),m("p",Hhe,I(N),1)]))),128))]),_:1},8,["header"])])])}}},zhe={class:"flex flex-col gap-4 pb-6"},Yhe={__name:"LiveReports",setup(e){return(t,n)=>(p(),E(ue,null,[S(Lo,{"header-title":t.$t("OVERVIEW_REPORTS.HEADER")},null,8,["header-title"]),m("div",zhe,[S(Whe),S(vhe),S(Ehe),S(xhe),S(Dhe)])],64))}},jhe={props:{label:{type:String,required:!0},value:{type:[String,Number],required:!0},toolTip:{type:String,required:!0},isLoading:{type:Boolean,default:!1}}},Khe={class:"flex flex-col gap-2 items-start justify-center min-w-[10rem]"},Xhe={class:"inline-flex items-center gap-1 text-sm font-medium text-n-slate-11"},qhe={key:0,class:"w-12 h-6 mb-0.5 rounded-md bg-n-slate-3 animate-pulse"},Zhe={key:1,class:"text-2xl font-medium text-n-slate-12"};function Qhe(e,t,n,s,a,o){const i=W("fluent-icon"),l=Qe("tooltip");return p(),E("div",Khe,[m("span",Xhe,[xe(I(n.label)+" ",1),re(S(i,{size:"14",icon:"information",type:"outline",class:"flex flex-shrink-0 text-sm font-normal sm:font-medium text-n-slate-10"},null,512),[[l,n.toolTip,void 0,{right:!0}]])]),n.isLoading?(p(),E("div",qhe)):(p(),E("span",Zhe,I(n.value),1))])}const Gh=De(jhe,[["render",Qhe]]),Jhe={class:"flex sm:flex-row flex-col w-full gap-4 sm:gap-14 shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 px-6 py-5"},efe={__name:"SLAMetrics",props:{hitRate:{type:String,required:!0},noOfBreaches:{type:Number,required:!0},noOfConversations:{type:Number,required:!0},isLoading:{type:Boolean,default:!1}},setup(e){return(t,n)=>(p(),E("div",Jhe,[S(Gh,{label:t.$t("SLA_REPORTS.METRICS.HIT_RATE.LABEL"),value:e.hitRate,"tool-tip":t.$t("SLA_REPORTS.METRICS.HIT_RATE.TOOLTIP"),"is-loading":e.isLoading},null,8,["label","value","tool-tip","is-loading"]),n[0]||(n[0]=m("div",{class:"w-full sm:w-px bg-n-strong"},null,-1)),S(Gh,{label:t.$t("SLA_REPORTS.METRICS.NO_OF_MISSES.LABEL"),value:e.noOfBreaches,"tool-tip":t.$t("SLA_REPORTS.METRICS.NO_OF_MISSES.TOOLTIP"),"is-loading":e.isLoading},null,8,["label","value","tool-tip","is-loading"]),n[1]||(n[1]=m("div",{class:"w-full sm:w-px bg-n-strong"},null,-1)),S(Gh,{label:t.$t("SLA_REPORTS.METRICS.NO_OF_CONVERSATIONS.LABEL"),value:e.noOfConversations,"tool-tip":t.$t("SLA_REPORTS.METRICS.NO_OF_CONVERSATIONS.TOOLTIP"),"is-loading":e.isLoading},null,8,["label","value","tool-tip","is-loading"])]))}},oI={__name:"TableHeaderCell",props:{span:{type:Number,required:!0},label:{type:String,required:!0}},setup(e){const t=e,n=y(()=>t.span===1?"col-span-1":t.span===2?"col-span-2":t.span===3?"col-span-3":t.span===4?"col-span-4":t.span===5?"col-span-5":t.span===6?"col-span-6":t.span===7?"col-span-7":t.span===8?"col-span-8":t.span===9?"col-span-9":t.span===10?"col-span-10":"col-span-1");return(s,a)=>(p(),E("div",{class:ae(["flex items-center px-0 py-2 text-xs font-medium text-right uppercase text-n-slate-11 rtl:text-left",n.value])},[We(s.$slots,"default",{},()=>[xe(I(e.label),1)])],2))}},tfe=["title"],iI={__name:"CardLabels",props:{conversationLabels:{type:Array,required:!0}},setup(e){const t=e,n=ig(),s=_e("labels/getLabels"),a=y(()=>s.value.filter(({title:d})=>t.conversationLabels.includes(d))),o=j(!1),i=j(!1),l=j(-1),r=j(null),c=()=>{const d=n.before?100:0;if(!r.value)return;const h=Array.from(r.value.querySelectorAll(".label"));let g=0;i.value=!1,h.forEach((f,b)=>{g+=f.offsetWidth+8,g<r.value.clientWidth-d?l.value=b:i.value=h.length>1})};it(a,()=>{Wt(()=>c())}),lt(()=>{c()});const u=d=>{d.stopPropagation(),o.value=!o.value,Wt(()=>c())};return(d,h)=>{const g=W("woot-label"),f=W("fluent-icon"),b=Qe("resize");return re((p(),E("div",{ref_key:"labelContainer",ref:r},[a.value.length||d.$slots.before?(p(),E("div",{key:0,class:ae(["flex items-end flex-shrink min-w-0 gap-y-1",{"h-auto overflow-visible flex-row flex-wrap":o.value}])},[We(d.$slots,"before"),(p(!0),E(ue,null,Ae(a.value,(A,v)=>(p(),L(g,{key:A?A.id:v,title:A.title,description:A.description,color:A.color,variant:"smooth",class:ae(["!mb-0 max-w-[calc(100%-0.5rem)]",{"invisible absolute":!o.value&&v>l.value}]),small:""},null,8,["title","description","color","class"]))),128)),i.value?(p(),E("button",{key:0,title:o.value?d.$t("CONVERSATION.CARD.HIDE_LABELS"):d.$t("CONVERSATION.CARD.SHOW_LABELS"),class:"h-5 py-0 px-1 flex-shrink-0 mr-6 ml-0 rtl:ml-6 rtl:mr-0 rtl:rotate-180 text-n-slate-11 border-n-strong dark:border-n-strong",onClick:u},[S(f,{icon:o.value?"chevron-left":"chevron-right",size:"12"},null,8,["icon"])],8,tfe)):$("",!0)],2)):$("",!0)])),[[b,c]])}}},nfe={class:"flex justify-between w-full"},sfe={class:"text-sm sticky top-0 h-fit font-normal tracking-[-0.6%] min-w-[140px] truncate text-n-slate-11"},afe={class:"flex flex-col w-full gap-2"},Vh={__name:"SLAEventItem",props:{label:{type:String,required:!0},items:{type:Array,required:!0}},setup(e){const t=n=>Yn(rc(n),"MMM dd, yyyy, hh:mm a");return(n,s)=>(p(),E("div",nfe,[m("span",sfe,I(e.label),1),m("div",afe,[(p(!0),E(ue,null,Ae(e.items,a=>(p(),E("span",{key:a.id,class:"text-sm font-normal text-n-slate-12 text-right tabular-nums"},I(t(a.created_at)),1))),128)),We(n.$slots,"showMore")])]))}},ofe={class:"absolute flex flex-col items-start border-n-strong bg-n-solid-3 w-96 backdrop-blur-[100px] px-6 py-5 z-50 shadow rounded-xl gap-4 max-h-96 overflow-auto"},ife={class:"text-sm font-medium text-n-slate-12"},lfe={key:0,class:"flex flex-col items-end w-full"},lI={__name:"SLAPopoverCard",props:{slaMissedEvents:{type:Array,required:!0}},setup(e){const t=e,{SLA_MISS_TYPES:n}=yt,s=j(!1),a=y(()=>t.slaMissedEvents.filter(c=>c.event_type===n.FRT)),o=y(()=>{const c=t.slaMissedEvents.filter(u=>u.event_type===n.NRT);return s.value?c:c.slice(0,6)}),i=y(()=>t.slaMissedEvents.filter(c=>c.event_type===n.RT)),l=y(()=>o.value.length>6),r=()=>{s.value=!s.value};return(c,u)=>(p(),E("div",ofe,[m("span",ife,I(c.$t("SLA.EVENTS.TITLE")),1),a.value.length?(p(),L(Vh,{key:0,label:c.$t("SLA.EVENTS.FRT"),items:a.value},null,8,["label","items"])):$("",!0),o.value.length?(p(),L(Vh,{key:1,label:c.$t("SLA.EVENTS.NRT"),items:o.value},{showMore:Y(()=>[l.value?(p(),E("div",lfe,[S(te,{link:"",xs:"",slate:"",class:"hover:!no-underline",icon:s.value?"":"i-lucide-plus",label:s.value?c.$t("SLA.EVENTS.HIDE",{count:o.value.length}):c.$t("SLA.EVENTS.SHOW_MORE",{count:o.value.length}),onClick:r},null,8,["icon","label"])])):$("",!0)]),_:1},8,["label","items"])):$("",!0),i.value.length?(p(),L(Vh,{key:2,label:c.$t("SLA.EVENTS.RT"),items:i.value},null,8,["label","items"])):$("",!0)]))}},rfe={components:{SLAPopoverCard:lI,NextButton:te},props:{slaEvents:{type:Array,default:()=>[]}},data(){return{showSlaPopoverCard:!1}},methods:{closeSlaEvents(){this.showSlaPopoverCard=!1},openSlaEvents(){this.showSlaPopoverCard=!this.showSlaPopoverCard}}},cfe={class:"flex items-center col-span-2 text-n-slate-11 justify-end"},ufe={class:"relative"};function dfe(e,t,n,s,a,o){const i=W("NextButton"),l=W("SLAPopoverCard"),r=Qe("on-clickaway");return re((p(),E("div",cfe,[m("div",ufe,[S(i,{link:"",slate:"",type:"button",label:e.$t("SLA_REPORTS.TABLE.VIEW_DETAILS"),onClick:o.openSlaEvents},null,8,["label","onClick"]),a.showSlaPopoverCard?(p(),L(l,{key:0,"sla-missed-events":n.slaEvents,class:"right-0"},null,8,["sla-missed-events"])):$("",!0)])])),[[r,o.closeSlaEvents]])}const pfe=De(rfe,[["render",dfe]]),mfe={class:"grid items-center content-center w-full h-16 grid-cols-12 gap-4 px-6 py-0 border-b last:border-b-0 last:rounded-b-xl border-n-weak"},hfe={class:"flex items-center gap-2 col-span-6 px-0 py-2 text-sm tracking-[0.5] text-n-slate-12 rtl:text-right"},ffe={class:"text-n-slate-11"},gfe={class:"capitalize truncate text-n-slate-12"},_fe={class:"flex items-center capitalize py-2 px-0 text-sm tracking-[0.5] text-n-slate-12 text-left rtl:text-right col-span-2"},vfe={class:"flex items-center col-span-2 gap-2"},Efe={key:1,class:"text-n-slate-11"},bfe={__name:"SLAReportItem",props:{slaName:{type:String,required:!0},conversationId:{type:Number,required:!0},conversation:{type:Object,required:!0},slaEvents:{type:Array,default:()=>[]}},setup(e){const t=e,n=y(()=>t.conversation.labels?t.conversation.labels.split(",").map(a=>a.trim()):[]),s=y(()=>({name:"inbox_conversation",params:{conversation_id:t.conversationId}}));return(a,o)=>{const i=W("router-link");return p(),E("div",mfe,[m("div",hfe,[S(i,{to:s.value,class:"text-n-slate-12 hover:underline"},{default:Y(()=>[xe(I(`#${e.conversationId}`),1)]),_:1},8,["to"]),m("span",ffe,I(a.$t("SLA_REPORTS.WITH")),1),m("span",gfe,I(e.conversation.contact.name),1),n.value.length?(p(),L(iI,{key:0,class:"w-[60%]","conversation-id":e.conversationId,"conversation-labels":n.value},null,8,["conversation-id","conversation-labels"])):$("",!0)]),m("div",_fe,I(e.slaName),1),m("div",vfe,[e.conversation.assignee?(p(),L(qf,{key:0,user:e.conversation.assignee},null,8,["user"])):(p(),E("span",Efe," --- "))]),S(pfe,{"sla-events":e.slaEvents},null,8,["sla-events"])])}}},Tfe={name:"SLATable",components:{SLAReportItem:bfe,TableFooter:c_,Spinner:Ls,TableHeaderCell:oI},props:{slaReports:{type:Array,default:()=>[]},totalCount:{type:Number,default:0},currentPage:{type:Number,default:1},pageSize:{type:Number,default:25},isLoading:{type:Boolean,default:!1}},emits:["pageChange"],data(){return{pageNo:1}},computed:{shouldShowFooter(){return this.currentPage===1?this.totalCount>this.pageSize:this.slaReports.length>0}},methods:{onPageChange(e){this.$emit("pageChange",e)}}},Sfe={class:"min-w-full shadow outline-1 outline outline-n-container rounded-xl bg-n-solid-2 p-6"},Afe={class:"grid content-center h-12 grid-cols-12 gap-4 px-6 py-0 bg-n-slate-2 rounded-md"},yfe={key:0,class:"flex items-center justify-center h-32"},Ife={key:1},Cfe={key:2,class:"flex items-center justify-center h-32"};function Nfe(e,t,n,s,a,o){const i=W("TableHeaderCell"),l=W("Spinner"),r=W("SLAReportItem"),c=W("TableFooter");return p(),E("div",null,[m("div",Sfe,[m("div",Afe,[S(i,{span:6,label:e.$t("SLA_REPORTS.TABLE.HEADER.CONVERSATION")},null,8,["label"]),S(i,{span:2,label:e.$t("SLA_REPORTS.TABLE.HEADER.POLICY")},null,8,["label"]),S(i,{span:2,label:e.$t("SLA_REPORTS.TABLE.HEADER.AGENT")},null,8,["label"]),S(i,{span:1,label:""})]),n.isLoading?(p(),E("div",yfe,[S(l),m("span",null,I(e.$t("SLA_REPORTS.LOADING")),1)])):n.slaReports.length>0?(p(),E("div",Ife,[(p(!0),E(ue,null,Ae(n.slaReports,u=>(p(),L(r,{key:u.applied_sla.id,"sla-name":u.applied_sla.sla_name,conversation:u.conversation,"conversation-id":u.conversation.id,"sla-events":u.sla_events},null,8,["sla-name","conversation","conversation-id","sla-events"]))),128))])):(p(),E("div",Cfe,I(e.$t("SLA_REPORTS.NO_RECORDS")),1))]),o.shouldShowFooter?(p(),L(c,{key:0,"current-page":n.currentPage,"total-count":n.totalCount,"page-size":n.pageSize,onPageChange:o.onPageChange},null,8,["current-page","total-count","page-size","onPageChange"])):$("",!0)])}const Ofe=De(Tfe,[["render",Nfe]]),Gb=(e,t)=>e.map(n=>({id:n.id,name:t==="labels"?n.title:n.name,type:t})),Rfe=(e,t,n)=>e.find(s=>t==="labels"?s.title===n:s.id.toString()===n.toString()),ju=(e,t)=>({keyToType:{assigned_agent_id:"agents",inbox_id:"inboxes",team_id:"teams",sla_policy_id:"sla",label_list:"labels"},typeToKey:{agents:"assigned_agent_id",inboxes:"inbox_id",teams:"team_id",sla:"sla_policy_id",labels:"label_list"}})[t][e],xfe={class:"min-w-0 truncate"},mu={__name:"DropdownButton",props:{buttonText:{type:String,default:""},trailingIcon:{type:Boolean,default:!1},icon:{type:String,default:""}},setup(e){return(t,n)=>(p(),L(te,{ghost:"",slate:"",sm:"",class:"relative","no-animation":"",icon:e.icon,"trailing-icon":e.trailingIcon},{default:Y(()=>[m("span",xfe,I(e.buttonText),1),We(t.$slots,"dropdown")]),_:3},8,["icon","trailing-icon"]))}},wfe={class:"relative inline-flex items-center justify-start w-full p-3 border-0 rounded-none first:rounded-t-xl last:rounded-b-xl h-11 hover:enabled:bg-n-alpha-2"},$fe={class:"inline-flex items-center gap-3 overflow-hidden"},Mfe={class:"text-sm font-medium truncate text-n-slate-12"},rI={__name:"DropdownListItemButton",props:{buttonText:{type:String,default:""},isActive:{type:Boolean,default:!1},icon:{type:String,default:""},iconColor:{type:String,default:""}},setup(e){return(t,n)=>{const s=W("fluent-icon");return p(),E("button",wfe,[m("div",$fe,[e.icon?(p(),L(s,{key:0,icon:e.icon,size:"18",style:Zt({color:e.iconColor})},null,8,["icon","style"])):$("",!0),m("span",Mfe,I(e.buttonText),1),e.isActive?(p(),L(s,{key:1,icon:"checkmark",size:"18",class:"flex-shrink-0 text-n-slate-12"})):$("",!0)]),We(t.$slots,"dropdown")])}}},Lfe={class:"flex items-center justify-between h-10 min-h-[40px] sticky top-0 bg-n-solid-2 dark:bg-n-solid-2 z-10 gap-2 px-3 border-b rounded-t-xl border-n-weak"},Dfe=["placeholder"],Pfe={__name:"DropdownSearch",props:jt({inputPlaceholder:{type:String,default:""},showClearFilter:{type:Boolean,default:!1}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:jt(["remove"],["update:modelValue"]),setup(e,{emit:t}){const n=t,s=Xt(e,"modelValue");return(a,o)=>{const i=W("fluent-icon");return p(),E("div",Lfe,[m("div",{class:"flex items-center w-full gap-2",onKeyup:o[1]||(o[1]=wn(Ve(()=>{},["prevent"]),["space"]))},[S(i,{icon:"search",size:"16",class:"text-n-slate-11 flex-shrink-0"}),re(m("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>s.value=l),placeholder:e.inputPlaceholder,type:"text",class:"w-full mb-0 text-sm !outline-0 bg-transparent text-n-slate-12 placeholder:text-n-slate-10 reset-base"},null,8,Dfe),[[gt,s.value]])],32),!e.modelValue&&e.showClearFilter?(p(),L(te,{key:0,faded:"",xs:"",class:"flex-shrink-0",label:a.$t("REPORT.FILTER_ACTIONS.CLEAR_FILTER"),onClick:o[2]||(o[2]=l=>n("remove"))},null,8,["label"])):$("",!0)])}}},kfe={class:"flex items-center justify-center h-10 text-sm text-n-slate-11"},cI={__name:"DropdownEmptyState",props:{message:{type:String,default:""}},setup(e){return(t,n)=>(p(),E("div",kfe,I(e.message),1))}},Bfe={class:"flex items-center justify-center h-10 text-sm text-n-slate-11"},Ufe={__name:"DropdownLoadingState",props:{message:{type:String,default:""}},setup(e){return(t,n)=>(p(),E("div",Bfe,I(e.message),1))}},Xc={__name:"DropdownList",props:{listItems:{type:Array,default:()=>[]},enableSearch:{type:Boolean,default:!1},inputPlaceholder:{type:String,default:""},activeFilterId:{type:[String,Number],default:null},showClearFilter:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},loadingPlaceholder:{type:String,default:""}},emits:["onSearch","select","removeFilter"],setup(e,{emit:t}){const n=e,s=t,a=j(""),o=Ua(h=>{s("onSearch",h)},300),i=h=>{a.value=h,o(h)},l=y(()=>a.value?bl(n.listItems,a.value,["name"]):n.listItems),r=y(()=>!l.value.length),c=h=>n.activeFilterId?h===n.activeFilterId:!1,u=y(()=>n.isLoading&&r.value&&n.loadingPlaceholder),d=y(()=>!n.isLoading&&r.value);return(h,g)=>(p(),E("div",{class:"absolute z-20 w-40 bg-n-solid-2 border-0 outline outline-1 outline-n-weak shadow rounded-xl max-h-[400px]",onClick:g[2]||(g[2]=Ve(()=>{},["stop"]))},[We(h.$slots,"search",{},()=>[e.enableSearch?(p(),L(Pfe,{key:0,modelValue:a.value,"onUpdate:modelValue":[g[0]||(g[0]=f=>a.value=f),i],"input-placeholder":e.inputPlaceholder,"show-clear-filter":e.showClearFilter,onRemove:g[1]||(g[1]=f=>h.$emit("removeFilter"))},null,8,["modelValue","input-placeholder","show-clear-filter"])):$("",!0)]),We(h.$slots,"listItem",{},()=>[u.value?(p(),L(Ufe,{key:0,message:e.loadingPlaceholder},null,8,["message"])):d.value?(p(),L(cI,{key:1,message:h.$t("REPORT.FILTER_ACTIONS.EMPTY_LIST")},null,8,["message"])):$("",!0),(p(!0),E(ue,null,Ae(l.value,f=>(p(),L(rI,{key:f.id,"is-active":c(f.id),"button-text":f.name,icon:f.icon,"icon-color":f.iconColor,onClick:Ve(b=>s("select",f),["stop","prevent"])},null,8,["is-active","button-text","icon","icon-color","onClick"]))),128))])]))}},Ffe={__name:"ActiveFilterChip",props:{name:{type:String,required:!0},id:{type:Number,required:!0},type:{type:String,required:!0},options:{type:Array,default:()=>[]},activeFilterType:{type:String,default:""},showMenu:{type:Boolean,default:!1},placeholder:{type:String,default:""},enableSearch:{type:Boolean,default:!1}},emits:["toggleDropdown","removeFilter","addFilter","closeDropdown"],setup(e,{emit:t}){const n=e,s=t,a=()=>s("toggleDropdown",n.type),o=()=>s("removeFilter",n.type),i=r=>s("addFilter",r),l=()=>s("closeDropdown");return(r,c)=>{const u=Qe("on-clickaway");return p(),L(mu,{"trailing-icon":"",icon:"i-lucide-chevron-down","button-text":e.name,onClick:a},co({_:2},[e.showMenu&&e.activeFilterType===e.type?{name:"dropdown",fn:Y(()=>[e.options?re((p(),L(Xc,{key:0,"show-clear-filter":"","list-items":e.options,"active-filter-id":e.id,"input-placeholder":e.placeholder,"enable-search":e.enableSearch,class:"flex flex-col w-[240px] overflow-y-auto left-0 md:left-auto md:right-0 top-10",onSelect:i,onRemoveFilter:o},null,8,["list-items","active-filter-id","input-placeholder","enable-search"])),[[u,l]]):$("",!0)]),key:"0"}:void 0]),1032,["button-text"])}}},Gfe={__name:"AddFilterChip",props:{name:{type:String,required:!0},menuOption:{type:Array,default:()=>[]},showMenu:{type:Boolean,default:!1},placeholderI18nKey:{type:String,default:""},enableSearch:{type:Boolean,default:!0},emptyStateMessage:{type:String,default:""}},emits:["toggleDropdown","addFilter","closeDropdown"],setup(e,{emit:t}){const n=t,s=j(null),a=u=>{s.value=u},o=()=>{s.value=null},i=u=>s.value===u,l=()=>n("toggleDropdown"),r=u=>{n("addFilter",u),o()},c=()=>{o(),n("closeDropdown")};return(u,d)=>{const h=Qe("on-clickaway");return p(),L(mu,{"button-text":e.name,icon:"i-lucide-filter",onClick:l},co({_:2},[e.showMenu?{name:"dropdown",fn:Y(()=>[re((p(),L(Xc,{class:"left-0 md:right-0 top-10"},{listItem:Y(()=>[e.menuOption.length?$("",!0):(p(),L(cI,{key:0,message:e.emptyStateMessage},null,8,["message"])),(p(!0),E(ue,null,Ae(e.menuOption,g=>(p(),L(rI,{key:g.id,"button-text":g.name,onMouseenter:f=>a(g.id),onMouseleave:o,onFocus:f=>a(g.id)},co({_:2},[g.options&&i(g.id)?{name:"dropdown",fn:Y(()=>[S(Xc,{"list-items":g.options,"input-placeholder":u.$t(`${e.placeholderI18nKey}.${g.type.toUpperCase()}`),"enable-search":e.enableSearch,class:"flex flex-col w-[216px] overflow-y-auto top-0 left-36",onSelect:r},null,8,["list-items","input-placeholder","enable-search"])]),key:"0"}:void 0]),1032,["button-text","onMouseenter","onFocus"]))),128))]),_:1})),[[h,c]])]),key:"0"}:void 0]),1032,["button-text"])}}},Vfe={components:{FilterButton:mu,ActiveFilterChip:Ffe,AddFilterChip:Gfe},emits:["filterChange"],data(){return{showDropdownMenu:!1,showSubDropdownMenu:!1,activeFilterType:"",appliedFilters:{assigned_agent_id:null,inbox_id:null,team_id:null,sla_policy_id:null,label_list:null}}},computed:{...mt({agents:"agents/getAgents",inboxes:"inboxes/getInboxes",teams:"teams/getTeams",labels:"labels/getLabels",sla:"sla/getSLA"}),filterListMenuItems(){const e=[{id:"1",name:this.$t("SLA_REPORTS.DROPDOWN.SLA"),type:"sla"},{id:"2",name:this.$t("SLA_REPORTS.DROPDOWN.INBOXES"),type:"inboxes"},{id:"3",name:this.$t("SLA_REPORTS.DROPDOWN.AGENTS"),type:"agents"},{id:"4",name:this.$t("SLA_REPORTS.DROPDOWN.TEAMS"),type:"teams"},{id:"5",name:this.$t("SLA_REPORTS.DROPDOWN.LABELS"),type:"labels"}],n=Object.keys(this.appliedFilters).filter(s=>this.appliedFilters[s]).map(s=>ju(s,"keyToType"));return e.filter(({type:s})=>!n.includes(s)).map(({id:s,name:a,type:o})=>({id:s,name:a,type:o,options:Gb(this[o],o)}))},activeFilters(){return Object.keys(this.appliedFilters).filter(t=>this.appliedFilters[t]).map(t=>{const n=ju(t,"keyToType"),s=Rfe(this[n],n,this.appliedFilters[t]);return{id:s.id,name:n==="labels"?s.title:s.name,type:n,options:Gb(this[n],n)}})},hasActiveFilters(){return Object.values(this.appliedFilters).some(e=>e!==null)},isAllFilterSelected(){return!this.filterListMenuItems.length}},methods:{addFilter(e){const{type:t,id:n,name:s}=e,a=ju(t,"typeToKey");this.appliedFilters[a]=t==="labels"?s:n,this.$emit("filterChange",this.appliedFilters),this.resetDropdown()},removeFilter(e){const t=ju(e,"typeToKey");this.appliedFilters[t]=null,this.$emit("filterChange",this.appliedFilters)},clearAllFilters(){this.appliedFilters={assigned_agent_id:null,inbox_id:null,team_id:null,sla_policy_id:null,label_list:null},this.$emit("filterChange",this.appliedFilters),this.resetDropdown()},showDropdown(){this.showSubDropdownMenu=!1,this.showDropdownMenu=!this.showDropdownMenu},closeDropdown(){this.showDropdownMenu=!1},openActiveFilterDropdown(e){this.closeDropdown(),this.activeFilterType=e,this.showSubDropdownMenu=!this.showSubDropdownMenu},closeActiveFilterDropdown(){this.activeFilterType="",this.showSubDropdownMenu=!1},resetDropdown(){this.closeDropdown(),this.closeActiveFilterDropdown()}}},Hfe={class:"flex flex-col flex-wrap items-start gap-2 md:items-center md:flex-nowrap md:flex-row"},Wfe={key:0,class:"flex flex-wrap gap-2 md:flex-nowrap"},zfe={key:1,class:"w-full h-px border md:w-px md:h-5 border-n-weak"},Yfe={class:"flex items-center gap-2"},jfe={key:1,class:"w-px h-5 border border-n-weak"};function Kfe(e,t,n,s,a,o){const i=W("ActiveFilterChip"),l=W("AddFilterChip"),r=W("FilterButton");return p(),E("div",Hfe,[o.hasActiveFilters?(p(),E("div",Wfe,[(p(!0),E(ue,null,Ae(o.activeFilters,c=>(p(),L(i,Qn({ref_for:!0},c,{key:c.type,placeholder:e.$t(`SLA_REPORTS.DROPDOWN.INPUT_PLACEHOLDER.${c.type.toUpperCase()}`),"active-filter-type":a.activeFilterType,"show-menu":a.showSubDropdownMenu,"enable-search":"",onToggleDropdown:o.openActiveFilterDropdown,onCloseDropdown:o.closeActiveFilterDropdown,onAddFilter:o.addFilter,onRemoveFilter:o.removeFilter}),null,16,["placeholder","active-filter-type","show-menu","onToggleDropdown","onCloseDropdown","onAddFilter","onRemoveFilter"]))),128))])):$("",!0),o.hasActiveFilters&&!o.isAllFilterSelected?(p(),E("div",zfe)):$("",!0),m("div",Yfe,[o.isAllFilterSelected?$("",!0):(p(),L(l,{key:0,"placeholder-i18n-key":"SLA_REPORTS.DROPDOWN.INPUT_PLACEHOLDER",name:e.$t("SLA_REPORTS.DROPDOWN.ADD_FIlTER"),"menu-option":o.filterListMenuItems,"show-menu":a.showDropdownMenu,"empty-state-message":e.$t("SLA_REPORTS.DROPDOWN.NO_FILTER"),onToggleDropdown:o.showDropdown,onCloseDropdown:o.closeDropdown,onAddFilter:o.addFilter},null,8,["name","menu-option","show-menu","empty-state-message","onToggleDropdown","onCloseDropdown","onAddFilter"])),o.hasActiveFilters?(p(),E("div",jfe)):$("",!0),o.hasActiveFilters?(p(),L(r,{key:2,"button-text":e.$t("SLA_REPORTS.DROPDOWN.CLEAR_ALL"),onClick:o.clearAllFilters},null,8,["button-text","onClick"])):$("",!0)])])}const Xfe=De(Vfe,[["render",Kfe]]),qfe={components:{SLAFilter:Xfe},emits:["filterChange"],data(){return{selectedDateRange:or.LAST_7_DAYS,selectedGroupByFilter:null,customDateRange:[new Date,new Date]}},computed:{to(){return bd(this.customDateRange[1])},from(){return Ed(this.customDateRange[0])}},watch:{businessHoursSelected(){this.emitChange()}},mounted(){this.setInitialRange()},methods:{setInitialRange(){const{offset:e}=this.selectedDateRange,t=xo(new Date,e),n=Ed(t),s=bd(new Date);this.$emit("filterChange",{from:n,to:s,...this.selectedGroupByFilter})},emitChange(){const{from:e,to:t}=this;this.$emit("filterChange",{from:e,to:t,...this.selectedGroupByFilter})},emitFilterChange(e){this.selectedGroupByFilter=e,this.emitChange()},onDateRangeChange(e){this.customDateRange=e,this.emitChange()}}},Zfe={class:"flex flex-col flex-wrap w-full gap-3 md:flex-row"};function Qfe(e,t,n,s,a,o){const i=W("woot-date-picker"),l=W("SLAFilter");return p(),E("div",Zfe,[S(i,{onDateRangeChanged:o.onDateRangeChange},null,8,["onDateRangeChanged"]),S(l,{onFilterChange:o.emitFilterChange},null,8,["onFilterChange"])])}const Jfe=De(qfe,[["render",Qfe]]),ege={name:"SLAReports",components:{V4Button:te,ReportHeader:Lo,SLAMetrics:efe,SLATable:Ofe,SLAReportFilters:Jfe},data(){return{pageNumber:1,activeFilter:{from:0,to:0,assigned_agent_id:null,inbox_id:null,team_id:null,sla_policy_id:null,label_list:null}}},computed:{...mt({slaReports:"slaReports/getAll",slaMetrics:"slaReports/getMetrics",slaMeta:"slaReports/getMeta",uiFlags:"slaReports/getUIFlags"})},mounted(){this.$store.dispatch("agents/get"),this.$store.dispatch("inboxes/get"),this.$store.dispatch("teams/get"),this.$store.dispatch("labels/get"),this.$store.dispatch("sla/get"),this.fetchSLAMetrics(),this.fetchSLAReports()},methods:{fetchSLAReports({pageNumber:e}={}){this.$store.dispatch("slaReports/get",{page:e||this.pageNumber,...this.activeFilter})},fetchSLAMetrics(){this.$store.dispatch("slaReports/getMetrics",this.activeFilter)},onPageChange(e){this.fetchSLAReports({pageNumber:e})},onFilterChange(e){this.activeFilter=e,this.fetchSLAReports(),this.fetchSLAMetrics()},downloadReports(){const e="sla";try{this.$store.dispatch("slaReports/download",{fileName:Jc({type:e,to:this.activeFilter.to}),...this.activeFilter})}catch{ne(this.$t("SLA_REPORTS.DOWNLOAD_FAILED"))}}}},tge={class:"flex flex-col flex-1 gap-6"};function nge(e,t,n,s,a,o){const i=W("V4Button"),l=W("ReportHeader"),r=W("SLAReportFilters"),c=W("SLAMetrics"),u=W("SLATable");return p(),E(ue,null,[S(l,{"header-title":e.$t("SLA_REPORTS.HEADER")},{default:Y(()=>[S(i,{label:e.$t("SLA_REPORTS.DOWNLOAD_SLA_REPORTS"),icon:"i-ph-download-simple",size:"sm",onClick:o.downloadReports},null,8,["label","onClick"])]),_:1},8,["header-title"]),m("div",tge,[S(r,{onFilterChange:o.onFilterChange},null,8,["onFilterChange"]),S(c,{"hit-rate":e.slaMetrics.hitRate,"no-of-breaches":e.slaMetrics.numberOfSLAMisses,"no-of-conversations":e.slaMetrics.numberOfConversations,"is-loading":e.uiFlags.isFetchingMetrics},null,8,["hit-rate","no-of-breaches","no-of-conversations","is-loading"]),S(u,{"sla-reports":e.slaReports,"is-loading":e.uiFlags.isFetching,"current-page":Number(e.slaMeta.currentPage),"total-count":Number(e.slaMeta.count),onPageChange:o.onPageChange},null,8,["sla-reports","is-loading","current-page","total-count","onPageChange"])])],64)}const sge=De(ege,[["render",nge]]),Ho={featureFlag:ft.REPORTS,permissions:["administrator","report_manage"]},age=[{path:"agent",name:"agent_reports",meta:Ho,component:Qpe},{path:"inboxes",name:"inbox_reports",meta:Ho,component:Jpe},{path:"label",name:"label_reports",meta:Ho,component:eme},{path:"teams",name:"team_reports",meta:Ho,component:tme}],oge=[{path:"agents_overview",name:"agent_reports_index",meta:{permissions:["administrator","report_manage"]},component:dpe},{path:"agents/:id",name:"agent_reports_show",meta:{permissions:["administrator","report_manage"]},component:zpe},{path:"inboxes_overview",name:"inbox_reports_index",meta:{permissions:["administrator","report_manage"]},component:ppe},{path:"inboxes/:id",name:"inbox_reports_show",meta:{permissions:["administrator","report_manage"]},component:jpe},{path:"teams_overview",name:"team_reports_index",meta:{permissions:["administrator","report_manage"]},component:mpe},{path:"teams/:id",name:"team_reports_show",meta:{permissions:["administrator","report_manage"]},component:Xpe},{path:"labels_overview",name:"label_reports_index",meta:{permissions:["administrator","report_manage"]},component:hpe},{path:"labels/:id",name:"label_reports_show",meta:{permissions:["administrator","report_manage"]},component:Zpe}],ige={routes:[{path:vt("accounts/:accountId/reports"),component:yre,children:[{path:"",redirect:e=>({name:"account_overview_reports",params:e.params})},{path:"overview",name:"account_overview_reports",meta:Ho,component:Yhe},{path:"conversation",name:"conversation_reports",meta:Ho,component:fde},...age,...oge,{path:"sla",name:"sla_reports",meta:Ho,component:sge},{path:"csat",name:"csat_reports",meta:Ho,component:Rme},{path:"bot",name:"bot_reports",meta:Ho,component:Dme}]}]},uI={name:{required:Ye,minLength:en(2)},thresholdTime:{decimal:mO,minValue:TS(.001)}},lge={props:{threshold:{type:Number,default:null},thresholdUnit:{type:String,default:"Minutes"},label:{type:String,default:""},placeholder:{type:String,default:""}},emits:["unit","isInValid","updateThreshold"],setup(){return{v$:bt()}},data(){return{thresholdTime:this.threshold||"",thresholdUnitValue:this.thresholdUnit,options:[{value:"Minutes",label:"minutes"},{value:"Hours",label:"hours"},{value:"Days",label:"days"}]}},validations:uI,computed:{thresholdTimeErrorMessage(){let e="";return this.v$.thresholdTime.$error&&(!this.v$.thresholdTime.numeric||!this.v$.thresholdTime.minValue)&&(e=this.$t("SLA.FORM.THRESHOLD_TIME.INVALID_FORMAT_ERROR")),e}},watch:{threshold:{immediate:!0,handler(e){Number.isNaN(e)||(this.thresholdTime=e)}},thresholdUnit:{immediate:!0,handler(e){this.thresholdUnitValue=e}}},methods:{onThresholdUnitChange(){this.$emit("unit",this.thresholdUnitValue)},onThresholdTimeChange(){this.v$.thresholdTime.$touch();const e=this.v$.thresholdTime.$invalid;this.$emit("isInValid",e),this.$emit("updateThreshold",this.thresholdTime?Number(this.thresholdTime):null)}}},rge={class:"flex items-center w-full gap-3"},cge={class:"mt-7"},uge=["value"];function dge(e,t,n,s,a,o){const i=W("woot-input");return p(),E("div",rge,[S(i,{modelValue:a.thresholdTime,"onUpdate:modelValue":[t[0]||(t[0]=l=>a.thresholdTime=l),o.onThresholdTimeChange],type:"number",class:ae([{error:s.v$.thresholdTime.$error},"flex-grow"]),styles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem"},label:n.label,placeholder:n.placeholder,error:o.thresholdTimeErrorMessage},null,8,["modelValue","class","label","placeholder","error","onUpdate:modelValue"]),m("div",cge,[re(m("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>a.thresholdUnitValue=l),class:"px-4 py-1.5 min-w-[6.5rem] h-10 text-sm font-medium border-0 rounded-xl hover:cursor-pointer pr-7",onChange:t[2]||(t[2]=(...l)=>o.onThresholdUnitChange&&o.onThresholdUnitChange(...l))},[(p(!0),E(ue,null,Ae(a.options,(l,r)=>(p(),E("option",{key:r,value:l.value},I(l.label),9,uge))),128))],544),[[Nn,a.thresholdUnitValue]])])])}const pge=De(lge,[["render",dge]]),mge={components:{SlaTimeInput:pge,NextButton:te,ToggleSwitch:va},props:{selectedResponse:{type:Object,default:()=>{}},submitLabel:{type:String,required:!0}},emits:["close","submitSla"],setup(){return{v$:bt()}},data(){return{name:"",description:"",isSlaTimeInputsInvalid:!1,slaTimeInputsValidation:{},slaTimeInputs:[{threshold:null,unit:"Minutes",label:"SLA.FORM.FIRST_RESPONSE_TIME.LABEL",placeholder:"SLA.FORM.FIRST_RESPONSE_TIME.PLACEHOLDER"},{threshold:null,unit:"Minutes",label:"SLA.FORM.NEXT_RESPONSE_TIME.LABEL",placeholder:"SLA.FORM.NEXT_RESPONSE_TIME.PLACEHOLDER"},{threshold:null,unit:"Minutes",label:"SLA.FORM.RESOLUTION_TIME.LABEL",placeholder:"SLA.FORM.RESOLUTION_TIME.PLACEHOLDER"}],onlyDuringBusinessHours:!1}},validations:uI,computed:{...mt({uiFlags:"sla/getUIFlags"}),isSubmitDisabled(){return this.v$.name.$invalid||this.isSlaTimeInputsInvalid||this.uiFlags.isUpdating},slaNameErrorMessage(){let e="";return this.v$.name.$error&&(this.v$.name.required?this.v$.name.minLength||(e=this.$t("SLA.FORM.NAME.MINIMUM_LENGTH_ERROR")):e=this.$t("SLA.FORM.NAME.REQUIRED_ERROR")),e}},mounted(){this.selectedResponse&&this.setFormValues()},methods:{onClose(){this.$emit("close")},setFormValues(){const{name:e,description:t,first_response_time_threshold:n,next_response_time_threshold:s,resolution_time_threshold:a,only_during_business_hours:o}=this.selectedResponse;this.name=e,this.description=t,this.onlyDuringBusinessHours=o;const i=[n,s,a];this.slaTimeInputs.forEach((l,r)=>{const c=_S(i[r],{minute:"Minutes",hour:"Hours",day:"Days"});l.threshold=c.time,l.unit=c.unit})},updateThreshold(e,t){this.slaTimeInputs[e].threshold=t},updateUnit(e,t){this.slaTimeInputs[e].unit=t},onSubmit(){const e={name:this.name,description:this.description,first_response_time_threshold:this.convertToSeconds(0),next_response_time_threshold:this.convertToSeconds(1),resolution_time_threshold:this.convertToSeconds(2),only_during_business_hours:this.onlyDuringBusinessHours};this.$emit("submitSla",e)},convertToSeconds(e){const{threshold:t,unit:n}=this.slaTimeInputs[e];return t===null||t===0?null:Number(t*({Minutes:60,Hours:3600,Days:86400}[n]||1))},handleIsInvalid(e,t){this.slaTimeInputsValidation={...this.slaTimeInputsValidation,[e]:t},this.checkValidationState()},checkValidationState(){const e=Object.values(this.slaTimeInputsValidation).some(t=>t);this.isSlaTimeInputsInvalid=e}}},hge={class:"flex flex-col h-auto overflow-auto"},fge={class:"mt-3 flex h-10 items-center text-sm w-full gap-2 border border-solid border-n-strong px-3 py-1.5 rounded-xl justify-between"},gge={for:"sla_bh",class:"text-n-slate-11"},_ge={class:"flex items-center justify-end w-full gap-2 mt-8"};function vge(e,t,n,s,a,o){const i=W("woot-input"),l=W("SlaTimeInput"),r=W("ToggleSwitch"),c=W("NextButton");return p(),E("div",hge,[m("form",{class:"flex flex-wrap mx-0",onSubmit:t[3]||(t[3]=Ve((...u)=>o.onSubmit&&o.onSubmit(...u),["prevent"]))},[S(i,{modelValue:a.name,"onUpdate:modelValue":t[0]||(t[0]=u=>a.name=u),class:ae([{error:s.v$.name.$error},"w-full"]),styles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem"},label:e.$t("SLA.FORM.NAME.LABEL"),placeholder:e.$t("SLA.FORM.NAME.PLACEHOLDER"),error:o.slaNameErrorMessage,onInput:s.v$.name.$touch,onBlur:s.v$.name.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),S(i,{modelValue:a.description,"onUpdate:modelValue":t[1]||(t[1]=u=>a.description=u),class:"w-full",styles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem"},label:e.$t("SLA.FORM.DESCRIPTION.LABEL"),placeholder:e.$t("SLA.FORM.DESCRIPTION.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),(p(!0),E(ue,null,Ae(a.slaTimeInputs,(u,d)=>(p(),L(l,{key:d,threshold:u.threshold,"threshold-unit":u.unit,label:e.$t(u.label),placeholder:e.$t(u.placeholder),onUpdateThreshold:h=>o.updateThreshold(d,h),onUnit:h=>o.updateUnit(d,h),onIsInValid:h=>o.handleIsInvalid(d,h)},null,8,["threshold","threshold-unit","label","placeholder","onUpdateThreshold","onUnit","onIsInValid"]))),128)),m("div",fge,[m("span",gge,I(e.$t("SLA.FORM.BUSINESS_HOURS.PLACEHOLDER")),1),S(r,{id:"sla_bh",modelValue:a.onlyDuringBusinessHours,"onUpdate:modelValue":t[2]||(t[2]=u=>a.onlyDuringBusinessHours=u)},null,8,["modelValue"])]),m("div",_ge,[S(c,{faded:"",slate:"",type:"reset",label:e.$t("SLA.FORM.CANCEL"),onClick:Ve(o.onClose,["prevent"])},null,8,["label","onClick"]),S(c,{type:"submit",label:n.submitLabel,disabled:o.isSubmitDisabled,"is-loading":e.uiFlags.isUpdating},null,8,["label","disabled","is-loading"])])],32)])}const Ege=De(mge,[["render",vge]]),bge={components:{SlaForm:Ege},emits:["close"],methods:{onClose(){this.$emit("close")},async addSLA(e){try{await this.$store.dispatch("sla/create",e),ne(this.$t("SLA.ADD.API.SUCCESS_MESSAGE")),this.onClose()}catch(t){const n=t.message||this.$t("SLA.ADD.API.ERROR_MESSAGE");ne(n)}}}},Tge={class:"flex flex-col h-auto overflow-auto"};function Sge(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("SlaForm");return p(),E("div",Tge,[S(i,{"header-title":e.$t("SLA.ADD.TITLE"),"header-content":e.$t("SLA.ADD.DESC")},null,8,["header-title","header-content"]),S(l,{"submit-label":e.$t("SLA.FORM.CREATE"),onSubmitSla:o.addSLA,onClose:o.onClose},null,8,["submit-label","onSubmitSla","onClose"])])}const Age=De(bge,[["render",Sge]]),yge={class:"flex relative flex-col sm:flex-row p-4 gap-4 sm:p-6 justify-between group outline outline-n-container outline-1 bg-n-solid-2 rounded-2xl shadow w-full"},Ige={class:"flex flex-col min-w-0 items-start gap-3 max-w-[480px] w-full"},Cge={class:"flex items-center justify-between w-full gap-3 sm:justify-normal whitespace-nowrap"},Nge={class:"justify-between tracking-tight font-medium truncate w-fit sm:justify-normal text-n-slate-12"},Oge={class:"text-base text-n-slate-11 max-w-[25rem] w-full line-clamp-2"},Rge={key:0,class:"absolute flex-col items-center hidden gap-1 border-none ltr:-right-3 rtl:-left-3 top-3 group-hover:flex"},dI={__name:"BaseSettingsListItem",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(e){return(t,n)=>(p(),E("div",yge,[We(t.$slots,"leftSection",{},()=>[m("div",Ige,[m("div",Cge,[m("h3",Nge,[We(t.$slots,"title",{},()=>[xe(I(e.title),1)])]),We(t.$slots,"label")]),m("p",Oge,[We(t.$slots,"description",{},()=>[xe(I(e.description),1)])])])]),We(t.$slots,"rightSection"),t.$slots.actions?(p(),E("div",Rge,[We(t.$slots,"actions")])):$("",!0)]))}},xge={class:"flex flex-row items-start w-full h-full gap-1 sm:items-end sm:px-6 sm:py-2 sm:gap-2 sm:flex-col"},wge={class:"inline-flex items-center gap-1 tracking-[-0.6%] text-sm ltr:pl-1.5 sm:ltr:pl-0 rtl:pr-1.5 sm:rtl:pr-0 text-n-slate-11"},$ge={class:"text-sm sm:text-2xl font-medium tracking-[-1.5%] text-n-slate-12"},Hh={__name:"SLAResponseTime",props:{responseType:{type:String,default:""},responseTime:{type:String,default:""}},setup(e){return(t,n)=>{const s=W("fluent-icon"),a=Qe("tooltip");return p(),E("div",xge,[m("span",wge,[re(S(s,{size:"14",icon:"information",type:"outline",class:"flex-shrink-0 hidden text-sm font-normal sm:flex sm:font-medium text-n-slate-11"},null,512),[[a,t.$t(`SLA.LIST.RESPONSE_TYPES.${e.responseType}`),void 0,{left:!0}]]),xe(" "+I(t.$t(`SLA.LIST.RESPONSE_TYPES.SHORT_HAND.${e.responseType}`))+" ",1),n[0]||(n[0]=m("span",{class:"flex sm:hidden"},":",-1))]),m("span",$ge,I(e.responseTime),1)])}}},Mge={class:"inline-flex items-center min-w-0 gap-1 px-1.5 sm:px-2 py-1 border border-solid rounded-lg border-n-weak"},Lge={__name:"SLABusinessHoursLabel",props:{hasBusinessHours:{type:Boolean,required:!0}},setup(e){return(t,n)=>{const s=W("fluent-icon");return p(),E("div",Mge,[S(s,{size:"14",icon:e.hasBusinessHours?"alarm-on":"alarm-off",type:"outline",class:ae(["flex-shrink-0",e.hasBusinessHours?"text-n-slate-11":"text-n-slate-10"])},null,8,["icon","class"]),m("span",{class:ae(["hidden text-xs tracking-[0.2%] font-normal truncate sm:block",e.hasBusinessHours?"text-n-slate-11":"text-n-slate-10"])},I(e.hasBusinessHours?t.$t("SLA.LIST.BUSINESS_HOURS_ON"):t.$t("SLA.LIST.BUSINESS_HOURS_OFF")),3)])}}},Dge={class:"flex items-center divide-x rtl:divide-x-reverse sm:rtl:!border-l-0 sm:rtl:!border-r sm:rtl:border-solid sm:rtl:border-n-weak gap-1.5 w-fit sm:w-full sm:gap-0 sm:justify-between divide-n-weak"},Zf={__name:"SLAListItem",props:{slaName:{type:String,required:!0},description:{type:String,required:!0},firstResponse:{type:String,required:!0},nextResponse:{type:String,required:!0},resolutionTime:{type:String,required:!0},hasBusinessHours:{type:Boolean,required:!0},isLoading:{type:Boolean,default:!1}},emits:["delete"],setup(e,{emit:t}){const n=t;return(s,a)=>{const o=Qe("tooltip");return p(),L(dI,{class:"sm:divide-x sm:divide-n-weak",title:e.slaName,description:e.description},{label:Y(()=>[S(Lge,{"has-business-hours":e.hasBusinessHours},null,8,["has-business-hours"])]),rightSection:Y(()=>[m("div",Dge,[S(Hh,{"response-type":"FRT","response-time":e.firstResponse},null,8,["response-time"]),S(Hh,{"response-type":"NRT","response-time":e.nextResponse},null,8,["response-time"]),S(Hh,{"response-type":"RT","response-time":e.resolutionTime},null,8,["response-time"])])]),actions:Y(()=>[re(S(te,{faded:"",ruby:"",xs:"",icon:"i-lucide-trash-2","is-loading":e.isLoading,onClick:a[0]||(a[0]=i=>n("delete"))},null,8,["is-loading"]),[[o,s.$t("SLA.FORM.DELETE"),void 0,{top:!0}]])]),_:1},8,["title","description"])}}},Pge={class:"w-full min-h-[12rem] relative"},kge={class:"w-full space-y-3"},Bge={class:"absolute inset-0 flex flex-col items-center justify-center w-full h-full bg-gradient-to-t from-white dark:from-slate-900 to-transparent"},pI={__name:"BaseEmptyState",setup(e){return(t,n)=>(p(),E("div",Pge,[m("div",kge,[S(Zf,{class:"opacity-25 dark:opacity-20","sla-name":t.$t("SLA.LIST.EMPTY.TITLE_1"),description:t.$t("SLA.LIST.EMPTY.DESC_1"),"first-response":"20m","next-response":"1h","resolution-time":"24h","has-business-hours":""},null,8,["sla-name","description"]),S(Zf,{class:"opacity-25 dark:opacity-20","sla-name":t.$t("SLA.LIST.EMPTY.TITLE_2"),description:t.$t("SLA.LIST.EMPTY.DESC_2"),"first-response":"2h","next-response":"4h","resolution-time":"4d","has-business-hours":""},null,8,["sla-name","description"])]),m("div",Bge,[We(t.$slots,"default")])]))}},Uge={class:"max-w-xs text-sm font-medium text-center"},Fge={__name:"SLAEmptyState",emits:["primaryAction"],setup(e,{emit:t}){const n=t,s=()=>n("primaryAction");return(a,o)=>(p(),L(pI,null,{default:Y(()=>[m("p",Uge,I(a.$t("SLA.LIST.404")),1),S(te,{icon:"i-lucide-plus",class:"mt-4",label:a.$t("SLA.ADD_ACTION_LONG"),onClick:s},null,8,["label"])]),_:1}))}},Gge={__name:"SLAHeader",props:{showActions:{type:Boolean,default:!0}},emits:["add"],setup(e){return(t,n)=>(p(),L(hs,{title:t.$t("SLA.HEADER"),description:t.$t("SLA.DESCRIPTION"),"link-text":t.$t("SLA.LEARN_MORE"),"feature-name":"sla"},co({_:2},[e.showActions?{name:"actions",fn:Y(()=>[S(te,{label:t.$t("SLA.ADD_ACTION"),icon:"i-lucide-circle-plus",onClick:n[0]||(n[0]=s=>t.$emit("add"))},null,8,["label"])]),key:"0"}:void 0]),1032,["title","description","link-text"]))}},Vge={class:"flex items-center sm:rtl:!border-l-0 sm:rtl:!border-r border-n-weak gap-1.5 w-fit sm:w-full sm:gap-0 sm:justify-between"},Hge={__name:"SLAListItemLoading",setup(e){return(t,n)=>(p(),L(dI,{class:"opacity-50"},{title:Y(()=>n[0]||(n[0]=[m("div",{class:"w-24 h-[26px] rounded-md bg-n-slate-4 dark:bg-n-slate-6 animate-pulse"},null,-1)])),description:Y(()=>n[1]||(n[1]=[m("div",{class:"w-64 h-4 mb-0.5 rounded-md bg-n-slate-4 dark:bg-n-slate-6 animate-pulse"},null,-1),m("div",{class:"w-48 h-4 rounded-md bg-n-slate-4 dark:bg-n-slate-6 animate-pulse"},null,-1)])),label:Y(()=>n[2]||(n[2]=[m("div",{class:"w-32 h-[26px] bg-n-slate-4 dark:bg-n-slate-6 animate-pulse rounded-md"},null,-1)])),rightSection:Y(()=>[m("div",Vge,[(p(),E(ue,null,Ae(3,s=>m("div",{key:s,class:"flex justify-end w-1/3 h-full px-4"},n[3]||(n[3]=[m("div",{class:"w-32 h-full rounded-md bg-n-slate-4 dark:bg-n-slate-6 animate-pulse"},null,-1)]))),64))])]),_:1}))}},Wge={class:"flex flex-col max-w-md px-6 py-6 border shadow bg-n-solid-1 rounded-xl border-n-weak"},zge={class:"flex items-center w-full gap-2 mb-4"},Yge={class:"flex items-center justify-center w-6 h-6 rounded-full bg-n-solid-blue"},jge={class:"text-base font-medium text-n-slate-12"},Kge={class:"text-sm font-normal text-n-slate-11"},Xge={class:"text-sm font-normal text-n-slate-11"},qge={key:0},Zge={class:"mt-2 text-xs tracking-tight text-center text-n-slate-11"},Qge={key:1,href:"/super_admin",class:"block w-full"},Wp={__name:"BasePaywallModal",props:{featurePrefix:{type:String,required:!0},i18nKey:{type:String,required:!0},isOnChatwootCloud:{type:Boolean,default:!1},isSuperAdmin:{type:Boolean,default:!1}},emits:["upgrade"],setup(e,{emit:t}){const n=t;return(s,a)=>{const o=Qe("dompurify-html");return p(),E("div",Wge,[m("div",zge,[m("span",Yge,[S(dt,{class:"flex-shrink-0 text-n-brand size-[14px]",icon:"i-lucide-lock-keyhole"})]),m("span",jge,I(s.$t(`${e.featurePrefix}.PAYWALL.TITLE`)),1)]),re(m("p",Kge,null,512),[[o,s.$t(`${e.featurePrefix}.${e.i18nKey}.AVAILABLE_ON`)]]),m("p",Xge,[xe(I(s.$t(`${e.featurePrefix}.${e.i18nKey}.UPGRADE_PROMPT`))+" ",1),!e.isOnChatwootCloud&&!e.isSuperAdmin?(p(),E("span",qge,I(s.$t(`${e.featurePrefix}.ENTERPRISE_PAYWALL.ASK_ADMIN`)),1)):$("",!0)]),e.isOnChatwootCloud?(p(),E(ue,{key:0},[S(te,{blue:"",solid:"",md:"",onClick:a[0]||(a[0]=i=>n("upgrade"))},{default:Y(()=>[xe(I(s.$t(`${e.featurePrefix}.PAYWALL.UPGRADE_NOW`)),1)]),_:1}),m("span",Zge,I(s.$t(`${e.featurePrefix}.PAYWALL.CANCEL_ANYTIME`)),1)],64)):e.isSuperAdmin?(p(),E("a",Qge,[S(te,{solid:"",blue:"",md:"",class:"w-full"},{default:Y(()=>[xe(I(s.$t(`${e.featurePrefix}.PAYWALL.UPGRADE_NOW`)),1)]),_:1})])):$("",!0)])}}},Jge={__name:"SLAPaywallEnterprise",props:{isSuperAdmin:{type:Boolean,default:!1},isOnChatwootCloud:{type:Boolean,default:!1}},emits:["upgrade"],setup(e,{emit:t}){const n=e,s=t,a=n.isOnChatwootCloud?"PAYWALL":"ENTERPRISE_PAYWALL";return(o,i)=>(p(),L(pI,null,{default:Y(()=>[S(Wp,{"feature-prefix":"SLA","i18n-key":C(a),"is-on-chatwoot-cloud":e.isOnChatwootCloud,"is-super-admin":e.isSuperAdmin,onUpgrade:i[0]||(i[0]=l=>s("upgrade"))},null,8,["i18n-key","is-on-chatwoot-cloud","is-super-admin"])]),_:1}))}},e_e={components:{AddSLA:Age,SettingsLayout:Es,SLAEmptyState:Fge,SLAHeader:Gge,SLAListItem:Zf,SLAListItemLoading:Hge,SLAPaywallEnterprise:Jge},data(){return{loading:{},showAddPopup:!1,showDeleteConfirmationPopup:!1,selectedResponse:{}}},computed:{...mt({isOnChatwootCloud:"globalConfig/isOnChatwootCloud",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",records:"sla/getSLA",currentUser:"getCurrentUser",accountId:"getCurrentAccountId",uiFlags:"sla/getUIFlags"}),deleteConfirmText(){return this.$t("SLA.DELETE.CONFIRM.YES")},deleteRejectText(){return this.$t("SLA.DELETE.CONFIRM.NO")},deleteMessage(){return` ${this.selectedResponse.name}`},isBehindAPaywall(){return!this.isFeatureEnabledonAccount(this.accountId,"sla")},isSuperAdmin(){return this.currentUser.type==="SuperAdmin"}},mounted(){this.$store.dispatch("sla/get")},methods:{openAddPopup(){this.isBehindAPaywall||(this.showAddPopup=!0)},hideAddPopup(){this.showAddPopup=!1},openDeletePopup(e){this.showDeleteConfirmationPopup=!0,this.selectedResponse=e},closeDeletePopup(){this.showDeleteConfirmationPopup=!1},confirmDeletion(){this.loading[this.selectedResponse.id]=!0,this.closeDeletePopup(),this.deleteSla(this.selectedResponse.id)},deleteSla(e){this.$store.dispatch("sla/delete",e).then(()=>{ne(this.$t("SLA.DELETE.API.SUCCESS_MESSAGE"))}).catch(()=>{ne(this.$t("SLA.DELETE.API.ERROR_MESSAGE"))}).finally(()=>{this.loading[this.selectedResponse.id]=!1})},displayTime(e){const{time:t,unit:n}=_S(e,{minute:"m",hour:"h",day:"d"});return t?`${t}${n}`:"-"},onClickCTA(){this.$router.push({name:"billing_settings_index",params:{accountId:this.accountId}})}}},t_e={key:2,class:"flex flex-col w-full h-full gap-3"};function n_e(e,t,n,s,a,o){const i=W("SLAHeader"),l=W("SLAListItemLoading"),r=W("SLAPaywallEnterprise"),c=W("SLAEmptyState"),u=W("SLAListItem"),d=W("AddSLA"),h=W("woot-modal"),g=W("woot-delete-modal"),f=W("SettingsLayout");return p(),L(f,{"is-loading":e.uiFlags.isFetching,"loading-message":e.$t("SLA.LOADING")},{header:Y(()=>[S(i,{"show-actions":e.records.length>0,onAdd:o.openAddPopup},null,8,["show-actions","onAdd"])]),loading:Y(()=>[(p(),E(ue,null,Ae(2,b=>S(l,{key:b,class:"mb-3"})),64))]),body:Y(()=>[o.isBehindAPaywall?(p(),L(r,{key:0,"is-super-admin":o.isSuperAdmin,"is-on-chatwoot-cloud":e.isOnChatwootCloud,onUpgrade:o.onClickCTA},null,8,["is-super-admin","is-on-chatwoot-cloud","onUpgrade"])):e.records.length?(p(),E("div",t_e,[(p(!0),E(ue,null,Ae(e.records,b=>(p(),L(u,{key:b.title,"sla-name":b.name,description:b.description,"first-response":o.displayTime(b.first_response_time_threshold),"next-response":o.displayTime(b.next_response_time_threshold),"resolution-time":o.displayTime(b.resolution_time_threshold),"has-business-hours":b.only_during_business_hours,"is-loading":a.loading[b.id],onDelete:A=>o.openDeletePopup(b)},null,8,["sla-name","description","first-response","next-response","resolution-time","has-business-hours","is-loading","onDelete"]))),128))])):(p(),L(c,{key:1,onPrimaryAction:o.openAddPopup},null,8,["onPrimaryAction"])),S(h,{show:a.showAddPopup,"onUpdate:show":t[0]||(t[0]=b=>a.showAddPopup=b),"on-close":o.hideAddPopup},{default:Y(()=>[S(d,{onClose:o.hideAddPopup},null,8,["onClose"])]),_:1},8,["show","on-close"]),S(g,{show:a.showDeleteConfirmationPopup,"onUpdate:show":t[1]||(t[1]=b=>a.showDeleteConfirmationPopup=b),"on-close":o.closeDeletePopup,"on-confirm":o.confirmDeletion,title:e.$t("SLA.DELETE.CONFIRM.TITLE"),message:e.$t("SLA.DELETE.CONFIRM.MESSAGE"),"message-value":o.deleteMessage,"confirm-text":o.deleteConfirmText,"reject-text":o.deleteRejectText},null,8,["show","on-close","on-confirm","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message"])}const s_e=De(e_e,[["render",n_e]]),Vb={featureFlag:ft.SLA,permissions:["administrator"],installationTypes:[Gn.CLOUD,Gn.ENTERPRISE]},a_e={routes:[{path:vt("accounts/:accountId/settings/sla"),component:Rs,props:{},children:[{path:"",name:"sla_wrapper",meta:Vb,redirect:e=>({name:"sla_list",params:e.params})},{path:"list",name:"sla_list",meta:Vb,component:s_e}]}]},o_e={class:"flex-1 overflow-auto"},i_e={class:"mt-6 flex-1 text-n-slate-11"},l_e={key:1,class:"flex flex-col items-center justify-center h-full text-base p-8"},r_e={key:2,class:"min-w-full divide-y divide-n-weak"},c_e={class:"divide-y divide-n-weak"},u_e={class:"py-4 ltr:pr-4 rtl:pl-4"},d_e={class:"block font-medium capitalize"},p_e={class:"mb-0"},m_e={class:"py-4 flex justify-end gap-1"},h_e={__name:"Index",setup(e){const t=rt(),{t:n}=be(),s=pn(),a=y(()=>s["teams/getTeams"].value),o=y(()=>s["teams/getUIFlags"].value),{isAdmin:i}=za(),l=j({}),r=async({id:T})=>{try{l.value[T]=!0,await t.dispatch("teams/delete",T),ne(n("TEAMS_SETTINGS.DELETE.API.SUCCESS_MESSAGE"))}catch{ne(n("TEAMS_SETTINGS.DELETE.API.ERROR_MESSAGE"))}finally{l.value[T]=!1}},c=j(!1),u=j({}),d=T=>{c.value=!0,u.value=T},h=()=>{c.value=!1,u.value={}},g=()=>{r(u.value),h()},f=y(()=>`${n("TEAMS_SETTINGS.DELETE.CONFIRM.YES")} ${u.value.name}`),b=y(()=>n("TEAMS_SETTINGS.DELETE.CONFIRM.NO")),A=y(()=>n("TEAMS_SETTINGS.DELETE.CONFIRM.TITLE",{teamName:u.value.name})),v=y(()=>n("TEAMS_SETTINGS.DELETE.CONFIRM.PLACE_HOLDER",{teamName:u.value.name}));return(T,_)=>{const N=W("router-link"),R=W("woot-loading-state"),O=W("woot-confirm-delete-modal"),x=Qe("tooltip");return p(),E("div",o_e,[S(hs,{title:T.$t("TEAMS_SETTINGS.HEADER"),description:T.$t("TEAMS_SETTINGS.DESCRIPTION"),"link-text":T.$t("TEAMS_SETTINGS.LEARN_MORE"),"feature-name":"team_management"},{actions:Y(()=>[C(i)?(p(),L(N,{key:0,to:{name:"settings_teams_new"}},{default:Y(()=>[S(te,{icon:"i-lucide-circle-plus",label:T.$t("TEAMS_SETTINGS.NEW_TEAM")},null,8,["label"])]),_:1})):$("",!0)]),_:1},8,["title","description","link-text"]),m("div",i_e,[o.value.isFetching?(p(),L(R,{key:0,message:T.$t("TEAMS_SETTINGS.LOADING")},null,8,["message"])):a.value.length?(p(),E("table",r_e,[m("tbody",c_e,[(p(!0),E(ue,null,Ae(a.value,w=>(p(),E("tr",{key:w.id},[m("td",u_e,[m("span",d_e,I(w.name),1),m("p",p_e,I(w.description),1)]),m("td",m_e,[S(N,{to:{name:"settings_teams_edit",params:{teamId:w.id}}},{default:Y(()=>[C(i)?re((p(),L(te,{key:0,icon:"i-lucide-settings",slate:"",xs:"",faded:""},null,512)),[[x,T.$t("TEAMS_SETTINGS.LIST.EDIT_TEAM"),void 0,{top:!0}]]):$("",!0)]),_:2},1032,["to"]),C(i)?re((p(),L(te,{key:0,icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":l.value[w.id],onClick:D=>d(w)},null,8,["is-loading","onClick"])),[[x,T.$t("TEAMS_SETTINGS.DELETE.BUTTON_TEXT"),void 0,{top:!0}]]):$("",!0)])]))),128))])])):(p(),E("p",l_e,I(T.$t("TEAMS_SETTINGS.LIST.404")),1))]),c.value?(p(),L(O,{key:0,show:c.value,"onUpdate:show":_[0]||(_[0]=w=>c.value=w),title:A.value,message:T.$t("TEAMS_SETTINGS.DELETE.CONFIRM.MESSAGE"),"confirm-text":f.value,"reject-text":b.value,"confirm-value":u.value.name,"confirm-place-holder-text":v.value,onOnConfirm:g,onOnClose:h},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):$("",!0)])}}},f_e={computed:{items(){const e=["WIZARD_CREATE","WIZARD_ADD_AGENTS","WIZARD_FINISH"],t={WIZARD_CREATE:"settings_teams_new",WIZARD_ADD_AGENTS:"settings_teams_add_agents",WIZARD_FINISH:"settings_teams_finish"};return e.map(n=>({title:this.$t(`TEAMS_SETTINGS.CREATE_FLOW.${n}.TITLE`),body:this.$t(`TEAMS_SETTINGS.CREATE_FLOW.${n}.BODY`),route:t[n]}))}}},g_e={class:"mx-2 flex flex-col gap-6 mb-8"},__e={class:"grid grid-cols-1 lg:grid-cols-8 lg:divide-x lg:divide-n-weak rounded-xl border border-n-weak min-h-[43rem]"};function v_e(e,t,n,s,a,o){const i=W("woot-wizard"),l=W("router-view");return p(),E("div",g_e,[m("div",__e,[S(i,{class:"hidden lg:block col-span-2 h-fit py-8 px-6",items:o.items},null,8,["items"]),S(l)])])}const E_e=De(f_e,[["render",v_e]]),b_e={computed:{items(){const e={EDIT_WIZARD_DETAILS:"settings_teams_edit",EDIT_WIZARD_AGENTS:"settings_teams_edit_members",EDIT_WIZARD_FINISH:"settings_teams_edit_finish"};return["EDIT_WIZARD_DETAILS","EDIT_WIZARD_AGENTS","EDIT_WIZARD_FINISH"].map(n=>({title:this.$t(`TEAMS_SETTINGS.EDIT_FLOW.${n}.TITLE`),body:this.$t(`TEAMS_SETTINGS.EDIT_FLOW.${n}.BODY`),route:e[n]}))}}},T_e={class:"mx-2 flex flex-col gap-6 mb-8"},S_e={class:"grid grid-cols-1 lg:grid-cols-8 lg:divide-x lg:divide-n-weak rounded-xl border border-n-weak min-h-[43rem]"};function A_e(e,t,n,s,a,o){const i=W("woot-wizard"),l=W("router-view");return p(),E("div",T_e,[m("div",S_e,[S(i,{class:"hidden lg:block col-span-2 h-fit py-8 px-6",items:o.items},null,8,["items"]),S(l)])])}const y_e=De(b_e,[["render",A_e]]),I_e={title:{required:Ye,minLength:en(2)},description:{},showOnSidebar:{}},C_e={components:{NextButton:te,FormInput:MO},props:{onSubmit:{type:Function,default:()=>{}},submitInProgress:{type:Boolean,default:!1},formData:{type:Object,default:()=>{}},submitButtonText:{type:String,default:""}},setup(e){const t=e.formData||{},{description:n="",name:s="",allow_auto_assign:a=!0}=t,o=gn({description:n,title:s,allowAutoAssign:a}),l=bt(I_e,o);return{state:o,v$:l}},methods:{handleSubmit(){this.v$.$touch(),!this.v$.$invalid&&this.onSubmit({description:this.state.description,name:this.state.title,allow_auto_assign:this.state.allowAutoAssign})}}},N_e={class:"flex-shrink-0 w-full"},O_e={class:"w-full flex items-center gap-2"},R_e={for:"conversation_creation"},x_e={class:"flex flex-row justify-end gap-2 py-2 px-0 w-full"},w_e={class:"w-full"};function $_e(e,t,n,s,a,o){const i=W("FormInput"),l=W("NextButton");return p(),E("div",N_e,[m("form",{class:"mx-0 grid gap-4",onSubmit:t[3]||(t[3]=Ve((...r)=>o.handleSubmit&&o.handleSubmit(...r),["prevent"]))},[S(i,{modelValue:s.state.title,"onUpdate:modelValue":t[0]||(t[0]=r=>s.state.title=r),name:"title",spacing:"compact",label:e.$t("TEAMS_SETTINGS.FORM.NAME.LABEL"),placeholder:e.$t("TEAMS_SETTINGS.FORM.NAME.PLACEHOLDER"),"has-error":s.v$.title.$error,"error-message":s.v$.title.$error?s.v$.title.$errors[0].$message:"",onBlur:s.v$.title.$touch},null,8,["modelValue","label","placeholder","has-error","error-message","onBlur"]),S(i,{modelValue:s.state.description,"onUpdate:modelValue":t[1]||(t[1]=r=>s.state.description=r),name:"description",spacing:"compact",label:e.$t("TEAMS_SETTINGS.FORM.DESCRIPTION.LABEL"),placeholder:e.$t("TEAMS_SETTINGS.FORM.DESCRIPTION.PLACEHOLDER"),"has-error":s.v$.description.$error,"error-message":s.v$.description.$error?s.v$.description.$errors[0].$message:"",onBlur:s.v$.description.$touch},null,8,["modelValue","label","placeholder","has-error","error-message","onBlur"]),m("div",O_e,[re(m("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>s.state.allowAutoAssign=r),type:"checkbox",value:!0},null,512),[[dn,s.state.allowAutoAssign]]),m("label",R_e,I(e.$t("TEAMS_SETTINGS.FORM.AUTO_ASSIGN.LABEL")),1)]),m("div",x_e,[m("div",w_e,[S(l,{type:"submit",label:n.submitButtonText,disabled:s.v$.title.$invalid||n.submitInProgress,"is-loading":n.submitInProgress},null,8,["label","disabled","is-loading"])])])],32)])}const mI=De(C_e,[["render",$_e]]),M_e={components:{TeamForm:mI,PageHeader:Xs},data(){return{enabledFeatures:{}}},methods:{async createTeam(e){try{const t=await this.$store.dispatch("teams/create",{...e});ps.replace({name:"settings_teams_add_agents",params:{page:"new",teamId:t.id}})}catch{ne(this.$t("TEAMS_SETTINGS.TEAM_FORM.ERROR_MESSAGE"))}}}},L_e={class:"h-full w-full p-6 col-span-6"},D_e={class:"flex flex-wrap"};function P_e(e,t,n,s,a,o){const i=W("PageHeader"),l=W("TeamForm");return p(),E("div",L_e,[S(i,{"header-title":e.$t("TEAMS_SETTINGS.CREATE_FLOW.CREATE.TITLE"),"header-content":e.$t("TEAMS_SETTINGS.CREATE_FLOW.CREATE.DESC")},null,8,["header-title","header-content"]),m("div",D_e,[S(l,{"on-submit":o.createTeam,"submit-in-progress":!1,"submit-button-text":e.$t("TEAMS_SETTINGS.FORM.SUBMIT_CREATE")},null,8,["on-submit","submit-button-text"])])])}const k_e=De(M_e,[["render",P_e]]),B_e={components:{TeamForm:mI,PageHeader:Xs,Spinner:Ls},data(){return{enabledFeatures:{}}},computed:{teamData(){const{teamId:e}=this.$route.params;return this.$store.getters["teams/getTeam"](e)},showTeamForm(){const{id:e}=this.teamData;return e&&!this.uiFlags.isFetching},...mt({uiFlags:"teams/getUIFlags"})},methods:{async updateTeam(e){try{const{teamId:t}=this.$route.params;await this.$store.dispatch("teams/update",{id:t,...e}),ps.replace({name:"settings_teams_edit_members",params:{page:"edit",teamId:t}})}catch{ne(this.$t("TEAMS_SETTINGS.TEAM_FORM.ERROR_MESSAGE"))}}}},U_e={class:"h-full w-full p-8 col-span-6"},F_e={class:"flex flex-wrap"};function G_e(e,t,n,s,a,o){const i=W("PageHeader"),l=W("TeamForm"),r=W("Spinner");return p(),E("div",U_e,[S(i,{"header-title":e.$t("TEAMS_SETTINGS.EDIT_FLOW.CREATE.TITLE"),"header-content":e.$t("TEAMS_SETTINGS.EDIT_FLOW.CREATE.DESC")},null,8,["header-title","header-content"]),m("div",F_e,[o.showTeamForm?(p(),L(l,{key:0,"on-submit":o.updateTeam,"submit-in-progress":!1,"submit-button-text":e.$t("TEAMS_SETTINGS.EDIT_FLOW.CREATE.BUTTON_TEXT"),"form-data":o.teamData},null,8,["on-submit","submit-button-text","form-data"])):(p(),L(r,{key:1}))])])}const V_e=De(B_e,[["render",G_e]]),H_e={components:{NextButton:te,Avatar:kt},props:{agentList:{type:Array,default:()=>[]},selectedAgents:{type:Array,default:()=>[]},updateSelectedAgents:{type:Function,default:()=>{}},isWorking:{type:Boolean,default:!1},submitButtonText:{type:String,default:""}},data(){return{}},computed:{selectedAgentCount(){return this.selectedAgents.length},allAgentsSelected(){return this.selectedAgents.length===this.agentList.length},disableSubmitButton(){return this.selectedAgentCount===0}},methods:{isAgentSelected(e){return this.selectedAgents.includes(e)},handleSelectAgent(e){const t=this.isAgentSelected(e);let n=[];t?n=this.selectedAgents.filter(s=>s!==e):n=[...this.selectedAgents,e],this.updateSelectedAgents(n)},selectAllAgents(){const e=this.agentList.map(t=>t.id);this.updateSelectedAgents(e)},agentRowClass(e){return{"is-active":this.isAgentSelected(e)}}}},W_e={class:"[&>th]:font-semibold [&>th]:tracking-[1px] ltr:[&>th]:text-left rtl:[&>th]:text-right [&>th]:px-2.5 [&>th]:uppercase [&>th]:text-n-slate-12"},z_e={class:"ltr:pl-2.5 rtl:pr-2.5"},Y_e={class:"flex items-center"},j_e=["checked","title"],K_e={class:"text-n-slate-12 ltr:pl-2.5 rtl:pr-2.5"},X_e={class:"text-n-slate-12 ltr:pl-2.5 rtl:pr-2.5"},q_e={class:"w-12"},Z_e={class:"flex items-center"},Q_e=["checked","onClick"],J_e={class:"flex items-center gap-2"},eve={class:"text-base mb-0 text-n-slate-12"},tve={class:"flex items-center justify-between mt-2"};function nve(e,t,n,s,a,o){const i=W("Avatar"),l=W("NextButton");return p(),E("div",null,[t[1]||(t[1]=m("div",{class:"add-agents__header"},null,-1)),m("table",null,[m("thead",W_e,[m("tr",null,[m("td",z_e,[m("div",Y_e,[m("input",{name:"select-all-agents",type:"checkbox",checked:o.allAgentsSelected?"checked":"",title:e.$t("TEAMS_SETTINGS.AGENTS.SELECT_ALL"),onClick:t[0]||(t[0]=Ve((...r)=>o.selectAllAgents&&o.selectAllAgents(...r),["self"]))},null,8,j_e)])]),m("td",K_e,I(e.$t("TEAMS_SETTINGS.AGENTS.AGENT")),1),m("td",X_e,I(e.$t("TEAMS_SETTINGS.AGENTS.EMAIL")),1)])]),m("tbody",null,[(p(!0),E(ue,null,Ae(n.agentList,r=>(p(),E("tr",{key:r.id,class:ae([o.agentRowClass(r.id),"border-b border-n-weak [&>td]:p-2.5 [&>td]:text-n-slate-12"])},[m("td",q_e,[m("div",Z_e,[m("input",{type:"checkbox",checked:o.isAgentSelected(r.id),onClick:Ve(()=>o.handleSelectAgent(r.id),["self"])},null,8,Q_e)])]),m("td",null,[m("div",J_e,[S(i,{src:r.thumbnail,name:r.name,status:r.availability_status,size:24,"hide-offline-status":"","rounded-full":""},null,8,["src","name","status"]),m("h4",eve,I(r.name),1)])]),m("td",null,I(r.email||"---"),1)],2))),128))])]),m("div",tve,[m("p",null,I(e.$t("TEAMS_SETTINGS.AGENTS.SELECTED_COUNT",{selected:n.selectedAgents.length,total:n.agentList.length})),1),S(l,{type:"submit",label:n.submitButtonText,disabled:o.disableSubmitButton,"is-loading":n.isWorking},null,8,["label","disabled","is-loading"])])])}const hI=De(H_e,[["render",nve],["__scopeId","data-v-c0b62c4e"]]),sve={components:{PageHeader:Xs,AgentSelector:hI},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}}},setup(){return{v$:bt()}},data(){return{selectedAgents:[],isCreating:!1}},computed:{...mt({agentList:"agents/getAgents"}),teamId(){return this.$route.params.teamId},headerTitle(){return this.$t("TEAMS_SETTINGS.ADD.TITLE",{teamName:this.currentTeam.name})},currentTeam(){return this.$store.getters["teams/getTeam"](this.teamId)}},mounted(){this.$store.dispatch("agents/get")},methods:{updateSelectedAgents(e){this.v$.selectedAgents.$touch(),this.selectedAgents=[...e]},selectAllAgents(){this.selectedAgents=this.agentList.map(e=>e.id)},async addAgents(){this.isCreating=!0;const{teamId:e,selectedAgents:t}=this;try{await this.$store.dispatch("teamMembers/create",{teamId:e,agentsList:t}),ps.replace({name:"settings_teams_finish",params:{page:"new",teamId:e}}),this.$store.dispatch("teams/get")}catch(n){ne(n.message)}this.isCreating=!1}}},ave={class:"h-full w-full p-6 col-span-6"},ove={class:"w-full"},ive={class:"w-full"},lve={key:0},rve={class:"error-message pb-2"};function cve(e,t,n,s,a,o){const i=W("PageHeader"),l=W("AgentSelector");return p(),E("div",ave,[m("form",{class:"flex flex-wrap mx-0 overflow-x-auto",onSubmit:t[0]||(t[0]=Ve((...r)=>o.addAgents&&o.addAgents(...r),["prevent"]))},[m("div",ove,[S(i,{"header-title":o.headerTitle,"header-content":e.$t("TEAMS_SETTINGS.ADD.DESC")},null,8,["header-title","header-content"])]),m("div",ive,[s.v$.selectedAgents.$error?(p(),E("div",lve,[m("p",rve,I(e.$t("TEAMS_SETTINGS.ADD.AGENT_VALIDATION_ERROR")),1)])):$("",!0),S(l,{"agent-list":e.agentList,"selected-agents":a.selectedAgents,"update-selected-agents":o.updateSelectedAgents,"is-working":a.isCreating,"submit-button-text":e.$t("TEAMS_SETTINGS.ADD.BUTTON_TEXT")},null,8,["agent-list","selected-agents","update-selected-agents","is-working","submit-button-text"])])],32)])}const uve=De(sve,[["render",cve]]),dve={components:{Spinner:Ls,PageHeader:Xs,AgentSelector:hI},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}}},setup(){return{v$:bt()}},data(){return{selectedAgents:[],isCreating:!1}},computed:{...mt({agentList:"agents/getAgents",uiFlags:"teamMembers/getUIFlags"}),teamId(){return this.$route.params.teamId},headerTitle(){return this.$t("TEAMS_SETTINGS.EDIT_FLOW.AGENTS.TITLE",{teamName:this.currentTeam.name})},currentTeam(){return this.$store.getters["teams/getTeam"](this.teamId)},teamMembers(){return this.$store.getters["teamMembers/getTeamMembers"](this.teamId)},showAgentsList(){const{id:e}=this.currentTeam;return e&&!this.uiFlags.isFetching}},async mounted(){const{teamId:e}=this.$route.params;this.$store.dispatch("agents/get");try{await this.$store.dispatch("teamMembers/get",{teamId:e});const t=this.teamMembers.map(n=>n.id);this.updateSelectedAgents(t)}catch{this.updateSelectedAgents([])}},methods:{updateSelectedAgents(e){this.v$.selectedAgents.$touch(),this.selectedAgents=[...e]},async addAgents(){this.isCreating=!0;const{teamId:e,selectedAgents:t}=this;try{await this.$store.dispatch("teamMembers/update",{teamId:e,agentsList:t}),ps.replace({name:"settings_teams_edit_finish",params:{page:"edit",teamId:e}}),this.$store.dispatch("teams/get")}catch(n){ne(n.message)}this.isCreating=!1}}},pve={class:"h-full w-full p-8 col-span-6"},mve={class:"w-full"},hve={class:"w-full"},fve={key:0},gve={class:"error-message pb-2"};function _ve(e,t,n,s,a,o){const i=W("PageHeader"),l=W("AgentSelector"),r=W("Spinner");return p(),E("div",pve,[m("form",{class:"flex flex-wrap mx-0 overflow-x-auto",onSubmit:t[0]||(t[0]=Ve((...c)=>o.addAgents&&o.addAgents(...c),["prevent"]))},[m("div",mve,[S(i,{"header-title":o.headerTitle,"header-content":e.$t("TEAMS_SETTINGS.EDIT_FLOW.AGENTS.DESC")},null,8,["header-title","header-content"])]),m("div",hve,[s.v$.selectedAgents.$error?(p(),E("div",fve,[m("p",gve,I(e.$t("TEAMS_SETTINGS.ADD.AGENT_VALIDATION_ERROR")),1)])):$("",!0),o.showAgentsList?(p(),L(l,{key:1,"agent-list":e.agentList,"selected-agents":a.selectedAgents,"update-selected-agents":o.updateSelectedAgents,"is-working":a.isCreating,"submit-button-text":e.$t("TEAMS_SETTINGS.EDIT_FLOW.AGENTS.BUTTON_TEXT")},null,8,["agent-list","selected-agents","update-selected-agents","is-working","submit-button-text"])):(p(),L(r,{key:2}))])],32)])}const vve=De(dve,[["render",_ve]]),Eve={components:{NextButton:te,EmptyState:Il}},bve={class:"h-full w-full p-6 col-span-6"},Tve={class:"w-full text-center"};function Sve(e,t,n,s,a,o){const i=W("NextButton"),l=W("router-link"),r=W("EmptyState");return p(),E("div",bve,[S(r,{title:e.$t("TEAMS_SETTINGS.FINISH.TITLE"),message:e.$t("TEAMS_SETTINGS.FINISH.MESSAGE"),"button-text":e.$t("TEAMS_SETTINGS.FINISH.BUTTON_TEXT")},{default:Y(()=>[m("div",Tve,[S(l,{to:{name:"settings_teams_list"}},{default:Y(()=>[S(i,{teal:"",label:e.$t("TEAMS_SETTINGS.FINISH.BUTTON_TEXT")},null,8,["label"])]),_:1})])]),_:1},8,["title","message","button-text"])])}const Hb=De(Eve,[["render",Sve]]),Ave={routes:[{path:vt("accounts/:accountId/settings/teams"),component:Rs,children:[{path:"",redirect:e=>({name:"settings_teams_list",params:e.params})},{path:"list",name:"settings_teams_list",component:h_e,meta:{featureFlag:ft.TEAM_MANAGEMENT,permissions:["administrator"]}}]},{path:vt("accounts/:accountId/settings/teams"),component:au,props:()=>({headerTitle:"TEAMS_SETTINGS.HEADER",icon:"people-team",showBackButton:!0}),children:[{path:"new",component:E_e,children:[{path:"",name:"settings_teams_new",component:k_e,meta:{featureFlag:ft.TEAM_MANAGEMENT,permissions:["administrator"]}},{path:":teamId/finish",name:"settings_teams_finish",component:Hb,meta:{featureFlag:ft.TEAM_MANAGEMENT,permissions:["administrator"]}},{path:":teamId/agents",name:"settings_teams_add_agents",meta:{featureFlag:ft.TEAM_MANAGEMENT,permissions:["administrator"]},component:uve}]},{path:":teamId/edit",component:y_e,children:[{path:"",name:"settings_teams_edit",component:V_e,meta:{featureFlag:ft.TEAM_MANAGEMENT,permissions:["administrator"]}},{path:"agents",name:"settings_teams_edit_members",component:vve,meta:{featureFlag:ft.TEAM_MANAGEMENT,permissions:["administrator"]}},{path:"finish",name:"settings_teams_edit_finish",meta:{featureFlag:ft.TEAM_MANAGEMENT,permissions:["administrator"]},component:Hb}]}]}]},yve={class:"flex flex-col h-auto overflow-auto"},Ive={class:"w-full"},Cve=["placeholder"],Nve={class:"w-full"},Ove=["placeholder"],Rve={class:"w-full"},xve={class:"flex flex-col gap-2.5 mb-4 mt-2"},wve=["id","value"],$ve=["for"],Mve={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"},Lve={__name:"CustomRoleModal",props:{mode:{type:String,default:"add",validator:e=>["add","edit"].includes(e)},selectedRole:{type:Object,default:()=>({})}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,a=rt(),{t:o}=be(),i=j(""),l=j(""),r=j([]),c=j(null),u=gn({showLoading:!1,message:""}),d=y(()=>({name:{required:Ye,minLength:en(2)},description:{required:Ye},selectedPermissions:{required:Ye,minLength:en(1)}})),h=bt(d,{name:i,description:l,selectedPermissions:r}),g=()=>{i.value="",l.value="",r.value=[],h.value.$reset()},f=()=>{i.value=n.selectedRole.name||"",l.value=n.selectedRole.description||"",r.value=n.selectedRole.permissions||[]};it(r,(R,O)=>{const x=R.includes(Wr)&&!O.includes(Wr),w=O.includes(Wr)&&!R.includes(Wr);x?r.value=[...new Set([...r.value,DO,PO])]:w&&(r.value=r.value.filter(D=>D!==Wr))},{deep:!0}),lt(()=>{var R;n.mode==="edit"&&f(),(R=c.value)==null||R.focus()});const b=R=>n.mode==="edit"?`CUSTOM_ROLE.EDIT.${R}`:`CUSTOM_ROLE.ADD.${R}`,A=y(()=>o(b("TITLE"))),v=y(()=>o(b("DESC"))),T=y(()=>o(b("SUBMIT"))),_=async()=>{if(h.value.$touch(),!h.value.$invalid){u.showLoading=!0;try{const R={name:i.value,description:l.value,permissions:r.value};n.mode==="edit"?(await a.dispatch("customRole/updateCustomRole",{id:n.selectedRole.id,...R}),ne(o("CUSTOM_ROLE.EDIT.API.SUCCESS_MESSAGE"))):(await a.dispatch("customRole/createCustomRole",R),ne(o("CUSTOM_ROLE.ADD.API.SUCCESS_MESSAGE"))),g(),s("close")}catch(R){const O=(R==null?void 0:R.message)||o("CUSTOM_ROLE.FORM.API.ERROR_MESSAGE");ne(O)}finally{u.showLoading=!1}}},N=y(()=>h.value.$invalid||u.showLoading);return(R,O)=>{const x=W("woot-modal-header");return p(),E("div",yve,[S(x,{"header-title":A.value,"header-content":v.value},null,8,["header-title","header-content"]),m("form",{class:"flex flex-col w-full",onSubmit:Ve(_,["prevent"])},[m("div",Ive,[m("label",{class:ae({error:C(h).name.$error})},[xe(I(R.$t("CUSTOM_ROLE.FORM.NAME.LABEL"))+" ",1),re(m("input",{ref_key:"nameInput",ref:c,"onUpdate:modelValue":O[0]||(O[0]=w=>i.value=w),type:"text",placeholder:R.$t("CUSTOM_ROLE.FORM.NAME.PLACEHOLDER"),onBlur:O[1]||(O[1]=(...w)=>C(h).name.$touch&&C(h).name.$touch(...w))},null,40,Cve),[[gt,i.value,void 0,{trim:!0}]])],2)]),m("div",Nve,[m("label",{class:ae({error:C(h).description.$error})},[xe(I(R.$t("CUSTOM_ROLE.FORM.DESCRIPTION.LABEL"))+" ",1),re(m("textarea",{"onUpdate:modelValue":O[2]||(O[2]=w=>l.value=w),rows:3,placeholder:R.$t("CUSTOM_ROLE.FORM.DESCRIPTION.PLACEHOLDER"),onBlur:O[3]||(O[3]=(...w)=>C(h).description.$touch&&C(h).description.$touch(...w))},null,40,Ove),[[gt,l.value]])],2)]),m("div",Rve,[m("label",{class:ae({"text-n-ruby-9":C(h).selectedPermissions.$error})},I(R.$t("CUSTOM_ROLE.FORM.PERMISSIONS.LABEL")),3),m("div",xve,[(p(!0),E(ue,null,Ae(C(LO),w=>(p(),E("div",{key:w,class:"flex items-center"},[re(m("input",{id:w,"onUpdate:modelValue":O[4]||(O[4]=D=>r.value=D),type:"checkbox",value:w,name:"permissions",class:"ltr:mr-2 rtl:ml-2"},null,8,wve),[[dn,r.value]]),m("label",{for:w,class:"text-sm font-normal"},I(R.$t(`CUSTOM_ROLE.PERMISSIONS.${w.toUpperCase()}`)),9,$ve)]))),128))])]),m("div",Mve,[S(te,{faded:"",slate:"",type:"reset",label:R.$t("CUSTOM_ROLE.FORM.CANCEL_BUTTON_TEXT"),onClick:O[5]||(O[5]=Ve(w=>s("close"),["prevent"]))},null,8,["label"]),S(te,{type:"submit",label:T.value,disabled:N.value,"is-loading":u.showLoading},null,8,["label","disabled","is-loading"])])],32)])}}},Dve={class:"divide-y divide-n-weak text-n-slate-11"},Pve=["title"],kve={class:"py-4 ltr:pr-4 rtl:pl-4 whitespace-normal align-baseline md:break-words"},Bve={class:"py-4 ltr:pr-4 rtl:pl-4 whitespace-normal align-baseline md:break-words"},Uve={class:"flex justify-end gap-1 py-4"},fI={__name:"CustomRoleTableBody",props:{roles:{type:Array,required:!0},loading:{type:Object,default:()=>({})}},emits:["edit","delete"],setup(e,{emit:t}){const n=t,{t:s}=be(),a=o=>o.permissions.map(i=>s(A_("CUSTOM_ROLE.PERMISSIONS",i))).join(", ");return(o,i)=>{const l=Qe("tooltip");return p(),E("tbody",Dve,[(p(!0),E(ue,null,Ae(e.roles,(r,c)=>(p(),E("tr",{key:c},[m("td",{class:"max-w-xs py-4 ltr:pr-4 rtl:pl-4 font-medium truncate align-baseline",title:r.name},I(r.name),9,Pve),m("td",kve,I(r.description),1),m("td",Bve,I(a(r)),1),m("td",Uve,[re(S(te,{icon:"i-lucide-pen",slate:"",xs:"",faded:"",onClick:u=>n("edit",r)},null,8,["onClick"]),[[l,o.$t("CUSTOM_ROLE.EDIT.BUTTON_TEXT"),void 0,{top:!0}]]),re(S(te,{icon:"i-lucide-trash-2",xs:"",ruby:"",faded:"","is-loading":e.loading[r.id],onClick:u=>n("delete",r)},null,8,["is-loading","onClick"]),[[l,o.$t("CUSTOM_ROLE.DELETE.BUTTON_TEXT"),void 0,{top:!0}]])])]))),128))])}}},Fve={class:"w-full min-h-[12rem] relative"},Gve={class:"w-full space-y-3 text-sm"},Vve={class:"opacity-30 dark:opacity-30"},Hve={class:"mb-0"},Wve={class:"absolute inset-0 flex flex-col items-center justify-center w-full h-full bg-gradient-to-t from-white dark:from-slate-900 to-transparent"},zve={__name:"CustomRolePaywall",setup(e){const t=[{name:"All Permissions",description:"All permissions",permissions:["conversation_manage","conversation_participating_manage","conversation_unassigned_manage","contact_manage","report_manage","knowledge_base_manage"]},{name:"Conversation Permissions",description:"Conversation permissions",permissions:["conversation_manage","conversation_participating_manage","conversation_unassigned_manage"]},{name:"Contact Permissions",description:"Contact permissions",permissions:["contact_manage"]},{name:"Report Permissions",description:"Report permissions",permissions:["report_manage"]}],n=Ft(),s=_e("globalConfig/isOnChatwootCloud"),a=_e("getCurrentUser"),o=_e("getCurrentAccountId"),i=y(()=>a.value.type==="SuperAdmin"),l=y(()=>s.value?"PAYWALL":"ENTERPRISE_PAYWALL"),r=()=>{n.push({name:"billing_settings_index",params:{accountId:o.value}})},{t:c}=be(),u=y(()=>[c("CUSTOM_ROLE.LIST.TABLE_HEADER.NAME"),c("CUSTOM_ROLE.LIST.TABLE_HEADER.DESCRIPTION"),c("CUSTOM_ROLE.LIST.TABLE_HEADER.PERMISSIONS"),c("CUSTOM_ROLE.LIST.TABLE_HEADER.ACTIONS")]);return(d,h)=>(p(),E("div",Fve,[m("div",Gve,[m("thead",Vve,[(p(!0),E(ue,null,Ae(u.value,g=>(p(),E("th",{key:g,class:"py-4 ltr:pr-4 rtl:pl-4 font-semibold text-left text-n-slate-11"},[m("span",Hve,I(g),1)]))),128))]),S(fI,{class:"opacity-25 dark:opacity-20",roles:t,loading:{}})]),m("div",Wve,[S(Wp,{"feature-prefix":"CUSTOM_ROLE","i18n-key":l.value,"is-on-chatwoot-cloud":C(s),"is-super-admin":i.value,onUpgrade:r},null,8,["i18n-key","is-on-chatwoot-cloud","is-super-admin"])])]))}},Yve={key:1,class:"min-w-full overflow-x-auto divide-y divide-n-weak"},jve={class:"mb-0"},Kve={__name:"Index",setup(e){const t=rt(),{t:n}=be(),s=j(!1),a=j("add"),o=j(null),i=j({}),l=j(!1),r=j({}),c=_e("customRole/getCustomRoles"),u=_e("customRole/getUIFlags"),d=y(()=>`${n("CUSTOM_ROLE.DELETE.CONFIRM.YES")} ${r.value.name}`),h=y(()=>`${n("CUSTOM_ROLE.DELETE.CONFIRM.NO")} ${r.value.name}`),g=y(()=>` ${r.value.name} ? `),f=_e("accounts/isFeatureEnabledonAccount"),b=_e("getCurrentAccountId"),A=y(()=>!f.value(b.value,"custom_roles")),v=async()=>{try{await t.dispatch("customRole/getCustomRole")}catch{}};lt(()=>{v()});const T=y(()=>[n("CUSTOM_ROLE.LIST.TABLE_HEADER.NAME"),n("CUSTOM_ROLE.LIST.TABLE_HEADER.DESCRIPTION"),n("CUSTOM_ROLE.LIST.TABLE_HEADER.PERMISSIONS"),n("CUSTOM_ROLE.LIST.TABLE_HEADER.ACTIONS")]),_=P=>{i.value[r.value.id]=!1,r.value={},ne(P)},N=()=>{A.value||(a.value="add",o.value=null,s.value=!0)},R=P=>{a.value="edit",o.value=P,s.value=!0},O=()=>{o.value=null,s.value=!1},x=P=>{l.value=!0,r.value=P},w=()=>{l.value=!1},D=async P=>{try{await t.dispatch("customRole/deleteCustomRole",P),_(n("CUSTOM_ROLE.DELETE.API.SUCCESS_MESSAGE"))}catch(U){const F=(U==null?void 0:U.message)||n("CUSTOM_ROLE.DELETE.API.ERROR_MESSAGE");_(F)}},M=()=>{i[r.value.id]=!0,w(),D(r.value.id)};return(P,U)=>{const F=W("woot-modal"),k=W("woot-delete-modal");return p(),L(Es,{"is-loading":C(u).fetchingList,"loading-message":P.$t("CUSTOM_ROLE.LOADING"),"no-records-found":!C(c).length&&!A.value,"no-records-message":P.$t("CUSTOM_ROLE.LIST.404")},{header:Y(()=>[S(hs,{title:P.$t("CUSTOM_ROLE.HEADER"),description:P.$t("CUSTOM_ROLE.DESCRIPTION"),"link-text":P.$t("CUSTOM_ROLE.LEARN_MORE"),"feature-name":"canned_responses"},{actions:Y(()=>[S(te,{icon:"i-lucide-circle-plus",label:P.$t("CUSTOM_ROLE.HEADER_BTN_TXT"),disabled:A.value,onClick:N},null,8,["label","disabled"])]),_:1},8,["title","description","link-text"])]),body:Y(()=>[A.value?(p(),L(zve,{key:0})):(p(),E("table",Yve,[m("thead",null,[(p(!0),E(ue,null,Ae(T.value,B=>(p(),E("th",{key:B,class:"py-4 ltr:pr-4 rtl:pl-4 font-semibold text-left text-n-slate-11"},[m("span",jve,I(B),1)]))),128))]),S(fI,{roles:C(c),loading:i.value,onEdit:R,onDelete:x},null,8,["roles","loading"])]))]),default:Y(()=>[S(F,{show:s.value,"onUpdate:show":U[0]||(U[0]=B=>s.value=B),"on-close":O},{default:Y(()=>[S(Lve,{mode:a.value,"selected-role":o.value,onClose:O},null,8,["mode","selected-role"])]),_:1},8,["show"]),S(k,{show:l.value,"onUpdate:show":U[1]||(U[1]=B=>l.value=B),"on-close":w,"on-confirm":M,title:P.$t("CUSTOM_ROLE.DELETE.CONFIRM.TITLE"),message:P.$t("CUSTOM_ROLE.DELETE.CONFIRM.MESSAGE"),"message-value":g.value,"confirm-text":d.value,"reject-text":h.value},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}},Xve={routes:[{path:vt("accounts/:accountId/settings/custom-roles"),component:Rs,children:[{path:"",redirect:"list"},{path:"list",name:"custom_roles_list",meta:{featureFlag:ft.CUSTOM_ROLES,installationTypes:[Gn.CLOUD,Gn.ENTERPRISE],permissions:["administrator"]},component:Kve}]}]},qve={class:"flex flex-col justify-between flex-1 h-full m-0 overflow-auto bg-n-background"},Zve={__name:"Wrapper",props:{keepAlive:{type:Boolean,default:!0}},setup(e){return(t,n)=>{const s=W("router-view");return p(),E("div",qve,[S(s,null,{default:Y(({Component:a})=>[e.keepAlive?(p(),L(Qd,{key:0},[(p(),L(ds(a)))],1024)):(p(),L(ds(a),{key:1}))]),_:1})])}}},Qve={class:"flex flex-col gap-2"},Jve={class:"text-sm font-medium text-n-slate-12"},eEe={__name:"UserProfilePicture",props:{src:{type:String,default:""},name:{type:String,default:""}},emits:["change","delete"],setup(e,{emit:t}){const n=t,s=o=>{n("change",o)},a=()=>{n("delete")};return(o,i)=>(p(),E("div",Qve,[m("span",Jve,I(o.$t("PROFILE_SETTINGS.FORM.PICTURE")),1),S(kt,{src:e.src||"",name:e.name||"",size:72,"allow-upload":"",onUpload:s,onDelete:a},null,8,["src","name"])]))}},tEe={components:{NextButton:te},props:{name:{type:String,default:""},email:{type:String,default:""},displayName:{type:String,default:""},emailEnabled:{type:Boolean,default:!1}},emits:["updateUser"],setup(){return{v$:bt()}},data(){return{userName:this.name,userDisplayName:this.displayName,userEmail:this.email,inputStyles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem",marginBottom:"0.125rem"}}},validations:{userName:{required:Ye,minLength:en(1)},userDisplayName:{},userEmail:{required:Ye,email:Li}},watch:{name:{handler(e){this.userName=e},immediate:!0},displayName:{handler(e){this.userDisplayName=e},immediate:!0},email:{handler(e){this.userEmail=e},immediate:!0}},methods:{async updateUser(){if(this.v$.$touch(),this.v$.$invalid){ne(this.$t("PROFILE_SETTINGS.FORM.ERROR"));return}this.$emit("updateUser",{name:this.userName,displayName:this.userDisplayName,email:this.userEmail})}}};function nEe(e,t,n,s,a,o){const i=W("woot-input"),l=W("NextButton");return p(),E("form",{class:"flex flex-col gap-4",onSubmit:t[3]||(t[3]=Ve(r=>o.updateUser("profile"),["prevent"]))},[S(i,{modelValue:a.userName,"onUpdate:modelValue":t[0]||(t[0]=r=>a.userName=r),styles:a.inputStyles,class:ae({error:s.v$.userName.$error}),label:e.$t("PROFILE_SETTINGS.FORM.NAME.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.NAME.PLACEHOLDER"),error:`${s.v$.userName.$error?e.$t("PROFILE_SETTINGS.FORM.NAME.ERROR"):""}`,onInput:s.v$.userName.$touch,onBlur:s.v$.userName.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),S(i,{modelValue:a.userDisplayName,"onUpdate:modelValue":t[1]||(t[1]=r=>a.userDisplayName=r),styles:a.inputStyles,class:ae({error:s.v$.userDisplayName.$error}),label:e.$t("PROFILE_SETTINGS.FORM.DISPLAY_NAME.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.DISPLAY_NAME.PLACEHOLDER"),error:`${s.v$.userDisplayName.$error?e.$t("PROFILE_SETTINGS.FORM.DISPLAY_NAME.ERROR"):""}`,onInput:s.v$.userDisplayName.$touch,onBlur:s.v$.userDisplayName.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),n.emailEnabled?(p(),L(i,{key:0,modelValue:a.userEmail,"onUpdate:modelValue":t[2]||(t[2]=r=>a.userEmail=r),styles:a.inputStyles,class:ae({error:s.v$.userEmail.$error}),label:e.$t("PROFILE_SETTINGS.FORM.EMAIL.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.EMAIL.PLACEHOLDER"),error:`${s.v$.userEmail.$error?e.$t("PROFILE_SETTINGS.FORM.EMAIL.ERROR"):""}`,onInput:s.v$.userEmail.$touch,onBlur:s.v$.userEmail.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"])):$("",!0),m("div",null,[S(l,{type:"submit",label:e.$t("PROFILE_SETTINGS.BTN_TEXT")},null,8,["label"])])],32)}const sEe=De(tEe,[["render",nEe]]),aEe={__name:"MessageSignature",props:{messageSignature:{type:String,default:""}},emits:["updateSignature"],setup(e,{emit:t}){const n=e,s=t,a=jG,o=j(n.messageSignature);it(()=>n.messageSignature??"",l=>{o.value=l});const i=()=>{s("updateSignature",o.value)};return(l,r)=>(p(),E("form",{class:"flex flex-col gap-6",onSubmit:r[1]||(r[1]=Ve(c=>i(),["prevent"]))},[S(ai,{id:"message-signature-input",modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=c=>o.value=c),class:"message-editor h-[10rem] !px-3","is-format-mode":"",placeholder:l.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE.PLACEHOLDER"),"enabled-menu-options":C(a),"enable-suggestions":!1,"show-image-resize-toolbar":""},null,8,["modelValue","placeholder","enabled-menu-options"]),m("div",null,[S(te,{type:"submit",label:l.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.BTN_TEXT")},null,8,["label"])])],32))}},oEe={components:{WithLabel:ta},props:{id:{type:String,default:""},options:{type:Array,default:()=>[]},placeholder:{type:String,default:""},name:{type:String,required:!0},icon:{type:String,default:""},label:{type:String,required:!0},modelValue:{type:String,default:""},hasError:{type:Boolean,default:!1},errorMessage:{type:String,default:""}},emits:["update:modelValue"],methods:{onInput(e){this.$emit("update:modelValue",e.target.value)}}},iEe=["id","selected","name"],lEe={value:"",disabled:"",selected:"",class:"hidden"},rEe=["value"];function cEe(e,t,n,s,a,o){const i=W("WithLabel");return p(),L(i,{label:n.label,icon:n.icon,name:n.name,"has-error":n.hasError,"error-message":n.errorMessage},{default:Y(()=>[m("select",{id:n.id,selected:n.modelValue,name:n.name,class:ae([{"text-n-slate-9":!n.modelValue,"text-n-slate-12":n.modelValue,"pl-9":n.icon},"block w-full px-3 py-2 pr-6 mb-0 border-0 shadow-sm appearance-none rounded-xl select-caret leading-6"]),onInput:t[0]||(t[0]=(...l)=>o.onInput&&o.onInput(...l))},[m("option",lEe,I(n.placeholder),1),We(e.$slots,"default",{},()=>[(p(!0),E(ue,null,Ae(n.options,l=>(p(),E("option",{key:l.value,value:l.value},I(l.label),9,rEe))),128))],!0)],42,iEe)]),_:3},8,["label","icon","name","has-error","error-message"])}const H_=De(oEe,[["render",cEe],["__scopeId","data-v-404c6128"]]),uEe={class:"flex gap-2 justify-between w-full items-start"},dEe={class:"text-n-gray-12 font-medium leading-6 text-sm"},pEe={class:"text-n-gray-11"},mEe=["value","selected"],hEe={__name:"FontSize",props:{value:{type:String,default:"default"},label:{type:String,default:""},description:{type:String,default:""}},emits:["change"],setup(e,{emit:t}){const n=e,s=t,{fontSizeOptions:a}=n_(),o=y({get:()=>n.value,set:i=>{s("change",i)}});return(i,l)=>(p(),E("div",uEe,[m("div",null,[m("label",dEe,I(e.label),1),m("p",pEe,I(e.description),1)]),S(H_,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=r=>o.value=r),name:"fontSize",spacing:"compact",class:"min-w-28 mt-px",value:o.value,options:C(a),label:""},{default:Y(()=>[(p(!0),E(ue,null,Ae(C(a),r=>(p(),E("option",{key:r.value,value:r.value,selected:r.value===o.value},I(r.label),9,mEe))),128))]),_:1},8,["modelValue","value","options"])]))}},fEe={class:"flex gap-2 justify-between w-full items-start"},gEe={class:"text-n-gray-12 font-medium leading-6 text-sm"},_Ee={class:"text-n-gray-11"},vEe=["value","selected"],EEe={__name:"UserLanguageSelect",props:{label:{type:String,default:""},description:{type:String,default:""}},setup(e){const{t,locale:n}=be(),{updateUISettings:s,uiSettings:a}=tn(),{enabledLanguages:o}=si(),{currentAccount:i}=ln(),l=y(()=>{var d;return((d=a.value)==null?void 0:d.locale)??""}),r=y(()=>[{name:t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.LANGUAGE.USE_ACCOUNT_DEFAULT"),iso_639_1_code:""},...o??[]]),c=async d=>{try{if(!d){await s({locale:null}),n.value=i.value.locale,ne(t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.LANGUAGE.UPDATE_SUCCESS"));return}if(!(o||[]).some(g=>g.iso_639_1_code===d))throw new Error(`Invalid language code: ${d}`);await s({locale:d}),n.value=d,ne(t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.LANGUAGE.UPDATE_SUCCESS"))}catch(h){throw ne(t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.LANGUAGE.UPDATE_ERROR")),h}},u=y({get:()=>l.value,set:d=>{c(d)}});return(d,h)=>(p(),E("div",fEe,[m("div",null,[m("label",gEe,I(e.label),1),m("p",_Ee,I(e.description),1)]),S(H_,{modelValue:u.value,"onUpdate:modelValue":h[0]||(h[0]=g=>u.value=g),name:"language",spacing:"compact",class:"min-w-28 mt-px",options:r.value,label:""},{default:Y(()=>[(p(!0),E(ue,null,Ae(r.value,g=>(p(),E("option",{key:g.iso_639_1_code||"default",value:g.iso_639_1_code,selected:g.iso_639_1_code===u.value},I(g.name),9,vEe))),128))]),_:1},8,["modelValue","options"])]))}},bEe={class:"flex flex-col gap-2 items-center w-full rounded-t-[5px]"},TEe={class:"grid grid-cols-[1fr_auto] items-center w-full gap-1"},SEe={class:"overflow-hidden text-base font-medium text-n-slate-12 text-left"},AEe={class:"block truncate"},yEe=["checked","name"],IEe={class:"text-n-slate-12 text-sm line-clamp-2 leading-[1.4] text-start"},CEe=["src","alt"],NEe=["src","alt"],OEe={__name:"HotKeyCard",props:{active:{type:Boolean,default:!1},title:{type:String,default:""},description:{type:String,default:""},lightImage:{type:String,default:""},darkImage:{type:String,default:""}},setup(e){return(t,n)=>(p(),E("button",{class:ae(["flex flex-col gap-4 w-full h-fit p-4 rounded-md border border-n-weak dark:border-n-weak",{"border-n-brand ":e.active}])},[m("div",bEe,[m("div",TEe,[m("div",SEe,[m("span",AEe,I(e.title),1)]),m("input",{checked:e.active,type:"radio",name:`hotkey-${e.title}`,class:"shadow cursor-pointer grid place-items-center border-2 border-n-strong appearance-none rounded-full w-5 h-5 checked:bg-n-brand before:content-[''] before:bg-n-brand before:border-4 before:rounded-full before:border-n-strong checked:before:w-[18px] checked:before:h-[18px] checked:border checked:border-n-brand"},null,8,yEe)]),m("span",IEe,I(e.description),1)]),m("div",null,[m("img",{src:e.lightImage,alt:`Light themed image for ${e.title}`,class:"block object-cover w-full dark:hidden"},null,8,CEe),m("img",{src:e.darkImage,alt:`Dark themed image for ${e.title}`,class:"hidden object-cover w-full dark:block"},null,8,NEe)])],2))}},REe={components:{NextButton:te},setup(){return{v$:bt()}},data(){return{currentPassword:"",password:"",passwordConfirmation:"",isPasswordChanging:!1,errorMessage:"",inputStyles:{borderRadius:"0.75rem",padding:"0.375rem 0.75rem",fontSize:"0.875rem",marginBottom:"0.125rem"}}},validations:{currentPassword:{required:Ye},password:{minLength:en(6)},passwordConfirmation:{minLength:en(6),isEqPassword(e){return e===this.password}}},computed:{isButtonDisabled(){return!this.currentPassword||!this.passwordConfirmation||!this.v$.passwordConfirmation.isEqPassword}},methods:{async changePassword(){if(this.v$.$touch(),this.v$.$invalid){ne(this.$t("PROFILE_SETTINGS.FORM.ERROR"));return}let e=this.$t("PROFILE_SETTINGS.PASSWORD_UPDATE_SUCCESS");try{await this.$store.dispatch("updatePassword",{password:this.password,passwordConfirmation:this.passwordConfirmation,currentPassword:this.currentPassword})}catch(t){e=Ir(t)||this.$t("RESET_PASSWORD.API.ERROR_MESSAGE")}finally{ne(e)}}}},xEe={class:"flex flex-col w-full gap-4"};function wEe(e,t,n,s,a,o){const i=W("woot-input"),l=W("NextButton");return p(),E("form",{onSubmit:t[3]||(t[3]=Ve(r=>o.changePassword(),["prevent"]))},[m("div",xEe,[S(i,{modelValue:a.currentPassword,"onUpdate:modelValue":t[0]||(t[0]=r=>a.currentPassword=r),type:"password",styles:a.inputStyles,class:ae({error:s.v$.currentPassword.$error}),label:e.$t("PROFILE_SETTINGS.FORM.CURRENT_PASSWORD.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.CURRENT_PASSWORD.PLACEHOLDER"),error:`${s.v$.currentPassword.$error?e.$t("PROFILE_SETTINGS.FORM.CURRENT_PASSWORD.ERROR"):""}`,onInput:s.v$.currentPassword.$touch,onBlur:s.v$.currentPassword.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),S(i,{modelValue:a.password,"onUpdate:modelValue":t[1]||(t[1]=r=>a.password=r),type:"password",styles:a.inputStyles,class:ae({error:s.v$.password.$error}),label:e.$t("PROFILE_SETTINGS.FORM.PASSWORD.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.PASSWORD.PLACEHOLDER"),error:`${s.v$.password.$error?e.$t("PROFILE_SETTINGS.FORM.PASSWORD.ERROR"):""}`,onInput:s.v$.password.$touch,onBlur:s.v$.password.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),S(i,{modelValue:a.passwordConfirmation,"onUpdate:modelValue":t[2]||(t[2]=r=>a.passwordConfirmation=r),type:"password",styles:a.inputStyles,class:ae({error:s.v$.passwordConfirmation.$error}),label:e.$t("PROFILE_SETTINGS.FORM.PASSWORD_CONFIRMATION.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.PASSWORD_CONFIRMATION.PLACEHOLDER"),error:`${s.v$.passwordConfirmation.$error?e.$t("PROFILE_SETTINGS.FORM.PASSWORD_CONFIRMATION.ERROR"):""}`,onInput:s.v$.passwordConfirmation.$touch,onBlur:s.v$.passwordConfirmation.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),m("div",null,[S(l,{type:"submit",label:e.$t("PROFILE_SETTINGS.FORM.PASSWORD_SECTION.BTN_TEXT"),disabled:o.isButtonDisabled},null,8,["label","disabled"])])])],32)}const $Ee=De(REe,[["render",wEe]]),MEe=["id","value"],W_={__name:"CheckBox",props:{isChecked:{type:Boolean,default:!1},value:{type:String,default:null}},emits:["update"],setup(e,{emit:t}){const n=e,s=t,a=y({get:()=>n.isChecked,set:o=>s("update",n.value,o)});return(o,i)=>re((p(),E("input",{id:e.value,"onUpdate:modelValue":i[0]||(i[0]=l=>a.value=l),type:"checkbox",value:e.value,class:"flex-shrink-0 mt-0.5 border-n-strong border bg-n-slate-2 checked:border-none checked:bg-n-brand shadow-sm appearance-none rounded-[4px] w-4 h-4 focus:ring-1 after:content-[''] after:text-white checked:after:content-[''] after:flex after:items-center after:justify-center after:text-center after:text-xs after:font-bold after:relative"},null,8,MEe)),[[dn,a.value]])}},LEe={components:{TableHeaderCell:oI,ToggleSwitch:va,CheckBox:W_},data(){return{selectedEmailFlags:[],selectedPushFlags:[],enableAudioAlerts:!1,hasEnabledPushPermissions:!1,notificationTypes:kO}},computed:{...mt({accountId:"getCurrentAccountId",emailFlags:"userNotificationSettings/getSelectedEmailFlags",pushFlags:"userNotificationSettings/getSelectedPushFlags",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),hasPushAPISupport(){return"Notification"in window},isSLAEnabled(){return this.isFeatureEnabledonAccount(this.accountId,ft.SLA)},filteredNotificationTypes(){return this.notificationTypes.filter(e=>this.isSLAEnabled?!0:!["sla_missed_first_response","sla_missed_next_response","sla_missed_resolution"].includes(e.value))}},watch:{emailFlags(e){this.selectedEmailFlags=e},pushFlags(e){this.selectedPushFlags=e}},mounted(){C5()&&this.getPushSubscription(),this.$store.dispatch("userNotificationSettings/get")},methods:{checkFlagStatus(e,t){return(e==="email"?this.selectedEmailFlags:this.selectedPushFlags).includes(`${e}_${t}`)},onRegistrationSuccess(){this.hasEnabledPushPermissions=!0},onRequestPermissions(e){e?R5({onSuccess:this.onRegistrationSuccess}):this.disablePushPermissions()},disablePushPermissions(){Rf(e=>e.pushManager.getSubscription().then(t=>t?t.unsubscribe():null).finally(()=>{this.hasEnabledPushPermissions=!1}).catch(()=>{}))},getPushSubscription(){Rf(e=>e.pushManager.getSubscription().then(t=>{t?this.hasEnabledPushPermissions=!0:this.hasEnabledPushPermissions=!1}).catch(t=>console.log(t)))},async updateNotificationSettings(){try{this.$store.dispatch("userNotificationSettings/update",{selectedEmailFlags:this.selectedEmailFlags,selectedPushFlags:this.selectedPushFlags}),ne(this.$t("PROFILE_SETTINGS.FORM.API.UPDATE_SUCCESS"))}catch{ne(this.$t("PROFILE_SETTINGS.FORM.API.UPDATE_ERROR"))}},handleInput(e,t){e==="email"?this.handleEmailInput(t):this.handlePushInput(t)},handleEmailInput(e){this.selectedEmailFlags=this.toggleInput(this.selectedEmailFlags,e),this.updateNotificationSettings()},handlePushInput(e){this.selectedPushFlags=this.toggleInput(this.selectedPushFlags,e),this.updateNotificationSettings()},toggleInput(e,t){return e.includes(t)?e.filter(s=>s!==t):[...e,t]}}},DEe={id:"profile-settings-notifications",class:"flex flex-col gap-6"},PEe={class:"hidden sm:block"},kEe={class:"grid content-center h-12 grid-cols-12 gap-4 py-0 rounded-t-xl"},BEe={class:"text-sm font-normal normal-case text-n-slate-11"},UEe={class:"text-sm font-medium normal-case text-n-slate-12"},FEe={class:"flex items-center justify-between gap-1"},GEe={class:"text-sm font-medium normal-case text-n-slate-12 whitespace-nowrap"},VEe={class:"grid items-center content-center h-12 grid-cols-12 gap-4 py-0 rounded-t-xl"},HEe={class:"flex flex-row items-start gap-2 col-span-7 px-0 py-2 text-sm tracking-[0.5] rtl:text-right"},WEe={class:"text-sm text-n-slate-12"},zEe={class:"flex flex-col gap-6 sm:hidden"},YEe={class:"text-sm font-medium normal-case text-n-slate-12"},jEe={class:"flex flex-col gap-4"},KEe={class:"text-sm text-n-slate-12"},XEe={class:"flex items-center justify-start gap-2"},qEe={class:"text-sm font-medium normal-case text-n-slate-12"},ZEe={class:"flex flex-col gap-4"},QEe={class:"text-sm text-n-slate-12"},JEe={class:"flex items-center justify-between w-full gap-2 p-4 border border-solid border-n-weak rounded-xl"},e1e={class:"flex flex-row items-center gap-2"},t1e={class:"text-sm text-n-slate-12"};function n1e(e,t,n,s,a,o){const i=W("TableHeaderCell"),l=W("CheckBox"),r=W("fluent-icon"),c=W("ToggleSwitch");return p(),E("div",DEe,[m("div",PEe,[m("div",kEe,[S(i,{span:7,label:"`${$t('PROFILE_SETTINGS.FORM.NOTIFICATIONS.TYPE_TITLE')}`"},{default:Y(()=>[m("span",BEe,I(e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.TYPE_TITLE")),1)]),_:1}),S(i,{span:2,label:"`${$t('PROFILE_SETTINGS.FORM.NOTIFICATIONS.EMAIL')}`"},{default:Y(()=>[m("span",UEe,I(e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.EMAIL")),1)]),_:1}),S(i,{span:3,label:"`${$t('PROFILE_SETTINGS.FORM.NOTIFICATIONS.PUSH')}`"},{default:Y(()=>[m("div",FEe,[m("span",GEe,I(e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.PUSH")),1)])]),_:1})]),(p(!0),E(ue,null,Ae(o.filteredNotificationTypes,(u,d)=>(p(),E("div",{key:d},[m("div",VEe,[m("div",HEe,[m("span",WEe,I(e.$t(u.label)),1)]),(p(),E(ue,null,Ae(["email","push"],(h,g)=>m("div",{key:g,class:ae(["flex items-start gap-2 px-0 text-sm tracking-[0.5] text-left rtl:text-right",`col-span-${h==="push"?3:2}`])},[S(l,{value:`${h}_${u.value}`,"is-checked":o.checkFlagStatus(h,u.value,a.selectedPushFlags),onUpdate:f=>o.handleInput(h,f)},null,8,["value","is-checked","onUpdate"])],2)),64))])]))),128))]),m("div",zEe,[m("span",YEe,I(e.$t("PROFILE_SETTINGS.FORM.EMAIL_NOTIFICATIONS_SECTION.TITLE")),1),m("div",jEe,[(p(!0),E(ue,null,Ae(o.filteredNotificationTypes,(u,d)=>(p(),E("div",{key:d,class:"flex flex-row items-start gap-2"},[S(l,{id:`email_${u.value}`,value:`email_${u.value}`,"is-checked":o.checkFlagStatus("email",u.value),onUpdate:o.handleEmailInput},null,8,["id","value","is-checked","onUpdate"]),m("span",KEe,I(e.$t(u.label)),1)]))),128))]),m("div",XEe,[m("span",qEe,I(e.$t("PROFILE_SETTINGS.FORM.PUSH_NOTIFICATIONS_SECTION.TITLE")),1)]),m("div",ZEe,[(p(!0),E(ue,null,Ae(o.filteredNotificationTypes,(u,d)=>(p(),E("div",{key:d,class:"flex flex-row items-start gap-2"},[S(l,{id:`push_${u.value}`,value:`push_${u.value}`,"is-checked":o.checkFlagStatus("push",u.value),onUpdate:o.handlePushInput},null,8,["id","value","is-checked","onUpdate"]),m("span",QEe,I(e.$t(u.label)),1)]))),128))])]),m("div",JEe,[m("div",e1e,[S(r,{icon:"alert",class:"flex-shrink-0 text-n-slate-12",size:"18"}),m("span",t1e,I(e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.BROWSER_PERMISSION")),1)]),S(c,{modelValue:a.hasEnabledPushPermissions,"onUpdate:modelValue":t[0]||(t[0]=u=>a.hasEnabledPushPermissions=u),onChange:o.onRequestPermissions},null,8,["modelValue","onChange"])])])}const s1e=De(LEe,[["render",n1e]]),a1e={class:"flex items-center gap-2"},o1e=["value","selected"],i1e={__name:"AudioAlertTone",props:{value:{type:String,required:!0,validator:e=>["ding","bell","chime","magic","ping"].includes(e)},label:{type:String,default:""}},emits:["change"],setup(e,{emit:t}){const n=e,s=t,a=y(()=>[{value:"ding",label:"Ding"},{value:"bell",label:"Bell"},{value:"chime",label:"Chime"},{value:"magic",label:"Magic"},{value:"ping",label:"Ping"}]),o=y({get:()=>n.value,set:r=>{s("change",r)}}),i=new Audio,l=async()=>{try{i.src=`/audio/dashboard/${o.value}.mp3`,await i.play()}catch(r){gg(r)}};return(r,c)=>{const u=Qe("tooltip");return p(),E("div",a1e,[S(H_,{modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=d=>o.value=d),name:"alertTone",spacing:"compact",class:"flex-grow",value:o.value,options:a.value,label:e.label},{default:Y(()=>[(p(!0),E(ue,null,Ae(a.value,d=>(p(),E("option",{key:d.label,value:d.value,selected:d.value===o.value},I(d.label),9,o1e))),128))]),_:1},8,["modelValue","value","options","label"]),re((p(),E("button",{class:"border-0 shadow-sm outline-none flex justify-center items-center size-10 appearance-none rounded-xl ring-n-weak ring-1 ring-inset focus:ring-2 focus:ring-inset focus:ring-n-brand flex-shrink-0 mt-[1.75rem]",onClick:l},[S(dt,{icon:"i-lucide-volume-2"})])),[[u,r.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.PLAY"),void 0,{top:!0}]])])}}},l1e={class:"pb-1 text-sm font-medium leading-6 text-n-slate-12"},r1e={class:"grid gap-3 mt-2"},c1e=["for"],u1e={class:"text-n-slate-11 text-sm font-medium mt-2"},d1e={__name:"AudioAlertEvent",props:{label:{type:String,default:""},value:{type:String,default:""}},emits:["update"],setup(e,{emit:t}){const n=e,s=t,a=BO,o=Object.values(Ov),i=y({get:()=>{if(n.value==="none")return[];if(n.value==="mine")return[Ov.ASSIGNED];if(n.value==="all")return[...o];const c=n.value.split("+").filter(u=>o.includes(u));return[...new Set(c)]},set:c=>{const u=c.filter(Boolean).sort(),d=[...new Set(u)];if(d.length===0){s("update","none");return}s("update",d.join("+"))}}),l=(c,u)=>{let d=i.value;c?d.push(u):d=d.filter(h=>h!==u),i.value=d},r=y(()=>{const c="PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.ALERT_COMBINATIONS.";return n.value===""||n.value==="none"?c+"NONE":c+i.value.join("+").toUpperCase()});return(c,u)=>(p(),E("div",null,[m("label",l1e,I(e.label),1),m("div",r1e,[(p(!0),E(ue,null,Ae(C(a),d=>(p(),E("div",{key:d.value,class:"flex items-center gap-2"},[S(W_,{id:`checkbox-${d.value}`,"is-checked":i.value.includes(d.value),onUpdate:(h,g)=>l(g,d.value)},null,8,["id","is-checked","onUpdate"]),m("label",{for:`checkbox-${d.value}`,class:"text-sm text-n-slate-12 font-normal"},I(c.$t(`PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.ALERT_TYPES.${d.label.toUpperCase()}`)),9,c1e)]))),128)),m("div",u1e,I(c.$t(r.value)),1)])]))}},p1e={class:"flex justify-between pb-1 text-sm font-medium leading-6 text-n-slate-12"},m1e={class:"flex flex-col gap-3 mt-2"},h1e=["for"],f1e={__name:"AudioAlertCondition",props:{label:{type:String,required:!0},items:{type:Array,required:!0}},emits:["change"],setup(e,{emit:t}){const n=t,s=(a,o)=>{n("change",a,o)};return(a,o)=>(p(),E("div",null,[m("label",p1e,I(e.label),1),m("div",m1e,[(p(!0),E(ue,null,Ae(e.items,i=>(p(),E("div",{key:i.id,class:"flex flex-row items-start gap-2"},[S(W_,{id:`checkbox-condition-${i.value}`,"is-checked":i.model,value:i.value,onUpdate:s},null,8,["id","is-checked","value"]),m("label",{class:"text-sm font-normal text-n-slate-12",for:`checkbox-condition-${i.value}`},I(i.label),9,h1e)]))),128))])]))}},g1e={id:"profile-settings-notifications",class:"flex flex-col gap-6"},tc="PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION",_1e={__name:"AudioNotifications",setup(e){const t=rt(),n=pn(),s=y(()=>n.getCurrentUser.value),{uiSettings:a,updateUISettings:o}=tn(),{t:i}=be(),l=j(""),r=j(!1),c=j(!1),u=j("ding"),d=j([]),h=v=>{const T=yr(v);l.value=T.enableAudioAlerts,r.value=!T.alwaysPlayAudioAlert,c.value=T.alertIfUnreadAssignedConversationExist,d.value=[{id:"audio1",label:i(`${tc}.CONDITIONS.CONDITION_ONE`),model:r.value,value:"tab_is_inactive"},{id:"audio2",label:i(`${tc}.CONDITIONS.CONDITION_TWO`),model:c.value,value:"conversations_are_read"}],u.value=T.notificationTone||"ding"};it(a,v=>{h(v)},{immediate:!0});const g=v=>{o(v),UO(s.value),ne(i("PROFILE_SETTINGS.FORM.API.UPDATE_SUCCESS"))};lt(()=>{t.dispatch("userNotificationSettings/get")});const f=v=>{l.value=v,g({enable_audio_alerts:v})},b=(v,T)=>{v==="tab_is_inactive"?g({always_play_audio_alert:!T}):v==="conversations_are_read"&&g({alert_if_unread_assigned_conversation_exist:T})},A=v=>{g({notification_tone:v})};return(v,T)=>(p(),E("div",g1e,[S(i1e,{value:u.value,label:v.$t(`${tc}.DEFAULT_TONE.TITLE`),onChange:A},null,8,["value","label"]),S(d1e,{label:v.$t(`${tc}.ALERT_TYPE.TITLE`),value:l.value,onUpdate:f},null,8,["label","value"]),S(f1e,{items:d.value,label:v.$t(`${tc}.CONDITIONS.TITLE`),onChange:b},null,8,["items","label"])]))}},v1e={class:"flex flex-col items-start w-full gap-6"},E1e={class:"flex flex-col w-full gap-4"},b1e={key:0,class:"text-lg font-medium text-n-slate-12"},T1e={key:1,class:"mb-0 text-sm font-normal text-n-slate-12"},S1e={class:"flex flex-col w-full gap-6"},A1e={__name:"FormSection",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(e){return(t,n)=>(p(),E("div",v1e,[m("div",E1e,[e.title?(p(),E("h4",b1e,I(e.title),1)):$("",!0),n[0]||(n[0]=m("div",{class:"flex flex-row items-center justify-between"},[m("div",{class:"flex-grow h-px bg-n-weak"})],-1)),e.description?(p(),E("p",T1e,I(e.description),1)):$("",!0)]),m("div",S1e,[We(t.$slots,"default")])]))}},y1e={class:"bg-n-background rounded-xl p-4 border border-n-slate-4"},I1e={class:"flex flex-col xs:flex-row items-center justify-between gap-4"},C1e={class:"flex flex-col items-start gap-1.5"},N1e={class:"flex items-center gap-2"},O1e={class:"text-sm font-semibold text-n-slate-12"},R1e={class:"text-sm text-n-slate-11"},x1e={__name:"MfaSettingsCard",setup(e){const t=Ft(),n=wt(),s=()=>{t.push({name:"profile_settings_mfa",params:{accountId:n.params.accountId}})};return(a,o)=>(p(),E("div",y1e,[m("div",I1e,[m("div",C1e,[m("div",N1e,[S(dt,{icon:"i-lucide-lock-keyhole",class:"size-4 text-n-slate-10 flex-shrink-0"}),m("h5",O1e,I(a.$t("MFA_SETTINGS.TITLE")),1)]),m("p",R1e,I(a.$t("MFA_SETTINGS.DESCRIPTION")),1)]),S(te,{type:"button",faded:"",label:a.$t("PROFILE_SETTINGS.FORM.SECURITY_SECTION.MFA_BUTTON"),icon:"i-lucide-settings",class:"flex-shrink-0",onClick:s},null,8,["label"])])]))}};function Cl(){const e=_e("getCurrentUser"),t=_e("accounts/isFeatureEnabledonAccount"),n=_e("globalConfig/isOnChatwootCloud"),s=_e("globalConfig/isACustomBrandedInstance"),{isEnterprise:a,enterprisePlanName:o}=si(),{accountId:i}=ln(),l=()=>vg(e.value,i.value),r=b=>b?t.value(i.value,b):!0,c=b=>{if(!b||!b.length)return!0;const A=l();return Eg(b,A)},u=b=>{if(Array.isArray(b)&&b.length>0){const A={[Gn.ENTERPRISE]:a,[Gn.CLOUD]:n.value,[Gn.COMMUNITY]:!0};return b.some(v=>A[v])}return!0},d=b=>b?F5.includes(b):!0,h=y(()=>a?o!=="community":!0);return{checkPermissions:c,shouldShowPaywall:b=>{const A=C(b);if(!A||s.value)return!1;if(d(A)){if(n.value)return!r(A);if(a)return!h.value}return!1},isFeatureFlagEnabled:r,shouldShow:(b,A,v)=>{const T=C(b),_=C(A),N=C(v);return!c(_)||!u(N)?!1:s.value?r(T):n.value?r(T)||d(T):a?r(T)||d(T)&&!h.value:!0}}}const js={__name:"policy",props:{as:{type:String,default:"div"},permissions:{type:Array,required:!0},featureFlag:{type:String,default:null},installationTypes:{type:Array,default:null}},setup(e){const t=e,{shouldShow:n}=Cl(),s=y(()=>n(t.featureFlag,t.permissions,t.installationTypes));return(a,o)=>s.value?(p(),L(ds(e.as),{key:0},{default:Y(()=>[We(a.$slots,"default")]),_:3})):$("",!0)}},w1e={components:{MessageSignature:aEe,FormSection:A1e,FontSize:hEe,UserLanguageSelect:EEe,UserProfilePicture:eEe,Policy:js,UserBasicDetails:sEe,HotKeyCard:OEe,ChangePassword:$Ee,NotificationPreferences:s1e,AudioNotifications:_1e,AccessToken:Lf,MfaSettingsCard:x1e},setup(){const{isEditorHotKeyEnabled:e,updateUISettings:t}=tn(),{currentFontSize:n,updateFontSize:s}=n_(),{replaceInstallationName:a}=Wa();return{currentFontSize:n,updateFontSize:s,isEditorHotKeyEnabled:e,updateUISettings:t,replaceInstallationName:a}},data(){return{avatarFile:"",avatarUrl:"",name:"",displayName:"",email:"",messageSignature:"",hotKeys:[{key:"enter",title:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.ENTER_KEY.HEADING"),description:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.ENTER_KEY.CONTENT"),lightImage:"/assets/images/dashboard/profile/hot-key-enter.svg",darkImage:"/assets/images/dashboard/profile/hot-key-enter-dark.svg"},{key:"cmd_enter",title:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.CMD_ENTER_KEY.HEADING"),description:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.CMD_ENTER_KEY.CONTENT"),lightImage:"/assets/images/dashboard/profile/hot-key-ctrl-enter.svg",darkImage:"/assets/images/dashboard/profile/hot-key-ctrl-enter-dark.svg"}],notificationPermissions:[...qn,...Ms],audioNotificationPermissions:[...qn,...Ms]}},computed:{...mt({currentUser:"getCurrentUser",currentUserId:"getCurrentUserID",globalConfig:"globalConfig/get"}),isMfaEnabled(){var e;return ug((e=window.chatwootConfig)==null?void 0:e.isMfaEnabled)}},mounted(){this.currentUserId&&this.initializeUser()},methods:{initializeUser(){this.name=this.currentUser.name,this.email=this.currentUser.email,this.avatarUrl=this.currentUser.avatar_url,this.displayName=this.currentUser.display_name,this.messageSignature=this.currentUser.message_signature},async dispatchUpdate(e,t,n){let s="";try{return await this.$store.dispatch("updateProfile",e),s=t,!0}catch(a){return s=Ir(a)||n,!1}finally{ne(s)}},async updateProfile(e){const{name:t,email:n,displayName:s}=e,a=this.currentUser.email!==n;this.name=t||this.name,this.email=n||this.email,this.displayName=s||this.displayName;const o={name:this.name,email:this.email,displayName:this.displayName,avatar:this.avatarFile},i=await this.dispatchUpdate(o,a?this.$t("PROFILE_SETTINGS.AFTER_EMAIL_CHANGED"):this.$t("PROFILE_SETTINGS.UPDATE_SUCCESS"),this.$t("RESET_PASSWORD.API.ERROR_MESSAGE"));a&&i&&FO()},async updateSignature(e){const t={message_signature:e};let n=this.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.API_SUCCESS"),s=this.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.API_ERROR");await this.dispatchUpdate(t,n,s)},updateProfilePicture({file:e,url:t}){this.avatarFile=e,this.avatarUrl=t},async deleteProfilePicture(){try{await this.$store.dispatch("deleteAvatar"),this.avatarUrl="",this.avatarFile="",ne(this.$t("PROFILE_SETTINGS.AVATAR_DELETE_SUCCESS"))}catch{ne(this.$t("PROFILE_SETTINGS.AVATAR_DELETE_FAILED"))}},toggleHotKey(e){this.hotKeys=this.hotKeys.map(t=>t.key===e?{...t,active:!t.active}:t),this.updateUISettings({editor_message_key:e}),ne(this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.UPDATE_SUCCESS"))},async onCopyToken(e){await _a(e),ne(this.$t("COMPONENTS.CODE.COPY_SUCCESSFUL"))},async resetAccessToken(){await this.$store.dispatch("resetAccessToken")?ne(this.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.RESET_SUCCESS")):ne(this.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.RESET_ERROR"))}}},$1e={class:"grid py-16 px-5 font-inter mx-auto gap-16 sm:max-w-screen-md"},M1e={class:"flex flex-col gap-6"},L1e={class:"text-2xl font-medium text-n-slate-12"},D1e={class:"flex flex-col justify-between w-full gap-5 sm:gap-4 sm:flex-row"};function P1e(e,t,n,s,a,o){const i=W("UserProfilePicture"),l=W("UserBasicDetails"),r=W("FontSize"),c=W("UserLanguageSelect"),u=W("FormSection"),d=W("MessageSignature"),h=W("HotKeyCard"),g=W("ChangePassword"),f=W("MfaSettingsCard"),b=W("AudioNotifications"),A=W("Policy"),v=W("NotificationPreferences"),T=W("AccessToken");return p(),E("div",$1e,[m("div",M1e,[m("h2",L1e,I(e.$t("PROFILE_SETTINGS.TITLE")),1),S(i,{src:a.avatarUrl,name:a.name,onChange:o.updateProfilePicture,onDelete:o.deleteProfilePicture},null,8,["src","name","onChange","onDelete"]),S(l,{name:a.name,"display-name":a.displayName,email:a.email,"email-enabled":!e.globalConfig.disableUserProfileUpdate,onUpdateUser:o.updateProfile},null,8,["name","display-name","email","email-enabled","onUpdateUser"])]),S(u,{title:e.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.TITLE"),description:s.replaceInstallationName(e.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.NOTE"))},{default:Y(()=>[S(r,{value:s.currentFontSize,label:e.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.FONT_SIZE.NOTE"),onChange:s.updateFontSize},null,8,["value","label","description","onChange"]),S(c,{label:e.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.LANGUAGE.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.INTERFACE_SECTION.LANGUAGE.NOTE")},null,8,["label","description"])]),_:1},8,["title","description"]),S(u,{title:e.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.NOTE")},{default:Y(()=>[S(d,{"message-signature":a.messageSignature,onUpdateSignature:o.updateSignature},null,8,["message-signature","onUpdateSignature"])]),_:1},8,["title","description"]),S(u,{title:e.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.NOTE")},{default:Y(()=>[m("div",D1e,[(p(!0),E(ue,null,Ae(a.hotKeys,_=>(p(),E("button",{key:_.key,class:ae(["px-0 reset-base w-full sm:flex-1 rounded-xl outline-1 outline",s.isEditorHotKeyEnabled(_.key)?"outline-n-brand/30":"outline-n-weak"])},[(p(),L(h,{key:_.title,title:_.title,description:_.description,"light-image":_.lightImage,"dark-image":_.darkImage,active:s.isEditorHotKeyEnabled(_.key),onClick:N=>o.toggleHotKey(_.key)},null,8,["title","description","light-image","dark-image","active","onClick"]))],2))),128))])]),_:1},8,["title","description"]),e.globalConfig.disableUserProfileUpdate?$("",!0):(p(),L(u,{key:0,title:e.$t("PROFILE_SETTINGS.FORM.PASSWORD_SECTION.TITLE")},{default:Y(()=>[S(g)]),_:1},8,["title"])),o.isMfaEnabled?(p(),L(u,{key:1,title:e.$t("PROFILE_SETTINGS.FORM.SECURITY_SECTION.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.SECURITY_SECTION.NOTE")},{default:Y(()=>[S(f)]),_:1},8,["title","description"])):$("",!0),S(A,{permissions:a.audioNotificationPermissions},{default:Y(()=>[S(u,{title:e.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.NOTE")},{default:Y(()=>[S(b)]),_:1},8,["title","description"])]),_:1},8,["permissions"]),S(A,{permissions:a.notificationPermissions},{default:Y(()=>[S(u,{title:e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.TITLE")},{default:Y(()=>[S(v)]),_:1},8,["title"])]),_:1},8,["permissions"]),S(u,{title:e.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.TITLE"),description:s.replaceInstallationName(e.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.NOTE"))},{default:Y(()=>[S(T,{value:e.currentUser.access_token,onOnCopy:o.onCopyToken,onOnReset:o.resetAccessToken},null,8,["value","onOnCopy","onOnReset"])]),_:1},8,["title","description"])])}const k1e=De(w1e,[["render",P1e]]);class B1e extends Ea{constructor(){super("profile/mfa",{accountScoped:!1})}enable(){return axios.post(`${this.url}`)}verify(t){return axios.post(`${this.url}/verify`,{otp_code:t})}disable(t,n){return axios.delete(this.url,{data:{password:t,otp_code:n}})}regenerateBackupCodes(t){return axios.post(`${this.url}/backup_codes`,{otp_code:t})}}const nc=new B1e,U1e={key:0,class:"space-y-6"},F1e={class:"bg-n-solid-1 rounded-lg p-6 outline outline-n-weak outline-1 text-center"},G1e={class:"text-lg font-medium text-n-slate-12 mb-2"},V1e={class:"text-sm text-n-slate-11 mb-6 max-w-md mx-auto"},H1e={key:1},W1e={class:"bg-n-solid-1 rounded-xl outline-1 outline-n-weak outline p-4 flex-1 flex flex-col gap-2"},z1e={class:"flex items-center gap-2"},Y1e={class:"text-sm font-medium text-n-slate-12"},j1e={class:"text-sm text-n-slate-11"},K1e={__name:"MfaStatusCard",props:{mfaEnabled:{type:Boolean,required:!0},showSetup:{type:Boolean,default:!1}},emits:["enableMfa"],setup(e,{emit:t}){const n=t,s=()=>{n("enableMfa")};return(a,o)=>!e.mfaEnabled&&!e.showSetup?(p(),E("div",U1e,[m("div",F1e,[S(dt,{icon:"i-lucide-lock-keyhole",class:"size-8 text-n-slate-10 mx-auto mb-4 block"}),m("h3",G1e,I(a.$t("MFA_SETTINGS.ENHANCE_SECURITY")),1),m("p",V1e,I(a.$t("MFA_SETTINGS.ENHANCE_SECURITY_DESC")),1),S(te,{icon:"i-lucide-settings",label:a.$t("MFA_SETTINGS.ENABLE_BUTTON"),onClick:s},null,8,["label"])])])):e.mfaEnabled&&!e.showSetup?(p(),E("div",H1e,[m("div",W1e,[m("div",z1e,[S(dt,{icon:"i-lucide-lock-keyhole",class:"size-4 flex-shrink-0 text-n-slate-11"}),m("h4",Y1e,I(a.$t("MFA_SETTINGS.STATUS_ENABLED")),1)]),m("p",j1e,I(a.$t("MFA_SETTINGS.STATUS_ENABLED_DESC")),1)])])):$("",!0)}},X1e={key:0},q1e={key:0,class:"space-y-6"},Z1e={class:"bg-n-solid-1 rounded-xl outline-1 outline-n-weak outline p-10 flex flex-col gap-4"},Q1e={class:"text-center"},J1e={class:"text-lg font-medium text-n-slate-12 mb-2"},ebe={class:"text-sm text-n-slate-11"},tbe={class:"flex justify-center"},nbe={class:"bg-n-background p-4 rounded-lg outline outline-1 outline-n-weak"},sbe=["src"],abe={key:1,class:"w-48 h-48 flex items-center justify-center bg-n-slate-2 dark:bg-n-slate-3"},obe={class:"text-n-slate-10"},ibe={class:"border border-n-slate-4 rounded-lg"},lbe={class:"px-4 py-3 cursor-pointer hover:bg-n-slate-2 dark:hover:bg-n-slate-3 text-sm font-medium text-n-slate-11"},rbe={class:"px-4 pb-4"},cbe={class:"block text-xs text-n-slate-10 mb-2"},ube={class:"flex items-center gap-2"},dbe={class:"flex flex-col items-start gap-3 w-full"},pbe={class:"flex gap-3 mt-1 w-full justify-between"},mbe={key:1,class:"space-y-6"},hbe={class:"text-start"},fbe={class:"text-lg font-medium text-n-slate-12 mb-2"},gbe={class:"text-sm text-n-slate-11"},_be={class:"flex items-start gap-2 p-4 bg-n-solid-1 outline outline-n-weak rounded-xl outline-1"},vbe={class:"text-sm text-n-slate-11"},Ebe={class:"bg-n-solid-1 rounded-xl outline-1 outline-n-weak outline flex flex-col gap-6 p-6"},bbe={class:"grid grid-cols-2 xs:grid-cols-4 sm:grid-cols-5 gap-3"},Tbe={class:"flex items-center justify-center gap-3"},Sbe={class:"space-y-4"},Abe={class:"flex items-start gap-3"},ybe={class:"text-sm text-n-slate-11"},Ibe={__name:"MfaSetupWizard",props:{showSetup:{type:Boolean,required:!0},mfaEnabled:{type:Boolean,required:!0},provisioningUri:{type:String,default:""},secretKey:{type:String,default:""},backupCodes:{type:Array,default:()=>[]},qrCodeUrlProp:{type:String,default:""}},emits:["cancel","verify","complete"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=be(),i=j("qr"),l=j(""),r=j(""),c=j(""),u=j(!1),d=async _=>{try{return await $r.toDataURL(_,{width:256,margin:2,color:{dark:"#000000",light:"#FFFFFF"}})}catch{return null}};it(()=>s.provisioningUri,async _=>{_?l.value=await d(_):s.qrCodeUrlProp&&(l.value=s.qrCodeUrlProp)},{immediate:!0});const h=async()=>{c.value="";try{a("verify",r.value),i.value="backup",r.value=""}catch{c.value=o("MFA_SETTINGS.SETUP.INVALID_CODE")}},g=async()=>{await _a(s.secretKey),ne(o("MFA_SETTINGS.SETUP.SECRET_COPIED"))},f=async()=>{const _=s.backupCodes.join(`
`);await _a(_),ne(o("MFA_SETTINGS.BACKUP.CODES_COPIED"))},b=()=>{const _=`Chatwoot Two-Factor Authentication Backup Codes

${s.backupCodes.join(`
`)}

Keep these codes in a safe place.`,N=new Blob([_],{type:"text/plain"}),R=URL.createObjectURL(N),O=document.createElement("a");O.href=R,O.download="chatwoot-backup-codes.txt",O.click(),URL.revokeObjectURL(R)},A=()=>{i.value="qr",r.value="",c.value="",u.value=!1,a("cancel")},v=()=>{i.value="qr",u.value=!1,a("complete")};return it(()=>s.showSetup,_=>{_&&(i.value="qr",r.value="",c.value="",u.value=!1)}),t({handleVerificationError:_=>{c.value=_||o("MFA_SETTINGS.SETUP.INVALID_CODE")},setupStep:i}),(_,N)=>e.showSetup&&!e.mfaEnabled?(p(),E("div",X1e,[i.value==="qr"?(p(),E("div",q1e,[m("div",Z1e,[m("div",Q1e,[m("h3",J1e,I(_.$t("MFA_SETTINGS.SETUP.STEP1_TITLE")),1),m("p",ebe,I(_.$t("MFA_SETTINGS.SETUP.STEP1_DESCRIPTION")),1)]),m("div",tbe,[m("div",nbe,[l.value?(p(),E("img",{key:0,src:l.value,alt:"MFA QR Code",class:"w-48 h-48 dark:invert-0"},null,8,sbe)):(p(),E("div",abe,[m("span",obe,I(_.$t("MFA_SETTINGS.SETUP.LOADING_QR")),1)]))])]),m("details",ibe,[m("summary",lbe,I(_.$t("MFA_SETTINGS.SETUP.MANUAL_ENTRY")),1),m("div",rbe,[m("label",cbe,I(_.$t("MFA_SETTINGS.SETUP.SECRET_KEY")),1),m("div",ube,[S(Tt,{"model-value":e.secretKey,readonly:"",class:"flex-1"},null,8,["model-value"]),S(te,{variant:"outline",color:"slate",size:"sm",label:_.$t("MFA_SETTINGS.SETUP.COPY"),onClick:g},null,8,["label"])])])]),m("div",dbe,[S(Tt,{modelValue:r.value,"onUpdate:modelValue":N[0]||(N[0]=R=>r.value=R),type:"text",maxlength:"6",pattern:"[0-9]{6}",label:_.$t("MFA_SETTINGS.SETUP.ENTER_CODE"),placeholder:_.$t("MFA_SETTINGS.SETUP.ENTER_CODE_PLACEHOLDER"),message:c.value,"message-type":c.value?"error":"info",class:"w-full",onKeyup:wn(h,["enter"])},null,8,["modelValue","label","placeholder","message","message-type"]),m("div",pbe,[S(te,{faded:"",color:"slate",class:"flex-1",label:_.$t("MFA_SETTINGS.SETUP.CANCEL"),onClick:A},null,8,["label"]),S(te,{class:"flex-1",disabled:r.value.length!==6,label:_.$t("MFA_SETTINGS.SETUP.VERIFY_BUTTON"),onClick:h},null,8,["disabled","label"])])])])])):$("",!0),i.value==="backup"?(p(),E("div",mbe,[m("div",hbe,[m("h3",fbe,I(_.$t("MFA_SETTINGS.BACKUP.TITLE")),1),m("p",gbe,I(_.$t("MFA_SETTINGS.BACKUP.DESCRIPTION")),1)]),m("div",_be,[S(dt,{icon:"i-lucide-alert-circle",class:"size-4 text-n-slate-10 flex-shrink-0 mt-0.5"}),m("p",vbe,[m("strong",null,I(_.$t("MFA_SETTINGS.BACKUP.IMPORTANT")),1),xe(" "+I(_.$t("MFA_SETTINGS.BACKUP.IMPORTANT_NOTE")),1)])]),m("div",Ebe,[m("div",bbe,[(p(!0),E(ue,null,Ae(e.backupCodes,(R,O)=>(p(),E("span",{key:O,class:"px-1 py-2 font-mono text-base text-center text-n-slate-12"},I(R),1))),128))]),m("div",Tbe,[S(te,{outline:"",slate:"",sm:"",icon:"i-lucide-download",label:_.$t("MFA_SETTINGS.BACKUP.DOWNLOAD"),onClick:b},null,8,["label"]),S(te,{outline:"",slate:"",sm:"",icon:"i-lucide-clipboard",label:_.$t("MFA_SETTINGS.BACKUP.COPY_ALL"),onClick:f},null,8,["label"])])]),m("div",Sbe,[m("label",Abe,[re(m("input",{"onUpdate:modelValue":N[1]||(N[1]=R=>u.value=R),type:"checkbox",class:"mt-1 rounded border-n-slate-4 text-n-blue-9 focus:ring-n-blue-8"},null,512),[[dn,u.value]]),m("span",ybe,I(_.$t("MFA_SETTINGS.BACKUP.CONFIRM")),1)]),S(te,{disabled:!u.value,label:_.$t("MFA_SETTINGS.BACKUP.COMPLETE_SETUP"),onClick:v},null,8,["disabled","label"])])])):$("",!0)])):(p(),E(ue,{key:1},[],64))}},Cbe={key:0},Nbe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Obe={class:"bg-n-solid-1 rounded-xl outline-1 outline-n-weak outline p-5"},Rbe={class:"flex-1 flex flex-col gap-2"},xbe={class:"flex items-center gap-2"},wbe={class:"font-medium text-n-slate-12"},$be={class:"text-sm text-n-slate-11"},Mbe={class:"bg-n-solid-1 rounded-xl outline-1 outline-n-weak outline p-5"},Lbe={class:"flex-1 flex flex-col gap-2"},Dbe={class:"flex items-center gap-2"},Pbe={class:"font-medium text-n-slate-12"},kbe={class:"text-sm text-n-slate-11"},Bbe={class:"space-y-4"},Ube={class:"flex items-start gap-2 p-4 bg-n-solid-1 outline outline-n-weak rounded-xl outline-1"},Fbe={class:"text-sm text-n-slate-11"},Gbe={class:"bg-n-solid-1 rounded-xl outline-1 outline-n-weak outline flex flex-col gap-6 p-6"},Vbe={class:"grid grid-cols-2 xs:grid-cols-4 sm:grid-cols-5 gap-3"},Hbe={class:"flex items-center justify-center gap-3"},Wbe={__name:"MfaManagementActions",props:{mfaEnabled:{type:Boolean,required:!0},backupCodes:{type:Array,default:()=>[]}},emits:["disableMfa","regenerateBackupCodes"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=be(),i=j(null),l=j(null),r=j(null),c=j(""),u=j(""),d=j(""),h=async()=>{const _=s.backupCodes.join(`
`);await _a(_),ne(o("MFA_SETTINGS.BACKUP.CODES_COPIED"))},g=()=>{const _=`Chatwoot Two-Factor Authentication Backup Codes

${s.backupCodes.join(`
`)}

Keep these codes in a safe place.`,N=new Blob([_],{type:"text/plain"}),R=URL.createObjectURL(N),O=document.createElement("a");O.href=R,O.download="chatwoot-backup-codes.txt",O.click(),URL.revokeObjectURL(R)},f=async()=>{a("disableMfa",{password:c.value,otpCode:u.value})},b=async()=>{a("regenerateBackupCodes",{otpCode:d.value})};return t({resetDisableForm:()=>{var _;c.value="",u.value="",(_=i.value)==null||_.close()},resetRegenerateForm:()=>{var _;d.value="",(_=l.value)==null||_.close()},showBackupCodesDialog:()=>{var _;(_=r.value)==null||_.open()}}),(_,N)=>e.mfaEnabled?(p(),E("div",Cbe,[m("div",Nbe,[m("div",Obe,[m("div",Rbe,[m("div",xbe,[S(dt,{icon:"i-lucide-key",class:"size-4 flex-shrink-0 text-n-slate-11"}),m("h4",wbe,I(_.$t("MFA_SETTINGS.MANAGEMENT.BACKUP_CODES")),1)]),m("p",$be,I(_.$t("MFA_SETTINGS.MANAGEMENT.BACKUP_CODES_DESC")),1),S(te,{faded:"",slate:"",label:_.$t("MFA_SETTINGS.MANAGEMENT.REGENERATE"),onClick:N[0]||(N[0]=R=>{var O;return(O=l.value)==null?void 0:O.open()})},null,8,["label"])])]),m("div",Mbe,[m("div",Lbe,[m("div",Dbe,[S(dt,{icon:"i-lucide-lock-keyhole-open",class:"size-4 flex-shrink-0 text-n-slate-11"}),m("h4",Pbe,I(_.$t("MFA_SETTINGS.MANAGEMENT.DISABLE_MFA")),1)]),m("p",kbe,I(_.$t("MFA_SETTINGS.MANAGEMENT.DISABLE_MFA_DESC")),1),S(te,{faded:"",ruby:"",label:_.$t("MFA_SETTINGS.MANAGEMENT.DISABLE_BUTTON"),onClick:N[1]||(N[1]=R=>{var O;return(O=i.value)==null?void 0:O.open()})},null,8,["label"])])])]),S($n,{ref_key:"disableDialogRef",ref:i,type:"alert",title:_.$t("MFA_SETTINGS.DISABLE.TITLE"),description:_.$t("MFA_SETTINGS.DISABLE.DESCRIPTION"),"confirm-button-label":_.$t("MFA_SETTINGS.DISABLE.CONFIRM"),"cancel-button-label":_.$t("MFA_SETTINGS.DISABLE.CANCEL"),onConfirm:f},{default:Y(()=>[m("div",Bbe,[S(Tt,{modelValue:c.value,"onUpdate:modelValue":N[2]||(N[2]=R=>c.value=R),type:"password",label:_.$t("MFA_SETTINGS.DISABLE.PASSWORD")},null,8,["modelValue","label"]),S(Tt,{modelValue:u.value,"onUpdate:modelValue":N[3]||(N[3]=R=>u.value=R),type:"text",maxlength:"6",label:_.$t("MFA_SETTINGS.DISABLE.OTP_CODE"),placeholder:_.$t("MFA_SETTINGS.DISABLE.OTP_CODE_PLACEHOLDER")},null,8,["modelValue","label","placeholder"])])]),_:1},8,["title","description","confirm-button-label","cancel-button-label"]),S($n,{ref_key:"regenerateDialogRef",ref:l,type:"edit",title:_.$t("MFA_SETTINGS.REGENERATE.TITLE"),description:_.$t("MFA_SETTINGS.REGENERATE.DESCRIPTION"),"confirm-button-label":_.$t("MFA_SETTINGS.REGENERATE.CONFIRM"),"cancel-button-label":_.$t("MFA_SETTINGS.DISABLE.CANCEL"),onConfirm:b},{default:Y(()=>[S(Tt,{modelValue:d.value,"onUpdate:modelValue":N[4]||(N[4]=R=>d.value=R),type:"text",maxlength:"6",label:_.$t("MFA_SETTINGS.REGENERATE.OTP_CODE"),placeholder:_.$t("MFA_SETTINGS.REGENERATE.OTP_CODE_PLACEHOLDER")},null,8,["modelValue","label","placeholder"])]),_:1},8,["title","description","confirm-button-label","cancel-button-label"]),S($n,{ref_key:"backupCodesDialogRef",ref:r,type:"edit",width:"2xl",title:_.$t("MFA_SETTINGS.REGENERATE.NEW_CODES_TITLE"),description:_.$t("MFA_SETTINGS.REGENERATE.NEW_CODES_DESC"),"show-cancel-button":!1,"confirm-button-label":_.$t("MFA_SETTINGS.REGENERATE.CODES_SAVED"),onConfirm:N[5]||(N[5]=R=>{var O;return(O=r.value)==null?void 0:O.close()})},{default:Y(()=>[m("div",Ube,[S(dt,{icon:"i-lucide-alert-circle",class:"size-4 text-n-slate-10 flex-shrink-0 mt-0.5"}),m("p",Fbe,[m("strong",null,I(_.$t("MFA_SETTINGS.BACKUP.IMPORTANT")),1),xe(" "+I(_.$t("MFA_SETTINGS.BACKUP.IMPORTANT_NOTE")),1)])]),m("div",Gbe,[m("div",Vbe,[(p(!0),E(ue,null,Ae(e.backupCodes,(R,O)=>(p(),E("span",{key:O,class:"px-1 py-2 font-mono text-base text-center text-n-slate-12"},I(R),1))),128))]),m("div",Hbe,[S(te,{outline:"",slate:"",sm:"",icon:"i-lucide-download",label:_.$t("MFA_SETTINGS.BACKUP.DOWNLOAD"),onClick:g},null,8,["label"]),S(te,{outline:"",slate:"",sm:"",icon:"i-lucide-clipboard",label:_.$t("MFA_SETTINGS.BACKUP.COPY_ALL"),onClick:h},null,8,["label"])])])]),_:1},8,["title","description","confirm-button-label"])])):(p(),E(ue,{key:1},[],64))}},zbe={class:"grid py-16 px-5 font-inter mx-auto gap-16 sm:max-w-screen-md w-full"},Ybe={class:"flex flex-col gap-6"},jbe={class:"text-2xl font-medium text-n-slate-12"},Kbe={class:"text-sm text-n-slate-11"},Xbe={class:"grid gap-4 w-full"},qbe={__name:"MfaSettings",setup(e){const{t}=be(),n=Ft(),s=wt(),a=j(!1),o=j(!1),i=j(!1),l=j(""),r=j(""),c=j(""),u=j([]),d=j(null),h=j(null);lt(async()=>{var _;if(!ug((_=window.chatwootConfig)==null?void 0:_.isMfaEnabled)){n.push({name:"profile_settings_index",params:{accountId:s.params.accountId}});return}try{const N=await nc.get();a.value=N.data.enabled,o.value=N.data.backup_codes_generated}catch{}});const g=async()=>{try{const _=await nc.enable();l.value=_.data.provisioning_uri||_.data.provisioning_url,_.data.qr_code_url&&(r.value=_.data.qr_code_url),c.value=_.data.secret,u.value=[],i.value=!0}catch{ne(t("MFA_SETTINGS.SETUP.ERROR_STARTING"))}},f=async _=>{var N,R,O;try{const x=await nc.verify(_);return x.data.backup_codes&&(u.value=x.data.backup_codes),!0}catch(x){throw(O=d.value)==null||O.handleVerificationError(((R=(N=x.response)==null?void 0:N.data)==null?void 0:R.error)||t("MFA_SETTINGS.SETUP.INVALID_CODE")),x}},b=()=>{a.value=!0,o.value=!0,i.value=!1,ne(t("MFA_SETTINGS.SETUP.SUCCESS"))},A=()=>{i.value=!1},v=async({password:_,otpCode:N})=>{var R;try{await nc.disable(_,N),a.value=!1,o.value=!1,(R=h.value)==null||R.resetDisableForm(),ne(t("MFA_SETTINGS.DISABLE.SUCCESS"))}catch{ne(t("MFA_SETTINGS.DISABLE.ERROR"))}},T=async({otpCode:_})=>{var N,R;try{const O=await nc.regenerateBackupCodes(_);u.value=O.data.backup_codes,(N=h.value)==null||N.resetRegenerateForm(),(R=h.value)==null||R.showBackupCodesDialog(),ne(t("MFA_SETTINGS.REGENERATE.SUCCESS"))}catch{ne(t("MFA_SETTINGS.REGENERATE.ERROR"))}};return(_,N)=>(p(),E("div",zbe,[m("div",Ybe,[m("h2",jbe,I(_.$t("MFA_SETTINGS.TITLE")),1),m("p",Kbe,I(_.$t("MFA_SETTINGS.SUBTITLE")),1)]),m("div",Xbe,[S(K1e,{"mfa-enabled":a.value,"show-setup":i.value,onEnableMfa:g},null,8,["mfa-enabled","show-setup"]),S(Ibe,{ref_key:"setupWizardRef",ref:d,"show-setup":i.value,"mfa-enabled":a.value,"provisioning-uri":l.value,"secret-key":c.value,"backup-codes":u.value,"qr-code-url-prop":r.value,onCancel:A,onVerify:f,onComplete:b},null,8,["show-setup","mfa-enabled","provisioning-uri","secret-key","backup-codes","qr-code-url-prop"]),S(Wbe,{ref_key:"managementActionsRef",ref:h,"mfa-enabled":a.value,"backup-codes":u.value,onDisableMfa:v,onRegenerateBackupCodes:T},null,8,["mfa-enabled","backup-codes"])])]))}},Zbe={routes:[{path:vt("accounts/:accountId/profile"),name:"profile_settings",meta:{permissions:["administrator","agent","custom_role"]},component:Zve,children:[{path:"settings",name:"profile_settings_index",component:k1e,meta:{permissions:["administrator","agent","custom_role"]}},{path:"mfa",name:"profile_settings_mfa",component:qbe,meta:{permissions:["administrator","agent","custom_role"]},beforeEnter:(e,t,n)=>{var s;ug((s=window.chatwootConfig)==null?void 0:s.isMfaEnabled)?n():n({name:"profile_settings_index"})}}]}]};class Qbe extends Ea{constructor(){super("saml_settings",{accountScoped:!0})}get(){return axios.get(this.url)}create(t){return axios.post(this.url,{saml_settings:t})}update(t){return axios.put(this.url,{saml_settings:t})}delete(){return axios.delete(this.url)}}const Ku=new Qbe,Jbe={class:"space-y-4"},eTe={class:"flex items-center gap-2"},tTe={class:"text-sm font-medium text-n-slate-12"},nTe={class:"i-lucide-info text-n-slate-10 w-4 h-4 cursor-help"},sTe={class:"rounded-xl border border-n-weak bg-n-solid-1 w-full text-sm text-n-slate-12 divide-y divide-n-weak"},aTe={class:"flex items-center gap-2"},oTe={class:"text-n-slate-11 w-32 flex items-center gap-1"},iTe={class:"i-lucide-info text-n-slate-9 w-3 h-3 cursor-help"},lTe={class:"flex-1"},rTe={__name:"SamlInfoSection",props:{fingerprint:{type:String,default:""},spEntityId:{type:String,default:""}},setup(e){const t=e,{t:n}=be(),{accountId:s}=ln(),a=y(()=>`${window.location.origin}/omniauth/saml/callback?account_id=${s.value}`),o=y(()=>[{key:"ACS_URL",label:n("SECURITY_SETTINGS.SAML.ACS_URL.LABEL"),value:a.value,tooltip:n("SECURITY_SETTINGS.SAML.ACS_URL.TOOLTIP"),show:!0},{key:"SP_ENTITY_ID",label:n("SECURITY_SETTINGS.SAML.SP_ENTITY_ID.LABEL"),value:t.spEntityId,tooltip:n("SECURITY_SETTINGS.SAML.SP_ENTITY_ID.TOOLTIP"),show:!!t.spEntityId},{key:"FINGERPRINT",label:n("SECURITY_SETTINGS.SAML.FINGERPRINT.LABEL"),value:t.fingerprint,tooltip:n("SECURITY_SETTINGS.SAML.FINGERPRINT.TOOLTIP"),show:!!t.fingerprint}]),i=y(()=>o.value.filter(r=>r.show)),l=async r=>{await _a(r),ne(n("SECURITY_SETTINGS.SAML.COPY_SUCCESS"))};return(r,c)=>{const u=Qe("tooltip");return p(),E("div",Jbe,[m("div",eTe,[m("h3",tTe,I(C(n)("SECURITY_SETTINGS.SAML.INFO_SECTION.TITLE")),1),re(m("i",nTe,null,512),[[u,C(n)("SECURITY_SETTINGS.SAML.INFO_SECTION.TOOLTIP"),void 0,{top:!0}]])]),m("section",sTe,[(p(!0),E(ue,null,Ae(i.value,d=>(p(),E("div",{key:d.key,class:"ps-4 pe-1 py-1 flex justify-between items-center"},[m("div",aTe,[m("span",oTe,[xe(I(d.label)+" ",1),re(m("i",iTe,null,512),[[u,d.tooltip,void 0,{top:!0}]])]),m("span",lTe,I(d.value),1)]),S(te,{type:"button",ghost:"",sm:"",slate:"",icon:"i-lucide-copy",onClick:h=>l(d.value)},null,8,["onClick"])]))),128))])])}}},cTe={class:"rounded-xl border border-n-weak bg-n-solid-1 w-full text-sm text-n-slate-12 mb-5 overflow-hidden"},uTe={class:"font-medium text-n-slate-12"},dTe={class:"px-4 pb-3"},pTe={class:"text-n-slate-11 mb-2"},mTe={__name:"SamlAttributeMap",setup(e){const{t}=be(),n=j(!1),s=()=>{n.value=!n.value};return(a,o)=>(p(),E("section",cTe,[m("button",{type:"button",class:"w-full px-4 py-3 flex items-center justify-between text-left hover:bg-n-solid-2 transition-colors",onClick:s},[m("h4",uTe,I(C(t)("SECURITY_SETTINGS.SAML.ATTRIBUTE_MAPPING.TITLE")),1),S(dt,{icon:"i-lucide-chevron-down",class:ae(["transition-transform duration-200",{"rotate-180":n.value}])},null,8,["class"])]),m("div",{class:ae(["transition-[height] duration-200 ease-in-out overflow-hidden",n.value?"h-auto":"h-0"])},[m("div",dTe,[m("p",pTe,I(C(t)("SECURITY_SETTINGS.SAML.ATTRIBUTE_MAPPING.DESCRIPTION")),1),o[0]||(o[0]=m("ul",{class:"list-none text-n-slate-12 space-y-1"},[m("li",null,[m("code",{class:"px-1 rounded bg-n-slate-3"},"email")]),m("li",null,[m("code",{class:"px-1 rounded bg-n-slate-3"},"first_name")]),m("li",null,[m("code",{class:"px-1 rounded bg-n-slate-3"},"last_name")])],-1))])],2)]))}},hTe={class:"flex justify-end"},fTe={class:"flex gap-2"},gTe={__name:"SamlSettings",setup(e){const{t}=be(),{isCloudFeatureEnabled:n}=ln(),s=j(null),a=j(""),o=j(""),i=j(!1),l=j(!1),r=j(!0),c=gn({ssoUrl:"",certificate:"",idpEntityId:""}),d=bt({ssoUrl:{required:Ye},certificate:{required:Ye},idpEntityId:{required:Ye}},c),h=y(()=>n("saml")),g=y(()=>d.value.ssoUrl.$error?t("SECURITY_SETTINGS.SAML.VALIDATION.SSO_URL_ERROR"):""),f=y(()=>d.value.certificate.$error?t("SECURITY_SETTINGS.SAML.VALIDATION.CERTIFICATE_ERROR"):""),b=y(()=>d.value.idpEntityId.$error?t("SECURITY_SETTINGS.SAML.VALIDATION.IDP_ENTITY_ID_ERROR"):""),A=async()=>{var R;if(h.value)try{r.value=!0;const x=(await Ku.get()).data;x.sso_url&&(s.value=x.id,c.ssoUrl=x.sso_url,c.certificate=x.certificate||"",o.value=x.sp_entity_id||"",c.idpEntityId=x.idp_entity_id||"",a.value=x.fingerprint||"",i.value=c.ssoUrl!=="")}catch(O){((R=O.response)==null?void 0:R.status)!==404&&ne(t("SECURITY_SETTINGS.SAML.API.ERROR_LOADING"))}finally{r.value=!1}},v=async R=>{var O,x;try{if(l.value=!0,i.value&&c.ssoUrl){let w;s.value?w=await Ku.update(R):w=await Ku.create(R),w!=null&&w.data&&(s.value=w.data.id,a.value=w.data.fingerprint||"",o.value=w.data.sp_entity_id||""),ne(t("SECURITY_SETTINGS.SAML.API.SUCCESS"))}else await Ku.delete(),ne(t("SECURITY_SETTINGS.SAML.API.DISABLED"))}catch(w){if((x=(O=w.response)==null?void 0:O.data)!=null&&x.errors){const D=w.response.data.errors,M=Array.isArray(D)?D[0]:D;ne(M)}else ne(t("SECURITY_SETTINGS.SAML.API.ERROR"));throw w}finally{l.value=!1}},T=async()=>{if(d.value.$touch(),d.value.$invalid)return;const R={sso_url:c.ssoUrl,certificate:c.certificate,idp_entity_id:c.idpEntityId,role_mappings:{}};await v(R)},_=async()=>{s.value=null,c.ssoUrl="",c.certificate="",o.value="",c.idpEntityId="",a.value="",await v({})},N=async()=>{i.value||await _()};return lt(()=>{A()}),(R,O)=>(p(),L(Pi,{title:C(t)("SECURITY_SETTINGS.SAML.TITLE"),description:C(t)("SECURITY_SETTINGS.SAML.NOTE"),beta:"","hide-content":!h.value||!i.value||r.value},{headerActions:Y(()=>[m("div",hTe,[S(va,{modelValue:i.value,"onUpdate:modelValue":O[0]||(O[0]=x=>i.value=x),disabled:r.value,onChange:N},null,8,["modelValue","disabled"])])]),default:Y(()=>[S(rTe,{class:"mb-5",fingerprint:a.value,"sp-entity-id":o.value},null,8,["fingerprint","sp-entity-id"]),S(mTe,{class:"mb-5"}),m("form",{class:"grid gap-5",onSubmit:Ve(T,["prevent"])},[S(ta,{name:"ssoUrl",label:C(t)("SECURITY_SETTINGS.SAML.SSO_URL.LABEL"),"help-message":C(t)("SECURITY_SETTINGS.SAML.SSO_URL.HELP"),"has-error":C(d).ssoUrl.$error,"error-message":g.value,required:""},{default:Y(()=>[S(Tt,{modelValue:c.ssoUrl,"onUpdate:modelValue":O[1]||(O[1]=x=>c.ssoUrl=x),class:"w-full",type:"url",placeholder:C(t)("SECURITY_SETTINGS.SAML.SSO_URL.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),_:1},8,["label","help-message","has-error","error-message"]),S(ta,{name:"idpEntityId",label:C(t)("SECURITY_SETTINGS.SAML.IDP_ENTITY_ID.LABEL"),"help-message":C(t)("SECURITY_SETTINGS.SAML.IDP_ENTITY_ID.HELP"),"has-error":C(d).idpEntityId.$error,"error-message":b.value,required:""},{default:Y(()=>[S(Tt,{modelValue:c.idpEntityId,"onUpdate:modelValue":O[2]||(O[2]=x=>c.idpEntityId=x),class:"w-full",placeholder:C(t)("SECURITY_SETTINGS.SAML.IDP_ENTITY_ID.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),_:1},8,["label","help-message","has-error","error-message"]),S(ta,{name:"certificate",label:C(t)("SECURITY_SETTINGS.SAML.CERTIFICATE.LABEL"),"help-message":C(t)("SECURITY_SETTINGS.SAML.CERTIFICATE.HELP"),"has-error":C(d).certificate.$error,"error-message":f.value,required:""},{default:Y(()=>[S(lo,{modelValue:c.certificate,"onUpdate:modelValue":O[3]||(O[3]=x=>c.certificate=x),class:"w-full",rows:"8",placeholder:C(t)("SECURITY_SETTINGS.SAML.CERTIFICATE.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),_:1},8,["label","help-message","has-error","error-message"]),m("div",fTe,[S(te,{blue:"",type:"submit","is-loading":l.value,label:C(t)("SECURITY_SETTINGS.SAML.UPDATE_BUTTON")},null,8,["is-loading","label"])])],32)]),_:1},8,["title","description","hide-content"]))}},_Te={class:"w-full max-w-[60rem] mx-auto h-full max-h-[28rem] grid place-content-center"},vTe={__name:"SamlPaywall",setup(e){const t=Ft(),n=_e("getCurrentUser"),s=y(()=>n.value.type==="SuperAdmin"),{accountId:a,isOnChatwootCloud:o}=ln(),i=y(()=>o.value?"PAYWALL":"ENTERPRISE_PAYWALL"),l=()=>{t.push({name:"billing_settings_index",params:{accountId:a.value}})};return(r,c)=>(p(),E("div",_Te,[S(Wp,{class:"mx-auto","feature-prefix":"SECURITY_SETTINGS.SAML","i18n-key":i.value,"is-super-admin":s.value,"is-on-chatwoot-cloud":C(o),onUpgrade:l},null,8,["i18n-key","is-super-admin","is-on-chatwoot-cloud"])]))}},ETe={key:2,class:"mt-6 text-sm text-slate-600"},bTe={__name:"Index",setup(e){const{shouldShow:t,shouldShowPaywall:n}=Cl(),s=y(()=>window.chatwootConfig.allowedLoginMethods||["email"]),a=y(()=>s.value.includes("saml")),o=y(()=>t(ft.SAML,["administrator"],[Gn.CLOUD,Gn.ENTERPRISE])&&a.value),i=y(()=>n("saml"));return(l,r)=>(p(),L(Es,{class:"max-w-2xl mx-auto","loading-message":l.$t("ATTRIBUTES_MGMT.LOADING")},{header:Y(()=>[S(hs,{title:l.$t("SECURITY_SETTINGS.TITLE"),description:l.$t("SECURITY_SETTINGS.DESCRIPTION"),"link-text":l.$t("SECURITY_SETTINGS.LINK_TEXT"),"feature-name":"saml"},null,8,["title","description","link-text"])]),body:Y(()=>[i.value?(p(),L(vTe,{key:0})):o.value?(p(),L(gTe,{key:1})):(p(),E("div",ETe,I(l.$t("SECURITY_SETTINGS.SAML_DISABLED_MESSAGE")),1))]),_:1},8,["loading-message"]))}},TTe={routes:[{path:vt("accounts/:accountId/settings/security"),meta:{permissions:["administrator"],installationTypes:[Gn.CLOUD,Gn.ENTERPRISE]},component:Rs,props:{headerTitle:"SECURITY_SETTINGS.TITLE",icon:"i-lucide-shield",showNewButton:!1},children:[{path:"",name:"security_settings_index",component:bTe,meta:{permissions:["administrator"],featureFlag:ft.SAML,installationTypes:[Gn.CLOUD,Gn.ENTERPRISE]}}]}]},STe={class:"flex flex-col max-w-3xl w-full"},ATe={class:"text-sm text-slate-600 mt-2"},yTe={class:"font-semibold text-slate-900"},ITe={key:0,class:"text-sm text-slate-600 mt-6"},CTe={class:"space-y-3"},NTe={key:0,class:"flex items-center gap-4"},OTe=["src","alt"],RTe={class:"text-xs text-slate-500 break-all"},xTe={class:"block text-sm font-medium text-slate-700"},wTe=["onChange"],$Te={class:"block text-sm font-medium text-slate-700"},MTe=["onUpdate:modelValue","placeholder"],LTe={class:"flex justify-end"},DTe={__name:"BrandingSettings",setup(e){const t=j(!0),n=j(!1),s=j(""),a=gn({logo:"",logo_dark:"",logo_thumbnail:""}),o=gn({logo:"",logo_dark:"",logo_thumbnail:""}),i=gn({logo:null,logo_dark:null,logo_thumbnail:null}),{t:l}=be(),r=[{key:"logo",titleKey:"BRANDING_SETTINGS.FIELDS.LOGO.TITLE",helperKey:"BRANDING_SETTINGS.FIELDS.LOGO.HELPER"},{key:"logo_dark",titleKey:"BRANDING_SETTINGS.FIELDS.LOGO_DARK.TITLE",helperKey:"BRANDING_SETTINGS.FIELDS.LOGO_DARK.HELPER"},{key:"logo_thumbnail",titleKey:"BRANDING_SETTINGS.FIELDS.LOGO_THUMBNAIL.TITLE",helperKey:"BRANDING_SETTINGS.FIELDS.LOGO_THUMBNAIL.HELPER"}],c=y(()=>r.map(_=>({..._,title:l(_.titleKey),helper:l(_.helperKey)}))),u=y(()=>r.some(_=>i[_.key]||o[_.key]&&o[_.key].trim()!=="")),d=window.axios||dg,{accountId:h,currentAccount:g}=ln(),f=_=>{var R;const N=typeof window>"u"?"":window.location.hostname;return(_==null?void 0:_.domain)||((R=g.value)==null?void 0:R.domain)||N||"default"},b=()=>{var N;return{"X-CSRF-Token":(N=document.querySelector('meta[name="csrf-token"]'))==null?void 0:N.getAttribute("content"),Accept:"application/json"}},A=async()=>{var _;t.value=!0;try{const N=await d.get("/admin/branding.json",{headers:b(),params:{account_id:h.value}}),R=((_=N.data)==null?void 0:_.configs)||{};s.value=f(N.data),r.forEach(O=>{a[O.key]=R[O.key]||"",o[O.key]="",i[O.key]=null})}catch{ne(l("BRANDING_SETTINGS.ALERTS.LOAD_ERROR"))}finally{t.value=!1}},v=(_,N)=>{const[R]=_.target.files;i[N]=R||null},T=async()=>{if(!u.value){ne(l("BRANDING_SETTINGS.ALERTS.NO_CHANGES"));return}n.value=!0;const _=new FormData;r.forEach(N=>{const R=N.key;i[R]?_.append(`branding[${R}][file]`,i[R]):o[R]&&_.append(`branding[${R}][url]`,o[R])}),_.append("account_id",h.value);try{await d.put("/admin/branding.json",_,{headers:b(),params:{account_id:h.value}}),ne(l("BRANDING_SETTINGS.ALERTS.SAVE_SUCCESS")),await A()}catch{ne(l("BRANDING_SETTINGS.ALERTS.SAVE_ERROR"))}finally{n.value=!1}};return lt(A),(_,N)=>(p(),E("div",STe,[S(hs,{title:C(l)("BRANDING_SETTINGS.HEADER")},null,8,["title"]),m("p",ATe,[xe(I(C(l)("BRANDING_SETTINGS.DOMAIN_LABEL"))+" ",1),m("span",yTe,I(s.value),1)]),t.value?(p(),E("div",ITe,I(C(l)("BRANDING_SETTINGS.LOADING")),1)):(p(),E("form",{key:1,class:"mt-6 space-y-6",onSubmit:Ve(T,["prevent"])},[(p(!0),E(ue,null,Ae(c.value,R=>(p(),L(Pi,{key:R.key,title:R.title,description:R.helper},{default:Y(()=>[m("div",CTe,[a[R.key]?(p(),E("div",NTe,[m("img",{src:a[R.key],alt:R.title,class:"h-16 w-auto rounded border border-slate-200 bg-white p-1"},null,8,OTe),m("span",RTe,I(a[R.key]),1)])):$("",!0),m("label",xTe,[xe(I(C(l)("BRANDING_SETTINGS.UPLOAD_LABEL"))+" ",1),m("input",{type:"file",class:"mt-1 block w-full text-sm text-slate-600",onChange:O=>v(O,R.key)},null,40,wTe)]),m("label",$Te,[xe(I(C(l)("BRANDING_SETTINGS.CUSTOM_URL_LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":O=>o[R.key]=O,type:"text",class:"cw-input w-full mt-1",placeholder:C(l)("BRANDING_SETTINGS.CUSTOM_URL_PLACEHOLDER")},null,8,MTe),[[gt,o[R.key]]])])])]),_:2},1032,["title","description"]))),128)),m("div",LTe,[S(te,{type:"submit","is-loading":n.value},{default:Y(()=>[xe(I(C(l)("BRANDING_SETTINGS.SAVE_BUTTON")),1)]),_:1},8,["is-loading"])])],32))]))}},PTe={routes:[{path:vt("accounts/:accountId/settings/branding"),meta:{permissions:[]},component:Rs,children:[{path:"",name:"branding_settings_index",component:DTe,meta:{permissions:[]}}]}]},kTe={routes:[{path:vt("accounts/:accountId/settings"),name:"settings_home",meta:{permissions:[...qn,...Ms]},redirect:e=>fl.getters.getCurrentRole==="administrator"&&fl.getters.getCurrentCustomRoleId===null?{name:"general_settings_index",params:e.params}:{name:"canned_list",params:e.params}},...m6.routes,...e9.routes,...HF.routes,...m7.routes,...J7.routes,...RH.routes,...lW.routes,...yW.routes,...JW.routes,...iae.routes,...jie.routes,...Tle.routes,...Ere.routes,...ige.routes,...a_e.routes,...Ave.routes,...Xve.routes,...Zbe.routes,...TTe.routes,...PTe.routes]};function BTe(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var n=e.indexOf("Trident/");if(n>0){var s=e.indexOf("rv:");return parseInt(e.substring(s+3,e.indexOf(".",s)),10)}var a=e.indexOf("Edge/");return a>0?parseInt(e.substring(a+5,e.indexOf(".",a)),10):-1}let _d;function Qf(){Qf.init||(Qf.init=!0,_d=BTe()!==-1)}var zp={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Qf(),Wt(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",_d&&this.$el.appendChild(e),e.data="about:blank",_d||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!_d&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const UTe=oS();sS("data-v-b329ee4c");const FTe={class:"resize-observer",tabindex:"-1"};aS();const GTe=UTe((e,t,n,s,a,o)=>(p(),L("div",FTe)));zp.render=GTe;zp.__scopeId="data-v-b329ee4c";zp.__file="src/components/ResizeObserver.vue";function vd(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?vd=function(t){return typeof t}:vd=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vd(e)}function VTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HTe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function WTe(e,t,n){return t&&HTe(e.prototype,t),e}function Wb(e){return zTe(e)||YTe(e)||jTe(e)||KTe()}function zTe(e){if(Array.isArray(e))return Jf(e)}function YTe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function jTe(e,t){if(e){if(typeof e=="string")return Jf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jf(e,t)}}function Jf(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function KTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XTe(e){var t;return typeof e=="function"?t={callback:e}:t=e,t}function qTe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,a,o,i=function(r){for(var c=arguments.length,u=new Array(c>1?c-1:0),d=1;d<c;d++)u[d-1]=arguments[d];if(o=u,!(s&&r===a)){var h=n.leading;typeof h=="function"&&(h=h(r,a)),(!s||r!==a)&&h&&e.apply(void 0,[r].concat(Wb(o))),a=r,clearTimeout(s),s=setTimeout(function(){e.apply(void 0,[r].concat(Wb(o))),s=0},t)}};return i._clear=function(){clearTimeout(s),s=null},i}function gI(e,t){if(e===t)return!0;if(vd(e)==="object"){for(var n in e)if(!gI(e[n],t[n]))return!1;return!0}return!1}var ZTe=function(){function e(t,n,s){VTe(this,e),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(n,s)}return WTe(e,[{key:"createObserver",value:function(n,s){var a=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=XTe(n),this.callback=function(l,r){a.options.callback(l,r),l&&a.options.once&&(a.frozen=!0,a.destroyObserver())},this.callback&&this.options.throttle){var o=this.options.throttleOptions||{},i=o.leading;this.callback=qTe(this.callback,this.options.throttle,{leading:function(r){return i==="both"||i==="visible"&&r||i==="hidden"&&!r}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(l){var r=l[0];if(l.length>1){var c=l.find(function(d){return d.isIntersecting});c&&(r=c)}if(a.callback){var u=r.isIntersecting&&r.intersectionRatio>=a.threshold;if(u===a.oldResult)return;a.oldResult=u,a.callback(u,r)}},this.options.intersection),Wt(function(){a.observer&&a.observer.observe(a.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),e}();function _I(e,t,n){var s=t.value;if(s)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var a=new ZTe(e,s,n);e._vue_visibilityState=a}}function QTe(e,t,n){var s=t.value,a=t.oldValue;if(!gI(s,a)){var o=e._vue_visibilityState;if(!s){vI(e);return}o?o.createObserver(s,n):_I(e,{value:s},n)}}function vI(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}var JTe={beforeMount:_I,updated:QTe,unmounted:vI};function eSe(e){return{all:e=e||new Map,on:function(t,n){var s=e.get(t);s&&s.push(n)||e.set(t,[n])},off:function(t,n){var s=e.get(t);s&&s.splice(s.indexOf(n)>>>0,1)},emit:function(t,n){(e.get(t)||[]).slice().map(function(s){s(n)}),(e.get("*")||[]).slice().map(function(s){s(t,n)})}}}var tSe={itemsLimit:1e3},nSe=/(auto|scroll)/;function EI(e,t){return e.parentNode===null?t:EI(e.parentNode,t.concat([e]))}var Wh=function(t,n){return getComputedStyle(t,null).getPropertyValue(n)},sSe=function(t){return Wh(t,"overflow")+Wh(t,"overflow-y")+Wh(t,"overflow-x")},aSe=function(t){return nSe.test(sSe(t))};function zb(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var t=EI(e.parentNode,[]),n=0;n<t.length;n+=1)if(aSe(t[n]))return t[n];return document.scrollingElement||document.documentElement}}function eg(e){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eg(e)}var bI={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(t){return["vertical","horizontal"].includes(t)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function TI(){return this.items.length&&eg(this.items[0])!=="object"}var tg=!1;if(typeof window<"u"){tg=!1;try{var oSe=Object.defineProperty({},"passive",{get:function(){tg=!0}});window.addEventListener("test",null,oSe)}catch{}}let iSe=0;var z_={name:"RecycleScroller",components:{ResizeObserver:zp},directives:{ObserveVisibility:JTe},props:{...bI,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const e={"-1":{accumulator:0}},t=this.items,n=this.sizeField,s=this.minItemSize;let a=1e4,o=0,i;for(let l=0,r=t.length;l<r;l++)i=t[l][n]||s,i<a&&(a=i),o+=i,e[l]={accumulator:o,size:i};return this.$_computedMinItemSize=a,e}return[]},simpleArray:TI,itemIndexByKey(){const{keyField:e,items:t}=this,n={};for(let s=0,a=t.length;s<a;s++)n[t[s][e]]=s;return n}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const e=this.$_lastUpdateScrollPosition;typeof e=="number"&&this.$nextTick(()=>{this.scrollToPosition(e)})},beforeUnmount(){this.removeListeners()},methods:{addView(e,t,n,s,a){const o=TN({id:iSe++,index:t,used:!0,key:s,type:a}),i=SN({item:n,position:0,nr:o});return e.push(i),i},unuseView(e,t=!1){const n=this.$_unusedViews,s=e.nr.type;let a=n.get(s);a||(a=[],n.set(s,a)),a.push(e),t||(e.nr.used=!1,e.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(e){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const t=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:n}=this.updateVisibleItems(!1,!0);n||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});t(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&t()},this.updateInterval))}},handleVisibilityChange(e,t){this.ready&&(e||t.boundingClientRect.width!==0||t.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(e,t=!1){const n=this.itemSize,s=this.gridItems||1,a=this.itemSecondarySize||n,o=this.$_computedMinItemSize,i=this.typeField,l=this.simpleArray?null:this.keyField,r=this.items,c=r.length,u=this.sizes,d=this.$_views,h=this.$_unusedViews,g=this.pool,f=this.itemIndexByKey;let b,A,v,T,_;if(!c)b=A=T=_=v=0;else if(this.$_prerender)b=T=0,A=_=Math.min(this.prerender,r.length),v=null;else{const M=this.getScroll();if(t){let F=M.start-this.$_lastUpdateScrollPosition;if(F<0&&(F=-F),n===null&&F<o||F<n)return{continuous:!0}}this.$_lastUpdateScrollPosition=M.start;const P=this.buffer;M.start-=P,M.end+=P;let U=0;if(this.$refs.before&&(U=this.$refs.before.scrollHeight,M.start-=U),this.$refs.after){const F=this.$refs.after.scrollHeight;M.end+=F}if(n===null){let F,k=0,B=c-1,V=~~(c/2),G;do G=V,F=u[V].accumulator,F<M.start?k=V:V<c-1&&u[V+1].accumulator>M.start&&(B=V),V=~~((k+B)/2);while(V!==G);for(V<0&&(V=0),b=V,v=u[c-1].accumulator,A=V;A<c&&u[A].accumulator<M.end;A++);for(A===-1?A=r.length-1:(A++,A>c&&(A=c)),T=b;T<c&&U+u[T].accumulator<M.start;T++);for(_=T;_<c&&U+u[_].accumulator<M.end;_++);}else{b=~~(M.start/n*s);const F=b%s;b-=F,A=Math.ceil(M.end/n*s),T=Math.max(0,Math.floor((M.start-U)/n*s)),_=Math.floor((M.end-U)/n*s),b<0&&(b=0),A>c&&(A=c),T<0&&(T=0),_>c&&(_=c),v=Math.ceil(c/s)*n}}A-b>tSe.itemsLimit&&this.itemsLimitError(),this.totalSize=v;let N;const R=b<=this.$_endIndex&&A>=this.$_startIndex;if(R)for(let M=0,P=g.length;M<P;M++)N=g[M],N.nr.used&&(e&&(N.nr.index=f[N.item[l]]),(N.nr.index==null||N.nr.index<b||N.nr.index>=A)&&this.unuseView(N));const O=R?null:new Map;let x,w,D;for(let M=b;M<A;M++){x=r[M];const P=l?x[l]:x;if(P==null)throw new Error(`Key is ${P} on item (keyField is '${l}')`);if(N=d.get(P),!n&&!u[M].size){N&&this.unuseView(N);continue}w=x[i];let U=h.get(w),F=!1;if(!N)R?U&&U.length?N=U.pop():N=this.addView(g,M,x,P,w):(D=O.get(w)||0,(!U||D>=U.length)&&(N=this.addView(g,M,x,P,w),this.unuseView(N,!0),U=h.get(w)),N=U[D],O.set(w,D+1)),d.delete(N.nr.key),N.nr.used=!0,N.nr.index=M,N.nr.key=P,N.nr.type=w,d.set(P,N),F=!0;else if(!N.nr.used&&(N.nr.used=!0,F=!0,U)){const k=U.indexOf(N);k!==-1&&U.splice(k,1)}N.item=x,F&&(M===r.length-1&&this.$emit("scroll-end"),M===0&&this.$emit("scroll-start")),n===null?(N.position=u[M-1].accumulator,N.offset=0):(N.position=Math.floor(M/s)*n,N.offset=M%s*a)}return this.$_startIndex=b,this.$_endIndex=A,this.emitUpdate&&this.$emit("update",b,A,T,_),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:R}},getListenerTarget(){let e=zb(this.$el);return window.document&&(e===window.document.documentElement||e===window.document.body)&&(e=window),e},getScroll(){const{$el:e,direction:t}=this,n=t==="vertical";let s;if(this.pageMode){const a=e.getBoundingClientRect(),o=n?a.height:a.width;let i=-(n?a.top:a.left),l=n?window.innerHeight:window.innerWidth;i<0&&(l+=i,i=0),i+l>o&&(l=o-i),s={start:i,end:i+l}}else n?s={start:e.scrollTop,end:e.scrollTop+e.clientHeight}:s={start:e.scrollLeft,end:e.scrollLeft+e.clientWidth};return s},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,tg?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(e){let t;const n=this.gridItems||1;this.itemSize===null?t=e>0?this.sizes[e-1].accumulator:0:t=Math.floor(e/n)*this.itemSize,this.scrollToPosition(t)},scrollToPosition(e){const t=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let n,s,a;if(this.pageMode){const o=zb(this.$el),i=o.tagName==="HTML"?0:o[t.scroll],l=o.getBoundingClientRect(),c=this.$el.getBoundingClientRect()[t.start]-l[t.start];n=o,s=t.scroll,a=e+i+c}else n=this.$el,s=t.scroll,a=e;n[s]=a},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((e,t)=>e.nr.index-t.nr.index)}}};const lSe={key:0,ref:"before",class:"vue-recycle-scroller__slot"},rSe={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function cSe(e,t,n,s,a,o){const i=W("ResizeObserver"),l=Qe("observe-visibility");return re((p(),E("div",{class:ae(["vue-recycle-scroller",{ready:a.ready,"page-mode":n.pageMode,[`direction-${e.direction}`]:!0}]),onScrollPassive:t[0]||(t[0]=(...r)=>o.handleScroll&&o.handleScroll(...r))},[e.$slots.before?(p(),E("div",lSe,[We(e.$slots,"before")],512)):$("v-if",!0),(p(),L(ds(n.listTag),{ref:"wrapper",style:Zt({[e.direction==="vertical"?"minHeight":"minWidth"]:a.totalSize+"px"}),class:ae(["vue-recycle-scroller__item-wrapper",n.listClass])},{default:Y(()=>[(p(!0),E(ue,null,Ae(a.pool,r=>(p(),L(ds(n.itemTag),Qn({key:r.nr.id,style:a.ready?{transform:`translate${e.direction==="vertical"?"Y":"X"}(${r.position}px) translate${e.direction==="vertical"?"X":"Y"}(${r.offset}px)`,width:n.gridItems?`${e.direction==="vertical"&&n.itemSecondarySize||n.itemSize}px`:void 0,height:n.gridItems?`${e.direction==="horizontal"&&n.itemSecondarySize||n.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[n.itemClass,{hover:!n.skipHover&&a.hoverKey===r.nr.key}]]},AN(n.skipHover?{}:{mouseenter:()=>{a.hoverKey=r.nr.key},mouseleave:()=>{a.hoverKey=null}})),{default:Y(()=>[We(e.$slots,"default",{item:r.item,index:r.nr.index,active:r.nr.used})]),_:2},1040,["style","class"]))),128)),We(e.$slots,"empty")]),_:3},8,["style","class"])),e.$slots.after?(p(),E("div",rSe,[We(e.$slots,"after")],512)):$("v-if",!0),S(i,{onNotify:o.handleResize},null,8,["onNotify"])],34)),[[l,o.handleVisibilityChange]])}z_.render=cSe;z_.__file="src/components/RecycleScroller.vue";var Y_={name:"DynamicScroller",components:{RecycleScroller:z_},provide(){return typeof ResizeObserver<"u"&&(this.$_resizeObserver=new ResizeObserver(e=>{requestAnimationFrame(()=>{if(Array.isArray(e)){for(const t of e)if(t.target&&t.target.$_vs_onResize){let n,s;if(t.borderBoxSize){const a=t.borderBoxSize[0];n=a.inlineSize,s=a.blockSize}else n=t.contentRect.width,s=t.contentRect.height;t.target.$_vs_onResize(t.target.$_vs_id,n,s)}}})})),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},inheritAttrs:!1,props:{...bI,minItemSize:{type:[Number,String],required:!0}},emits:["resize","visible"],data(){return{vscrollData:{active:!0,sizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray:TI,itemsWithSize(){const e=[],{items:t,keyField:n,simpleArray:s}=this,a=this.vscrollData.sizes,o=t.length;for(let i=0;i<o;i++){const l=t[i],r=s?i:l[n];let c=a[r];typeof c>"u"&&!this.$_undefinedMap[r]&&(c=0),e.push({item:l,id:r,size:c})}return e}},watch:{items(){this.forceUpdate()},simpleArray:{handler(e){this.vscrollData.simpleArray=e},immediate:!0},direction(e){this.forceUpdate(!0)},itemsWithSize(e,t){const n=this.$el.scrollTop;let s=0,a=0;const o=Math.min(e.length,t.length);for(let l=0;l<o&&!(s>=n);l++)s+=t[l].size||this.minItemSize,a+=e[l].size||this.minItemSize;const i=a-s;i!==0&&(this.$el.scrollTop+=i)}},beforeCreate(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={},this.$_events=eSe()},activated(){this.vscrollData.active=!0},deactivated(){this.vscrollData.active=!1},unmounted(){this.$_events.all.clear()},methods:{onScrollerResize(){this.$refs.scroller&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible(){this.$_events.emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate(e=!1){(e||this.simpleArray)&&(this.vscrollData.sizes={}),this.$_events.emit("vscroll:update",{force:!0})},scrollToItem(e){const t=this.$refs.scroller;t&&t.scrollToItem(e)},getItemSize(e,t=void 0){const n=this.simpleArray?t??this.items.indexOf(e):e[this.keyField];return this.vscrollData.sizes[n]||0},scrollToBottom(){if(this.$_scrollingToBottom)return;this.$_scrollingToBottom=!0;const e=this.$el;this.$nextTick(()=>{e.scrollTop=e.scrollHeight+5e3;const t=()=>{e.scrollTop=e.scrollHeight+5e3,requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight+5e3,this.$_undefinedSizes===0?this.$_scrollingToBottom=!1:requestAnimationFrame(t)})};requestAnimationFrame(t)})}}};function uSe(e,t,n,s,a,o){const i=W("RecycleScroller");return p(),L(i,Qn({ref:"scroller",items:o.itemsWithSize,"min-item-size":n.minItemSize,direction:e.direction,"key-field":"id","list-tag":e.listTag,"item-tag":e.itemTag},e.$attrs,{onResize:o.onScrollerResize,onVisible:o.onScrollerVisible}),{default:Y(({item:l,index:r,active:c})=>[We(e.$slots,"default",iS(lS({item:l.item,index:r,active:c,itemWithSize:l})))]),before:Y(()=>[We(e.$slots,"before")]),after:Y(()=>[We(e.$slots,"after")]),empty:Y(()=>[We(e.$slots,"empty")]),_:3},16,["items","min-item-size","direction","list-tag","item-tag","onResize","onVisible"])}Y_.render=uSe;Y_.__file="src/components/DynamicScroller.vue";var SI={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},emits:["resize"],computed:{id(){if(this.vscrollData.simpleArray)return this.index;if(this.vscrollData.keyField in this.item)return this.item[this.vscrollData.keyField];throw new Error(`keyField '${this.vscrollData.keyField}' not found in your item. You should set a valid keyField prop on your Scroller`)},size(){return this.vscrollData.sizes[this.id]||0},finalActive(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id(e,t){if(this.$el.$_vs_id=this.id,this.size||this.onDataUpdate(),this.$_sizeObserved){const n=this.vscrollData.sizes[t],s=this.vscrollData.sizes[e];n!=null&&n!==s&&this.applySize(n)}},finalActive(e){this.size||(e?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?e?this.observeSize():this.unobserveSize():e&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created(){if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){for(const e in this.sizeDependencies)this.$watch(()=>this.sizeDependencies[e],this.onDataUpdate);this.vscrollParent.$_events.on("vscroll:update",this.onVscrollUpdate)}},mounted(){this.finalActive&&(this.updateSize(),this.observeSize())},beforeUnmount(){this.vscrollParent.$_events.off("vscroll:update",this.onVscrollUpdate),this.unobserveSize()},methods:{updateSize(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData(){this.watchData&&!this.vscrollResizeObserver?this.$_watchData=this.$watch("item",()=>{this.onDataUpdate()},{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate({force:e}){!this.finalActive&&e&&(this.$_pendingVScrollUpdate=this.id),(this.$_forceNextVScrollUpdate===this.id||e||!this.size)&&this.updateSize()},onDataUpdate(){this.updateSize()},computeSize(e){this.$nextTick(()=>{if(this.id===e){const t=this.$el.offsetWidth,n=this.$el.offsetHeight;this.applyWidthHeight(t,n)}this.$_pendingSizeUpdate=null})},applyWidthHeight(e,t){const n=~~(this.vscrollParent.direction==="vertical"?t:e);n&&this.size!==n&&this.applySize(n)},applySize(e){this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.vscrollData.sizes[this.id]=e,this.emitResize&&this.$emit("resize",this.id)},observeSize(){this.vscrollResizeObserver&&(this.$_sizeObserved||(this.vscrollResizeObserver.observe(this.$el),this.$el.$_vs_id=this.id,this.$el.$_vs_onResize=this.onResize,this.$_sizeObserved=!0))},unobserveSize(){this.vscrollResizeObserver&&this.$_sizeObserved&&(this.vscrollResizeObserver.unobserve(this.$el),this.$el.$_vs_onResize=void 0,this.$_sizeObserved=!1)},onResize(e,t,n){this.id===e&&this.applyWidthHeight(t,n)}},render(){return On(this.tag,this.$slots.default())}};SI.__file="src/components/DynamicScrollerItem.vue";const dSe={class:"relative flex flex-col gap-1 w-fit"},Tr={__name:"SelectMenu",props:{options:{type:Array,required:!0},modelValue:{type:String,required:!0},label:{type:String,required:!0},subMenuPosition:{type:String,default:"right",validator:e=>["right","left","bottom"].includes(e)}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,a=j(!1),o=y(()=>n.label),i=()=>{a.value=!a.value},l=r=>{s("update:modelValue",r),a.value=!1};return(r,c)=>{const u=Qe("on-clickaway");return re((p(),E("div",dSe,[S(te,{icon:"i-lucide-chevron-down",size:"sm","trailing-icon":"",color:"slate",variant:"faded",class:ae(["!w-fit max-w-40",{"dark:!bg-n-alpha-2 !bg-n-slate-9/20":a.value}]),label:o.value,onClick:i},null,8,["class","label"]),a.value?(p(),E("div",{key:0,class:ae(["absolute select-none max-w-64 flex flex-col gap-1 bg-n-alpha-3 backdrop-blur-[100px] p-1 top-0 shadow-lg z-40 rounded-lg border border-n-weak dark:border-n-strong/50",{"ltr:left-full rtl:right-full ltr:ml-1 rtl:mr-1":e.subMenuPosition==="right","ltr:right-full rtl:left-full ltr:mr-1 rtl:ml-1":e.subMenuPosition==="left","top-full mt-1 ltr:right-0 rtl:left-0":e.subMenuPosition==="bottom"}])},[(p(!0),E(ue,null,Ae(e.options,d=>(p(),L(te,{key:d.value,label:d.label,icon:d.value===e.modelValue?"i-lucide-check":"",size:"sm",variant:"ghost",color:"slate","trailing-icon":"",class:ae(["!justify-end !px-2.5 !h-7",{"!bg-n-alpha-2":d.value===e.modelValue}]),onClick:h=>l(d.value)},null,8,["label","icon","class","onClick"]))),128))],2)):$("",!0)])),[[u,()=>a.value=!1]])}}},pSe={class:"relative flex"},mSe={class:"flex items-center justify-between last:mt-4 gap-2"},hSe={class:"text-sm truncate text-n-slate-12"},fSe={class:"flex items-center justify-between last:mt-4 gap-2"},gSe={class:"text-sm truncate text-n-slate-12"},_Se={__name:"ConversationBasicFilter",props:{isOnExpandedLayout:{type:Boolean,required:!0}},emits:["changeFilter"],setup(e,{emit:t}){const n=t,s=rt(),{t:a}=be(),{updateUISettings:o}=tn(),i=_e("getChatStatusFilter"),l=_e("getChatSortFilter"),[r,c]=yn(),u=y(()=>i.value||yt.STATUS_TYPE.OPEN),d=y(()=>l.value||yt.SORT_BY_TYPE.LAST_ACTIVITY_AT_DESC),h=y(()=>[{label:a("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.open.TEXT"),value:"open"},{label:a("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.resolved.TEXT"),value:"resolved"},{label:a("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.pending.TEXT"),value:"pending"},{label:a("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.snoozed.TEXT"),value:"snoozed"},{label:a("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.all.TEXT"),value:"all"}]),g=y(()=>[{label:a("CHAT_LIST.SORT_ORDER_ITEMS.last_activity_at_asc.TEXT"),value:"last_activity_at_asc"},{label:a("CHAT_LIST.SORT_ORDER_ITEMS.last_activity_at_desc.TEXT"),value:"last_activity_at_desc"},{label:a("CHAT_LIST.SORT_ORDER_ITEMS.created_at_desc.TEXT"),value:"created_at_desc"},{label:a("CHAT_LIST.SORT_ORDER_ITEMS.created_at_asc.TEXT"),value:"created_at_asc"},{label:a("CHAT_LIST.SORT_ORDER_ITEMS.priority_desc.TEXT"),value:"priority_desc"},{label:a("CHAT_LIST.SORT_ORDER_ITEMS.priority_asc.TEXT"),value:"priority_asc"},{label:a("CHAT_LIST.SORT_ORDER_ITEMS.waiting_since_asc.TEXT"),value:"waiting_since_asc"},{label:a("CHAT_LIST.SORT_ORDER_ITEMS.waiting_since_desc.TEXT"),value:"waiting_since_desc"}]),f=y(()=>{var _;return((_=h.value.find(N=>N.value===i.value))==null?void 0:_.label)||""}),b=y(()=>{var _;return((_=g.value.find(N=>N.value===l.value))==null?void 0:_.label)||""}),A=(_,N)=>{o({conversations_filter_by:{status:_==="status"?N:u.value,order_by:_==="sort"?N:d.value}})},v=_=>{n("changeFilter",_,"status"),s.dispatch("setChatStatusFilter",_),A("status",_)},T=_=>{n("changeFilter",_,"sort"),s.dispatch("setChatSortFilter",_),A("sort",_)};return(_,N)=>{const R=Qe("tooltip");return p(),E("div",pSe,[re(S(te,{icon:"i-lucide-arrow-up-down",slate:"",faded:"",xs:"",onClick:N[0]||(N[0]=O=>C(c)())},null,512),[[R,_.$t("CHAT_LIST.SORT_TOOLTIP_LABEL"),void 0,{right:!0}]]),C(r)?re((p(),E("div",{key:0,class:ae(["mt-1 bg-n-alpha-3 backdrop-blur-[100px] border border-n-weak w-72 rounded-xl p-4 absolute z-40 top-full",{"ltr:left-0 rtl:right-0":!e.isOnExpandedLayout,"ltr:right-0 rtl:left-0":e.isOnExpandedLayout}])},[m("div",mSe,[m("span",hSe,I(_.$t("CHAT_LIST.CHAT_SORT.STATUS")),1),S(Tr,{"model-value":C(i),options:h.value,label:f.value,"sub-menu-position":e.isOnExpandedLayout?"left":"right","onUpdate:modelValue":v},null,8,["model-value","options","label","sub-menu-position"])]),m("div",fSe,[m("span",gSe,I(_.$t("CHAT_LIST.CHAT_SORT.ORDER_BY")),1),S(Tr,{"model-value":C(l),options:g.value,label:b.value,"sub-menu-position":e.isOnExpandedLayout?"left":"right","onUpdate:modelValue":T},null,8,["model-value","options","label","sub-menu-position"])])],2)),[[C(ms),()=>C(c)()]]):$("",!0)])}}},vSe={components:{NextButton:te},props:{isOnExpandedLayout:{type:Boolean,default:!1}},emits:["toggle"],methods:{toggle(){this.$emit("toggle")}}};function ESe(e,t,n,s,a,o){const i=W("NextButton"),l=Qe("tooltip");return re((p(),L(i,{icon:n.isOnExpandedLayout?"i-lucide-arrow-left-to-line":"i-lucide-arrow-right-to-line",slate:"",xs:"",faded:"",class:"flex-shrink-0 rtl:rotate-180 ltr:rotate-0 md:inline-flex hidden",onClick:o.toggle},null,8,["icon","onClick"])),[[l,e.$t("CONVERSATION.SWITCH_VIEW_LAYOUT"),void 0,{left:!0}]])}const bSe=De(vSe,[["render",ESe]]),TSe={class:"flex items-center justify-center min-w-0"},SSe=["title"],ASe=["title"],ySe={key:1,class:"px-2 py-1 my-0.5 mx-1 rounded-md capitalize bg-n-slate-3 text-xxs text-n-slate-12 shrink-0"},ISe={class:"flex items-center gap-1"},CSe={class:"relative"},NSe={class:"relative"},OSe={key:2,class:"relative"},RSe={__name:"ChatListHeader",props:{pageTitle:{type:String,required:!0},hasAppliedFilters:{type:Boolean,required:!0},hasActiveFolders:{type:Boolean,required:!0},activeStatus:{type:String,required:!0},isOnExpandedLayout:{type:Boolean,required:!0},conversationStats:{type:Object,required:!0},isListLoading:{type:Boolean,required:!0}},emits:["addFolders","deleteFolders","resetFilters","basicFilterChange","filtersModal"],setup(e,{emit:t}){const n=e,s=t,{uiSettings:a,updateUISettings:o}=tn(),i=(d,h)=>{s("basicFilterChange",d,h)},l=y(()=>n.hasAppliedFilters||n.hasActiveFolders),r=y(()=>{var d;return((d=n.conversationStats)==null?void 0:d.allCount)||0}),c=y(()=>$N(r.value)),u=()=>{const{LAYOUT_TYPES:d}=yt,{conversation_display_type:h=d.CONDENSED}=a.value,g=h===d.CONDENSED?d.EXPANDED:d.CONDENSED;o({conversation_display_type:g,previously_used_conversation_display_type:g})};return(d,h)=>{const g=Qe("tooltip");return p(),E("div",{class:ae(["flex items-center justify-between gap-2 px-3 h-12",{"border-b border-n-strong":l.value}])},[m("div",TSe,[m("h1",{class:"text-base font-medium truncate text-n-slate-12",title:e.pageTitle},I(e.pageTitle),9,SSe),r.value>0&&l.value&&!e.isListLoading?(p(),E("span",{key:0,class:"px-2 py-1 my-0.5 mx-1 rounded-md capitalize bg-n-slate-3 text-xxs text-n-slate-12 shrink-0",title:r.value},I(c.value),9,ASe)):$("",!0),l.value?$("",!0):(p(),E("span",ySe,I(d.$t(`CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.${e.activeStatus}.TEXT`)),1))]),m("div",ISe,[e.hasAppliedFilters&&!e.hasActiveFolders?(p(),E(ue,{key:0},[m("div",CSe,[re(S(te,{icon:"i-lucide-save",slate:"",xs:"",faded:"",onClick:h[0]||(h[0]=f=>s("addFolders"))},null,512),[[g,d.$t("FILTER.CUSTOM_VIEWS.ADD.SAVE_BUTTON"),void 0,{"top-end":!0}]]),m("div",{id:"saveFilterTeleportTarget",class:ae(["absolute z-50 mt-2",{"ltr:right-0 rtl:left-0":e.isOnExpandedLayout}])},null,2)]),re(S(te,{icon:"i-lucide-circle-x",ruby:"",faded:"",xs:"",onClick:h[1]||(h[1]=f=>s("resetFilters"))},null,512),[[g,d.$t("FILTER.CLEAR_BUTTON_LABEL"),void 0,{"top-end":!0}]])],64)):$("",!0),e.hasActiveFolders?(p(),E(ue,{key:1},[m("div",NSe,[re(S(te,{id:"toggleConversationFilterButton",icon:"i-lucide-pen-line",slate:"",xs:"",faded:"",onClick:h[2]||(h[2]=f=>s("filtersModal"))},null,512),[[g,d.$t("FILTER.CUSTOM_VIEWS.EDIT.EDIT_BUTTON"),void 0,{"top-end":!0}]]),m("div",{id:"conversationFilterTeleportTarget",class:ae(["absolute z-50 mt-2",{"ltr:right-0 rtl:left-0":e.isOnExpandedLayout}])},null,2)]),re(S(te,{id:"toggleConversationFilterButton",icon:"i-lucide-trash-2",ruby:"",xs:"",faded:"",onClick:h[3]||(h[3]=f=>s("deleteFolders"))},null,512),[[g,d.$t("FILTER.CUSTOM_VIEWS.DELETE.DELETE_BUTTON"),void 0,{"top-end":!0}]])],64)):(p(),E("div",OSe,[re(S(te,{id:"toggleConversationFilterButton",icon:"i-lucide-list-filter",slate:"",xs:"",faded:"",onClick:h[4]||(h[4]=f=>s("filtersModal"))},null,512),[[g,d.$t("FILTER.TOOLTIP_LABEL"),void 0,{right:!0}]]),m("div",{id:"conversationFilterTeleportTarget",class:ae(["absolute z-50 mt-2",{"ltr:right-0 rtl:left-0":e.isOnExpandedLayout}])},null,2)])),l.value?$("",!0):(p(),L(_Se,{key:3,"is-on-expanded-layout":e.isOnExpandedLayout,onChangeFilter:i},null,8,["is-on-expanded-layout"])),S(bSe,{"is-on-expanded-layout":e.isOnExpandedLayout,onToggle:u},null,8,["is-on-expanded-layout"])])],2)}}},_n={EQUAL_TO:"equal_to",NOT_EQUAL_TO:"not_equal_to",IS_PRESENT:"is_present",IS_NOT_PRESENT:"is_not_present",CONTAINS:"contains",DOES_NOT_CONTAIN:"does_not_contain",IS_GREATER_THAN:"is_greater_than",IS_LESS_THAN:"is_less_than",DAYS_BEFORE:"days_before",STARTS_WITH:"starts_with"},xSe=[_n.IS_PRESENT,_n.IS_NOT_PRESENT],wSe={[_n.DAYS_BEFORE]:"plainText"},$Se={[_n.EQUAL_TO]:"i-ph-equals-bold",[_n.NOT_EQUAL_TO]:"i-ph-not-equals-bold",[_n.IS_PRESENT]:"i-ph-member-of-bold",[_n.IS_NOT_PRESENT]:"i-ph-not-member-of-bold",[_n.CONTAINS]:"i-ph-superset-of-bold",[_n.DOES_NOT_CONTAIN]:"i-ph-not-superset-of-bold",[_n.IS_GREATER_THAN]:"i-ph-greater-than-bold",[_n.IS_LESS_THAN]:"i-ph-less-than-bold",[_n.DAYS_BEFORE]:"i-ph-calendar-minus-bold",[_n.STARTS_WITH]:"i-ph-caret-line-right-bold"};function AI(){const{t:e}=be(),t=y(()=>Object.values(_n).reduce((r,c)=>(r[c]={value:c,label:e(`FILTER.OPERATOR_LABELS.${c}`),hasInput:!xSe.includes(c),inputOverride:wSe[c]||null,icon:On("span",{class:`${$Se[c]} !text-n-blue-text`})},r),{})),n=y(()=>[t.value[_n.EQUAL_TO],t.value[_n.NOT_EQUAL_TO]]),s=y(()=>[t.value[_n.EQUAL_TO],t.value[_n.NOT_EQUAL_TO],t.value[_n.IS_PRESENT],t.value[_n.IS_NOT_PRESENT]]),a=y(()=>[t.value[_n.EQUAL_TO],t.value[_n.NOT_EQUAL_TO],t.value[_n.CONTAINS],t.value[_n.DOES_NOT_CONTAIN]]),o=y(()=>[t.value[_n.EQUAL_TO],t.value[_n.NOT_EQUAL_TO],t.value[_n.IS_PRESENT],t.value[_n.IS_NOT_PRESENT],t.value[_n.IS_GREATER_THAN],t.value[_n.IS_LESS_THAN]]),i=y(()=>[t.value[_n.IS_GREATER_THAN],t.value[_n.IS_LESS_THAN],t.value[_n.DAYS_BEFORE]]);return{operators:t,equalityOperators:n,presenceOperators:s,containmentOperators:a,comparisonOperators:o,dateOperators:i,getOperatorTypes:r=>{switch(r){case"list":return n.value;case"text":return a.value;case"number":return n.value;case"link":return n.value;case"date":return o.value;case"checkbox":return n.value;default:return n.value}}}}const Pn={STATUS:"status",PRIORITY:"priority",ASSIGNEE_ID:"assignee_id",INBOX_ID:"inbox_id",TEAM_ID:"team_id",DISPLAY_ID:"display_id",CAMPAIGN_ID:"campaign_id",LABELS:"labels",BROWSER_LANGUAGE:"browser_language",COUNTRY_CODE:"country_code",REFERER:"referer",CREATED_AT:"created_at",LAST_ACTIVITY_AT:"last_activity_at"},Kn={NAME:"name",EMAIL:"email",PHONE_NUMBER:"phone_number",IDENTIFIER:"identifier",COUNTRY_CODE:"country_code",CITY:"city",CREATED_AT:"created_at",LAST_ACTIVITY_AT:"last_activity_at",REFERER:"referer",BLOCKED:"blocked",LABELS:"labels"},MSe=e=>{switch(e){case"date":return"date";case"text":return"plainText";case"list":return"searchSelect";case"checkbox":return"booleanSelect";default:return"plainText"}},yI=(e,t,n="conversation")=>{const s=Object.values(n==="conversation"?Pn:Kn);return e.filter(a=>!s.includes(a.attributeKey)).map(a=>({attributeKey:a.attributeKey,value:a.attributeKey,attributeName:a.attributeDisplayName,label:a.attributeDisplayName,inputType:MSe(a.attributeDisplayType),filterOperators:t(a.attributeDisplayType),options:a.attributeDisplayType==="list"?a.attributeValues.map(o=>({id:o,name:o})):[],attributeModel:"customAttributes"}))},Yb=e=>(e==null?void 0:e.replaceAll("_"," "))??"";function LSe(){const{t:e}=be(),t=_e("attributes/getConversationAttributes"),n=_e("labels/getLabels"),s=_e("agents/getAgents"),a=_e("inboxes/getInboxes"),o=_e("teams/getTeams"),i=_e("campaigns/getAllCampaigns"),{equalityOperators:l,presenceOperators:r,containmentOperators:c,dateOperators:u,getOperatorTypes:d}=AI(),h=y(()=>yI(t.value,d,"conversation"));return{filterTypes:y(()=>[{attributeKey:Pn.STATUS,value:Pn.STATUS,attributeName:e("FILTER.ATTRIBUTES.STATUS"),label:e("FILTER.ATTRIBUTES.STATUS"),inputType:"multiSelect",options:["open","resolved","pending","snoozed","all"].map(f=>({id:f,name:e(`CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.${f}.TEXT`)})),dataType:"text",filterOperators:l.value,attributeModel:"standard"},{attributeKey:Pn.PRIORITY,value:Pn.PRIORITY,attributeName:e("FILTER.ATTRIBUTES.PRIORITY"),label:e("FILTER.ATTRIBUTES.PRIORITY"),inputType:"multiSelect",options:["low","medium","high","urgent"].map(f=>({id:f,name:e(`CONVERSATION.PRIORITY.OPTIONS.${f.toUpperCase()}`)})),dataType:"text",filterOperators:l.value,attributeModel:"standard"},{attributeKey:Pn.ASSIGNEE_ID,value:Pn.ASSIGNEE_ID,attributeName:e("FILTER.ATTRIBUTES.ASSIGNEE_NAME"),label:e("FILTER.ATTRIBUTES.ASSIGNEE_NAME"),inputType:"searchSelect",options:s.value.map(f=>({id:f.id,name:f.name})),dataType:"text",filterOperators:r.value,attributeModel:"standard"},{attributeKey:Pn.INBOX_ID,value:Pn.INBOX_ID,attributeName:e("FILTER.ATTRIBUTES.INBOX_NAME"),label:e("FILTER.ATTRIBUTES.INBOX_NAME"),inputType:"searchSelect",options:a.value.map(f=>({...f,icon:tO(f).value})),dataType:"text",filterOperators:r.value,attributeModel:"standard"},{attributeKey:Pn.TEAM_ID,value:Pn.TEAM_ID,attributeName:e("FILTER.ATTRIBUTES.TEAM_NAME"),label:e("FILTER.ATTRIBUTES.TEAM_NAME"),inputType:"searchSelect",options:o.value,dataType:"number",filterOperators:r.value,attributeModel:"standard"},{attributeKey:Pn.DISPLAY_ID,value:Pn.DISPLAY_ID,attributeName:e("FILTER.ATTRIBUTES.CONVERSATION_IDENTIFIER"),label:e("FILTER.ATTRIBUTES.CONVERSATION_IDENTIFIER"),inputType:"number",dataType:"number",filterOperators:c.value,attributeModel:"standard"},{attributeKey:Pn.CAMPAIGN_ID,value:Pn.CAMPAIGN_ID,attributeName:e("FILTER.ATTRIBUTES.CAMPAIGN_NAME"),label:e("FILTER.ATTRIBUTES.CAMPAIGN_NAME"),inputType:"searchSelect",options:i.value.map(f=>({id:f.id,name:f.title})),dataType:"number",filterOperators:r.value,attributeModel:"standard"},{attributeKey:Pn.LABELS,value:Pn.LABELS,attributeName:e("FILTER.ATTRIBUTES.LABELS"),label:e("FILTER.ATTRIBUTES.LABELS"),inputType:"multiSelect",options:n.value.map(f=>({id:f.title,name:f.title,icon:On("span",{class:"rounded-full",style:{backgroundColor:f.color,height:"6px",width:"6px"}})})),dataType:"text",filterOperators:r.value,attributeModel:"standard"},{attributeKey:Pn.BROWSER_LANGUAGE,value:Pn.BROWSER_LANGUAGE,attributeName:e("FILTER.ATTRIBUTES.BROWSER_LANGUAGE"),label:e("FILTER.ATTRIBUTES.BROWSER_LANGUAGE"),inputType:"searchSelect",options:Ng,dataType:"text",filterOperators:l.value,attributeModel:"additional"},{attributeKey:Pn.COUNTRY_CODE,value:Pn.COUNTRY_CODE,attributeName:e("FILTER.ATTRIBUTES.COUNTRY_NAME"),label:e("FILTER.ATTRIBUTES.COUNTRY_NAME"),inputType:"searchSelect",options:Fa,dataType:"text",filterOperators:l.value,attributeModel:"additional"},{attributeKey:Pn.REFERER,value:Pn.REFERER,attributeName:e("FILTER.ATTRIBUTES.REFERER_LINK"),label:e("FILTER.ATTRIBUTES.REFERER_LINK"),inputType:"plainText",dataType:"text",filterOperators:c.value,attributeModel:"additional"},{attributeKey:Pn.CREATED_AT,value:Pn.CREATED_AT,attributeName:e("FILTER.ATTRIBUTES.CREATED_AT"),label:e("FILTER.ATTRIBUTES.CREATED_AT"),inputType:"date",dataType:"text",filterOperators:u.value,attributeModel:"standard"},{attributeKey:Pn.LAST_ACTIVITY_AT,value:Pn.LAST_ACTIVITY_AT,attributeName:e("FILTER.ATTRIBUTES.LAST_ACTIVITY"),label:e("FILTER.ATTRIBUTES.LAST_ACTIVITY"),inputType:"date",dataType:"text",filterOperators:u.value,attributeModel:"standard"},...h.value])}}const DSe=["onClick"],PSe={class:"truncate"},kSe={key:0,class:"px-3 border-r rtl:border-l rtl:border-r-0 border-n-weak text-n-slate-12 text-sm flex gap-2 items-center max-w-[100px]"},BSe={class:"truncate"},USe={class:"flex items-center border-none px-3 gap-2"},FSe={class:"text-n-slate-11"},GSe={__name:"MultiSelect",props:jt({options:{type:Array,required:!0},maxChips:{type:Number,default:3}},{modelValue:{type:[Array,String],required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const{t}=be(),n=Xt(e,"modelValue"),s=y(()=>!(!n.value||!Array.isArray(n.value)||n.value.length===0)),a=y(()=>s.value?n.value.map(u=>u.id):[]),o=y(()=>s.value?e.options.filter(u=>a.value.includes(u.id)):[]),i=y(()=>s.value?o.value.length===e.maxChips+1?o.value:o.value.slice(0,e.maxChips):[]),l=y(()=>s.value?o.value.length===e.maxChips+1?[]:o.value.slice(e.maxChips):[]),r=y(()=>s.value?l.value.map(u=>u.name).join(", "):""),c=u=>{const d={id:u.id,name:u.name},h=d.id;if(!s.value){n.value=[d];return}a.value.includes(h)?n.value=n.value.filter(g=>g.id!==h):n.value=[...n.value,d]};return(u,d)=>{const h=Qe("tooltip");return p(),L(Tl,null,{trigger:Y(({toggle:g})=>[s.value?(p(),E("button",{key:0,class:"bg-n-alpha-2 py-2 rounded-lg h-8 flex items-center px-0",onClick:g},[(p(!0),E(ue,null,Ae(i.value,f=>(p(),E("div",{key:f.name,class:"px-3 border-r rtl:border-l rtl:border-r-0 border-n-weak text-n-slate-12 text-sm flex gap-2 items-center max-w-[100px]"},[f.icon?(p(),L(dt,{key:0,icon:f.icon,class:"flex-shrink-0"},null,8,["icon"])):$("",!0),m("span",PSe,I(f.name),1)]))),128)),l.value.length>0?re((p(),E("div",kSe,[m("span",BSe,I(C(t)("COMBOBOX.MORE",{count:l.value.length})),1)])),[[h,r.value,void 0,{top:!0}]]):$("",!0),m("div",USe,[S(dt,{icon:"i-lucide-plus"})])],8,DSe)):(p(),L(te,{key:1,sm:"",slate:"",faded:"",onClick:g},{icon:Y(()=>[S(dt,{icon:"i-lucide-plus",class:"text-n-slate-11"})]),default:Y(()=>[m("span",FSe,I(C(t)("COMBOBOX.PLACEHOLDER")),1)]),_:2},1032,["onClick"]))]),default:Y(()=>[S(Sl,{class:"top-0 min-w-48 z-50",strong:""},{default:Y(()=>[S(xr,{class:"[&>ul]:max-h-80"},{default:Y(()=>[(p(!0),E(ue,null,Ae(e.options,g=>(p(),L(Ba,{key:g.id,icon:g.icon,"preserve-open":"",onClick:f=>c(g)},{label:Y(()=>[xe(I(g.name)+" ",1),a.value.includes(g.id)?(p(),L(dt,{key:0,icon:"i-lucide-check",class:"bg-n-blue-text pointer-events-none"})):$("",!0)]),_:2},1032,["icon","onClick"]))),128))]),_:1})]),_:1})]),_:1})}}},VSe={class:"list-none"},HSe={key:0,class:"text-sm text-n-ruby-11"},Zd={__name:"ConditionRow",props:jt({showQueryOperator:{type:Boolean,default:!1},filterTypes:{type:Array,required:!0}},{attributeKey:{type:String,required:!0},attributeKeyModifiers:{},values:{type:[String,Number,Array,Object],required:!0},valuesModifiers:{},filterOperator:{type:String,required:!0},filterOperatorModifiers:{},queryOperator:{type:String,required:!1,default:void 0,validator:e=>["and","or"].includes(e)},queryOperatorModifiers:{}}),emits:jt(["remove"],["update:attributeKey","update:values","update:filterOperator","update:queryOperator"]),setup(e,{expose:t,emit:n}){const s=n,{t:a}=be(),o=j(!1),i=Xt(e,"attributeKey"),l=Xt(e,"values"),r=Xt(e,"filterOperator"),c=Xt(e,"queryOperator"),u=O=>e.filterTypes.find(x=>x.attributeKey===O),d=y(()=>u(i.value)),h=(O,x)=>{const w=O.filterOperators.find(D=>D.value===x);return w||O.filterOperators[0]},g=y(()=>h(d.value,r.value)),f=(O,x)=>O.inputOverride??x.inputType,b=y(()=>f(g.value,d.value)),A=y(()=>[{label:a("FILTER.QUERY_DROPDOWN_LABELS.AND"),value:"and",icon:On("span",{class:"i-lucide-ampersands !text-n-blue-text"})},{label:a("FILTER.QUERY_DROPDOWN_LABELS.OR"),value:"or",icon:On("span",{class:"i-woot-logic-or !text-n-blue-text"})}]),v=y(()=>[{id:!0,name:a("FILTER.ATTRIBUTE_LABELS.TRUE")},{id:!1,name:a("FILTER.ATTRIBUTE_LABELS.FALSE")}]),T=y(()=>TA(Ts({attributeKey:i.value,filterOperator:r.value,values:l.value}))),_=y(()=>b.value==="date"?"date":b.value==="number"?"number":"text"),N=O=>{const x=u(O),w=h(x,r.value),D=f(w,x);D==="multiSelect"?l.value=[]:["searchSelect","booleanSelect"].includes(D)?l.value={}:l.value="",r.value=w.value};return it([i,l,r],()=>{o.value=!1}),t({validate:()=>(o.value=!0,!T.value)}),(O,x)=>(p(),E("li",VSe,[m("div",{class:ae(["flex items-center gap-2 rounded-md",{"animate-wiggle":o.value&&T.value}])},[e.showQueryOperator?(p(),L(ar,{key:0,modelValue:c.value,"onUpdate:modelValue":x[0]||(x[0]=w=>c.value=w),variant:"faded","hide-icon":"",class:"text-sm",options:A.value},null,8,["modelValue","options"])):$("",!0),S(ar,{modelValue:i.value,"onUpdate:modelValue":[x[1]||(x[1]=w=>i.value=w),N],variant:"faded",options:e.filterTypes},null,8,["modelValue","options"]),S(ar,{modelValue:r.value,"onUpdate:modelValue":x[2]||(x[2]=w=>r.value=w),variant:"ghost",options:d.value.filterOperators},null,8,["modelValue","options"]),g.value.hasInput?(p(),E(ue,{key:1},[b.value==="multiSelect"?(p(),L(GSe,{key:0,modelValue:l.value,"onUpdate:modelValue":x[3]||(x[3]=w=>l.value=w),options:d.value.options},null,8,["modelValue","options"])):b.value==="searchSelect"?(p(),L(Mf,{key:1,modelValue:l.value,"onUpdate:modelValue":x[4]||(x[4]=w=>l.value=w),options:d.value.options},null,8,["modelValue","options"])):b.value==="booleanSelect"?(p(),L(Mf,{key:2,modelValue:l.value,"onUpdate:modelValue":x[5]||(x[5]=w=>l.value=w),"disable-search":"",options:v.value},null,8,["modelValue","options"])):(p(),L(Tt,{key:3,modelValue:l.value,"onUpdate:modelValue":x[6]||(x[6]=w=>l.value=w),type:_.value,class:"[&>input]:h-8 [&>input]:py-1.5 [&>input]:outline-offset-0",placeholder:C(a)("FILTER.INPUT_PLACEHOLDER")},null,8,["modelValue","type","placeholder"]))],64)):$("",!0),S(te,{sm:"",solid:"",slate:"",icon:"i-lucide-trash",class:"flex-shrink-0",onClick:x[7]||(x[7]=Ve(w=>s("remove"),["stop"]))})],2),o.value&&T.value?(p(),E("span",HSe,I(C(a)(`FILTER.ERRORS.${T.value}`)),1)):$("",!0)]))}},WSe={class:"z-40 max-w-3xl lg:w-[750px] overflow-visible w-full border border-n-weak bg-n-alpha-3 backdrop-blur-[100px] shadow-lg rounded-xl p-6 grid gap-6"},zSe={class:"text-base font-medium leading-6 text-n-slate-12"},YSe={key:0},jSe={class:"border-b border-n-weak pb-6"},KSe={class:"grid gap-4 list-none"},XSe={class:"flex gap-2 justify-between"},qSe={class:"flex gap-2"},ZSe={__name:"ConversationFilter",props:jt({isFolderView:{type:Boolean,default:!1},folderName:{type:String,default:""}},{modelValue:{type:Array,default:[]},modelModifiers:{}}),emits:jt(["applyFilter","updateFolder","close"],["update:modelValue"]),setup(e,{emit:t}){const n=e,s=t,{filterTypes:a}=LSe(),o=Xt(e,"modelValue"),i=j(n.folderName),l={attributeKey:"status",filterOperator:"equal_to",values:[],queryOperator:"and"},{t:r}=be(),c=rt(),u=()=>{o.value=[{...l}]},d=_=>{o.value.length===1?u():o.value.splice(_,1)},h=()=>{o.value.push({...l})},g=Ss("conditionsRef"),f=()=>g.value.every(_=>_.validate()),b=()=>{f()&&s("updateFolder",o.value,i.value)};function A(){f()&&(c.dispatch("setConversationFilters",Ts(JSON.parse(JSON.stringify(o.value)))),s("applyFilter",o.value),zt(ea.APPLY_FILTER,{appliedFilters:o.value.map(_=>({key:_.attributeKey,operator:_.filterOperator,queryOperator:_.queryOperator}))}))}const v=y(()=>n.isFolderView?r("FILTER.EDIT_CUSTOM_FILTER"):r("FILTER.TITLE"));Ar(()=>s("close"));const T=[()=>s("close"),{ignore:["#toggleConversationFilterButton"]}];return(_,N)=>re((p(),E("div",WSe,[m("h3",zSe,I(v.value),1),n.isFolderView?(p(),E("div",YSe,[m("div",jSe,[S(Tt,{modelValue:i.value,"onUpdate:modelValue":N[0]||(N[0]=R=>i.value=R),label:C(r)("FILTER.FOLDER_LABEL"),placeholder:C(r)("FILTER.INPUT_PLACEHOLDER")},null,8,["modelValue","label","placeholder"])])])):$("",!0),m("ul",KSe,[(p(!0),E(ue,null,Ae(o.value,(R,O)=>(p(),E(ue,{key:R.id},[O===0?(p(),L(Zd,{ref_for:!0,ref_key:"conditionsRef",ref:g,key:`filter-${R.attributeKey}-0`,"attribute-key":R.attributeKey,"onUpdate:attributeKey":x=>R.attributeKey=x,"filter-operator":R.filterOperator,"onUpdate:filterOperator":x=>R.filterOperator=x,values:R.values,"onUpdate:values":x=>R.values=x,"filter-types":C(a),"show-query-operator":!1,onRemove:x=>d(O)},null,8,["attribute-key","onUpdate:attributeKey","filter-operator","onUpdate:filterOperator","values","onUpdate:values","filter-types","onRemove"])):(p(),L(Zd,{key:`filter-${R.attributeKey}-${O}`,ref_for:!0,ref_key:"conditionsRef",ref:g,"attribute-key":R.attributeKey,"onUpdate:attributeKey":x=>R.attributeKey=x,"filter-operator":R.filterOperator,"onUpdate:filterOperator":x=>R.filterOperator=x,"query-operator":o.value[O-1].queryOperator,"onUpdate:queryOperator":x=>o.value[O-1].queryOperator=x,values:R.values,"onUpdate:values":x=>R.values=x,"show-query-operator":"","filter-types":C(a),onRemove:x=>d(O)},null,8,["attribute-key","onUpdate:attributeKey","filter-operator","onUpdate:filterOperator","query-operator","onUpdate:queryOperator","values","onUpdate:values","filter-types","onRemove"]))],64))),128))]),m("div",XSe,[S(te,{sm:"",ghost:"",blue:"",onClick:h},{default:Y(()=>[xe(I(_.$t("FILTER.ADD_NEW_FILTER")),1)]),_:1}),m("div",qSe,[S(te,{sm:"",faded:"",slate:"",onClick:u},{default:Y(()=>[xe(I(C(r)("FILTER.CLEAR_BUTTON_LABEL")),1)]),_:1}),e.isFolderView?(p(),L(te,{key:0,sm:"",solid:"",blue:"",disabled:!i.value,onClick:b},{default:Y(()=>[xe(I(C(r)("FILTER.UPDATE_BUTTON_LABEL")),1)]),_:1},8,["disabled"])):(p(),L(te,{key:1,sm:"",solid:"",blue:"",onClick:A},{default:Y(()=>[xe(I(C(r)("FILTER.SUBMIT_BUTTON_LABEL")),1)]),_:1}))])])])),[[C(ms),T]])}},QSe={components:{NextButton:te,NextInput:Tt},directives:{onClickOutside:ms},props:{filterType:{type:Number,default:0},customViewsQuery:{type:Object,default:()=>{}},openLastSavedItem:{type:Function,default:()=>{}}},emits:["close"],setup(){return{v$:bt()}},data(){return{show:!0,name:""}},computed:{isButtonDisabled(){return this.v$.name.$invalid}},validations:{name:{required:Ye,minLength:en(1)}},methods:{onClose(){this.$emit("close")},async saveCustomViews(){if(this.v$.$touch(),!this.v$.$invalid){try{await this.$store.dispatch("customViews/create",{name:this.name,filter_type:this.filterType,query:this.customViewsQuery}),this.alertMessage=this.filterType===0?this.$t("FILTER.CUSTOM_VIEWS.ADD.API_FOLDERS.SUCCESS_MESSAGE"):this.$t("FILTER.CUSTOM_VIEWS.ADD.API_SEGMENTS.SUCCESS_MESSAGE"),this.onClose(),zt(gl.SAVE_FILTER,{type:this.filterType===0?"folder":"segment"})}catch(e){const t=e==null?void 0:e.message;this.alertMessage=t||this.filterType===0?t:this.$t("FILTER.CUSTOM_VIEWS.ADD.API_SEGMENTS.ERROR_MESSAGE")}finally{ne(this.alertMessage)}this.openLastSavedItem()}}}},JSe={class:"z-40 max-w-3xl lg:w-[500px] overflow-visible w-full border border-n-weak bg-n-alpha-3 backdrop-blur-[100px] shadow-lg rounded-xl p-6 grid gap-6"},e0e={class:"text-base font-medium leading-6 text-n-slate-12"},t0e={class:"flex flex-row justify-end w-full gap-2"};function n0e(e,t,n,s,a,o){const i=W("NextInput"),l=W("NextButton"),r=Qe("on-click-outside");return re((p(),E("div",JSe,[m("h3",e0e,I(e.$t("FILTER.CUSTOM_VIEWS.ADD.TITLE")),1),m("form",{class:"w-full grid gap-6",onSubmit:t[1]||(t[1]=Ve((...c)=>o.saveCustomViews&&o.saveCustomViews(...c),["prevent"]))},[S(i,{modelValue:a.name,"onUpdate:modelValue":t[0]||(t[0]=c=>a.name=c),placeholder:e.$t("FILTER.CUSTOM_VIEWS.ADD.PLACEHOLDER"),message:s.v$.name.$error&&e.$t("FILTER.CUSTOM_VIEWS.ADD.ERROR_MESSAGE"),"message-type":s.v$.name.$error&&"error",onBlur:s.v$.name.$touch},null,8,["modelValue","placeholder","message","message-type","onBlur"]),m("div",t0e,[S(l,{faded:"",slate:"",sm:"",onClick:Ve(o.onClose,["prevent"])},{default:Y(()=>[xe(I(e.$t("FILTER.CUSTOM_VIEWS.ADD.CANCEL_BUTTON")),1)]),_:1},8,["onClick"]),S(l,{solid:"",blue:"",sm:"",disabled:o.isButtonDisabled},{default:Y(()=>[xe(I(e.$t("FILTER.CUSTOM_VIEWS.ADD.SAVE_BUTTON")),1)]),_:1},8,["disabled"])])],32)])),[[r,[()=>e.$emit("close"),{ignore:["#saveFilterTeleportTarget"]}]]])}const s0e=De(QSe,[["render",n0e]]),a0e={__name:"ChatTypeTabs",props:{items:{type:Array,default:()=>[]},activeTab:{type:String,default:yt.ASSIGNEE_TYPE.ME}},emits:["chatTabChange"],setup(e,{emit:t}){const n=e,s=t,a=y(()=>n.items.findIndex(l=>l.key===n.activeTab)),o=l=>{if(l>=0&&l<n.items.length){const r=n.items[l];r.key!==n.activeTab&&s("chatTabChange",r.key)}};return Os({"Alt+KeyN":{action:()=>{if(n.activeTab===yt.ASSIGNEE_TYPE.ALL)o(0);else{const l=(a.value+1)%n.items.length;o(l)}}}}),(l,r)=>{const c=W("woot-tabs-item"),u=W("woot-tabs");return p(),L(u,{index:a.value,class:"w-full px-3 -mt-1 py-0 [&_ul]:p-0",onChange:o},{default:Y(()=>[(p(!0),E(ue,null,Ae(e.items,(d,h)=>(p(),L(c,{key:d.key,class:"text-sm [&_a]:font-medium",index:h,name:d.name,count:d.count,"is-compact":""},null,8,["index","name","count"]))),128))]),_:1},8,["index"])}}},o0e=(e,t)=>e&&t?e.created_at>=t.created_at?e:t:e||t,i0e=(e=[])=>{const t=[];return e.forEach(n=>{n.source_id?t.findIndex(a=>n.source_id===a.source_id)<0&&t.push(n):t.push(n)}),t},l0e=e=>{const t=e.messages[e.messages.length-1],n=e.messages.filter(o=>o.message_type!==2),s=n[n.length-1],a=e.last_non_activity_message;return!s&&!a?t:o0e(s,a)},r0e=(e,t)=>e.filter(n=>n.created_at*1e3<=t*1e3),c0e=(e,t)=>e.filter(n=>n.created_at*1e3>t*1e3),ma={IN_PROGRESS:"in-progress",RINGING:"ringing",NO_ANSWER:"no-answer",BUSY:"busy",FAILED:"failed",COMPLETED:"completed",CANCELED:"canceled"},u0e={OUTBOUND:"outbound"};function II(e,t){const n=y(()=>{var h;return(h=C(e))==null?void 0:h.toString()}),s=y(()=>{var h;return(h=C(t))==null?void 0:h.toString()}),a=y(()=>[ma.NO_ANSWER,ma.BUSY,ma.FAILED].includes(n.value)),o=y(()=>[ma.COMPLETED,ma.CANCELED].includes(n.value)),i=y(()=>s.value===u0e.OUTBOUND),l=y(()=>{const h=n.value;return h===ma.IN_PROGRESS?i.value?"CONVERSATION.VOICE_CALL.OUTGOING_CALL":"CONVERSATION.VOICE_CALL.CALL_IN_PROGRESS":h===ma.RINGING?i.value?"CONVERSATION.VOICE_CALL.OUTGOING_CALL":"CONVERSATION.VOICE_CALL.INCOMING_CALL":h===ma.NO_ANSWER?"CONVERSATION.VOICE_CALL.MISSED_CALL":a.value?"CONVERSATION.VOICE_CALL.NO_ANSWER":o.value?"CONVERSATION.VOICE_CALL.CALL_ENDED":"CONVERSATION.VOICE_CALL.INCOMING_CALL"}),r=y(()=>{const h=n.value;return h===ma.RINGING?"CONVERSATION.VOICE_CALL.NOT_ANSWERED_YET":h===ma.IN_PROGRESS?i.value?"CONVERSATION.VOICE_CALL.THEY_ANSWERED":"CONVERSATION.VOICE_CALL.YOU_ANSWERED":a.value?"CONVERSATION.VOICE_CALL.NO_ANSWER":o.value?"CONVERSATION.VOICE_CALL.CALL_ENDED":"CONVERSATION.VOICE_CALL.NOT_ANSWERED_YET"}),c=y(()=>n.value===ma.IN_PROGRESS?i.value?"i-ph-phone-outgoing-fill":"i-ph-phone-incoming-fill":a.value?"i-ph-phone-x-fill":i.value?"i-ph-phone-outgoing-fill":"i-ph-phone-incoming-fill"),u=y(()=>n.value===ma.IN_PROGRESS?"bg-n-teal-9":a.value?"bg-n-ruby-9":o.value?"bg-n-slate-11":"bg-n-teal-9 animate-pulse"),d=y(()=>{const h=n.value;return h===ma.IN_PROGRESS||h===ma.RINGING?"text-n-teal-9":a.value?"text-n-ruby-9":o.value?"text-n-slate-11":"text-n-teal-9"});return{status:n,labelKey:l,subtextKey:r,bubbleIconName:c,bubbleIconBg:u,listIconColor:d}}const d0e={name:"MessagePreview",props:{message:{type:Object,required:!0},showMessageType:{type:Boolean,default:!0},defaultEmptyMessage:{type:String,default:""}},setup(){const{getPlainText:e}=sa();return{getPlainText:e}},computed:{messageByAgent(){const{message_type:e}=this.message;return e===Dv.OUTGOING},isMessageAnActivity(){const{message_type:e}=this.message;return e===Dv.ACTIVITY},isMessagePrivate(){const{private:e}=this.message;return e},parsedLastMessage(){const{content_attributes:e}=this.message,{email:{subject:t}={}}=e||{};return this.getPlainText(t||this.message.content)},lastMessageFileType(){const[{file_type:e}={}]=this.message.attachments;return e},attachmentIcon(){return CN[this.lastMessageFileType]},attachmentMessageContent(){return`CHAT_LIST.ATTACHMENTS.${this.lastMessageFileType}.CONTENT`},isMessageSticker(){return this.message&&this.message.content_type==="sticker"}}},p0e={class:"overflow-hidden text-ellipsis whitespace-nowrap"},m0e={key:1},h0e={key:2},f0e={key:3},g0e={key:4};function _0e(e,t,n,s,a,o){const i=W("fluent-icon");return p(),E("div",p0e,[n.showMessageType?(p(),E(ue,{key:0},[o.isMessagePrivate?(p(),L(i,{key:0,size:"16",class:"-mt-0.5 align-middle text-n-slate-11 inline-block",icon:"lock-closed"})):o.messageByAgent?(p(),L(i,{key:1,size:"16",class:"-mt-0.5 align-middle text-n-slate-11 inline-block",icon:"arrow-reply"})):o.isMessageAnActivity?(p(),L(i,{key:2,size:"16",class:"-mt-0.5 align-middle text-n-slate-11 inline-block",icon:"info"})):$("",!0)],64)):$("",!0),n.message.content&&o.isMessageSticker?(p(),E("span",m0e,[S(i,{size:"16",class:"-mt-0.5 align-middle inline-block text-n-slate-11",icon:"image"}),xe(" "+I(e.$t("CHAT_LIST.ATTACHMENTS.image.CONTENT")),1)])):n.message.content?(p(),E("span",h0e,I(o.parsedLastMessage),1)):n.message.attachments?(p(),E("span",f0e,[o.attachmentIcon&&n.showMessageType?(p(),L(i,{key:0,size:"16",class:"-mt-0.5 align-middle inline-block text-n-slate-11",icon:o.attachmentIcon},null,8,["icon"])):$("",!0),xe(" "+I(e.$t(`${o.attachmentMessageContent}`)),1)])):(p(),E("span",g0e,I(n.defaultEmptyMessage||e.$t("CHAT_LIST.NO_CONTENT")),1))])}const CI=De(d0e,[["render",_0e]]),v0e={class:"flex items-center text-n-slate-11 text-xs min-w-0"},E0e={class:"truncate"},j_={__name:"InboxName",props:{inbox:{type:Object,default:()=>{}}},setup(e){return(t,n)=>(p(),E("div",v0e,[S(hg,{inbox:e.inbox,class:"size-3 ltr:mr-1 rtl:ml-1 flex-shrink-0"},null,8,["inbox"]),m("span",E0e,I(e.inbox.name),1)]))}},zh=(e,t)=>e.filter(n=>n.availability_status===t).sort((n,s)=>n.name.localeCompare(s.name)),NI=e=>{const t=zh(e,"online"),n=zh(e,"busy"),s=zh(e,"offline");return[...t,...n,...s]},OI=(e,t,n)=>e.map(a=>a.id===t.id?{...a,availability_status:t.accounts.find(o=>o.id===n).availability_status}:a),b0e={class:"menu text-n-slate-12 min-h-7 min-w-0",role:"button"},T0e={class:"menu-label truncate min-w-0 flex-1"},S0e={__name:"menuItem",props:{option:{type:Object,default:()=>{}},variant:{type:String,default:"default"}},setup(e){return(t,n)=>{const s=W("fluent-icon");return p(),E("div",b0e,[e.variant==="icon"&&e.option.icon?(p(),L(s,{key:0,icon:e.option.icon,size:"14",class:"flex-shrink-0"},null,8,["icon"])):$("",!0),e.variant==="label"&&e.option.color?(p(),E("span",{key:1,class:"label-pill flex-shrink-0",style:Zt({backgroundColor:e.option.color})},null,4)):$("",!0),e.variant==="agent"?(p(),L(kt,{key:2,name:e.option.label,src:e.option.thumbnail,status:e.option.status==="online"?e.option.status:null,size:20,class:"flex-shrink-0"},null,8,["name","src","status"])):$("",!0),m("p",T0e,I(e.option.label),1)])}}},K_=De(S0e,[["__scopeId","data-v-55c4b462"]]),A0e={class:"flex items-center h-4"},y0e={class:"my-0 mx-2 text-xs"},I0e={__name:"menuItemWithSubmenu",props:{option:{type:Object,default:()=>{}},subMenuAvailable:{type:Boolean,default:!0}},setup(e){const t=Ss("menuRef"),{width:n,height:s}=Di(),{bottom:a,right:o}=pr(t),i=y(()=>s.value-a.value<240?"bottom-0":"top-0"),l=y(()=>n.value-o.value<240?"right-full":"left-full"),r=y(()=>[i.value,l.value]);return(c,u)=>{const d=W("fluent-icon");return p(),E("div",{ref_key:"menuRef",ref:t,class:ae(["text-n-slate-12 menu-with-submenu min-width-calc w-full p-1 flex items-center h-7 rounded-md relative bg-n-alpha-3/50 backdrop-blur-[100px] justify-between hover:bg-n-brand/10 cursor-pointer dark:hover:bg-n-solid-3",e.subMenuAvailable?"":"opacity-50 cursor-not-allowed"])},[m("div",A0e,[S(d,{icon:e.option.icon,size:"14",class:"menu-icon"},null,8,["icon"]),m("p",y0e,I(e.option.label),1)]),S(d,{icon:"chevron-right",size:"12"}),e.subMenuAvailable?(p(),E("div",{key:0,class:ae(["submenu bg-n-alpha-3 backdrop-blur-[100px] p-1 shadow-lg rounded-md absolute hidden max-h-[15rem] overflow-y-auto overflow-x-hidden cursor-pointer",r.value])},[We(c.$slots,"default",{},void 0,!0)],2)):$("",!0)],2)}}},C0e=De(I0e,[["__scopeId","data-v-c3eeeb11"]]),N0e={components:{Spinner:Ls}},O0e={class:"agent-placeholder"};function R0e(e,t,n,s,a,o){const i=W("Spinner");return p(),E("div",O0e,[S(i),m("p",null,I(e.$t("CONVERSATION.CARD_CONTEXT_MENU.AGENTS_LOADING")),1)])}const x0e=De(N0e,[["render",R0e],["__scopeId","data-v-b4c6c347"]]),di={MARK_AS_READ:"mark-as-read",MARK_AS_UNREAD:"mark-as-unread",PRIORITY:"priority",STATUS:"status",SNOOZE:"snooze",AGENT:"agent",TEAM:"team",LABEL:"label",DELETE:"delete",OPEN_NEW_TAB:"open-new-tab",COPY_LINK:"copy-link"},w0e={components:{MenuItem:K_,MenuItemWithSubmenu:C0e,AgentLoadingPlaceholder:x0e},props:{chatId:{type:Number,default:null},status:{type:String,default:""},hasUnreadMessages:{type:Boolean,default:!1},inboxId:{type:Number,default:null},priority:{type:String,default:null},conversationUrl:{type:String,default:""},allowedOptions:{type:Array,default:()=>[]}},emits:["updateConversation","assignPriority","markAsUnread","markAsRead","assignAgent","assignTeam","assignLabel","deleteConversation","close"],setup(){const{isAdmin:e}=za();return{isAdmin:e}},data(){return{MENU:di,STATUS_TYPE:yt.STATUS_TYPE,readOption:{label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.MARK_AS_READ"),icon:"mail"},unreadOption:{label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.MARK_AS_UNREAD"),icon:"mail-unread"},statusMenuConfig:[{key:yt.STATUS_TYPE.RESOLVED,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.RESOLVED"),icon:"checkmark"},{key:yt.STATUS_TYPE.OPEN,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.REOPEN"),icon:"arrow-redo"},{key:yt.STATUS_TYPE.PENDING,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.PENDING"),icon:"book-clock"}],snoozeOption:{key:yt.STATUS_TYPE.SNOOZED,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.SNOOZE.TITLE"),icon:"snooze"},priorityConfig:{key:di.PRIORITY,label:this.$t("CONVERSATION.PRIORITY.TITLE"),icon:"warning",options:[{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.NONE"),key:null},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.URGENT"),key:"urgent"},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.HIGH"),key:"high"},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.MEDIUM"),key:"medium"},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.LOW"),key:"low"}].filter(e=>e.key!==this.priority)},labelMenuConfig:{key:di.LABEL,icon:"tag",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.ASSIGN_LABEL")},agentMenuConfig:{key:di.AGENT,icon:"person-add",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.ASSIGN_AGENT")},teamMenuConfig:{key:di.TEAM,icon:"people-team-add",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.ASSIGN_TEAM")},deleteOption:{key:di.DELETE,icon:"delete",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.DELETE")},openInNewTabOption:{key:di.OPEN_NEW_TAB,icon:"open",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.OPEN_IN_NEW_TAB")},copyLinkOption:{key:di.COPY_LINK,icon:"copy",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.COPY_LINK")}}},computed:{...mt({labels:"labels/getLabels",teams:"teams/getTeams",assignableAgentsUiFlags:"inboxAssignableAgents/getUIFlags",currentUser:"getCurrentUser",currentAccountId:"getCurrentAccountId"}),filteredAgentOnAvailability(){const e=this.$store.getters["inboxAssignableAgents/getAssignableAgents"](this.inboxId),t=OI(e,this.currentUser,this.currentAccountId);return NI(t)},assignableAgents(){return[{confirmed:!0,name:"None",id:null,role:"agent",account_id:0,email:"None"},...this.filteredAgentOnAvailability]},showSnooze(){return this.status===yt.STATUS_TYPE.OPEN}},mounted(){this.$store.dispatch("inboxAssignableAgents/fetch",[this.inboxId])},methods:{isAllowed(e){return this.allowedOptions.length?e.some(t=>this.allowedOptions.includes(t)):!0},toggleStatus(e,t){this.$emit("updateConversation",e,t)},async snoozeConversation(){await this.$store.dispatch("setContextMenuChatId",this.chatId),document.querySelector("ninja-keys").open({parent:"snooze_conversation"})},assignPriority(e){this.$emit("assignPriority",e)},deleteConversation(){this.$emit("deleteConversation",this.chatId)},openInNewTab(){if(!this.conversationUrl)return;const e=`${window.chatwootConfig.hostURL}${this.conversationUrl}`;window.open(e,"_blank","noopener,noreferrer"),this.$emit("close")},async copyConversationLink(){if(this.conversationUrl)try{const e=`${window.chatwootConfig.hostURL}${this.conversationUrl}`;await _a(e),ne(this.$t("CONVERSATION.CARD_CONTEXT_MENU.COPY_LINK_SUCCESS")),this.$emit("close")}catch{}},show(e){return this.status!==e},generateMenuLabelConfig(e,t="text"){return{key:e.id,...t==="icon"&&{icon:e.icon},...t==="label"&&{color:e.color},...t==="agent"&&{thumbnail:e.thumbnail},...t==="agent"&&{status:e.availability_status},...t==="text"&&{label:e.label},...t==="label"&&{label:e.title},...t==="agent"&&{label:e.name},...t==="team"&&{label:e.name}}}}},$0e={class:"p-1 rounded-md shadow-xl bg-n-alpha-3/50 backdrop-blur-[100px] outline-1 outline outline-n-weak/50"};function M0e(e,t,n,s,a,o){const i=W("MenuItem"),l=W("MenuItemWithSubmenu"),r=W("AgentLoadingPlaceholder");return p(),E("div",$0e,[o.isAllowed([a.MENU.MARK_AS_READ,a.MENU.MARK_AS_UNREAD])?(p(),E(ue,{key:0},[n.hasUnreadMessages?(p(),L(i,{key:1,option:a.readOption,variant:"icon",onClick:t[1]||(t[1]=Ve(c=>e.$emit("markAsRead"),["stop"]))},null,8,["option"])):(p(),L(i,{key:0,option:a.unreadOption,variant:"icon",onClick:t[0]||(t[0]=Ve(c=>e.$emit("markAsUnread"),["stop"]))},null,8,["option"])),t[3]||(t[3]=m("hr",{class:"m-1 rounded border-b border-n-weak dark:border-n-weak"},null,-1))],64)):$("",!0),o.isAllowed([a.MENU.STATUS,a.MENU.SNOOZE])?(p(),E(ue,{key:1},[(p(!0),E(ue,null,Ae(a.statusMenuConfig,c=>(p(),E(ue,null,[o.show(c.key)&&o.isAllowed([a.MENU.STATUS])?(p(),L(i,{key:c.key,option:c,variant:"icon",onClick:Ve(u=>o.toggleStatus(c.key,null),["stop"])},null,8,["option","onClick"])):$("",!0)],64))),256)),o.showSnooze&&o.isAllowed([a.MENU.SNOOZE])?(p(),L(i,{key:0,option:a.snoozeOption,variant:"icon",onClick:t[2]||(t[2]=Ve(c=>o.snoozeConversation(),["stop"]))},null,8,["option"])):$("",!0),t[4]||(t[4]=m("hr",{class:"m-1 rounded border-b border-n-weak dark:border-n-weak"},null,-1))],64)):$("",!0),o.isAllowed([a.MENU.PRIORITY,a.MENU.LABEL,a.MENU.AGENT,a.MENU.TEAM])?(p(),E(ue,{key:2},[o.isAllowed([a.MENU.PRIORITY])?(p(),L(l,{key:0,option:a.priorityConfig},{default:Y(()=>[(p(!0),E(ue,null,Ae(a.priorityConfig.options,(c,u)=>(p(),L(i,{key:u,option:c,onClick:Ve(d=>o.assignPriority(c.key),["stop"])},null,8,["option","onClick"]))),128))]),_:1},8,["option"])):$("",!0),o.isAllowed([a.MENU.LABEL])?(p(),L(l,{key:1,option:a.labelMenuConfig,"sub-menu-available":!!e.labels.length},{default:Y(()=>[(p(!0),E(ue,null,Ae(e.labels,c=>(p(),L(i,{key:c.id,option:o.generateMenuLabelConfig(c,"label"),variant:"label",onClick:Ve(u=>e.$emit("assignLabel",c),["stop"])},null,8,["option","onClick"]))),128))]),_:1},8,["option","sub-menu-available"])):$("",!0),o.isAllowed([a.MENU.AGENT])?(p(),L(l,{key:2,option:a.agentMenuConfig,"sub-menu-available":!!o.assignableAgents.length},{default:Y(()=>[e.assignableAgentsUiFlags.isFetching?(p(),L(r,{key:0})):(p(!0),E(ue,{key:1},Ae(o.assignableAgents,c=>(p(),L(i,{key:c.id,option:o.generateMenuLabelConfig(c,"agent"),variant:"agent",onClick:Ve(u=>e.$emit("assignAgent",c),["stop"])},null,8,["option","onClick"]))),128))]),_:1},8,["option","sub-menu-available"])):$("",!0),o.isAllowed([a.MENU.TEAM])?(p(),L(l,{key:3,option:a.teamMenuConfig,"sub-menu-available":!!e.teams.length},{default:Y(()=>[(p(!0),E(ue,null,Ae(e.teams,c=>(p(),L(i,{key:c.id,option:o.generateMenuLabelConfig(c,"team"),onClick:Ve(u=>e.$emit("assignTeam",c),["stop"])},null,8,["option","onClick"]))),128))]),_:1},8,["option","sub-menu-available"])):$("",!0),t[5]||(t[5]=m("hr",{class:"m-1 rounded border-b border-n-weak dark:border-n-weak"},null,-1))],64)):$("",!0),o.isAllowed([a.MENU.OPEN_NEW_TAB,a.MENU.COPY_LINK])?(p(),E(ue,{key:3},[o.isAllowed([a.MENU.OPEN_NEW_TAB])?(p(),L(i,{key:0,option:a.openInNewTabOption,variant:"icon",onClick:Ve(o.openInNewTab,["stop"])},null,8,["option","onClick"])):$("",!0),o.isAllowed([a.MENU.COPY_LINK])?(p(),L(i,{key:1,option:a.copyLinkOption,variant:"icon",onClick:Ve(o.copyConversationLink,["stop"])},null,8,["option","onClick"])):$("",!0)],64)):$("",!0),s.isAdmin&&o.isAllowed([a.MENU.DELETE])?(p(),E(ue,{key:4},[t[6]||(t[6]=m("hr",{class:"m-1 rounded border-b border-n-weak dark:border-n-weak"},null,-1)),S(i,{option:a.deleteOption,variant:"icon",onClick:Ve(o.deleteConversation,["stop"])},null,8,["option","onClick"])],64)):$("",!0)])}const L0e=De(w0e,[["render",M0e]]),RI=6e4,ng=RI*60,Xu=ng*24,D0e={name:"TimeAgo",props:{isAutoRefreshEnabled:{type:Boolean,default:!0},lastActivityTimestamp:{type:[String,Date,Number],default:""},createdAtTimestamp:{type:[String,Date,Number],default:""}},data(){return{lastActivityAtTimeAgo:us(this.lastActivityTimestamp),createdAtTimeAgo:us(this.createdAtTimestamp),timer:null}},computed:{lastActivityTime(){return Lc(this.lastActivityAtTimeAgo)},createdAtTime(){return Lc(this.createdAtTimeAgo)},createdAt(){return Date.now()-this.createdAtTimestamp*1e3>Xu*30?`${this.$t("CHAT_LIST.CHAT_TIME_STAMP.CREATED.OLDEST")} ${Lv(this.createdAtTimestamp)}`:`${this.$t("CHAT_LIST.CHAT_TIME_STAMP.CREATED.LATEST")} ${this.createdAtTimeAgo}`},lastActivity(){return Date.now()-this.lastActivityTimestamp*1e3>Xu*30?`${this.$t("CHAT_LIST.CHAT_TIME_STAMP.LAST_ACTIVITY.NOT_ACTIVE")} ${Lv(this.lastActivityTimestamp)}`:`${this.$t("CHAT_LIST.CHAT_TIME_STAMP.LAST_ACTIVITY.ACTIVE")} ${this.lastActivityAtTimeAgo}`},tooltipText(){return`${this.createdAt}
              ${this.lastActivity}`}},watch:{lastActivityTimestamp(){this.lastActivityAtTimeAgo=us(this.lastActivityTimestamp)},createdAtTimestamp(){this.createdAtTimeAgo=us(this.createdAtTimestamp)}},mounted(){this.isAutoRefreshEnabled&&this.createTimer()},unmounted(){clearTimeout(this.timer)},methods:{createTimer(){this.timer=setTimeout(()=>{this.lastActivityAtTimeAgo=us(this.lastActivityTimestamp),this.createdAtTimeAgo=us(this.createdAtTimestamp),this.createTimer()},this.refreshTime())},refreshTime(){const e=Date.now()-this.lastActivityTimestamp*1e3;return e>Xu?Xu:e>ng?ng:RI}}},P0e={class:"ml-auto leading-4 text-xxs text-n-slate-10 hover:text-n-slate-11"};function k0e(e,t,n,s,a,o){const i=Qe("tooltip");return re((p(),E("div",P0e,[m("span",null,I(`${o.createdAtTime}  ${o.lastActivityTime}`),1)])),[[i,{content:o.tooltipText,delay:{show:1e3,hide:0},hideOnClick:!0},void 0,{top:!0}]])}const B0e=De(D0e,[["render",k0e]]),U0e={name:"PriorityMark",props:{priority:{type:String,default:"",validate:e=>[...Object.values(Js),""].includes(e)}},data(){return{CONVERSATION_PRIORITY:Js}},computed:{tooltipText(){return this.$t(`CONVERSATION.PRIORITY.OPTIONS.${this.priority.toUpperCase()}`)},isUrgent(){return this.priority===Js.URGENT}}};function F0e(e,t,n,s,a,o){const i=W("fluent-icon"),l=Qe("tooltip");return n.priority?re((p(),E("span",{key:0,class:ae(["shrink-0 rounded-sm inline-flex items-center justify-center w-3.5 h-3.5",{"bg-n-ruby-4 text-n-ruby-10":o.isUrgent,"bg-n-slate-4 text-n-slate-11":!o.isUrgent}])},[S(i,{icon:`priority-${n.priority.toLowerCase()}`,size:o.isUrgent?12:14,class:"flex-shrink-0","view-box":"0 0 14 14"},null,8,["icon","size"])],2)),[[l,{content:o.tooltipText,delay:{show:1500,hide:0},hideOnClick:!0}]]):$("",!0)}const G0e=De(U0e,[["render",F0e]]),V0e=6e4,xI={__name:"SLACardLabel",props:{chat:{type:Object,default:()=>({})},showExtendedInfo:{type:Boolean,default:!1},parentWidth:{type:Number,default:1e3}},setup(e){const t=e,{t:n}=be(),s=j(null),a=j({threshold:null,isSlaMissed:!1,type:null,icon:null}),o=y(()=>{var A;return(A=t.chat)==null?void 0:A.applied_sla}),i=y(()=>{var A;return(A=t.chat)==null?void 0:A.sla_events}),l=y(()=>{var A;return(A=a.value)==null?void 0:A.threshold}),r=y(()=>{var A;return(A=a.value)==null?void 0:A.isSlaMissed}),c=y(()=>r.value?"text-n-ruby-11":"text-n-amber-11"),u=y(()=>{var T,_;const A=(_=(T=a.value)==null?void 0:T.type)==null?void 0:_.toUpperCase(),v=r.value?"MISSED":"DUE";return n(`CONVERSATION.HEADER.SLA_STATUS.${A}`,{status:n(`CONVERSATION.HEADER.SLA_STATUS.${v}`)})}),d=y(()=>{var A;return t.showExtendedInfo&&((A=i.value)==null?void 0:A.length)>0}),h=y(()=>t.showExtendedInfo?"h-[26px] rounded-lg bg-n-alpha-1":"rounded h-5  border border-n-strong"),g=()=>{a.value=vS({appliedSla:o.value,chat:t.chat})},f=()=>{s.value=setTimeout(()=>{g(),f()},V0e)};it(()=>t.chat,()=>{g()});const b=y(()=>t.showExtendedInfo?"ltr:pr-1.5 rtl:pl-1.5 ltr:border-r rtl:border-l border-n-strong":"");return lt(()=>{g(),f()}),ei(()=>{s.value&&clearTimeout(s.value)}),(A,v)=>{const T=W("fluent-icon");return l.value?(p(),E("div",{key:0,class:ae(["relative flex items-center cursor-pointer min-w-fit group",h.value])},[m("div",{class:ae(["flex items-center w-full truncate px-1.5",e.showExtendedInfo?"":"gap-1"])},[m("div",{class:ae(["flex items-center gap-1",b.value])},[S(T,{size:"12",icon:a.value.icon,type:"outline","icon-lib":r.value?"lucide":"fluent",class:ae(["flex-shrink-0",c.value])},null,8,["icon","icon-lib","class"]),e.showExtendedInfo&&e.parentWidth>650?(p(),E("span",{key:0,class:ae(["text-xs font-medium",c.value])},I(u.value),3)):$("",!0)],2),m("span",{class:ae(["text-xs font-medium",[c.value,e.showExtendedInfo&&"ltr:pl-1.5 rtl:pr-1.5"]])},I(a.value.threshold),3)],2),d.value?(p(),L(lI,{key:0,"sla-missed-events":i.value,class:"start-0 xl:start-auto xl:end-0 top-7 hidden group-hover:flex"},null,8,["sla-missed-events"])):$("",!0)],2)):$("",!0)}}},X_={__name:"ContextMenu",props:{x:{type:Number,default:0},y:{type:Number,default:0}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,a=Ro("contextMenuElementTarget",null),o=Ss("menuRef"),i=y(()=>{var b;return a!=null&&a.value?(b=a.value)==null?void 0:b.$el:null}),l=GO(i),{width:r,height:c}=Di(),{width:u,height:d}=pr(o),h=(b,A,v,T,_,N)=>{let O=b,x=A;const w=O+v>_-16,D=x+T>N-16;return w&&(O=_-v-16),D&&(x=N-T-16),{left:Math.max(16,O),top:Math.max(16,x)}},g=y(()=>{if(!o.value)return{top:`${n.y}px`,left:`${n.x}px`};const{left:b,top:A}=h(n.x,n.y,u.value,d.value,r.value,c.value);return{top:`${A}px`,left:`${b}px`}});lt(()=>{l.value=!0,Wt(()=>{var b;return(b=o.value)==null?void 0:b.focus()})});const f=()=>{l.value=!1,s("close")};return ei(()=>{l.value=!1}),(b,A)=>(p(),L(Td,{to:"body"},{default:Y(()=>[m("div",{ref_key:"menuRef",ref:o,class:"fixed outline-none z-[9999] cursor-pointer",style:Zt(g.value),tabindex:"0",onBlur:f},[We(b.$slots,"default")],36)]),_:3}))}},H0e=["value","checked"],W0e={class:"px-0 py-3 border-b group-hover:border-transparent flex-1 border-n-slate-3 min-w-0"},z0e={key:0,class:"text-n-slate-11 text-xs font-medium leading-3 py-0.5 px-0 inline-flex items-center truncate"},Y0e={class:"mx-1"},j0e={class:"mx-0.5"},K0e={class:"ml-auto font-normal leading-4 text-xxs"},wI={__name:"ConversationCard",props:{activeLabel:{type:String,default:""},chat:{type:Object,default:()=>({})},hideInboxName:{type:Boolean,default:!1},hideThumbnail:{type:Boolean,default:!1},teamId:{type:[String,Number],default:0},foldersId:{type:[String,Number],default:0},showAssignee:{type:Boolean,default:!1},conversationType:{type:String,default:""},selected:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},enableContextMenu:{type:Boolean,default:!1},allowedContextMenuOptions:{type:Array,default:()=>[]}},emits:["contextMenuToggle","assignAgent","assignLabel","assignTeam","markAsUnread","markAsRead","assignPriority","updateConversationStatus","deleteConversation","selectConversation","deSelectConversation"],setup(e,{emit:t}){const n=e,s=t,a=Ft(),o=rt(),i=j(!1),l=j(!1),r=j({x:null,y:null}),c=_e("getSelectedChat"),u=_e("inboxes/getInboxes"),d=_e("getSelectedInbox"),h=_e("getCurrentAccountId"),g=y(()=>n.chat.meta||{}),f=y(()=>g.value.assignee||{}),b=y(()=>{var Ge;return(Ge=g.value.sender)==null?void 0:Ge.id}),A=y(()=>b.value?o.getters["contacts/getContact"](b.value):{}),v=y(()=>c.value.id===n.chat.id),T=y(()=>n.chat.unread_count),_=y(()=>T.value>0),N=y(()=>!d.value),R=y(()=>l0e(n.chat)),O=y(()=>{var Ge;return(Ge=n.chat.additional_attributes)==null?void 0:Ge.call_status}),x=y(()=>{var Ge;return(Ge=n.chat.additional_attributes)==null?void 0:Ge.call_direction}),{labelKey:w,listIconColor:D}=II(O,x),M=y(()=>n.chat.inbox_id),P=y(()=>M.value?o.getters["inboxes/getInbox"](M.value):{}),U=y(()=>!n.hideInboxName&&N.value&&u.value.length>1),F=y(()=>U.value||n.showAssignee&&f.value.name||n.chat.priority),k=y(()=>{var Ge;return(Ge=n.chat)==null?void 0:Ge.sla_policy_id}),B=y(()=>{var Ge;return((Ge=n.chat.labels)==null?void 0:Ge.length)>0||k.value}),V=y(()=>[_.value?"font-medium text-n-slate-12":"text-n-slate-11",!n.compact&&_.value?"ltr:pr-4 rtl:pl-4":"",n.compact&&_.value?"ltr:pr-6 rtl:pl-6":""]),G=y(()=>vt(bg({accountId:h.value,activeInbox:d.value,id:n.chat.id,label:n.activeLabel,teamId:n.teamId,conversationType:n.conversationType,foldersId:n.foldersId}))),K=Ge=>{const je=G.value;if(je){if(Ge.metaKey||Ge.ctrlKey){Ge.preventDefault(),window.open(`${window.chatwootConfig.hostURL}${je}`,"_blank","noopener,noreferrer");return}v.value||a.push({path:je})}},se=()=>{i.value=!n.hideThumbnail},ee=()=>{i.value=!1},X=Ge=>{s(Ge?"selectConversation":"deSelectConversation",n.chat.id,P.value.id)},z=Ge=>{n.enableContextMenu&&(Ge.preventDefault(),s("contextMenuToggle",!0),r.value.x=Ge.pageX||Ge.clientX,r.value.y=Ge.pageY||Ge.clientY,l.value=!0)},H=()=>{s("contextMenuToggle",!1),l.value=!1,r.value.x=null,r.value.y=null},q=(Ge,je)=>{H(),s("updateConversationStatus",n.chat.id,Ge,je)},J=Ge=>{s("assignAgent",Ge,[n.chat.id]),H()},de=Ge=>{s("assignLabel",[Ge.title],[n.chat.id]),H()},Te=Ge=>{s("assignTeam",Ge,n.chat.id),H()},ce=()=>{s("markAsUnread",n.chat.id),H()},Ne=()=>{s("markAsRead",n.chat.id),H()},Me=Ge=>{s("assignPriority",Ge,n.chat.id),H()},Fe=()=>{s("deleteConversation",n.chat.id),H()};return(Ge,je)=>{const Ze=W("fluent-icon");return p(),E("div",{class:ae(["relative flex items-start flex-grow-0 flex-shrink-0 w-auto max-w-full py-0 border-t-0 border-b-0 border-l-0 border-r-0 border-transparent border-solid cursor-pointer conversation hover:bg-n-alpha-1 dark:hover:bg-n-alpha-3 group",{"active animate-card-select bg-n-alpha-1 dark:bg-n-alpha-3 border-n-weak":v.value,"bg-n-slate-2 dark:bg-n-slate-3":e.selected,"px-0":e.compact,"px-3":!e.compact}]),onClick:K,onContextmenu:je[2]||(je[2]=nt=>z(nt))},[m("div",{class:"relative",onMouseenter:se,onMouseleave:ee},[e.hideThumbnail?$("",!0):(p(),L(kt,{key:0,name:A.value.name,src:A.value.thumbnail,size:32,status:A.value.availability_status,class:ae(U.value?"mt-8":"mt-4"),"hide-offline-status":"","rounded-full":""},{overlay:Y(({size:nt})=>[i.value||e.selected?(p(),E("label",{key:0,class:"flex items-center justify-center rounded-full cursor-pointer absolute inset-0 z-10 backdrop-blur-[2px]",style:Zt({width:`${nt}px`,height:`${nt}px`}),onClick:je[1]||(je[1]=Ve(()=>{},["stop"]))},[m("input",{value:e.selected,checked:e.selected,class:"!m-0 cursor-pointer",type:"checkbox",onChange:je[0]||(je[0]=st=>X(st.target.checked))},null,40,H0e)],4)):$("",!0)]),_:1},8,["name","src","status","class"]))],32),m("div",W0e,[F.value?(p(),E("div",{key:0,class:ae(["flex items-center min-w-0 gap-1",{"ltr:ml-2 rtl:mr-2":!e.compact,"mx-2":e.compact}])},[U.value?(p(),L(j_,{key:0,inbox:P.value,class:"flex-1 min-w-0"},null,8,["inbox"])):$("",!0),m("div",{class:ae(["flex items-center gap-2 flex-shrink-0",{"flex-1 justify-between":!U.value}])},[e.showAssignee&&f.value.name?(p(),E("span",z0e,[S(Ze,{icon:"person",size:"12",class:"text-n-slate-11"}),xe(" "+I(f.value.name),1)])):$("",!0),S(G0e,{priority:e.chat.priority,class:"flex-shrink-0"},null,8,["priority"])],2)],2)):$("",!0),m("h4",{class:ae(["conversation--user text-sm my-0 mx-2 capitalize pt-0.5 text-ellipsis overflow-hidden whitespace-nowrap flex-1 min-w-0 ltr:pr-16 rtl:pl-16 text-n-slate-12",_.value?"font-semibold":"font-medium"])},I(A.value.name),3),O.value?(p(),E("div",{key:"voice-status-row",class:ae(["my-0 mx-2 leading-6 h-6 flex-1 min-w-0 text-sm overflow-hidden text-ellipsis whitespace-nowrap",V.value])},[m("span",{class:ae(["inline-block -mt-0.5 align-middle text-[16px] i-ph-phone-incoming",[C(D)]])},null,2),m("span",Y0e,I(Ge.$t(C(w))),1)],2)):R.value?(p(),L(CI,{key:"message-preview",message:R.value,class:ae(["my-0 mx-2 leading-6 h-6 flex-1 min-w-0 text-sm",V.value])},null,8,["message","class"])):(p(),E("p",{key:"no-messages",class:ae(["text-n-slate-11 text-sm my-0 mx-2 leading-6 h-6 flex-1 min-w-0 overflow-hidden text-ellipsis whitespace-nowrap",V.value])},[S(Ze,{size:"16",class:"-mt-0.5 align-middle inline-block text-n-slate-10",icon:"info"}),m("span",j0e,I(Ge.$t("CHAT_LIST.NO_MESSAGES")),1)],2)),m("div",{class:ae(["absolute flex flex-col ltr:right-3 rtl:left-3",F.value?"top-8":"top-4"])},[m("span",K0e,[S(B0e,{"last-activity-timestamp":e.chat.timestamp,"created-at-timestamp":e.chat.created_at},null,8,["last-activity-timestamp","created-at-timestamp"])]),m("span",{class:ae(["shadow-lg rounded-full text-xxs font-semibold h-4 leading-4 ltr:ml-auto rtl:mr-auto mt-1 min-w-[1rem] px-1 py-0 text-center text-white bg-n-teal-9",_.value?"block":"hidden"])},I(T.value>9?"9+":T.value),3)],2),B.value?(p(),L(iI,{key:4,"conversation-labels":e.chat.labels,class:"mt-0.5 mx-2 mb-0"},co({_:2},[k.value?{name:"before",fn:Y(()=>[S(xI,{chat:e.chat,class:"ltr:mr-1 rtl:ml-1"},null,8,["chat"])]),key:"0"}:void 0]),1032,["conversation-labels"])):$("",!0)]),l.value?(p(),L(X_,{key:0,x:r.value.x,y:r.value.y,onClose:H},{default:Y(()=>[S(L0e,{status:e.chat.status,"inbox-id":P.value.id,priority:e.chat.priority,"chat-id":e.chat.id,"has-unread-messages":_.value,"conversation-url":G.value,"allowed-options":e.allowedContextMenuOptions,onUpdateConversation:q,onAssignAgent:J,onAssignLabel:de,onAssignTeam:Te,onMarkAsUnread:ce,onMarkAsRead:Ne,onAssignPriority:Me,onDeleteConversation:Fe,onClose:H},null,8,["status","inbox-id","priority","chat-id","has-unread-messages","conversation-url","allowed-options"])]),_:1},8,["x","y"])):$("",!0)],34)}}},X0e={components:{ConversationCard:wI},inject:["selectConversation","deSelectConversation","assignAgent","assignTeam","assignLabels","updateConversationStatus","toggleContextMenu","markAsUnread","markAsRead","assignPriority","isConversationSelected","deleteConversation"],props:{source:{type:Object,required:!0},teamId:{type:[String,Number],default:0},label:{type:String,default:""},conversationType:{type:String,default:""},foldersId:{type:[String,Number],default:0},showAssignee:{type:Boolean,default:!1}}};function q0e(e,t,n,s,a,o){const i=W("ConversationCard");return p(),L(i,{key:n.source.id,"active-label":n.label,"team-id":n.teamId,"folders-id":n.foldersId,chat:n.source,"conversation-type":n.conversationType,selected:o.isConversationSelected(n.source.id),"show-assignee":n.showAssignee,"enable-context-menu":"",onSelectConversation:o.selectConversation,onDeSelectConversation:o.deSelectConversation,onAssignAgent:o.assignAgent,onAssignTeam:o.assignTeam,onAssignLabel:o.assignLabels,onUpdateConversationStatus:o.updateConversationStatus,onContextMenuToggle:o.toggleContextMenu,onMarkAsUnread:o.markAsUnread,onMarkAsRead:o.markAsRead,onAssignPriority:o.assignPriority,onDeleteConversation:o.deleteConversation},null,8,["active-label","team-id","folders-id","chat","conversation-type","selected","show-assignee","onSelectConversation","onDeSelectConversation","onAssignAgent","onAssignTeam","onAssignLabel","onUpdateConversationStatus","onContextMenuToggle","onMarkAsUnread","onMarkAsRead","onAssignPriority","onDeleteConversation"])}const Z0e=De(X0e,[["render",q0e]]),Q0e={props:{show:{type:Boolean,default:!1},activeCustomView:{type:Object,default:()=>{}},customViewsId:{type:[String,Number],default:0},activeFilterType:{type:Number,default:0},openLastItemAfterDelete:{type:Function,default:()=>{}}},emits:["close","update:show"],computed:{localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}},activeCustomViews(){return this.activeFilterType===0?"conversation":this.activeFilterType===1?"contact":""},deleteMessage(){return` ${this.activeCustomView&&this.activeCustomView.name}?`},deleteConfirmText(){return`${this.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.YES")}`},deleteRejectText(){return`${this.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.NO")}`},isFolderSection(){return this.activeFilterType===0&&this.$route.name!=="home"},isSegmentSection(){return this.activeFilterType===1&&this.$route.name!=="contacts_dashboard"}},methods:{async deleteSavedCustomViews(){var e;try{const t=Number(this.customViewsId),n=this.activeCustomViews;await this.$store.dispatch("customViews/delete",{id:t,filterType:n}),this.closeDeletePopup(),ne(this.activeFilterType===0?this.$t("FILTER.CUSTOM_VIEWS.DELETE.API_FOLDERS.SUCCESS_MESSAGE"):this.$t("FILTER.CUSTOM_VIEWS.DELETE.API_SEGMENTS.SUCCESS_MESSAGE")),zt(gl.DELETE_FILTER,{type:this.filterType===0?"folder":"segment"})}catch(t){const n=(e=t==null?void 0:t.response)!=null&&e.message||this.activeFilterType===0?this.$t("FILTER.CUSTOM_VIEWS.DELETE.API_FOLDERS.SUCCESS_MESSAGE"):this.$t("FILTER.CUSTOM_VIEWS.DELETE.API_SEGMENTS.SUCCESS_MESSAGE");ne(n)}this.openLastItemAfterDelete()},closeDeletePopup(){this.$emit("close")}}};function J0e(e,t,n,s,a,o){const i=W("woot-delete-modal");return p(),E("div",null,[o.localShow?(p(),L(i,{key:0,show:o.localShow,"onUpdate:show":t[0]||(t[0]=l=>o.localShow=l),"on-close":o.closeDeletePopup,"on-confirm":o.deleteSavedCustomViews,title:e.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.TITLE"),message:e.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.MESSAGE"),"message-value":o.deleteMessage,"confirm-text":o.deleteConfirmText,"reject-text":o.deleteRejectText},null,8,["show","on-close","on-confirm","title","message","message-value","confirm-text","reject-text"])):$("",!0)])}const eAe=De(Q0e,[["render",J0e]]),qu=yt.SNOOZE_OPTIONS,tAe=e=>{const t=R0(mD(e,1));return $0(t)?t:Wc(t,{days:(8-t.getDay())%7})},nAe=e=>{const t=Wo(Wc(e,{months:1}));return $0(t)?t:Wc(t,{days:(8-t.getDay())%7})},sAe=e=>Wc(e,{days:1}),Yh=e=>VD(GD(FD(e,9),0),0),q_=(e,t=new Date)=>{let n=null;return e===qu.AN_HOUR_FROM_NOW?n=Wc(t,{hours:1}):e===qu.UNTIL_TOMORROW?n=Yh(sAe(t)):e===qu.UNTIL_NEXT_WEEK?n=Yh(tAe(t)):e===qu.UNTIL_NEXT_MONTH&&(n=Yh(nAe(t))),n?Ao(n):null},aAe=e=>{if(!e)return null;const t=new Date(e);return nO(t)?Yn(t,"h.mmaaa"):e?Yn(t,"d MMM, h.mmaaa"):null},oAe=e=>e?Ao(new Date(e)):null,iAe=e=>{if(!e)return null;const t={minutes:"m",minute:"m",hours:"h",hour:"h",days:"d",day:"d",months:"mo",month:"mo",years:"y",year:"y"};return e.replace(/^in\s+/i,"").replace(/\s(minute|hour|day|month|year)s?\b/gi,(s,a)=>t[a.toLowerCase()]||s)},jb="CMD_MUTE_CONVERSATION",Kb="CMD_UNMUTE_CONVERSATION",Xb="CMD_SEND_TRANSCRIPT",lAe="CMD_REOPEN_CONVERSATION",rAe="CMD_RESOLVE_CONVERSATION",cAe="CMD_SNOOZE_CONVERSATION",uAe="CMD_AI_ASSIST",qb="CMD_BULK_ACTION_SNOOZE_CONVERSATION",Zb="CMD_BULK_ACTION_REOPEN_CONVERSATION",Qb="CMD_BULK_ACTION_RESOLVE_CONVERSATION",Jb="CMD_SNOOZE_NOTIFICATION",dAe={components:{Avatar:kt,Spinner:Ls,NextButton:te},props:{selectedInboxes:{type:Array,default:()=>[]},conversationCount:{type:Number,default:0}},emits:["select","close"],data(){return{query:"",selectedAgent:null,goBackToAgentList:!1}},computed:{...mt({uiFlags:"bulkActions/getUIFlags",assignableAgentsUiFlags:"inboxAssignableAgents/getUIFlags"}),filteredAgents(){return this.query?this.assignableAgents.filter(e=>e.name.toLowerCase().includes(this.query.toLowerCase())):[{confirmed:!0,name:"None",id:null,role:"agent",account_id:0,email:"None"},...this.assignableAgents]},assignableAgents(){return this.$store.getters["inboxAssignableAgents/getAssignableAgents"](this.selectedInboxes.join(","))},conversationLabel(){return this.conversationCount>1?"conversations":"conversation"}},mounted(){this.$store.dispatch("inboxAssignableAgents/fetch",this.selectedInboxes)},methods:{submit(){this.$emit("select",this.selectedAgent)},goBack(){this.goBackToAgentList=!0,this.selectedAgent=null},assignAgent(e){this.selectedAgent=e},onClose(){this.$emit("close")},onCloseAgentList(){this.selectedAgent===null&&!this.goBackToAgentList&&this.onClose(),this.goBackToAgentList=!1}}},pAe={class:"bulk-action__agents"},mAe={class:"flex items-center justify-between header"},hAe={class:"container"},fAe={key:0,class:"agent__list-loading"},gAe={key:1,class:"agent__list-container"},_Ae={key:0},vAe={class:"search-container"},EAe={class:"flex items-center justify-between h-8 gap-2 agent-list-search"},bAe=["placeholder"],TAe=["onClick"],SAe={class:"my-0 text-n-slate-12"},AAe={key:1,class:"agent-confirmation-container"},yAe={key:0},IAe={key:1},CAe={class:"agent-confirmation-actions"};function NAe(e,t,n,s,a,o){const i=W("NextButton"),l=W("Spinner"),r=W("fluent-icon"),c=W("Avatar"),u=Qe("on-clickaway");return re((p(),E("div",pAe,[t[2]||(t[2]=m("div",{class:"triangle"},[m("svg",{height:"12",viewBox:"0 0 24 12",width:"24"},[m("path",{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px"})])],-1)),m("div",mAe,[m("span",null,I(e.$t("BULK_ACTION.AGENT_SELECT_LABEL")),1),S(i,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:o.onClose},null,8,["onClick"])]),m("div",hAe,[e.assignableAgentsUiFlags.isFetching?(p(),E("div",fAe,[S(l),m("p",null,I(e.$t("BULK_ACTION.AGENT_LIST_LOADING")),1)])):(p(),E("div",gAe,[a.selectedAgent?(p(),E("div",AAe,[a.selectedAgent.id?(p(),E("p",yAe,[xe(I(e.$t("BULK_ACTION.ASSIGN_CONFIRMATION_LABEL",{conversationCount:n.conversationCount,conversationLabel:o.conversationLabel}))+" ",1),m("strong",null,I(a.selectedAgent.name),1),t[1]||(t[1]=m("span",null,"?",-1))])):(p(),E("p",IAe,I(e.$t("BULK_ACTION.UNASSIGN_CONFIRMATION_LABEL",{conversationCount:n.conversationCount,conversationLabel:o.conversationLabel})),1)),m("div",CAe,[S(i,{faded:"",sm:"",slate:"",type:"reset",label:e.$t("BULK_ACTION.GO_BACK_LABEL"),onClick:o.goBack},null,8,["label","onClick"]),S(i,{sm:"",type:"submit",label:e.$t("BULK_ACTION.YES"),"is-loading":e.uiFlags.isUpdating,onClick:o.submit},null,8,["label","is-loading","onClick"])])])):(p(),E("ul",_Ae,[m("li",vAe,[m("div",EAe,[S(r,{icon:"search",class:"search-icon",size:"16"}),re(m("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>a.query=d),type:"search",placeholder:e.$t("BULK_ACTION.SEARCH_INPUT_PLACEHOLDER"),class:"reset-base !outline-0 !text-sm agent--search_input"},null,8,bAe),[[gt,a.query]])])]),(p(!0),E(ue,null,Ae(o.filteredAgents,d=>(p(),E("li",{key:d.id},[m("div",{class:"agent-list-item",onClick:h=>o.assignAgent(d)},[S(c,{name:d.name,src:d.thumbnail,status:d.availability_status,size:22,"hide-offline-status":"","rounded-full":""},null,8,["name","src","status"]),m("span",SAe,I(d.name),1)],8,TAe)]))),128))]))]))])])),[[u,o.onCloseAgentList]])}const OAe=De(dAe,[["render",NAe],["__scopeId","data-v-93d5beb7"]]),RAe={class:"absolute z-20 w-auto origin-top-right border border-solid rounded-lg shadow-md ltr:right-2 rtl:left-2 top-12 bg-n-alpha-3 backdrop-blur-[100px] border-n-weak"},xAe={class:"p-2.5 flex gap-1 items-center justify-between"},wAe={class:"text-sm font-medium text-n-slate-12"},$Ae={class:"px-2.5 pt-0 pb-2.5"},MAe={__name:"UpdateActions",props:{showResolve:{type:Boolean,default:!0},showReopen:{type:Boolean,default:!0},showSnooze:{type:Boolean,default:!0}},emits:["update","close"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=j([{icon:"i-lucide-check",key:"resolved"},{icon:"i-lucide-redo",key:"open"},{icon:"i-lucide-alarm-clock",key:"snoozed"}]),i=u=>{if(u==="snoozed"){const d=document.querySelector("ninja-keys");d==null||d.open({parent:"bulk_action_snooze_conversation"})}else s("update",u)},l=()=>{s("close")},r=u=>({resolved:n.showResolve,open:n.showReopen,snoozed:n.showSnooze})[u]||!1,c=u=>({resolved:a("CONVERSATION.HEADER.RESOLVE_ACTION"),open:a("CONVERSATION.HEADER.REOPEN_ACTION"),snoozed:a("BULK_ACTION.UPDATE.SNOOZE_UNTIL")})[u]||"";return(u,d)=>{const h=Qe("on-clickaway");return re((p(),E("div",RAe,[d[0]||(d[0]=m("div",{class:"right-[var(--triangle-position)] block z-10 absolute text-left -top-3"},[m("svg",{height:"12",viewBox:"0 0 24 12",width:"24"},[m("path",{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px",class:"fill-n-alpha-3 backdrop-blur-[100px] stroke-n-weak"})])],-1)),m("div",xAe,[m("span",wAe,I(u.$t("BULK_ACTION.UPDATE.CHANGE_STATUS")),1),S(te,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:l})]),m("div",$Ae,[S(cp,{class:"m-0 list-none"},{default:Y(()=>[(p(!0),E(ue,null,Ae(o.value,g=>(p(),E(ue,null,[r(g.key)?(p(),L(Gc,{key:g.key},{default:Y(()=>[S(te,{ghost:"",sm:"",slate:"",class:"!w-full !justify-start",icon:g.icon,label:c(g.key),onClick:f=>i(g.key)},null,8,["icon","label","onClick"])]),_:2},1024)):$("",!0)],64))),256))]),_:1})])])),[[h,l]])}}},LAe={class:"absolute ltr:right-2 rtl:left-2 top-12 origin-top-right z-20 w-60 bg-n-alpha-3 backdrop-blur-[100px] border-n-weak rounded-lg border border-solid shadow-md",role:"dialog","aria-labelledby":"label-dialog-title"},DAe={class:"flex items-center justify-between p-2.5"},PAe={class:"text-sm font-medium"},kAe={class:"flex flex-col max-h-60 min-h-0"},BAe={class:"py-2 px-2.5"},UAe=["aria-label"],FAe={key:0,class:"p-2 text-center"},GAe={class:"text-sm text-n-slate-11"},VAe=["aria-selected"],HAe={class:"items-center rounded-md cursor-pointer flex py-1 px-2.5 hover:bg-n-slate-3 dark:hover:bg-n-solid-3 has-[:checked]:bg-n-slate-2"},WAe=["value","aria-label"],zAe={class:"overflow-hidden flex-grow w-full text-sm whitespace-nowrap text-ellipsis"},YAe={key:1,class:"p-2 text-center"},jAe={class:"text-sm text-n-slate-11"},KAe={class:"p-2"},XAe={__name:"LabelActions",emits:["close","assign"],setup(e,{emit:t}){const n=t,{t:s}=be(),a=_e("labels/getLabels"),o=j(""),i=j([]),l=y(()=>o.value?a.value.filter(g=>g.title.toLowerCase().includes(o.value.toLowerCase())):a.value),r=y(()=>a.value.length>0),c=y(()=>l.value.length>0),u=g=>i.value.includes(g),d=()=>{n("close")},h=()=>{i.value.length>0&&n("assign",i.value)};return(g,f)=>re((p(),E("div",LAe,[f[2]||(f[2]=m("div",{class:"triangle"},[m("svg",{height:"12",viewBox:"0 0 24 12",width:"24"},[m("path",{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px"})])],-1)),m("div",DAe,[m("span",PAe,I(C(s)("BULK_ACTION.LABELS.ASSIGN_LABELS")),1),S(te,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:d})]),m("div",kAe,[m("header",BAe,[S(Tt,{modelValue:o.value,"onUpdate:modelValue":f[0]||(f[0]=b=>o.value=b),type:"search",placeholder:C(s)("BULK_ACTION.SEARCH_INPUT_PLACEHOLDER"),"icon-left":"i-lucide-search",size:"sm",class:"w-full","aria-label":C(s)("BULK_ACTION.SEARCH_INPUT_PLACEHOLDER")},null,8,["modelValue","placeholder","aria-label"])]),r.value?(p(),E("ul",{key:0,class:"flex-1 overflow-y-auto m-0 list-none",role:"listbox","aria-label":C(s)("BULK_ACTION.LABELS.ASSIGN_LABELS")},[c.value?$("",!0):(p(),E("li",FAe,[m("span",GAe,I(C(s)("BULK_ACTION.LABELS.NO_LABELS_FOUND")),1)])),(p(!0),E(ue,null,Ae(l.value,b=>(p(),E("li",{key:b.id,class:"my-1 mx-0 py-0 px-2.5",role:"option","aria-selected":u(b.title)},[m("label",HAe,[re(m("input",{"onUpdate:modelValue":f[1]||(f[1]=A=>i.value=A),type:"checkbox",value:b.title,class:"my-0 ltr:mr-2.5 rtl:ml-2.5","aria-label":b.title},null,8,WAe),[[dn,i.value]]),m("span",zAe,I(b.title),1),m("span",{class:"rounded-md h-3 w-3 flex-shrink-0 border border-solid border-n-weak",style:Zt({backgroundColor:b.color})},null,4)])],8,VAe))),128))],8,UAe)):(p(),E("div",YAe,[m("span",jAe,I(C(s)("CONTACTS_BULK_ACTIONS.NO_LABELS_FOUND")),1)])),m("footer",KAe,[S(te,{sm:"",type:"submit",class:"w-full",label:C(s)("BULK_ACTION.LABELS.ASSIGN_SELECTED_LABELS"),disabled:!i.value.length,onClick:h},null,8,["label","disabled"])])])])),[[C(ms),d]])}},$I=De(XAe,[["__scopeId","data-v-c3747f51"]]),qAe={components:{NextButton:te},emits:["assignTeam","close"],data(){return{query:"",selectedteams:[]}},computed:{...mt({teams:"teams/getTeams"}),filteredTeams(){return[{name:"None",id:0},...this.teams.filter(e=>e.name.toLowerCase().includes(this.query.toLowerCase()))]}},methods:{assignTeam(e){this.$emit("assignTeam",e)},onClose(){this.$emit("close")}}},ZAe={class:"bulk-action__teams"},QAe={class:"flex items-center justify-between header"},JAe={class:"container"},eye={class:"team__list-container"},tye={class:"search-container"},nye={class:"flex items-center justify-between h-8 gap-2 agent-list-search"},sye=["placeholder"],aye=["onClick"],oye={class:"my-0 ltr:ml-2 rtl:mr-2 text-n-slate-12"},iye={key:1},lye={class:"team__list-item"},rye={class:"my-0 ltr:ml-2 rtl:mr-2 text-n-slate-12"};function cye(e,t,n,s,a,o){const i=W("NextButton"),l=W("fluent-icon"),r=Qe("on-clickaway");return re((p(),E("div",ZAe,[t[1]||(t[1]=m("div",{class:"triangle"},[m("svg",{height:"12",viewBox:"0 0 24 12",width:"24"},[m("path",{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px"})])],-1)),m("div",QAe,[m("span",null,I(e.$t("BULK_ACTION.TEAMS.TEAM_SELECT_LABEL")),1),S(i,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:o.onClose},null,8,["onClick"])]),m("div",JAe,[m("div",eye,[m("ul",null,[m("li",tye,[m("div",nye,[S(l,{icon:"search",class:"search-icon",size:"16"}),re(m("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>a.query=c),type:"search",placeholder:e.$t("BULK_ACTION.SEARCH_INPUT_PLACEHOLDER"),class:"reset-base !outline-0 !text-sm agent--search_input"},null,8,sye),[[gt,a.query]])])]),o.filteredTeams.length?(p(!0),E(ue,{key:0},Ae(o.filteredTeams,c=>(p(),E("li",{key:c.id},[m("div",{class:"team__list-item",onClick:u=>o.assignTeam(c)},[m("span",oye,I(c.name),1)],8,aye)]))),128)):(p(),E("li",iye,[m("div",lye,[m("span",rye,I(e.$t("BULK_ACTION.TEAMS.NO_TEAMS_AVAILABLE")),1)])]))])])])])),[[r,o.onClose]])}const uye=De(qAe,[["render",cye],["__scopeId","data-v-71bff55d"]]),dye={components:{DatePicker:Wy,NextButton:te},emits:["close","chooseTime"],data(){return{snoozeTime:null,lang:{days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],yearFormat:"YYYY",monthFormat:"MMMM"}}},methods:{onClose(){this.$emit("close")},chooseTime(){this.$emit("chooseTime",this.snoozeTime)},disabledDate(e){const t=new Date;return t.setDate(t.getDate()-1),e<t},disabledTime(e){const t=new Date;return t.setHours(t.getHours()+1),e<t}}},pye={class:"flex flex-col"},mye={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function hye(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("DatePicker"),r=W("NextButton");return p(),E("div",pye,[S(i,{"header-title":e.$t("CONVERSATION.CUSTOM_SNOOZE.TITLE")},null,8,["header-title"]),m("form",{class:"modal-content w-full pt-2 px-5 pb-6",onSubmit:t[1]||(t[1]=Ve((...c)=>o.chooseTime&&o.chooseTime(...c),["prevent"]))},[S(l,{value:a.snoozeTime,"onUpdate:value":t[0]||(t[0]=c=>a.snoozeTime=c),type:"datetime",inline:"","input-class":"mx-input ",lang:a.lang,"disabled-date":o.disabledDate,"disabled-time":o.disabledTime},null,8,["value","lang","disabled-date","disabled-time"]),m("div",mye,[S(r,{faded:"",slate:"",type:"reset",label:e.$t("CONVERSATION.CUSTOM_SNOOZE.CANCEL"),onClick:Ve(o.onClose,["prevent"])},null,8,["label","onClick"]),S(r,{type:"submit",label:e.$t("CONVERSATION.CUSTOM_SNOOZE.APPLY")},null,8,["label"])])],32)])}const Z_=De(dye,[["render",hye]]),fye={components:{AgentSelector:OAe,UpdateActions:MAe,LabelActions:$I,TeamActions:uye,CustomSnoozeModal:Z_,NextButton:te},props:{conversations:{type:Array,default:()=>[]},allConversationsSelected:{type:Boolean,default:!1},selectedInboxes:{type:Array,default:()=>[]},showOpenAction:{type:Boolean,default:!1},showResolvedAction:{type:Boolean,default:!1},showSnoozedAction:{type:Boolean,default:!1}},emits:["selectAllConversations","assignAgent","updateConversations","assignLabels","assignTeam","resolveConversations"],data(){return{showAgentsList:!1,showUpdateActions:!1,showLabelActions:!1,showTeamsList:!1,popoverPositions:{},showCustomTimeSnoozeModal:!1}},mounted(){Dt.on(qb,this.onCmdSnoozeConversation),Dt.on(Zb,this.onCmdReopenConversation),Dt.on(Qb,this.onCmdResolveConversation)},unmounted(){Dt.off(qb,this.onCmdSnoozeConversation),Dt.off(Zb,this.onCmdReopenConversation),Dt.off(Qb,this.onCmdResolveConversation)},methods:{onCmdSnoozeConversation(e){e===yt.SNOOZE_OPTIONS.UNTIL_CUSTOM_TIME?this.showCustomTimeSnoozeModal=!0:this.updateConversations("snoozed",q_(e)||null)},onCmdReopenConversation(){this.updateConversations("open",null)},onCmdResolveConversation(){this.updateConversations("resolved",null)},customSnoozeTime(e){this.showCustomTimeSnoozeModal=!1,e&&this.updateConversations("snoozed",Ao(e))},hideCustomSnoozeModal(){this.showCustomTimeSnoozeModal=!1},selectAll(e){this.$emit("selectAllConversations",e.target.checked)},submit(e){this.$emit("assignAgent",e)},updateConversations(e,t){this.$emit("updateConversations",e,t)},assignLabels(e){this.$emit("assignLabels",e)},assignTeam(e){this.$emit("assignTeam",e)},resolveConversations(){this.$emit("resolveConversations")},toggleUpdateActions(){this.showUpdateActions=!this.showUpdateActions},toggleLabelActions(){this.showLabelActions=!this.showLabelActions},toggleAgentList(){this.showAgentsList=!this.showAgentsList},toggleTeamsList(){this.showTeamsList=!this.showTeamsList}}},gye={class:"bulk-action__container"},_ye={class:"flex items-center justify-between"},vye={class:"flex items-center justify-between bulk-action__panel"},Eye=["checked",".indeterminate"],bye={class:"flex items-center gap-1 bulk-action__actions"},Tye={key:0,class:"bulk-action__alert"};function Sye(e,t,n,s,a,o){const i=W("NextButton"),l=W("LabelActions"),r=W("UpdateActions"),c=W("AgentSelector"),u=W("TeamActions"),d=W("CustomSnoozeModal"),h=W("woot-modal"),g=Qe("tooltip");return p(),E("div",gye,[m("div",_ye,[m("label",vye,[m("input",{type:"checkbox",class:"checkbox",checked:n.allConversationsSelected,".indeterminate":!n.allConversationsSelected,onChange:t[0]||(t[0]=f=>o.selectAll(f))},null,40,Eye),m("span",null,I(e.$t("BULK_ACTION.CONVERSATIONS_SELECTED",{conversationCount:n.conversations.length})),1)]),m("div",bye,[re(S(i,{icon:"i-lucide-tags",slate:"",xs:"",faded:"",onClick:o.toggleLabelActions},null,8,["onClick"]),[[g,e.$t("BULK_ACTION.LABELS.ASSIGN_LABELS")]]),re(S(i,{icon:"i-lucide-repeat",slate:"",xs:"",faded:"",onClick:o.toggleUpdateActions},null,8,["onClick"]),[[g,e.$t("BULK_ACTION.UPDATE.CHANGE_STATUS")]]),re(S(i,{icon:"i-lucide-user-round-plus",slate:"",xs:"",faded:"",onClick:o.toggleAgentList},null,8,["onClick"]),[[g,e.$t("BULK_ACTION.ASSIGN_AGENT_TOOLTIP")]]),re(S(i,{icon:"i-lucide-users-round",slate:"",xs:"",faded:"",onClick:o.toggleTeamsList},null,8,["onClick"]),[[g,e.$t("BULK_ACTION.ASSIGN_TEAM_TOOLTIP")]])]),S(Ys,{name:"popover-animation"},{default:Y(()=>[a.showLabelActions?(p(),L(l,{key:0,class:"label-actions-box",onAssign:o.assignLabels,onClose:t[1]||(t[1]=f=>a.showLabelActions=!1)},null,8,["onAssign"])):$("",!0)]),_:1}),S(Ys,{name:"popover-animation"},{default:Y(()=>[a.showUpdateActions?(p(),L(r,{key:0,class:"update-actions-box","selected-inboxes":n.selectedInboxes,"conversation-count":n.conversations.length,"show-resolve":!n.showResolvedAction,"show-reopen":!n.showOpenAction,"show-snooze":!n.showSnoozedAction,onUpdate:o.updateConversations,onClose:t[2]||(t[2]=f=>a.showUpdateActions=!1)},null,8,["selected-inboxes","conversation-count","show-resolve","show-reopen","show-snooze","onUpdate"])):$("",!0)]),_:1}),S(Ys,{name:"popover-animation"},{default:Y(()=>[a.showAgentsList?(p(),L(c,{key:0,class:"agent-actions-box","selected-inboxes":n.selectedInboxes,"conversation-count":n.conversations.length,onSelect:o.submit,onClose:t[3]||(t[3]=f=>a.showAgentsList=!1)},null,8,["selected-inboxes","conversation-count","onSelect"])):$("",!0)]),_:1}),S(Ys,{name:"popover-animation"},{default:Y(()=>[a.showTeamsList?(p(),L(u,{key:0,class:"team-actions-box",onAssignTeam:o.assignTeam,onClose:t[4]||(t[4]=f=>a.showTeamsList=!1)},null,8,["onAssignTeam"])):$("",!0)]),_:1})]),n.allConversationsSelected?(p(),E("div",Tye,I(e.$t("BULK_ACTION.ALL_CONVERSATIONS_SELECTED_ALERT")),1)):$("",!0),S(h,{show:a.showCustomTimeSnoozeModal,"onUpdate:show":t[5]||(t[5]=f=>a.showCustomTimeSnoozeModal=f),"on-close":o.hideCustomSnoozeModal},{default:Y(()=>[S(d,{onClose:o.hideCustomSnoozeModal,onChooseTime:o.customSnoozeTime},null,8,["onClose","onChooseTime"])]),_:1},8,["show","on-close"])])}const Aye=De(fye,[["render",Sye],["__scopeId","data-v-66a565e2"]]),MI={__name:"IntersectionObserver",props:{options:{type:Object,default:()=>({root:document,rootMargin:"100px 0 100px 0)"})}},emits:["observed"],setup(e,{emit:t}){const n=t,s=j("");return VO(s,([{isIntersecting:a}])=>{a&&n("observed")},e.options),(a,o)=>(p(),E("div",{ref_key:"observedElement",ref:s,class:"h-6 w-full"},null,512))}};function yye(e){const t=()=>{const a=e.value.querySelectorAll("div.conversations-list div.conversation"),o=e.value.querySelector("div.conversations-list div.conversation.active"),i=[...a].indexOf(o),l=a.length-1;return{allConversations:a,activeConversation:o,activeConversationIndex:i,lastConversationIndex:l}},n=a=>{const{allConversations:o,activeConversationIndex:i,lastConversationIndex:l}=t(),r=a==="previous"?i-1:i+1;o.length>0&&r>=0&&r<=l?o[r].click():o.length>0&&o[a==="previous"?0:l].click()};Os({"Alt+KeyJ":{action:()=>n("previous"),allowOnFocusedInput:!0},"Alt+KeyK":{action:()=>n("next"),allowOnFocusedInput:!0}})}function Iye(){const e=na(),{t}=be(),n=_e("bulkActions/getSelectedConversationIds"),s=j([]);function a(g,f){e.dispatch("bulkActions/setSelectedConversationIds",g),s.value=[...s.value,f]}function o(g,f){e.dispatch("bulkActions/removeSelectedConversationIds",g),s.value=s.value.filter(b=>b!==f)}function i(){e.dispatch("bulkActions/clearSelectedConversationIds"),s.value=[]}function l(g,f){const b=C(f);g?(e.dispatch("bulkActions/setSelectedConversationIds",b.map(A=>A.id)),s.value=b.map(A=>A.inbox_id)):i()}function r(g){return n.value.includes(g)}async function c(g,f=null){try{await e.dispatch("bulkActions/process",{type:"Conversation",ids:f||n.value,fields:{assignee_id:g.id}}),e.dispatch("bulkActions/clearSelectedConversationIds"),f?ne(t("CONVERSATION.CARD_CONTEXT_MENU.API.AGENT_ASSIGNMENT.SUCCESFUL",{agentName:g.name,conversationId:f})):ne(t("BULK_ACTION.ASSIGN_SUCCESFUL"))}catch{ne(t("BULK_ACTION.ASSIGN_FAILED"))}}async function u(g,f=null){try{await e.dispatch("bulkActions/process",{type:"Conversation",ids:f||n.value,labels:{add:g}}),e.dispatch("bulkActions/clearSelectedConversationIds"),f?ne(t("CONVERSATION.CARD_CONTEXT_MENU.API.LABEL_ASSIGNMENT.SUCCESFUL",{labelName:g[0],conversationId:f})):ne(t("BULK_ACTION.LABELS.ASSIGN_SUCCESFUL"))}catch{ne(t("BULK_ACTION.LABELS.ASSIGN_FAILED"))}}async function d(g){try{await e.dispatch("bulkActions/process",{type:"Conversation",ids:n.value,fields:{team_id:g.id}}),e.dispatch("bulkActions/clearSelectedConversationIds"),ne(t("BULK_ACTION.TEAMS.ASSIGN_SUCCESFUL"))}catch{ne(t("BULK_ACTION.TEAMS.ASSIGN_FAILED"))}}async function h(g,f){try{await e.dispatch("bulkActions/process",{type:"Conversation",ids:n.value,fields:{status:g},snoozed_until:f}),e.dispatch("bulkActions/clearSelectedConversationIds"),ne(t("BULK_ACTION.UPDATE.UPDATE_SUCCESFUL"))}catch{ne(t("BULK_ACTION.UPDATE.UPDATE_FAILED"))}}return{selectedConversations:n,selectedInboxes:s,selectConversation:a,deSelectConversation:o,selectAllConversations:l,resetBulkActions:i,isConversationSelected:r,onAssignAgent:c,onAssignLabels:u,onAssignTeamsForBulk:d,onUpdateConversations:h}}const Ca=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"}],jl=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"}],ir=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"contains",label:"Contains"},{value:"does_not_contain",label:"Does not contain"}],Cye=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"},{value:"is_greater_than",label:"Is greater than"},{value:"is_less_than",label:"Is less than"}],lr=[{value:"is_greater_than",label:"Is greater than"},{value:"is_less_than",label:"Is less than"},{value:"days_before",label:"Is x days before"}],Nye=[{attributeKey:"status",attributeI18nKey:"STATUS",inputType:"multi_select",dataType:"text",filterOperators:Ca,attributeModel:"standard"},{attributeKey:"assignee_id",attributeI18nKey:"ASSIGNEE_NAME",inputType:"search_select",dataType:"text",filterOperators:jl,attributeModel:"standard"},{attributeKey:"priority",attributeI18nKey:"PRIORITY",inputType:"multi_select",dataType:"text",filterOperators:Ca,attributeModel:"standard"},{attributeKey:"inbox_id",attributeI18nKey:"INBOX_NAME",inputType:"search_select",dataType:"text",filterOperators:jl,attributeModel:"standard"},{attributeKey:"team_id",attributeI18nKey:"TEAM_NAME",inputType:"search_select",dataType:"number",filterOperators:jl,attributeModel:"standard"},{attributeKey:"display_id",attributeI18nKey:"CONVERSATION_IDENTIFIER",inputType:"plain_text",dataType:"Number",filterOperators:ir,attributeModel:"standard"},{attributeKey:"campaign_id",attributeI18nKey:"CAMPAIGN_NAME",inputType:"search_select",dataType:"Number",filterOperators:jl,attributeModel:"standard"},{attributeKey:"labels",attributeI18nKey:"LABELS",inputType:"multi_select",dataType:"text",filterOperators:jl,attributeModel:"standard"},{attributeKey:"browser_language",attributeI18nKey:"BROWSER_LANGUAGE",inputType:"search_select",dataType:"text",filterOperators:Ca,attributeModel:"additional"},{attributeKey:"country_code",attributeI18nKey:"COUNTRY_NAME",inputType:"search_select",dataType:"text",filterOperators:Ca,attributeModel:"additional"},{attributeKey:"referer",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",dataType:"text",filterOperators:ir,attributeModel:"additional"},{attributeKey:"created_at",attributeI18nKey:"CREATED_AT",inputType:"date",dataType:"text",filterOperators:lr,attributeModel:"standard"},{attributeKey:"last_activity_at",attributeI18nKey:"LAST_ACTIVITY",inputType:"date",dataType:"text",filterOperators:lr,attributeModel:"standard"},{attributeKey:"referer",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",dataType:"text",filterOperators:lr,attributeModel:"standard"}],Oye=[{name:"Standard Filters",i18nGroup:"STANDARD_FILTERS",attributes:[{key:"status",i18nKey:"STATUS"},{key:"assignee_id",i18nKey:"ASSIGNEE_NAME"},{key:"inbox_id",i18nKey:"INBOX_NAME"},{key:"team_id",i18nKey:"TEAM_NAME"},{key:"display_id",i18nKey:"CONVERSATION_IDENTIFIER"},{key:"campaign_id",i18nKey:"CAMPAIGN_NAME"},{key:"labels",i18nKey:"LABELS"},{key:"created_at",i18nKey:"CREATED_AT"},{key:"last_activity_at",i18nKey:"LAST_ACTIVITY"}]},{name:"Additional Filters",i18nGroup:"ADDITIONAL_FILTERS",attributes:[{key:"browser_language",i18nKey:"BROWSER_LANGUAGE"},{key:"country_code",i18nKey:"COUNTRY_NAME"},{key:"referer",i18nKey:"REFERER_LINK"}]}],Rye=[{attributeKey:"name",attributeI18nKey:"NAME",inputType:"plain_text",dataType:"text",filterOperators:Ca,attribute_type:"standard"},{attributeKey:"email",attributeI18nKey:"EMAIL",inputType:"plain_text",dataType:"text",filterOperators:ir,attribute_type:"standard"},{attributeKey:"phone_number",attributeI18nKey:"PHONE_NUMBER",inputType:"plain_text",dataType:"text",filterOperators:ir,attribute_type:"standard"},{attributeKey:"identifier",attributeI18nKey:"IDENTIFIER",inputType:"plain_text",dataType:"number",filterOperators:Ca,attribute_type:"standard"},{attributeKey:"country_code",attributeI18nKey:"COUNTRY",inputType:"search_select",dataType:"number",filterOperators:Ca,attribute_type:"standard"},{attributeKey:"city",attributeI18nKey:"CITY",inputType:"plain_text",dataType:"Number",filterOperators:ir,attribute_type:"standard"},{attributeKey:"created_at",attributeI18nKey:"CREATED_AT",inputType:"date",dataType:"text",filterOperators:lr,attributeModel:"standard"},{attributeKey:"last_activity_at",attributeI18nKey:"LAST_ACTIVITY",inputType:"date",dataType:"text",filterOperators:lr,attributeModel:"standard"},{attributeKey:"referer",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",dataType:"text",filterOperators:lr,attributeModel:"standard"},{attributeKey:"blocked",attributeI18nKey:"BLOCKED",inputType:"search_select",dataType:"text",filterOperators:Ca,attributeModel:"standard"},{attributeKey:"labels",attributeI18nKey:"LABELS",inputType:"multi_select",dataType:"text",filterOperators:jl,attributeModel:"standard"}],xye=e=>{switch(e){case"date":return"date";case"text":return"plain_text";case"list":return"search_select";case"checkbox":return"search_select";default:return"plain_text"}},wye=e=>{switch(e){case"list":return Ca;case"text":return ir;case"number":return Ca;case"link":return Ca;case"date":return Cye;case"checkbox":return Ca;default:return Ca}},$ye=({filteri18nKey:e,attributeModel:t})=>{const{t:n}=be(),{getters:s}=rt(),a=Oye;return{setFilterAttributes:()=>{const r=s["attributes/getAttributesByModel"](t),c={name:n(`${e}.GROUPS.CUSTOM_ATTRIBUTES`),attributes:r.map(h=>({key:h.attribute_key,name:h.attribute_display_name}))},u=a.map(h=>({name:n(`${e}.GROUPS.${h.i18nGroup}`),attributes:h.attributes.map(g=>({key:g.key,name:n(`${e}.ATTRIBUTES.${g.i18nKey}`)}))})),d=r.map(h=>({attributeKey:h.attribute_key,attributeI18nKey:`CUSTOM_ATTRIBUTE_${h.attribute_display_type.toUpperCase()}`,inputType:xye(h.attribute_display_type),filterOperators:wye(h.attribute_display_type),attributeModel:"custom_attributes"}));return{filterGroups:[...u,c],filterTypes:[...d]}},initializeStatusAndAssigneeFilterToModal:(r,c,u)=>r!==""?{attribute_key:"status",attribute_model:"standard",filter_operator:"equal_to",values:[{id:r,name:n(`CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.${r}.TEXT`)}],query_operator:"and",custom_attribute_type:""}:u===yt.ASSIGNEE_TYPE.ME?{attribute_key:"assignee_id",filter_operator:"equal_to",values:c,query_operator:"and",custom_attribute_type:""}:null,initializeInboxTeamAndLabelFilterToModal:(r,c,u,d,h)=>{const g=[];return r&&g.push({attribute_key:"inbox_id",attribute_model:"standard",filter_operator:"equal_to",values:[{id:r,name:c.name}],query_operator:"and",custom_attribute_type:""}),u&&g.push({attribute_key:"team_id",attribute_model:"standard",filter_operator:"equal_to",values:d,query_operator:"and",custom_attribute_type:""}),h&&g.push({attribute_key:"labels",attribute_model:"standard",filter_operator:"equal_to",values:[{id:h,name:h}],query_operator:"and",custom_attribute_type:""}),g}}},Mye=(e,t,n)=>{if((e==="created_at"||e==="last_activity_at")&&t==="days_before")return"plain_text";const s=n.find(a=>a.attributeKey===e);return s==null?void 0:s.inputType},Lye=e=>({text:"string",number:"string",date:"string",checkbox:"multi_select",list:"multi_select",link:"string"})[e],Dye=(e,t)=>{const n=t.find(o=>o.attribute_key===e),{attribute_display_type:s}=n;return Lye(s)},Zu=(e,t,n,s)=>{const a=t==null?void 0:t.find(o=>o[n]===e[0]);return{id:e[0],name:a?a[s]:e[0]}},Pye=e=>e.map(t=>({id:t,name:t})),kye=(e,t)=>t.filter(s=>e.includes(s.title)).map(({title:s})=>({id:s,name:s})),Bye=(e,t)=>t.filter(s=>e.includes(s.id)).map(({id:s,name:a})=>({id:s.toLowerCase(),name:a})),Uye=(e,t)=>t.filter(s=>e.includes(s.id)).map(({id:s,name:a})=>({id:s,name:a})),Fye=(e,t)=>t.filter(n=>e.includes(n.id)),Gye=(e,t)=>{const{attribute_key:n,values:s}=e,{languages:a,countries:o,agents:i,inboxes:l,teams:r,campaigns:c,labels:u,priority:d}=t;switch(n){case"status":return Pye(s);case"assignee_id":return Zu(s,i,"id","name");case"inbox_id":return Zu(s,l,"id","name");case"team_id":return Zu(s,r,"id","name");case"campaign_id":return Zu(s,c,"id","title");case"labels":return kye(s,u);case"priority":return Fye(s,d);case"browser_language":return Bye(s,a);case"country_code":return Uye(s,o);default:return{id:s[0],name:s[0]}}},LI=(e,t)=>{const{attribute_key:n,filter_operator:s,values:a}=e,{filterTypes:o,allCustomAttributes:i}=t,l=Mye(n,s,o);return l===void 0?Dye(n,i)==="string"?a[0].toString():{id:a[0],name:a[0]}:l==="multi_select"||l==="search_select"?Gye(e,t):a[0].toString()},Vye={key:3,class:"flex items-center justify-center p-4 overflow-auto"},Hye={key:0,class:"flex justify-center my-4"},Wye={key:1,class:"p-4 text-center text-n-slate-11"},zye={__name:"ChatList",props:{conversationInbox:{type:[String,Number],default:0},teamId:{type:[String,Number],default:0},label:{type:String,default:""},conversationType:{type:String,default:""},foldersId:{type:[String,Number],default:0},showConversationList:{default:!0,type:Boolean},isOnExpandedLayout:{default:!1,type:Boolean}},emits:["conversationLoad"],setup(e,{emit:t}){const n=e,s=t,{uiSettings:a}=tn(),{t:o}=be(),i=Ft(),l=wt(),r=na(),c=j(null),u=j(null);Hn("contextMenuElementTarget",u);const d=j(yt.ASSIGNEE_TYPE.ME),h=j(yt.STATUS_TYPE.OPEN),g=j(yt.SORT_BY_TYPE.LAST_ACTIVITY_AT_DESC),f=j(!1),b=j([]),A=j({}),v=j(!1),T=j(!1),_=j(!1),N=j([]),R=j(Nye.map(at=>({...at,attributeName:o(`FILTER.ATTRIBUTES.${at.attributeI18nKey}`)}))),O=_e("getCurrentUser"),x=_e("getFilteredConversations"),w=_e("getMineChats"),D=_e("getAllStatusChats"),M=_e("getUnAssignedChats"),P=_e("getChatListLoadingStatus"),U=_e("getSelectedInbox"),F=_e("conversationStats/getStats"),k=_e("getAppliedConversationFiltersV2"),B=_e("customViews/getConversationCustomViews"),V=_e("agents/getAgents"),G=_e("teams/getTeams"),K=_e("inboxes/getInboxes"),se=_e("campaigns/getAllCampaigns"),ee=_e("labels/getLabels"),X=_e("getCurrentAccountId"),z=_e("teams/getTeam");yye(c);const{selectedConversations:H,selectedInboxes:q,selectConversation:J,deSelectConversation:de,selectAllConversations:Te,resetBulkActions:ce,isConversationSelected:Ne,onAssignAgent:Me,onAssignLabels:Fe,onAssignTeamsForBulk:Ge,onUpdateConversations:je}=Iye(),{initializeStatusAndAssigneeFilterToModal:Ze,initializeInboxTeamAndLabelFilterToModal:nt}=$ye({filteri18nKey:"FILTER",attributeModel:"conversation_attribute"}),st=y(()=>({root:c.value,rootMargin:"100px 0px 100px 0px"})),At=y(()=>k.value.length!==0),Mt=y(()=>{if(n.foldersId){const at=B.value.filter(nn=>nn.id===Number(n.foldersId)),[It]=at;return It}}),Z=y(()=>{var at;return(at=Mt.value)==null?void 0:at.name}),ie=y(()=>!!(Mt.value&&n.foldersId!==0)),le=y(()=>At.value||ie.value),ve=y(()=>{const{id:at,name:It}=O.value;return{id:at,name:It}}),ge=y(()=>vg(O.value,X.value)),Ie=y(()=>HO(WO,ge.value,at=>at.permissions).map(({key:at,count:It})=>({key:at,name:o(`CHAT_LIST.ASSIGNEE_TYPE_TABS.${at}`),count:F.value[It]||0}))),Be=y(()=>le.value||d.value===yt.ASSIGNEE_TYPE.ALL),ye=y(()=>le.value?"appliedFilters":d.value),$e=Hs("inboxes/getInbox",U),Pe=Hs("conversationPage/getCurrentPageFilter",d),pe=Hs("conversationPage/getCurrentPageFilter",ye),Oe=Hs("conversationPage/getHasEndReached",ye),ke=Hs("attributes/getAttributesByModel","conversation_attribute"),Q=y(()=>Ie.value.find(It=>It.key===d.value).count),oe=y(()=>{const It=b.value&&Array.isArray(b.value)&&!b.value.length,nn=!le.value&&It,gs=b.value.length<25&&Q.value<25&&Q.value>b.value.length;return nn&&gs?1:Pe.value+1}),me=y(()=>({inboxId:n.conversationInbox?n.conversationInbox:void 0,assigneeType:d.value,status:h.value,sortBy:g.value,page:oe.value,labels:n.label?[n.label]:void 0,teamId:n.teamId||void 0,conversationType:n.conversationType||void 0})),Ee=y(()=>n.teamId?z.value(n.teamId):{}),we=y(()=>At.value?o("CHAT_LIST.TAB_HEADING"):$e.value.name?$e.value.name:Ee.value.name?Ee.value.name:n.label?`#${n.label}`:n.conversationType==="mention"?o("CHAT_LIST.MENTION_HEADING"):n.conversationType==="participating"?o("CONVERSATION_PARTICIPANTS.SIDEBAR_MENU_TITLE"):n.conversationType==="unattended"?o("CHAT_LIST.UNATTENDED_HEADING"):ie.value?Mt.value.name:o("CHAT_LIST.TAB_HEADING")),he=y(()=>{let at=[];if(le.value)at=[...x.value];else{const It=me.value;d.value==="me"?at=[...w.value(It)]:d.value==="unassigned"?at=[...M.value(It)]:at=[...D.value(It)]}if(Mt.value){const{payload:It}=Mt.value.query;at=at.filter(nn=>zO(nn,It))}return at}),Se=y(()=>he.value.length&&Oe.value&&!P.value),Re=y(()=>he.value.length===H.value.length&&he.value.every(at=>H.value.includes(at.id))),Ce=y(()=>[...new Set(q.value)]);function Ue(){const{conversations_filter_by:at={}}=a.value,{status:It,order_by:nn}=at;h.value=It||yt.STATUS_TYPE.OPEN,g.value=Object.values(yt.SORT_BY_TYPE).includes(nn)?nn:yt.SORT_BY_TYPE.LAST_ACTIVITY_AT_DESC}function Le(){s("conversationLoad")}function He(at){at=Ts(at);let It=pe.value+1;r.dispatch("fetchFilteredConversations",{queryData:yo(at),page:It}).then(Le),f.value=!1}function ct(at){at=Ts(at);let It=pe.value+1;r.dispatch("fetchFilteredConversations",{queryData:at,page:It}).then(Le)}function Ct(at){at=Ts(at),ce(),A.value=yo(at),r.dispatch("conversationPage/reset"),r.dispatch("emptyAllConversations"),He(at)}function Je(){f.value=!1,N.value=[]}function Nt(at,It){const nn=Ts(at),gs={...C(Mt),name:C(It),query:yo(nn)};r.dispatch("customViews/update",gs),Je()}function ze(){v.value=!0}function _t(){v.value=!1}function Gt(){T.value=!0}function et(){T.value=!1}function Et(){return{agents:V.value,teams:G.value,inboxes:K.value,labels:ee.value,campaigns:se.value,languages:Ng,countries:Fa,priority:[{id:"low",name:o("CONVERSATION.PRIORITY.OPTIONS.LOW")},{id:"medium",name:o("CONVERSATION.PRIORITY.OPTIONS.MEDIUM")},{id:"high",name:o("CONVERSATION.PRIORITY.OPTIONS.HIGH")},{id:"urgent",name:o("CONVERSATION.PRIORITY.OPTIONS.URGENT")}],filterTypes:R.value,allCustomAttributes:ke.value}}function tt(){const at=Ze(h.value,ve.value,d.value);at&&(N.value=[...N.value,so(at)]);const It=nt(n.conversationInbox,$e.value,n.teamId,Ee.value,n.label).map(so);N.value=[...N.value,...It]}function Ot(at){var gs,ja;const It=(ja=(gs=C(at))==null?void 0:gs.query)==null?void 0:ja.payload;if(!Array.isArray(It))return;const nn=It.map(Dn=>{const $a=so(Dn),Vi=Array.isArray($a.values)?LI(Ts(Dn),Et()):[];return{attributeKey:$a.attributeKey,attributeModel:$a.attributeModel,customAttributeType:$a.customAttributeType,filterOperator:$a.filterOperator,queryOperator:$a.queryOperator??"and",values:Vi}});N.value=[...N.value,...nn]}function In(){N.value=[...k.value]}function pt(){if(f.value===!0){Je();return}!At.value&&!ie.value&&tt(),ie.value&&Ot(Mt.value),At.value&&In(),f.value=!0}function Lt(){r.dispatch("updateChatListFilters",me.value),r.dispatch("fetchAllConversations").then(Le)}function Pt(){if(N.value=[],ce(),r.dispatch("conversationPage/reset"),r.dispatch("emptyAllConversations"),r.dispatch("clearConversationFilters"),ie.value){const at=Mt.value.query;ct(at)}n.foldersId||Lt()}function xn(){if(!(Oe.value||P.value))if(!le.value)Lt();else if(ie.value){const at=Mt.value.query;ct(at)}else At.value&&He(k.value)}function xs(){const at=u.value;if(at&&at.hasScrollbar){const{scrollTop:It,scrollHeight:nn,clientHeight:gs}=at.$el;nn-(It+gs)<100&&xn()}}function Un(at){d.value!==at&&(ce(),Dt.emit("clearSearchInput"),d.value=at,Pe.value||Lt())}function Mn(at,It){It==="status"?h.value=at:g.value=at,Pt()}function bs(){const It=B.value[B.value.length-1].id;i.push({name:"folder_conversations",params:{id:It}})}function ws(){B.value.length>0?bs():(i.push({name:"home"}),Lt())}function As(){const{params:{accountId:at,inbox_id:It,label:nn,teamId:gs},name:ja}=l;let Dn="";YO({route:{name:ja}})?Dn="mention":jO({route:{name:ja}})&&(Dn="unattended"),i.push(AS({accountId:at,conversationType:Dn,customViewId:n.foldersId,inboxId:It,label:nn,teamId:gs}))}async function ra(at,It=null){r.dispatch("setCurrentChatPriority",{priority:at,conversationId:It}),r.dispatch("assignPriority",{conversationId:It,priority:at}).then(()=>{zt(ea.CHANGE_PRIORITY,{newValue:at,from:"Context menu"}),ne(o("CONVERSATION.PRIORITY.CHANGE_PRIORITY.SUCCESSFUL",{priority:at,conversationId:It}))})}async function Ds(at){try{await r.dispatch("markMessagesUnread",{id:at}),As()}catch{}}async function fs(at){try{await r.dispatch("markMessagesRead",{id:at})}catch{}}async function ca(at,It=null){try{await r.dispatch("assignTeam",{conversationId:It,teamId:at.id}),ne(o("CONVERSATION.CARD_CONTEXT_MENU.API.TEAM_ASSIGNMENT.SUCCESFUL",{team:at.name,conversationId:It}))}catch{ne(o("CONVERSATION.CARD_CONTEXT_MENU.API.TEAM_ASSIGNMENT.FAILED"))}}function go(at,It,nn){r.dispatch("toggleStatus",{conversationId:at,status:It,snoozedUntil:nn}).then(()=>{ne(o("CONVERSATION.CHANGE_STATUS"))})}function Po(at){return H.value.length?H.value.every(It=>{var nn;return((nn=r.getters.getConversationById(It))==null?void 0:nn.status)===at}):!1}function Nl(at){_.value=at}function Ol(at){Te(at,he)}Yo("fetch_conversation_stats",()=>{le.value||r.dispatch("conversationStats/get",me.value)}),ur(u,"scroll",xs),lt(()=>{r.dispatch("setChatListFilters",me.value),Ue(),r.dispatch("setChatStatusFilter",h.value),r.dispatch("setChatSortFilter",g.value),Pt(),ie.value&&r.dispatch("campaigns/get")});const ci=j(null),En=j(null);async function Rl(){try{await r.dispatch("deleteConversation",En.value),As(),En.value=null,ci.value.close(),ne(o("CONVERSATION.SUCCESS_DELETE_CONVERSATION"))}catch{ne(o("CONVERSATION.FAIL_DELETE_CONVERSATION"))}}const xl=at=>{En.value=at,ci.value.open()};return Hn("selectConversation",J),Hn("deSelectConversation",de),Hn("assignAgent",Me),Hn("assignTeam",ca),Hn("assignLabels",Fe),Hn("updateConversationStatus",go),Hn("toggleContextMenu",Nl),Hn("markAsUnread",Ds),Hn("markAsRead",fs),Hn("assignPriority",ra),Hn("isConversationSelected",Ne),Hn("deleteConversation",xl),it(Ee,()=>Pt()),it(y(()=>n.conversationInbox),()=>Pt()),it(y(()=>n.label),()=>Pt()),it(y(()=>n.conversationType),()=>Pt()),it(Mt,(at,It)=>{at!==It&&r.dispatch("customViews/setActiveConversationFolder",at||null),Pt()}),it(x,()=>{b.value=he.value}),it(me,(at,It)=>{at!==It&&r.dispatch("updateChatListFilters",at)}),(at,It)=>(p(),E("div",{class:ae(["flex flex-col flex-shrink-0 bg-n-solid-1 conversations-list-wrap",[{hidden:!e.showConversationList},e.isOnExpandedLayout?"basis-full":"w-[340px] 2xl:w-[412px]"]])},[We(at.$slots,"default"),S(RSe,{"page-title":we.value,"has-applied-filters":At.value,"has-active-folders":ie.value,"active-status":h.value,"is-on-expanded-layout":e.isOnExpandedLayout,"conversation-stats":C(F),"is-list-loading":C(P)&&!he.value.length,onAddFolders:ze,onDeleteFolders:Gt,onFiltersModal:pt,onResetFilters:Pt,onBasicFilterChange:Mn},null,8,["page-title","has-applied-filters","has-active-folders","active-status","is-on-expanded-layout","conversation-stats","is-list-loading"]),v.value?(p(),L(Td,{key:0,to:"#saveFilterTeleportTarget"},{default:Y(()=>[S(s0e,{modelValue:N.value,"onUpdate:modelValue":It[0]||(It[0]=nn=>N.value=nn),"custom-views-query":A.value,"open-last-saved-item":bs,onClose:_t},null,8,["modelValue","custom-views-query"])]),_:1})):$("",!0),T.value?(p(),L(eAe,{key:1,show:T.value,"onUpdate:show":It[1]||(It[1]=nn=>T.value=nn),"active-custom-view":Mt.value,"custom-views-id":e.foldersId,"open-last-item-after-delete":ws,onClose:et},null,8,["show","active-custom-view","custom-views-id"])):$("",!0),le.value?$("",!0):(p(),L(a0e,{key:2,items:Ie.value,"active-tab":d.value,"is-compact":"",onChatTabChange:Un},null,8,["items","active-tab"])),!C(P)&&!he.value.length?(p(),E("p",Vye,I(at.$t("CHAT_LIST.LIST.404")),1)):$("",!0),C(H).length?(p(),L(Aye,{key:4,conversations:C(H),"all-conversations-selected":Re.value,"selected-inboxes":Ce.value,"show-open-action":Po("open"),"show-resolved-action":Po("resolved"),"show-snoozed-action":Po("snoozed"),onSelectAllConversations:Ol,onAssignAgent:C(Me),onUpdateConversations:C(je),onAssignLabels:C(Fe),onAssignTeam:C(Ge)},null,8,["conversations","all-conversations-selected","selected-inboxes","show-open-action","show-resolved-action","show-snoozed-action","onAssignAgent","onUpdateConversations","onAssignLabels","onAssignTeam"])):$("",!0),m("div",{ref_key:"conversationListRef",ref:c,class:ae(["flex-1 overflow-hidden conversations-list hover:overflow-y-auto",{"overflow-hidden":_.value}])},[S(C(Y_),{ref_key:"conversationDynamicScroller",ref:u,items:he.value,"min-item-size":24,class:"w-full h-full overflow-auto"},{default:Y(({item:nn,index:gs,active:ja})=>[S(C(SI),{item:nn,active:ja,"data-index":gs,"size-dependencies":[nn.messages,nn.labels,nn.uuid,nn.inbox_id]},{default:Y(()=>[S(Z0e,{source:nn,label:e.label,"team-id":e.teamId,"folders-id":e.foldersId,"conversation-type":e.conversationType,"show-assignee":Be.value,onSelectConversation:C(J),onDeSelectConversation:C(de)},null,8,["source","label","team-id","folders-id","conversation-type","show-assignee","onSelectConversation","onDeSelectConversation"])]),_:2},1032,["item","active","data-index","size-dependencies"])]),after:Y(()=>[C(P)?(p(),E("div",Hye,[S(An,{class:"text-n-brand"})])):Se.value?(p(),E("p",Wye,I(at.$t("CHAT_LIST.EOF")),1)):(p(),L(MI,{key:2,options:st.value,onObserved:xn},null,8,["options"]))]),_:1},8,["items"])],2),S($n,{ref_key:"deleteConversationDialogRef",ref:ci,type:"alert",title:at.$t("CONVERSATION.DELETE_CONVERSATION.TITLE",{conversationId:En.value}),description:at.$t("CONVERSATION.DELETE_CONVERSATION.DESCRIPTION"),"confirm-button-label":at.$t("CONVERSATION.DELETE_CONVERSATION.CONFIRM"),onConfirm:Rl,onClose:It[2]||(It[2]=nn=>En.value=null)},null,8,["title","description","confirm-button-label"]),f.value?(p(),L(Td,{key:5,to:"#conversationFilterTeleportTarget"},{default:Y(()=>[S(ZSe,{modelValue:N.value,"onUpdate:modelValue":It[3]||(It[3]=nn=>N.value=nn),"folder-name":Z.value,"is-folder-view":ie.value,onApplyFilter:Ct,onUpdateFolder:Nt,onClose:Je},null,8,["modelValue","folder-name","is-folder-view"])]),_:1})):$("",!0)],2))}},Yye={components:{NextButton:te},props:{show:{type:Boolean,default:!1},currentChat:{type:Object,default:()=>({})}},emits:["cancel","update:show"],setup(){return{v$:bt()}},data(){return{email:"",selectedType:"",isSubmitting:!1}},validations:{email:{required:Ye,email:Li,minLength:en(4)}},computed:{localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}},sentToOtherEmailAddress(){return this.selectedType==="other_email_address"},isFormValid(){return this.selectedType?this.sentToOtherEmailAddress?!!this.email&&!this.v$.email.$error:!0:!1},selectedEmailAddress(){const{meta:e}=this.currentChat;switch(this.selectedType){case"contact":return e.sender.email;case"assignee":return e.assignee.email;case"other_email_address":return this.email;default:return""}}},methods:{onCancel(){this.$emit("cancel")},async onSubmit(){this.isSubmitting=!1;try{await this.$store.dispatch("sendEmailTranscript",{email:this.selectedEmailAddress,conversationId:this.currentChat.id}),ne(this.$t("EMAIL_TRANSCRIPT.SEND_EMAIL_SUCCESS")),this.onCancel()}catch{ne(this.$t("EMAIL_TRANSCRIPT.SEND_EMAIL_ERROR"))}finally{this.isSubmitting=!1}}}},jye={class:"flex flex-col h-auto overflow-auto"},Kye={class:"w-full"},Xye={key:0,class:"flex items-center gap-2"},qye={for:"contact"},Zye={key:1,class:"flex items-center gap-2"},Qye={for:"assignee"},Jye={class:"flex items-center gap-2"},eIe={for:"other_email_address"},tIe={key:2,class:"w-[50%] mt-1"},nIe=["placeholder"],sIe={key:0,class:"message"},aIe={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function oIe(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("NextButton"),r=W("woot-modal");return p(),L(r,{show:o.localShow,"onUpdate:show":t[6]||(t[6]=c=>o.localShow=c),"on-close":o.onCancel},{default:Y(()=>[m("div",jye,[S(i,{"header-title":e.$t("EMAIL_TRANSCRIPT.TITLE"),"header-content":e.$t("EMAIL_TRANSCRIPT.DESC")},null,8,["header-title","header-content"]),m("form",{class:"w-full",onSubmit:t[5]||(t[5]=Ve((...c)=>o.onSubmit&&o.onSubmit(...c),["prevent"]))},[m("div",Kye,[n.currentChat.meta.sender&&n.currentChat.meta.sender.email?(p(),E("div",Xye,[re(m("input",{id:"contact","onUpdate:modelValue":t[0]||(t[0]=c=>a.selectedType=c),type:"radio",name:"selectedType",value:"contact"},null,512),[[om,a.selectedType]]),m("label",qye,I(e.$t("EMAIL_TRANSCRIPT.FORM.SEND_TO_CONTACT")),1)])):$("",!0),n.currentChat.meta.assignee?(p(),E("div",Zye,[re(m("input",{id:"assignee","onUpdate:modelValue":t[1]||(t[1]=c=>a.selectedType=c),type:"radio",name:"selectedType",value:"assignee"},null,512),[[om,a.selectedType]]),m("label",Qye,I(e.$t("EMAIL_TRANSCRIPT.FORM.SEND_TO_AGENT")),1)])):$("",!0),m("div",Jye,[re(m("input",{id:"other_email_address","onUpdate:modelValue":t[2]||(t[2]=c=>a.selectedType=c),type:"radio",name:"selectedType",value:"other_email_address"},null,512),[[om,a.selectedType]]),m("label",eIe,I(e.$t("EMAIL_TRANSCRIPT.FORM.SEND_TO_OTHER_EMAIL_ADDRESS")),1)]),o.sentToOtherEmailAddress?(p(),E("div",tIe,[m("label",{class:ae({error:s.v$.email.$error})},[re(m("input",{"onUpdate:modelValue":t[3]||(t[3]=c=>a.email=c),type:"text",placeholder:e.$t("EMAIL_TRANSCRIPT.FORM.EMAIL.PLACEHOLDER"),onInput:t[4]||(t[4]=(...c)=>s.v$.email.$touch&&s.v$.email.$touch(...c))},null,40,nIe),[[gt,a.email]]),s.v$.email.$error?(p(),E("span",sIe,I(e.$t("EMAIL_TRANSCRIPT.FORM.EMAIL.ERROR")),1)):$("",!0)],2)])):$("",!0)]),m("div",aIe,[S(l,{faded:"",slate:"",type:"reset",label:e.$t("EMAIL_TRANSCRIPT.CANCEL"),onClick:Ve(o.onCancel,["prevent"])},null,8,["label","onClick"]),S(l,{type:"submit",label:e.$t("EMAIL_TRANSCRIPT.SUBMIT"),disabled:!o.isFormValid},null,8,["label","disabled"])])],32)])]),_:1},8,["show","on-close"])}const iIe=De(Yye,[["render",oIe]]),Yp={__name:"ButtonGroup",props:{noAnimation:{type:Boolean,default:!1}},setup(e){return(t,n)=>(p(),E("div",{class:ae(e.noAnimation?"":"has-[button:not(:disabled):active]:scale-[0.98] transition-transform duration-150 ease-out")},[We(t.$slots,"default")],2))}},lIe={class:"relative flex items-center justify-end resolve-actions"},rIe={key:0,class:"border rounded-lg shadow-lg border-n-strong dark:border-n-strong box-content p-2 w-fit z-10 bg-n-alpha-3 backdrop-blur-[100px] absolute block left-auto top-full mt-0.5 start-0 xl:start-auto xl:end-0 max-w-[12.5rem] min-w-[9.75rem] [&_ul>li]:mb-0"},cIe={__name:"ResolveAction",setup(e){const t=rt(),n=pn(),{t:s}=be(),a=j(null),o=j(!1),[i,l]=yn(),r=()=>l(!1),c=()=>l(!0),u=y(()=>n.getSelectedChat.value),d=y(()=>u.value.status===yt.STATUS_TYPE.OPEN),h=y(()=>u.value.status===yt.STATUS_TYPE.PENDING),g=y(()=>u.value.status===yt.STATUS_TYPE.RESOLVED),f=y(()=>u.value.status===yt.STATUS_TYPE.SNOOZED),b=y(()=>!h.value&&!f.value),A=y(()=>h.value||f.value),v=()=>{const x=document.querySelectorAll(".conversations-list .conversation"),w=document.querySelector("div.conversations-list div.conversation.active"),D=[...x].indexOf(w),M=x.length-1;return{all:x,activeIndex:D,lastIndex:M}},T=()=>{document.querySelector("ninja-keys").open({parent:"snooze_conversation"})},_=(x,w)=>{r(),o.value=!0,t.dispatch("toggleStatus",{conversationId:u.value.id,status:x,snoozedUntil:w}).then(()=>{ne(s("CONVERSATION.CHANGE_STATUS")),o.value=!1})},N=()=>{_(yt.STATUS_TYPE.OPEN)},R=()=>{_(yt.STATUS_TYPE.RESOLVED)};return Os({"Alt+KeyM":{action:()=>{var x;return(x=a.value)==null?void 0:x.$el.click()},allowOnFocusedInput:!0},"Alt+KeyE":{action:async()=>{await _(yt.STATUS_TYPE.RESOLVED)}},"$mod+Alt+KeyE":{action:async x=>{const{all:w,activeIndex:D,lastIndex:M}=v();await _(yt.STATUS_TYPE.RESOLVED),D<M?w[D+1].click():w.length>1&&(w[0].click(),document.querySelector(".conversations-list").scrollTop=0),x.preventDefault()}}}),Yo(lAe,N),Yo(rAe,R),(x,w)=>{const D=Qe("on-clickaway");return p(),E("div",lIe,[S(Yp,{class:ae(["rounded-lg shadow outline-1 outline flex-shrink-0",A.value?"outline-transparent":"outline-n-container"])},{default:Y(()=>[d.value?(p(),L(te,{key:0,label:C(s)("CONVERSATION.HEADER.RESOLVE_ACTION"),size:"sm",color:"slate","no-animation":"",class:"ltr:rounded-r-none rtl:rounded-l-none !outline-0","is-loading":o.value,onClick:R},null,8,["label","is-loading"])):g.value?(p(),L(te,{key:1,label:C(s)("CONVERSATION.HEADER.REOPEN_ACTION"),size:"sm",color:"slate","no-animation":"",class:"ltr:rounded-r-none rtl:rounded-l-none !outline-0","is-loading":o.value,onClick:N},null,8,["label","is-loading"])):A.value?(p(),L(te,{key:2,label:C(s)("CONVERSATION.HEADER.OPEN_ACTION"),size:"sm",color:"slate","no-animation":"","is-loading":o.value,onClick:N},null,8,["label","is-loading"])):$("",!0),b.value?(p(),L(te,{key:3,ref_key:"arrowDownButtonRef",ref:a,icon:"i-lucide-chevron-down",disabled:o.value,size:"sm","no-animation":"",class:"ltr:rounded-l-none rtl:rounded-r-none !outline-0",color:"slate","trailing-icon":"",onClick:c},null,8,["disabled"])):$("",!0)]),_:1},8,["class"]),C(i)?re((p(),E("div",rIe,[S(cp,{class:"mb-0"},{default:Y(()=>[h.value?$("",!0):(p(),L(Gc,{key:0},{default:Y(()=>[S(te,{label:C(s)("CONVERSATION.RESOLVE_DROPDOWN.SNOOZE_UNTIL"),ghost:"",slate:"",sm:"",start:"",icon:"i-lucide-alarm-clock-minus",class:"w-full",onClick:w[0]||(w[0]=()=>T())},null,8,["label"])]),_:1})),h.value?$("",!0):(p(),L(Gc,{key:1},{default:Y(()=>[S(te,{label:C(s)("CONVERSATION.RESOLVE_DROPDOWN.MARK_PENDING"),ghost:"",slate:"",sm:"",start:"",icon:"i-lucide-circle-dot-dashed",class:"w-full",onClick:w[1]||(w[1]=()=>_(C(yt).STATUS_TYPE.PENDING))},null,8,["label"])]),_:1}))]),_:1})])),[[D,r]]):$("",!0)])}}},uIe={class:"relative flex items-center gap-2 actions--container"},dIe={class:"relative flex items-center group"},pIe={__name:"MoreActions",setup(e){const t=na(),{t:n}=be(),[s,a]=yn(!1),[o,i]=yn(!1),l=y(()=>t.getters.getSelectedChat),r=y(()=>{const h=[];return l.value.muted?h.push({icon:"i-lucide-volume-1",label:n("CONTACT_PANEL.UNMUTE_CONTACT"),action:"unmute",value:"unmute"}):h.push({icon:"i-lucide-volume-off",label:n("CONTACT_PANEL.MUTE_CONTACT"),action:"mute",value:"mute"}),h.push({icon:"i-lucide-share",label:n("CONTACT_PANEL.SEND_TRANSCRIPT"),action:"send_transcript",value:"send_transcript"}),h}),c=({action:h})=>{i(!1),h==="mute"?(t.dispatch("muteConversation",l.value.id),ne(n("CONTACT_PANEL.MUTED_SUCCESS"))):h==="unmute"?(t.dispatch("unmuteConversation",l.value.id),ne(n("CONTACT_PANEL.UNMUTED_SUCCESS"))):h==="send_transcript"&&a()},u=()=>{t.dispatch("muteConversation",l.value.id),ne(n("CONTACT_PANEL.MUTED_SUCCESS"))},d=()=>{t.dispatch("unmuteConversation",l.value.id),ne(n("CONTACT_PANEL.UNMUTED_SUCCESS"))};return Dt.on(jb,u),Dt.on(Kb,d),Dt.on(Xb,a),ei(()=>{Dt.off(jb,u),Dt.off(Kb,d),Dt.off(Xb,a)}),(h,g)=>{const f=Qe("tooltip"),b=Qe("on-clickaway");return p(),E("div",uIe,[S(cIe,{"conversation-id":l.value.id,status:l.value.status},null,8,["conversation-id","status"]),re((p(),E("div",dIe,[re(S(te,{size:"sm",variant:"ghost",color:"slate",icon:"i-lucide-more-vertical",class:"rounded-md group-hover:bg-n-alpha-2",onClick:g[0]||(g[0]=A=>C(i)())},null,512),[[f,h.$t("CONVERSATION.HEADER.MORE_ACTIONS")]]),C(o)?(p(),L(qs,{key:0,"menu-items":r.value,class:"mt-1 ltr:right-0 rtl:left-0 top-full",onAction:c},null,8,["menu-items"])):$("",!0)])),[[b,()=>C(i)(!1)]]),C(s)?(p(),L(iIe,{key:0,show:C(s),"current-chat":l.value,onCancel:C(a)},null,8,["show","current-chat","onCancel"])):$("",!0)])}}},mIe={class:"flex items-center justify-start w-full xl:w-auto max-w-full min-w-0 xl:flex-1"},hIe={class:"flex flex-col items-start min-w-0 ml-2 overflow-hidden rtl:ml-0 rtl:mr-2"},fIe={class:"flex flex-row items-center max-w-full gap-1 p-0 m-0"},gIe={class:"text-sm font-medium truncate leading-tight text-n-slate-12"},_Ie={class:"flex items-center gap-2 overflow-hidden text-xs conversation--header--actions text-ellipsis whitespace-nowrap"},vIe={key:1,class:"font-medium text-n-amber-10"},EIe={class:"flex flex-row items-center justify-start xl:justify-end flex-shrink-0 gap-2 w-full xl:w-auto header-actions-wrap"},bIe={__name:"ConversationHeader",props:{chat:{type:Object,default:()=>({})},showBackButton:{type:Boolean,default:!1}},setup(e){const t=e,{t:n}=be(),s=na(),a=wt(),o=j(null),{width:i}=dr(o),{isAWebWidgetInbox:l}=Np(),r=y(()=>s.getters.getSelectedChat),c=y(()=>s.getters.getCurrentAccountId),u=y(()=>t.chat.meta),d=y(()=>{const{params:{inbox_id:_,label:N,teamId:R,id:O},name:x}=a,w={conversation_through_mentions:"mention",conversation_through_unattended:"unattended"};return AS({accountId:c.value,inboxId:_,label:N,teamId:R,conversationType:w[x],customViewId:O})}),h=y(()=>l.value?u.value.hmac_verified:!0),g=y(()=>s.getters["contacts/getContact"](t.chat.meta.sender.id)),f=y(()=>r.value.status===yt.STATUS_TYPE.SNOOZED),b=y(()=>{const{snoozed_until:_}=r.value;return _?`${n("CONVERSATION.HEADER.SNOOZED_UNTIL")} ${aAe(_)}`:n("CONVERSATION.HEADER.SNOOZED_UNTIL_NEXT_REPLY")}),A=y(()=>{const{inbox_id:_}=t.chat;return s.getters["inboxes/getInbox"](_)}),v=y(()=>s.getters["inboxes/getInboxes"].length>1),T=y(()=>{var _;return(_=t.chat)==null?void 0:_.sla_policy_id});return(_,N)=>{const R=W("fluent-icon"),O=Qe("tooltip");return p(),E("div",{ref_key:"conversationHeader",ref:o,class:"flex flex-col gap-3 items-center justify-between flex-1 w-full min-w-0 xl:flex-row px-3 py-2 border-b bg-n-background border-n-weak h-24 xl:h-12"},[m("div",mIe,[e.showBackButton?(p(),L(Rr,{key:0,"back-url":d.value,class:"ltr:mr-2 rtl:ml-2"},null,8,["back-url"])):$("",!0),S(kt,{name:g.value.name,src:g.value.thumbnail,size:32,status:g.value.availability_status,"hide-offline-status":"","rounded-full":""},null,8,["name","src","status"]),m("div",hIe,[m("div",fIe,[m("span",gIe,I(g.value.name),1),h.value?$("",!0):re((p(),L(R,{key:0,size:"14",class:"text-n-amber-10 my-0 mx-0 min-w-[14px] flex-shrink-0",icon:"warning"},null,512)),[[O,_.$t("CONVERSATION.UNVERIFIED_SESSION")]])]),m("div",_Ie,[v.value?(p(),L(j_,{key:0,inbox:A.value,class:"!mx-0"},null,8,["inbox"])):$("",!0),f.value?(p(),E("span",vIe,I(b.value),1)):$("",!0)])])]),m("div",EIe,[T.value?(p(),L(xI,{key:0,chat:e.chat,"show-extended-info":"","parent-width":C(i),class:"hidden md:flex"},null,8,["chat","parent-width"])):$("",!0),S(pIe,{"conversation-id":r.value.id},null,8,["conversation-id"])])],512)}}},TIe={components:{LoadingState:Nr},props:{config:{type:Array,default:()=>[]},currentChat:{type:Object,default:()=>({})},isVisible:{type:Boolean,default:!1},position:{type:Number,required:!0}},data(){return{hasOpenedAtleastOnce:!1,iframeLoading:!0}},computed:{dashboardAppContext(){return{conversation:this.currentChat,contact:this.$store.getters["contacts/getContact"](this.contactId),currentAgent:this.currentAgent}},contactId(){var e,t,n;return(n=(t=(e=this.currentChat)==null?void 0:e.meta)==null?void 0:t.sender)==null?void 0:n.id},currentAgent(){const{id:e,name:t,email:n}=this.$store.getters.getCurrentUser;return{id:e,name:t,email:n}}},watch:{isVisible(){this.isVisible&&(this.hasOpenedAtleastOnce=!0)}},mounted(){window.addEventListener("message",this.triggerEvent)},unmounted(){window.removeEventListener("message",this.triggerEvent)},methods:{triggerEvent(e){this.isVisible&&e.data==="chatwoot-dashboard-app:fetch-info"&&this.onIframeLoad(0)},getFrameId(e){return`dashboard-app--frame-${this.position}-${e}`},onIframeLoad(e){const t=document.getElementById(this.getFrameId(e)),n={event:"appContext",data:this.dashboardAppContext};t.contentWindow.postMessage(JSON.stringify(n),"*"),this.iframeLoading=!1}}},SIe={key:0,class:"dashboard-app--container"},AIe=["id","src","onLoad"];function yIe(e,t,n,s,a,o){const i=W("LoadingState");return a.hasOpenedAtleastOnce?(p(),E("div",SIe,[(p(!0),E(ue,null,Ae(n.config,(l,r)=>(p(),E("div",{key:r,class:"dashboard-app--list"},[a.iframeLoading?(p(),L(i,{key:0,message:e.$t("DASHBOARD_APPS.LOADING_MESSAGE"),class:"dashboard-app_loading-container"},null,8,["message"])):$("",!0),l.type==="frame"&&l.url?(p(),E("iframe",{key:1,id:o.getFrameId(r),src:l.url,onLoad:()=>o.onIframeLoad(r)},null,40,AIe)):$("",!0)]))),128))])):$("",!0)}const IIe=De(TIe,[["render",yIe],["__scopeId","data-v-e20fef4a"]]),CIe={class:"h-full w-full bg-n-background border border-n-weak rounded-lg p-4 flex flex-col"},NIe={class:"flex-1 flex items-center justify-center"},OIe=["src","alt"],RIe={class:"mt-auto"},xIe={class:"text-base text-n-slate-12 font-interDisplay font-semibold tracking-[0.3px]"},wIe={class:"text-n-slate-11 text-sm"},Qu={__name:"OnboardingFeatureCard",props:{imageSrc:{type:String,default:""},imageAlt:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""},to:{type:String,default:""},linkText:{type:String,default:""}},setup(e){return(t,n)=>{const s=W("router-link");return p(),E("div",CIe,[m("div",NIe,[m("img",{src:e.imageSrc,alt:e.imageAlt,class:"h-36 w-auto mx-auto"},null,8,OIe)]),m("div",RIe,[m("p",xIe,I(e.title),1),m("p",wIe,I(e.description),1),e.to?(p(),L(s,{key:0,to:{name:e.to},class:"no-underline text-n-brand text-sm font-medium"},{default:Y(()=>[m("span",null,I(e.linkText),1),n[0]||(n[0]=m("span",{class:"ml-2"},I(""),-1))]),_:1},8,["to"])):$("",!0)])])}}},$Ie={class:"min-h-screen lg:max-w-5xl max-w-4xl mx-auto grid grid-cols-2 grid-rows-[auto_1fr_1fr] auto-rows-min gap-4 p-8 w-full font-inter overflow-auto"},MIe={class:"col-span-full self-start"},LIe={class:"text-xl font-semibold text-n-slate-12 font-interDisplay tracking-[0.3px]"},DIe={class:"text-n-slate-11 max-w-2xl text-base"},PIe={__name:"OnboardingView",setup(e){const t=pn(),{t:n}=be(),s=y(()=>t["globalConfig/get"].value),a=y(()=>t.getCurrentUser.value),o=y(()=>{const i=new Date().getHours();let l;return i<12?l="ONBOARDING.GREETING_MORNING":i<18?l="ONBOARDING.GREETING_AFTERNOON":l="ONBOARDING.GREETING_EVENING",n(l,{name:a.value.name,installationName:s.value.installationName})});return(i,l)=>(p(),E("div",$Ie,[m("div",MIe,[m("p",LIe,I(o.value),1),m("p",DIe,I(i.$t("ONBOARDING.DESCRIPTION",{installationName:s.value.installationName})),1)]),S(Qu,{"image-src":"/dashboard/images/onboarding/omnichannel-inbox.png","image-alt":"Omnichannel",to:"settings_inbox_new",title:i.$t("ONBOARDING.ALL_CONVERSATION.TITLE"),description:i.$t("ONBOARDING.ALL_CONVERSATION.DESCRIPTION"),"link-text":i.$t("ONBOARDING.ALL_CONVERSATION.NEW_LINK")},null,8,["title","description","link-text"]),S(Qu,{"image-src":"/dashboard/images/onboarding/teams.png","image-alt":"Teams",to:"settings_teams_new",title:i.$t("ONBOARDING.TEAM_MEMBERS.TITLE"),description:i.$t("ONBOARDING.TEAM_MEMBERS.DESCRIPTION"),"link-text":i.$t("ONBOARDING.TEAM_MEMBERS.NEW_LINK")},null,8,["title","description","link-text"]),S(Qu,{"image-src":"/dashboard/images/onboarding/canned-responses.png","image-alt":"Canned responses",to:"canned_list",title:i.$t("ONBOARDING.CANNED_RESPONSES.TITLE"),description:i.$t("ONBOARDING.CANNED_RESPONSES.DESCRIPTION"),"link-text":i.$t("ONBOARDING.CANNED_RESPONSES.NEW_LINK")},null,8,["title","description","link-text"]),S(Qu,{"image-src":"/dashboard/images/onboarding/labels.png","image-alt":"Labels",to:"labels_list",title:i.$t("ONBOARDING.LABELS.TITLE"),description:i.$t("ONBOARDING.LABELS.DESCRIPTION"),"link-text":i.$t("ONBOARDING.LABELS.NEW_LINK")},null,8,["title","description","link-text"])]))}},kIe={props:{customClass:{type:String,default:""}}};function BIe(e,t,n,s,a,o){return p(),E("kbd",{class:ae(["hotkey p-0.5 min-w-[1rem] uppercase",n.customClass])},[We(e.$slots,"default")],2)}const Jl=De(kIe,[["render",BIe]]),UIe={components:{Hotkey:Jl},data(){return{keyShortcuts:[{key:"K",description:this.$t("CONVERSATION.EMPTY_STATE.CMD_BAR")},{key:"/",description:this.$t("CONVERSATION.EMPTY_STATE.KEYBOARD_SHORTCUTS")}]}}},FIe={class:"flex flex-col gap-2 mt-9"},GIe={class:"flex items-center gap-2"},VIe={class:"text-sm font-medium text-center text-n-slate-12"};function HIe(e,t,n,s,a,o){const i=W("Hotkey");return p(),E("div",FIe,[(p(!0),E(ue,null,Ae(a.keyShortcuts,l=>(p(),E("div",{key:l.key,class:"flex items-center gap-2"},[m("div",GIe,[S(i,{"custom-class":"w-8 h-6 text-lg font-medium text-n-slate-12 outline outline-n-container outline-1 bg-n-alpha-3"},{default:Y(()=>t[0]||(t[0]=[xe("  ")])),_:1}),S(i,{"custom-class":"w-8 h-6 text-xs font-medium text-n-slate-12 outline outline-n-container outline-1 bg-n-alpha-3"},{default:Y(()=>[xe(I(l.key),1)]),_:2},1024)]),m("span",VIe,I(l.description),1)]))),128))])}const WIe=De(UIe,[["render",HIe]]),zIe="/vite-dev/assets/no-chat-dark-BSWrQBd3.svg",YIe="/vite-dev/assets/no-chat-okxWD-4P.svg",jIe={components:{FeaturePlaceholder:WIe},props:{message:{type:String,required:!0}}},KIe={class:"flex flex-col items-center justify-center h-full"},XIe={class:"text-sm text-n-slate-12 font-medium text-center"};function qIe(e,t,n,s,a,o){const i=W("FeaturePlaceholder");return p(),E("div",KIe,[t[1]||(t[1]=m("img",{class:"m-4 w-32 hidden dark:block",src:zIe,alt:"No Chat dark"},null,-1)),t[2]||(t[2]=m("img",{class:"m-4 w-32 block dark:hidden",src:YIe,alt:"No Chat"},null,-1)),m("span",XIe,[xe(I(n.message)+" ",1),t[0]||(t[0]=m("br",null,null,-1))]),S(i)])}const ZIe=De(jIe,[["render",qIe]]),QIe={components:{OnboardingView:PIe,EmptyStateMessage:ZIe},props:{isOnExpandedLayout:{type:Boolean,default:!1}},setup(){const{isAdmin:e}=za(),{accountScopedUrl:t}=ln();return{isAdmin:e,accountScopedUrl:t}},computed:{...mt({currentChat:"getSelectedChat",allConversations:"getAllConversations",inboxesList:"inboxes/getInboxes",uiFlags:"inboxes/getUIFlags",loadingChatList:"getChatListLoadingStatus"}),loadingIndicatorMessage(){return this.uiFlags.isFetching?this.$t("CONVERSATION.LOADING_INBOXES"):this.$t("CONVERSATION.LOADING_CONVERSATIONS")},conversationMissingMessage(){return this.isOnExpandedLayout?this.$t("CONVERSATION.404"):this.$t("CONVERSATION.SELECT_A_CONVERSATION")},newInboxURL(){return this.accountScopedUrl("settings/inboxes/new")},emptyClassName(){return!this.inboxesList.length&&!this.uiFlags.isFetching&&!this.loadingChatList&&this.isAdmin?"h-full overflow-auto w-full":"flex-1 min-w-0 px-0 flex flex-col items-center justify-center h-full"}}},JIe={key:1,class:"clearfix mx-auto"},eCe={key:2,class:"flex flex-col items-center justify-center h-full"};function tCe(e,t,n,s,a,o){const i=W("woot-loading-state"),l=W("OnboardingView"),r=W("EmptyStateMessage");return p(),E("div",{class:ae(o.emptyClassName)},[e.uiFlags.isFetching||e.loadingChatList?(p(),L(i,{key:0,message:o.loadingIndicatorMessage},null,8,["message"])):$("",!0),!e.inboxesList.length&&!e.uiFlags.isFetching&&!e.loadingChatList?(p(),E("div",JIe,[s.isAdmin?(p(),L(l,{key:0})):(p(),L(r,{key:1,message:e.$t("CONVERSATION.NO_INBOX_AGENT")},null,8,["message"]))])):!e.uiFlags.isFetching&&!e.loadingChatList?(p(),E("div",eCe,[e.allConversations.length?e.allConversations.length&&!e.currentChat.id?(p(),L(r,{key:1,message:o.conversationMissingMessage},null,8,["message"])):$("",!0):(p(),L(r,{key:0,message:e.$t("CONVERSATION.NO_MESSAGE_1")},null,8,["message"]))])):$("",!0)],2)}const nCe=De(QIe,[["render",tCe]]);class sCe extends Ea{constructor(){super("integrations",{accountScoped:!0}),this.conversation_events=["summarize","reply_suggestion","label_suggestion"],this.message_events=["rephrase"]}processEvent({type:t="rephrase",content:n,tone:s,conversationId:a,hookId:o}){let i={tone:s,content:n};return this.conversation_events.includes(t)&&(i={conversation_display_id:a}),axios.post(`${this.url}/hooks/${o}/process_event`,{event:{name:t,data:i}})}}const eT=new sCe,aCe=e=>e.toLowerCase().split(",").filter(t=>t.trim()).map(t=>t.trim()).filter((t,n,s)=>s.indexOf(t)===n);function hu(){const e=rt(),t=pn(),{t:n}=be(),s=y(()=>t["integrations/getUIFlags"].value),a=_e("integrations/getAppIntegrations"),o=_e("getSelectedChat"),i=_e("draftMessages/getReplyEditorMode"),l=y(()=>{var _;return(_=a.value.find(N=>N.id==="openai"&&!!N.hooks.length))==null?void 0:_.hooks[0]}),r=y(()=>!!l.value),c=y(()=>{if(l.value){const{settings:_={}}=l.value||{};return _.label_suggestion}return!1}),u=y(()=>s.value.isFetching),d=y(()=>{var _;return(_=l.value)==null?void 0:_.id}),h=y(()=>{var _;return(_=o.value)==null?void 0:_.id}),g=y(()=>`draft-${h.value}-${i.value}`),f=y(()=>t["draftMessages/get"].value(g.value)),b=async()=>{a.value.length||await e.dispatch("integrations/get")},A=async(_,N)=>{const R=Sd[_.toUpperCase()];R&&zt(R,{type:_,...N})},v=async()=>{if(!h.value)return[];try{const _=await eT.processEvent({type:"label_suggestion",hookId:d.value,conversationId:h.value}),{data:{message:N}}=_;return aCe(N)}catch{return[]}},T=async(_="rephrase")=>{var N;try{const R=await eT.processEvent({hookId:d.value,type:_,content:f.value,conversationId:h.value}),{data:{message:O}}=R;return O}catch(R){const O=R.response.data.error,x=((N=O==null?void 0:O.error)==null?void 0:N.message)||n("INTEGRATION_SETTINGS.OPEN_AI.GENERATE_ERROR");return ne(x),""}};return lt(()=>{b()}),{draftMessage:f,uiFlags:s,appIntegrations:a,currentChat:o,replyMode:i,isAIIntegrationEnabled:r,isLabelSuggestionFeatureEnabled:c,isFetchingAppIntegrations:u,fetchIntegrationsIfRequired:b,recordAnalytics:A,fetchLabelSuggestions:v,processEvent:T}}const tT=[],oCe={mounted(){const e=this.getKeyboardEvents();if(e){const t=this.wrapEventsInKeybindingsHandler(e),n=FR(t);this.addEventHandler(n)}},unmounted(){var e;if(this.$el&&((e=this.$el.dataset)!=null&&e.keydownHandlerIndex)){const t=tT[this.$el.dataset.keydownHandlerIndex];document.removeEventListener("keydown",t)}},methods:{addEventHandler(e){const t=tT.push(e)-1,n=this.getElementToBind();n&&n.dataset&&(document.addEventListener("keydown",e),n.dataset.keydownHandlerIndex=t)},getElementToBind(){return this.$el},getKeyboardEvents(){return null},wrapEventsInKeybindingsHandler(e){const t={};return Object.keys(e).forEach(n=>{t[n]=this.keydownWrapper(e[n])}),t},keydownWrapper(e){return t=>{const n=typeof e=="function"?e:e.action,s=typeof e=="function"?!1:e.allowOnFocusedInput;BR(t)&&(UR(t)&&t.target.blur(),!s)||n(t)}}}},iCe={class:"reply-editor bg-n-slate-9/10 rounded-md py-1 pl-2 pr-1 text-xs tracking-wide mt-2 flex items-center gap-1.5 -mx-2"},lCe={class:"flex-grow gap-1 mt-px text-xs truncate"},rCe={__name:"ReplyToMessage",props:{message:{type:Object,required:!0}},emits:["dismiss"],setup(e,{emit:t}){const n=t;return(s,a)=>{const o=W("fluent-icon"),i=Qe("tooltip");return p(),E("div",iCe,[S(o,{class:"flex-shrink-0 icon",icon:"arrow-reply",size:"14"}),m("div",lCe,[xe(I(s.$t("CONVERSATION.REPLYBOX.REPLYING_TO"))+" ",1),S(CI,{message:e.message,"show-message-type":!1,"default-empty-message":s.$t("CONVERSATION.REPLY_MESSAGE_NOT_FOUND"),class:"inline"},null,8,["message","default-empty-message"])]),re(S(te,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:a[0]||(a[0]=Ve(l=>n("dismiss"),["stop"]))},null,512),[[i,s.$t("CONVERSATION.REPLYBOX.DISMISS_REPLY")]])])}}},cCe={class:"flex overflow-auto max-h-[12.5rem]"},uCe={class:"max-w-[4rem] flex-shrink-0 w-6 flex items-center"},dCe=["src"],pCe={key:1,class:"relative w-6 h-6 text-lg text-left -top-px"},mCe={class:"max-w-3/5 min-w-[50%] overflow-hidden text-ellipsis"},hCe={class:"h-4 overflow-hidden text-sm font-medium text-ellipsis whitespace-nowrap"},fCe={class:"w-[30%] justify-center"},gCe={class:"overflow-hidden text-xs text-ellipsis whitespace-nowrap"},_Ce={class:"flex items-center justify-center"},vCe={__name:"AttachmentsPreview",props:{attachments:{type:Array,default:()=>[]}},emits:["removeAttachment"],setup(e,{emit:t}){const n=e,s=t,a=y(()=>n.attachments.filter(u=>!(u!=null&&u.isRecordedAudio))),o=y(()=>n.attachments.filter(u=>u.isRecordedAudio)),i=u=>{s("removeAttachment",a.value.filter((d,h)=>h!==u).concat(o.value))},l=u=>{const d=u.byte_size||u.size;return NN(d,0)},r=u=>(u.content_type||u.type).includes("image"),c=u=>u.filename||u.name;return(u,d)=>(p(),E("div",cCe,[(p(!0),E(ue,null,Ae(a.value,(h,g)=>(p(),E("div",{key:h.id,class:"flex items-center p-1 bg-n-slate-3 gap-1 rounded-md w-[15rem] mb-1"},[m("div",uCe,[r(h.resource)?(p(),E("img",{key:0,class:"object-cover w-6 h-6 rounded-sm",src:h.thumb},null,8,dCe)):(p(),E("span",pCe,"  "))]),m("div",mCe,[m("span",hCe,I(c(h.resource)),1)]),m("div",fCe,[m("span",gCe,I(l(h.resource)),1)]),m("div",_Ce,[S(te,{ghost:"",slate:"",xs:"",icon:"i-lucide-x",onClick:f=>i(g)},null,8,["onClick"])])]))),128))]))}},ECe=["disabled"],bCe={__name:"EditorModeToggle",props:{mode:{type:String,default:Vs.REPLY},disabled:{type:Boolean,default:!1}},emits:["toggleMode"],setup(e){const t=e,n=Ss("wootEditorReplyMode"),s=Ss("wootEditorPrivateMode"),a=dr(n),o=dr(s),i=y(()=>t.disabled||t.mode===Vs.NOTE),l=y(()=>`${(i.value?o.width.value:a.width.value)+16}px`),r=y(()=>`${i.value?a.width.value+16:0}px`);return(c,u)=>(p(),E("button",{class:ae(["flex items-center w-auto h-8 p-1 transition-all border rounded-full bg-n-alpha-2 group relative duration-300 ease-in-out z-0 active:scale-[0.995] active:duration-75",{"cursor-not-allowed":e.disabled}]),disabled:e.disabled,onClick:u[0]||(u[0]=d=>c.$emit("toggleMode"))},[m("div",{ref_key:"wootEditorReplyMode",ref:n,class:"flex items-center gap-1 px-2 z-20"},I(c.$t("CONVERSATION.REPLYBOX.REPLY")),513),m("div",{ref_key:"wootEditorPrivateMode",ref:s,class:"flex items-center gap-1 px-2 z-20"},I(c.$t("CONVERSATION.REPLYBOX.PRIVATE_NOTE")),513),m("div",{class:ae(["absolute shadow-sm rounded-full h-6 w-[var(--chip-width)] ease-in-out translate-x-[var(--translate-x)] rtl:translate-x-[var(--rtl-translate-x)] bg-n-solid-1",{"transition-all duration-300":!e.disabled}]),style:Zt({"--chip-width":l.value,"--translate-x":r.value,"--rtl-translate-x":"calc(-1 * var(--translate-x))"})},null,6)],10,ECe))}},TCe={name:"ReplyTopPanel",components:{NextButton:te,EditorModeToggle:bCe},props:{mode:{type:String,default:Vs.REPLY},isReplyRestricted:{type:Boolean,default:!1},isMessageLengthReachingThreshold:{type:Boolean,default:()=>!1},charactersRemaining:{type:Number,default:()=>0}},emits:["setReplyMode","togglePopout"],setup(e,{emit:t}){const n=l=>{t("setReplyMode",l)},s=()=>{e.isReplyRestricted||n(Vs.REPLY)},a=()=>{n(Vs.NOTE)},o=()=>{const l=e.mode===Vs.REPLY?Vs.NOTE:Vs.REPLY;n(l)};return Os({"Alt+KeyP":{action:()=>a(),allowOnFocusedInput:!0},"Alt+KeyL":{action:()=>s(),allowOnFocusedInput:!0}}),{handleModeToggle:o,handleReplyClick:s,handleNoteClick:a,REPLY_EDITOR_MODES:Vs}},computed:{replyButtonClass(){return{"is-active":this.mode===Vs.REPLY}},noteButtonClass(){return{"is-active":this.mode===Vs.NOTE}},charLengthClass(){return this.charactersRemaining<0?"text-n-ruby-9":"text-n-slate-11"},characterLengthWarning(){return this.charactersRemaining<0?`${-this.charactersRemaining} ${Rv.NEGATIVE}`:`${this.charactersRemaining} ${Rv.UNDER_50}`}}},SCe={class:"flex justify-between h-[3.25rem] gap-2 ltr:pl-3 rtl:pr-3"},ACe={class:"flex items-center mx-4 my-0"},yCe={key:0,class:"text-xs"};function ICe(e,t,n,s,a,o){const i=W("EditorModeToggle"),l=W("NextButton");return p(),E("div",SCe,[S(i,{mode:n.mode,disabled:n.isReplyRestricted,class:"mt-3",onToggleMode:s.handleModeToggle},null,8,["mode","disabled","onToggleMode"]),m("div",ACe,[n.isMessageLengthReachingThreshold?(p(),E("div",yCe,[m("span",{class:ae(o.charLengthClass)},I(o.characterLengthWarning),3)])):$("",!0)]),S(l,{ghost:"",class:"ltr:rounded-bl-md rtl:rounded-br-md ltr:rounded-br-none rtl:rounded-bl-none ltr:rounded-tl-none rtl:rounded-tr-none text-n-slate-11 ltr:rounded-tr-[11px] rtl:rounded-tl-[11px]",icon:"i-lucide-maximize-2",onClick:t[0]||(t[0]=r=>e.$emit("togglePopout"))})])}const CCe=De(TCe,[["render",ICe]]),jh=e=>e.length?e.replace(/\s+/g,"").split(",").every(n=>Li.$validator(n)):!0,NCe={components:{ButtonV4:te},props:{ccEmails:{type:String,default:""},bccEmails:{type:String,default:""},toEmails:{type:String,default:""}},emits:["update:bccEmails","update:ccEmails","update:toEmails"],setup(){return{v$:bt()}},data(){return{showBcc:!1,ccEmailsVal:"",bccEmailsVal:"",toEmailsVal:""}},watch:{bccEmails(e){e!==this.bccEmailsVal&&(this.bccEmailsVal=e)},ccEmails(e){e!==this.ccEmailsVal&&(this.ccEmailsVal=e)},toEmails(e){e!==this.toEmailsVal&&(this.toEmailsVal=e)}},mounted(){this.ccEmailsVal=this.ccEmails,this.bccEmailsVal=this.bccEmails,this.toEmailsVal=this.toEmails},validations:{ccEmailsVal:{hasValidEmails(e){return jh(e)}},bccEmailsVal:{hasValidEmails(e){return jh(e)}},toEmailsVal:{hasValidEmails(e){return jh(e)}}},methods:{handleAddBcc(){this.showBcc=!0},onBlur(){this.v$.$touch(),this.$emit("update:bccEmails",this.bccEmailsVal),this.$emit("update:ccEmails",this.ccEmailsVal),this.$emit("update:toEmails",this.toEmailsVal)}}},OCe={key:0},RCe={class:"input-group-label"},xCe={class:"flex-1 min-w-0 m-0 rounded-none whitespace-nowrap"},wCe={class:"input-group-wrap"},$Ce={class:"input-group-label"},MCe={class:"flex-1 min-w-0 m-0 rounded-none whitespace-nowrap"},LCe={key:0,class:"message"},DCe={key:1,class:"input-group-wrap"},PCe={class:"input-group-label"},kCe={class:"flex-1 min-w-0 m-0 rounded-none whitespace-nowrap"},BCe={key:0,class:"message"};function UCe(e,t,n,s,a,o){const i=W("woot-input"),l=W("ButtonV4");return p(),E("div",null,[n.toEmails?(p(),E("div",OCe,[m("div",{class:ae(["input-group small",{error:s.v$.toEmailsVal.$error}])},[m("label",RCe,I(e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.TO")),1),m("div",xCe,[S(i,{modelValue:s.v$.toEmailsVal.$model,"onUpdate:modelValue":t[0]||(t[0]=r=>s.v$.toEmailsVal.$model=r),type:"text",class:ae(["[&>input]:!mb-0 [&>input]:border-transparent [&>input]:!outline-none [&>input]:h-8 [&>input]:!text-sm [&>input]:!border-0 [&>input]:border-none [&>input]:!bg-transparent dark:[&>input]:!bg-transparent",{error:s.v$.toEmailsVal.$error}]),placeholder:e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.PLACEHOLDER"),onBlur:o.onBlur},null,8,["modelValue","class","placeholder","onBlur"])])],2)])):$("",!0),m("div",wCe,[m("div",{class:ae(["input-group small",{error:s.v$.ccEmailsVal.$error}])},[m("label",$Ce,I(e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.LABEL")),1),m("div",MCe,[S(i,{modelValue:s.v$.ccEmailsVal.$model,"onUpdate:modelValue":t[1]||(t[1]=r=>s.v$.ccEmailsVal.$model=r),class:ae(["[&>input]:!mb-0 [&>input]:border-transparent [&>input]:!outline-none [&>input]:h-8 [&>input]:!text-sm [&>input]:!border-0 [&>input]:border-none [&>input]:!bg-transparent dark:[&>input]:!bg-transparent",{error:s.v$.ccEmailsVal.$error}]),type:"text",placeholder:e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.PLACEHOLDER"),onBlur:o.onBlur},null,8,["modelValue","class","placeholder","onBlur"])]),a.showBcc?$("",!0):(p(),L(l,{key:0,label:e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.ADD_BCC"),ghost:"",xs:"",primary:"",onClick:o.handleAddBcc},null,8,["label","onClick"]))],2),s.v$.ccEmailsVal.$error?(p(),E("span",LCe,I(e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.ERROR")),1)):$("",!0)]),a.showBcc?(p(),E("div",DCe,[m("div",{class:ae(["input-group small",{error:s.v$.bccEmailsVal.$error}])},[m("label",PCe,I(e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.BCC.LABEL")),1),m("div",kCe,[S(i,{modelValue:s.v$.bccEmailsVal.$model,"onUpdate:modelValue":t[2]||(t[2]=r=>s.v$.bccEmailsVal.$model=r),type:"text",class:ae(["[&>input]:!mb-0 [&>input]:border-transparent [&>input]:!outline-none [&>input]:h-8 [&>input]:!text-sm [&>input]:!border-0 [&>input]:border-none [&>input]:!bg-transparent dark:[&>input]:!bg-transparent",{error:s.v$.bccEmailsVal.$error}]),placeholder:e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.BCC.PLACEHOLDER"),onBlur:o.onBlur},null,8,["modelValue","class","placeholder","onBlur"])])],2),s.v$.bccEmailsVal.$error?(p(),E("span",BCe,I(e.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.BCC.ERROR")),1)):$("",!0)])):$("",!0)])}const FCe=De(NCe,[["render",UCe],["__scopeId","data-v-aa13b592"]]);class GCe extends Ea{constructor(){super("integrations/dyte",{accountScoped:!0})}createAMeeting(t){return axios.post(`${this.url}/create_a_meeting`,{conversation_id:t})}addParticipantToMeeting(t){return axios.post(`${this.url}/add_participant_to_meeting`,{message_id:t})}}const DI=new GCe,VCe={components:{NextButton:te},props:{conversationId:{type:Number,default:0}},data(){return{isLoading:!1}},computed:{...mt({appIntegrations:"integrations/getAppIntegrations"}),isVideoIntegrationEnabled(){return this.appIntegrations.find(e=>e.id==="dyte"&&!!e.hooks.length)}},mounted(){this.appIntegrations.length||this.$store.dispatch("integrations/get")},methods:{async onClick(){this.isLoading=!0;try{await DI.createAMeeting(this.conversationId)}catch{ne(this.$t("INTEGRATION_SETTINGS.DYTE.CREATE_ERROR"))}finally{this.isLoading=!1}}}};function HCe(e,t,n,s,a,o){const i=W("NextButton"),l=Qe("tooltip");return o.isVideoIntegrationEnabled?re((p(),L(i,{key:0,icon:"i-ph-video-camera",slate:"",faded:"",sm:"",onClick:o.onClick},null,8,["onClick"])),[[l,e.$t("INTEGRATION_SETTINGS.DYTE.START_VIDEO_CALL_HELP_TEXT"),void 0,{"top-end":!0}]]):$("",!0)}const WCe=De(VCe,[["render",HCe]]),zCe={components:{NextButton:te},emits:["close"],setup(){const{updateUISettings:e}=tn(),{recordAnalytics:t}=hu(),n=bt();return{updateUISettings:e,v$:n,recordAnalytics:t}},data(){return{value:""}},validations:{value:{required:Ye}},methods:{onClose(){this.$emit("close")},onDismiss(){ne(this.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.DISMISS_MESSAGE")),this.updateUISettings({is_open_ai_cta_modal_dismissed:!0}),this.onClose()},async finishOpenAI(){var t,n;const e={app_id:"openai",settings:{api_key:this.value}};try{await this.$store.dispatch("integrations/createHook",e),this.alertMessage=this.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.SUCCESS_MESSAGE"),this.recordAnalytics(Sd.ADDED_AI_INTEGRATION_VIA_CTA_BUTTON),this.onClose()}catch(s){const a=(n=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:n.message;this.alertMessage=a||this.$t("INTEGRATION_APPS.ADD.API.ERROR_MESSAGE")}finally{ne(this.alertMessage)}},openOpenAIDoc(){window.open("https://www.chatwoot.com/blog/v2-17","_blank")}}},YCe={class:"flex-1 min-w-0 px-0"},jCe={class:"w-full mt-2"},KCe={class:"flex flex-row justify-between w-full gap-2 px-0 py-2"},XCe={class:"flex items-center gap-1"};function qCe(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("woot-input"),r=W("NextButton");return p(),E("div",YCe,[S(i,{"header-title":e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.TITLE"),"header-content":e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.DESC")},null,8,["header-title","header-content"]),m("form",{class:"flex flex-col flex-wrap modal-content",onSubmit:t[1]||(t[1]=Ve((...c)=>o.finishOpenAI&&o.finishOpenAI(...c),["prevent"]))},[m("div",jCe,[S(l,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=c=>a.value=c),type:"text",class:ae({error:s.v$.value.$error}),placeholder:e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.KEY_PLACEHOLDER"),onBlur:s.v$.value.$touch},null,8,["modelValue","class","placeholder","onBlur"])]),m("div",KCe,[S(r,{ghost:"",type:"button",class:"!px-3",label:e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.BUTTONS.NEED_HELP"),onClick:Ve(o.openOpenAIDoc,["prevent"])},null,8,["label","onClick"]),m("div",XCe,[S(r,{faded:"",slate:"",type:"reset",label:e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.BUTTONS.DISMISS"),onClick:Ve(o.onDismiss,["prevent"])},null,8,["label","onClick"]),S(r,{type:"submit",disabled:s.v$.value.$invalid,label:e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.BUTTONS.FINISH")},null,8,["disabled","label"])])])],32)])}const ZCe=De(zCe,[["render",qCe]]),QCe={},JCe={class:"animation-container margin-top-1"},e2e={class:"ai-typing--wrap"};function t2e(e,t){const n=W("fluent-icon");return p(),E("div",JCe,[m("div",e2e,[S(n,{icon:"wand",size:"14",class:"ai-typing--icon"}),m("label",null,I(e.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.AI_WRITING")),1)]),t[0]||(t[0]=m("span",{class:"loader"},null,-1)),t[1]||(t[1]=m("span",{class:"loader"},null,-1)),t[2]||(t[2]=m("span",{class:"loader"},null,-1))])}const n2e=De(QCe,[["render",t2e],["__scopeId","data-v-bb5a687d"]]),s2e={components:{AILoader:n2e,NextButton:te},props:{aiOption:{type:String,required:!0}},emits:["close","applyText"],setup(){const{formatMessage:e}=sa(),{draftMessage:t,processEvent:n,recordAnalytics:s}=hu();return{draftMessage:t,processEvent:n,recordAnalytics:s,formatMessage:e}},data(){return{generatedContent:"",isGenerating:!0}},computed:{headerTitle(){var t;const e=(t=this.aiOption)==null?void 0:t.toUpperCase();return e?this.$t("INTEGRATION_SETTINGS.OPEN_AI.WITH_AI",{option:this.$t(`INTEGRATION_SETTINGS.OPEN_AI.OPTIONS.${e}`)}):""}},mounted(){this.generateAIContent(this.aiOption)},methods:{onClose(){this.$emit("close")},async generateAIContent(e="rephrase"){this.isGenerating=!0,this.generatedContent=await this.processEvent(e),this.isGenerating=!1},applyText(){this.recordAnalytics(this.aiOption),this.$emit("applyText",this.generatedContent),this.onClose()}}},a2e={class:"flex flex-col"},o2e={key:0,class:"w-full"},i2e={class:"mt-1 text-base text-n-slate-12"},l2e={class:"mt-1 text-base text-n-slate-12"},r2e={key:1},c2e={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function u2e(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("AILoader"),r=W("NextButton"),c=Qe("dompurify-html");return p(),E("div",a2e,[S(i,{"header-title":o.headerTitle},null,8,["header-title"]),m("form",{class:"flex flex-col w-full modal-content",onSubmit:t[0]||(t[0]=Ve((...u)=>o.applyText&&o.applyText(...u),["prevent"]))},[s.draftMessage?(p(),E("div",o2e,[m("h4",i2e,I(e.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.DRAFT_TITLE")),1),re(m("p",null,null,512),[[c,s.formatMessage(s.draftMessage,!1)]]),m("h4",l2e,I(e.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.GENERATED_TITLE")),1)])):$("",!0),m("div",null,[a.isGenerating?(p(),L(l,{key:0})):re((p(),E("p",r2e,null,512)),[[c,s.formatMessage(a.generatedContent,!1)]])]),m("div",c2e,[S(r,{faded:"",slate:"",type:"reset",label:e.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.BUTTONS.CANCEL"),onClick:Ve(o.onClose,["prevent"])},null,8,["label","onClick"]),S(r,{type:"submit",disabled:!a.generatedContent,label:e.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.BUTTONS.APPLY")},null,8,["disabled","label"])])],32)])}const d2e=De(s2e,[["render",u2e],["__scopeId","data-v-75714faa"]]),p2e={class:"relative"},m2e={__name:"AIAssistanceCTAButton",emits:["open"],setup(e,{emit:t}){const n=t,s=()=>{n("open")};return(a,o)=>(p(),E("div",p2e,[S(te,{class:"cta-btn cta-btn-light dark:cta-btn-dark hover:cta-btn-light-hover dark:hover:cta-btn-dark-hover",label:a.$t("INTEGRATION_SETTINGS.OPEN_AI.AI_ASSIST"),icon:"i-ph-magic-wand",sm:"",onClick:s},null,8,["label"]),o[0]||(o[0]=m("div",{class:"radar-ping-animation absolute top-0 right-0 -mt-1 -mr-1 rounded-full w-3 h-3 bg-n-brand"},null,-1)),o[1]||(o[1]=m("div",{class:"absolute top-0 right-0 -mt-1 -mr-1 rounded-full w-3 h-3 bg-n-brand opacity-50"},null,-1))]))}},h2e=De(m2e,[["__scopeId","data-v-e7b011ce"]]),f2e={components:{NextButton:te,AIAssistanceModal:d2e,AICTAModal:ZCe,AIAssistanceCTAButton:h2e},emits:["replaceText"],setup(e,{emit:t}){const{uiSettings:n,updateUISettings:s}=tn(),{isAIIntegrationEnabled:a,draftMessage:o,recordAnalytics:i}=hu(),{isAdmin:l}=za(),r=j(""),c=d=>{r.value=d};return Os({"$mod+KeyZ":{action:()=>{r.value&&(t("replaceText",r.value),r.value="")},allowOnFocusedInput:!0}}),{uiSettings:n,updateUISettings:s,isAdmin:l,initialMessage:r,initializeMessage:c,recordAnalytics:i,isAIIntegrationEnabled:a,draftMessage:o}},data:()=>({showAIAssistanceModal:!1,showAICtaModal:!1,aiOption:""}),computed:{...mt({isAChatwootInstance:"globalConfig/isAChatwootInstance"}),isAICTAModalDismissed(){return this.uiSettings.is_open_ai_cta_modal_dismissed},shouldShowAIAssistCTAButtonForAdmin(){return this.isAdmin&&!this.isAIIntegrationEnabled&&!this.isAICTAModalDismissed&&this.isAChatwootInstance},shouldShowAIAssistCTAButton(){return this.isAIIntegrationEnabled&&!this.isAICTAModalDismissed}},mounted(){Dt.on(uAe,this.onAIAssist),this.initializeMessage(this.draftMessage)},methods:{hideAIAssistanceModal(){this.recordAnalytics("DISMISS_AI_SUGGESTION",{aiOption:this.aiOption}),this.showAIAssistanceModal=!1},openAIAssist(){this.isAICTAModalDismissed||this.updateUISettings({is_open_ai_cta_modal_dismissed:!0}),this.initializeMessage(this.draftMessage),document.querySelector("ninja-keys").open({parent:"ai_assist"})},hideAICtaModal(){this.showAICtaModal=!1},openAICta(){this.showAICtaModal=!0},onAIAssist(e){this.aiOption=e,this.showAIAssistanceModal=!0},insertText(e){this.$emit("replaceText",e)}}},g2e={key:0,class:"relative"},_2e={key:1,class:"relative"};function v2e(e,t,n,s,a,o){const i=W("AIAssistanceCTAButton"),l=W("NextButton"),r=W("AIAssistanceModal"),c=W("woot-modal"),u=W("AICTAModal"),d=Qe("tooltip");return p(),E("div",null,[s.isAIIntegrationEnabled?(p(),E("div",g2e,[o.shouldShowAIAssistCTAButton?(p(),L(i,{key:0,onOpen:o.openAIAssist},null,8,["onOpen"])):re((p(),L(l,{key:1,icon:"i-ph-magic-wand",slate:"",faded:"",sm:"",onClick:o.openAIAssist},null,8,["onClick"])),[[d,e.$t("INTEGRATION_SETTINGS.OPEN_AI.AI_ASSIST"),void 0,{"top-end":!0}]]),S(c,{show:e.showAIAssistanceModal,"onUpdate:show":t[0]||(t[0]=h=>e.showAIAssistanceModal=h),"on-close":o.hideAIAssistanceModal},{default:Y(()=>[S(r,{"ai-option":e.aiOption,onApplyText:o.insertText,onClose:o.hideAIAssistanceModal},null,8,["ai-option","onApplyText","onClose"])]),_:1},8,["show","on-close"])])):o.shouldShowAIAssistCTAButtonForAdmin?(p(),E("div",_2e,[S(i,{onClick:o.openAICta},null,8,["onClick"]),S(c,{show:e.showAICtaModal,"onUpdate:show":t[1]||(t[1]=h=>e.showAICtaModal=h),"on-close":o.hideAICtaModal},{default:Y(()=>[S(u,{onClose:o.hideAICtaModal},null,8,["onClose"])]),_:1},8,["show","on-close"])])):$("",!0)])}const E2e=De(f2e,[["render",v2e]]),b2e={name:"ReplyBottomPanel",components:{NextButton:te,FileUpload:RS,VideoCallButton:WCe,AIAssistanceButton:E2e},mixins:[wr],props:{isNote:{type:Boolean,default:!1},onSend:{type:Function,default:()=>{}},sendButtonText:{type:String,default:""},recordingAudioDurationText:{type:String,default:"00:00"},inbox:{type:Object,default:()=>({})},showFileUpload:{type:Boolean,default:!1},showAudioRecorder:{type:Boolean,default:!1},onFileUpload:{type:Function,default:()=>{}},toggleEmojiPicker:{type:Function,default:()=>{}},toggleAudioRecorder:{type:Function,default:()=>{}},toggleAudioRecorderPlayPause:{type:Function,default:()=>{}},isRecordingAudio:{type:Boolean,default:!1},recordingAudioState:{type:String,default:""},isSendDisabled:{type:Boolean,default:!1},showEditorToggle:{type:Boolean,default:!1},isOnPrivateNote:{type:Boolean,default:!1},enableMultipleFileUpload:{type:Boolean,default:!0},enableWhatsAppTemplates:{type:Boolean,default:!1},enableContentTemplates:{type:Boolean,default:!1},conversationId:{type:Number,required:!0},message:{type:String,default:""},newConversationModalActive:{type:Boolean,default:!1},portalSlug:{type:String,required:!0},conversationType:{type:String,default:""},showQuotedReplyToggle:{type:Boolean,default:!1},quotedReplyEnabled:{type:Boolean,default:!1}},emits:["replaceText","toggleInsertArticle","toggleEditor","selectWhatsappTemplate","selectContentTemplate","toggleQuotedReply"],setup(){const{setSignatureFlagForInbox:e,fetchSignatureFlagFromUISettings:t}=tn(),n=j(!1);return Os({"$mod+Alt+KeyA":{action:()=>{document.querySelector("#conversationAttachment").click()},allowOnFocusedInput:!0}}),{setSignatureFlagForInbox:e,fetchSignatureFlagFromUISettings:t,uploadRef:n}},data(){return{ALLOWED_FILE_TYPES:hS}},computed:{...mt({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",uiFlags:"integrations/getUIFlags"}),wrapClass(){return{"is-note-mode":this.isNote}},showAttachButton(){return this.showFileUpload||this.isNote},showAudioRecorderButton(){return this.isALineChannel?!1:this.isFeatureEnabledonAccount(this.accountId,ft.VOICE_RECORDER)&&this.showAudioRecorder},showAudioPlayStopButton(){return this.showAudioRecorder&&this.isRecordingAudio},isInstagramDM(){return this.conversationType==="instagram_direct_message"},allowedFileTypes(){var t,n;if(this.isOnPrivateNote)return this.ALLOWED_FILE_TYPES;let e=this.channelType||((t=this.inbox)==null?void 0:t.channel_type);return(this.isAnInstagramChannel||this.isInstagramDM)&&(e=St.INSTAGRAM),MN({channelType:e,medium:(n=this.inbox)==null?void 0:n.medium})},enableDragAndDrop(){return!this.newConversationModalActive},audioRecorderPlayStopIcon(){switch(this.recordingAudioState){case"playing":return"i-ph-pause";case"paused":return"i-ph-play";case"stopped":return"i-ph-play";default:return"i-ph-stop"}},showMessageSignatureButton(){return!this.isOnPrivateNote},sendWithSignature(){return this.fetchSignatureFlagFromUISettings(this.channelType)},signatureToggleTooltip(){return this.sendWithSignature?this.$t("CONVERSATION.FOOTER.DISABLE_SIGN_TOOLTIP"):this.$t("CONVERSATION.FOOTER.ENABLE_SIGN_TOOLTIP")},enableInsertArticleInReply(){return this.portalSlug},isFetchingAppIntegrations(){return this.uiFlags.isFetching},quotedReplyToggleTooltip(){return this.quotedReplyEnabled?this.$t("CONVERSATION.REPLYBOX.QUOTED_REPLY.DISABLE_TOOLTIP"):this.$t("CONVERSATION.REPLYBOX.QUOTED_REPLY.ENABLE_TOOLTIP")}},mounted(){Ig.start()},methods:{toggleMessageSignature(){this.setSignatureFlagForInbox(this.channelType,!this.sendWithSignature)},replaceText(e){this.$emit("replaceText",e)},toggleInsertArticle(){this.$emit("toggleInsertArticle")}}},T2e={class:"left-wrap"},S2e={class:"flex fixed top-0 right-0 bottom-0 left-0 z-20 flex-col gap-2 justify-center items-center w-full h-full text-n-slate-12 bg-modal-backdrop-light dark:bg-modal-backdrop-dark"},A2e={class:"text-2xl break-words text-n-slate-12"},y2e={class:"right-wrap"};function I2e(e,t,n,s,a,o){const i=W("NextButton"),l=W("FileUpload"),r=W("VideoCallButton"),c=W("AIAssistanceButton"),u=W("fluent-icon"),d=Qe("tooltip");return p(),E("div",{class:ae(["flex justify-between p-3",o.wrapClass])},[m("div",T2e,[re(S(i,{icon:"i-ph-smiley-sticker",slate:"",faded:"",sm:"",onClick:n.toggleEmojiPicker},null,8,["onClick"]),[[d,e.$t("CONVERSATION.REPLYBOX.TIP_EMOJI_ICON"),void 0,{"top-end":!0}]]),re((p(),L(l,{ref:"uploadRef","input-id":"conversationAttachment",size:4096*4096,accept:o.allowedFileTypes,multiple:n.enableMultipleFileUpload,drop:o.enableDragAndDrop,"drop-directory":!1,data:{direct_upload_url:"/rails/active_storage/direct_uploads",direct_upload:!0},onInputFile:n.onFileUpload},{default:Y(()=>[o.showAttachButton?re((p(),L(i,{key:0,icon:"i-ph-paperclip",slate:"",faded:"",sm:""},null,512)),[[d,e.$t("CONVERSATION.REPLYBOX.TIP_ATTACH_ICON"),void 0,{"top-end":!0}]]):$("",!0)]),_:1},8,["accept","multiple","drop","onInputFile"])),[[d,e.$t("CONVERSATION.REPLYBOX.TIP_ATTACH_ICON"),void 0,{"top-end":!0}]]),o.showAudioRecorderButton?re((p(),L(i,{key:0,icon:n.isRecordingAudio?"i-ph-microphone-slash":"i-ph-microphone",slate:"",faded:"",sm:"",onClick:n.toggleAudioRecorder},null,8,["icon","onClick"])),[[d,e.$t("CONVERSATION.REPLYBOX.TIP_AUDIORECORDER_ICON"),void 0,{"top-end":!0}]]):$("",!0),n.showEditorToggle?re((p(),L(i,{key:1,icon:"i-ph-quotes",slate:"",faded:"",sm:"",onClick:t[0]||(t[0]=h=>e.$emit("toggleEditor"))},null,512)),[[d,e.$t("CONVERSATION.REPLYBOX.TIP_FORMAT_ICON"),void 0,{"top-end":!0}]]):$("",!0),o.showAudioPlayStopButton?re((p(),L(i,{key:2,icon:o.audioRecorderPlayStopIcon,slate:"",faded:"",sm:"",label:n.recordingAudioDurationText,onClick:n.toggleAudioRecorderPlayPause},null,8,["icon","label","onClick"])),[[d,e.$t("CONVERSATION.REPLYBOX.TIP_FORMAT_ICON"),void 0,{"top-end":!0}]]):$("",!0),o.showMessageSignatureButton?re((p(),L(i,{key:3,icon:"i-ph-signature",slate:"",faded:"",sm:"",onClick:o.toggleMessageSignature},null,8,["onClick"])),[[d,o.signatureToggleTooltip,void 0,{"top-end":!0}]]):$("",!0),n.showQuotedReplyToggle?re((p(),L(i,{key:4,icon:"i-ph-quotes",variant:n.quotedReplyEnabled?"solid":"faded",color:"slate",sm:"","aria-pressed":n.quotedReplyEnabled,onClick:t[1]||(t[1]=h=>e.$emit("toggleQuotedReply"))},null,8,["variant","aria-pressed"])),[[d,o.quotedReplyToggleTooltip,void 0,{"top-end":!0}]]):$("",!0),n.enableWhatsAppTemplates?re((p(),L(i,{key:5,icon:"i-ph-whatsapp-logo",slate:"",faded:"",sm:"",onClick:t[2]||(t[2]=h=>e.$emit("selectWhatsappTemplate"))},null,512)),[[d,e.$t("CONVERSATION.FOOTER.WHATSAPP_TEMPLATES"),void 0,{"top-end":!0}]]):$("",!0),n.enableContentTemplates?re((p(),L(i,{key:6,icon:"i-ph-whatsapp-logo",slate:"",faded:"",sm:"",onClick:t[3]||(t[3]=h=>e.$emit("selectContentTemplate"))},null,512)),[[d,"Content Templates",void 0,{"top-end":!0}]]):$("",!0),(e.isAWebWidgetInbox||e.isAPIInbox)&&!n.isOnPrivateNote?(p(),L(r,{key:7,"conversation-id":n.conversationId},null,8,["conversation-id"])):$("",!0),o.isFetchingAppIntegrations?$("",!0):(p(),L(c,{key:8,"conversation-id":n.conversationId,"is-private-note":n.isOnPrivateNote,message:n.message,onReplaceText:o.replaceText},null,8,["conversation-id","is-private-note","message","onReplaceText"])),S(Ys,{name:"modal-fade"},{default:Y(()=>[re(m("div",S2e,[S(u,{icon:"cloud-backup",size:"40"}),m("h4",A2e,I(e.$t("CONVERSATION.REPLYBOX.DRAG_DROP")),1)],512),[[rn,s.uploadRef&&s.uploadRef.dropActive]])]),_:1}),o.enableInsertArticleInReply?re((p(),L(i,{key:9,icon:"i-ph-article-ny-times",slate:"",faded:"",sm:"",onClick:o.toggleInsertArticle},null,8,["onClick"])),[[d,e.$t("HELP_CENTER.ARTICLE_SEARCH.OPEN_ARTICLE_SEARCH"),void 0,{"top-end":!0}]]):$("",!0)]),m("div",y2e,[S(i,{label:n.sendButtonText,type:"submit",sm:"",color:n.isNote?"amber":"blue",disabled:n.isSendDisabled,class:"flex-shrink-0",onClick:n.onSend},null,8,["label","color","disabled","onClick"])])],2)}const C2e=De(b2e,[["render",I2e],["__scopeId","data-v-9085f1cf"]]),N2e={af:"Afrikaans",af_NA:"Afrikaans (Namibia)",af_ZA:"Afrikaans (South Africa)",ak:"Akan",ak_GH:"Akan (Ghana)",sq:"Albanian",sq_AL:"Albanian (Albania)",sq_XK:"Albanian (Kosovo)",sq_MK:"Albanian (Macedonia)",am:"Amharic",am_ET:"Amharic (Ethiopia)",ar:"Arabic",ar_DZ:"Arabic (Algeria)",ar_BH:"Arabic (Bahrain)",ar_TD:"Arabic (Chad)",ar_KM:"Arabic (Comoros)",ar_DJ:"Arabic (Djibouti)",ar_EG:"Arabic (Egypt)",ar_ER:"Arabic (Eritrea)",ar_IQ:"Arabic (Iraq)",ar_IL:"Arabic (Israel)",ar_JO:"Arabic (Jordan)",ar_KW:"Arabic (Kuwait)",ar_LB:"Arabic (Lebanon)",ar_LY:"Arabic (Libya)",ar_MR:"Arabic (Mauritania)",ar_MA:"Arabic (Morocco)",ar_OM:"Arabic (Oman)",ar_PS:"Arabic (Palestinian Territories)",ar_QA:"Arabic (Qatar)",ar_SA:"Arabic (Saudi Arabia)",ar_SO:"Arabic (Somalia)",ar_SS:"Arabic (South Sudan)",ar_SD:"Arabic (Sudan)",ar_SY:"Arabic (Syria)",ar_TN:"Arabic (Tunisia)",ar_AE:"Arabic (United Arab Emirates)",ar_EH:"Arabic (Western Sahara)",ar_YE:"Arabic (Yemen)",hy:"Armenian",hy_AM:"Armenian (Armenia)",as:"Assamese",as_IN:"Assamese (India)",az:"Azerbaijani",az_AZ:"Azerbaijani (Azerbaijan)",az_Cyrl_AZ:"Azerbaijani (Cyrillic, Azerbaijan)",az_Cyrl:"Azerbaijani (Cyrillic)",az_Latn_AZ:"Azerbaijani (Latin, Azerbaijan)",az_Latn:"Azerbaijani (Latin)",bm:"Bambara",bm_Latn_ML:"Bambara (Latin, Mali)",bm_Latn:"Bambara (Latin)",eu:"Basque",eu_ES:"Basque (Spain)",be:"Belarusian",be_BY:"Belarusian (Belarus)",bn:"Bengali",bn_BD:"Bengali (Bangladesh)",bn_IN:"Bengali (India)",bs:"Bosnian",bs_BA:"Bosnian (Bosnia & Herzegovina)",bs_Cyrl_BA:"Bosnian (Cyrillic, Bosnia & Herzegovina)",bs_Cyrl:"Bosnian (Cyrillic)",bs_Latn_BA:"Bosnian (Latin, Bosnia & Herzegovina)",bs_Latn:"Bosnian (Latin)",br:"Breton",br_FR:"Breton (France)",bg:"Bulgarian",bg_BG:"Bulgarian (Bulgaria)",my:"Burmese",my_MM:"Burmese (Myanmar (Burma))",ca:"Catalan",ca_AD:"Catalan (Andorra)",ca_FR:"Catalan (France)",ca_IT:"Catalan (Italy)",ca_ES:"Catalan (Spain)",zh:"Chinese",zh_CN:"Chinese (China)",zh_HK:"Chinese (Hong Kong SAR China)",zh_MO:"Chinese (Macau SAR China)",zh_Hans_CN:"Chinese (Simplified, China)",zh_Hans_HK:"Chinese (Simplified, Hong Kong SAR China)",zh_Hans_MO:"Chinese (Simplified, Macau SAR China)",zh_Hans_SG:"Chinese (Simplified, Singapore)",zh_Hans:"Chinese (Simplified)",zh_SG:"Chinese (Singapore)",zh_TW:"Chinese (Taiwan)",zh_Hant_HK:"Chinese (Traditional, Hong Kong SAR China)",zh_Hant_MO:"Chinese (Traditional, Macau SAR China)",zh_Hant_TW:"Chinese (Traditional, Taiwan)",zh_Hant:"Chinese (Traditional)",kw:"Cornish",kw_GB:"Cornish (United Kingdom)",hr:"Croatian",hr_BA:"Croatian (Bosnia & Herzegovina)",hr_HR:"Croatian (Croatia)",cs:"Czech",cs_CZ:"Czech (Czech Republic)",da:"Danish",da_DK:"Danish (Denmark)",da_GL:"Danish (Greenland)",nl:"Dutch",nl_AW:"Dutch (Aruba)",nl_BE:"Dutch (Belgium)",nl_BQ:"Dutch (Caribbean Netherlands)",nl_CW:"Dutch (Curaao)",nl_NL:"Dutch (Netherlands)",nl_SX:"Dutch (Sint Maarten)",nl_SR:"Dutch (Suriname)",dz:"Dzongkha",dz_BT:"Dzongkha (Bhutan)",en:"English",en_AS:"English (American Samoa)",en_AI:"English (Anguilla)",en_AG:"English (Antigua & Barbuda)",en_AU:"English (Australia)",en_BS:"English (Bahamas)",en_BB:"English (Barbados)",en_BE:"English (Belgium)",en_BZ:"English (Belize)",en_BM:"English (Bermuda)",en_BW:"English (Botswana)",en_IO:"English (British Indian Ocean Territory)",en_VG:"English (British Virgin Islands)",en_CM:"English (Cameroon)",en_CA:"English (Canada)",en_KY:"English (Cayman Islands)",en_CX:"English (Christmas Island)",en_CC:"English (Cocos (Keeling) Islands)",en_CK:"English (Cook Islands)",en_DG:"English (Diego Garcia)",en_DM:"English (Dominica)",en_ER:"English (Eritrea)",en_FK:"English (Falkland Islands)",en_FJ:"English (Fiji)",en_GM:"English (Gambia)",en_GH:"English (Ghana)",en_GI:"English (Gibraltar)",en_GD:"English (Grenada)",en_GU:"English (Guam)",en_GG:"English (Guernsey)",en_GY:"English (Guyana)",en_HK:"English (Hong Kong SAR China)",en_IN:"English (India)",en_IE:"English (Ireland)",en_IM:"English (Isle of Man)",en_JM:"English (Jamaica)",en_JE:"English (Jersey)",en_KE:"English (Kenya)",en_KI:"English (Kiribati)",en_LS:"English (Lesotho)",en_LR:"English (Liberia)",en_MO:"English (Macau SAR China)",en_MG:"English (Madagascar)",en_MW:"English (Malawi)",en_MY:"English (Malaysia)",en_MT:"English (Malta)",en_MH:"English (Marshall Islands)",en_MU:"English (Mauritius)",en_FM:"English (Micronesia)",en_MS:"English (Montserrat)",en_NA:"English (Namibia)",en_NR:"English (Nauru)",en_NZ:"English (New Zealand)",en_NG:"English (Nigeria)",en_NU:"English (Niue)",en_NF:"English (Norfolk Island)",en_MP:"English (Northern Mariana Islands)",en_PK:"English (Pakistan)",en_PW:"English (Palau)",en_PG:"English (Papua New Guinea)",en_PH:"English (Philippines)",en_PN:"English (Pitcairn Islands)",en_PR:"English (Puerto Rico)",en_RW:"English (Rwanda)",en_WS:"English (Samoa)",en_SC:"English (Seychelles)",en_SL:"English (Sierra Leone)",en_SG:"English (Singapore)",en_SX:"English (Sint Maarten)",en_SB:"English (Solomon Islands)",en_ZA:"English (South Africa)",en_SS:"English (South Sudan)",en_SH:"English (St. Helena)",en_KN:"English (St. Kitts & Nevis)",en_LC:"English (St. Lucia)",en_VC:"English (St. Vincent & Grenadines)",en_SD:"English (Sudan)",en_SZ:"English (Swaziland)",en_TZ:"English (Tanzania)",en_TK:"English (Tokelau)",en_TO:"English (Tonga)",en_TT:"English (Trinidad & Tobago)",en_TC:"English (Turks & Caicos Islands)",en_TV:"English (Tuvalu)",en_UM:"English (U.S. Outlying Islands)",en_VI:"English (U.S. Virgin Islands)",en_UG:"English (Uganda)",en_GB:"English (United Kingdom)",en_US:"English (United States)",en_VU:"English (Vanuatu)",en_ZM:"English (Zambia)",en_ZW:"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",et_EE:"Estonian (Estonia)",ee:"Ewe",ee_GH:"Ewe (Ghana)",ee_TG:"Ewe (Togo)",fo:"Faroese",fo_FO:"Faroese (Faroe Islands)",fi:"Finnish",fi_FI:"Finnish (Finland)",fr:"French",fr_DZ:"French (Algeria)",fr_BE:"French (Belgium)",fr_BJ:"French (Benin)",fr_BF:"French (Burkina Faso)",fr_BI:"French (Burundi)",fr_CM:"French (Cameroon)",fr_CA:"French (Canada)",fr_CF:"French (Central African Republic)",fr_TD:"French (Chad)",fr_KM:"French (Comoros)",fr_CG:"French (Congo - Brazzaville)",fr_CD:"French (Congo - Kinshasa)",fr_CI:"French (Cte dIvoire)",fr_DJ:"French (Djibouti)",fr_GQ:"French (Equatorial Guinea)",fr_FR:"French (France)",fr_GF:"French (French Guiana)",fr_PF:"French (French Polynesia)",fr_GA:"French (Gabon)",fr_GP:"French (Guadeloupe)",fr_GN:"French (Guinea)",fr_HT:"French (Haiti)",fr_LU:"French (Luxembourg)",fr_MG:"French (Madagascar)",fr_ML:"French (Mali)",fr_MQ:"French (Martinique)",fr_MR:"French (Mauritania)",fr_MU:"French (Mauritius)",fr_YT:"French (Mayotte)",fr_MC:"French (Monaco)",fr_MA:"French (Morocco)",fr_NC:"French (New Caledonia)",fr_NE:"French (Niger)",fr_RE:"French (Runion)",fr_RW:"French (Rwanda)",fr_SN:"French (Senegal)",fr_SC:"French (Seychelles)",fr_BL:"French (St. Barthlemy)",fr_MF:"French (St. Martin)",fr_PM:"French (St. Pierre & Miquelon)",fr_CH:"French (Switzerland)",fr_SY:"French (Syria)",fr_TG:"French (Togo)",fr_TN:"French (Tunisia)",fr_VU:"French (Vanuatu)",fr_WF:"French (Wallis & Futuna)",ff:"Fulah",ff_CM:"Fulah (Cameroon)",ff_GN:"Fulah (Guinea)",ff_MR:"Fulah (Mauritania)",ff_SN:"Fulah (Senegal)",gl:"Galician",gl_ES:"Galician (Spain)",lg:"Ganda",lg_UG:"Ganda (Uganda)",ka:"Georgian",ka_GE:"Georgian (Georgia)",de:"German",de_AT:"German (Austria)",de_BE:"German (Belgium)",de_DE:"German (Germany)",de_LI:"German (Liechtenstein)",de_LU:"German (Luxembourg)",de_CH:"German (Switzerland)",el:"Greek",el_CY:"Greek (Cyprus)",el_GR:"Greek (Greece)",gu:"Gujarati",gu_IN:"Gujarati (India)",ha:"Hausa",ha_GH:"Hausa (Ghana)",ha_Latn_GH:"Hausa (Latin, Ghana)",ha_Latn_NE:"Hausa (Latin, Niger)",ha_Latn_NG:"Hausa (Latin, Nigeria)",ha_Latn:"Hausa (Latin)",ha_NE:"Hausa (Niger)",ha_NG:"Hausa (Nigeria)",he:"Hebrew",he_IL:"Hebrew (Israel)",hi:"Hindi",hi_IN:"Hindi (India)",hu:"Hungarian",hu_HU:"Hungarian (Hungary)",is:"Icelandic",is_IS:"Icelandic (Iceland)",ig:"Igbo",ig_NG:"Igbo (Nigeria)",id:"Indonesian",id_ID:"Indonesian (Indonesia)",ga:"Irish",ga_IE:"Irish (Ireland)",it:"Italian",it_IT:"Italian (Italy)",it_SM:"Italian (San Marino)",it_CH:"Italian (Switzerland)",ja:"Japanese",ja_JP:"Japanese (Japan)",kl:"Kalaallisut",kl_GL:"Kalaallisut (Greenland)",kn:"Kannada",kn_IN:"Kannada (India)",ks:"Kashmiri",ks_Arab_IN:"Kashmiri (Arabic, India)",ks_Arab:"Kashmiri (Arabic)",ks_IN:"Kashmiri (India)",kk:"Kazakh",kk_Cyrl_KZ:"Kazakh (Cyrillic, Kazakhstan)",kk_Cyrl:"Kazakh (Cyrillic)",kk_KZ:"Kazakh (Kazakhstan)",km:"Khmer",km_KH:"Khmer (Cambodia)",ki:"Kikuyu",ki_KE:"Kikuyu (Kenya)",rw:"Kinyarwanda",rw_RW:"Kinyarwanda (Rwanda)",ko:"Korean",ko_KP:"Korean (North Korea)",ko_KR:"Korean (South Korea)",ky:"Kyrgyz",ky_Cyrl_KG:"Kyrgyz (Cyrillic, Kyrgyzstan)",ky_Cyrl:"Kyrgyz (Cyrillic)",ky_KG:"Kyrgyz (Kyrgyzstan)",lo:"Lao",lo_LA:"Lao (Laos)",lv:"Latvian",lv_LV:"Latvian (Latvia)",ln:"Lingala",ln_AO:"Lingala (Angola)",ln_CF:"Lingala (Central African Republic)",ln_CG:"Lingala (Congo - Brazzaville)",ln_CD:"Lingala (Congo - Kinshasa)",lt:"Lithuanian",lt_LT:"Lithuanian (Lithuania)",lu:"Luba-Katanga",lu_CD:"Luba-Katanga (Congo - Kinshasa)",lb:"Luxembourgish",lb_LU:"Luxembourgish (Luxembourg)",mk:"Macedonian",mk_MK:"Macedonian (Macedonia)",mg:"Malagasy",mg_MG:"Malagasy (Madagascar)",ms:"Malay",ms_BN:"Malay (Brunei)",ms_Latn_BN:"Malay (Latin, Brunei)",ms_Latn_MY:"Malay (Latin, Malaysia)",ms_Latn_SG:"Malay (Latin, Singapore)",ms_Latn:"Malay (Latin)",ms_MY:"Malay (Malaysia)",ms_SG:"Malay (Singapore)",ml:"Malayalam",ml_IN:"Malayalam (India)",mt:"Maltese",mt_MT:"Maltese (Malta)",gv:"Manx",gv_IM:"Manx (Isle of Man)",mr:"Marathi",mr_IN:"Marathi (India)",mn:"Mongolian",mn_Cyrl_MN:"Mongolian (Cyrillic, Mongolia)",mn_Cyrl:"Mongolian (Cyrillic)",mn_MN:"Mongolian (Mongolia)",ne:"Nepali",ne_IN:"Nepali (India)",ne_NP:"Nepali (Nepal)",nd:"North Ndebele",nd_ZW:"North Ndebele (Zimbabwe)",se:"Northern Sami",se_FI:"Northern Sami (Finland)",se_NO:"Northern Sami (Norway)",se_SE:"Northern Sami (Sweden)",no:"Norwegian",no_NO:"Norwegian (Norway)",nb:"Norwegian Bokml",nb_NO:"Norwegian Bokml (Norway)",nb_SJ:"Norwegian Bokml (Svalbard & Jan Mayen)",nn:"Norwegian Nynorsk",nn_NO:"Norwegian Nynorsk (Norway)",or:"Oriya",or_IN:"Oriya (India)",om:"Oromo",om_ET:"Oromo (Ethiopia)",om_KE:"Oromo (Kenya)",os:"Ossetic",os_GE:"Ossetic (Georgia)",os_RU:"Ossetic (Russia)",ps:"Pashto",ps_AF:"Pashto (Afghanistan)",fa:"Persian",fa_AF:"Persian (Afghanistan)",fa_IR:"Persian (Iran)",pl:"Polish",pl_PL:"Polish (Poland)",pt:"Portuguese",pt_AO:"Portuguese (Angola)",pt_BR:"Portuguese (Brazil)",pt_CV:"Portuguese (Cape Verde)",pt_GW:"Portuguese (Guinea-Bissau)",pt_MO:"Portuguese (Macau SAR China)",pt_MZ:"Portuguese (Mozambique)",pt_PT:"Portuguese (Portugal)",pt_ST:"Portuguese (So Tom & Prncipe)",pt_TL:"Portuguese (Timor-Leste)",pa:"Punjabi",pa_Arab_PK:"Punjabi (Arabic, Pakistan)",pa_Arab:"Punjabi (Arabic)",pa_Guru_IN:"Punjabi (Gurmukhi, India)",pa_Guru:"Punjabi (Gurmukhi)",pa_IN:"Punjabi (India)",pa_PK:"Punjabi (Pakistan)",qu:"Quechua",qu_BO:"Quechua (Bolivia)",qu_EC:"Quechua (Ecuador)",qu_PE:"Quechua (Peru)",ro:"Romanian",ro_MD:"Romanian (Moldova)",ro_RO:"Romanian (Romania)",rm:"Romansh",rm_CH:"Romansh (Switzerland)",rn:"Rundi",rn_BI:"Rundi (Burundi)",ru:"Russian",ru_BY:"Russian (Belarus)",ru_KZ:"Russian (Kazakhstan)",ru_KG:"Russian (Kyrgyzstan)",ru_MD:"Russian (Moldova)",ru_RU:"Russian (Russia)",ru_UA:"Russian (Ukraine)",sg:"Sango",sg_CF:"Sango (Central African Republic)",gd:"Scottish Gaelic",gd_GB:"Scottish Gaelic (United Kingdom)",sr:"Serbian",sr_BA:"Serbian (Bosnia & Herzegovina)",sr_Cyrl_BA:"Serbian (Cyrillic, Bosnia & Herzegovina)",sr_Cyrl_XK:"Serbian (Cyrillic, Kosovo)",sr_Cyrl_ME:"Serbian (Cyrillic, Montenegro)",sr_Cyrl_RS:"Serbian (Cyrillic, Serbia)",sr_Cyrl:"Serbian (Cyrillic)",sr_XK:"Serbian (Kosovo)",sr_Latn_BA:"Serbian (Latin, Bosnia & Herzegovina)",sr_Latn_XK:"Serbian (Latin, Kosovo)",sr_Latn_ME:"Serbian (Latin, Montenegro)",sr_Latn_RS:"Serbian (Latin, Serbia)",sr_Latn:"Serbian (Latin)",sr_ME:"Serbian (Montenegro)",sr_RS:"Serbian (Serbia)",sh:"Serbo-Croatian",sh_BA:"Serbo-Croatian (Bosnia & Herzegovina)",sn:"Shona",sn_ZW:"Shona (Zimbabwe)",ii:"Sichuan Yi",ii_CN:"Sichuan Yi (China)",si:"Sinhala",si_LK:"Sinhala (Sri Lanka)",sk:"Slovak",sk_SK:"Slovak (Slovakia)",sl:"Slovenian",sl_SI:"Slovenian (Slovenia)",so:"Somali",so_DJ:"Somali (Djibouti)",so_ET:"Somali (Ethiopia)",so_KE:"Somali (Kenya)",so_SO:"Somali (Somalia)",es:"Spanish",es_AR:"Spanish (Argentina)",es_BO:"Spanish (Bolivia)",es_IC:"Spanish (Canary Islands)",es_EA:"Spanish (Ceuta & Melilla)",es_CL:"Spanish (Chile)",es_CO:"Spanish (Colombia)",es_CR:"Spanish (Costa Rica)",es_CU:"Spanish (Cuba)",es_DO:"Spanish (Dominican Republic)",es_EC:"Spanish (Ecuador)",es_SV:"Spanish (El Salvador)",es_GQ:"Spanish (Equatorial Guinea)",es_GT:"Spanish (Guatemala)",es_HN:"Spanish (Honduras)",es_MX:"Spanish (Mexico)",es_NI:"Spanish (Nicaragua)",es_PA:"Spanish (Panama)",es_PY:"Spanish (Paraguay)",es_PE:"Spanish (Peru)",es_PH:"Spanish (Philippines)",es_PR:"Spanish (Puerto Rico)",es_ES:"Spanish (Spain)",es_US:"Spanish (United States)",es_UY:"Spanish (Uruguay)",es_VE:"Spanish (Venezuela)",sw:"Swahili",sw_KE:"Swahili (Kenya)",sw_TZ:"Swahili (Tanzania)",sw_UG:"Swahili (Uganda)",sv:"Swedish",sv_AX:"Swedish (land Islands)",sv_FI:"Swedish (Finland)",sv_SE:"Swedish (Sweden)",tl:"Tagalog",tl_PH:"Tagalog (Philippines)",ta:"Tamil",ta_IN:"Tamil (India)",ta_MY:"Tamil (Malaysia)",ta_SG:"Tamil (Singapore)",ta_LK:"Tamil (Sri Lanka)",te:"Telugu",te_IN:"Telugu (India)",th:"Thai",th_TH:"Thai (Thailand)",bo:"Tibetan",bo_CN:"Tibetan (China)",bo_IN:"Tibetan (India)",ti:"Tigrinya",ti_ER:"Tigrinya (Eritrea)",ti_ET:"Tigrinya (Ethiopia)",to:"Tongan",to_TO:"Tongan (Tonga)",tr:"Turkish",tr_CY:"Turkish (Cyprus)",tr_TR:"Turkish (Turkey)",uk:"Ukrainian",uk_UA:"Ukrainian (Ukraine)",ur:"Urdu",ur_IN:"Urdu (India)",ur_PK:"Urdu (Pakistan)",ug:"Uyghur",ug_Arab_CN:"Uyghur (Arabic, China)",ug_Arab:"Uyghur (Arabic)",ug_CN:"Uyghur (China)",uz:"Uzbek",uz_AF:"Uzbek (Afghanistan)",uz_Arab_AF:"Uzbek (Arabic, Afghanistan)",uz_Arab:"Uzbek (Arabic)",uz_Cyrl_UZ:"Uzbek (Cyrillic, Uzbekistan)",uz_Cyrl:"Uzbek (Cyrillic)",uz_Latn_UZ:"Uzbek (Latin, Uzbekistan)",uz_Latn:"Uzbek (Latin)",uz_UZ:"Uzbek (Uzbekistan)",vi:"Vietnamese",vi_VN:"Vietnamese (Vietnam)",cy:"Welsh",cy_GB:"Welsh (United Kingdom)",fy:"Western Frisian",fy_NL:"Western Frisian (Netherlands)",yi:"Yiddish",yo:"Yoruba",yo_BJ:"Yoruba (Benin)",yo_NG:"Yoruba (Nigeria)",zu:"Zulu",zu_ZA:"Zulu (South Africa)"},O2e={class:"flex flex-col py-1"},R2e={class:"flex items-center justify-between py-2 mb-1"},x2e={class:"text-base text-n-slate-12"},w2e={class:"relative"},$2e={class:"absolute ltr:left-0 rtl:right-0 w-8 top-0.5 h-8 flex justify-center items-center"},M2e=["placeholder","value"],L2e={__name:"Header",props:{title:{type:String,default:"Chatwoot"}},emits:["search","close"],setup(e,{emit:t}){const n=t,s=j(null),a=j("");lt(()=>{s.value.focus()});const o=r=>{n("search",r.target.value)},i=()=>{n("close")};return Os({Slash:{action:r=>{r.preventDefault(),s.value.focus()}},Escape:{action:()=>{i()},allowOnFocusedInput:!0}}),(r,c)=>{const u=W("fluent-icon");return p(),E("div",O2e,[m("div",R2e,[m("h3",x2e,I(e.title),1),S(te,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",onClick:i})]),m("div",w2e,[m("div",$2e,[S(u,{icon:"search",class:"",size:"18"})]),m("input",{ref_key:"searchInputRef",ref:s,type:"text",placeholder:r.$t("HELP_CENTER.ARTICLE_SEARCH.PLACEHOLDER"),class:"block w-full !h-9 ltr:!pl-8 rtl:!pr-8 dark:!bg-n-slate-2 !border-n-weak !bg-n-slate-2 text-sm rounded-md leading-8 text-n-slate-12 shadow-sm ring-2 ring-transparent ring-n-weak border border-solid placeholder:text-n-slate-10 focus:border-n-brand focus:ring-n-brand !mb-0",value:a.value,onInput:o},null,40,M2e)])])}}},D2e={class:"w-full mb-0 -mx-1 text-sm rounded-sm ltr:text-left rtl:text-right text-n-slate-12 hover:underline group-hover:underline"},P2e={class:"flex content-between items-center gap-0.5 w-full"},k2e={class:"w-full mb-0 text-sm ltr:text-left rtl:text-right text-n-slate-11"},B2e={class:"flex gap-0.5"},U2e={__name:"ArticleSearchResultItem",props:{id:{type:Number,default:0},title:{type:String,default:"Untitled"},url:{type:String,default:""},category:{type:String,default:""},locale:{type:String,default:""}},emits:["insert","preview"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=r=>{r.stopPropagation(),s("insert",n.id)},i=r=>{r.stopPropagation(),s("preview",n.id)},l=async r=>{r.stopPropagation(),await _a(n.url),ne(a("CONTACT_PANEL.COPY_SUCCESSFUL"))};return(r,c)=>(p(),E("button",{class:"flex flex-col w-full gap-1 px-2 py-1 border border-transparent border-solid rounded-md cursor-pointer hover:bg-n-slate-3 group focus:outline-none focus:bg-n-slate-3",onClick:i},[m("h4",D2e,I(e.title),1),m("div",P2e,[m("p",k2e,I(e.locale)+" "+I(" / ")+" "+I(e.category||r.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.UNCATEGORIZED")),1),m("div",B2e,[S(te,{title:r.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.COPY_LINK"),faded:"",slate:"",xs:"",type:"reset",icon:"i-lucide-copy",class:"invisible group-hover:visible",onClick:l},null,8,["title"]),S(te,{xs:"",faded:"",slate:"",label:r.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.INSERT_ARTICLE"),onClick:o},null,8,["label"])])])]))}},F2e={name:"SearchResults",components:{SearchResultItem:U2e},props:{articles:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1},searchQuery:{type:String,default:""}},emits:["preview","insert"],computed:{showNoResults(){return this.searchQuery&&this.articles.length===0}},methods:{handlePreview(e){this.$emit("preview",e)},handleInsert(e){this.$emit("insert",e)}}},G2e={class:"flex justify-end h-full gap-1 py-4 overflow-y-auto bg-n-background"},V2e={class:"flex flex-col w-full gap-1"},H2e={key:0,class:"text-center flex items-center justify-center px-4 py-8 text-n-slate-10 text-sm"},W2e={key:1,class:"text-center flex items-center justify-center px-4 py-8 text-n-slate-10 text-sm"};function z2e(e,t,n,s,a,o){const i=W("SearchResultItem");return p(),E("div",G2e,[m("div",V2e,[n.isLoading?(p(),E("div",H2e,I(e.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.SEARCH_LOADER")),1)):o.showNoResults?(p(),E("div",W2e,I(e.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.NO_RESULT")),1)):(p(!0),E(ue,{key:2},Ae(n.articles,l=>(p(),L(i,{id:l.id,key:l.id,title:l.title,body:l.content,url:l.url,category:l.category.name,locale:l.localeName,onPreview:o.handlePreview,onInsert:o.handleInsert},null,8,["id","title","body","url","category","locale","onPreview","onInsert"]))),128))])])}const Y2e=De(F2e,[["render",z2e]]),j2e={class:"h-full w-full flex flex-col flex-1 overflow-hidden"},K2e={class:"py-1"},X2e={class:"-ml-4 h-full overflow-y-auto"},q2e={class:"w-full h-full min-h-0"},Z2e={class:"flex justify-end gap-2 py-2"},Q2e={__name:"ArticleView",props:{url:{type:String,default:""}},emits:["back","insert"],setup(e,{emit:t}){const n=t,s=_e("accounts/isRTL"),a=i=>{i.stopPropagation(),n("back")},o=i=>{i.stopPropagation(),n("insert")};return(i,l)=>(p(),E("div",j2e,[m("div",K2e,[S(te,{link:"",xs:"",label:i.$t("HELP_CENTER.ARTICLE_SEARCH.BACK_RESULTS"),icon:"i-lucide-chevron-left",onClick:a},null,8,["label"])]),m("div",X2e,[m("div",q2e,[S(KR,{url:e.url,"is-rtl":C(s),"is-dir-applied":""},null,8,["url","is-rtl"])])]),m("div",Z2e,[S(te,{faded:"",slate:"",sm:"",type:"reset",icon:"i-lucide-chevron-left",label:i.$t("HELP_CENTER.ARTICLE_SEARCH.BACK"),onClick:a},null,8,["label"]),S(te,{sm:"",type:"submit",icon:"i-lucide-arrow-down-to-dot",label:i.$t("HELP_CENTER.ARTICLE_SEARCH.INSERT_ARTICLE"),onClick:o},null,8,["label"])])]))}},J2e=e=>e.startsWith("https")?e:`https://${e}`,eNe=()=>{const{hostURL:e,helpCenterURL:t}=window.chatwootConfig||{},n=t||e||"";if(!n)throw new Error("No valid base URL found in configuration");return n},tNe=e=>e?J2e(e):eNe(),PI=(e,t)=>`${tNe(t)}/hc/${e}`,nNe=(e,t,n,s,a)=>`${PI(e,a)}/articles/${s}`,Ptt=e=>{switch(e){case"draft":return 0;case"published":return 1;case"archived":return 2;default:return}},ml={DRAFT:"draft",PUBLISHED:"published",ARCHIVED:"archived"},sNe={publish:{label:"HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.DROPDOWN_MENU.PUBLISH",value:ml.PUBLISHED,action:"publish",icon:"i-lucide-check"},draft:{label:"HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.DROPDOWN_MENU.DRAFT",value:ml.DRAFT,action:"draft",icon:"i-lucide-pencil-line"},archive:{label:"HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.DROPDOWN_MENU.ARCHIVE",value:ml.ARCHIVED,action:"archive",icon:"i-lucide-archive-restore"},delete:{label:"HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.DROPDOWN_MENU.DELETE",value:"delete",action:"delete",icon:"i-lucide-trash"}},nT={[ml.ARCHIVED]:["publish","draft"],[ml.DRAFT]:["publish","archive"],[ml.PUBLISHED]:["draft","archive"]},ktt={ALL:"all"},Btt="all",Utt=[{key:"ALL",value:"all"},{key:"MINE",value:"mine"},{key:"DRAFT",value:"draft"},{key:"ARCHIVED",value:"archived"}],Ftt=[{label:"HELP_CENTER.LOCALES_PAGE.LOCALE_CARD.DROPDOWN_MENU.MAKE_DEFAULT",action:"change-default",value:"default",icon:"i-lucide-star"},{label:"HELP_CENTER.LOCALES_PAGE.LOCALE_CARD.DROPDOWN_MENU.DELETE",action:"delete",value:"delete",icon:"i-lucide-trash"}],Gtt={published:["archive","draft"],archived:["draft"],draft:["archive"]},aNe={name:"ArticleSearchPopover",components:{SearchHeader:L2e,SearchResults:Y2e,ArticleView:Q2e},props:{selectedPortalSlug:{type:String,required:!0}},emits:["close","insert"],data(){return{searchQuery:"",isLoading:!1,searchResults:[],activeId:"",debounceSearch:()=>{}}},computed:{...mt({portalBySlug:"portals/portalBySlug"}),portal(){return this.portalBySlug(this.selectedPortalSlug)},portalCustomDomain(){var e;return(e=this.portal)==null?void 0:e.custom_domain},articleViewerUrl(){const e=this.activeArticle(this.activeId);if(!e)return"";const t=document.body.classList.contains("dark"),n=new URL(e.url);return n.searchParams.set("show_plain_layout","true"),t&&n.searchParams.set("theme","dark"),`${n}`},searchResultsWithUrl(){return this.searchResults.map(e=>({...e,localeName:this.localeName(e.category.locale||"en"),url:this.generateArticleUrl(e)}))}},mounted(){this.fetchArticlesByQuery(this.searchQuery),this.debounceSearch=Ua(this.fetchArticlesByQuery,500,!1)},methods:{generateArticleUrl(e){return nNe(this.selectedPortalSlug,"","",e.slug,this.portalCustomDomain)},localeName(e){return N2e[e]},activeArticle(e){return this.searchResultsWithUrl.find(t=>t.id===e)},onSearch(e){this.searchQuery=e,this.activeId="",this.debounceSearch(e)},onClose(){this.$emit("close"),this.searchQuery="",this.activeId="",this.searchResults=[]},async fetchArticlesByQuery(e){try{const t=e?"":"views";this.isLoading=!0,this.searchResults=[];const{data:n}=await KO.searchArticles({portalSlug:this.selectedPortalSlug,query:e,sort:t});this.searchResults=n.payload,this.isLoading=!0}catch{}finally{this.isLoading=!1}},handlePreview(e){this.activeId=e},onBack(){this.activeId=""},onInsert(e){const t=this.activeArticle(e||this.activeId);this.$emit("insert",t),ne(this.$t("HELP_CENTER.ARTICLE_SEARCH.SUCCESS_ARTICLE_INSERTED")),this.onClose()}}},oNe={class:"fixed top-0 left-0 z-50 flex items-center justify-center w-screen h-screen bg-modal-backdrop-light dark:bg-modal-backdrop-dark"},iNe={class:"flex flex-col px-4 pb-4 rounded-md shadow-md border border-solid border-n-weak bg-n-background z-[1000] max-w-[720px] md:w-[20rem] lg:w-[24rem] xl:w-[28rem] 2xl:w-[32rem] h-[calc(100vh-20rem)] max-h-[40rem]"};function lNe(e,t,n,s,a,o){const i=W("SearchHeader"),l=W("ArticleView"),r=W("SearchResults"),c=Qe("on-clickaway");return p(),E("div",oNe,[re((p(),E("div",iNe,[S(i,{title:e.$t("HELP_CENTER.ARTICLE_SEARCH.TITLE"),class:"w-full sticky top-0 bg-[inherit]",onClose:o.onClose,onSearch:o.onSearch},null,8,["title","onClose","onSearch"]),a.activeId?(p(),L(l,{key:0,url:o.articleViewerUrl,onBack:o.onBack,onInsert:o.onInsert},null,8,["url","onBack","onInsert"])):(p(),L(r,{key:1,"search-query":a.searchQuery,"is-loading":a.isLoading,"portal-slug":n.selectedPortalSlug,articles:o.searchResultsWithUrl,onPreview:o.handlePreview,onInsert:o.onInsert},null,8,["search-query","is-loading","portal-slug","articles","onPreview","onInsert"]))])),[[c,o.onClose]])])}const rNe=De(aNe,[["render",lNe]]),cNe={class:"my-0 mx-4 px-1 flex max-h-[8vh] items-baseline justify-between hover:bg-n-slate-1 border border-dashed border-n-weak rounded-sm overflow-auto"},uNe={class:"w-fit !m-0"},dNe={__name:"MessageSignatureMissingAlert",setup(e){const t=Ft(),n=()=>t.push({name:"profile_settings_index"});return(s,a)=>(p(),E("div",cNe,[m("p",uNe,[xe(I(s.$t("CONVERSATION.FOOTER.MESSAGE_SIGNATURE_NOT_CONFIGURED"))+" ",1),S(te,{link:"",label:s.$t("CONVERSATION.FOOTER.CLICK_HERE"),onClick:n},null,8,["label"])])]))}},pNe={__name:"ReplyBoxBanner",props:{message:{type:String,default:""},isOnPrivateNote:{type:Boolean,default:!1}},setup(e){const t=e,n=na(),{t:s}=be(),a=_e("getSelectedChat"),o=_e("getCurrentUser"),i=y({get(){var T,_;return(_=(T=a.value)==null?void 0:T.meta)==null?void 0:_.assignee},set(T){var N;const _=T?T.id:null;n.dispatch("setCurrentChatAssignee",T),n.dispatch("assignAgent",{conversationId:(N=a.value)==null?void 0:N.id,agentId:_})}}),l=y(()=>t.message!==""&&!t.isOnPrivateNote),r=y(()=>!i.value),c=y(()=>{var T,_;return((T=i.value)==null?void 0:T.id)!==((_=o.value)==null?void 0:_.id)}),u=y(()=>l.value&&(r.value||c.value)),d=y(()=>{var T;return l.value&&((T=a.value)==null?void 0:T.status)===yt.STATUS_TYPE.PENDING}),h=y(()=>{var T,_;return((T=i.value)==null?void 0:T.id)===((_=o.value)==null?void 0:_.id)?s("CONVERSATION.BOT_HANDOFF_REOPEN_ACTION"):s("CONVERSATION.BOT_HANDOFF_ACTION")}),g=async()=>{const{avatar_url:T,..._}=o.value||{};i.value={..._,thumbnail:T}},f=y(()=>r.value||c.value),b=async()=>{try{await g(),ne(s("CONVERSATION.CHANGE_AGENT"))}catch{ne(s("CONVERSATION.CHANGE_AGENT_FAILED"))}},A=async()=>{var T;await n.dispatch("toggleStatus",{conversationId:(T=a.value)==null?void 0:T.id,status:yt.STATUS_TYPE.OPEN})},v=async()=>{try{await A(),f.value&&await g(),ne(s("CONVERSATION.BOT_HANDOFF_SUCCESS"))}catch{ne(s("CONVERSATION.BOT_HANDOFF_ERROR"))}};return(T,_)=>(p(),E(ue,null,[u.value&&!d.value?(p(),L(fr,{key:0,"action-button-variant":"ghost","color-scheme":"secondary",class:"mx-2 mb-2 rounded-lg !py-2","banner-message":T.$t("CONVERSATION.NOT_ASSIGNED_TO_YOU"),"has-action-button":"","action-button-label":T.$t("CONVERSATION.ASSIGN_TO_ME"),onPrimaryAction:b},null,8,["banner-message","action-button-label"])):$("",!0),d.value?(p(),L(fr,{key:1,"action-button-variant":"ghost","color-scheme":"secondary",class:"mx-2 mb-2 rounded-lg !py-2","banner-message":T.$t("CONVERSATION.BOT_HANDOFF_MESSAGE"),"has-action-button":"","action-button-label":h.value,onPrimaryAction:v},null,8,["banner-message","action-button-label"])):$("",!0)],64))}},mNe={class:"mt-2"},hNe={class:"relative rounded-md px-3 py-2 text-xs text-n-slate-12 bg-n-slate-3 dark:bg-n-solid-3"},fNe={class:"absolute top-2 right-2 z-10 flex items-center gap-1"},gNe=["title"],_Ne={__name:"QuotedEmailPreview",props:{quotedEmailText:{type:String,required:!0},previewText:{type:String,required:!0}},emits:["toggle"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),{formatMessage:o}=sa(),i=j(!1),l=y(()=>n.quotedEmailText?o(n.quotedEmailText,!1,!1,!0):""),r=()=>{i.value=!i.value};return(c,u)=>{const d=Qe("tooltip"),h=Qe("dompurify-html");return p(),E("div",mNe,[m("div",hNe,[m("div",fNe,[re(S(te,{ghost:"",slate:"",xs:"",icon:i.value?"i-lucide-minimize":"i-lucide-maximize",onClick:r},null,8,["icon"]),[[d,i.value?C(a)("CONVERSATION.REPLYBOX.QUOTED_REPLY.COLLAPSE"):C(a)("CONVERSATION.REPLYBOX.QUOTED_REPLY.EXPAND")]]),re(S(te,{ghost:"",slate:"",xs:"",icon:"i-lucide-x",onClick:u[0]||(u[0]=g=>s("toggle"))},null,512),[[d,C(a)("CONVERSATION.REPLYBOX.QUOTED_REPLY.REMOVE_PREVIEW")]])]),re(m("div",{class:ae(["w-full max-w-none break-words prose prose-sm dark:prose-invert cursor-pointer ltr:pr-8 rtl:pl-8",{"line-clamp-1":!i.value,"max-h-60 overflow-y-auto":i.value}]),title:e.previewText,onClick:r},null,10,gNe),[[h,l.value]])])])}}};function zs(e,t,n,s){return new(n||(n=Promise))(function(a,o){function i(c){try{r(s.next(c))}catch(u){o(u)}}function l(c){try{r(s.throw(c))}catch(u){o(u)}}function r(c){var u;c.done?a(c.value):(u=c.value,u instanceof n?u:new n(function(d){d(u)})).then(i,l)}r((s=s.apply(e,t||[])).next())})}let fu=class{constructor(){this.listeners={}}on(t,n,s){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),s==null?void 0:s.once){const a=()=>{this.un(t,a),this.un(t,n)};return this.on(t,a),a}return()=>this.un(t,n)}un(t,n){var s;(s=this.listeners[t])===null||s===void 0||s.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(s=>s(...n))}};const sT={decode:function(e,t){return zs(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const s=n[0];if(s.some(a=>a>1||a<-1)){const a=s.length;let o=0;for(let i=0;i<a;i++){const l=Math.abs(s[i]);l>o&&(o=l)}for(const i of n)for(let l=0;l<a;l++)i[l]/=o}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function kI(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[s,a]of Object.entries(t))if(s==="children")for(const[o,i]of Object.entries(t))typeof i=="string"?n.appendChild(document.createTextNode(i)):n.appendChild(kI(o,i));else s==="style"?Object.assign(n.style,a):s==="textContent"?n.textContent=a:n.setAttribute(s,a.toString());return n}function aT(e,t,n){const s=kI(e,t||{});return n==null||n.appendChild(s),s}var vNe=Object.freeze({__proto__:null,createElement:aT,default:aT});const ENe={fetchBlob:function(e,t,n){return zs(this,void 0,void 0,function*(){const s=yield fetch(e,n);if(s.status>=400)throw new Error(`Failed to fetch ${e}: ${s.status} (${s.statusText})`);return function(a,o){zs(this,void 0,void 0,function*(){if(!a.body||!a.headers)return;const i=a.body.getReader(),l=Number(a.headers.get("Content-Length"))||0;let r=0;const c=d=>zs(this,void 0,void 0,function*(){r+=(d==null?void 0:d.length)||0;const h=Math.round(r/l*100);o(h)}),u=()=>zs(this,void 0,void 0,function*(){let d;try{d=yield i.read()}catch{return}d.done||(c(d.value),yield u())});u()})}(s.clone(),t),s.blob()})}};class bNe extends fu{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,s){return this.media.addEventListener(t,n,s),()=>this.media.removeEventListener(t,n,s)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const s=this.getSrc();if(t&&s===t)return;this.revokeSrc();const a=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=a}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return zs(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}class Sr extends fu{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.subscriptions=[],this.options=t;const s=this.parentFromOptionsContainer(t.container);this.parent=s;const[a,o]=this.initHtml();s.appendChild(a),this.container=a,this.scrollContainer=o.querySelector(".scroll"),this.wrapper=o.querySelector(".wrapper"),this.canvasWrapper=o.querySelector(".canvases"),this.progressWrapper=o.querySelector(".progress"),this.cursor=o.querySelector(".cursor"),n&&o.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const s=this.wrapper.getBoundingClientRect(),a=n.clientX-s.left,o=n.clientY-s.top;return[a/s.width,o/s.height]};if(this.wrapper.addEventListener("click",n=>{const[s,a]=t(n);this.emit("click",s,a)}),this.wrapper.addEventListener("dblclick",n=>{const[s,a]=t(n);this.emit("dblclick",s,a)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:s,clientWidth:a}=this.scrollContainer,o=n/s,i=(n+a)/s;this.emit("scroll",o,i,n,n+a)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,s,a,o=3,i=0,l=100){if(!t)return()=>{};const r=matchMedia("(pointer: coarse)").matches;let c=()=>{};const u=d=>{if(d.button!==i)return;d.preventDefault(),d.stopPropagation();let h=d.clientX,g=d.clientY,f=!1;const b=Date.now(),A=R=>{if(R.preventDefault(),R.stopPropagation(),r&&Date.now()-b<l)return;const O=R.clientX,x=R.clientY,w=O-h,D=x-g;if(f||Math.abs(w)>o||Math.abs(D)>o){const M=t.getBoundingClientRect(),{left:P,top:U}=M;f||(s==null||s(h-P,g-U),f=!0),n(w,D,O-P,x-U),h=O,g=x}},v=R=>{if(f){const O=R.clientX,x=R.clientY,w=t.getBoundingClientRect(),{left:D,top:M}=w;a==null||a(O-D,x-M)}c()},T=R=>{R.relatedTarget&&R.relatedTarget!==document.documentElement||v(R)},_=R=>{f&&(R.stopPropagation(),R.preventDefault())},N=R=>{f&&R.preventDefault()};document.addEventListener("pointermove",A),document.addEventListener("pointerup",v),document.addEventListener("pointerout",T),document.addEventListener("pointercancel",T),document.addEventListener("touchmove",N,{passive:!1}),document.addEventListener("click",_,{capture:!0}),c=()=>{document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",v),document.removeEventListener("pointerout",T),document.removeEventListener("pointercancel",T),document.removeEventListener("touchmove",N),setTimeout(()=>{document.removeEventListener("click",_,{capture:!0})},10)}};return t.addEventListener("pointerdown",u),()=>{c(),t.removeEventListener("pointerdown",u)}}(this.wrapper,(t,n,s)=>{this.emit("drag",Math.max(0,Math.min(1,s/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var s;const a=((s=this.audioData)===null||s===void 0?void 0:s.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const o=this.parent.clientHeight||128;return n!=null&&n.every(i=>!i.overlay)?o/a:o}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),s=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${s?` nonce="${s}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,s=n*t;this.setScroll(s)}destroy(){var t,n;this.subscriptions.forEach(s=>s()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.call(this)}createDelay(t=10){let n,s;const a=()=>{n&&clearTimeout(n),s&&s()};return this.timeouts.push(a),()=>new Promise((o,i)=>{a(),s=i,n=setTimeout(()=>{n=void 0,s=void 0,o()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),s=n.getContext("2d"),a=n.height*(window.devicePixelRatio||1),o=s.createLinearGradient(0,0,0,a),i=1/(t.length-1);return t.forEach((l,r)=>{const c=r*i;o.addColorStop(c,l)}),o}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,s,a){const o=t[0],i=t[1]||t[0],l=o.length,{width:r,height:c}=s.canvas,u=c/2,d=this.getPixelRatio(),h=n.barWidth?n.barWidth*d:1,g=n.barGap?n.barGap*d:n.barWidth?h/2:0,f=n.barRadius||0,b=r/(h+g)/l,A=f&&"roundRect"in s?"roundRect":"rect";s.beginPath();let v=0,T=0,_=0;for(let N=0;N<=l;N++){const R=Math.round(N*b);if(R>v){const w=Math.round(T*u*a),D=w+Math.round(_*u*a)||1;let M=u-w;n.barAlign==="top"?M=0:n.barAlign==="bottom"&&(M=c-D),s[A](v*(h+g),M,h,D,f),v=R,T=0,_=0}const O=Math.abs(o[N]||0),x=Math.abs(i[N]||0);O>T&&(T=O),x>_&&(_=x)}s.fill(),s.closePath()}renderLineWaveform(t,n,s,a){const o=i=>{const l=t[i]||t[0],r=l.length,{height:c}=s.canvas,u=c/2,d=s.canvas.width/r;s.moveTo(0,u);let h=0,g=0;for(let f=0;f<=r;f++){const b=Math.round(f*d);if(b>h){const v=u+(Math.round(g*u*a)||1)*(i===0?-1:1);s.lineTo(h,v),h=b,g=0}const A=Math.abs(l[f]||0);A>g&&(g=A)}s.lineTo(h,u)};s.beginPath(),o(0),o(1),s.fill(),s.closePath()}renderWaveform(t,n,s){if(s.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,s);let a=n.barHeight||1;if(n.normalize){const o=Array.from(t[0]).reduce((i,l)=>Math.max(i,Math.abs(l)),0);a=o?1/o:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,s,a):this.renderLineWaveform(t,n,s,a)}renderSingleCanvas(t,n,s,a,o,i,l){const r=this.getPixelRatio(),c=document.createElement("canvas");c.width=Math.round(s*r),c.height=Math.round(a*r),c.style.width=`${s}px`,c.style.height=`${a}px`,c.style.left=`${Math.round(o)}px`,i.appendChild(c);const u=c.getContext("2d");if(this.renderWaveform(t,n,u),c.width>0&&c.height>0){const d=c.cloneNode(),h=d.getContext("2d");h.drawImage(c,0,0),h.globalCompositeOperation="source-in",h.fillStyle=this.convertColorValues(n.progressColor),h.fillRect(0,0,c.width,c.height),l.appendChild(d)}}renderMultiCanvas(t,n,s,a,o,i){const l=this.getPixelRatio(),{clientWidth:r}=this.scrollContainer,c=s/l;let u=Math.min(Sr.MAX_CANVAS_WIDTH,r,c),d={};if(n.barWidth||n.barGap){const A=n.barWidth||.5,v=A+(n.barGap||A/2);u%v!=0&&(u=Math.floor(u/v)*v)}const h=A=>{if(A<0||A>=g||d[A])return;d[A]=!0;const v=A*u,T=Math.min(c-v,u);if(T<=0)return;const _=t.map(N=>{const R=Math.floor(v/c*N.length),O=Math.floor((v+T)/c*N.length);return N.slice(R,O)});this.renderSingleCanvas(_,n,T,a,v,o,i)},g=Math.ceil(c/u);if(!this.isScrollable){for(let A=0;A<g;A++)h(A);return}const f=this.scrollContainer.scrollLeft/c,b=Math.floor(f*g);h(b-1),h(b),h(b+1),g>1&&(this.unsubscribeOnScroll=this.on("scroll",()=>{const{scrollLeft:A}=this.scrollContainer,v=Math.floor(A/c*g);Object.keys(d).length>Sr.MAX_NODES&&(o.innerHTML="",i.innerHTML="",d={}),h(v-1),h(v),h(v+1)}))}renderChannel(t,n,s,a){var{overlay:o}=n,i=function(u,d){var h={};for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&d.indexOf(g)<0&&(h[g]=u[g]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function"){var f=0;for(g=Object.getOwnPropertySymbols(u);f<g.length;f++)d.indexOf(g[f])<0&&Object.prototype.propertyIsEnumerable.call(u,g[f])&&(h[g[f]]=u[g[f]])}return h}(n,["overlay"]);const l=document.createElement("div"),r=this.getHeight(i.height,i.splitChannels);l.style.height=`${r}px`,o&&a>0&&(l.style.marginTop=`-${r}px`),this.canvasWrapper.style.minHeight=`${r}px`,this.canvasWrapper.appendChild(l);const c=l.cloneNode();this.progressWrapper.appendChild(c),this.renderMultiCanvas(t,i,s,r,l,c)}render(t){return zs(this,void 0,void 0,function*(){var n;this.timeouts.forEach(r=>r()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const s=this.getPixelRatio(),a=this.scrollContainer.clientWidth,o=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=o>a;const i=this.options.fillParent&&!this.isScrollable,l=(i?a:o)*s;if(this.wrapper.style.width=i?"100%":`${o}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let r=0;r<t.numberOfChannels;r++){const c=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[r]);this.renderChannel([t.getChannelData(r)],c,l,r)}else{const r=[t.getChannelData(0)];t.numberOfChannels>1&&r.push(t.getChannelData(1)),this.renderChannel(r,this.options,l,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){var t;if((t=this.unsubscribeOnScroll)===null||t===void 0||t.call(this),delete this.unsubscribeOnScroll,!this.audioData)return;const{scrollWidth:n}=this.scrollContainer,{right:s}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&n!==this.scrollContainer.scrollWidth){const{right:a}=this.progressWrapper.getBoundingClientRect();let o=a-s;o*=2,o=o<0?Math.floor(o):Math.ceil(o),o/=2,this.scrollContainer.scrollLeft+=o}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:s,scrollWidth:a,clientWidth:o}=this.scrollContainer,i=t*a,l=s,r=s+o,c=o/2;if(this.isDragging)i+30>r?this.scrollContainer.scrollLeft+=30:i-30<l&&(this.scrollContainer.scrollLeft-=30);else{(i<l||i>r)&&(this.scrollContainer.scrollLeft=i-(this.options.autoCenter?c:0));const u=i-s-c;n&&this.options.autoCenter&&u>0&&(this.scrollContainer.scrollLeft+=Math.min(u,10))}{const u=this.scrollContainer.scrollLeft,d=u/a,h=(u+o)/a;this.emit("scroll",d,h,u,u+o)}}renderProgress(t,n){if(isNaN(t))return;const s=100*t;this.canvasWrapper.style.clipPath=`polygon(${s}% 0, 100% 0, 100% 100%, ${s}% 100%)`,this.progressWrapper.style.width=`${s}%`,this.cursor.style.left=`${s}%`,this.cursor.style.transform=`translateX(-${Math.round(s)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,s){return zs(this,void 0,void 0,function*(){const a=this.canvasWrapper.querySelectorAll("canvas");if(!a.length)throw new Error("No waveform data");if(s==="dataURL"){const o=Array.from(a).map(i=>i.toDataURL(t,n));return Promise.resolve(o)}return Promise.all(Array.from(a).map(o=>new Promise((i,l)=>{o.toBlob(r=>{r?i(r):l(new Error("Could not export image"))},t,n)})))})}}Sr.MAX_CANVAS_WIDTH=8e3,Sr.MAX_NODES=10;class TNe extends fu{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class oT extends fu{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return zs(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return zs(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,s;const a=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+a),(s=this.bufferNode)===null||s===void 0||s.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return zs(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let s=0;s<n;s++)t.push(this.buffer.getChannelData(s));return t}}const SNe={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class qc extends bNe{static create(t){return new qc(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new oT:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},SNe,t),this.timer=new TNe;const s=n?void 0:this.getMediaElement();this.renderer=new Sr(this.options,s),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const a=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:o,duration:i}=this.options;(a||o&&i)&&this.load(a,o,i).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{this.emit("error",t.error)}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,s,a)=>{const o=this.getDuration();this.emit("scroll",t*o,n*o,s,a)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let s;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?s=0:this.options.dragToSeek===!0?s=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(s=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},s),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,s,a){return zs(this,void 0,void 0,function*(){var o;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!s){const l=this.options.fetchParams||{};window.AbortController&&!l.signal&&(this.abortController=new AbortController,l.signal=(o=this.abortController)===null||o===void 0?void 0:o.signal);const r=c=>this.emit("loading",c);n=yield ENe.fetchBlob(t,r,l)}this.setSrc(t,n);const i=yield new Promise(l=>{const r=a||this.getDuration();r?l(r):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>l(this.getDuration()),{once:!0}))});if(!t&&!n){const l=this.getMediaElement();l instanceof oT&&(l.duration=i)}if(s)this.decodedData=sT.createBuffer(s,i||0);else if(n){const l=yield n.arrayBuffer();this.decodedData=yield sT.decode(l,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,s){return zs(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,s)}catch(a){throw this.emit("error",a),a}})}loadBlob(t,n,s){return zs(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,s)}catch(a){throw this.emit("error",a),a}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:s=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const a=Math.min(t,this.decodedData.numberOfChannels),o=[];for(let i=0;i<a;i++){const l=this.decodedData.getChannelData(i),r=[],c=l.length/n;for(let u=0;u<n;u++){const d=l.slice(Math.floor(u*c),Math.ceil((u+1)*c));let h=0;for(let g=0;g<d.length;g++){const f=d[g];Math.abs(f)>Math.abs(h)&&(h=f)}r.push(Math.round(h*s)/s)}o.push(r)}return o}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return zs(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return zs(this,arguments,void 0,function*(t="image/png",n=1,s="dataURL"){return this.renderer.exportImage(t,n,s)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}qc.BasePlugin=class extends fu{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},qc.dom=vNe;function Kh(e,t,n,s){return new(n||(n=Promise))(function(a,o){function i(c){try{r(s.next(c))}catch(u){o(u)}}function l(c){try{r(s.throw(c))}catch(u){o(u)}}function r(c){var u;c.done?a(c.value):(u=c.value,u instanceof n?u:new n(function(d){d(u)})).then(i,l)}r((s=s.apply(e,[])).next())})}class BI{constructor(){this.listeners={}}on(t,n,s){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),s==null?void 0:s.once){const a=()=>{this.un(t,a),this.un(t,n)};return this.on(t,a),a}return()=>this.un(t,n)}un(t,n){var s;(s=this.listeners[t])===null||s===void 0||s.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(s=>s(...n))}}class ANe extends BI{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}}class yNe extends BI{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const INe=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class Q_ extends ANe{constructor(t){var n,s,a,o,i,l;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(s=t.scrollingWaveform)!==null&&s!==void 0&&s,scrollingWaveformWindow:(a=t.scrollingWaveformWindow)!==null&&a!==void 0?a:5,continuousWaveform:(o=t.continuousWaveform)!==null&&o!==void 0&&o,renderRecordedAudio:(i=t.renderRecordedAudio)===null||i===void 0||i,mediaRecorderTimeslice:(l=t.mediaRecorderTimeslice)!==null&&l!==void 0?l:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new yNe,this.subscriptions.push(this.timer.on("tick",()=>{const r=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+r,this.emit("record-progress",this.duration)}))}static create(t){return new Q_(t||{})}renderMicStream(t){var n;const s=new AudioContext,a=s.createMediaStreamSource(t),o=s.createAnalyser();a.connect(o),this.options.continuousWaveform&&(o.fftSize=32);const i=o.frequencyBinCount,l=new Float32Array(i);let r=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const c=setInterval(()=>{var u,d,h,g;if(!this.isWaveformPaused){if(o.getFloatTimeDomainData(l),this.options.scrollingWaveform){const f=Math.floor((this.options.scrollingWaveformWindow||0)*s.sampleRate),b=Math.min(f,this.dataWindow?this.dataWindow.length+i:i),A=new Float32Array(f);if(this.dataWindow){const v=Math.max(0,f-this.dataWindow.length);A.set(this.dataWindow.slice(-b+i),v)}A.set(l,f-i),this.dataWindow=A}else if(this.options.continuousWaveform){if(!this.dataWindow){const b=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((d=(u=this.wavesurfer)===null||u===void 0?void 0:u.getWidth())!==null&&d!==void 0?d:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(b)}let f=0;for(let b=0;b<i;b++){const A=Math.abs(l[b]);A>f&&(f=A)}if(r+1>this.dataWindow.length){const b=new Float32Array(2*this.dataWindow.length);b.set(this.dataWindow,0),this.dataWindow=b}this.dataWindow[r]=f,r++}else this.dataWindow=l;if(this.wavesurfer){const f=((g=(h=this.dataWindow)===null||h===void 0?void 0:h.length)!==null&&g!==void 0?g:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:f).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(b=>{console.error("Error rendering real-time recording data:",b)})}}},10);return{onDestroy:()=>{clearInterval(c),a==null||a.disconnect(),s==null||s.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(c),this.stopMic()}}}startMic(t){return Kh(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(o){throw new Error("Error accessing the microphone: "+o.message)}const{onDestroy:s,onEnd:a}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",s)),this.subscriptions.push(this.once("record-end",a)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return Kh(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const s=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||INe.find(i=>MediaRecorder.isTypeSupported(i)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=s,this.stopRecording();const a=[];s.ondataavailable=i=>{i.data.size>0&&a.push(i.data),this.emit("record-data-available",i.data)};const o=i=>{var l;const r=new Blob(a,{type:s.mimeType});this.emit(i,r),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(l=this.wavesurfer)===null||l===void 0||l.load(URL.createObjectURL(r)))};s.onpause=()=>o("record-pause"),s.onstop=()=>o("record-end"),s.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return Kh(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}var J_={};function CNe(e){return new Int8Array(e)}function NNe(e){return new Int16Array(e)}function UI(e){return new Int32Array(e)}function FI(e){return new Float32Array(e)}function ONe(e){return new Float64Array(e)}function GI(e){if(e.length==1)return FI(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(GI(e));return n}function VI(e){if(e.length==1)return UI(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(VI(e));return n}function HI(e){if(e.length==1)return NNe(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(HI(e));return n}function WI(e){if(e.length==1)return new Array(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(WI(e));return n}var zI={};zI.fill=function(e,t,n,s){if(arguments.length==2)for(var a=0;a<e.length;a++)e[a]=arguments[1];else for(var a=t;a<n;a++)e[a]=s};var gu={};gu.arraycopy=function(e,t,n,s,a){for(var o=t+a;t<o;)n[s++]=e[t++]};gu.out={};gu.out.println=function(e){console.log(e)};gu.out.printf=function(){console.log.apply(console,arguments)};var jp={};jp.SQRT2=1.4142135623730951;jp.FAST_LOG10=function(e){return Math.log10(e)};jp.FAST_LOG10_X=function(e,t){return Math.log10(e)*t};function Qo(e){this.ordinal=e}Qo.short_block_allowed=new Qo(0);Qo.short_block_coupled=new Qo(1);Qo.short_block_dispensed=new Qo(2);Qo.short_block_forced=new Qo(3);var YI={};YI.MAX_VALUE=34028235e31;function xa(e){this.ordinal=e}xa.vbr_off=new xa(0);xa.vbr_mt=new xa(1);xa.vbr_rh=new xa(2);xa.vbr_abr=new xa(3);xa.vbr_mtrh=new xa(4);xa.vbr_default=xa.vbr_mtrh;var RNe=function(e){},jn={System:gu,VbrMode:xa,Float:YI,ShortBlock:Qo,Util:jp,Arrays:zI,new_array_n:WI,new_byte:CNe,new_double:ONe,new_float:FI,new_float_n:GI,new_int:UI,new_int_n:VI,new_short_n:HI,assert:RNe},Xh,iT;function xNe(){if(iT)return Xh;iT=1;var e=jn,t=e.System,n=e.Util,s=e.Arrays,a=e.new_float,o=Zs();function i(){var l=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*n.SQRT2*.5/2384e-9,.017876148*n.SQRT2*.5/2384e-9,.003134727*n.SQRT2*.5/2384e-9,.002457142*n.SQRT2*.5/2384e-9,971317e-9*n.SQRT2*.5/2384e-9,218868e-9*n.SQRT2*.5/2384e-9,101566e-9*n.SQRT2*.5/2384e-9,13828e-9*n.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],r=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],c=r[o.SHORT_TYPE],u=r[o.SHORT_TYPE],d=r[o.SHORT_TYPE],h=r[o.SHORT_TYPE],g=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function f(v,T,_){for(var N=10,R=T+238-14-286,O=-15;O<0;O++){var x,w,D;x=l[N+-10],w=v[R+-224]*x,D=v[T+224]*x,x=l[N+-9],w+=v[R+-160]*x,D+=v[T+160]*x,x=l[N+-8],w+=v[R+-96]*x,D+=v[T+96]*x,x=l[N+-7],w+=v[R+-32]*x,D+=v[T+32]*x,x=l[N+-6],w+=v[R+32]*x,D+=v[T+-32]*x,x=l[N+-5],w+=v[R+96]*x,D+=v[T+-96]*x,x=l[N+-4],w+=v[R+160]*x,D+=v[T+-160]*x,x=l[N+-3],w+=v[R+224]*x,D+=v[T+-224]*x,x=l[N+-2],w+=v[T+-256]*x,D-=v[R+256]*x,x=l[N+-1],w+=v[T+-192]*x,D-=v[R+192]*x,x=l[N+0],w+=v[T+-128]*x,D-=v[R+128]*x,x=l[N+1],w+=v[T+-64]*x,D-=v[R+64]*x,x=l[N+2],w+=v[T+0]*x,D-=v[R+0]*x,x=l[N+3],w+=v[T+64]*x,D-=v[R+-64]*x,x=l[N+4],w+=v[T+128]*x,D-=v[R+-128]*x,x=l[N+5],w+=v[T+192]*x,D-=v[R+-192]*x,w*=l[N+6],x=D-w,_[30+O*2]=D+w,_[31+O*2]=l[N+7]*x,N+=18,T--,R++}{var w,D,M,P;D=v[T+-16]*l[N+-10],w=v[T+-32]*l[N+-2],D+=(v[T+-48]-v[T+16])*l[N+-9],w+=v[T+-96]*l[N+-1],D+=(v[T+-80]+v[T+48])*l[N+-8],w+=v[T+-160]*l[N+0],D+=(v[T+-112]-v[T+80])*l[N+-7],w+=v[T+-224]*l[N+1],D+=(v[T+-144]+v[T+112])*l[N+-6],w-=v[T+32]*l[N+2],D+=(v[T+-176]-v[T+144])*l[N+-5],w-=v[T+96]*l[N+3],D+=(v[T+-208]+v[T+176])*l[N+-4],w-=v[T+160]*l[N+4],D+=(v[T+-240]-v[T+208])*l[N+-3],w-=v[T+224],M=w-D,P=w+D,D=_[14],w=_[15]-D,_[31]=P+D,_[30]=M+w,_[15]=M-w,_[14]=P-D}{var U;U=_[28]-_[0],_[0]+=_[28],_[28]=U*l[N+-2*18+7],U=_[29]-_[1],_[1]+=_[29],_[29]=U*l[N+-2*18+7],U=_[26]-_[2],_[2]+=_[26],_[26]=U*l[N+-4*18+7],U=_[27]-_[3],_[3]+=_[27],_[27]=U*l[N+-4*18+7],U=_[24]-_[4],_[4]+=_[24],_[24]=U*l[N+-6*18+7],U=_[25]-_[5],_[5]+=_[25],_[25]=U*l[N+-6*18+7],U=_[22]-_[6],_[6]+=_[22],_[22]=U*n.SQRT2,U=_[23]-_[7],_[7]+=_[23],_[23]=U*n.SQRT2-_[7],_[7]-=_[6],_[22]-=_[7],_[23]-=_[22],U=_[6],_[6]=_[31]-U,_[31]=_[31]+U,U=_[7],_[7]=_[30]-U,_[30]=_[30]+U,U=_[22],_[22]=_[15]-U,_[15]=_[15]+U,U=_[23],_[23]=_[14]-U,_[14]=_[14]+U,U=_[20]-_[8],_[8]+=_[20],_[20]=U*l[N+-10*18+7],U=_[21]-_[9],_[9]+=_[21],_[21]=U*l[N+-10*18+7],U=_[18]-_[10],_[10]+=_[18],_[18]=U*l[N+-12*18+7],U=_[19]-_[11],_[11]+=_[19],_[19]=U*l[N+-12*18+7],U=_[16]-_[12],_[12]+=_[16],_[16]=U*l[N+-14*18+7],U=_[17]-_[13],_[13]+=_[17],_[17]=U*l[N+-14*18+7],U=-_[20]+_[24],_[20]+=_[24],_[24]=U*l[N+-12*18+7],U=-_[21]+_[25],_[21]+=_[25],_[25]=U*l[N+-12*18+7],U=_[4]-_[8],_[4]+=_[8],_[8]=U*l[N+-12*18+7],U=_[5]-_[9],_[5]+=_[9],_[9]=U*l[N+-12*18+7],U=_[0]-_[12],_[0]+=_[12],_[12]=U*l[N+-4*18+7],U=_[1]-_[13],_[1]+=_[13],_[13]=U*l[N+-4*18+7],U=_[16]-_[28],_[16]+=_[28],_[28]=U*l[N+-4*18+7],U=-_[17]+_[29],_[17]+=_[29],_[29]=U*l[N+-4*18+7],U=n.SQRT2*(_[2]-_[10]),_[2]+=_[10],_[10]=U,U=n.SQRT2*(_[3]-_[11]),_[3]+=_[11],_[11]=U,U=n.SQRT2*(-_[18]+_[26]),_[18]+=_[26],_[26]=U-_[18],U=n.SQRT2*(-_[19]+_[27]),_[19]+=_[27],_[27]=U-_[19],U=_[2],_[19]-=_[3],_[3]-=U,_[2]=_[31]-U,_[31]+=U,U=_[3],_[11]-=_[19],_[18]-=U,_[3]=_[30]-U,_[30]+=U,U=_[18],_[27]-=_[11],_[19]-=U,_[18]=_[15]-U,_[15]+=U,U=_[19],_[10]-=U,_[19]=_[14]-U,_[14]+=U,U=_[10],_[11]-=U,_[10]=_[23]-U,_[23]+=U,U=_[11],_[26]-=U,_[11]=_[22]-U,_[22]+=U,U=_[26],_[27]-=U,_[26]=_[7]-U,_[7]+=U,U=_[27],_[27]=_[6]-U,_[6]+=U,U=n.SQRT2*(_[0]-_[4]),_[0]+=_[4],_[4]=U,U=n.SQRT2*(_[1]-_[5]),_[1]+=_[5],_[5]=U,U=n.SQRT2*(_[16]-_[20]),_[16]+=_[20],_[20]=U,U=n.SQRT2*(_[17]-_[21]),_[17]+=_[21],_[21]=U,U=-n.SQRT2*(_[8]-_[12]),_[8]+=_[12],_[12]=U-_[8],U=-n.SQRT2*(_[9]-_[13]),_[9]+=_[13],_[13]=U-_[9],U=-n.SQRT2*(_[25]-_[29]),_[25]+=_[29],_[29]=U-_[25],U=-n.SQRT2*(_[24]+_[28]),_[24]-=_[28],_[28]=U-_[24],U=_[24]-_[16],_[24]=U,U=_[20]-U,_[20]=U,U=_[28]-U,_[28]=U,U=_[25]-_[17],_[25]=U,U=_[21]-U,_[21]=U,U=_[29]-U,_[29]=U,U=_[17]-_[1],_[17]=U,U=_[9]-U,_[9]=U,U=_[25]-U,_[25]=U,U=_[5]-U,_[5]=U,U=_[21]-U,_[21]=U,U=_[13]-U,_[13]=U,U=_[29]-U,_[29]=U,U=_[1]-_[0],_[1]=U,U=_[16]-U,_[16]=U,U=_[17]-U,_[17]=U,U=_[8]-U,_[8]=U,U=_[9]-U,_[9]=U,U=_[24]-U,_[24]=U,U=_[25]-U,_[25]=U,U=_[4]-U,_[4]=U,U=_[5]-U,_[5]=U,U=_[20]-U,_[20]=U,U=_[21]-U,_[21]=U,U=_[12]-U,_[12]=U,U=_[13]-U,_[13]=U,U=_[28]-U,_[28]=U,U=_[29]-U,_[29]=U,U=_[0],_[0]+=_[31],_[31]-=U,U=_[1],_[1]+=_[30],_[30]-=U,U=_[16],_[16]+=_[15],_[15]-=U,U=_[17],_[17]+=_[14],_[14]-=U,U=_[8],_[8]+=_[23],_[23]-=U,U=_[9],_[9]+=_[22],_[22]-=U,U=_[24],_[24]+=_[7],_[7]-=U,U=_[25],_[25]+=_[6],_[6]-=U,U=_[4],_[4]+=_[27],_[27]-=U,U=_[5],_[5]+=_[26],_[26]-=U,U=_[20],_[20]+=_[11],_[11]-=U,U=_[21],_[21]+=_[10],_[10]-=U,U=_[12],_[12]+=_[19],_[19]-=U,U=_[13],_[13]+=_[18],_[18]-=U,U=_[28],_[28]+=_[3],_[3]-=U,U=_[29],_[29]+=_[2],_[2]-=U}}function b(v,T){for(var _=0;_<3;_++){var N,R,O,x,w,D;x=v[T+2*3]*r[o.SHORT_TYPE][0]-v[T+5*3],N=v[T+0*3]*r[o.SHORT_TYPE][2]-v[T+3*3],R=x+N,O=x-N,x=v[T+5*3]*r[o.SHORT_TYPE][0]+v[T+2*3],N=v[T+3*3]*r[o.SHORT_TYPE][2]+v[T+0*3],w=x+N,D=-x+N,N=(v[T+1*3]*r[o.SHORT_TYPE][1]-v[T+4*3])*2069978111953089e-26,x=(v[T+4*3]*r[o.SHORT_TYPE][1]+v[T+1*3])*2069978111953089e-26,v[T+3*0]=R*190752519173728e-25+N,v[T+3*5]=-w*190752519173728e-25+x,O=O*.8660254037844387*1907525191737281e-26,w=w*.5*1907525191737281e-26+x,v[T+3*1]=O-w,v[T+3*2]=O+w,R=R*.5*1907525191737281e-26-N,D=D*.8660254037844387*1907525191737281e-26,v[T+3*3]=R+D,v[T+3*4]=R-D,T++}}function A(v,T,_){var N,R;{var O,x,w,D,M,P,U,F;O=_[17]-_[9],w=_[15]-_[11],D=_[14]-_[12],M=_[0]+_[8],P=_[1]+_[7],U=_[2]+_[6],F=_[3]+_[5],v[T+17]=M+U-F-(P-_[4]),R=(M+U-F)*u[19]+(P-_[4]),N=(O-w-D)*u[18],v[T+5]=N+R,v[T+6]=N-R,x=(_[16]-_[10])*u[18],P=P*u[19]+_[4],N=O*u[12]+x+w*u[13]+D*u[14],R=-M*u[16]+P-U*u[17]+F*u[15],v[T+1]=N+R,v[T+2]=N-R,N=O*u[13]-x-w*u[14]+D*u[12],R=-M*u[17]+P-U*u[15]+F*u[16],v[T+9]=N+R,v[T+10]=N-R,N=O*u[14]-x+w*u[12]-D*u[13],R=M*u[15]-P+U*u[16]-F*u[17],v[T+13]=N+R,v[T+14]=N-R}{var k,B,V,G,K,se,ee,X;k=_[8]-_[0],V=_[6]-_[2],G=_[5]-_[3],K=_[17]+_[9],se=_[16]+_[10],ee=_[15]+_[11],X=_[14]+_[12],v[T+0]=K+ee+X+(se+_[13]),N=(K+ee+X)*u[19]-(se+_[13]),R=(k-V+G)*u[18],v[T+11]=N+R,v[T+12]=N-R,B=(_[7]-_[1])*u[18],se=_[13]-se*u[19],N=K*u[15]-se+ee*u[16]+X*u[17],R=k*u[14]+B+V*u[12]+G*u[13],v[T+3]=N+R,v[T+4]=N-R,N=-K*u[17]+se-ee*u[15]-X*u[16],R=k*u[13]+B-V*u[14]-G*u[12],v[T+7]=N+R,v[T+8]=N-R,N=-K*u[16]+se-ee*u[17]-X*u[15],R=k*u[12]-B+V*u[13]-G*u[14],v[T+15]=N+R,v[T+16]=N-R}}this.mdct_sub48=function(v,T,_){for(var N=T,R=286,O=0;O<v.channels_out;O++){for(var x=0;x<v.mode_gr;x++){for(var w,D=v.l3_side.tt[x][O],M=D.xr,P=0,U=v.sb_sample[O][1-x],F=0,k=0;k<18/2;k++)for(f(N,R,U[F]),f(N,R+32,U[F+1]),F+=2,R+=64,w=1;w<32;w+=2)U[F-1][w]*=-1;for(w=0;w<32;w++,P+=18){var B=D.block_type,V=v.sb_sample[O][x],G=v.sb_sample[O][1-x];if(D.mixed_block_flag!=0&&w<2&&(B=0),v.amp_filter[w]<1e-12)s.fill(M,P+0,P+18,0);else{if(v.amp_filter[w]<1)for(var k=0;k<18;k++)G[k][g[w]]*=v.amp_filter[w];if(B==o.SHORT_TYPE){for(var k=-12/4;k<0;k++){var K=r[o.SHORT_TYPE][k+3];M[P+k*3+9]=V[9+k][g[w]]*K-V[8-k][g[w]],M[P+k*3+18]=V[14-k][g[w]]*K+V[15+k][g[w]],M[P+k*3+10]=V[15+k][g[w]]*K-V[14-k][g[w]],M[P+k*3+19]=G[2-k][g[w]]*K+G[3+k][g[w]],M[P+k*3+11]=G[3+k][g[w]]*K-G[2-k][g[w]],M[P+k*3+20]=G[8-k][g[w]]*K+G[9+k][g[w]]}b(M,P)}else{for(var se=a(18),k=-36/4;k<0;k++){var ee,X;ee=r[B][k+27]*G[k+9][g[w]]+r[B][k+36]*G[8-k][g[w]],X=r[B][k+9]*V[k+9][g[w]]-r[B][k+18]*V[8-k][g[w]],se[k+9]=ee-X*c[3+k+9],se[k+18]=ee*c[3+k+9]+X}A(M,P,se)}}if(B!=o.SHORT_TYPE&&w!=0)for(var k=7;k>=0;--k){var z,H;z=M[P+k]*d[20+k]+M[P+-1-k]*h[28+k],H=M[P+k]*h[28+k]-M[P+-1-k]*d[20+k],M[P+-1-k]=z,M[P+k]=H}}}if(N=_,R=286,v.mode_gr==1)for(var q=0;q<18;q++)t.arraycopy(v.sb_sample[O][1][q],0,v.sb_sample[O][0][q],0,32)}}}return Xh=i,Xh}var qh,lT;function jI(){if(lT)return qh;lT=1;var e=Zs(),t=jn,n=t.System,s=t.new_float,a=t.new_float_n;function o(){this.l=s(e.SBMAX_l),this.s=a([e.SBMAX_s,3]);var i=this;this.assign=function(l){n.arraycopy(l.l,0,i.l,0,e.SBMAX_l);for(var r=0;r<e.SBMAX_s;r++)for(var c=0;c<3;c++)i.s[r][c]=l.s[r][c]}}return qh=o,qh}var Zh,rT;function wNe(){if(rT)return Zh;rT=1;var e=jI();function t(){this.thm=new e,this.en=new e}return Zh=t,Zh}function po(e){var t=e;this.ordinal=function(){return t}}po.STEREO=new po(0);po.JOINT_STEREO=new po(1);po.DUAL_CHANNEL=new po(2);po.MONO=new po(3);po.NOT_SET=new po(4);var _u=po,Qh,cT;function Zs(){if(cT)return Qh;cT=1;var e=jn,t=e.System,n=e.VbrMode,s=e.new_array_n,a=e.new_float,o=e.new_float_n,i=e.new_int,l=e.assert;r.ENCDELAY=576,r.POSTDELAY=1152,r.MDCTDELAY=48,r.FFTOFFSET=224+r.MDCTDELAY,r.DECDELAY=528,r.SBLIMIT=32,r.CBANDS=64,r.SBPSY_l=21,r.SBPSY_s=12,r.SBMAX_l=22,r.SBMAX_s=13,r.PSFB21=6,r.PSFB12=6,r.BLKSIZE=1024,r.HBLKSIZE=r.BLKSIZE/2+1,r.BLKSIZE_s=256,r.HBLKSIZE_s=r.BLKSIZE_s/2+1,r.NORM_TYPE=0,r.START_TYPE=1,r.SHORT_TYPE=2,r.STOP_TYPE=3,r.MPG_MD_LR_LR=0,r.MPG_MD_LR_I=1,r.MPG_MD_MS_LR=2,r.MPG_MD_MS_I=3,r.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function r(){var c=xNe(),u=wNe(),d=_u,h=r.FFTOFFSET,g=r.MPG_MD_MS_LR,f=null;this.psy=null;var b=null,A=null,v=null;this.setModules=function(O,x,w,D){f=O,this.psy=x,b=x,A=D,v=w};var T=new c;function _(O){var x,w;if(O.ATH.useAdjust==0){O.ATH.adjust=1;return}if(w=O.loudness_sq[0][0],x=O.loudness_sq[1][0],O.channels_out==2?(w+=O.loudness_sq[0][1],x+=O.loudness_sq[1][1]):(w+=w,x+=x),O.mode_gr==2&&(w=Math.max(w,x)),w*=.5,w*=O.ATH.aaSensitivityP,w>.03125)O.ATH.adjust>=1?O.ATH.adjust=1:O.ATH.adjust<O.ATH.adjustLimit&&(O.ATH.adjust=O.ATH.adjustLimit),O.ATH.adjustLimit=1;else{var D=31.98*w+625e-6;O.ATH.adjust>=D?(O.ATH.adjust*=D*.075+.925,O.ATH.adjust<D&&(O.ATH.adjust=D)):O.ATH.adjustLimit>=D?O.ATH.adjust=D:O.ATH.adjust<O.ATH.adjustLimit&&(O.ATH.adjust=O.ATH.adjustLimit),O.ATH.adjustLimit=D}}function N(O){var x,w;for(l(0<=O.bitrate_index&&O.bitrate_index<16),l(0<=O.mode_ext&&O.mode_ext<4),O.bitrate_stereoMode_Hist[O.bitrate_index][4]++,O.bitrate_stereoMode_Hist[15][4]++,O.channels_out==2&&(O.bitrate_stereoMode_Hist[O.bitrate_index][O.mode_ext]++,O.bitrate_stereoMode_Hist[15][O.mode_ext]++),x=0;x<O.mode_gr;++x)for(w=0;w<O.channels_out;++w){var D=O.l3_side.tt[x][w].block_type|0;O.l3_side.tt[x][w].mixed_block_flag!=0&&(D=4),O.bitrate_blockType_Hist[O.bitrate_index][D]++,O.bitrate_blockType_Hist[O.bitrate_index][5]++,O.bitrate_blockType_Hist[15][D]++,O.bitrate_blockType_Hist[15][5]++}}function R(O,x){var w=O.internal_flags,D,M;if(w.lame_encode_frame_init==0){var P,U,F=a(2014),k=a(2014);for(w.lame_encode_frame_init=1,P=0,U=0;P<286+576*(1+w.mode_gr);++P)P<576*w.mode_gr?(F[P]=0,w.channels_out==2&&(k[P]=0)):(F[P]=x[0][U],w.channels_out==2&&(k[P]=x[1][U]),++U);for(M=0;M<w.mode_gr;M++)for(D=0;D<w.channels_out;D++)w.l3_side.tt[M][D].block_type=r.SHORT_TYPE;T.mdct_sub48(w,F,k),l(576>=r.FFTOFFSET),l(w.mf_size>=r.BLKSIZE+O.framesize-r.FFTOFFSET),l(w.mf_size>=512+O.framesize-32)}}this.lame_encode_mp3_frame=function(O,x,w,D,M,P){var U,F=s([2,2]);F[0][0]=new u,F[0][1]=new u,F[1][0]=new u,F[1][1]=new u;var k=s([2,2]);k[0][0]=new u,k[0][1]=new u,k[1][0]=new u,k[1][1]=new u;var B,V=[null,null],G=O.internal_flags,K=o([2,4]),se=[.5,.5],ee=[[0,0],[0,0]],X=[[0,0],[0,0]],z,H,q;if(V[0]=x,V[1]=w,G.lame_encode_frame_init==0&&R(O,V),G.padding=0,(G.slot_lag-=G.frac_SpF)<0&&(G.slot_lag+=O.out_samplerate,G.padding=1),G.psymodel!=0){var J,de=[null,null],Te=0,ce=i(2);for(q=0;q<G.mode_gr;q++){for(H=0;H<G.channels_out;H++)de[H]=V[H],Te=576+q*576-r.FFTOFFSET;if(O.VBR==n.vbr_mtrh||O.VBR==n.vbr_mt?J=b.L3psycho_anal_vbr(O,de,Te,q,F,k,ee[q],X[q],K[q],ce):J=b.L3psycho_anal_ns(O,de,Te,q,F,k,ee[q],X[q],K[q],ce),J!=0)return-4;for(O.mode==d.JOINT_STEREO&&(se[q]=K[q][2]+K[q][3],se[q]>0&&(se[q]=K[q][3]/se[q])),H=0;H<G.channels_out;H++){var Ne=G.l3_side.tt[q][H];Ne.block_type=ce[H],Ne.mixed_block_flag=0}}}else for(q=0;q<G.mode_gr;q++)for(H=0;H<G.channels_out;H++)G.l3_side.tt[q][H].block_type=r.NORM_TYPE,G.l3_side.tt[q][H].mixed_block_flag=0,X[q][H]=ee[q][H]=700;if(_(G),T.mdct_sub48(G,V[0],V[1]),G.mode_ext=r.MPG_MD_LR_LR,O.force_ms)G.mode_ext=r.MPG_MD_MS_LR;else if(O.mode==d.JOINT_STEREO){var Me=0,Fe=0;for(q=0;q<G.mode_gr;q++)for(H=0;H<G.channels_out;H++)Me+=X[q][H],Fe+=ee[q][H];if(Me<=1*Fe){var Ge=G.l3_side.tt[0],je=G.l3_side.tt[G.mode_gr-1];Ge[0].block_type==Ge[1].block_type&&je[0].block_type==je[1].block_type&&(G.mode_ext=r.MPG_MD_MS_LR)}}if(G.mode_ext==g?(B=k,z=X):(B=F,z=ee),O.analysis&&G.pinfo!=null)for(q=0;q<G.mode_gr;q++)for(H=0;H<G.channels_out;H++)G.pinfo.ms_ratio[q]=G.ms_ratio[q],G.pinfo.ms_ener_ratio[q]=se[q],G.pinfo.blocktype[q][H]=G.l3_side.tt[q][H].block_type,G.pinfo.pe[q][H]=z[q][H],t.arraycopy(G.l3_side.tt[q][H].xr,0,G.pinfo.xr[q][H],0,576),G.mode_ext==g&&(G.pinfo.ers[q][H]=G.pinfo.ers[q][H+2],t.arraycopy(G.pinfo.energy[q][H+2],0,G.pinfo.energy[q][H],0,G.pinfo.energy[q][H].length));if(O.VBR==n.vbr_off||O.VBR==n.vbr_abr){var Ze,nt;for(Ze=0;Ze<18;Ze++)G.nsPsy.pefirbuf[Ze]=G.nsPsy.pefirbuf[Ze+1];for(nt=0,q=0;q<G.mode_gr;q++)for(H=0;H<G.channels_out;H++)nt+=z[q][H];for(G.nsPsy.pefirbuf[18]=nt,nt=G.nsPsy.pefirbuf[9],Ze=0;Ze<9;Ze++)nt+=(G.nsPsy.pefirbuf[Ze]+G.nsPsy.pefirbuf[18-Ze])*r.fircoef[Ze];for(nt=670*5*G.mode_gr*G.channels_out/nt,q=0;q<G.mode_gr;q++)for(H=0;H<G.channels_out;H++)z[q][H]*=nt}if(G.iteration_loop.iteration_loop(O,z,se,B),f.format_bitstream(O),U=f.copy_buffer(G,D,M,P,1),O.bWriteVbrTag&&A.addVbrFrame(O),O.analysis&&G.pinfo!=null){for(H=0;H<G.channels_out;H++){var st;for(st=0;st<h;st++)G.pinfo.pcmdata[H][st]=G.pinfo.pcmdata[H][st+O.framesize];for(st=h;st<1600;st++)G.pinfo.pcmdata[H][st]=V[H][st-h]}v.set_frame_pinfo(O,B)}return N(G),U}}return Qh=r,Qh}var KI=jn,uT=KI.Util,dT=KI.new_float,rs=Zs();function $Ne(){var e=dT(rs.BLKSIZE),t=dT(rs.BLKSIZE_s/2),n=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function s(o,i,l){var r=0,c,u,d;l<<=1;var h=i+l;c=4;do{var g,f,b,A,v,T,_;_=c>>1,A=c,v=c<<1,T=v+A,c=v<<1,u=i,d=u+_;do{var N,R,O,x;R=o[u+0]-o[u+A],N=o[u+0]+o[u+A],x=o[u+v]-o[u+T],O=o[u+v]+o[u+T],o[u+v]=N-O,o[u+0]=N+O,o[u+T]=R-x,o[u+A]=R+x,R=o[d+0]-o[d+A],N=o[d+0]+o[d+A],x=uT.SQRT2*o[d+T],O=uT.SQRT2*o[d+v],o[d+v]=N-O,o[d+0]=N+O,o[d+T]=R-x,o[d+A]=R+x,d+=c,u+=c}while(u<h);for(f=n[r+0],g=n[r+1],b=1;b<_;b++){var w,D;w=1-2*g*g,D=2*g*f,u=i+b,d=i+A-b;do{var M,P,U,N,R,F,O,k,x,B;P=D*o[u+A]-w*o[d+A],M=w*o[u+A]+D*o[d+A],R=o[u+0]-M,N=o[u+0]+M,F=o[d+0]-P,U=o[d+0]+P,P=D*o[u+T]-w*o[d+T],M=w*o[u+T]+D*o[d+T],x=o[u+v]-M,O=o[u+v]+M,B=o[d+v]-P,k=o[d+v]+P,P=g*O-f*B,M=f*O+g*B,o[u+v]=N-M,o[u+0]=N+M,o[d+T]=F-P,o[d+A]=F+P,P=f*k-g*x,M=g*k+f*x,o[d+v]=U-M,o[d+0]=U+M,o[u+T]=R-P,o[u+A]=R+P,d+=c,u+=c}while(u<h);w=f,f=w*n[r+0]-g*n[r+1],g=w*n[r+1]+g*n[r+0]}r+=2}while(c<l)}var a=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(o,i,l,r,c){for(var u=0;u<3;u++){var d=rs.BLKSIZE_s/2,h=65535&576/3*(u+1),g=rs.BLKSIZE_s/8-1;do{var f,b,A,v,T,_=a[g<<2]&255;f=t[_]*r[l][c+_+h],T=t[127-_]*r[l][c+_+h+128],b=f-T,f=f+T,A=t[_+64]*r[l][c+_+h+64],T=t[63-_]*r[l][c+_+h+192],v=A-T,A=A+T,d-=4,i[u][d+0]=f+A,i[u][d+2]=f-A,i[u][d+1]=b+v,i[u][d+3]=b-v,f=t[_+1]*r[l][c+_+h+1],T=t[126-_]*r[l][c+_+h+129],b=f-T,f=f+T,A=t[_+65]*r[l][c+_+h+65],T=t[62-_]*r[l][c+_+h+193],v=A-T,A=A+T,i[u][d+rs.BLKSIZE_s/2+0]=f+A,i[u][d+rs.BLKSIZE_s/2+2]=f-A,i[u][d+rs.BLKSIZE_s/2+1]=b+v,i[u][d+rs.BLKSIZE_s/2+3]=b-v}while(--g>=0);s(i[u],d,rs.BLKSIZE_s/2)}},this.fft_long=function(o,i,l,r,c){var u=rs.BLKSIZE/8-1,d=rs.BLKSIZE/2;do{var h,g,f,b,A,v=a[u]&255;h=e[v]*r[l][c+v],A=e[v+512]*r[l][c+v+512],g=h-A,h=h+A,f=e[v+256]*r[l][c+v+256],A=e[v+768]*r[l][c+v+768],b=f-A,f=f+A,d-=4,i[d+0]=h+f,i[d+2]=h-f,i[d+1]=g+b,i[d+3]=g-b,h=e[v+1]*r[l][c+v+1],A=e[v+513]*r[l][c+v+513],g=h-A,h=h+A,f=e[v+257]*r[l][c+v+257],A=e[v+769]*r[l][c+v+769],b=f-A,f=f+A,i[d+rs.BLKSIZE/2+0]=h+f,i[d+rs.BLKSIZE/2+2]=h-f,i[d+rs.BLKSIZE/2+1]=g+b,i[d+rs.BLKSIZE/2+3]=g-b}while(--u>=0);s(i,d,rs.BLKSIZE/2)},this.init_fft=function(o){for(var i=0;i<rs.BLKSIZE;i++)e[i]=.42-.5*Math.cos(2*Math.PI*(i+.5)/rs.BLKSIZE)+.08*Math.cos(4*Math.PI*(i+.5)/rs.BLKSIZE);for(var i=0;i<rs.BLKSIZE_s/2;i++)t[i]=.5*(1-Math.cos(2*Math.PI*(i+.5)/rs.BLKSIZE_s))}}var MNe=$Ne,ri=jn,Fl=ri.VbrMode,pT=ri.Float,Gl=ri.ShortBlock,ha=ri.Util,LNe=ri.Arrays,_s=ri.new_float,La=ri.new_float_n,qi=ri.new_int,Kt=ri.assert,DNe=MNe,Xe=Zs();function PNe(){var e=_u,t=new DNe,n=2.302585092994046,s=2,a=16,o=2,i=16,l=.34,r=1/(14752*14752)/(Xe.BLKSIZE/2),c=.01,u=.8,d=.6,h=.3,g=3.5,f=21,b=.2302585093;function A(Q,oe){for(var me=0,Ee=0;Ee<Xe.BLKSIZE/2;++Ee)me+=Q[Ee]*oe.ATH.eql_w[Ee];return me*=r,me}function v(Q,oe,me,Ee,we,he,Se,Re,Ce,Ue,Le){var He=Q.internal_flags;if(Ce<2)t.fft_long(He,Ee[we],Ce,Ue,Le),t.fft_short(He,he[Se],Ce,Ue,Le);else if(Ce==2){for(var ct=Xe.BLKSIZE-1;ct>=0;--ct){var Ct=Ee[we+0][ct],Je=Ee[we+1][ct];Ee[we+0][ct]=(Ct+Je)*ha.SQRT2*.5,Ee[we+1][ct]=(Ct-Je)*ha.SQRT2*.5}for(var Nt=2;Nt>=0;--Nt)for(var ct=Xe.BLKSIZE_s-1;ct>=0;--ct){var Ct=he[Se+0][Nt][ct],Je=he[Se+1][Nt][ct];he[Se+0][Nt][ct]=(Ct+Je)*ha.SQRT2*.5,he[Se+1][Nt][ct]=(Ct-Je)*ha.SQRT2*.5}}oe[0]=Ee[we+0][0],oe[0]*=oe[0];for(var ct=Xe.BLKSIZE/2-1;ct>=0;--ct){var ze=Ee[we+0][Xe.BLKSIZE/2-ct],_t=Ee[we+0][Xe.BLKSIZE/2+ct];oe[Xe.BLKSIZE/2-ct]=(ze*ze+_t*_t)*.5}for(var Nt=2;Nt>=0;--Nt){me[Nt][0]=he[Se+0][Nt][0],me[Nt][0]*=me[Nt][0];for(var ct=Xe.BLKSIZE_s/2-1;ct>=0;--ct){var ze=he[Se+0][Nt][Xe.BLKSIZE_s/2-ct],_t=he[Se+0][Nt][Xe.BLKSIZE_s/2+ct];me[Nt][Xe.BLKSIZE_s/2-ct]=(ze*ze+_t*_t)*.5}}{for(var Gt=0,ct=11;ct<Xe.HBLKSIZE;ct++)Gt+=oe[ct];He.tot_ener[Ce]=Gt}if(Q.analysis){for(var ct=0;ct<Xe.HBLKSIZE;ct++)He.pinfo.energy[Re][Ce][ct]=He.pinfo.energy_save[Ce][ct],He.pinfo.energy_save[Ce][ct]=oe[ct];He.pinfo.pe[Re][Ce]=He.pe[Ce]}Q.athaa_loudapprox==2&&Ce<2&&(He.loudness_sq[Re][Ce]=He.loudness_sq_save[Ce],He.loudness_sq_save[Ce]=A(oe,He))}var T=8,_=23,N=15,R,O,x,w=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function D(){R=Math.pow(10,(T+1)/16),O=Math.pow(10,(_+1)/16),x=Math.pow(10,N/10)}var M=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],P=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],U=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function F(Q,oe,me,Ee,we,he){var Se;if(oe>Q)if(oe<Q*O)Se=oe/Q;else return Q+oe;else{if(Q>=oe*O)return Q+oe;Se=Q/oe}if(Q+=oe,Ee+3<=6){if(Se>=R)return Q;var Re=0|ha.FAST_LOG10_X(Se,16);return Q*P[Re]}var Re=0|ha.FAST_LOG10_X(Se,16);if(oe=we.ATH.cb_l[me]*we.ATH.adjust,Q<x*oe){if(Q>oe){var Ce,Ue;return Ce=1,Re<=13&&(Ce=U[Re]),Ue=ha.FAST_LOG10_X(Q/oe,10/15),Q*((M[Re]-Ce)*Ue+Ce)}return Re>13?Q:Q*U[Re]}return Q*M[Re]}var k=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function B(Q,oe,me){var Ee;if(Q<0&&(Q=0),oe<0&&(oe=0),Q<=0)return oe;if(oe<=0)return Q;if(oe>Q?Ee=oe/Q:Ee=Q/oe,-2<=me&&me<=2){if(Ee>=R)return Q+oe;var we=0|ha.FAST_LOG10_X(Ee,16);return(Q+oe)*k[we]}return Ee<O?Q+oe:(Q<oe&&(Q=oe),Q)}function V(Q,oe){var me=Q.internal_flags;if(me.channels_out>1){for(var Ee=0;Ee<Xe.SBMAX_l;Ee++){var we=me.thm[0].l[Ee],he=me.thm[1].l[Ee];me.thm[0].l[Ee]+=he*oe,me.thm[1].l[Ee]+=we*oe}for(var Ee=0;Ee<Xe.SBMAX_s;Ee++)for(var Se=0;Se<3;Se++){var we=me.thm[0].s[Ee][Se],he=me.thm[1].s[Ee][Se];me.thm[0].s[Ee][Se]+=he*oe,me.thm[1].s[Ee][Se]+=we*oe}}}function G(Q){for(var oe=0;oe<Xe.SBMAX_l;oe++)if(!(Q.thm[0].l[oe]>1.58*Q.thm[1].l[oe]||Q.thm[1].l[oe]>1.58*Q.thm[0].l[oe])){var me=Q.mld_l[oe]*Q.en[3].l[oe],Ee=Math.max(Q.thm[2].l[oe],Math.min(Q.thm[3].l[oe],me));me=Q.mld_l[oe]*Q.en[2].l[oe];var we=Math.max(Q.thm[3].l[oe],Math.min(Q.thm[2].l[oe],me));Q.thm[2].l[oe]=Ee,Q.thm[3].l[oe]=we}for(var oe=0;oe<Xe.SBMAX_s;oe++)for(var he=0;he<3;he++)if(!(Q.thm[0].s[oe][he]>1.58*Q.thm[1].s[oe][he]||Q.thm[1].s[oe][he]>1.58*Q.thm[0].s[oe][he])){var me=Q.mld_s[oe]*Q.en[3].s[oe][he],Ee=Math.max(Q.thm[2].s[oe][he],Math.min(Q.thm[3].s[oe][he],me));me=Q.mld_s[oe]*Q.en[2].s[oe][he];var we=Math.max(Q.thm[3].s[oe][he],Math.min(Q.thm[2].s[oe][he],me));Q.thm[2].s[oe][he]=Ee,Q.thm[3].s[oe][he]=we}}function K(Q,oe,me){var Ee=oe,we=Math.pow(10,me);oe*=2,Ee*=2;for(var he=0;he<Xe.SBMAX_l;he++){var Se,Re,Ce,Ue;if(Ue=Q.ATH.cb_l[Q.bm_l[he]]*we,Se=Math.min(Math.max(Q.thm[0].l[he],Ue),Math.max(Q.thm[1].l[he],Ue)),Re=Math.max(Q.thm[2].l[he],Ue),Ce=Math.max(Q.thm[3].l[he],Ue),Se*oe<Re+Ce){var Le=Se*Ee/(Re+Ce);Re*=Le,Ce*=Le}Q.thm[2].l[he]=Math.min(Re,Q.thm[2].l[he]),Q.thm[3].l[he]=Math.min(Ce,Q.thm[3].l[he])}we*=Xe.BLKSIZE_s/Xe.BLKSIZE;for(var he=0;he<Xe.SBMAX_s;he++)for(var He=0;He<3;He++){var Se,Re,Ce,Ue;if(Ue=Q.ATH.cb_s[Q.bm_s[he]]*we,Se=Math.min(Math.max(Q.thm[0].s[he][He],Ue),Math.max(Q.thm[1].s[he][He],Ue)),Re=Math.max(Q.thm[2].s[he][He],Ue),Ce=Math.max(Q.thm[3].s[he][He],Ue),Se*oe<Re+Ce){var Le=Se*oe/(Re+Ce);Re*=Le,Ce*=Le}Q.thm[2].s[he][He]=Math.min(Q.thm[2].s[he][He],Re),Q.thm[3].s[he][He]=Math.min(Q.thm[3].s[he][He],Ce)}}function se(Q,oe,me,Ee,we){var he,Se,Re=0,Ce=0;for(he=Se=0;he<Xe.SBMAX_s;++Se,++he){for(var Ue=Q.bo_s[he],Le=Q.npart_s,He=Ue<Le?Ue:Le;Se<He;)Kt(oe[Se]>=0),Kt(me[Se]>=0),Re+=oe[Se],Ce+=me[Se],Se++;if(Q.en[Ee].s[he][we]=Re,Q.thm[Ee].s[he][we]=Ce,Se>=Le){++he;break}Kt(oe[Se]>=0),Kt(me[Se]>=0);{var ct=Q.PSY.bo_s_weight[he],Ct=1-ct;Re=ct*oe[Se],Ce=ct*me[Se],Q.en[Ee].s[he][we]+=Re,Q.thm[Ee].s[he][we]+=Ce,Re=Ct*oe[Se],Ce=Ct*me[Se]}}for(;he<Xe.SBMAX_s;++he)Q.en[Ee].s[he][we]=0,Q.thm[Ee].s[he][we]=0}function ee(Q,oe,me,Ee){var we,he,Se=0,Re=0;for(we=he=0;we<Xe.SBMAX_l;++he,++we){for(var Ce=Q.bo_l[we],Ue=Q.npart_l,Le=Ce<Ue?Ce:Ue;he<Le;)Kt(oe[he]>=0),Kt(me[he]>=0),Se+=oe[he],Re+=me[he],he++;if(Q.en[Ee].l[we]=Se,Q.thm[Ee].l[we]=Re,he>=Ue){++we;break}Kt(oe[he]>=0),Kt(me[he]>=0);{var He=Q.PSY.bo_l_weight[we],ct=1-He;Se=He*oe[he],Re=He*me[he],Q.en[Ee].l[we]+=Se,Q.thm[Ee].l[we]+=Re,Se=ct*oe[he],Re=ct*me[he]}}for(;we<Xe.SBMAX_l;++we)Q.en[Ee].l[we]=0,Q.thm[Ee].l[we]=0}function X(Q,oe,me,Ee,we,he){var Se=Q.internal_flags,Re,Ce;for(Ce=Re=0;Ce<Se.npart_s;++Ce){for(var Ue=0,Le=Se.numlines_s[Ce],He=0;He<Le;++He,++Re){var ct=oe[he][Re];Ue+=ct}me[Ce]=Ue}for(Kt(Ce==Se.npart_s),Re=Ce=0;Ce<Se.npart_s;Ce++){var Ct=Se.s3ind_s[Ce][0],Je=Se.s3_ss[Re++]*me[Ct];for(++Ct;Ct<=Se.s3ind_s[Ce][1];)Je+=Se.s3_ss[Re]*me[Ct],++Re,++Ct;{var Nt=o*Se.nb_s1[we][Ce];Ee[Ce]=Math.min(Je,Nt)}if(Se.blocktype_old[we&1]==Xe.SHORT_TYPE){var Nt=i*Se.nb_s2[we][Ce],ze=Ee[Ce];Ee[Ce]=Math.min(Nt,ze)}Se.nb_s2[we][Ce]=Se.nb_s1[we][Ce],Se.nb_s1[we][Ce]=Je,Kt(Ee[Ce]>=0)}for(;Ce<=Xe.CBANDS;++Ce)me[Ce]=0,Ee[Ce]=0}function z(Q,oe,me,Ee){var we=Q.internal_flags;Q.short_blocks==Gl.short_block_coupled&&!(oe[0]!=0&&oe[1]!=0)&&(oe[0]=oe[1]=0);for(var he=0;he<we.channels_out;he++)Ee[he]=Xe.NORM_TYPE,Q.short_blocks==Gl.short_block_dispensed&&(oe[he]=1),Q.short_blocks==Gl.short_block_forced&&(oe[he]=0),oe[he]!=0?(Kt(we.blocktype_old[he]!=Xe.START_TYPE),we.blocktype_old[he]==Xe.SHORT_TYPE&&(Ee[he]=Xe.STOP_TYPE)):(Ee[he]=Xe.SHORT_TYPE,we.blocktype_old[he]==Xe.NORM_TYPE&&(we.blocktype_old[he]=Xe.START_TYPE),we.blocktype_old[he]==Xe.STOP_TYPE&&(we.blocktype_old[he]=Xe.SHORT_TYPE)),me[he]=we.blocktype_old[he],we.blocktype_old[he]=Ee[he]}function H(Q,oe,me){return me>=1?Q:me<=0?oe:oe>0?Math.pow(Q/oe,me)*oe:0}var q=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function J(Q,oe){for(var me=309.07,Ee=0;Ee<Xe.SBMAX_s-1;Ee++)for(var we=0;we<3;we++){var he=Q.thm.s[Ee][we];if(he>0){var Se=he*oe,Re=Q.en.s[Ee][we];Re>Se&&(Re>Se*1e10?me+=q[Ee]*(10*n):me+=q[Ee]*ha.FAST_LOG10(Re/Se))}}return me}var de=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function Te(Q,oe){for(var me=281.0575,Ee=0;Ee<Xe.SBMAX_l-1;Ee++){var we=Q.thm.l[Ee];if(we>0){var he=we*oe,Se=Q.en.l[Ee];Se>he&&(Se>he*1e10?me+=de[Ee]*(10*n):me+=de[Ee]*ha.FAST_LOG10(Se/he))}}return me}function ce(Q,oe,me,Ee,we){var he,Se;for(he=Se=0;he<Q.npart_l;++he){var Re=0,Ce=0,Ue;for(Ue=0;Ue<Q.numlines_l[he];++Ue,++Se){var Le=oe[Se];Re+=Le,Ce<Le&&(Ce=Le)}me[he]=Re,Ee[he]=Ce,we[he]=Re*Q.rnumlines_l[he],Kt(Q.rnumlines_l[he]>=0),Kt(me[he]>=0),Kt(Ee[he]>=0),Kt(we[he]>=0)}}function Ne(Q,oe,me,Ee){var we=w.length-1,he=0,Se=me[he]+me[he+1];if(Se>0){var Re=oe[he];Re<oe[he+1]&&(Re=oe[he+1]),Kt(Q.numlines_l[he]+Q.numlines_l[he+1]-1>0),Se=20*(Re*2-Se)/(Se*(Q.numlines_l[he]+Q.numlines_l[he+1]-1));var Ce=0|Se;Ce>we&&(Ce=we),Ee[he]=Ce}else Ee[he]=0;for(he=1;he<Q.npart_l-1;he++)if(Se=me[he-1]+me[he]+me[he+1],Se>0){var Re=oe[he-1];Re<oe[he]&&(Re=oe[he]),Re<oe[he+1]&&(Re=oe[he+1]),Kt(Q.numlines_l[he-1]+Q.numlines_l[he]+Q.numlines_l[he+1]-1>0),Se=20*(Re*3-Se)/(Se*(Q.numlines_l[he-1]+Q.numlines_l[he]+Q.numlines_l[he+1]-1));var Ce=0|Se;Ce>we&&(Ce=we),Ee[he]=Ce}else Ee[he]=0;if(Kt(he==Q.npart_l-1),Se=me[he-1]+me[he],Se>0){var Re=oe[he-1];Re<oe[he]&&(Re=oe[he]),Kt(Q.numlines_l[he-1]+Q.numlines_l[he]-1>0),Se=20*(Re*2-Se)/(Se*(Q.numlines_l[he-1]+Q.numlines_l[he]-1));var Ce=0|Se;Ce>we&&(Ce=we),Ee[he]=Ce}else Ee[he]=0;Kt(he==Q.npart_l-1)}var Me=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(Q,oe,me,Ee,we,he,Se,Re,Ce,Ue){var Le=Q.internal_flags,He=La([2,Xe.BLKSIZE]),ct=La([2,3,Xe.BLKSIZE_s]),Ct=_s(Xe.CBANDS+1),Je=_s(Xe.CBANDS+1),Nt=_s(Xe.CBANDS+2),ze=qi(2),_t=qi(2),Gt,et,Et,tt,Ot,In,pt,Lt,Pt=La([2,576]),xn,xs=qi(Xe.CBANDS+2),Un=qi(Xe.CBANDS+2);for(LNe.fill(Un,0),Gt=Le.channels_out,Q.mode==e.JOINT_STEREO&&(Gt=4),Q.VBR==Fl.vbr_off?xn=Le.ResvMax==0?0:Le.ResvSize/Le.ResvMax*.5:Q.VBR==Fl.vbr_rh||Q.VBR==Fl.vbr_mtrh||Q.VBR==Fl.vbr_mt?xn=.6:xn=1,et=0;et<Le.channels_out;et++){var Mn=oe[et],bs=me+576-350-f+192;for(tt=0;tt<576;tt++){var ws,As;for(ws=Mn[bs+tt+10],As=0,Ot=0;Ot<(f-1)/2-1;Ot+=2)ws+=Me[Ot]*(Mn[bs+tt+Ot]+Mn[bs+tt+f-Ot]),As+=Me[Ot+1]*(Mn[bs+tt+Ot+1]+Mn[bs+tt+f-Ot-1]);Pt[et][tt]=ws+As}we[Ee][et].en.assign(Le.en[et]),we[Ee][et].thm.assign(Le.thm[et]),Gt>2&&(he[Ee][et].en.assign(Le.en[et+2]),he[Ee][et].thm.assign(Le.thm[et+2]))}for(et=0;et<Gt;et++){var ra,Ds,fs=_s(12),ca=[0,0,0,0],go=_s(12),Po=1,Nl,Ol=_s(Xe.CBANDS),ci=_s(Xe.CBANDS),En=[0,0,0,0],Rl=_s(Xe.HBLKSIZE),xl=La([3,Xe.HBLKSIZE_s]);for(Kt(Le.npart_s<=Xe.CBANDS),Kt(Le.npart_l<=Xe.CBANDS),tt=0;tt<3;tt++)fs[tt]=Le.nsPsy.last_en_subshort[et][tt+6],Kt(Le.nsPsy.last_en_subshort[et][tt+4]>0),go[tt]=fs[tt]/Le.nsPsy.last_en_subshort[et][tt+4],ca[0]+=fs[tt];if(et==2)for(tt=0;tt<576;tt++){var at,It;at=Pt[0][tt],It=Pt[1][tt],Pt[0][tt]=at+It,Pt[1][tt]=at-It}{var nn=Pt[et&1],gs=0;for(tt=0;tt<9;tt++){for(var ja=gs+64,Dn=1;gs<ja;gs++)Dn<Math.abs(nn[gs])&&(Dn=Math.abs(nn[gs]));Le.nsPsy.last_en_subshort[et][tt]=fs[tt+3]=Dn,ca[1+tt/3]+=Dn,Dn>fs[tt+3-2]?(Kt(fs[tt+3-2]>0),Dn=Dn/fs[tt+3-2]):fs[tt+3-2]>Dn*10?Dn=fs[tt+3-2]/(Dn*10):Dn=0,go[tt+3]=Dn}}if(Q.analysis){var $a=go[0];for(tt=1;tt<12;tt++)$a<go[tt]&&($a=go[tt]);Le.pinfo.ers[Ee][et]=Le.pinfo.ers_save[et],Le.pinfo.ers_save[et]=$a}for(Nl=et==3?Le.nsPsy.attackthre_s:Le.nsPsy.attackthre,tt=0;tt<12;tt++)En[tt/3]==0&&go[tt]>Nl&&(En[tt/3]=tt%3+1);for(tt=1;tt<4;tt++){var Vi;ca[tt-1]>ca[tt]?(Kt(ca[tt]>0),Vi=ca[tt-1]/ca[tt]):(Kt(ca[tt-1]>0),Vi=ca[tt]/ca[tt-1]),Vi<1.7&&(En[tt]=0,tt==1&&(En[0]=0))}for(En[0]!=0&&Le.nsPsy.lastAttacks[et]!=0&&(En[0]=0),(Le.nsPsy.lastAttacks[et]==3||En[0]+En[1]+En[2]+En[3]!=0)&&(Po=0,En[1]!=0&&En[0]!=0&&(En[1]=0),En[2]!=0&&En[1]!=0&&(En[2]=0),En[3]!=0&&En[2]!=0&&(En[3]=0)),et<2?_t[et]=Po:Po==0&&(_t[0]=_t[1]=0),Ce[et]=Le.tot_ener[et],Ds=ct,ra=He,v(Q,Rl,xl,ra,et&1,Ds,et&1,Ee,et,oe,me),ce(Le,Rl,Ct,Ol,ci),Ne(Le,Ol,ci,xs),Lt=0;Lt<3;Lt++){var Fr,Ps;for(X(Q,xl,Je,Nt,et,Lt),se(Le,Je,Nt,et,Lt),pt=0;pt<Xe.SBMAX_s;pt++){if(Ps=Le.thm[et].s[pt][Lt],Ps*=u,En[Lt]>=2||En[Lt+1]==1){var wl=Lt!=0?Lt-1:2,Dn=H(Le.thm[et].s[pt][wl],Ps,d*xn);Ps=Math.min(Ps,Dn)}if(En[Lt]==1){var wl=Lt!=0?Lt-1:2,Dn=H(Le.thm[et].s[pt][wl],Ps,h*xn);Ps=Math.min(Ps,Dn)}else if(Lt!=0&&En[Lt-1]==3||Lt==0&&Le.nsPsy.lastAttacks[et]==3){var wl=Lt!=2?Lt+1:0,Dn=H(Le.thm[et].s[pt][wl],Ps,h*xn);Ps=Math.min(Ps,Dn)}Fr=fs[Lt*3+3]+fs[Lt*3+4]+fs[Lt*3+5],fs[Lt*3+5]*6<Fr&&(Ps*=.5,fs[Lt*3+4]*6<Fr&&(Ps*=.5)),Le.thm[et].s[pt][Lt]=Ps}}for(Le.nsPsy.lastAttacks[et]=En[2],In=0,Et=0;Et<Le.npart_l;Et++){for(var ko=Le.s3ind[Et][0],Gr=Ct[ko]*w[xs[ko]],Bo=Le.s3_ll[In++]*Gr;++ko<=Le.s3ind[Et][1];)Gr=Ct[ko]*w[xs[ko]],Bo=F(Bo,Le.s3_ll[In++]*Gr,ko,ko-Et,Le);Bo*=.158489319246111,Le.blocktype_old[et&1]==Xe.SHORT_TYPE?Nt[Et]=Bo:Nt[Et]=H(Math.min(Bo,Math.min(s*Le.nb_1[et][Et],a*Le.nb_2[et][Et])),Bo,xn),Le.nb_2[et][Et]=Le.nb_1[et][Et],Le.nb_1[et][Et]=Bo}for(;Et<=Xe.CBANDS;++Et)Ct[Et]=0,Nt[Et]=0;ee(Le,Ct,Nt,et)}if((Q.mode==e.STEREO||Q.mode==e.JOINT_STEREO)&&Q.interChRatio>0&&V(Q,Q.interChRatio),Q.mode==e.JOINT_STEREO){var Hi;G(Le),Hi=Q.msfix,Math.abs(Hi)>0&&K(Le,Hi,Q.ATHlower*Le.ATH.adjust)}for(z(Q,_t,Ue,ze),et=0;et<Gt;et++){var Wi,zi=0,Vr,_o;et>1?(Wi=Re,zi=-2,Vr=Xe.NORM_TYPE,(Ue[0]==Xe.SHORT_TYPE||Ue[1]==Xe.SHORT_TYPE)&&(Vr=Xe.SHORT_TYPE),_o=he[Ee][et-2]):(Wi=Se,zi=0,Vr=Ue[et],_o=we[Ee][et]),Vr==Xe.SHORT_TYPE?Wi[zi+et]=J(_o,Le.masking_lower):Wi[zi+et]=Te(_o,Le.masking_lower),Q.analysis&&(Le.pinfo.pe[Ee][et]=Wi[zi+et])}return 0};function Fe(Q,oe,me,Ee,we,he,Se,Re){var Ce=Q.internal_flags;if(Ee<2)t.fft_long(Ce,Se[Re],Ee,oe,me);else if(Ee==2)for(var Ue=Xe.BLKSIZE-1;Ue>=0;--Ue){var Le=Se[Re+0][Ue],He=Se[Re+1][Ue];Se[Re+0][Ue]=(Le+He)*ha.SQRT2*.5,Se[Re+1][Ue]=(Le-He)*ha.SQRT2*.5}he[0]=Se[Re+0][0],he[0]*=he[0];for(var Ue=Xe.BLKSIZE/2-1;Ue>=0;--Ue){var ct=Se[Re+0][Xe.BLKSIZE/2-Ue],Ct=Se[Re+0][Xe.BLKSIZE/2+Ue];he[Xe.BLKSIZE/2-Ue]=(ct*ct+Ct*Ct)*.5}{for(var Je=0,Ue=11;Ue<Xe.HBLKSIZE;Ue++)Je+=he[Ue];Ce.tot_ener[Ee]=Je}if(Q.analysis){for(var Ue=0;Ue<Xe.HBLKSIZE;Ue++)Ce.pinfo.energy[we][Ee][Ue]=Ce.pinfo.energy_save[Ee][Ue],Ce.pinfo.energy_save[Ee][Ue]=he[Ue];Ce.pinfo.pe[we][Ee]=Ce.pe[Ee]}}function Ge(Q,oe,me,Ee,we,he,Se,Re){var Ce=Q.internal_flags;if(we==0&&Ee<2&&t.fft_short(Ce,Se[Re],Ee,oe,me),Ee==2)for(var Ue=Xe.BLKSIZE_s-1;Ue>=0;--Ue){var Le=Se[Re+0][we][Ue],He=Se[Re+1][we][Ue];Se[Re+0][we][Ue]=(Le+He)*ha.SQRT2*.5,Se[Re+1][we][Ue]=(Le-He)*ha.SQRT2*.5}he[we][0]=Se[Re+0][we][0],he[we][0]*=he[we][0];for(var Ue=Xe.BLKSIZE_s/2-1;Ue>=0;--Ue){var ct=Se[Re+0][we][Xe.BLKSIZE_s/2-Ue],Ct=Se[Re+0][we][Xe.BLKSIZE_s/2+Ue];he[we][Xe.BLKSIZE_s/2-Ue]=(ct*ct+Ct*Ct)*.5}}function je(Q,oe,me,Ee){var we=Q.internal_flags;Q.athaa_loudapprox==2&&me<2&&(we.loudness_sq[oe][me]=we.loudness_sq_save[me],we.loudness_sq_save[me]=A(Ee,we))}var Ze=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function nt(Q,oe,me,Ee,we,he,Se,Re,Ce,Ue){for(var Le=La([2,576]),He=Q.internal_flags,ct=He.channels_out,Ct=Q.mode==e.JOINT_STEREO?4:ct,Je=0;Je<ct;Je++){firbuf=oe[Je];for(var Nt=me+576-350-f+192,ze=0;ze<576;ze++){var _t,Gt;_t=firbuf[Nt+ze+10],Gt=0;for(var et=0;et<(f-1)/2-1;et+=2)_t+=Ze[et]*(firbuf[Nt+ze+et]+firbuf[Nt+ze+f-et]),Gt+=Ze[et+1]*(firbuf[Nt+ze+et+1]+firbuf[Nt+ze+f-et-1]);Le[Je][ze]=_t+Gt}we[Ee][Je].en.assign(He.en[Je]),we[Ee][Je].thm.assign(He.thm[Je]),Ct>2&&(he[Ee][Je].en.assign(He.en[Je+2]),he[Ee][Je].thm.assign(He.thm[Je+2]))}for(var Je=0;Je<Ct;Je++){var Et=_s(12),tt=_s(12),Ot=[0,0,0,0],In=Le[Je&1],pt=0,Lt=Je==3?He.nsPsy.attackthre_s:He.nsPsy.attackthre,Pt=1;if(Je==2)for(var ze=0,et=576;et>0;++ze,--et){var xn=Le[0][ze],xs=Le[1][ze];Le[0][ze]=xn+xs,Le[1][ze]=xn-xs}for(var ze=0;ze<3;ze++)tt[ze]=He.nsPsy.last_en_subshort[Je][ze+6],Kt(He.nsPsy.last_en_subshort[Je][ze+4]>0),Et[ze]=tt[ze]/He.nsPsy.last_en_subshort[Je][ze+4],Ot[0]+=tt[ze];for(var ze=0;ze<9;ze++){for(var Un=pt+64,Mn=1;pt<Un;pt++)Mn<Math.abs(In[pt])&&(Mn=Math.abs(In[pt]));He.nsPsy.last_en_subshort[Je][ze]=tt[ze+3]=Mn,Ot[1+ze/3]+=Mn,Mn>tt[ze+3-2]?(Kt(tt[ze+3-2]>0),Mn=Mn/tt[ze+3-2]):tt[ze+3-2]>Mn*10?Mn=tt[ze+3-2]/(Mn*10):Mn=0,Et[ze+3]=Mn}for(var ze=0;ze<3;++ze){var bs=tt[ze*3+3]+tt[ze*3+4]+tt[ze*3+5],ws=1;tt[ze*3+5]*6<bs&&(ws*=.5,tt[ze*3+4]*6<bs&&(ws*=.5)),Re[Je][ze]=ws}if(Q.analysis){for(var As=Et[0],ze=1;ze<12;ze++)As<Et[ze]&&(As=Et[ze]);He.pinfo.ers[Ee][Je]=He.pinfo.ers_save[Je],He.pinfo.ers_save[Je]=As}for(var ze=0;ze<12;ze++)Ce[Je][ze/3]==0&&Et[ze]>Lt&&(Ce[Je][ze/3]=ze%3+1);for(var ze=1;ze<4;ze++){var ra=Ot[ze-1],Ds=Ot[ze],fs=Math.max(ra,Ds);fs<4e4&&ra<1.7*Ds&&Ds<1.7*ra&&(ze==1&&Ce[Je][0]<=Ce[Je][ze]&&(Ce[Je][0]=0),Ce[Je][ze]=0)}Ce[Je][0]<=He.nsPsy.lastAttacks[Je]&&(Ce[Je][0]=0),(He.nsPsy.lastAttacks[Je]==3||Ce[Je][0]+Ce[Je][1]+Ce[Je][2]+Ce[Je][3]!=0)&&(Pt=0,Ce[Je][1]!=0&&Ce[Je][0]!=0&&(Ce[Je][1]=0),Ce[Je][2]!=0&&Ce[Je][1]!=0&&(Ce[Je][2]=0),Ce[Je][3]!=0&&Ce[Je][2]!=0&&(Ce[Je][3]=0)),Je<2?Ue[Je]=Pt:Pt==0&&(Ue[0]=Ue[1]=0),Se[Je]=He.tot_ener[Je]}}function st(Q,oe,me){if(me==0)for(var Ee=0;Ee<Q.npart_s;Ee++)Q.nb_s2[oe][Ee]=Q.nb_s1[oe][Ee],Q.nb_s1[oe][Ee]=0}function At(Q,oe){for(var me=0;me<Q.npart_l;me++)Q.nb_2[oe][me]=Q.nb_1[oe][me],Q.nb_1[oe][me]=0}function Mt(Q,oe,me,Ee){var we=w.length-1,he=0,Se=me[he]+me[he+1];if(Se>0){var Re=oe[he];Re<oe[he+1]&&(Re=oe[he+1]),Kt(Q.numlines_s[he]+Q.numlines_s[he+1]-1>0),Se=20*(Re*2-Se)/(Se*(Q.numlines_s[he]+Q.numlines_s[he+1]-1));var Ce=0|Se;Ce>we&&(Ce=we),Ee[he]=Ce}else Ee[he]=0;for(he=1;he<Q.npart_s-1;he++)if(Se=me[he-1]+me[he]+me[he+1],Kt(he+1<Q.npart_s),Se>0){var Re=oe[he-1];Re<oe[he]&&(Re=oe[he]),Re<oe[he+1]&&(Re=oe[he+1]),Kt(Q.numlines_s[he-1]+Q.numlines_s[he]+Q.numlines_s[he+1]-1>0),Se=20*(Re*3-Se)/(Se*(Q.numlines_s[he-1]+Q.numlines_s[he]+Q.numlines_s[he+1]-1));var Ce=0|Se;Ce>we&&(Ce=we),Ee[he]=Ce}else Ee[he]=0;if(Kt(he==Q.npart_s-1),Se=me[he-1]+me[he],Se>0){var Re=oe[he-1];Re<oe[he]&&(Re=oe[he]),Kt(Q.numlines_s[he-1]+Q.numlines_s[he]-1>0),Se=20*(Re*2-Se)/(Se*(Q.numlines_s[he-1]+Q.numlines_s[he]-1));var Ce=0|Se;Ce>we&&(Ce=we),Ee[he]=Ce}else Ee[he]=0;Kt(he==Q.npart_s-1)}function Z(Q,oe,me,Ee,we,he){var Se=Q.internal_flags,Re=new float[Xe.CBANDS],Ce=_s(Xe.CBANDS),Ue,Le,He,ct=new int[Xe.CBANDS];for(He=Le=0;He<Se.npart_s;++He){var Ct=0,Je=0,Nt=Se.numlines_s[He];for(Ue=0;Ue<Nt;++Ue,++Le){var ze=oe[he][Le];Ct+=ze,Je<ze&&(Je=ze)}me[He]=Ct,Re[He]=Je,Ce[He]=Ct/Nt,Kt(Ce[He]>=0)}for(Kt(He==Se.npart_s);He<Xe.CBANDS;++He)Re[He]=0,Ce[He]=0;for(Mt(Se,Re,Ce,ct),Le=He=0;He<Se.npart_s;He++){var _t=Se.s3ind_s[He][0],Gt=Se.s3ind_s[He][1],et,Et,tt,Ot,In;for(et=ct[_t],Et=1,Ot=Se.s3_ss[Le]*me[_t]*w[ct[_t]],++Le,++_t;_t<=Gt;)et+=ct[_t],Et+=1,tt=Se.s3_ss[Le]*me[_t]*w[ct[_t]],Ot=B(Ot,tt,_t-He),++Le,++_t;et=(1+2*et)/(2*Et),In=w[et]*.5,Ot*=In,Ee[He]=Ot,Se.nb_s2[we][He]=Se.nb_s1[we][He],Se.nb_s1[we][He]=Ot,tt=Re[He],tt*=Se.minval_s[He],tt*=In,Ee[He]>tt&&(Ee[He]=tt),Se.masking_lower>1&&(Ee[He]*=Se.masking_lower),Ee[He]>me[He]&&(Ee[He]=me[He]),Se.masking_lower<1&&(Ee[He]*=Se.masking_lower),Kt(Ee[He]>=0)}for(;He<Xe.CBANDS;++He)me[He]=0,Ee[He]=0}function ie(Q,oe,me,Ee,we){var he=_s(Xe.CBANDS),Se=_s(Xe.CBANDS),Re=qi(Xe.CBANDS+2),Ce;ce(Q,oe,me,he,Se),Ne(Q,he,Se,Re);var Ue=0;for(Ce=0;Ce<Q.npart_l;Ce++){var Le,He,ct,Ct,Je=Q.s3ind[Ce][0],Nt=Q.s3ind[Ce][1],ze=0,_t=0;for(ze=Re[Je],_t+=1,He=Q.s3_ll[Ue]*me[Je]*w[Re[Je]],++Ue,++Je;Je<=Nt;)ze+=Re[Je],_t+=1,Le=Q.s3_ll[Ue]*me[Je]*w[Re[Je]],Ct=B(He,Le,Je-Ce),He=Ct,++Ue,++Je;if(ze=(1+2*ze)/(2*_t),ct=w[ze]*.5,He*=ct,Q.blocktype_old[we&1]==Xe.SHORT_TYPE){var Gt=s*Q.nb_1[we][Ce];Gt>0?Ee[Ce]=Math.min(He,Gt):Ee[Ce]=Math.min(He,me[Ce]*h)}else{var et=a*Q.nb_2[we][Ce],Et=s*Q.nb_1[we][Ce],Gt;et<=0&&(et=He),Et<=0&&(Et=He),Q.blocktype_old[we&1]==Xe.NORM_TYPE?Gt=Math.min(Et,et):Gt=Et,Ee[Ce]=Math.min(He,Gt)}Q.nb_2[we][Ce]=Q.nb_1[we][Ce],Q.nb_1[we][Ce]=He,Le=he[Ce],Le*=Q.minval_l[Ce],Le*=ct,Ee[Ce]>Le&&(Ee[Ce]=Le),Q.masking_lower>1&&(Ee[Ce]*=Q.masking_lower),Ee[Ce]>me[Ce]&&(Ee[Ce]=me[Ce]),Q.masking_lower<1&&(Ee[Ce]*=Q.masking_lower),Kt(Ee[Ce]>=0)}for(;Ce<Xe.CBANDS;++Ce)me[Ce]=0,Ee[Ce]=0}function le(Q,oe){var me=Q.internal_flags;Q.short_blocks==Gl.short_block_coupled&&!(oe[0]!=0&&oe[1]!=0)&&(oe[0]=oe[1]=0);for(var Ee=0;Ee<me.channels_out;Ee++)Q.short_blocks==Gl.short_block_dispensed&&(oe[Ee]=1),Q.short_blocks==Gl.short_block_forced&&(oe[Ee]=0)}function ve(Q,oe,me){for(var Ee=Q.internal_flags,we=0;we<Ee.channels_out;we++){var he=Xe.NORM_TYPE;oe[we]!=0?(Kt(Ee.blocktype_old[we]!=Xe.START_TYPE),Ee.blocktype_old[we]==Xe.SHORT_TYPE&&(he=Xe.STOP_TYPE)):(he=Xe.SHORT_TYPE,Ee.blocktype_old[we]==Xe.NORM_TYPE&&(Ee.blocktype_old[we]=Xe.START_TYPE),Ee.blocktype_old[we]==Xe.STOP_TYPE&&(Ee.blocktype_old[we]=Xe.SHORT_TYPE)),me[we]=Ee.blocktype_old[we],Ee.blocktype_old[we]=he}}function ge(Q,oe,me,Ee,we,he,Se){for(var Re=he*2,Ce=he>0?Math.pow(10,we):1,Ue,Le,He=0;He<Se;++He){var ct=Q[2][He],Ct=Q[3][He],Je=oe[0][He],Nt=oe[1][He],ze=oe[2][He],_t=oe[3][He];if(Je<=1.58*Nt&&Nt<=1.58*Je){var Gt=me[He]*Ct,et=me[He]*ct;Le=Math.max(ze,Math.min(_t,Gt)),Ue=Math.max(_t,Math.min(ze,et))}else Le=ze,Ue=_t;if(he>0){var Et,tt,Ot=Ee[He]*Ce;if(Et=Math.min(Math.max(Je,Ot),Math.max(Nt,Ot)),ze=Math.max(Le,Ot),_t=Math.max(Ue,Ot),tt=ze+_t,tt>0&&Et*Re<tt){var In=Et*Re/tt;ze*=In,_t*=In}Le=Math.min(ze,Le),Ue=Math.min(_t,Ue)}Le>ct&&(Le=ct),Ue>Ct&&(Ue=Ct),oe[2][He]=Le,oe[3][He]=Ue}}this.L3psycho_anal_vbr=function(Q,oe,me,Ee,we,he,Se,Re,Ce,Ue){var Le=Q.internal_flags,He,ct,Ct=_s(Xe.HBLKSIZE),Je=La([3,Xe.HBLKSIZE_s]),Nt=La([2,Xe.BLKSIZE]),ze=La([2,3,Xe.BLKSIZE_s]),_t=La([4,Xe.CBANDS]),Gt=La([4,Xe.CBANDS]),et=La([4,3]),Et=.6,tt=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],Ot=qi(2),In=Q.mode==e.JOINT_STEREO?4:Le.channels_out;nt(Q,oe,me,Ee,we,he,Ce,et,tt,Ot),le(Q,Ot);{for(var pt=0;pt<In;pt++){var Lt=pt&1;He=Nt,Fe(Q,oe,me,pt,Ee,Ct,He,Lt),je(Q,Ee,pt,Ct),Ot[Lt]!=0?ie(Le,Ct,_t[pt],Gt[pt],pt):At(Le,pt)}Ot[0]+Ot[1]==2&&Q.mode==e.JOINT_STEREO&&ge(_t,Gt,Le.mld_cb_l,Le.ATH.cb_l,Q.ATHlower*Le.ATH.adjust,Q.msfix,Le.npart_l);for(var pt=0;pt<In;pt++){var Lt=pt&1;Ot[Lt]!=0&&ee(Le,_t[pt],Gt[pt],pt)}}{for(var Pt=0;Pt<3;Pt++){for(var pt=0;pt<In;++pt){var Lt=pt&1;Ot[Lt]!=0?st(Le,pt,Pt):(ct=ze,Ge(Q,oe,me,pt,Pt,Je,ct,Lt),Z(Q,Je,_t[pt],Gt[pt],pt,Pt))}Ot[0]+Ot[1]==0&&Q.mode==e.JOINT_STEREO&&ge(_t,Gt,Le.mld_cb_s,Le.ATH.cb_s,Q.ATHlower*Le.ATH.adjust,Q.msfix,Le.npart_s);for(var pt=0;pt<In;++pt){var Lt=pt&1;Ot[Lt]==0&&se(Le,_t[pt],Gt[pt],pt,Pt)}}for(var pt=0;pt<In;pt++){var Lt=pt&1;if(Ot[Lt]==0)for(var xn=0;xn<Xe.SBMAX_s;xn++){for(var xs=_s(3),Pt=0;Pt<3;Pt++){var Un=Le.thm[pt].s[xn][Pt];if(Un*=u,tt[pt][Pt]>=2||tt[pt][Pt+1]==1){var Mn=Pt!=0?Pt-1:2,bs=H(Le.thm[pt].s[xn][Mn],Un,d*Et);Un=Math.min(Un,bs)}else if(tt[pt][Pt]==1){var Mn=Pt!=0?Pt-1:2,bs=H(Le.thm[pt].s[xn][Mn],Un,h*Et);Un=Math.min(Un,bs)}else if(Pt!=0&&tt[pt][Pt-1]==3||Pt==0&&Le.nsPsy.lastAttacks[pt]==3){var Mn=Pt!=2?Pt+1:0,bs=H(Le.thm[pt].s[xn][Mn],Un,h*Et);Un=Math.min(Un,bs)}Un*=et[pt][Pt],xs[Pt]=Un}for(var Pt=0;Pt<3;Pt++)Le.thm[pt].s[xn][Pt]=xs[Pt]}}}for(var pt=0;pt<In;pt++)Le.nsPsy.lastAttacks[pt]=tt[pt][2];ve(Q,Ot,Ue);for(var pt=0;pt<In;pt++){var ws,As,ra,Ds;pt>1?(ws=Re,As=-2,ra=Xe.NORM_TYPE,(Ue[0]==Xe.SHORT_TYPE||Ue[1]==Xe.SHORT_TYPE)&&(ra=Xe.SHORT_TYPE),Ds=he[Ee][pt-2]):(ws=Se,As=0,ra=Ue[pt],Ds=we[Ee][pt]),ra==Xe.SHORT_TYPE?ws[As+pt]=J(Ds,Le.masking_lower):ws[As+pt]=Te(Ds,Le.masking_lower),Q.analysis&&(Le.pinfo.pe[Ee][pt]=ws[As+pt])}return 0};function Ie(Q,oe){var me=Q,Ee;return me>=0?Ee=-me*27:Ee=me*oe,Ee<=-72?0:Math.exp(Ee*b)}function Be(Q){var oe=0,me=0;{var Ee=0,we,he;for(Ee=0;Ie(Ee,Q)>1e-20;Ee-=1);for(we=Ee,he=0;Math.abs(he-we)>1e-12;)Ee=(he+we)/2,Ie(Ee,Q)>0?he=Ee:we=Ee;oe=we}{var Ee=0,we,he;for(Ee=0;Ie(Ee,Q)>1e-20;Ee+=1);for(we=0,he=Ee;Math.abs(he-we)>1e-12;)Ee=(he+we)/2,Ie(Ee,Q)>0?we=Ee:he=Ee;me=he}{var Se=0,Re=1e3,Ce;for(Ce=0;Ce<=Re;++Ce){var Ee=oe+Ce*(me-oe)/Re,Ue=Ie(Ee,Q);Se+=Ue}{var Le=(Re+1)/(Se*(me-oe));return Le}}}function ye(Q){var oe,me,Ee,we;return oe=Q,oe>=0?oe*=3:oe*=1.5,oe>=.5&&oe<=2.5?(we=oe-.5,me=8*(we*we-2*we)):me=0,oe+=.474,Ee=15.811389+7.5*oe-17.5*Math.sqrt(1+oe*oe),Ee<=-60?0:(oe=Math.exp((me+Ee)*b),oe/=.6609193,oe)}function $e(Q){return Q<0&&(Q=0),Q=Q*.001,13*Math.atan(.76*Q)+3.5*Math.atan(Q*Q/(7.5*7.5))}function Pe(Q,oe,me,Ee,we,he,Se,Re,Ce,Ue,Le,He){var ct=_s(Xe.CBANDS+1),Ct=Re/(He>15?2*576:2*192),Je=qi(Xe.HBLKSIZE),Nt;Re/=Ce;var ze=0,_t=0;for(Nt=0;Nt<Xe.CBANDS;Nt++){var Gt,et;for(Gt=$e(Re*ze),ct[Nt]=Re*ze,et=ze;$e(Re*et)-Gt<l&&et<=Ce/2;et++);for(Q[Nt]=et-ze,_t=Nt+1;ze<et;)Kt(ze<Xe.HBLKSIZE),Je[ze++]=Nt;if(ze>Ce/2){ze=Ce/2,++Nt;break}}Kt(Nt<Xe.CBANDS),ct[Nt]=Re*ze;for(var Et=0;Et<He;Et++){var tt,Ot,In,pt,Lt;In=Ue[Et],pt=Ue[Et+1],tt=0|Math.floor(.5+Le*(In-.5)),tt<0&&(tt=0),Ot=0|Math.floor(.5+Le*(pt-.5)),Ot>Ce/2&&(Ot=Ce/2),me[Et]=(Je[tt]+Je[Ot])/2,oe[Et]=Je[Ot];var Pt=Ct*pt;Se[Et]=(Pt-ct[oe[Et]])/(ct[oe[Et]+1]-ct[oe[Et]]),Se[Et]<0?Se[Et]=0:Se[Et]>1&&(Se[Et]=1),Lt=$e(Re*Ue[Et]*Le),Lt=Math.min(Lt,15.5)/15.5,he[Et]=Math.pow(10,1.25*(1-Math.cos(Math.PI*Lt))-2.5)}ze=0;for(var xn=0;xn<_t;xn++){var xs=Q[xn],Gt,Un;Gt=$e(Re*ze),Un=$e(Re*(ze+xs-1)),Ee[xn]=.5*(Gt+Un),Gt=$e(Re*(ze-.5)),Un=$e(Re*(ze+xs-.5)),we[xn]=Un-Gt,ze+=xs}return _t}function pe(Q,oe,me,Ee,we,he){var Se=La([Xe.CBANDS,Xe.CBANDS]),Re,Ce=0;if(he)for(var Ue=0;Ue<oe;Ue++)for(Re=0;Re<oe;Re++){var Le=ye(me[Ue]-me[Re])*Ee[Re];Se[Ue][Re]=Le*we[Ue]}else for(Re=0;Re<oe;Re++)for(var He=15+Math.min(21/me[Re],12),ct=Be(He),Ue=0;Ue<oe;Ue++){var Le=ct*Ie(me[Ue]-me[Re],He)*Ee[Re];Se[Ue][Re]=Le*we[Ue]}for(var Ue=0;Ue<oe;Ue++){for(Re=0;Re<oe&&!(Se[Ue][Re]>0);Re++);for(Q[Ue][0]=Re,Re=oe-1;Re>0&&!(Se[Ue][Re]>0);Re--);Q[Ue][1]=Re,Ce+=Q[Ue][1]-Q[Ue][0]+1}for(var Ct=_s(Ce),Je=0,Ue=0;Ue<oe;Ue++)for(Re=Q[Ue][0];Re<=Q[Ue][1];Re++)Ct[Je++]=Se[Ue][Re];return Ct}function Oe(Q){var oe=$e(Q);return oe=Math.min(oe,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*oe))-2.5)}this.psymodel_init=function(Q){var oe=Q.internal_flags,me,Ee=!0,we=13,he=24,Se=0,Re=0,Ce=-8.25,Ue=-4.5,Le=_s(Xe.CBANDS),He=_s(Xe.CBANDS),ct=_s(Xe.CBANDS),Ct=Q.out_samplerate;switch(Q.experimentalZ){default:case 0:Ee=!0;break;case 1:Ee=!(Q.VBR==Fl.vbr_mtrh||Q.VBR==Fl.vbr_mt);break;case 2:Ee=!1;break;case 3:we=8,Se=-1.75,Re=-.0125,Ce=-8.25,Ue=-2.25;break}for(oe.ms_ener_ratio_old=.25,oe.blocktype_old[0]=oe.blocktype_old[1]=Xe.NORM_TYPE,me=0;me<4;++me){for(var ze=0;ze<Xe.CBANDS;++ze)oe.nb_1[me][ze]=1e20,oe.nb_2[me][ze]=1e20,oe.nb_s1[me][ze]=oe.nb_s2[me][ze]=1;for(var Je=0;Je<Xe.SBMAX_l;Je++)oe.en[me].l[Je]=1e20,oe.thm[me].l[Je]=1e20;for(var ze=0;ze<3;++ze){for(var Je=0;Je<Xe.SBMAX_s;Je++)oe.en[me].s[Je][ze]=1e20,oe.thm[me].s[Je][ze]=1e20;oe.nsPsy.lastAttacks[me]=0}for(var ze=0;ze<9;ze++)oe.nsPsy.last_en_subshort[me][ze]=10}for(oe.loudness_sq_save[0]=oe.loudness_sq_save[1]=0,oe.npart_l=Pe(oe.numlines_l,oe.bo_l,oe.bm_l,Le,He,oe.mld_l,oe.PSY.bo_l_weight,Ct,Xe.BLKSIZE,oe.scalefac_band.l,Xe.BLKSIZE/(2*576),Xe.SBMAX_l),Kt(oe.npart_l<Xe.CBANDS),me=0;me<oe.npart_l;me++){var Nt=Se;Le[me]>=we&&(Nt=Re*(Le[me]-we)/(he-we)+Se*(he-Le[me])/(he-we)),ct[me]=Math.pow(10,Nt/10),oe.numlines_l[me]>0?oe.rnumlines_l[me]=1/oe.numlines_l[me]:oe.rnumlines_l[me]=0}oe.s3_ll=pe(oe.s3ind,oe.npart_l,Le,He,ct,Ee);var ze=0;for(me=0;me<oe.npart_l;me++){var _t;_t=pT.MAX_VALUE;for(var Gt=0;Gt<oe.numlines_l[me];Gt++,ze++){var et=Ct*ze/(1e3*Xe.BLKSIZE),Et;Et=this.ATHformula(et*1e3,Q)-20,Et=Math.pow(10,.1*Et),Et*=oe.numlines_l[me],_t>Et&&(_t=Et)}oe.ATH.cb_l[me]=_t,_t=-20+Le[me]*20/10,_t>6&&(_t=100),_t<-15&&(_t=-15),_t-=8,oe.minval_l[me]=Math.pow(10,_t/10)*oe.numlines_l[me]}for(oe.npart_s=Pe(oe.numlines_s,oe.bo_s,oe.bm_s,Le,He,oe.mld_s,oe.PSY.bo_s_weight,Ct,Xe.BLKSIZE_s,oe.scalefac_band.s,Xe.BLKSIZE_s/(2*192),Xe.SBMAX_s),Kt(oe.npart_s<Xe.CBANDS),ze=0,me=0;me<oe.npart_s;me++){var _t,Nt=Ce;Le[me]>=we&&(Nt=Ue*(Le[me]-we)/(he-we)+Ce*(he-Le[me])/(he-we)),ct[me]=Math.pow(10,Nt/10),_t=pT.MAX_VALUE;for(var Gt=0;Gt<oe.numlines_s[me];Gt++,ze++){var et=Ct*ze/(1e3*Xe.BLKSIZE_s),Et;Et=this.ATHformula(et*1e3,Q)-20,Et=Math.pow(10,.1*Et),Et*=oe.numlines_s[me],_t>Et&&(_t=Et)}oe.ATH.cb_s[me]=_t,_t=-7+Le[me]*7/12,Le[me]>12&&(_t*=1+Math.log(1+_t)*3.1),Le[me]<12&&(_t*=1+Math.log(1-_t)*2.3),_t<-15&&(_t=-15),_t-=8,oe.minval_s[me]=Math.pow(10,_t/10)*oe.numlines_s[me]}oe.s3_ss=pe(oe.s3ind_s,oe.npart_s,Le,He,ct,Ee),D(),t.init_fft(oe),oe.decay=Math.exp(-1*n/(c*Ct/192));{var tt;tt=g,Q.exp_nspsytune&2&&(tt=1),Math.abs(Q.msfix)>0&&(tt=Q.msfix),Q.msfix=tt;for(var Ot=0;Ot<oe.npart_l;Ot++)oe.s3ind[Ot][1]>oe.npart_l-1&&(oe.s3ind[Ot][1]=oe.npart_l-1)}var In=576*oe.mode_gr/Ct;if(oe.ATH.decay=Math.pow(10,-12/10*In),oe.ATH.adjust=.01,oe.ATH.adjustLimit=1,Kt(oe.bo_l[Xe.SBMAX_l-1]<=oe.npart_l),Kt(oe.bo_s[Xe.SBMAX_s-1]<=oe.npart_s),Q.ATHtype!=-1){var et,pt=Q.out_samplerate/Xe.BLKSIZE,Lt=0;for(et=0,me=0;me<Xe.BLKSIZE/2;++me)et+=pt,oe.ATH.eql_w[me]=1/Math.pow(10,this.ATHformula(et,Q)/10),Lt+=oe.ATH.eql_w[me];for(Lt=1/Lt,me=Xe.BLKSIZE/2;--me>=0;)oe.ATH.eql_w[me]*=Lt}{for(var Ot=ze=0;Ot<oe.npart_s;++Ot)for(me=0;me<oe.numlines_s[Ot];++me)++ze;for(var Ot=ze=0;Ot<oe.npart_l;++Ot)for(me=0;me<oe.numlines_l[Ot];++me)++ze}for(ze=0,me=0;me<oe.npart_l;me++){var et=Ct*(ze+oe.numlines_l[me]/2)/(1*Xe.BLKSIZE);oe.mld_cb_l[me]=Oe(et),ze+=oe.numlines_l[me]}for(;me<Xe.CBANDS;++me)oe.mld_cb_l[me]=1;for(ze=0,me=0;me<oe.npart_s;me++){var et=Ct*(ze+oe.numlines_s[me]/2)/(1*Xe.BLKSIZE_s);oe.mld_cb_s[me]=Oe(et),ze+=oe.numlines_s[me]}for(;me<Xe.CBANDS;++me)oe.mld_cb_s[me]=1;return 0};function ke(Q,oe){Q<-.3&&(Q=3410),Q/=1e3,Q=Math.max(.1,Q);var me=3.64*Math.pow(Q,-.8)-6.8*Math.exp(-.6*Math.pow(Q-3.4,2))+6*Math.exp(-.15*Math.pow(Q-8.7,2))+(.6+.04*oe)*.001*Math.pow(Q,4);return me}this.ATHformula=function(Q,oe){var me;switch(oe.ATHtype){case 0:me=ke(Q,9);break;case 1:me=ke(Q,-1);break;case 2:me=ke(Q,0);break;case 3:me=ke(Q,1)+6;break;case 4:me=ke(Q,oe.ATHcurve);break;default:me=ke(Q,0);break}return me}}var kNe=PNe,BNe=_u;function UNe(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=BNe.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var FNe=UNe,GNe=Zs(),XI={};XI.SFBMAX=GNe.SBMAX_s*3;var Kp=XI,qI=jn,VNe=qI.new_float,Zi=qI.new_int,Jh=Kp;function HNe(){this.xr=VNe(576),this.l3_enc=Zi(576),this.scalefac=Zi(Jh.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=Zi(3),this.subblock_gain=Zi(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=Zi(Jh.SFBMAX),this.window=Zi(Jh.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=Zi(4),this.max_nonzero_coeff=0;var e=this;function t(s){return new Int32Array(s)}function n(s){return new Float32Array(s)}this.assign=function(s){e.xr=n(s.xr),e.l3_enc=t(s.l3_enc),e.scalefac=t(s.scalefac),e.xrpow_max=s.xrpow_max,e.part2_3_length=s.part2_3_length,e.big_values=s.big_values,e.count1=s.count1,e.global_gain=s.global_gain,e.scalefac_compress=s.scalefac_compress,e.block_type=s.block_type,e.mixed_block_flag=s.mixed_block_flag,e.table_select=t(s.table_select),e.subblock_gain=t(s.subblock_gain),e.region0_count=s.region0_count,e.region1_count=s.region1_count,e.preflag=s.preflag,e.scalefac_scale=s.scalefac_scale,e.count1table_select=s.count1table_select,e.part2_length=s.part2_length,e.sfb_lmax=s.sfb_lmax,e.sfb_smin=s.sfb_smin,e.psy_lmax=s.psy_lmax,e.sfbmax=s.sfbmax,e.psymax=s.psymax,e.sfbdivide=s.sfbdivide,e.width=t(s.width),e.window=t(s.window),e.count1bits=s.count1bits,e.sfb_partition_table=s.sfb_partition_table.slice(0),e.slen=t(s.slen),e.max_nonzero_coeff=s.max_nonzero_coeff}}var ev=HNe,WNe=jn,mT=WNe.new_int,zNe=ev;function YNe(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[mT(4),mT(4)];for(var e=0;e<2;e++)for(var t=0;t<2;t++)this.tt[e][t]=new zNe}var jNe=YNe,ZI=jn,Ju=ZI.System,ed=ZI.new_int,td=Zs();function KNe(e,t,n,s){this.l=ed(1+td.SBMAX_l),this.s=ed(1+td.SBMAX_s),this.psfb21=ed(1+td.PSFB21),this.psfb12=ed(1+td.PSFB12);var a=this.l,o=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],Ju.arraycopy(this.arrL,0,a,0,Math.min(this.arrL.length,this.l.length)),Ju.arraycopy(this.arrS,0,o,0,Math.min(this.arrS.length,this.s.length)),Ju.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),Ju.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var QI=KNe,tv=jn,ef=tv.new_float,XNe=tv.new_float_n,qNe=tv.new_int,hT=Zs();function ZNe(){this.last_en_subshort=XNe([4,9]),this.lastAttacks=qNe(4),this.pefirbuf=ef(19),this.longfact=ef(hT.SBMAX_l),this.shortfact=ef(hT.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var QNe=ZNe;function JNe(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var eOe=JNe,Lr=jn,tOe=Lr.new_byte,nOe=Lr.new_double,Da=Lr.new_float,Qi=Lr.new_float_n,qa=Lr.new_int,nd=Lr.new_int_n,sOe=jNe,aOe=QI,oOe=QNe,iOe=eOe,fT=jI(),ss=Zs(),lOe=Kp;Xo.MFSIZE=3*1152+ss.ENCDELAY-ss.MDCTDELAY;Xo.MAX_HEADER_BUF=256;Xo.MAX_BITS_PER_CHANNEL=4095;Xo.MAX_BITS_PER_GRANULE=7680;Xo.BPC=320;function Xo(){var e=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=Qi([2,Xo.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new sOe,this.ms_ratio=Da(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=qa(2),this.CurrentStep=qa(2),this.masking_lower=0,this.bv_scf=qa(576),this.pseudohalf=qa(lOe.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*Xo.BPC+1),this.itime=nOe(2),this.sideinfo_len=0,this.sb_sample=Qi([2,2,18,ss.SBLIMIT]),this.amp_filter=Da(32);function t(){this.write_timing=0,this.ptr=0,this.buf=tOe(e)}this.header=new Array(Xo.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new aOe,this.minval_l=Da(ss.CBANDS),this.minval_s=Da(ss.CBANDS),this.nb_1=Qi([4,ss.CBANDS]),this.nb_2=Qi([4,ss.CBANDS]),this.nb_s1=Qi([4,ss.CBANDS]),this.nb_s2=Qi([4,ss.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=Da(4),this.loudness_sq=Qi([2,2]),this.loudness_sq_save=Da(2),this.mld_l=Da(ss.SBMAX_l),this.mld_s=Da(ss.SBMAX_s),this.bm_l=qa(ss.SBMAX_l),this.bo_l=qa(ss.SBMAX_l),this.bm_s=qa(ss.SBMAX_s),this.bo_s=qa(ss.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=nd([ss.CBANDS,2]),this.s3ind_s=nd([ss.CBANDS,2]),this.numlines_s=qa(ss.CBANDS),this.numlines_l=qa(ss.CBANDS),this.rnumlines_l=Da(ss.CBANDS),this.mld_cb_l=Da(ss.CBANDS),this.mld_cb_s=Da(ss.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=Da(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=qa(2),this.nsPsy=new oOe,this.VBR_seek_table=new iOe,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=nd([16,5]),this.bitrate_blockType_Hist=nd([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var n=0;n<this.en.length;n++)this.en[n]=new fT;for(var n=0;n<this.thm.length;n++)this.thm[n]=new fT;for(var n=0;n<this.header.length;n++)this.header[n]=new t}var Xp=Xo,rOe=jn,Ji=rOe.new_float,el=Zs();function cOe(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=Ji(el.SBMAX_l),this.s=Ji(el.SBMAX_s),this.psfb21=Ji(el.PSFB21),this.psfb12=Ji(el.PSFB12),this.cb_l=Ji(el.CBANDS),this.cb_s=Ji(el.CBANDS),this.eql_w=Ji(el.BLKSIZE/2)}var uOe=cOe,JI=jn,fa=JI.System,gT=JI.Arrays;ls.STEPS_per_dB=100;ls.MAX_dB=120;ls.GAIN_NOT_ENOUGH_SAMPLES=-24601;ls.GAIN_ANALYSIS_ERROR=0;ls.GAIN_ANALYSIS_OK=1;ls.INIT_GAIN_ANALYSIS_ERROR=0;ls.INIT_GAIN_ANALYSIS_OK=1;ls.YULE_ORDER=10;ls.MAX_ORDER=ls.YULE_ORDER;ls.MAX_SAMP_FREQ=48e3;ls.RMS_WINDOW_TIME_NUMERATOR=1;ls.RMS_WINDOW_TIME_DENOMINATOR=20;ls.MAX_SAMPLES_PER_WINDOW=ls.MAX_SAMP_FREQ*ls.RMS_WINDOW_TIME_NUMERATOR/ls.RMS_WINDOW_TIME_DENOMINATOR+1;function ls(){var e=64.82,t=.95,n=ls.RMS_WINDOW_TIME_NUMERATOR,s=ls.RMS_WINDOW_TIME_DENOMINATOR,a=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],o=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function i(d,h,g,f,b,A){for(;b--!=0;)g[f]=1e-10+d[h+0]*A[0]-g[f-1]*A[1]+d[h-1]*A[2]-g[f-2]*A[3]+d[h-2]*A[4]-g[f-3]*A[5]+d[h-3]*A[6]-g[f-4]*A[7]+d[h-4]*A[8]-g[f-5]*A[9]+d[h-5]*A[10]-g[f-6]*A[11]+d[h-6]*A[12]-g[f-7]*A[13]+d[h-7]*A[14]-g[f-8]*A[15]+d[h-8]*A[16]-g[f-9]*A[17]+d[h-9]*A[18]-g[f-10]*A[19]+d[h-10]*A[20],++f,++h}function l(d,h,g,f,b,A){for(;b--!=0;)g[f]=d[h+0]*A[0]-g[f-1]*A[1]+d[h-1]*A[2]-g[f-2]*A[3]+d[h-2]*A[4],++f,++h}function r(d,h){for(var g=0;g<MAX_ORDER;g++)d.linprebuf[g]=d.lstepbuf[g]=d.loutbuf[g]=d.rinprebuf[g]=d.rstepbuf[g]=d.routbuf[g]=0;switch(0|h){case 48e3:d.reqindex=0;break;case 44100:d.reqindex=1;break;case 32e3:d.reqindex=2;break;case 24e3:d.reqindex=3;break;case 22050:d.reqindex=4;break;case 16e3:d.reqindex=5;break;case 12e3:d.reqindex=6;break;case 11025:d.reqindex=7;break;case 8e3:d.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return d.sampleWindow=0|(h*n+s-1)/s,d.lsum=0,d.rsum=0,d.totsamp=0,gT.ill(d.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(d,h){return r(d,h)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(d.linpre=MAX_ORDER,d.rinpre=MAX_ORDER,d.lstep=MAX_ORDER,d.rstep=MAX_ORDER,d.lout=MAX_ORDER,d.rout=MAX_ORDER,gT.fill(d.B,0),INIT_GAIN_ANALYSIS_OK)};function c(d){return d*d}this.AnalyzeSamples=function(d,h,g,f,b,A,v){var T,_,N,R,O,x,w;if(A==0)return GAIN_ANALYSIS_OK;switch(w=0,O=A,v){case 1:f=h,b=g;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(A<MAX_ORDER?(fa.arraycopy(h,g,d.linprebuf,MAX_ORDER,A),fa.arraycopy(f,b,d.rinprebuf,MAX_ORDER,A)):(fa.arraycopy(h,g,d.linprebuf,MAX_ORDER,MAX_ORDER),fa.arraycopy(f,b,d.rinprebuf,MAX_ORDER,MAX_ORDER));O>0;){x=O>d.sampleWindow-d.totsamp?d.sampleWindow-d.totsamp:O,w<MAX_ORDER?(T=d.linpre+w,_=d.linprebuf,N=d.rinpre+w,R=d.rinprebuf,x>MAX_ORDER-w&&(x=MAX_ORDER-w)):(T=g+w,_=h,N=b+w,R=f),i(_,T,d.lstepbuf,d.lstep+d.totsamp,x,a[d.reqindex]),i(R,N,d.rstepbuf,d.rstep+d.totsamp,x,a[d.reqindex]),l(d.lstepbuf,d.lstep+d.totsamp,d.loutbuf,d.lout+d.totsamp,x,o[d.reqindex]),l(d.rstepbuf,d.rstep+d.totsamp,d.routbuf,d.rout+d.totsamp,x,o[d.reqindex]),T=d.lout+d.totsamp,_=d.loutbuf,N=d.rout+d.totsamp,R=d.routbuf;for(var D=x%8;D--!=0;)d.lsum+=c(_[T++]),d.rsum+=c(R[N++]);for(D=x/8;D--!=0;)d.lsum+=c(_[T+0])+c(_[T+1])+c(_[T+2])+c(_[T+3])+c(_[T+4])+c(_[T+5])+c(_[T+6])+c(_[T+7]),T+=8,d.rsum+=c(R[N+0])+c(R[N+1])+c(R[N+2])+c(R[N+3])+c(R[N+4])+c(R[N+5])+c(R[N+6])+c(R[N+7]),N+=8;if(O-=x,w+=x,d.totsamp+=x,d.totsamp==d.sampleWindow){var M=ls.STEPS_per_dB*10*Math.log10((d.lsum+d.rsum)/d.totsamp*.5+1e-37),P=M<=0?0:0|M;P>=d.A.length&&(P=d.A.length-1),d.A[P]++,d.lsum=d.rsum=0,fa.arraycopy(d.loutbuf,d.totsamp,d.loutbuf,0,MAX_ORDER),fa.arraycopy(d.routbuf,d.totsamp,d.routbuf,0,MAX_ORDER),fa.arraycopy(d.lstepbuf,d.totsamp,d.lstepbuf,0,MAX_ORDER),fa.arraycopy(d.rstepbuf,d.totsamp,d.rstepbuf,0,MAX_ORDER),d.totsamp=0}if(d.totsamp>d.sampleWindow)return GAIN_ANALYSIS_ERROR}return A<MAX_ORDER?(fa.arraycopy(d.linprebuf,A,d.linprebuf,0,MAX_ORDER-A),fa.arraycopy(d.rinprebuf,A,d.rinprebuf,0,MAX_ORDER-A),fa.arraycopy(h,g,d.linprebuf,MAX_ORDER-A,A),fa.arraycopy(f,b,d.rinprebuf,MAX_ORDER-A,A)):(fa.arraycopy(h,g+A-MAX_ORDER,d.linprebuf,0,MAX_ORDER),fa.arraycopy(f,b+A-MAX_ORDER,d.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function u(d,h){var g,f=0;for(g=0;g<h;g++)f+=d[g];if(f==0)return GAIN_NOT_ENOUGH_SAMPLES;var b=0|Math.ceil(f*(1-t));for(g=h;g-- >0&&!((b-=d[g])<=0););return e-g/ls.STEPS_per_dB}this.GetTitleGain=function(d){for(var h=u(d.A,d.A.length),g=0;g<d.A.length;g++)d.B[g]+=d.A[g],d.A[g]=0;for(var g=0;g<MAX_ORDER;g++)d.linprebuf[g]=d.lstepbuf[g]=d.loutbuf[g]=d.rinprebuf[g]=d.rstepbuf[g]=d.routbuf[g]=0;return d.totsamp=0,d.lsum=d.rsum=0,h}}var eC=ls,tC=jn,Vl=tC.new_float,_T=tC.new_int,ga=eC;function dOe(){this.linprebuf=Vl(ga.MAX_ORDER*2),this.linpre=0,this.lstepbuf=Vl(ga.MAX_SAMPLES_PER_WINDOW+ga.MAX_ORDER),this.lstep=0,this.loutbuf=Vl(ga.MAX_SAMPLES_PER_WINDOW+ga.MAX_ORDER),this.lout=0,this.rinprebuf=Vl(ga.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=Vl(ga.MAX_SAMPLES_PER_WINDOW+ga.MAX_ORDER),this.rstep=0,this.routbuf=Vl(ga.MAX_SAMPLES_PER_WINDOW+ga.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=_T(0|ga.STEPS_per_dB*ga.MAX_dB),this.B=_T(0|ga.STEPS_per_dB*ga.MAX_dB)}var pOe=dOe;function mOe(e){this.bits=e}var nC=mOe,nv=jn,vT=nv.new_float,hOe=nv.new_int,ET=nv.assert,fOe=nC,bT=Zs(),gOe=Kp,_Oe=Xp;function vOe(e){var t=e;this.quantize=t,this.iteration_loop=function(n,s,a,o){var i=n.internal_flags,l=vT(gOe.SFBMAX),r=vT(576),c=hOe(2),u=0,d,h=i.l3_side,g=new fOe(u);this.quantize.rv.ResvFrameBegin(n,g),u=g.bits;for(var f=0;f<i.mode_gr;f++){d=this.quantize.qupvt.on_pe(n,s,c,u,f,f),i.mode_ext==bT.MPG_MD_MS_LR&&(this.quantize.ms_convert(i.l3_side,f),this.quantize.qupvt.reduce_side(c,a[f],u,d));for(var b=0;b<i.channels_out;b++){var A,v,T=h.tt[f][b];T.block_type!=bT.SHORT_TYPE?(A=0,v=i.PSY.mask_adjust-A):(A=0,v=i.PSY.mask_adjust_short-A),i.masking_lower=Math.pow(10,v*.1),this.quantize.init_outer_loop(i,T),this.quantize.init_xrpow(i,T,r)&&(this.quantize.qupvt.calc_xmin(n,o[f][b],T,l),this.quantize.outer_loop(n,T,l,r,b,c[b])),this.quantize.iteration_finish_one(i,f,b),ET(T.part2_3_length<=_Oe.MAX_BITS_PER_CHANNEL),ET(T.part2_3_length<=c[b])}}this.quantize.rv.ResvFrameEnd(i,u)}}var EOe=vOe;function hn(e,t,n,s){this.xlen=e,this.linmax=t,this.table=n,this.hlen=s}var ot={};ot.t1HB=[1,1,1,0];ot.t2HB=[1,2,1,3,1,1,3,2,0];ot.t3HB=[3,2,1,1,1,1,3,2,0];ot.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0];ot.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0];ot.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0];ot.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0];ot.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0];ot.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0];ot.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0];ot.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0];ot.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1];ot.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0];ot.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3];ot.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3];ot.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16];ot.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0];ot.t1l=[1,4,3,5];ot.t2l=[1,4,7,4,5,7,6,7,8];ot.t3l=[2,3,7,4,4,7,6,7,8];ot.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10];ot.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9];ot.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12];ot.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13];ot.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11];ot.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13];ot.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12];ot.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12];ot.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18];ot.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15];ot.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12];ot.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10];ot.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6];ot.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10];ot.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8];ot.ht=[new hn(0,0,null,null),new hn(2,0,ot.t1HB,ot.t1l),new hn(3,0,ot.t2HB,ot.t2l),new hn(3,0,ot.t3HB,ot.t3l),new hn(0,0,null,null),new hn(4,0,ot.t5HB,ot.t5l),new hn(4,0,ot.t6HB,ot.t6l),new hn(6,0,ot.t7HB,ot.t7l),new hn(6,0,ot.t8HB,ot.t8l),new hn(6,0,ot.t9HB,ot.t9l),new hn(8,0,ot.t10HB,ot.t10l),new hn(8,0,ot.t11HB,ot.t11l),new hn(8,0,ot.t12HB,ot.t12l),new hn(16,0,ot.t13HB,ot.t13l),new hn(0,0,null,ot.t16_5l),new hn(16,0,ot.t15HB,ot.t15l),new hn(1,1,ot.t16HB,ot.t16l),new hn(2,3,ot.t16HB,ot.t16l),new hn(3,7,ot.t16HB,ot.t16l),new hn(4,15,ot.t16HB,ot.t16l),new hn(6,63,ot.t16HB,ot.t16l),new hn(8,255,ot.t16HB,ot.t16l),new hn(10,1023,ot.t16HB,ot.t16l),new hn(13,8191,ot.t16HB,ot.t16l),new hn(4,15,ot.t24HB,ot.t24l),new hn(5,31,ot.t24HB,ot.t24l),new hn(6,63,ot.t24HB,ot.t24l),new hn(7,127,ot.t24HB,ot.t24l),new hn(8,255,ot.t24HB,ot.t24l),new hn(9,511,ot.t24HB,ot.t24l),new hn(11,2047,ot.t24HB,ot.t24l),new hn(13,8191,ot.t24HB,ot.t24l),new hn(0,0,ot.t32HB,ot.t32l),new hn(0,0,ot.t33HB,ot.t33l)];ot.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];ot.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];ot.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];ot.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];ot.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]];ot.scfsi_band=[0,6,11,16,21];var sv=ot,tf,TT;function sC(){if(TT)return tf;TT=1;var e=QI,t=jn,n=t.VbrMode,s=t.Float,a=t.Util,o=t.new_float,i=t.new_int,l=t.assert,r=Zs(),c=nC,u=Xp;d.Q_MAX=257,d.Q_MAX2=116,d.LARGE_BITS=1e5,d.IXMAX_VAL=8206;function d(){var h=av(),g=null,f=null,b=null;this.setModules=function(B,V,G){g=B,f=V,b=G};function A(B){return l(0<=B+d.Q_MAX2&&B<d.Q_MAX),w[B+d.Q_MAX2]}this.IPOW20=function(B){return l(0<=B&&B<d.Q_MAX),D[B]};var v=2220446049250313e-31,T=d.IXMAX_VAL,_=T+2,N=d.Q_MAX,R=d.Q_MAX2;d.LARGE_BITS;var O=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var x=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=x,this.sfBandIndex=[new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new e([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var w=o(N+R+1),D=o(N),M=o(_),P=o(_);this.adj43=P;function U(B,V){var G=b.ATHformula(V,B);return G-=O,G=Math.pow(10,G/10+B.ATHlower),G}function F(B){for(var V=B.internal_flags.ATH.l,G=B.internal_flags.ATH.psfb21,K=B.internal_flags.ATH.s,se=B.internal_flags.ATH.psfb12,ee=B.internal_flags,X=B.out_samplerate,z=0;z<r.SBMAX_l;z++){var H=ee.scalefac_band.l[z],q=ee.scalefac_band.l[z+1];V[z]=s.MAX_VALUE;for(var J=H;J<q;J++){var de=J*X/1152,Te=U(B,de);V[z]=Math.min(V[z],Te)}}for(var z=0;z<r.PSFB21;z++){var H=ee.scalefac_band.psfb21[z],q=ee.scalefac_band.psfb21[z+1];G[z]=s.MAX_VALUE;for(var J=H;J<q;J++){var de=J*X/1152,Te=U(B,de);G[z]=Math.min(G[z],Te)}}for(var z=0;z<r.SBMAX_s;z++){var H=ee.scalefac_band.s[z],q=ee.scalefac_band.s[z+1];K[z]=s.MAX_VALUE;for(var J=H;J<q;J++){var de=J*X/384,Te=U(B,de);K[z]=Math.min(K[z],Te)}K[z]*=ee.scalefac_band.s[z+1]-ee.scalefac_band.s[z]}for(var z=0;z<r.PSFB12;z++){var H=ee.scalefac_band.psfb12[z],q=ee.scalefac_band.psfb12[z+1];se[z]=s.MAX_VALUE;for(var J=H;J<q;J++){var de=J*X/384,Te=U(B,de);se[z]=Math.min(se[z],Te)}se[z]*=ee.scalefac_band.s[13]-ee.scalefac_band.s[12]}if(B.noATH){for(var z=0;z<r.SBMAX_l;z++)V[z]=1e-20;for(var z=0;z<r.PSFB21;z++)G[z]=1e-20;for(var z=0;z<r.SBMAX_s;z++)K[z]=1e-20;for(var z=0;z<r.PSFB12;z++)se[z]=1e-20}ee.ATH.floor=10*Math.log10(U(B,-1))}this.iteration_init=function(B){var V=B.internal_flags,G=V.l3_side,K;if(V.iteration_init_init==0){for(V.iteration_init_init=1,G.main_data_begin=0,F(B),M[0]=0,K=1;K<_;K++)M[K]=Math.pow(K,4/3);for(K=0;K<_-1;K++)P[K]=K+1-Math.pow(.5*(M[K]+M[K+1]),.75);for(P[K]=.5,K=0;K<N;K++)D[K]=Math.pow(2,(K-210)*-.1875);for(K=0;K<=N+R;K++)w[K]=Math.pow(2,(K-210-R)*.25);g.huffman_init(V);{var se,ee,X,z;for(K=B.exp_nspsytune>>2&63,K>=32&&(K-=64),se=Math.pow(10,K/4/10),K=B.exp_nspsytune>>8&63,K>=32&&(K-=64),ee=Math.pow(10,K/4/10),K=B.exp_nspsytune>>14&63,K>=32&&(K-=64),X=Math.pow(10,K/4/10),K=B.exp_nspsytune>>20&63,K>=32&&(K-=64),z=X*Math.pow(10,K/4/10),K=0;K<r.SBMAX_l;K++){var H;K<=6?H=se:K<=13?H=ee:K<=20?H=X:H=z,V.nsPsy.longfact[K]=H}for(K=0;K<r.SBMAX_s;K++){var H;K<=5?H=se:K<=10?H=ee:K<=11?H=X:H=z,V.nsPsy.shortfact[K]=H}}}},this.on_pe=function(B,V,G,K,se,ee){var X=B.internal_flags,z=0,H,q=i(2),J,de=new c(z),Te=f.ResvMaxBits(B,K,de,ee);z=de.bits;var ce=z+Te;for(ce>u.MAX_BITS_PER_GRANULE&&(ce=u.MAX_BITS_PER_GRANULE),H=0,J=0;J<X.channels_out;++J)G[J]=Math.min(u.MAX_BITS_PER_CHANNEL,z/X.channels_out),q[J]=0|G[J]*V[se][J]/700-G[J],q[J]>K*3/4&&(q[J]=K*3/4),q[J]<0&&(q[J]=0),q[J]+G[J]>u.MAX_BITS_PER_CHANNEL&&(q[J]=Math.max(0,u.MAX_BITS_PER_CHANNEL-G[J])),H+=q[J];if(H>Te)for(J=0;J<X.channels_out;++J)q[J]=Te*q[J]/H;for(J=0;J<X.channels_out;++J)G[J]+=q[J],Te-=q[J];for(H=0,J=0;J<X.channels_out;++J)H+=G[J];if(H>u.MAX_BITS_PER_GRANULE){var Ne=0;for(J=0;J<X.channels_out;++J)G[J]*=u.MAX_BITS_PER_GRANULE,G[J]/=H,Ne+=G[J]}return ce},this.reduce_side=function(B,V,G,K){l(B[0]+B[1]<=u.MAX_BITS_PER_GRANULE);var se=.33*(.5-V)/.5;se<0&&(se=0),se>.5&&(se=.5);var ee=0|se*.5*(B[0]+B[1]);ee>u.MAX_BITS_PER_CHANNEL-B[0]&&(ee=u.MAX_BITS_PER_CHANNEL-B[0]),ee<0&&(ee=0),B[1]>=125&&(B[1]-ee>125?(B[0]<G&&(B[0]+=ee),B[1]-=ee):(B[0]+=B[1]-125,B[1]=125)),ee=B[0]+B[1],ee>K&&(B[0]=K*B[0]/ee,B[1]=K*B[1]/ee),l(B[0]<=u.MAX_BITS_PER_CHANNEL),l(B[1]<=u.MAX_BITS_PER_CHANNEL),l(B[0]+B[1]<=u.MAX_BITS_PER_GRANULE)},this.athAdjust=function(B,V,G){var K=90.30873362,se=94.82444863,ee=a.FAST_LOG10_X(V,10),X=B*B,z=0;return ee-=G,X>1e-20&&(z=1+a.FAST_LOG10_X(X,10/K)),z<0&&(z=0),ee*=z,ee+=G+K-se,Math.pow(10,.1*ee)},this.calc_xmin=function(B,V,G,K){var se=0,ee=B.internal_flags,X,z=0,H=0,q=ee.ATH,J=G.xr,de=B.VBR==n.vbr_mtrh?1:0,Te=ee.masking_lower;for((B.VBR==n.vbr_mtrh||B.VBR==n.vbr_mt)&&(Te=1),X=0;X<G.psy_lmax;X++){var ce,Ne,Me,Fe,Ge,je;B.VBR==n.vbr_rh||B.VBR==n.vbr_mtrh?Ne=athAdjust(q.adjust,q.l[X],q.floor):Ne=q.adjust*q.l[X],Ge=G.width[X],Me=Ne/Ge,Fe=v,je=Ge>>1,ce=0;do{var Ze,nt;Ze=J[z]*J[z],ce+=Ze,Fe+=Ze<Me?Ze:Me,z++,nt=J[z]*J[z],ce+=nt,Fe+=nt<Me?nt:Me,z++}while(--je>0);if(ce>Ne&&H++,X==r.SBPSY_l){var st=Ne*ee.nsPsy.longfact[X];Fe<st&&(Fe=st)}if(de!=0&&(Ne=Fe),!B.ATHonly){var At=V.en.l[X];if(At>0){var st;st=ce*V.thm.l[X]*Te/At,de!=0&&(st*=ee.nsPsy.longfact[X]),Ne<st&&(Ne=st)}}de!=0?K[se++]=Ne:K[se++]=Ne*ee.nsPsy.longfact[X]}var Mt=575;if(G.block_type!=r.SHORT_TYPE)for(var Z=576;Z--!=0&&h.EQ(J[Z],0);)Mt=Z;G.max_nonzero_coeff=Mt;for(var ie=G.sfb_smin;X<G.psymax;ie++,X+=3){var Ge,le,ve;for(B.VBR==n.vbr_rh||B.VBR==n.vbr_mtrh?ve=athAdjust(q.adjust,q.s[ie],q.floor):ve=q.adjust*q.s[ie],Ge=G.width[X],le=0;le<3;le++){var ce=0,Ne,Me,Fe,je=Ge>>1;Me=ve/Ge,Fe=v;do{var Ze,nt;Ze=J[z]*J[z],ce+=Ze,Fe+=Ze<Me?Ze:Me,z++,nt=J[z]*J[z],ce+=nt,Fe+=nt<Me?nt:Me,z++}while(--je>0);if(ce>ve&&H++,ie==r.SBPSY_s){var st=ve*ee.nsPsy.shortfact[ie];Fe<st&&(Fe=st)}if(de!=0?Ne=Fe:Ne=ve,!B.ATHonly&&!B.ATHshort){var At=V.en.s[ie][le];if(At>0){var st;st=ce*V.thm.s[ie][le]*Te/At,de!=0&&(st*=ee.nsPsy.shortfact[ie]),Ne<st&&(Ne=st)}}de!=0?K[se++]=Ne:K[se++]=Ne*ee.nsPsy.shortfact[ie]}B.useTemporal&&(K[se-3]>K[se-3+1]&&(K[se-3+1]+=(K[se-3]-K[se-3+1])*ee.decay),K[se-3+1]>K[se-3+2]&&(K[se-3+2]+=(K[se-3+1]-K[se-3+2])*ee.decay))}return H};function k(B){this.s=B}this.calc_noise_core=function(B,V,G,K){var se=0,ee=V.s,X=B.l3_enc;if(ee>B.count1)for(;G--!=0;){var z;z=B.xr[ee],ee++,se+=z*z,z=B.xr[ee],ee++,se+=z*z}else if(ee>B.big_values){var H=o(2);for(H[0]=0,H[1]=K;G--!=0;){var z;z=Math.abs(B.xr[ee])-H[X[ee]],ee++,se+=z*z,z=Math.abs(B.xr[ee])-H[X[ee]],ee++,se+=z*z}}else for(;G--!=0;){var z;z=Math.abs(B.xr[ee])-M[X[ee]]*K,ee++,se+=z*z,z=Math.abs(B.xr[ee])-M[X[ee]]*K,ee++,se+=z*z}return V.s=ee,se},this.calc_noise=function(B,V,G,K,se){var ee=0,X=0,z,H,q=0,J=0,de=0,Te=-20,ce=0,Ne=B.scalefac,Me=0;for(K.over_SSD=0,z=0;z<B.psymax;z++){var Fe=B.global_gain-(Ne[Me++]+(B.preflag!=0?x[z]:0)<<B.scalefac_scale+1)-B.subblock_gain[B.window[z]]*8,Ge=0;if(se!=null&&se.step[z]==Fe)Ge=se.noise[z],ce+=B.width[z],G[ee++]=Ge/V[X++],Ge=se.noise_log[z];else{var je=A(Fe);if(H=B.width[z]>>1,ce+B.width[z]>B.max_nonzero_coeff){var Ze;Ze=B.max_nonzero_coeff-ce+1,Ze>0?H=Ze>>1:H=0}var nt=new k(ce);Ge=this.calc_noise_core(B,nt,H,je),ce=nt.s,se!=null&&(se.step[z]=Fe,se.noise[z]=Ge),Ge=G[ee++]=Ge/V[X++],Ge=a.FAST_LOG10(Math.max(Ge,1e-20)),se!=null&&(se.noise_log[z]=Ge)}if(se!=null&&(se.global_gain=B.global_gain),de+=Ge,Ge>0){var st;st=Math.max(0|Ge*10+.5,1),K.over_SSD+=st*st,q++,J+=Ge}Te=Math.max(Te,Ge)}return K.over_count=q,K.tot_noise=de,K.over_noise=J,K.max_noise=Te,q},this.set_pinfo=function(B,V,G,K,se){var ee=B.internal_flags,X,z,H,q,J,de=V.scalefac_scale==0?.5:1,Te=V.scalefac,ce=o(L3Side.SFBMAX),Ne=o(L3Side.SFBMAX),Me=new CalcNoiseResult;calc_xmin(B,G,V,ce),calc_noise(V,ce,Ne,Me,null);var Fe=0;for(z=V.sfb_lmax,V.block_type!=r.SHORT_TYPE&&V.mixed_block_flag==0&&(z=22),X=0;X<z;X++){var Ge=ee.scalefac_band.l[X],je=ee.scalefac_band.l[X+1],Ze=je-Ge;for(q=0;Fe<je;Fe++)q+=V.xr[Fe]*V.xr[Fe];q/=Ze,J=1e15,ee.pinfo.en[K][se][X]=J*q,ee.pinfo.xfsf[K][se][X]=J*ce[X]*Ne[X]/Ze,G.en.l[X]>0&&!B.ATHonly?q=q/G.en.l[X]:q=0,ee.pinfo.thr[K][se][X]=J*Math.max(q*G.thm.l[X],ee.ATH.l[X]),ee.pinfo.LAMEsfb[K][se][X]=0,V.preflag!=0&&X>=11&&(ee.pinfo.LAMEsfb[K][se][X]=-de*x[X]),X<r.SBPSY_l&&(l(Te[X]>=0),ee.pinfo.LAMEsfb[K][se][X]-=de*Te[X])}if(V.block_type==r.SHORT_TYPE)for(z=X,X=V.sfb_smin;X<r.SBMAX_s;X++)for(var Ge=ee.scalefac_band.s[X],je=ee.scalefac_band.s[X+1],Ze=je-Ge,nt=0;nt<3;nt++){for(q=0,H=Ge;H<je;H++)q+=V.xr[Fe]*V.xr[Fe],Fe++;q=Math.max(q/Ze,1e-20),J=1e15,ee.pinfo.en_s[K][se][3*X+nt]=J*q,ee.pinfo.xfsf_s[K][se][3*X+nt]=J*ce[z]*Ne[z]/Ze,G.en.s[X][nt]>0?q=q/G.en.s[X][nt]:q=0,(B.ATHonly||B.ATHshort)&&(q=0),ee.pinfo.thr_s[K][se][3*X+nt]=J*Math.max(q*G.thm.s[X][nt],ee.ATH.s[X]),ee.pinfo.LAMEsfb_s[K][se][3*X+nt]=-2*V.subblock_gain[nt],X<r.SBPSY_s&&(ee.pinfo.LAMEsfb_s[K][se][3*X+nt]-=de*Te[z]),z++}ee.pinfo.LAMEqss[K][se]=V.global_gain,ee.pinfo.LAMEmainbits[K][se]=V.part2_3_length+V.part2_length,ee.pinfo.LAMEsfbits[K][se]=V.part2_length,ee.pinfo.over[K][se]=Me.over_count,ee.pinfo.max_noise[K][se]=Me.max_noise*10,ee.pinfo.over_noise[K][se]=Me.over_noise*10,ee.pinfo.tot_noise[K][se]=Me.tot_noise*10,ee.pinfo.over_SSD[K][se]=Me.over_SSD}}return tf=d,tf}var nf,ST;function aC(){if(ST)return nf;ST=1;var e=jn,t=e.System,n=e.Arrays,s=e.new_int,a=e.assert,o=Zs(),i=sv,l=ev,r=sC();function c(){var u=null;this.qupvt=null,this.setModules=function(ee){this.qupvt=ee,u=ee};function d(ee){this.bits=0|ee}var h=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function g(ee,X,z,H,q,J){var de=.5946/X;for(ee=ee>>1;ee--!=0;)q[J++]=de>z[H++]?0:1,q[J++]=de>z[H++]?0:1}function f(ee,X,z,H,q,J){ee=ee>>1;var de=ee%2;for(ee=ee>>1;ee--!=0;){var Te,ce,Ne,Me,Fe,Ge,je,Ze;Te=z[H++]*X,ce=z[H++]*X,Fe=0|Te,Ne=z[H++]*X,Ge=0|ce,Me=z[H++]*X,je=0|Ne,Te+=u.adj43[Fe],Ze=0|Me,ce+=u.adj43[Ge],q[J++]=0|Te,Ne+=u.adj43[je],q[J++]=0|ce,Me+=u.adj43[Ze],q[J++]=0|Ne,q[J++]=0|Me}if(de!=0){var Te,ce,Fe,Ge;Te=z[H++]*X,ce=z[H++]*X,Fe=0|Te,Ge=0|ce,Te+=u.adj43[Fe],ce+=u.adj43[Ge],q[J++]=0|Te,q[J++]=0|ce}}function b(ee,X,z,H,q){var J,de,Te=0,ce,Ne=0,Me=0,Fe=0,Ge=X,je=0,Ze=Ge,nt=0,st=ee,At=0;for(ce=q!=null&&H.global_gain==q.global_gain,H.block_type==o.SHORT_TYPE?de=38:de=21,J=0;J<=de;J++){var Mt=-1;if((ce||H.block_type==o.NORM_TYPE)&&(Mt=H.global_gain-(H.scalefac[J]+(H.preflag!=0?u.pretab[J]:0)<<H.scalefac_scale+1)-H.subblock_gain[H.window[J]]*8),a(H.width[J]>=0),ce&&q.step[J]==Mt)Ne!=0&&(f(Ne,z,st,At,Ze,nt),Ne=0),Me!=0&&(g(Me,z,st,At,Ze,nt),Me=0);else{var Z=H.width[J];if(Te+H.width[J]>H.max_nonzero_coeff){var ie;ie=H.max_nonzero_coeff-Te+1,n.fill(X,H.max_nonzero_coeff,576,0),Z=ie,Z<0&&(Z=0),J=de+1}if(Ne==0&&Me==0&&(Ze=Ge,nt=je,st=ee,At=Fe),q!=null&&q.sfb_count1>0&&J>=q.sfb_count1&&q.step[J]>0&&Mt>=q.step[J]?(Ne!=0&&(f(Ne,z,st,At,Ze,nt),Ne=0,Ze=Ge,nt=je,st=ee,At=Fe),Me+=Z):(Me!=0&&(g(Me,z,st,At,Ze,nt),Me=0,Ze=Ge,nt=je,st=ee,At=Fe),Ne+=Z),Z<=0){Me!=0&&(g(Me,z,st,At,Ze,nt),Me=0),Ne!=0&&(f(Ne,z,st,At,Ze,nt),Ne=0);break}}J<=de&&(je+=H.width[J],Fe+=H.width[J],Te+=H.width[J])}Ne!=0&&(f(Ne,z,st,At,Ze,nt),Ne=0),Me!=0&&(g(Me,z,st,At,Ze,nt),Me=0)}function A(ee,X,z){var H=0,q=0;do{var J=ee[X++],de=ee[X++];H<J&&(H=J),q<de&&(q=de)}while(X<z);return H<q&&(H=q),H}function v(ee,X,z,H,q,J){var de=i.ht[H].xlen*65536+i.ht[q].xlen,Te=0,ce;do{var Ne=ee[X++],Me=ee[X++];Ne!=0&&(Ne>14&&(Ne=15,Te+=de),Ne*=16),Me!=0&&(Me>14&&(Me=15,Te+=de),Ne+=Me),Te+=i.largetbl[Ne]}while(X<z);return ce=Te&65535,Te>>=16,Te>ce&&(Te=ce,H=q),J.bits+=Te,H}function T(ee,X,z,H){var q=0,J=i.ht[1].hlen;do{var de=ee[X+0]*2+ee[X+1];X+=2,q+=J[de]}while(X<z);return H.bits+=q,1}function _(ee,X,z,H,q){var J=0,de,Te=i.ht[H].xlen,ce;H==2?ce=i.table23:ce=i.table56;do{var Ne=ee[X+0]*Te+ee[X+1];X+=2,J+=ce[Ne]}while(X<z);return de=J&65535,J>>=16,J>de&&(J=de,H++),q.bits+=J,H}function N(ee,X,z,H,q){var J=0,de=0,Te=0,ce=i.ht[H].xlen,Ne=i.ht[H].hlen,Me=i.ht[H+1].hlen,Fe=i.ht[H+2].hlen;do{var Ge=ee[X+0]*ce+ee[X+1];X+=2,J+=Ne[Ge],de+=Me[Ge],Te+=Fe[Ge]}while(X<z);var je=H;return J>de&&(J=de,je++),J>Te&&(J=Te,je=H+2),q.bits+=J,je}var R=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function O(ee,X,z,H){var q=A(ee,X,z);switch(q){case 0:return q;case 1:return T(ee,X,z,H);case 2:case 3:return _(ee,X,z,R[q-1],H);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return N(ee,X,z,R[q-1],H);default:if(q>r.IXMAX_VAL)return H.bits=r.LARGE_BITS,-1;q-=15;var J;for(J=24;J<32&&!(i.ht[J].linmax>=q);J++);var de;for(de=J-8;de<24&&!(i.ht[de].linmax>=q);de++);return v(ee,X,z,de,J,H)}}this.noquant_count_bits=function(ee,X,z){var H=X.l3_enc,q=Math.min(576,X.max_nonzero_coeff+2>>1<<1);for(z!=null&&(z.sfb_count1=0);q>1&&!(H[q-1]|H[q-2]);q-=2);X.count1=q;for(var J=0,de=0;q>3;q-=4){var Te;if(((H[q-1]|H[q-2]|H[q-3]|H[q-4])&2147483647)>1)break;Te=((H[q-4]*2+H[q-3])*2+H[q-2])*2+H[q-1],J+=i.t32l[Te],de+=i.t33l[Te]}var ce=J;if(X.count1table_select=0,J>de&&(ce=de,X.count1table_select=1),X.count1bits=ce,X.big_values=q,q==0)return ce;if(X.block_type==o.SHORT_TYPE)J=3*ee.scalefac_band.s[3],J>X.big_values&&(J=X.big_values),de=X.big_values;else if(X.block_type==o.NORM_TYPE){if(J=X.region0_count=ee.bv_scf[q-2],de=X.region1_count=ee.bv_scf[q-1],a(J+de+2<o.SBPSY_l),de=ee.scalefac_band.l[J+de+2],J=ee.scalefac_band.l[J+1],de<q){var Ne=new d(ce);X.table_select[2]=O(H,de,q,Ne),ce=Ne.bits}}else X.region0_count=7,X.region1_count=o.SBMAX_l-1-7-1,J=ee.scalefac_band.l[8],de=q,J>de&&(J=de);if(J=Math.min(J,q),de=Math.min(de,q),0<J){var Ne=new d(ce);X.table_select[0]=O(H,0,J,Ne),ce=Ne.bits}if(J<de){var Ne=new d(ce);X.table_select[1]=O(H,J,de,Ne),ce=Ne.bits}if(ee.use_best_huffman==2&&(X.part2_3_length=ce,best_huffman_divide(ee,X),ce=X.part2_3_length),z!=null&&X.block_type==o.NORM_TYPE){for(var Me=0;ee.scalefac_band.l[Me]<X.big_values;)Me++;z.sfb_count1=Me}return ce},this.count_bits=function(ee,X,z,H){var q=z.l3_enc,J=r.IXMAX_VAL/u.IPOW20(z.global_gain);if(z.xrpow_max>J)return r.LARGE_BITS;if(b(X,q,u.IPOW20(z.global_gain),z,H),ee.substep_shaping&2)for(var de=0,Te=z.global_gain+z.scalefac_scale,ce=.634521682242439/u.IPOW20(Te),Ne=0;Ne<z.sfbmax;Ne++){var Me=z.width[Ne];if(ee.pseudohalf[Ne]==0)de+=Me;else{var Fe;for(Fe=de,de+=Me;Fe<de;++Fe)q[Fe]=X[Fe]>=ce?q[Fe]:0}}return this.noquant_count_bits(ee,z,H)};function x(ee,X,z,H,q,J,de){for(var Te=X.big_values,ce=0;ce<=22;ce++)H[ce]=r.LARGE_BITS;for(var ce=0;ce<16;ce++){var Ne=ee.scalefac_band.l[ce+1];if(Ne>=Te)break;var Me=0,Fe=new d(Me),Ge=O(z,0,Ne,Fe);Me=Fe.bits;for(var je=0;je<8;je++){var Ze=ee.scalefac_band.l[ce+je+2];if(Ze>=Te)break;var nt=Me;Fe=new d(nt);var st=O(z,Ne,Ze,Fe);nt=Fe.bits,H[ce+je]>nt&&(H[ce+je]=nt,q[ce+je]=ce,J[ce+je]=Ge,de[ce+je]=st)}}}function w(ee,X,z,H,q,J,de,Te){for(var ce=X.big_values,Ne=2;Ne<o.SBMAX_l+1;Ne++){var Me=ee.scalefac_band.l[Ne];if(Me>=ce)break;var Fe=q[Ne-2]+X.count1bits;if(z.part2_3_length<=Fe)break;var Ge=new d(Fe),je=O(H,Me,ce,Ge);Fe=Ge.bits,!(z.part2_3_length<=Fe)&&(z.assign(X),z.part2_3_length=Fe,z.region0_count=J[Ne-2],z.region1_count=Ne-2-J[Ne-2],z.table_select[0]=de[Ne-2],z.table_select[1]=Te[Ne-2],z.table_select[2]=je)}}this.best_huffman_divide=function(ee,X){var z=new l,H=X.l3_enc,q=s(23),J=s(23),de=s(23),Te=s(23);if(!(X.block_type==o.SHORT_TYPE&&ee.mode_gr==1)){z.assign(X),X.block_type==o.NORM_TYPE&&(x(ee,X,H,q,J,de,Te),w(ee,z,X,H,q,J,de,Te));var ce=z.big_values;if(!(ce==0||(H[ce-2]|H[ce-1])>1)&&(ce=X.count1+2,!(ce>576))){z.assign(X),z.count1=ce;for(var Ne=0,Me=0;ce>z.big_values;ce-=4){var Fe=((H[ce-4]*2+H[ce-3])*2+H[ce-2])*2+H[ce-1];Ne+=i.t32l[Fe],Me+=i.t33l[Fe]}if(z.big_values=ce,z.count1table_select=0,Ne>Me&&(Ne=Me,z.count1table_select=1),z.count1bits=Ne,z.block_type==o.NORM_TYPE)w(ee,z,X,H,q,J,de,Te);else{if(z.part2_3_length=Ne,Ne=ee.scalefac_band.l[8],Ne>ce&&(Ne=ce),Ne>0){var Ge=new d(z.part2_3_length);z.table_select[0]=O(H,0,Ne,Ge),z.part2_3_length=Ge.bits}if(ce>Ne){var Ge=new d(z.part2_3_length);z.table_select[1]=O(H,Ne,ce,Ge),z.part2_3_length=Ge.bits}X.part2_3_length>z.part2_3_length&&X.assign(z)}}}};var D=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],M=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],P=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],U=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];c.slen1_tab=P,c.slen2_tab=U;function F(ee,X){for(var z,H=X.tt[1][ee],q=X.tt[0][ee],J=0;J<i.scfsi_band.length-1;J++){for(z=i.scfsi_band[J];z<i.scfsi_band[J+1]&&!(q.scalefac[z]!=H.scalefac[z]&&H.scalefac[z]>=0);z++);if(z==i.scfsi_band[J+1]){for(z=i.scfsi_band[J];z<i.scfsi_band[J+1];z++)H.scalefac[z]=-1;X.scfsi[ee][J]=1}}var de=0,Te=0;for(z=0;z<11;z++)H.scalefac[z]!=-1&&(Te++,de<H.scalefac[z]&&(de=H.scalefac[z]));for(var ce=0,Ne=0;z<o.SBPSY_l;z++)H.scalefac[z]!=-1&&(Ne++,ce<H.scalefac[z]&&(ce=H.scalefac[z]));for(var J=0;J<16;J++)if(de<D[J]&&ce<M[J]){var Me=P[J]*Te+U[J]*Ne;H.part2_length>Me&&(H.part2_length=Me,H.scalefac_compress=J)}}this.best_scalefac_store=function(ee,X,z,H){var q=H.tt[X][z],J,de,Te,ce,Ne=0;for(Te=0,J=0;J<q.sfbmax;J++){var Me=q.width[J];for(Te+=Me,ce=-Me;ce<0&&q.l3_enc[ce+Te]==0;ce++);ce==0&&(q.scalefac[J]=Ne=-2)}if(q.scalefac_scale==0&&q.preflag==0){var Fe=0;for(J=0;J<q.sfbmax;J++)q.scalefac[J]>0&&(Fe|=q.scalefac[J]);if(!(Fe&1)&&Fe!=0){for(J=0;J<q.sfbmax;J++)q.scalefac[J]>0&&(q.scalefac[J]>>=1);q.scalefac_scale=Ne=1}}if(q.preflag==0&&q.block_type!=o.SHORT_TYPE&&ee.mode_gr==2){for(J=11;J<o.SBPSY_l&&!(q.scalefac[J]<u.pretab[J]&&q.scalefac[J]!=-2);J++);if(J==o.SBPSY_l){for(J=11;J<o.SBPSY_l;J++)q.scalefac[J]>0&&(q.scalefac[J]-=u.pretab[J]);q.preflag=Ne=1}}for(de=0;de<4;de++)H.scfsi[z][de]=0;for(ee.mode_gr==2&&X==1&&H.tt[0][z].block_type!=o.SHORT_TYPE&&H.tt[1][z].block_type!=o.SHORT_TYPE&&(F(z,H),Ne=0),J=0;J<q.sfbmax;J++)q.scalefac[J]==-2&&(q.scalefac[J]=0);Ne!=0&&(ee.mode_gr==2?this.scale_bitcount(q):this.scale_bitcount_lsf(ee,q))};function k(ee,X){for(var z=0;z<X;++z)if(ee[z]<0)return!1;return!0}var B=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],V=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],G=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(ee){var X,z,H=0,q=0,J,de=ee.scalefac;if(a(k(de,ee.sfbmax)),ee.block_type==o.SHORT_TYPE)J=B,ee.mixed_block_flag!=0&&(J=V);else if(J=G,ee.preflag==0){for(z=11;z<o.SBPSY_l&&!(de[z]<u.pretab[z]);z++);if(z==o.SBPSY_l)for(ee.preflag=1,z=11;z<o.SBPSY_l;z++)de[z]-=u.pretab[z]}for(z=0;z<ee.sfbdivide;z++)H<de[z]&&(H=de[z]);for(;z<ee.sfbmax;z++)q<de[z]&&(q=de[z]);for(ee.part2_length=r.LARGE_BITS,X=0;X<16;X++)H<D[X]&&q<M[X]&&ee.part2_length>J[X]&&(ee.part2_length=J[X],ee.scalefac_compress=X);return ee.part2_length==r.LARGE_BITS};var K=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(ee,X){var z,H,q,J,de,Te,ce,Ne,Me=s(4),Fe=X.scalefac;for(X.preflag!=0?z=2:z=0,ce=0;ce<4;ce++)Me[ce]=0;if(X.block_type==o.SHORT_TYPE){H=1;var Ge=u.nr_of_sfb_block[z][H];for(Ne=0,q=0;q<4;q++)for(J=Ge[q]/3,ce=0;ce<J;ce++,Ne++)for(de=0;de<3;de++)Fe[Ne*3+de]>Me[q]&&(Me[q]=Fe[Ne*3+de])}else{H=0;var Ge=u.nr_of_sfb_block[z][H];for(Ne=0,q=0;q<4;q++)for(J=Ge[q],ce=0;ce<J;ce++,Ne++)Fe[Ne]>Me[q]&&(Me[q]=Fe[Ne])}for(Te=!1,q=0;q<4;q++)Me[q]>K[z][q]&&(Te=!0);if(!Te){var je,Ze,nt,st;for(X.sfb_partition_table=u.nr_of_sfb_block[z][H],q=0;q<4;q++)X.slen[q]=se[Me[q]];switch(je=X.slen[0],Ze=X.slen[1],nt=X.slen[2],st=X.slen[3],z){case 0:X.scalefac_compress=(je*5+Ze<<4)+(nt<<2)+st;break;case 1:X.scalefac_compress=400+(je*5+Ze<<2)+nt;break;case 2:X.scalefac_compress=500+je*3+Ze;break;default:t.err.printf(`intensity stereo not implemented yet
`);break}}if(!Te)for(a(X.sfb_partition_table!=null),X.part2_length=0,q=0;q<4;q++)X.part2_length+=X.slen[q]*X.sfb_partition_table[q];return Te};var se=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(ee){for(var X=2;X<=576;X+=2){for(var z=0,H;ee.scalefac_band.l[++z]<X;);for(H=h[z][0];ee.scalefac_band.l[H+1]>X;)H--;for(H<0&&(H=h[z][0]),ee.bv_scf[X-2]=H,H=h[z][1];ee.scalefac_band.l[H+ee.bv_scf[X-2]+2]>X;)H--;H<0&&(H=h[z][1]),ee.bv_scf[X-1]=H}}}return nf=c,nf}var sf,AT;function av(){if(AT)return sf;AT=1;var e=jn,t=e.System,n=e.Arrays,s=e.new_byte,a=e.new_float_n,o=e.new_int,i=e.assert,l=aC(),r=sv,c=Zs(),u=Xp;d.EQ=function(h,g){return Math.abs(h)>Math.abs(g)?Math.abs(h-g)<=Math.abs(h)*1e-6:Math.abs(h-g)<=Math.abs(g)*1e-6},d.NEQ=function(h,g){return!d.EQ(h,g)};function d(){var h=ov(),g=this,f=32773,b=null,A=null,v=null,T=null;this.setModules=function(X,z,H,q){b=X,A=z,v=H,T=q};var _=null,N=0,R=0,O=0;this.getframebits=function(X){var z=X.internal_flags,H;z.bitrate_index!=0?H=r.bitrate_table[X.version][z.bitrate_index]:H=X.brate;var q=0|(X.version+1)*72e3*H/X.out_samplerate+z.padding;return 8*q};function x(X){t.arraycopy(X.header[X.w_ptr].buf,0,_,R,X.sideinfo_len),R+=X.sideinfo_len,N+=X.sideinfo_len*8,X.w_ptr=X.w_ptr+1&u.MAX_HEADER_BUF-1}function w(X,z,H){for(;H>0;){var q;O==0&&(O=8,R++,i(R<h.LAME_MAXMP3BUFFER),i(X.header[X.w_ptr].write_timing>=N),X.header[X.w_ptr].write_timing==N&&x(X),_[R]=0),q=Math.min(H,O),H-=q,O-=q,_[R]|=z>>H<<O,N+=q}}function D(X,z,H){for(;H>0;){var q;O==0&&(O=8,R++,i(R<h.LAME_MAXMP3BUFFER),_[R]=0),q=Math.min(H,O),H-=q,O-=q,_[R]|=z>>H<<O,N+=q}}function M(X,z){var H=X.internal_flags,q;if(z>=8&&(w(H,76,8),z-=8),z>=8&&(w(H,65,8),z-=8),z>=8&&(w(H,77,8),z-=8),z>=8&&(w(H,69,8),z-=8),z>=32){var J=v.getLameShortVersion();if(z>=32)for(q=0;q<J.length&&z>=8;++q)z-=8,w(H,J.charAt(q),8)}for(;z>=1;z-=1)w(H,H.ancillary_flag,1),H.ancillary_flag^=X.disable_reservoir?0:1}function P(X,z,H){for(var q=X.header[X.h_ptr].ptr;H>0;){var J=Math.min(H,8-(q&7));H-=J,X.header[X.h_ptr].buf[q>>3]|=z>>H<<8-(q&7)-J,q+=J}X.header[X.h_ptr].ptr=q}function U(X,z){X<<=8;for(var H=0;H<8;H++)X<<=1,z<<=1,(z^X)&65536&&(z^=f);return z}this.CRC_writeheader=function(X,z){var H=65535;H=U(z[2]&255,H),H=U(z[3]&255,H);for(var q=6;q<X.sideinfo_len;q++)H=U(z[q]&255,H);z[4]=byte(H>>8),z[5]=byte(H&255)};function F(X,z){var H=X.internal_flags,q,J,de;if(q=H.l3_side,H.header[H.h_ptr].ptr=0,n.fill(H.header[H.h_ptr].buf,0,H.sideinfo_len,0),X.out_samplerate<16e3?P(H,4094,12):P(H,4095,12),P(H,X.version,1),P(H,1,2),P(H,X.error_protection?0:1,1),P(H,H.bitrate_index,4),P(H,H.samplerate_index,2),P(H,H.padding,1),P(H,X.extension,1),P(H,X.mode.ordinal(),2),P(H,H.mode_ext,2),P(H,X.copyright,1),P(H,X.original,1),P(H,X.emphasis,2),X.error_protection&&P(H,0,16),X.version==1){for(i(q.main_data_begin>=0),P(H,q.main_data_begin,9),H.channels_out==2?P(H,q.private_bits,3):P(H,q.private_bits,5),de=0;de<H.channels_out;de++){var Te;for(Te=0;Te<4;Te++)P(H,q.scfsi[de][Te],1)}for(J=0;J<2;J++)for(de=0;de<H.channels_out;de++){var ce=q.tt[J][de];P(H,ce.part2_3_length+ce.part2_length,12),P(H,ce.big_values/2,9),P(H,ce.global_gain,8),P(H,ce.scalefac_compress,4),ce.block_type!=c.NORM_TYPE?(P(H,1,1),P(H,ce.block_type,2),P(H,ce.mixed_block_flag,1),ce.table_select[0]==14&&(ce.table_select[0]=16),P(H,ce.table_select[0],5),ce.table_select[1]==14&&(ce.table_select[1]=16),P(H,ce.table_select[1],5),P(H,ce.subblock_gain[0],3),P(H,ce.subblock_gain[1],3),P(H,ce.subblock_gain[2],3)):(P(H,0,1),ce.table_select[0]==14&&(ce.table_select[0]=16),P(H,ce.table_select[0],5),ce.table_select[1]==14&&(ce.table_select[1]=16),P(H,ce.table_select[1],5),ce.table_select[2]==14&&(ce.table_select[2]=16),P(H,ce.table_select[2],5),i(0<=ce.region0_count&&ce.region0_count<16),i(0<=ce.region1_count&&ce.region1_count<8),P(H,ce.region0_count,4),P(H,ce.region1_count,3)),P(H,ce.preflag,1),P(H,ce.scalefac_scale,1),P(H,ce.count1table_select,1)}}else for(i(q.main_data_begin>=0),P(H,q.main_data_begin,8),P(H,q.private_bits,H.channels_out),J=0,de=0;de<H.channels_out;de++){var ce=q.tt[J][de];P(H,ce.part2_3_length+ce.part2_length,12),P(H,ce.big_values/2,9),P(H,ce.global_gain,8),P(H,ce.scalefac_compress,9),ce.block_type!=c.NORM_TYPE?(P(H,1,1),P(H,ce.block_type,2),P(H,ce.mixed_block_flag,1),ce.table_select[0]==14&&(ce.table_select[0]=16),P(H,ce.table_select[0],5),ce.table_select[1]==14&&(ce.table_select[1]=16),P(H,ce.table_select[1],5),P(H,ce.subblock_gain[0],3),P(H,ce.subblock_gain[1],3),P(H,ce.subblock_gain[2],3)):(P(H,0,1),ce.table_select[0]==14&&(ce.table_select[0]=16),P(H,ce.table_select[0],5),ce.table_select[1]==14&&(ce.table_select[1]=16),P(H,ce.table_select[1],5),ce.table_select[2]==14&&(ce.table_select[2]=16),P(H,ce.table_select[2],5),i(0<=ce.region0_count&&ce.region0_count<16),i(0<=ce.region1_count&&ce.region1_count<8),P(H,ce.region0_count,4),P(H,ce.region1_count,3)),P(H,ce.scalefac_scale,1),P(H,ce.count1table_select,1)}X.error_protection&&CRC_writeheader(H,H.header[H.h_ptr].buf);{var Ne=H.h_ptr;i(H.header[Ne].ptr==H.sideinfo_len*8),H.h_ptr=Ne+1&u.MAX_HEADER_BUF-1,H.header[H.h_ptr].write_timing=H.header[Ne].write_timing+z,H.h_ptr==H.w_ptr&&t.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function k(X,z){var H=r.ht[z.count1table_select+32],q,J=0,de=z.big_values,Te=z.big_values;for(i(z.count1table_select<2),q=(z.count1-z.big_values)/4;q>0;--q){var ce=0,Ne=0,Me;Me=z.l3_enc[de+0],Me!=0&&(Ne+=8,z.xr[Te+0]<0&&ce++),Me=z.l3_enc[de+1],Me!=0&&(Ne+=4,ce*=2,z.xr[Te+1]<0&&ce++),Me=z.l3_enc[de+2],Me!=0&&(Ne+=2,ce*=2,z.xr[Te+2]<0&&ce++),Me=z.l3_enc[de+3],Me!=0&&(Ne++,ce*=2,z.xr[Te+3]<0&&ce++),de+=4,Te+=4,w(X,ce+H.table[Ne],H.hlen[Ne]),J+=H.hlen[Ne]}return J}function B(X,z,H,q,J){var de=r.ht[z],Te=0;if(z==0)return Te;for(var ce=H;ce<q;ce+=2){var Ne=0,Me=0,Fe=de.xlen,Ge=de.xlen,je=0,Ze=J.l3_enc[ce],nt=J.l3_enc[ce+1];if(Ze!=0&&(J.xr[ce]<0&&je++,Ne--),z>15){if(Ze>14){var st=Ze-15;i(st<=de.linmax),je|=st<<1,Me=Fe,Ze=15}if(nt>14){var At=nt-15;i(At<=de.linmax),je<<=Fe,je|=At,Me+=Fe,nt=15}Ge=16}nt!=0&&(je<<=1,J.xr[ce+1]<0&&je++,Ne--),Ze=Ze*Ge+nt,Me-=Ne,Ne+=de.hlen[Ze],w(X,de.table[Ze],Ne),w(X,je,Me),Te+=Ne+Me}return Te}function V(X,z){var H=3*X.scalefac_band.s[3];H>z.big_values&&(H=z.big_values);var q=B(X,z.table_select[0],0,H,z);return q+=B(X,z.table_select[1],H,z.big_values,z),q}function G(X,z){var H,q,J,de;H=z.big_values;var Te=z.region0_count+1;return i(Te<X.scalefac_band.l.length),J=X.scalefac_band.l[Te],Te+=z.region1_count+1,i(Te<X.scalefac_band.l.length),de=X.scalefac_band.l[Te],J>H&&(J=H),de>H&&(de=H),q=B(X,z.table_select[0],0,J,z),q+=B(X,z.table_select[1],J,de,z),q+=B(X,z.table_select[2],de,H,z),q}function K(X){var z,H,q,J,de=0,Te=X.internal_flags,ce=Te.l3_side;if(X.version==1)for(z=0;z<2;z++)for(H=0;H<Te.channels_out;H++){var Ne=ce.tt[z][H],Me=l.slen1_tab[Ne.scalefac_compress],Fe=l.slen2_tab[Ne.scalefac_compress];for(J=0,q=0;q<Ne.sfbdivide;q++)Ne.scalefac[q]!=-1&&(w(Te,Ne.scalefac[q],Me),J+=Me);for(;q<Ne.sfbmax;q++)Ne.scalefac[q]!=-1&&(w(Te,Ne.scalefac[q],Fe),J+=Fe);i(J==Ne.part2_length),Ne.block_type==c.SHORT_TYPE?J+=V(Te,Ne):J+=G(Te,Ne),J+=k(Te,Ne),i(J==Ne.part2_3_length+Ne.part2_length),de+=J}else for(z=0,H=0;H<Te.channels_out;H++){var Ne=ce.tt[z][H],Ge,je,Ze=0;if(i(Ne.sfb_partition_table!=null),J=0,q=0,je=0,Ne.block_type==c.SHORT_TYPE){for(;je<4;je++){var nt=Ne.sfb_partition_table[je]/3,st=Ne.slen[je];for(Ge=0;Ge<nt;Ge++,q++)w(Te,Math.max(Ne.scalefac[q*3+0],0),st),w(Te,Math.max(Ne.scalefac[q*3+1],0),st),w(Te,Math.max(Ne.scalefac[q*3+2],0),st),Ze+=3*st}J+=V(Te,Ne)}else{for(;je<4;je++){var nt=Ne.sfb_partition_table[je],st=Ne.slen[je];for(Ge=0;Ge<nt;Ge++,q++)w(Te,Math.max(Ne.scalefac[q],0),st),Ze+=st}J+=G(Te,Ne)}J+=k(Te,Ne),i(J==Ne.part2_3_length),i(Ze==Ne.part2_length),de+=Ze+J}return de}function se(){this.total=0}function ee(X,z){var H=X.internal_flags,q,J,de,Te,ce;return ce=H.w_ptr,Te=H.h_ptr-1,Te==-1&&(Te=u.MAX_HEADER_BUF-1),q=H.header[Te].write_timing-N,z.total=q,q>=0&&(J=1+Te-ce,Te<ce&&(J=1+Te-ce+u.MAX_HEADER_BUF),q-=J*8*H.sideinfo_len),de=g.getframebits(X),q+=de,z.total+=de,z.total%8!=0?z.total=1+z.total/8:z.total=z.total/8,z.total+=R+1,q<0&&t.err.println(`strange error flushing buffer ... 
`),q}this.flush_bitstream=function(X){var z=X.internal_flags,H,q,J=z.h_ptr-1;if(J==-1&&(J=u.MAX_HEADER_BUF-1),H=z.l3_side,!((q=ee(X,new se))<0)){if(M(X,q),i(z.header[J].write_timing+this.getframebits(X)==N),z.ResvSize=0,H.main_data_begin=0,z.findReplayGain){var de=b.GetTitleGain(z.rgdata);i(NEQ(de,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),z.RadioGain=Math.floor(de*10+.5)|0}z.findPeakSample&&(z.noclipGainChange=Math.ceil(Math.log10(z.PeakSample/32767)*20*10)|0,z.noclipGainChange>0&&(EQ(X.scale,1)||EQ(X.scale,0))?z.noclipScale=Math.floor(32767/z.PeakSample*100)/100:z.noclipScale=-1)}},this.add_dummy_byte=function(X,z,H){for(var q=X.internal_flags,J;H-- >0;)for(D(q,z,8),J=0;J<u.MAX_HEADER_BUF;++J)q.header[J].write_timing+=8},this.format_bitstream=function(X){var z=X.internal_flags,H;H=z.l3_side;var q=this.getframebits(X);M(X,H.resvDrain_pre),F(X,q);var J=8*z.sideinfo_len;if(J+=K(X),M(X,H.resvDrain_post),J+=H.resvDrain_post,H.main_data_begin+=(q-J)/8,ee(X,new se)!=z.ResvSize&&t.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),H.main_data_begin*8!=z.ResvSize&&(t.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*H.main_data_begin,z.ResvSize,H.resvDrain_post,H.resvDrain_pre,8*z.sideinfo_len,J-H.resvDrain_post-8*z.sideinfo_len,J,J%8,q),t.err.println("This is a fatal error.  It has several possible causes:"),t.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),t.err.println(" 9%%  Your system is overclocked"),t.err.println(" 1%%  bug in LAME encoding library"),z.ResvSize=H.main_data_begin*8),N>1e9){var de;for(de=0;de<u.MAX_HEADER_BUF;++de)z.header[de].write_timing-=N;N=0}return 0},this.copy_buffer=function(X,z,H,q,J){var de=R+1;if(de<=0)return 0;if(q!=0&&de>q)return-1;if(t.arraycopy(_,0,z,H,de),R=-1,O=0,J!=0){var Te=o(1);if(Te[0]=X.nMusicCRC,T.updateMusicCRC(Te,z,H,de),X.nMusicCRC=Te[0],de>0&&(X.VBR_seek_table.nBytesWritten+=de),X.decode_on_the_fly){for(var ce=a([2,1152]),Ne=de,Me=-1,Fe;Me!=0;)if(Me=A.hip_decode1_unclipped(X.hip,z,H,Ne,ce[0],ce[1]),Ne=0,Me==-1&&(Me=0),Me>0){if(X.findPeakSample){for(Fe=0;Fe<Me;Fe++)ce[0][Fe]>X.PeakSample?X.PeakSample=ce[0][Fe]:-ce[0][Fe]>X.PeakSample&&(X.PeakSample=-ce[0][Fe]);if(X.channels_out>1)for(Fe=0;Fe<Me;Fe++)ce[1][Fe]>X.PeakSample?X.PeakSample=ce[1][Fe]:-ce[1][Fe]>X.PeakSample&&(X.PeakSample=-ce[1][Fe])}if(X.findReplayGain&&b.AnalyzeSamples(X.rgdata,ce[0],0,ce[1],0,Me,X.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return de},this.init_bit_stream_w=function(X){_=s(h.LAME_MAXMP3BUFFER),X.h_ptr=X.w_ptr=0,X.header[X.h_ptr].write_timing=0,R=-1,O=0,N=0}}return sf=d,sf}var af,yT;function ov(){if(yT)return af;yT=1;var e=jn,t=e.System,n=e.VbrMode,s=e.ShortBlock,a=e.new_float,o=e.new_int_n,i=e.new_short_n,l=e.assert,r=kNe,c=FNe,u=Xp,d=uOe,h=pOe,g=EOe,f=av(),b=sv,A=Zs();function v(){var T=_u,_=this,N=128*1024;v.V9=410,v.V8=420,v.V7=430,v.V6=440,v.V5=450,v.V4=460,v.V3=470,v.V2=480,v.V1=490,v.V0=500,v.R3MIX=1e3,v.STANDARD=1001,v.EXTREME=1002,v.INSANE=1003,v.STANDARD_FAST=1004,v.EXTREME_FAST=1005,v.MEDIUM=1006,v.MEDIUM_FAST=1007;var R=16384+N;v.LAME_MAXMP3BUFFER=R;var O,x,w,D,M,P=new r,U,F,k;this.enc=new A,this.setModules=function(Z,ie,le,ve,ge,Ie,Be,ye,$e){O=Z,x=ie,w=le,D=ve,M=ge,U=Ie,F=ye,k=$e,this.enc.setModules(x,P,D,U)};function B(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=a(A.SBMAX_l),this.bo_s_weight=a(A.SBMAX_s)}function V(){this.lowerlimit=0}function G(Z,ie){this.lowpass=ie}var K=4294479419;function se(Z){var ie;return Z.class_id=K,ie=Z.internal_flags=new u,Z.mode=T.NOT_SET,Z.original=1,Z.in_samplerate=44100,Z.num_channels=2,Z.num_samples=-1,Z.bWriteVbrTag=!0,Z.quality=-1,Z.short_blocks=null,ie.subblock_gain=-1,Z.lowpassfreq=0,Z.highpassfreq=0,Z.lowpasswidth=-1,Z.highpasswidth=-1,Z.VBR=n.vbr_off,Z.VBR_q=4,Z.ATHcurve=-1,Z.VBR_mean_bitrate_kbps=128,Z.VBR_min_bitrate_kbps=0,Z.VBR_max_bitrate_kbps=0,Z.VBR_hard_min=0,ie.VBR_min_bitrate=1,ie.VBR_max_bitrate=13,Z.quant_comp=-1,Z.quant_comp_short=-1,Z.msfix=-1,ie.resample_ratio=1,ie.OldValue[0]=180,ie.OldValue[1]=180,ie.CurrentStep[0]=4,ie.CurrentStep[1]=4,ie.masking_lower=1,ie.nsPsy.attackthre=-1,ie.nsPsy.attackthre_s=-1,Z.scale=-1,Z.athaa_type=-1,Z.ATHtype=-1,Z.athaa_loudapprox=-1,Z.athaa_sensitivity=0,Z.useTemporal=null,Z.interChRatio=-1,ie.mf_samples_to_encode=A.ENCDELAY+A.POSTDELAY,Z.encoder_padding=0,ie.mf_size=A.ENCDELAY-A.MDCTDELAY,Z.findReplayGain=!1,Z.decode_on_the_fly=!1,ie.decode_on_the_fly=!1,ie.findReplayGain=!1,ie.findPeakSample=!1,ie.RadioGain=0,ie.AudiophileGain=0,ie.noclipGainChange=0,ie.noclipScale=-1,Z.preset=0,Z.write_id3tag_automatic=!0,0}this.lame_init=function(){var Z=new c;return se(Z),Z.lame_allocated_gfp=1,Z};function ee(Z){return Z>1?0:Z<=0?1:Math.cos(Math.PI/2*Z)}this.nearestBitrateFullIndex=function(Z){var ie=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],le=0,ve=0,ge=0,Ie=0;Ie=ie[16],ge=16,ve=ie[16],le=16;for(var Be=0;Be<16;Be++)if(Math.max(Z,ie[Be+1])!=Z){Ie=ie[Be+1],ge=Be+1,ve=ie[Be],le=Be;break}return Ie-Z>Z-ve?le:ge};function X(Z,ie){var le=44100;return ie>=48e3?le=48e3:ie>=44100?le=44100:ie>=32e3?le=32e3:ie>=24e3?le=24e3:ie>=22050?le=22050:ie>=16e3?le=16e3:ie>=12e3?le=12e3:ie>=11025?le=11025:ie>=8e3&&(le=8e3),Z==-1?le:(Z<=15960&&(le=44100),Z<=15250&&(le=32e3),Z<=11220&&(le=24e3),Z<=9970&&(le=22050),Z<=7230&&(le=16e3),Z<=5420&&(le=12e3),Z<=4510&&(le=11025),Z<=3970&&(le=8e3),ie<le?ie>44100?48e3:ie>32e3?44100:ie>24e3?32e3:ie>22050?24e3:ie>16e3?22050:ie>12e3?16e3:ie>11025?12e3:ie>8e3?11025:8e3:le)}function z(Z,ie){switch(Z){case 44100:return ie.version=1,0;case 48e3:return ie.version=1,1;case 32e3:return ie.version=1,2;case 22050:return ie.version=0,0;case 24e3:return ie.version=0,1;case 16e3:return ie.version=0,2;case 11025:return ie.version=0,0;case 12e3:return ie.version=0,1;case 8e3:return ie.version=0,2;default:return ie.version=0,-1}}function H(Z,ie,le){le<16e3&&(ie=2);for(var ve=b.bitrate_table[ie][1],ge=2;ge<=14;ge++)b.bitrate_table[ie][ge]>0&&Math.abs(b.bitrate_table[ie][ge]-Z)<Math.abs(ve-Z)&&(ve=b.bitrate_table[ie][ge]);return ve}function q(Z,ie,le){le<16e3&&(ie=2);for(var ve=0;ve<=14;ve++)if(b.bitrate_table[ie][ve]>0&&b.bitrate_table[ie][ve]==Z)return ve;return-1}function J(Z,ie){var le=[new G(8,2e3),new G(16,3700),new G(24,3900),new G(32,5500),new G(40,7e3),new G(48,7500),new G(56,1e4),new G(64,11e3),new G(80,13500),new G(96,15100),new G(112,15600),new G(128,17e3),new G(160,17500),new G(192,18600),new G(224,19400),new G(256,19700),new G(320,20500)],ve=_.nearestBitrateFullIndex(ie);Z.lowerlimit=le[ve].lowpass}function de(Z){var ie=Z.internal_flags,le=32,ve=-1;if(ie.lowpass1>0){for(var ge=999,Ie=0;Ie<=31;Ie++){var Be=Ie/31;Be>=ie.lowpass2&&(le=Math.min(le,Ie)),ie.lowpass1<Be&&Be<ie.lowpass2&&(ge=Math.min(ge,Ie))}ge==999?ie.lowpass1=(le-.75)/31:ie.lowpass1=(ge-.75)/31,ie.lowpass2=le/31}if(ie.highpass2>0&&ie.highpass2<.9*(.75/31)&&(ie.highpass1=0,ie.highpass2=0,t.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),ie.highpass2>0){for(var ye=-1,Ie=0;Ie<=31;Ie++){var Be=Ie/31;Be<=ie.highpass1&&(ve=Math.max(ve,Ie)),ie.highpass1<Be&&Be<ie.highpass2&&(ye=Math.max(ye,Ie))}ie.highpass1=ve/31,ye==-1?ie.highpass2=(ve+.75)/31:ie.highpass2=(ye+.75)/31}for(var Ie=0;Ie<32;Ie++){var $e,Pe,Be=Ie/31;ie.highpass2>ie.highpass1?$e=ee((ie.highpass2-Be)/(ie.highpass2-ie.highpass1+1e-20)):$e=1,ie.lowpass2>ie.lowpass1?Pe=ee((Be-ie.lowpass1)/(ie.lowpass2-ie.lowpass1+1e-20)):Pe=1,ie.amp_filter[Ie]=$e*Pe}}function Te(Z){var ie=Z.internal_flags;switch(Z.quality){default:case 9:ie.psymodel=0,ie.noise_shaping=0,ie.noise_shaping_amp=0,ie.noise_shaping_stop=0,ie.use_best_huffman=0,ie.full_outer_loop=0;break;case 8:Z.quality=7;case 7:ie.psymodel=1,ie.noise_shaping=0,ie.noise_shaping_amp=0,ie.noise_shaping_stop=0,ie.use_best_huffman=0,ie.full_outer_loop=0;break;case 6:ie.psymodel=1,ie.noise_shaping==0&&(ie.noise_shaping=1),ie.noise_shaping_amp=0,ie.noise_shaping_stop=0,ie.subblock_gain==-1&&(ie.subblock_gain=1),ie.use_best_huffman=0,ie.full_outer_loop=0;break;case 5:ie.psymodel=1,ie.noise_shaping==0&&(ie.noise_shaping=1),ie.noise_shaping_amp=0,ie.noise_shaping_stop=0,ie.subblock_gain==-1&&(ie.subblock_gain=1),ie.use_best_huffman=0,ie.full_outer_loop=0;break;case 4:ie.psymodel=1,ie.noise_shaping==0&&(ie.noise_shaping=1),ie.noise_shaping_amp=0,ie.noise_shaping_stop=0,ie.subblock_gain==-1&&(ie.subblock_gain=1),ie.use_best_huffman=1,ie.full_outer_loop=0;break;case 3:ie.psymodel=1,ie.noise_shaping==0&&(ie.noise_shaping=1),ie.noise_shaping_amp=1,ie.noise_shaping_stop=1,ie.subblock_gain==-1&&(ie.subblock_gain=1),ie.use_best_huffman=1,ie.full_outer_loop=0;break;case 2:ie.psymodel=1,ie.noise_shaping==0&&(ie.noise_shaping=1),ie.substep_shaping==0&&(ie.substep_shaping=2),ie.noise_shaping_amp=1,ie.noise_shaping_stop=1,ie.subblock_gain==-1&&(ie.subblock_gain=1),ie.use_best_huffman=1,ie.full_outer_loop=0;break;case 1:ie.psymodel=1,ie.noise_shaping==0&&(ie.noise_shaping=1),ie.substep_shaping==0&&(ie.substep_shaping=2),ie.noise_shaping_amp=2,ie.noise_shaping_stop=1,ie.subblock_gain==-1&&(ie.subblock_gain=1),ie.use_best_huffman=1,ie.full_outer_loop=0;break;case 0:ie.psymodel=1,ie.noise_shaping==0&&(ie.noise_shaping=1),ie.substep_shaping==0&&(ie.substep_shaping=2),ie.noise_shaping_amp=2,ie.noise_shaping_stop=1,ie.subblock_gain==-1&&(ie.subblock_gain=1),ie.use_best_huffman=1,ie.full_outer_loop=0;break}}function ce(Z){var ie=Z.internal_flags;Z.frameNum=0,Z.write_id3tag_automatic&&F.id3tag_write_v2(Z),ie.bitrate_stereoMode_Hist=o([16,5]),ie.bitrate_blockType_Hist=o([16,6]),ie.PeakSample=0,Z.bWriteVbrTag&&U.InitVbrTag(Z)}this.lame_init_params=function(Z){var ie=Z.internal_flags;if(ie.Class_ID=0,ie.ATH==null&&(ie.ATH=new d),ie.PSY==null&&(ie.PSY=new B),ie.rgdata==null&&(ie.rgdata=new h),ie.channels_in=Z.num_channels,ie.channels_in==1&&(Z.mode=T.MONO),ie.channels_out=Z.mode==T.MONO?1:2,ie.mode_ext=A.MPG_MD_MS_LR,Z.mode==T.MONO&&(Z.force_ms=!1),Z.VBR==n.vbr_off&&Z.VBR_mean_bitrate_kbps!=128&&Z.brate==0&&(Z.brate=Z.VBR_mean_bitrate_kbps),Z.VBR==n.vbr_off||Z.VBR==n.vbr_mtrh||Z.VBR==n.vbr_mt||(Z.free_format=!1),Z.VBR==n.vbr_off&&Z.brate==0&&f.EQ(Z.compression_ratio,0)&&(Z.compression_ratio=11.025),Z.VBR==n.vbr_off&&Z.compression_ratio>0&&(Z.out_samplerate==0&&(Z.out_samplerate=map2MP3Frequency(int(.97*Z.in_samplerate))),Z.brate=0|Z.out_samplerate*16*ie.channels_out/(1e3*Z.compression_ratio),ie.samplerate_index=z(Z.out_samplerate,Z),Z.free_format||(Z.brate=H(Z.brate,Z.version,Z.out_samplerate))),Z.out_samplerate!=0&&(Z.out_samplerate<16e3?(Z.VBR_mean_bitrate_kbps=Math.max(Z.VBR_mean_bitrate_kbps,8),Z.VBR_mean_bitrate_kbps=Math.min(Z.VBR_mean_bitrate_kbps,64)):Z.out_samplerate<32e3?(Z.VBR_mean_bitrate_kbps=Math.max(Z.VBR_mean_bitrate_kbps,8),Z.VBR_mean_bitrate_kbps=Math.min(Z.VBR_mean_bitrate_kbps,160)):(Z.VBR_mean_bitrate_kbps=Math.max(Z.VBR_mean_bitrate_kbps,32),Z.VBR_mean_bitrate_kbps=Math.min(Z.VBR_mean_bitrate_kbps,320))),Z.lowpassfreq==0){var le=16e3;switch(Z.VBR){case n.vbr_off:{var ve=new V;J(ve,Z.brate),le=ve.lowerlimit;break}case n.vbr_abr:{var ve=new V;J(ve,Z.VBR_mean_bitrate_kbps),le=ve.lowerlimit;break}case n.vbr_rh:{var ge=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=Z.VBR_q&&Z.VBR_q<=9){var Ie=ge[Z.VBR_q],Be=ge[Z.VBR_q+1],ye=Z.VBR_q_frac;le=linear_int(Ie,Be,ye)}else le=19500;break}default:{var ge=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=Z.VBR_q&&Z.VBR_q<=9){var Ie=ge[Z.VBR_q],Be=ge[Z.VBR_q+1],ye=Z.VBR_q_frac;le=linear_int(Ie,Be,ye)}else le=19500}}Z.mode==T.MONO&&(Z.VBR==n.vbr_off||Z.VBR==n.vbr_abr)&&(le*=1.5),Z.lowpassfreq=le|0}if(Z.out_samplerate==0&&(2*Z.lowpassfreq>Z.in_samplerate&&(Z.lowpassfreq=Z.in_samplerate/2),Z.out_samplerate=X(Z.lowpassfreq|0,Z.in_samplerate)),Z.lowpassfreq=Math.min(20500,Z.lowpassfreq),Z.lowpassfreq=Math.min(Z.out_samplerate/2,Z.lowpassfreq),Z.VBR==n.vbr_off&&(Z.compression_ratio=Z.out_samplerate*16*ie.channels_out/(1e3*Z.brate)),Z.VBR==n.vbr_abr&&(Z.compression_ratio=Z.out_samplerate*16*ie.channels_out/(1e3*Z.VBR_mean_bitrate_kbps)),Z.bWriteVbrTag||(Z.findReplayGain=!1,Z.decode_on_the_fly=!1,ie.findPeakSample=!1),ie.findReplayGain=Z.findReplayGain,ie.decode_on_the_fly=Z.decode_on_the_fly,ie.decode_on_the_fly&&(ie.findPeakSample=!0),ie.findReplayGain&&O.InitGainAnalysis(ie.rgdata,Z.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return Z.internal_flags=null,-6;switch(ie.decode_on_the_fly&&!Z.decode_only&&(ie.hip!=null&&k.hip_decode_exit(ie.hip),ie.hip=k.hip_decode_init()),ie.mode_gr=Z.out_samplerate<=24e3?1:2,Z.framesize=576*ie.mode_gr,Z.encoder_delay=A.ENCDELAY,ie.resample_ratio=Z.in_samplerate/Z.out_samplerate,Z.VBR){case n.vbr_mt:case n.vbr_rh:case n.vbr_mtrh:{var $e=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];Z.compression_ratio=$e[Z.VBR_q]}break;case n.vbr_abr:Z.compression_ratio=Z.out_samplerate*16*ie.channels_out/(1e3*Z.VBR_mean_bitrate_kbps);break;default:Z.compression_ratio=Z.out_samplerate*16*ie.channels_out/(1e3*Z.brate);break}if(Z.mode==T.NOT_SET&&(Z.mode=T.JOINT_STEREO),Z.highpassfreq>0?(ie.highpass1=2*Z.highpassfreq,Z.highpasswidth>=0?ie.highpass2=2*(Z.highpassfreq+Z.highpasswidth):ie.highpass2=1*2*Z.highpassfreq,ie.highpass1/=Z.out_samplerate,ie.highpass2/=Z.out_samplerate):(ie.highpass1=0,ie.highpass2=0),Z.lowpassfreq>0?(ie.lowpass2=2*Z.lowpassfreq,Z.lowpasswidth>=0?(ie.lowpass1=2*(Z.lowpassfreq-Z.lowpasswidth),ie.lowpass1<0&&(ie.lowpass1=0)):ie.lowpass1=1*2*Z.lowpassfreq,ie.lowpass1/=Z.out_samplerate,ie.lowpass2/=Z.out_samplerate):(ie.lowpass1=0,ie.lowpass2=0),de(Z),ie.samplerate_index=z(Z.out_samplerate,Z),ie.samplerate_index<0)return Z.internal_flags=null,-1;if(Z.VBR==n.vbr_off){if(Z.free_format)ie.bitrate_index=0;else if(Z.brate=H(Z.brate,Z.version,Z.out_samplerate),ie.bitrate_index=q(Z.brate,Z.version,Z.out_samplerate),ie.bitrate_index<=0)return Z.internal_flags=null,-1}else ie.bitrate_index=1;Z.analysis&&(Z.bWriteVbrTag=!1),ie.pinfo!=null&&(Z.bWriteVbrTag=!1),x.init_bit_stream_w(ie);for(var Pe=ie.samplerate_index+3*Z.version+6*(Z.out_samplerate<16e3?1:0),pe=0;pe<A.SBMAX_l+1;pe++)ie.scalefac_band.l[pe]=D.sfBandIndex[Pe].l[pe];for(var pe=0;pe<A.PSFB21+1;pe++){var Oe=(ie.scalefac_band.l[22]-ie.scalefac_band.l[21])/A.PSFB21,ke=ie.scalefac_band.l[21]+pe*Oe;ie.scalefac_band.psfb21[pe]=ke}ie.scalefac_band.psfb21[A.PSFB21]=576;for(var pe=0;pe<A.SBMAX_s+1;pe++)ie.scalefac_band.s[pe]=D.sfBandIndex[Pe].s[pe];for(var pe=0;pe<A.PSFB12+1;pe++){var Oe=(ie.scalefac_band.s[13]-ie.scalefac_band.s[12])/A.PSFB12,ke=ie.scalefac_band.s[12]+pe*Oe;ie.scalefac_band.psfb12[pe]=ke}ie.scalefac_band.psfb12[A.PSFB12]=192,Z.version==1?ie.sideinfo_len=ie.channels_out==1?21:36:ie.sideinfo_len=ie.channels_out==1?13:21,Z.error_protection&&(ie.sideinfo_len+=2),ce(Z),ie.Class_ID=K;{var Q;for(Q=0;Q<19;Q++)ie.nsPsy.pefirbuf[Q]=700*ie.mode_gr*ie.channels_out;Z.ATHtype==-1&&(Z.ATHtype=4)}switch(l(Z.VBR_q<=9),l(Z.VBR_q>=0),Z.VBR){case n.vbr_mt:Z.VBR=n.vbr_mtrh;case n.vbr_mtrh:{Z.useTemporal==null&&(Z.useTemporal=!1),w.apply_preset(Z,500-Z.VBR_q*10,0),Z.quality<0&&(Z.quality=LAME_DEFAULT_QUALITY),Z.quality<5&&(Z.quality=0),Z.quality>5&&(Z.quality=5),ie.PSY.mask_adjust=Z.maskingadjust,ie.PSY.mask_adjust_short=Z.maskingadjust_short,Z.experimentalY?ie.sfb21_extra=!1:ie.sfb21_extra=Z.out_samplerate>44e3,ie.iteration_loop=new VBRNewIterationLoop(M);break}case n.vbr_rh:{w.apply_preset(Z,500-Z.VBR_q*10,0),ie.PSY.mask_adjust=Z.maskingadjust,ie.PSY.mask_adjust_short=Z.maskingadjust_short,Z.experimentalY?ie.sfb21_extra=!1:ie.sfb21_extra=Z.out_samplerate>44e3,Z.quality>6&&(Z.quality=6),Z.quality<0&&(Z.quality=LAME_DEFAULT_QUALITY),ie.iteration_loop=new VBROldIterationLoop(M);break}default:{var oe;ie.sfb21_extra=!1,Z.quality<0&&(Z.quality=LAME_DEFAULT_QUALITY),oe=Z.VBR,oe==n.vbr_off&&(Z.VBR_mean_bitrate_kbps=Z.brate),w.apply_preset(Z,Z.VBR_mean_bitrate_kbps,0),Z.VBR=oe,ie.PSY.mask_adjust=Z.maskingadjust,ie.PSY.mask_adjust_short=Z.maskingadjust_short,oe==n.vbr_off?ie.iteration_loop=new g(M):ie.iteration_loop=new ABRIterationLoop(M);break}}if(l(Z.scale>=0),Z.VBR!=n.vbr_off){if(ie.VBR_min_bitrate=1,ie.VBR_max_bitrate=14,Z.out_samplerate<16e3&&(ie.VBR_max_bitrate=8),Z.VBR_min_bitrate_kbps!=0&&(Z.VBR_min_bitrate_kbps=H(Z.VBR_min_bitrate_kbps,Z.version,Z.out_samplerate),ie.VBR_min_bitrate=q(Z.VBR_min_bitrate_kbps,Z.version,Z.out_samplerate),ie.VBR_min_bitrate<0)||Z.VBR_max_bitrate_kbps!=0&&(Z.VBR_max_bitrate_kbps=H(Z.VBR_max_bitrate_kbps,Z.version,Z.out_samplerate),ie.VBR_max_bitrate=q(Z.VBR_max_bitrate_kbps,Z.version,Z.out_samplerate),ie.VBR_max_bitrate<0))return-1;Z.VBR_min_bitrate_kbps=b.bitrate_table[Z.version][ie.VBR_min_bitrate],Z.VBR_max_bitrate_kbps=b.bitrate_table[Z.version][ie.VBR_max_bitrate],Z.VBR_mean_bitrate_kbps=Math.min(b.bitrate_table[Z.version][ie.VBR_max_bitrate],Z.VBR_mean_bitrate_kbps),Z.VBR_mean_bitrate_kbps=Math.max(b.bitrate_table[Z.version][ie.VBR_min_bitrate],Z.VBR_mean_bitrate_kbps)}return Z.tune&&(ie.PSY.mask_adjust+=Z.tune_value_a,ie.PSY.mask_adjust_short+=Z.tune_value_a),Te(Z),l(Z.scale>=0),Z.athaa_type<0?ie.ATH.useAdjust=3:ie.ATH.useAdjust=Z.athaa_type,ie.ATH.aaSensitivityP=Math.pow(10,Z.athaa_sensitivity/-10),Z.short_blocks==null&&(Z.short_blocks=s.short_block_allowed),Z.short_blocks==s.short_block_allowed&&(Z.mode==T.JOINT_STEREO||Z.mode==T.STEREO)&&(Z.short_blocks=s.short_block_coupled),Z.quant_comp<0&&(Z.quant_comp=1),Z.quant_comp_short<0&&(Z.quant_comp_short=0),Z.msfix<0&&(Z.msfix=0),Z.exp_nspsytune=Z.exp_nspsytune|1,Z.internal_flags.nsPsy.attackthre<0&&(Z.internal_flags.nsPsy.attackthre=r.NSATTACKTHRE),Z.internal_flags.nsPsy.attackthre_s<0&&(Z.internal_flags.nsPsy.attackthre_s=r.NSATTACKTHRE_S),l(Z.scale>=0),Z.scale<0&&(Z.scale=1),Z.ATHtype<0&&(Z.ATHtype=4),Z.ATHcurve<0&&(Z.ATHcurve=4),Z.athaa_loudapprox<0&&(Z.athaa_loudapprox=2),Z.interChRatio<0&&(Z.interChRatio=0),Z.useTemporal==null&&(Z.useTemporal=!0),ie.slot_lag=ie.frac_SpF=0,Z.VBR==n.vbr_off&&(ie.slot_lag=ie.frac_SpF=(Z.version+1)*72e3*Z.brate%Z.out_samplerate|0),D.iteration_init(Z),P.psymodel_init(Z),l(Z.scale>=0),0};function Ne(Z,ie){(Z.in_buffer_0==null||Z.in_buffer_nsamples<ie)&&(Z.in_buffer_0=a(ie),Z.in_buffer_1=a(ie),Z.in_buffer_nsamples=ie)}this.lame_encode_flush=function(Z,ie,le,ve){var ge=Z.internal_flags,Ie=i([2,1152]),Be=0,ye,$e,Pe,pe,Oe=ge.mf_samples_to_encode-A.POSTDELAY,ke=Me(Z);if(ge.mf_samples_to_encode<1)return 0;for(ye=0,Z.in_samplerate!=Z.out_samplerate&&(Oe+=16*Z.out_samplerate/Z.in_samplerate),Pe=Z.framesize-Oe%Z.framesize,Pe<576&&(Pe+=Z.framesize),Z.encoder_padding=Pe,pe=(Oe+Pe)/Z.framesize;pe>0&&Be>=0;){var Q=ke-ge.mf_size,oe=Z.frameNum;Q*=Z.in_samplerate,Q/=Z.out_samplerate,Q>1152&&(Q=1152),Q<1&&(Q=1),$e=ve-ye,ve==0&&($e=0),Be=this.lame_encode_buffer(Z,Ie[0],Ie[1],Q,ie,le,$e),le+=Be,ye+=Be,pe-=oe!=Z.frameNum?1:0}if(ge.mf_samples_to_encode=0,Be<0||($e=ve-ye,ve==0&&($e=0),x.flush_bitstream(Z),Be=x.copy_buffer(ge,ie,le,$e,1),Be<0))return Be;if(le+=Be,ye+=Be,$e=ve-ye,ve==0&&($e=0),Z.write_id3tag_automatic){if(F.id3tag_write_v1(Z),Be=x.copy_buffer(ge,ie,le,$e,0),Be<0)return Be;ye+=Be}return ye},this.lame_encode_buffer=function(Z,ie,le,ve,ge,Ie,Be){var ye=Z.internal_flags,$e=[null,null];if(ye.Class_ID!=K)return-3;if(ve==0)return 0;Ne(ye,ve),$e[0]=ye.in_buffer_0,$e[1]=ye.in_buffer_1;for(var Pe=0;Pe<ve;Pe++)$e[0][Pe]=ie[Pe],ye.channels_in>1&&($e[1][Pe]=le[Pe]);return Fe(Z,$e[0],$e[1],ve,ge,Ie,Be)};function Me(Z){var ie=A.BLKSIZE+Z.framesize-A.FFTOFFSET;return ie=Math.max(ie,512+Z.framesize-32),ie}function Fe(Z,ie,le,ve,ge,Ie,Be){var ye=Z.internal_flags,$e=0,Pe,pe,Oe,ke,Q,oe=[null,null],me=[null,null];if(ye.Class_ID!=K)return-3;if(ve==0)return 0;if(Q=x.copy_buffer(ye,ge,Ie,Be,0),Q<0)return Q;if(Ie+=Q,$e+=Q,me[0]=ie,me[1]=le,f.NEQ(Z.scale,0)&&f.NEQ(Z.scale,1))for(pe=0;pe<ve;++pe)me[0][pe]*=Z.scale,ye.channels_out==2&&(me[1][pe]*=Z.scale);if(f.NEQ(Z.scale_left,0)&&f.NEQ(Z.scale_left,1))for(pe=0;pe<ve;++pe)me[0][pe]*=Z.scale_left;if(f.NEQ(Z.scale_right,0)&&f.NEQ(Z.scale_right,1))for(pe=0;pe<ve;++pe)me[1][pe]*=Z.scale_right;if(Z.num_channels==2&&ye.channels_out==1)for(pe=0;pe<ve;++pe)me[0][pe]=.5*(me[0][pe]+me[1][pe]),me[1][pe]=0;ke=Me(Z),oe[0]=ye.mfbuf[0],oe[1]=ye.mfbuf[1];for(var Ee=0;ve>0;){var we=[null,null],he=0,Se=0;we[0]=me[0],we[1]=me[1];var Re=new je;if(Mt(Z,oe,we,Ee,ve,Re),he=Re.n_in,Se=Re.n_out,ye.findReplayGain&&!ye.decode_on_the_fly&&O.AnalyzeSamples(ye.rgdata,oe[0],ye.mf_size,oe[1],ye.mf_size,Se,ye.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(ve-=he,Ee+=he,ye.channels_out==2,ye.mf_size+=Se,l(ye.mf_size<=u.MFSIZE),ye.mf_samples_to_encode<1&&(ye.mf_samples_to_encode=A.ENCDELAY+A.POSTDELAY),ye.mf_samples_to_encode+=Se,ye.mf_size>=ke){var Ce=Be-$e;if(Be==0&&(Ce=0),Pe=Ge(Z,oe[0],oe[1],ge,Ie,Ce),Pe<0)return Pe;for(Ie+=Pe,$e+=Pe,ye.mf_size-=Z.framesize,ye.mf_samples_to_encode-=Z.framesize,Oe=0;Oe<ye.channels_out;Oe++)for(pe=0;pe<ye.mf_size;pe++)oe[Oe][pe]=oe[Oe][pe+Z.framesize]}}return $e}function Ge(Z,ie,le,ve,ge,Ie){var Be=_.enc.lame_encode_mp3_frame(Z,ie,le,ve,ge,Ie);return Z.frameNum++,Be}function je(){this.n_in=0,this.n_out=0}function Ze(){this.num_used=0}function nt(Z,ie){return ie!=0?nt(ie,Z%ie):Z}function st(Z,ie,le){var ve=Math.PI*ie;Z/=le,Z<0&&(Z=0),Z>1&&(Z=1);var ge=Z-.5,Ie=.42-.5*Math.cos(2*Z*Math.PI)+.08*Math.cos(4*Z*Math.PI);return Math.abs(ge)<1e-9?ve/Math.PI:Ie*Math.sin(le*ve*ge)/(Math.PI*le*ge)}function At(Z,ie,le,ve,ge,Ie,Be,ye,$e){var Pe=Z.internal_flags,pe,Oe=0,ke,Q=Z.out_samplerate/nt(Z.out_samplerate,Z.in_samplerate);Q>u.BPC&&(Q=u.BPC);var oe=Math.abs(Pe.resample_ratio-Math.floor(.5+Pe.resample_ratio))<1e-4?1:0,me=1/Pe.resample_ratio;me>1&&(me=1);var Ee=31;Ee%2==0&&--Ee,Ee+=oe;var we=Ee+1;if(Pe.fill_buffer_resample_init==0){for(Pe.inbuf_old[0]=a(we),Pe.inbuf_old[1]=a(we),pe=0;pe<=2*Q;++pe)Pe.blackfilt[pe]=a(we);for(Pe.itime[0]=0,Pe.itime[1]=0,Oe=0;Oe<=2*Q;Oe++){var he=0,Se=(Oe-Q)/(2*Q);for(pe=0;pe<=Ee;pe++)he+=Pe.blackfilt[Oe][pe]=st(pe-Se,me,Ee);for(pe=0;pe<=Ee;pe++)Pe.blackfilt[Oe][pe]/=he}Pe.fill_buffer_resample_init=1}var Re=Pe.inbuf_old[$e];for(ke=0;ke<ve;ke++){var Ce,Ue;if(Ce=ke*Pe.resample_ratio,Oe=0|Math.floor(Ce-Pe.itime[$e]),Ee+Oe-Ee/2>=Be)break;var Se=Ce-Pe.itime[$e]-(Oe+.5*(Ee%2));Ue=0|Math.floor(Se*2*Q+Q+.5);var Le=0;for(pe=0;pe<=Ee;++pe){var He=0|pe+Oe-Ee/2,ct;ct=He<0?Re[we+He]:ge[Ie+He],Le+=ct*Pe.blackfilt[Ue][pe]}ie[le+ke]=Le}if(ye.num_used=Math.min(Be,Ee+Oe-Ee/2),Pe.itime[$e]+=ye.num_used-ke*Pe.resample_ratio,ye.num_used>=we)for(pe=0;pe<we;pe++)Re[pe]=ge[Ie+ye.num_used+pe-we];else{var Ct=we-ye.num_used;for(pe=0;pe<Ct;++pe)Re[pe]=Re[pe+ye.num_used];for(Oe=0;pe<we;++pe,++Oe)Re[pe]=ge[Ie+Oe];l(Oe==ye.num_used)}return ke}function Mt(Z,ie,le,ve,ge,Ie){var Be=Z.internal_flags;if(Be.resample_ratio<.9999||Be.resample_ratio>1.0001)for(var ye=0;ye<Be.channels_out;ye++){var $e=new Ze;Ie.n_out=At(Z,ie[ye],Be.mf_size,Z.framesize,le[ye],ve,ge,$e,ye),Ie.n_in=$e.num_used}else{Ie.n_out=Math.min(Z.framesize,ge),Ie.n_in=Ie.n_out;for(var Pe=0;Pe<Ie.n_out;++Pe)ie[0][Be.mf_size+Pe]=le[0][ve+Pe],Be.channels_out==2&&(ie[1][Be.mf_size+Pe]=le[1][ve+Pe])}}}return af=v,af}var bOe=jn,bo=bOe.VbrMode;function TOe(){var e=ov();function t(u,d,h,g,f,b,A,v,T,_,N,R,O,x,w){this.vbr_q=u,this.quant_comp=d,this.quant_comp_s=h,this.expY=g,this.st_lrm=f,this.st_s=b,this.masking_adj=A,this.masking_adj_short=v,this.ath_lower=T,this.ath_curve=_,this.ath_sensitivity=N,this.interch=R,this.safejoint=O,this.sfb21mod=x,this.msfix=w}function n(u,d,h,g,f,b,A,v,T,_,N,R,O,x){this.quant_comp=d,this.quant_comp_s=h,this.safejoint=g,this.nsmsfix=f,this.st_lrm=b,this.st_s=A,this.nsbass=v,this.scale=T,this.masking_adj=_,this.ath_lower=N,this.ath_curve=R,this.interch=O,this.sfscale=x}var s;this.setModules=function(u){s=u};var a=[new t(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new t(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new t(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new t(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new t(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new t(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new t(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new t(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new t(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new t(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new t(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],o=[new t(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new t(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new t(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new t(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new t(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new t(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new t(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new t(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new t(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new t(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new t(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function i(u,d,h){var g=u.VBR==bo.vbr_rh?a:o,f=u.VBR_q_frac,b=g[d],A=g[d+1],v=b;b.st_lrm=b.st_lrm+f*(A.st_lrm-b.st_lrm),b.st_s=b.st_s+f*(A.st_s-b.st_s),b.masking_adj=b.masking_adj+f*(A.masking_adj-b.masking_adj),b.masking_adj_short=b.masking_adj_short+f*(A.masking_adj_short-b.masking_adj_short),b.ath_lower=b.ath_lower+f*(A.ath_lower-b.ath_lower),b.ath_curve=b.ath_curve+f*(A.ath_curve-b.ath_curve),b.ath_sensitivity=b.ath_sensitivity+f*(A.ath_sensitivity-b.ath_sensitivity),b.interch=b.interch+f*(A.interch-b.interch),b.msfix=b.msfix+f*(A.msfix-b.msfix),c(u,v.vbr_q),h!=0?u.quant_comp=v.quant_comp:Math.abs(u.quant_comp- -1)>0||(u.quant_comp=v.quant_comp),h!=0?u.quant_comp_short=v.quant_comp_s:Math.abs(u.quant_comp_short- -1)>0||(u.quant_comp_short=v.quant_comp_s),v.expY!=0&&(u.experimentalY=v.expY!=0),h!=0?u.internal_flags.nsPsy.attackthre=v.st_lrm:Math.abs(u.internal_flags.nsPsy.attackthre- -1)>0||(u.internal_flags.nsPsy.attackthre=v.st_lrm),h!=0?u.internal_flags.nsPsy.attackthre_s=v.st_s:Math.abs(u.internal_flags.nsPsy.attackthre_s- -1)>0||(u.internal_flags.nsPsy.attackthre_s=v.st_s),h!=0?u.maskingadjust=v.masking_adj:Math.abs(u.maskingadjust-0)>0||(u.maskingadjust=v.masking_adj),h!=0?u.maskingadjust_short=v.masking_adj_short:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=v.masking_adj_short),h!=0?u.ATHlower=-v.ath_lower/10:Math.abs(-u.ATHlower*10-0)>0||(u.ATHlower=-v.ath_lower/10),h!=0?u.ATHcurve=v.ath_curve:Math.abs(u.ATHcurve- -1)>0||(u.ATHcurve=v.ath_curve),h!=0?u.athaa_sensitivity=v.ath_sensitivity:Math.abs(u.athaa_sensitivity- -1)>0||(u.athaa_sensitivity=v.ath_sensitivity),v.interch>0&&(h!=0?u.interChRatio=v.interch:Math.abs(u.interChRatio- -1)>0||(u.interChRatio=v.interch)),v.safejoint>0&&(u.exp_nspsytune=u.exp_nspsytune|v.safejoint),v.sfb21mod>0&&(u.exp_nspsytune=u.exp_nspsytune|v.sfb21mod<<20),h!=0?u.msfix=v.msfix:Math.abs(u.msfix- -1)>0||(u.msfix=v.msfix),h==0&&(u.VBR_q=d,u.VBR_q_frac=f)}var l=[new n(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new n(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new n(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new n(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new n(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new n(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new n(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new n(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new n(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new n(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new n(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new n(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new n(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new n(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new n(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new n(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new n(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function r(u,d,h){var g=d,f=s.nearestBitrateFullIndex(d);if(u.VBR=bo.vbr_abr,u.VBR_mean_bitrate_kbps=g,u.VBR_mean_bitrate_kbps=Math.min(u.VBR_mean_bitrate_kbps,320),u.VBR_mean_bitrate_kbps=Math.max(u.VBR_mean_bitrate_kbps,8),u.brate=u.VBR_mean_bitrate_kbps,u.VBR_mean_bitrate_kbps>320&&(u.disable_reservoir=!0),l[f].safejoint>0&&(u.exp_nspsytune=u.exp_nspsytune|2),l[f].sfscale>0&&(u.internal_flags.noise_shaping=2),Math.abs(l[f].nsbass)>0){var b=int(l[f].nsbass*4);b<0&&(b+=64),u.exp_nspsytune=u.exp_nspsytune|b<<2}return h!=0?u.quant_comp=l[f].quant_comp:Math.abs(u.quant_comp- -1)>0||(u.quant_comp=l[f].quant_comp),h!=0?u.quant_comp_short=l[f].quant_comp_s:Math.abs(u.quant_comp_short- -1)>0||(u.quant_comp_short=l[f].quant_comp_s),h!=0?u.msfix=l[f].nsmsfix:Math.abs(u.msfix- -1)>0||(u.msfix=l[f].nsmsfix),h!=0?u.internal_flags.nsPsy.attackthre=l[f].st_lrm:Math.abs(u.internal_flags.nsPsy.attackthre- -1)>0||(u.internal_flags.nsPsy.attackthre=l[f].st_lrm),h!=0?u.internal_flags.nsPsy.attackthre_s=l[f].st_s:Math.abs(u.internal_flags.nsPsy.attackthre_s- -1)>0||(u.internal_flags.nsPsy.attackthre_s=l[f].st_s),h!=0?u.scale=l[f].scale:Math.abs(u.scale- -1)>0||(u.scale=l[f].scale),h!=0?u.maskingadjust=l[f].masking_adj:Math.abs(u.maskingadjust-0)>0||(u.maskingadjust=l[f].masking_adj),l[f].masking_adj>0?h!=0?u.maskingadjust_short=l[f].masking_adj*.9:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=l[f].masking_adj*.9):h!=0?u.maskingadjust_short=l[f].masking_adj*1.1:Math.abs(u.maskingadjust_short-0)>0||(u.maskingadjust_short=l[f].masking_adj*1.1),h!=0?u.ATHlower=-l[f].ath_lower/10:Math.abs(-u.ATHlower*10-0)>0||(u.ATHlower=-l[f].ath_lower/10),h!=0?u.ATHcurve=l[f].ath_curve:Math.abs(u.ATHcurve- -1)>0||(u.ATHcurve=l[f].ath_curve),h!=0?u.interChRatio=l[f].interch:Math.abs(u.interChRatio- -1)>0||(u.interChRatio=l[f].interch),d}this.apply_preset=function(u,d,h){switch(d){case e.R3MIX:{d=e.V3,u.VBR=bo.vbr_mtrh;break}case e.MEDIUM:{d=e.V4,u.VBR=bo.vbr_rh;break}case e.MEDIUM_FAST:{d=e.V4,u.VBR=bo.vbr_mtrh;break}case e.STANDARD:{d=e.V2,u.VBR=bo.vbr_rh;break}case e.STANDARD_FAST:{d=e.V2,u.VBR=bo.vbr_mtrh;break}case e.EXTREME:{d=e.V0,u.VBR=bo.vbr_rh;break}case e.EXTREME_FAST:{d=e.V0,u.VBR=bo.vbr_mtrh;break}case e.INSANE:return d=320,u.preset=d,r(u,d,h),u.VBR=bo.vbr_off,d}switch(u.preset=d,d){case e.V9:return i(u,9,h),d;case e.V8:return i(u,8,h),d;case e.V7:return i(u,7,h),d;case e.V6:return i(u,6,h),d;case e.V5:return i(u,5,h),d;case e.V4:return i(u,4,h),d;case e.V3:return i(u,3,h),d;case e.V2:return i(u,2,h),d;case e.V1:return i(u,1,h),d;case e.V0:return i(u,0,h),d}return 8<=d&&d<=320?r(u,d,h):(u.preset=0,d)};function c(u,d){var h=0;return 0>d&&(h=-1,d=0),9<d&&(h=-1,d=9),u.VBR_q=d,u.VBR_q_frac=0,h}}var SOe=TOe;function AOe(){this.setModules=function(e,t){}}var yOe=AOe;function IOe(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var COe=IOe,oC=jn,IT=oC.new_float,NOe=oC.new_int;function OOe(){this.global_gain=0,this.sfb_count1=0,this.step=NOe(39),this.noise=IT(39),this.noise_log=IT(39)}var ROe=OOe,Dr=jn,pi=Dr.System,CT=Dr.VbrMode,of=Dr.Util,Hl=Dr.Arrays,sc=Dr.new_float,ac=Dr.assert,xOe=yOe,lf=COe,wOe=ROe,fn=Zs(),NT=ev,OT=Kp;function $Oe(){var e;this.rv=null;var t;this.qupvt=null;var n,s=new xOe,a;this.setModules=function(v,T,_,N){e=v,t=T,this.rv=T,n=_,this.qupvt=_,a=N,s.setModules(n,a)},this.ms_convert=function(v,T){for(var _=0;_<576;++_){var N=v.tt[T][0].xr[_],R=v.tt[T][1].xr[_];v.tt[T][0].xr[_]=(N+R)*(of.SQRT2*.5),v.tt[T][1].xr[_]=(N-R)*(of.SQRT2*.5)}};function o(v,T,_,N){N=0;for(var R=0;R<=_;++R){var O=Math.abs(v.xr[R]);N+=O,T[R]=Math.sqrt(O*Math.sqrt(O)),T[R]>v.xrpow_max&&(v.xrpow_max=T[R])}return N}this.init_xrpow=function(v,T,_){var N=0,R=0|T.max_nonzero_coeff;if(T.xrpow_max=0,Hl.fill(_,R,576,0),N=o(T,_,R,N),N>1e-20){var O=0;v.substep_shaping&2&&(O=1);for(var x=0;x<T.psymax;x++)v.pseudohalf[x]=O;return!0}return Hl.fill(T.l3_enc,0,576,0),!1};function i(v,T){var _=v.ATH,N=T.xr;if(T.block_type!=fn.SHORT_TYPE)for(var R=!1,O=fn.PSFB21-1;O>=0&&!R;O--){var x=v.scalefac_band.psfb21[O],w=v.scalefac_band.psfb21[O+1],D=n.athAdjust(_.adjust,_.psfb21[O],_.floor);v.nsPsy.longfact[21]>1e-12&&(D*=v.nsPsy.longfact[21]);for(var M=w-1;M>=x;M--)if(Math.abs(N[M])<D)N[M]=0;else{R=!0;break}}else for(var P=0;P<3;P++)for(var R=!1,O=fn.PSFB12-1;O>=0&&!R;O--){var x=v.scalefac_band.s[12]*3+(v.scalefac_band.s[13]-v.scalefac_band.s[12])*P+(v.scalefac_band.psfb12[O]-v.scalefac_band.psfb12[0]),w=x+(v.scalefac_band.psfb12[O+1]-v.scalefac_band.psfb12[O]),U=n.athAdjust(_.adjust,_.psfb12[O],_.floor);v.nsPsy.shortfact[12]>1e-12&&(U*=v.nsPsy.shortfact[12]);for(var M=w-1;M>=x;M--)if(Math.abs(N[M])<U)N[M]=0;else{R=!0;break}}}this.init_outer_loop=function(v,T){T.part2_3_length=0,T.big_values=0,T.count1=0,T.global_gain=210,T.scalefac_compress=0,T.table_select[0]=0,T.table_select[1]=0,T.table_select[2]=0,T.subblock_gain[0]=0,T.subblock_gain[1]=0,T.subblock_gain[2]=0,T.subblock_gain[3]=0,T.region0_count=0,T.region1_count=0,T.preflag=0,T.scalefac_scale=0,T.count1table_select=0,T.part2_length=0,T.sfb_lmax=fn.SBPSY_l,T.sfb_smin=fn.SBPSY_s,T.psy_lmax=v.sfb21_extra?fn.SBMAX_l:fn.SBPSY_l,T.psymax=T.psy_lmax,T.sfbmax=T.sfb_lmax,T.sfbdivide=11;for(var _=0;_<fn.SBMAX_l;_++)T.width[_]=v.scalefac_band.l[_+1]-v.scalefac_band.l[_],T.window[_]=3;if(T.block_type==fn.SHORT_TYPE){var N=sc(576);T.sfb_smin=0,T.sfb_lmax=0,T.mixed_block_flag!=0&&(T.sfb_smin=3,T.sfb_lmax=v.mode_gr*2+4),T.psymax=T.sfb_lmax+3*((v.sfb21_extra?fn.SBMAX_s:fn.SBPSY_s)-T.sfb_smin),T.sfbmax=T.sfb_lmax+3*(fn.SBPSY_s-T.sfb_smin),T.sfbdivide=T.sfbmax-18,T.psy_lmax=T.sfb_lmax;var R=v.scalefac_band.l[T.sfb_lmax];pi.arraycopy(T.xr,0,N,0,576);for(var _=T.sfb_smin;_<fn.SBMAX_s;_++)for(var O=v.scalefac_band.s[_],x=v.scalefac_band.s[_+1],w=0;w<3;w++)for(var D=O;D<x;D++)T.xr[R++]=N[3*D+w];for(var M=T.sfb_lmax,_=T.sfb_smin;_<fn.SBMAX_s;_++)T.width[M]=T.width[M+1]=T.width[M+2]=v.scalefac_band.s[_+1]-v.scalefac_band.s[_],T.window[M]=0,T.window[M+1]=1,T.window[M+2]=2,M+=3}T.count1bits=0,T.sfb_partition_table=n.nr_of_sfb_block[0][0],T.slen[0]=0,T.slen[1]=0,T.slen[2]=0,T.slen[3]=0,T.max_nonzero_coeff=575,Hl.fill(T.scalefac,0),i(v,T)};function l(v){this.ordinal=v}l.BINSEARCH_NONE=new l(0),l.BINSEARCH_UP=new l(1),l.BINSEARCH_DOWN=new l(2);function r(v,T,_,N,R){var O,x=v.CurrentStep[N],w=!1,D=v.OldValue[N],M=l.BINSEARCH_NONE;for(T.global_gain=D,_-=T.part2_length;;){var P;if(O=a.count_bits(v,R,T,null),x==1||O==_)break;O>_?(M==l.BINSEARCH_DOWN&&(w=!0),w&&(x/=2),M=l.BINSEARCH_UP,P=x):(M==l.BINSEARCH_UP&&(w=!0),w&&(x/=2),M=l.BINSEARCH_DOWN,P=-x),T.global_gain+=P,T.global_gain<0&&(T.global_gain=0,w=!0),T.global_gain>255&&(T.global_gain=255,w=!0)}for(ac(T.global_gain>=0),ac(T.global_gain<256);O>_&&T.global_gain<255;)T.global_gain++,O=a.count_bits(v,R,T,null);return v.CurrentStep[N]=D-T.global_gain>=4?4:2,v.OldValue[N]=T.global_gain,T.part2_3_length=O,O}this.trancate_smallspectrums=function(v,T,_,N){var R=sc(OT.SFBMAX);if(!(!(v.substep_shaping&4)&&T.block_type==fn.SHORT_TYPE||v.substep_shaping&128)){n.calc_noise(T,_,R,new lf,null);for(var x=0;x<576;x++){var O=0;T.l3_enc[x]!=0&&(O=Math.abs(T.xr[x])),N[x]=O}var x=0,w=8;T.block_type==fn.SHORT_TYPE&&(w=6);do{var D,M,P,U,F=T.width[w];if(x+=F,!(R[w]>=1)&&(Hl.sort(N,x-F,F),!BitStream.EQ(N[x-1],0))){D=(1-R[w])*_[w],M=0,U=0;do{var k;for(P=1;U+P<F&&!BitStream.NEQ(N[U+x-F],N[U+x+P-F]);P++);if(k=N[U+x-F]*N[U+x-F]*P,D<k){U!=0&&(M=N[U+x-F-1]);break}D-=k,U+=P}while(U<F);if(!BitStream.EQ(M,0))do Math.abs(T.xr[x-F])<=M&&(T.l3_enc[x-F]=0);while(--F>0)}}while(++w<T.psymax);T.part2_3_length=a.noquant_count_bits(v,T,null)}};function c(v){for(var T=0;T<v.sfbmax;T++)if(v.scalefac[T]+v.subblock_gain[v.window[T]]==0)return!1;return!0}function u(v){return of.FAST_LOG10(.368+.632*v*v*v)}function d(v,T){for(var _=1e-37,N=0;N<T.psymax;N++)_+=u(v[N]);return Math.max(1e-20,_)}function h(v,T,_,N,R){var O;switch(v){default:case 9:{T.over_count>0?(O=_.over_SSD<=T.over_SSD,_.over_SSD==T.over_SSD&&(O=_.bits<T.bits)):O=_.max_noise<0&&_.max_noise*10+_.bits<=T.max_noise*10+T.bits;break}case 0:O=_.over_count<T.over_count||_.over_count==T.over_count&&_.over_noise<T.over_noise||_.over_count==T.over_count&&BitStream.EQ(_.over_noise,T.over_noise)&&_.tot_noise<T.tot_noise;break;case 8:_.max_noise=d(R,N);case 1:O=_.max_noise<T.max_noise;break;case 2:O=_.tot_noise<T.tot_noise;break;case 3:O=_.tot_noise<T.tot_noise&&_.max_noise<T.max_noise;break;case 4:O=_.max_noise<=0&&T.max_noise>.2||_.max_noise<=0&&T.max_noise<0&&T.max_noise>_.max_noise-.2&&_.tot_noise<T.tot_noise||_.max_noise<=0&&T.max_noise>0&&T.max_noise>_.max_noise-.2&&_.tot_noise<T.tot_noise+T.over_noise||_.max_noise>0&&T.max_noise>-.05&&T.max_noise>_.max_noise-.1&&_.tot_noise+_.over_noise<T.tot_noise+T.over_noise||_.max_noise>0&&T.max_noise>-.1&&T.max_noise>_.max_noise-.15&&_.tot_noise+_.over_noise+_.over_noise<T.tot_noise+T.over_noise+T.over_noise;break;case 5:O=_.over_noise<T.over_noise||BitStream.EQ(_.over_noise,T.over_noise)&&_.tot_noise<T.tot_noise;break;case 6:O=_.over_noise<T.over_noise||BitStream.EQ(_.over_noise,T.over_noise)&&(_.max_noise<T.max_noise||BitStream.EQ(_.max_noise,T.max_noise)&&_.tot_noise<=T.tot_noise);break;case 7:O=_.over_count<T.over_count||_.over_noise<T.over_noise;break}return T.over_count==0&&(O=O&&_.bits<T.bits),O}function g(v,T,_,N,R){var O=v.internal_flags,x;T.scalefac_scale==0?x=1.2968395546510096:x=1.6817928305074292;for(var w=0,D=0;D<T.sfbmax;D++)w<_[D]&&(w=_[D]);var M=O.noise_shaping_amp;switch(M==3&&(R?M=2:M=1),M){case 2:break;case 1:w>1?w=Math.pow(w,.5):w*=.95;break;case 0:default:w>1?w=1:w*=.95;break}for(var P=0,D=0;D<T.sfbmax;D++){var U=T.width[D],F;if(P+=U,!(_[D]<w)){if(O.substep_shaping&2&&(O.pseudohalf[D]=O.pseudohalf[D]==0?1:0,O.pseudohalf[D]==0&&O.noise_shaping_amp==2))return;for(T.scalefac[D]++,F=-U;F<0;F++)N[P+F]*=x,N[P+F]>T.xrpow_max&&(T.xrpow_max=N[P+F]);if(O.noise_shaping_amp==2)return}}}function f(v,T){for(var _=1.2968395546510096,N=0,R=0;R<v.sfbmax;R++){var O=v.width[R],x=v.scalefac[R];if(v.preflag!=0&&(x+=n.pretab[R]),N+=O,x&1){x++;for(var w=-O;w<0;w++)T[N+w]*=_,T[N+w]>v.xrpow_max&&(v.xrpow_max=T[N+w])}v.scalefac[R]=x>>1}v.preflag=0,v.scalefac_scale=1}function b(v,T,_){var N,R=T.scalefac;for(N=0;N<T.sfb_lmax;N++)if(R[N]>=16)return!0;for(var O=0;O<3;O++){var x=0,w=0;for(N=T.sfb_lmax+O;N<T.sfbdivide;N+=3)x<R[N]&&(x=R[N]);for(;N<T.sfbmax;N+=3)w<R[N]&&(w=R[N]);if(!(x<16&&w<8)){if(T.subblock_gain[O]>=7)return!0;T.subblock_gain[O]++;var D=v.scalefac_band.l[T.sfb_lmax];for(N=T.sfb_lmax+O;N<T.sfbmax;N+=3){var M,P=T.width[N],U=R[N];if(U=U-(4>>T.scalefac_scale),U>=0){R[N]=U,D+=P*3;continue}R[N]=0;{var F=210+(U<<T.scalefac_scale+1);M=n.IPOW20(F)}D+=P*(O+1);for(var k=-P;k<0;k++)_[D+k]*=M,_[D+k]>T.xrpow_max&&(T.xrpow_max=_[D+k]);D+=P*(3-O-1)}{var M=n.IPOW20(202);D+=T.width[N]*(O+1);for(var k=-T.width[N];k<0;k++)_[D+k]*=M,_[D+k]>T.xrpow_max&&(T.xrpow_max=_[D+k])}}}return!1}function A(v,T,_,N,R){var O=v.internal_flags;g(v,T,_,N,R);var x=c(T);return x?!1:(O.mode_gr==2?x=a.scale_bitcount(T):x=a.scale_bitcount_lsf(O,T),x?(O.noise_shaping>1&&(Hl.fill(O.pseudohalf,0),T.scalefac_scale==0?(f(T,N),x=!1):T.block_type==fn.SHORT_TYPE&&O.subblock_gain>0&&(x=b(O,T,N)||c(T))),x||(O.mode_gr==2?x=a.scale_bitcount(T):x=a.scale_bitcount_lsf(O,T)),!x):!0)}this.outer_loop=function(v,T,_,N,R,O){var x=v.internal_flags,w=new NT,D=sc(576),M=sc(OT.SFBMAX),P=new lf,U,F=new wOe,k=9999999,B=!1,V=!1,G=0;if(r(x,T,O,R,N),x.noise_shaping==0)return 100;n.calc_noise(T,_,M,P,F),P.bits=T.part2_3_length,w.assign(T);var K=0;for(pi.arraycopy(N,0,D,0,576);!B;){do{var se=new lf,ee,X=255;if(x.substep_shaping&2?ee=20:ee=3,x.sfb21_extra&&(M[w.sfbmax]>1||w.block_type==fn.SHORT_TYPE&&(M[w.sfbmax+1]>1||M[w.sfbmax+2]>1))||!A(v,w,M,N,V))break;w.scalefac_scale!=0&&(X=254);var z=O-w.part2_length;if(z<=0)break;for(;(w.part2_3_length=a.count_bits(x,N,w,F))>z&&w.global_gain<=X;)w.global_gain++;if(w.global_gain>X)break;if(P.over_count==0){for(;(w.part2_3_length=a.count_bits(x,N,w,F))>k&&w.global_gain<=X;)w.global_gain++;if(w.global_gain>X)break}if(n.calc_noise(w,_,M,se,F),se.bits=w.part2_3_length,T.block_type!=fn.SHORT_TYPE?U=v.quant_comp:U=v.quant_comp_short,U=h(U,P,se,w,M)?1:0,U!=0)k=T.part2_3_length,P=se,T.assign(w),K=0,pi.arraycopy(N,0,D,0,576);else if(x.full_outer_loop==0&&(++K>ee&&P.over_count==0||x.noise_shaping_amp==3&&V&&K>30||x.noise_shaping_amp==3&&V&&w.global_gain-G>15))break}while(w.global_gain+w.scalefac_scale<255);x.noise_shaping_amp==3?V?B=!0:(w.assign(T),pi.arraycopy(D,0,N,0,576),K=0,G=w.global_gain,V=!0):B=!0}return ac(T.global_gain+T.scalefac_scale<=255),v.VBR==CT.vbr_rh||v.VBR==CT.vbr_mtrh?pi.arraycopy(D,0,N,0,576):x.substep_shaping&1&&trancate_smallspectrums(x,T,_,N),P.over_count},this.iteration_finish_one=function(v,T,_){var N=v.l3_side,R=N.tt[T][_];a.best_scalefac_store(v,T,_,N),v.use_best_huffman==1&&a.best_huffman_divide(v,R),t.ResvAdjust(v,R)},this.VBR_encode_granule=function(v,T,_,N,R,O,x){var w=v.internal_flags,D=new NT,M=sc(576),P=x,U=x+1,F=(x+O)/2,k,B,V=0,G=w.sfb21_extra;ac(P<=LameInternalFlags.MAX_BITS_PER_CHANNEL),Hl.fill(D.l3_enc,0);do F>P-42?w.sfb21_extra=!1:w.sfb21_extra=G,B=outer_loop(v,T,_,N,R,F),B<=0?(V=1,U=T.part2_3_length,D.assign(T),pi.arraycopy(N,0,M,0,576),x=U-32,k=x-O,F=(x+O)/2):(O=F+32,k=x-O,F=(x+O)/2,V!=0&&(V=2,T.assign(D),pi.arraycopy(M,0,N,0,576)));while(k>12);w.sfb21_extra=G,V==2&&pi.arraycopy(D.l3_enc,0,T.l3_enc,0,576),ac(T.part2_3_length<=P)},this.get_framebits=function(v,T){var _=v.internal_flags;_.bitrate_index=_.VBR_min_bitrate;var N=e.getframebits(v);_.bitrate_index=1,N=e.getframebits(v);for(var R=1;R<=_.VBR_max_bitrate;R++){_.bitrate_index=R;var O=new MeanBits(N);T[R]=t.ResvFrameBegin(v,O),N=O.bits}},this.VBR_old_prepare=function(v,T,_,N,R,O,x,w,D){var M=v.internal_flags,P,U=0,F=1,k=0;M.bitrate_index=M.VBR_max_bitrate;var B=t.ResvFrameBegin(v,new MeanBits(0))/M.mode_gr;get_framebits(v,O);for(var V=0;V<M.mode_gr;V++){var G=n.on_pe(v,T,w[V],B,V,0);M.mode_ext==fn.MPG_MD_MS_LR&&(ms_convert(M.l3_side,V),n.reduce_side(w[V],_[V],B,G));for(var K=0;K<M.channels_out;++K){var se=M.l3_side.tt[V][K];se.block_type!=fn.SHORT_TYPE?(U=1.28/(1+Math.exp(3.5-T[V][K]/300))-.05,P=M.PSY.mask_adjust-U):(U=2.56/(1+Math.exp(3.5-T[V][K]/300))-.14,P=M.PSY.mask_adjust_short-U),M.masking_lower=Math.pow(10,P*.1),init_outer_loop(M,se),D[V][K]=n.calc_xmin(v,N[V][K],se,R[V][K]),D[V][K]!=0&&(F=0),x[V][K]=126,k+=w[V][K]}}for(var V=0;V<M.mode_gr;V++)for(var K=0;K<M.channels_out;K++)k>O[M.VBR_max_bitrate]&&(w[V][K]*=O[M.VBR_max_bitrate],w[V][K]/=k),x[V][K]>w[V][K]&&(x[V][K]=w[V][K]);return F},this.bitpressure_strategy=function(v,T,_,N){for(var R=0;R<v.mode_gr;R++)for(var O=0;O<v.channels_out;O++){for(var x=v.l3_side.tt[R][O],w=T[R][O],D=0,M=0;M<x.psy_lmax;M++)w[D++]*=1+.029*M*M/fn.SBMAX_l/fn.SBMAX_l;if(x.block_type==fn.SHORT_TYPE)for(var M=x.sfb_smin;M<fn.SBMAX_s;M++)w[D++]*=1+.029*M*M/fn.SBMAX_s/fn.SBMAX_s,w[D++]*=1+.029*M*M/fn.SBMAX_s/fn.SBMAX_s,w[D++]*=1+.029*M*M/fn.SBMAX_s/fn.SBMAX_s;N[R][O]=0|Math.max(_[R][O],.9*N[R][O])}},this.VBR_new_prepare=function(v,T,_,N,R,O){var x=v.internal_flags,w=1,D=0,M=0,P;if(v.free_format){x.bitrate_index=0;var U=new MeanBits(D);P=t.ResvFrameBegin(v,U),D=U.bits,R[0]=P}else{x.bitrate_index=x.VBR_max_bitrate;var U=new MeanBits(D);t.ResvFrameBegin(v,U),D=U.bits,get_framebits(v,R),P=R[x.VBR_max_bitrate]}for(var F=0;F<x.mode_gr;F++){n.on_pe(v,T,O[F],D,F,0),x.mode_ext==fn.MPG_MD_MS_LR&&ms_convert(x.l3_side,F);for(var k=0;k<x.channels_out;++k){var B=x.l3_side.tt[F][k];x.masking_lower=Math.pow(10,x.PSY.mask_adjust*.1),init_outer_loop(x,B),n.calc_xmin(v,_[F][k],B,N[F][k])!=0&&(w=0),M+=O[F][k]}}for(var F=0;F<x.mode_gr;F++)for(var k=0;k<x.channels_out;k++)M>P&&(O[F][k]*=P,O[F][k]/=M);return w},this.calc_target_bits=function(v,T,_,N,R,O){var x=v.internal_flags,w=x.l3_side,D,M,P,U,F=0;x.bitrate_index=x.VBR_max_bitrate;var k=new MeanBits(F);for(O[0]=t.ResvFrameBegin(v,k),F=k.bits,x.bitrate_index=1,F=e.getframebits(v)-x.sideinfo_len*8,R[0]=F/(x.mode_gr*x.channels_out),F=v.VBR_mean_bitrate_kbps*v.framesize*1e3,x.substep_shaping&1&&(F*=1.09),F/=v.out_samplerate,F-=x.sideinfo_len*8,F/=x.mode_gr*x.channels_out,D=.93+.07*(11-v.compression_ratio)/(11-5.5),D<.9&&(D=.9),D>1&&(D=1),M=0;M<x.mode_gr;M++){var B=0;for(P=0;P<x.channels_out;P++){if(N[M][P]=int(D*F),T[M][P]>700){var V=int((T[M][P]-700)/1.4),G=w.tt[M][P];N[M][P]=int(D*F),G.block_type==fn.SHORT_TYPE&&V<F/2&&(V=F/2),V>F*3/2?V=F*3/2:V<0&&(V=0),N[M][P]+=V}N[M][P]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(N[M][P]=LameInternalFlags.MAX_BITS_PER_CHANNEL),B+=N[M][P]}if(B>LameInternalFlags.MAX_BITS_PER_GRANULE)for(P=0;P<x.channels_out;++P)N[M][P]*=LameInternalFlags.MAX_BITS_PER_GRANULE,N[M][P]/=B}if(x.mode_ext==fn.MPG_MD_MS_LR)for(M=0;M<x.mode_gr;M++)n.reduce_side(N[M],_[M],F*x.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(U=0,M=0;M<x.mode_gr;M++)for(P=0;P<x.channels_out;P++)N[M][P]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(N[M][P]=LameInternalFlags.MAX_BITS_PER_CHANNEL),U+=N[M][P];if(U>O[0])for(M=0;M<x.mode_gr;M++)for(P=0;P<x.channels_out;P++)N[M][P]*=O[0],N[M][P]/=U}}var MOe=$Oe,LOe=jn,RT=LOe.assert;function DOe(){var e;this.setModules=function(t){e=t},this.ResvFrameBegin=function(t,n){var s=t.internal_flags,a,o=s.l3_side,i=e.getframebits(t);n.bits=(i-s.sideinfo_len*8)/s.mode_gr;var l=8*256*s.mode_gr-8;t.brate>320?a=8*int(t.brate*1e3/(t.out_samplerate/1152)/8+.5):(a=8*1440,t.strict_ISO&&(a=8*int(32e4/(t.out_samplerate/1152)/8+.5))),s.ResvMax=a-i,s.ResvMax>l&&(s.ResvMax=l),(s.ResvMax<0||t.disable_reservoir)&&(s.ResvMax=0);var r=n.bits*s.mode_gr+Math.min(s.ResvSize,s.ResvMax);return r>a&&(r=a),RT(s.ResvMax%8==0),RT(s.ResvMax>=0),o.resvDrain_pre=0,s.pinfo!=null&&(s.pinfo.mean_bits=n.bits/2,s.pinfo.resvsize=s.ResvSize),r},this.ResvMaxBits=function(t,n,s,a){var o=t.internal_flags,i,l=o.ResvSize,r=o.ResvMax;a!=0&&(l+=n),o.substep_shaping&1&&(r*=.9),s.bits=n,l*10>r*9?(i=l-r*9/10,s.bits+=i,o.substep_shaping|=128):(i=0,o.substep_shaping&=127,!t.disable_reservoir&&!(o.substep_shaping&1)&&(s.bits-=.1*n));var c=l<o.ResvMax*6/10?l:o.ResvMax*6/10;return c-=i,c<0&&(c=0),c},this.ResvAdjust=function(t,n){t.ResvSize-=n.part2_3_length+n.part2_length},this.ResvFrameEnd=function(t,n){var s,a=t.l3_side;t.ResvSize+=n*t.mode_gr;var o=0;a.resvDrain_post=0,a.resvDrain_pre=0,(s=t.ResvSize%8)!=0&&(o+=s),s=t.ResvSize-o-t.ResvMax,s>0&&(o+=s);{var i=Math.min(a.main_data_begin*8,o)/8;a.resvDrain_pre+=8*i,o-=8*i,t.ResvSize-=8*i,a.main_data_begin-=i}a.resvDrain_post+=o,t.ResvSize-=o}}var POe=DOe;function kOe(){var e="http://www.mp3dev.org/",t=3,n=98,s=4,a=0,o=93;this.getLameVersion=function(){return t+"."+n+"."+s},this.getLameShortVersion=function(){return t+"."+n+"."+s},this.getLameVeryShortVersion=function(){return"LAME"+t+"."+n+"r"},this.getPsyVersion=function(){return a+"."+o},this.getLameUrl=function(){return e},this.getLameOsBitness=function(){return"32bits"}}var BOe=kOe,Pr=jn,UOe=Pr.System,rf=Pr.VbrMode,xT=Pr.ShortBlock,FOe=Pr.Arrays,sd=Pr.new_byte,GOe=Pr.assert;Zc.NUMTOCENTRIES=100;Zc.MAXFRAMESIZE=2880;function Zc(){var e,t,n;this.setModules=function(F,k,B){e=F,t=k,n=B};var s=1,a=2,o=4,i=8,l=Zc.NUMTOCENTRIES,r=Zc.MAXFRAMESIZE,c=l+4+4+4+4+4,u=c+9+1+1+8+1+1+3+1+1+2+4+2+2,d=128,h=64,g=32,f=null,b="Xing",A="Info",v=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function T(F,k){if(F.nVbrNumFrames++,F.sum+=k,F.seen++,!(F.seen<F.want)&&(F.pos<F.size&&(F.bag[F.pos]=F.sum,F.pos++,F.seen=0),F.pos==F.size)){for(var B=1;B<F.size;B+=2)F.bag[B/2]=F.bag[B];F.want*=2,F.pos/=2}}function _(F,k){if(!(F.pos<=0))for(var B=1;B<l;++B){var V=B/l,G,K,se=0|Math.floor(V*F.pos);se>F.pos-1&&(se=F.pos-1),G=F.bag[se],K=F.sum;var ee=0|256*G/K;ee>255&&(ee=255),k[B]=255&ee}}this.addVbrFrame=function(F){var k=F.internal_flags,B=Tables.bitrate_table[F.version][k.bitrate_index];GOe(k.VBR_seek_table.bag!=null),T(k.VBR_seek_table,B)};function N(F,k){var B=F[k+0]&255;return B<<=8,B|=F[k+1]&255,B<<=8,B|=F[k+2]&255,B<<=8,B|=F[k+3]&255,B}function R(F,k,B){F[k+0]=255&(B>>24&255),F[k+1]=255&(B>>16&255),F[k+2]=255&(B>>8&255),F[k+3]=255&(B&255)}function O(F,k,B){F[k+0]=255&(B>>8&255),F[k+1]=255&(B&255)}function x(F,k){return new String(F,k,b.length(),f).equals(b)||new String(F,k,A.length(),f).equals(A)}function w(F,k,B){return 255&(F<<k|B&~(-1<<k))}function D(F,k){var B=F.internal_flags;k[0]=w(k[0],8,255),k[1]=w(k[1],3,7),k[1]=w(k[1],1,F.out_samplerate<16e3?0:1),k[1]=w(k[1],1,F.version),k[1]=w(k[1],2,1),k[1]=w(k[1],1,F.error_protection?0:1),k[2]=w(k[2],4,B.bitrate_index),k[2]=w(k[2],2,B.samplerate_index),k[2]=w(k[2],1,0),k[2]=w(k[2],1,F.extension),k[3]=w(k[3],2,F.mode.ordinal()),k[3]=w(k[3],2,B.mode_ext),k[3]=w(k[3],1,F.copyright),k[3]=w(k[3],1,F.original),k[3]=w(k[3],2,F.emphasis),k[0]=255;var V=255&(k[1]&241),G;F.version==1?G=d:F.out_samplerate<16e3?G=g:G=h,F.VBR==rf.vbr_off&&(G=F.brate);var K;F.free_format?K=0:K=255&16*e.BitrateIndex(G,F.version,F.out_samplerate),F.version==1?(k[1]=255&(V|10),V=255&(k[2]&13),k[2]=255&(K|V)):(k[1]=255&(V|2),V=255&(k[2]&13),k[2]=255&(K|V))}this.getVbrTag=function(F){var k=new VBRTagData,B=0;k.flags=0;var V=F[B+1]>>3&1,G=F[B+2]>>2&3,K=F[B+3]>>6&3,se=F[B+2]>>4&15;if(se=Tables.bitrate_table[V][se],F[B+1]>>4==14?k.samprate=Tables.samplerate_table[2][G]:k.samprate=Tables.samplerate_table[V][G],V!=0?K!=3?B+=36:B+=21:K!=3?B+=21:B+=13,!x(F,B))return null;B+=4,k.hId=V;var ee=k.flags=N(F,B);if(B+=4,ee&s&&(k.frames=N(F,B),B+=4),ee&a&&(k.bytes=N(F,B),B+=4),ee&o){if(k.toc!=null)for(var X=0;X<l;X++)k.toc[X]=F[B+X];B+=l}k.vbrScale=-1,ee&i&&(k.vbrScale=N(F,B),B+=4),k.headersize=(V+1)*72e3*se/k.samprate,B+=21;var z=F[B+0]<<4;z+=F[B+1]>>4;var H=(F[B+1]&15)<<8;return H+=F[B+2]&255,(z<0||z>3e3)&&(z=-1),(H<0||H>3e3)&&(H=-1),k.encDelay=z,k.encPadding=H,k},this.InitVbrTag=function(F){var k=F.internal_flags,B;F.version==1?B=d:F.out_samplerate<16e3?B=g:B=h,F.VBR==rf.vbr_off&&(B=F.brate);var V=(F.version+1)*72e3*B/F.out_samplerate,G=k.sideinfo_len+u;if(k.VBR_seek_table.TotalFrameSize=V,V<G||V>r){F.bWriteVbrTag=!1;return}k.VBR_seek_table.nVbrNumFrames=0,k.VBR_seek_table.nBytesWritten=0,k.VBR_seek_table.sum=0,k.VBR_seek_table.seen=0,k.VBR_seek_table.want=1,k.VBR_seek_table.pos=0,k.VBR_seek_table.bag==null&&(k.VBR_seek_table.bag=new int[400],k.VBR_seek_table.size=400);var K=sd(r);D(F,K);for(var se=k.VBR_seek_table.TotalFrameSize,ee=0;ee<se;++ee)t.add_dummy_byte(F,K[ee]&255,1)};function M(F,k){var B=k^F;return k=k>>8^v[B&255],k}this.updateMusicCRC=function(F,k,B,V){for(var G=0;G<V;++G)F[0]=M(k[B+G],F[0])};function P(F,k,B,V,G){var K=F.internal_flags,se=0,ee=F.encoder_delay,X=F.encoder_padding,z=100-10*F.VBR_q-F.quality,H=n.getLameVeryShortVersion(),q,J=0,de,Te=[1,5,3,2,4,0,3],ce=0|(F.lowpassfreq/100+.5>255?255:F.lowpassfreq/100+.5),Ne=0,Me=0,Fe=0,Ge=F.internal_flags.noise_shaping,je=0,Ze=0,nt=0,st=0,At=0,Mt=(F.exp_nspsytune&1)!=0,Z=(F.exp_nspsytune&2)!=0,ie=!1,le=!1,ve=F.internal_flags.nogap_total,ge=F.internal_flags.nogap_current,Ie=F.ATHtype,Be=0,ye;switch(F.VBR){case vbr_abr:ye=F.VBR_mean_bitrate_kbps;break;case vbr_off:ye=F.brate;break;default:ye=F.VBR_min_bitrate_kbps}switch(F.VBR.ordinal()<Te.length?q=Te[F.VBR.ordinal()]:q=0,de=16*J+q,K.findReplayGain&&(K.RadioGain>510&&(K.RadioGain=510),K.RadioGain<-510&&(K.RadioGain=-510),Me=8192,Me|=3072,K.RadioGain>=0?Me|=K.RadioGain:(Me|=512,Me|=-K.RadioGain)),K.findPeakSample&&(Ne=Math.abs(0|K.PeakSample/32767*Math.pow(2,23)+.5)),ve!=-1&&(ge>0&&(le=!0),ge<ve-1&&(ie=!0)),Be=Ie+((Mt?1:0)<<4)+((Z?1:0)<<5)+((ie?1:0)<<6)+((le?1:0)<<7),z<0&&(z=0),F.mode){case MONO:je=0;break;case STEREO:je=1;break;case DUAL_CHANNEL:je=2;break;case JOINT_STEREO:F.force_ms?je=4:je=3;break;case NOT_SET:default:je=7;break}F.in_samplerate<=32e3?nt=0:F.in_samplerate==48e3?nt=2:F.in_samplerate>48e3?nt=3:nt=1,(F.short_blocks==xT.short_block_forced||F.short_blocks==xT.short_block_dispensed||F.lowpassfreq==-1&&F.highpassfreq==-1||F.scale_left<F.scale_right||F.scale_left>F.scale_right||F.disable_reservoir&&F.brate<320||F.noATH||F.ATHonly||Ie==0||F.in_samplerate<=32e3)&&(Ze=1),st=Ge+(je<<2)+(Ze<<5)+(nt<<6),At=K.nMusicCRC,R(B,V+se,z),se+=4;for(var $e=0;$e<9;$e++)B[V+se+$e]=255&H.charAt($e);se+=9,B[V+se]=255&de,se++,B[V+se]=255&ce,se++,R(B,V+se,Ne),se+=4,O(B,V+se,Me),se+=2,O(B,V+se,Fe),se+=2,B[V+se]=255&Be,se++,ye>=255?B[V+se]=255:B[V+se]=255&ye,se++,B[V+se]=255&ee>>4,B[V+se+1]=255&(ee<<4)+(X>>8),B[V+se+2]=255&X,se+=3,B[V+se]=255&st,se++,B[V+se++]=0,O(B,V+se,F.preset),se+=2,R(B,V+se,k),se+=4,O(B,V+se,At),se+=2;for(var Pe=0;Pe<se;Pe++)G=M(B[V+Pe],G);return O(B,V+se,G),se+=2,se}function U(F){F.seek(0);var k=sd(10);F.readFully(k);var B;return new String(k,"ISO-8859-1").startsWith("ID3")?B=0:B=((k[6]&127)<<21|(k[7]&127)<<14|(k[8]&127)<<7|k[9]&127)+k.length,B}this.getLameTagFrame=function(F,k){var B=F.internal_flags;if(!F.bWriteVbrTag||B.Class_ID!=Lame.LAME_ID||B.VBR_seek_table.pos<=0)return 0;if(k.length<B.VBR_seek_table.TotalFrameSize)return B.VBR_seek_table.TotalFrameSize;FOe.fill(k,0,B.VBR_seek_table.TotalFrameSize,0),D(F,k);var V=sd(l);if(F.free_format)for(var G=1;G<l;++G)V[G]=255&255*G/100;else _(B.VBR_seek_table,V);var K=B.sideinfo_len;F.error_protection&&(K-=2),F.VBR==rf.vbr_off?(k[K++]=255&A.charAt(0),k[K++]=255&A.charAt(1),k[K++]=255&A.charAt(2),k[K++]=255&A.charAt(3)):(k[K++]=255&b.charAt(0),k[K++]=255&b.charAt(1),k[K++]=255&b.charAt(2),k[K++]=255&b.charAt(3)),R(k,K,s+a+o+i),K+=4,R(k,K,B.VBR_seek_table.nVbrNumFrames),K+=4;var se=B.VBR_seek_table.nBytesWritten+B.VBR_seek_table.TotalFrameSize;R(k,K,0|se),K+=4,UOe.arraycopy(V,0,k,K,V.length),K+=V.length,F.error_protection&&t.CRC_writeheader(B,k);for(var ee=0,G=0;G<K;G++)ee=M(k[G],ee);return K+=P(F,se,k,K,ee),B.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(F,k){var B=F.internal_flags;if(B.VBR_seek_table.pos<=0||(k.seek(k.length()),k.length()==0))return-1;var V=U(k);k.seek(V);var G=sd(r),K=getLameTagFrame(F,G);return K>G.length?-1:(K<1||k.write(G,0,K),0)}}var VOe=Zc,iC=jn,wT=iC.new_byte,HOe=iC.assert,WOe=ov(),zOe=SOe,YOe=eC,jOe=sC(),KOe=MOe,XOe=aC(),qOe=POe,ZOe=_u,QOe=av();Zs();var JOe=BOe,eRe=VOe;function tRe(){this.setModules=function(e,t){}}function nRe(){this.setModules=function(e,t,n){}}function sRe(){}function aRe(){this.setModules=function(e,t){}}function oRe(e,t,n){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),e=1,t=44100,n=128);var s=new WOe,a=new tRe,o=new YOe,i=new QOe,l=new zOe,r=new jOe,c=new KOe,u=new eRe,d=new JOe,h=new aRe,g=new qOe,f=new XOe,b=new nRe,A=new sRe;s.setModules(o,i,l,r,c,u,d,h,A),i.setModules(o,A,d,u),h.setModules(i,d),l.setModules(s),c.setModules(i,g,r,f),r.setModules(f,g,s.enc.psy),g.setModules(i),f.setModules(r),u.setModules(s,i,d),a.setModules(b,A),b.setModules(d,h,l);var v=s.lame_init();v.num_channels=e,v.in_samplerate=t,v.brate=n,v.mode=ZOe.STEREO,v.quality=3,v.bWriteVbrTag=!1,v.disable_reservoir=!0,v.write_id3tag_automatic=!1,s.lame_init_params(v);var T=1152,_=0|1.25*T+7200,N=wT(_);this.encodeBuffer=function(R,O){e==1&&(O=R),HOe(R.length==O.length),R.length>T&&(T=R.length,_=0|1.25*T+7200,N=wT(_));var x=s.lame_encode_buffer(v,R,O,R.length,N,0,_);return new Int8Array(N.subarray(0,x))},this.flush=function(){var R=s.lame_encode_flush(v,N,0,_);return new Int8Array(N.subarray(0,R))}}function eo(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function qp(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}eo.RIFF=qp("RIFF");eo.WAVE=qp("WAVE");eo.fmt_=qp("fmt ");eo.data=qp("data");eo.readHeader=function(e){var t=new eo,n=e.getUint32(0,!1);if(eo.RIFF==n&&(e.getUint32(4,!0),eo.WAVE==e.getUint32(8,!1)&&eo.fmt_==e.getUint32(12,!1))){var s=e.getUint32(16,!0),a=20;switch(s){case 16:case 18:t.channels=e.getUint16(a+2,!0),t.sampleRate=e.getUint32(a+4,!0);break;default:throw"extended fmt chunk not implemented"}a+=s;for(var o=eo.data,i=0;o!=n&&(n=e.getUint32(a,!1),i=e.getUint32(a+4,!0),o!=n);)a+=i+8;return t.dataLen=i,t.dataOffset=a+8,t}};J_.Mp3Encoder=oRe;J_.WavHeader=eo;const ad=(e,t,n)=>{for(let s=0;s<n.length;s++)e.setUint8(t+s,n.charCodeAt(s))},iRe=async(e,t,n)=>{const s=e.length*t*2,a=new ArrayBuffer(44+s),o=new DataView(a);ad(o,0,"RIFF"),o.setUint32(4,36+s,!0),ad(o,8,"WAVE"),ad(o,12,"fmt "),o.setUint32(16,16,!0),o.setUint16(20,1,!0),o.setUint16(22,t,!0),o.setUint32(24,n,!0),o.setUint32(28,n*t*2,!0),o.setUint16(32,t*2,!0),o.setUint16(34,16,!0),ad(o,36,"data"),o.setUint32(40,s,!0);const i=44;for(let l=0;l<e.length;l++)for(let r=0;r<t;r++){const c=Math.max(-1,Math.min(1,e.getChannelData(r)[l]));o.setInt16(i+(l*t+r)*2,c*32767,!0)}return new Blob([a],{type:"audio/wav"})},lC=async e=>{const t=new(window.AudioContext||window.webkitAudioContext),n=await e.arrayBuffer();return await t.decodeAudioData(n)},lRe=async e=>{const t=await lC(e);return iRe(t,t.numberOfChannels,t.sampleRate)},rRe=(e,t,n,s=128)=>{const a=[],o=new J_.Mp3Encoder(e,t,s),i=1152;for(let r=0;r<n.length;r+=i){const c=Math.min(r+i,n.length),u=n.subarray(r,c),d=o.encodeBuffer(u);d.length>0&&a.push(new Int8Array(d))}const l=o.flush();return l.length>0&&a.push(new Int8Array(l)),new Blob(a,{type:"audio/mp3"})},cRe=async(e,t=128)=>{try{const n=await lC(e),s=new Int16Array(n.length*n.numberOfChannels);let a=0;for(let o=0;o<n.length;o+=1)for(let i=0;i<n.numberOfChannels;i+=1){const l=Math.max(-1,Math.min(1,n.getChannelData(i)[o]));s[a]=l<0?l*32768:l*32767,a+=1}return rRe(n.numberOfChannels,n.sampleRate,s,t)}catch{throw new Error("Conversion to MP3 failed.")}},uRe=async(e,t,n=128)=>{let s;if(t==="audio/wav")s=await lRe(e);else if(t==="audio/mp3")s=await cRe(e,n);else throw new Error("Unsupported output format");return s},dRe={__name:"AudioRecorder",props:{audioRecordFormat:{type:String,required:!0}},emits:["recorderProgressChanged","finishRecord","pause","play"],setup(e,{expose:t,emit:n}){const s=e,a=n,o=j(null),i=j(null),l=j(null),r=j(!1),c=j(!1),u=j(!1),d=A=>{const v=AD({start:0,end:A});return Yn(new Date(0,0,0,0,v.minutes,v.seconds),"mm:ss")},h=()=>{i.value=qc.create({container:o.value,waveColor:"#1F93FF",progressColor:"#6E6F73",height:100,barWidth:2,barGap:1,barRadius:2,plugins:[Q_.create({scrollingWaveform:!0,renderRecordedAudio:!1})]}),i.value.on("pause",()=>a("pause")),i.value.on("play",()=>a("play")),l.value=i.value.plugins[0],i.value.on("finish",()=>{c.value=!1}),l.value.on("record-end",async A=>{const v=URL.createObjectURL(A),T=await uRe(A,s.audioRecordFormat),_=`${cO()}.mp3`,N=new File([T],_,{type:s.audioRecordFormat});i.value.load(v),a("finishRecord",{name:N.name,type:N.type,size:N.size,file:N}),u.value=!0,r.value=!1}),l.value.on("record-progress",A=>{a("recorderProgressChanged",d(A))})},g=()=>{r.value&&(l.value.stopRecording(),r.value=!1)},f=()=>{l.value.startRecording(),r.value=!0},b=()=>{u.value&&(i.value.playPause(),c.value=!c.value)};return lt(()=>{h(),f()}),ei(()=>{i.value&&i.value.destroy()}),t({playPause:b,stopRecording:g,record:l}),(A,v)=>(p(),E("div",{ref_key:"waveformContainer",ref:o,class:"w-full p-1"},null,512))}},pRe="en",mRe="UTILITY",zo={HEADER:"HEADER",BODY:"BODY",BUTTONS:"BUTTONS"},rC=["IMAGE","VIDEO","DOCUMENT"],Ci=(e,t)=>{var n;return(n=e.components)==null?void 0:n.find(s=>s.type===t)},sg=e=>e.replace(/{{|}}/g,""),hRe=e=>Object.keys(e).every(n=>e[n]),fRe=(e,t)=>e.replace(/{{([^}]+)}}/g,(n,s)=>{var o;const a=sg(s);return((o=t.body)==null?void 0:o[a])||`{{${s}}}`}),gRe=(e,t)=>{const n={},s=Ci(e,zo.BODY),a=Ci(e,zo.HEADER);if(!s)return n;const i=s.text.match(/{{([^}]+)}}/g);return i&&(n.body={},i.forEach(r=>{const c=sg(r);n.body[c]=""})),t&&(n.header||(n.header={}),n.header.media_url="",n.header.media_type=a.format.toLowerCase(),a.format.toLowerCase()==="document"&&(n.header.media_name="")),e.components.filter(r=>r.type===zo.BUTTONS).forEach(r=>{r.buttons&&r.buttons.forEach((c,u)=>{if(c.type==="URL"&&c.url&&c.url.includes("{{")){const d=c.url.match(/{{([^}]+)}}/g)||[];d.length>0&&(n.buttons||(n.buttons=[]),n.buttons[u]={type:"url",parameter:"",url:c.url,variables:d.map(h=>sg(h))})}c.type==="COPY_CODE"&&(n.buttons||(n.buttons=[]),n.buttons[u]={type:"copy_code",parameter:""})})}),n},_Re={class:"w-full"},vRe={class:"flex gap-2 mb-2.5"},ERe={class:"flex flex-1 gap-1 items-center px-2.5 py-0 rounded-lg bg-n-alpha-black2 outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 focus-within:outline-n-brand dark:focus-within:outline-n-brand"},bRe=["placeholder"],TRe=["disabled","title"],SRe={class:"bg-n-background outline-n-container outline outline-1 rounded-lg max-h-[18.75rem] overflow-y-auto p-2.5"},ARe=["onClick"],yRe={class:"flex justify-between items-center mb-2.5"},IRe={class:"text-sm"},CRe={class:"inline-block px-2 py-1 text-xs leading-none rounded-lg cursor-default bg-n-slate-3 text-n-slate-12"},NRe={key:0,class:"mb-3"},ORe={class:"text-xs font-medium text-n-slate-11"},RRe={key:0,class:"text-sm label-body"},xRe={key:1,class:"text-sm italic text-n-slate-11"},wRe={class:"text-xs font-medium text-n-slate-11"},$Re={class:"text-sm label-body"},MRe={key:1,class:"mt-3"},LRe={class:"text-xs font-medium text-n-slate-11"},DRe={class:"text-sm label-body"},PRe={key:2,class:"mt-3"},kRe={class:"text-xs font-medium text-n-slate-11"},BRe={class:"flex flex-wrap gap-1 mt-1"},URe={class:"mt-3"},FRe={class:"text-xs font-medium text-n-slate-11"},GRe={class:"text-sm"},VRe={key:0,class:"py-8 text-center"},HRe={key:0},WRe={key:1,class:"space-y-4"},zRe={class:"text-n-slate-11"},YRe={__name:"TemplatesPicker",props:{inboxId:{type:Number,default:void 0}},emits:["onSelect"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=rt(),i=j(""),l=j(!1),r=Hs("inboxes/getFilteredWhatsAppTemplates",cr(n,"inboxId")),c=y(()=>r.value.filter(A=>A.name.toLowerCase().includes(i.value.toLowerCase()))),u=A=>{var v;return((v=Ci(A,zo.BODY))==null?void 0:v.text)||""},d=A=>Ci(A,zo.HEADER),h=A=>Ci(A,zo.FOOTER),g=A=>Ci(A,zo.BUTTONS),f=A=>{const v=d(A);return v&&rC.includes(v.format)},b=async()=>{l.value=!0;try{await o.dispatch("inboxes/syncTemplates",n.inboxId),ne(a("WHATSAPP_TEMPLATES.PICKER.REFRESH_SUCCESS"))}catch{ne(a("WHATSAPP_TEMPLATES.PICKER.REFRESH_ERROR"))}finally{l.value=!1}};return(A,v)=>{const T=W("fluent-icon");return p(),E("div",_Re,[m("div",vRe,[m("div",ERe,[S(T,{icon:"search",class:"text-n-slate-12",size:"16"}),re(m("input",{"onUpdate:modelValue":v[0]||(v[0]=_=>i.value=_),type:"search",placeholder:C(a)("WHATSAPP_TEMPLATES.PICKER.SEARCH_PLACEHOLDER"),class:"reset-base w-full h-9 bg-transparent text-n-slate-12 !text-sm !outline-0"},null,8,bRe),[[gt,i.value]])]),m("button",{disabled:l.value,class:"flex justify-center items-center w-9 h-9 rounded-lg bg-n-alpha-black2 outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 hover:bg-n-alpha-2 dark:hover:bg-n-solid-2 disabled:opacity-50 disabled:cursor-not-allowed",title:C(a)("WHATSAPP_TEMPLATES.PICKER.REFRESH_BUTTON"),onClick:b},[S(dt,{icon:"i-lucide-refresh-ccw",class:ae(["text-n-slate-12 size-4",{"animate-spin":l.value}])},null,8,["class"])],8,TRe)]),m("div",SRe,[(p(!0),E(ue,null,Ae(c.value,(_,N)=>(p(),E("div",{key:_.id},[m("button",{class:"block p-2.5 w-full text-left rounded-lg cursor-pointer hover:bg-n-alpha-2 dark:hover:bg-n-solid-2",onClick:R=>s("onSelect",_)},[m("div",null,[m("div",yRe,[m("p",IRe,I(_.name),1),m("span",CRe,I(C(a)("WHATSAPP_TEMPLATES.PICKER.LABELS.LANGUAGE"))+": "+I(_.language),1)]),d(_)?(p(),E("div",NRe,[m("p",ORe,I(C(a)("WHATSAPP_TEMPLATES.PICKER.HEADER")||"HEADER"),1),d(_).format==="TEXT"?(p(),E("div",RRe,I(d(_).text),1)):f(_)?(p(),E("div",xRe,I(C(a)("WHATSAPP_TEMPLATES.PICKER.MEDIA_CONTENT",{format:d(_).format})||`${d(_).format} ${C(a)("WHATSAPP_TEMPLATES.PICKER.MEDIA_CONTENT_FALLBACK")}`),1)):$("",!0)])):$("",!0),m("div",null,[m("p",wRe,I(C(a)("WHATSAPP_TEMPLATES.PICKER.BODY")||"BODY"),1),m("p",$Re,I(u(_)),1)]),h(_)?(p(),E("div",MRe,[m("p",LRe,I(C(a)("WHATSAPP_TEMPLATES.PICKER.FOOTER")||"FOOTER"),1),m("p",DRe,I(h(_).text),1)])):$("",!0),g(_)?(p(),E("div",PRe,[m("p",kRe,I(C(a)("WHATSAPP_TEMPLATES.PICKER.BUTTONS")||"BUTTONS"),1),m("div",BRe,[(p(!0),E(ue,null,Ae(g(_).buttons,R=>(p(),E("span",{key:R.text,class:"px-2 py-1 text-xs rounded bg-n-slate-3 text-n-slate-12"},I(R.text),1))),128))])])):$("",!0),m("div",URe,[m("p",FRe,I(C(a)("WHATSAPP_TEMPLATES.PICKER.CATEGORY")||"CATEGORY"),1),m("p",GRe,I(_.category),1)])])],8,ARe),N!=c.value.length-1?(p(),E("hr",{key:`hr-${N}`,class:"border-b border-solid border-n-weak my-2.5 mx-auto max-w-[95%]"})):$("",!0)]))),128)),c.value.length?$("",!0):(p(),E("div",VRe,[i.value&&C(r).length?(p(),E("div",HRe,[m("p",null,[xe(I(C(a)("WHATSAPP_TEMPLATES.PICKER.NO_TEMPLATES_FOUND"))+" ",1),m("strong",null,I(i.value),1)])])):C(r).length?$("",!0):(p(),E("div",WRe,[m("p",zRe,I(C(a)("WHATSAPP_TEMPLATES.PICKER.NO_TEMPLATES_AVAILABLE")),1)]))]))])])}}},jRe=De(YRe,[["__scopeId","data-v-c9137a2e"]]),KRe={class:"flex flex-col gap-4 p-4 mb-4 rounded-lg bg-n-alpha-black2"},XRe={class:"flex justify-between items-center"},qRe={class:"text-sm font-medium text-n-slate-12"},ZRe={class:"text-xs text-n-slate-11"},QRe={class:"flex flex-col gap-2"},JRe={class:"rounded-md"},exe={class:"text-sm whitespace-pre-wrap text-n-slate-12"},txe={class:"text-xs text-n-slate-11"},nxe={key:0},sxe={key:0,class:"mb-4"},axe={class:"mb-2.5 text-sm font-semibold"},oxe={class:"flex items-center mb-2.5"},ixe={key:0,class:"flex items-center mb-2.5"},lxe={key:1},rxe={class:"mb-2.5 text-sm font-semibold"},cxe={key:2},uxe={class:"mb-2.5 text-sm font-semibold"},dxe={key:3,class:"p-2.5 text-center rounded-md bg-n-ruby-9/20 text-n-ruby-9"},iv={__name:"WhatsAppTemplateParser",props:{template:{type:Object,default:()=>({}),validator:e=>!(!e||typeof e!="object"||!e.components||!Array.isArray(e.components))}},emits:["sendMessage","resetTemplate","back"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=be(),i=j({}),l=y(()=>`${o("WHATSAPP_TEMPLATES.PARSER.LANGUAGE")}: ${s.template.language||pRe}`),r=y(()=>`${o("WHATSAPP_TEMPLATES.PARSER.CATEGORY")}: ${s.template.category||mRe}`),c=y(()=>Ci(s.template,zo.HEADER)),u=y(()=>Ci(s.template,zo.BODY)),d=y(()=>{var D;return((D=u.value)==null?void 0:D.text)||""}),h=y(()=>{var D;return rC.includes((D=c.value)==null?void 0:D.format)}),g=y(()=>{var M;const D=(M=c.value)==null?void 0:M.format;return D?D.charAt(0)+D.slice(1).toLowerCase():""}),f=y(()=>{var D,M;return((M=(D=c.value)==null?void 0:D.format)==null?void 0:M.toLowerCase())==="document"}),b=y(()=>{var D;return((D=d.value)==null?void 0:D.match(/{{([^}]+)}}/g))!==null}),A=y(()=>fRe(d.value,i.value)),v=y(()=>{var D;return!b.value&&!h.value?!1:!!(h.value&&!((D=i.value.header)!=null&&D.media_url)||b.value&&i.value.body&&Object.values(i.value.body).some(P=>!P)||i.value.buttons&&i.value.buttons.some(P=>!P.parameter))}),T=bt({processedParams:{requiredIfKeysPresent:Ei(b),allKeysRequired:hRe}},{processedParams:i}),_=()=>{i.value=gRe(s.template,h.value)},N=D=>{var M;(M=i.value).header??(M.header={}),i.value.header.media_url=D},R=D=>{var M;(M=i.value).header??(M.header={}),i.value.header.media_name=D},O=()=>{if(T.value.$touch(),T.value.$invalid)return;const{name:D,category:M,language:P,namespace:U}=s.template,F={message:A.value,templateParams:{name:D,category:M,language:P,namespace:U,processed_params:i.value}};a("sendMessage",F)},x=()=>{a("resetTemplate")},w=()=>{a("back")};return lt(_),it(()=>s.template,()=>{_(),T.value.$reset()},{deep:!0}),t({processedParams:i,hasVariables:b,hasMediaHeader:h,isDocumentTemplate:f,headerComponent:c,renderedTemplate:A,v$:T,updateMediaUrl:N,updateMediaName:R,sendMessage:O,resetTemplate:x,goBack:w}),(D,M)=>{var P,U;return p(),E("div",null,[m("div",KRe,[m("div",XRe,[m("h3",qRe,I(e.template.name),1),m("span",ZRe,I(l.value),1)]),m("div",QRe,[m("div",JRe,[m("div",exe,I(A.value),1)])]),m("div",txe,I(r.value),1)]),b.value||h.value?(p(),E("div",nxe,[h.value?(p(),E("div",sxe,[m("p",axe,I(D.$t("WHATSAPP_TEMPLATES.PARSER.MEDIA_HEADER_LABEL",{type:g.value})||`${g.value} Header`),1),m("div",oxe,[S(Tt,{"model-value":((P=i.value.header)==null?void 0:P.media_url)||"",type:"url",class:"flex-1",placeholder:C(o)("WHATSAPP_TEMPLATES.PARSER.MEDIA_URL_LABEL",{type:g.value}),"onUpdate:modelValue":N},null,8,["model-value","placeholder"])]),f.value?(p(),E("div",ixe,[S(Tt,{"model-value":((U=i.value.header)==null?void 0:U.media_name)||"",type:"text",class:"flex-1",placeholder:C(o)("WHATSAPP_TEMPLATES.PARSER.DOCUMENT_NAME_PLACEHOLDER"),"onUpdate:modelValue":R},null,8,["model-value","placeholder"])])):$("",!0)])):$("",!0),i.value.body?(p(),E("div",lxe,[m("p",rxe,I(D.$t("WHATSAPP_TEMPLATES.PARSER.VARIABLES_LABEL")),1),(p(!0),E(ue,null,Ae(i.value.body,(F,k)=>(p(),E("div",{key:`body-${k}`,class:"flex items-center mb-2.5"},[S(Tt,{modelValue:i.value.body[k],"onUpdate:modelValue":B=>i.value.body[k]=B,type:"text",class:"flex-1",placeholder:C(o)("WHATSAPP_TEMPLATES.PARSER.VARIABLE_PLACEHOLDER",{variable:k})},null,8,["modelValue","onUpdate:modelValue","placeholder"])]))),128))])):$("",!0),i.value.buttons?(p(),E("div",cxe,[m("p",uxe,I(C(o)("WHATSAPP_TEMPLATES.PARSER.BUTTON_PARAMETERS")),1),(p(!0),E(ue,null,Ae(i.value.buttons,(F,k)=>(p(),E("div",{key:`button-${k}`,class:"flex items-center mb-2.5"},[S(Tt,{modelValue:i.value.buttons[k].parameter,"onUpdate:modelValue":B=>i.value.buttons[k].parameter=B,type:"text",class:"flex-1",placeholder:C(o)("WHATSAPP_TEMPLATES.PARSER.BUTTON_PARAMETER")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]))),128))])):$("",!0),C(T).$dirty&&C(T).$invalid?(p(),E("p",dxe,I(D.$t("WHATSAPP_TEMPLATES.PARSER.FORM_ERROR_MESSAGE")),1)):$("",!0)])):$("",!0),We(D.$slots,"actions",{sendMessage:O,resetTemplate:x,goBack:w,isValid:!C(T).$invalid,disabled:v.value})])}}},pxe={class:"w-full"},mxe={class:"flex gap-2 justify-end"},hxe={__name:"WhatsAppTemplateReply",props:{template:{type:Object,default:()=>({})}},emits:["sendMessage","resetTemplate"],setup(e,{emit:t}){const n=t,s=o=>{n("sendMessage",o)},a=()=>{n("resetTemplate")};return(o,i)=>(p(),E("div",pxe,[S(iv,{template:e.template,onSendMessage:s,onResetTemplate:a},{actions:Y(({sendMessage:l,resetTemplate:r,disabled:c})=>[m("footer",mxe,[S(te,{faded:"",slate:"",type:"reset",label:o.$t("WHATSAPP_TEMPLATES.PARSER.GO_BACK_LABEL"),onClick:r},null,8,["label","onClick"]),S(te,{type:"button",label:o.$t("WHATSAPP_TEMPLATES.PARSER.SEND_MESSAGE_LABEL"),disabled:c,onClick:l},null,8,["label","disabled","onClick"])])]),_:1},8,["template"])]))}},fxe={components:{TemplatesPicker:jRe,WhatsAppTemplateReply:hxe},props:{show:{type:Boolean,default:!1},inboxId:{type:Number,default:void 0}},emits:["onSend","cancel","update:show"],data(){return{selectedWaTemplate:null}},computed:{localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}},modalHeaderContent(){return this.selectedWaTemplate?this.$t("WHATSAPP_TEMPLATES.MODAL.TEMPLATE_SELECTED_SUBTITLE",{templateName:this.selectedWaTemplate.name}):this.$t("WHATSAPP_TEMPLATES.MODAL.SUBTITLE")}},methods:{pickTemplate(e){this.selectedWaTemplate=e},onResetTemplate(){this.selectedWaTemplate=null},onSendMessage(e){this.$emit("onSend",e)},onClose(){this.$emit("cancel")}}},gxe={class:"row modal-content"};function _xe(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("TemplatesPicker"),r=W("WhatsAppTemplateReply"),c=W("woot-modal");return p(),L(c,{show:o.localShow,"onUpdate:show":t[0]||(t[0]=u=>o.localShow=u),"on-close":o.onClose,size:"modal-big"},{default:Y(()=>[S(i,{"header-title":e.$t("WHATSAPP_TEMPLATES.MODAL.TITLE"),"header-content":o.modalHeaderContent},null,8,["header-title","header-content"]),m("div",gxe,[a.selectedWaTemplate?(p(),L(r,{key:1,template:a.selectedWaTemplate,onResetTemplate:o.onResetTemplate,onSendMessage:o.onSendMessage},null,8,["template","onResetTemplate","onSendMessage"])):(p(),L(l,{key:0,"inbox-id":n.inboxId,onOnSelect:o.pickTemplate},null,8,["inbox-id","onOnSelect"]))])]),_:1},8,["show","on-close"])}const vxe=De(fxe,[["render",_xe],["__scopeId","data-v-550e09a7"]]),Exe={class:"w-full"},bxe={class:"flex gap-2 mb-2.5"},Txe={class:"flex flex-1 gap-1 items-center px-2.5 py-0 rounded-lg bg-n-alpha-black2 outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 focus-within:outline-n-brand dark:focus-within:outline-n-brand"},Sxe=["placeholder"],Axe=["disabled","title"],yxe={class:"bg-n-background outline-n-container outline outline-1 rounded-lg max-h-[18.75rem] overflow-y-auto p-2.5"},Ixe=["onClick"],Cxe={class:"flex justify-between items-center mb-2.5"},Nxe={class:"text-sm"},Oxe={class:"flex gap-2"},Rxe={class:"inline-block px-2 py-1 text-xs leading-none rounded-lg cursor-default bg-n-slate-3 text-n-slate-12"},xxe={class:"inline-block px-2 py-1 text-xs leading-none rounded-lg cursor-default bg-n-slate-3 text-n-slate-12"},wxe={class:"text-xs font-medium text-n-slate-11"},$xe={class:"text-sm label-body"},Mxe={class:"flex justify-between items-center mt-3"},Lxe={class:"text-xs font-medium text-n-slate-11"},Dxe={class:"text-sm"},Pxe={class:"text-xs text-n-slate-11"},kxe={key:0,class:"py-8 text-center"},Bxe={key:0},Uxe={key:1,class:"space-y-4"},Fxe={class:"text-n-slate-11"},Gxe={__name:"ContentTemplatesPicker",props:{inboxId:{type:Number,default:void 0}},emits:["onSelect"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=rt(),i=j(""),l=j(!1),r=y(()=>{var g;const h=o.getters["inboxes/getInbox"](n.inboxId);return((g=h==null?void 0:h.content_templates)==null?void 0:g.templates)||[]}),c=y(()=>r.value.filter(h=>h.friendly_name.toLowerCase().includes(i.value.toLowerCase())&&h.status==="approved")),u=h=>h.template_type===mf.MEDIA?a("CONTENT_TEMPLATES.PICKER.TYPES.MEDIA"):h.template_type===mf.QUICK_REPLY?a("CONTENT_TEMPLATES.PICKER.TYPES.QUICK_REPLY"):a("CONTENT_TEMPLATES.PICKER.TYPES.TEXT"),d=async()=>{l.value=!0;try{await o.dispatch("inboxes/syncTemplates",n.inboxId),ne(a("CONTENT_TEMPLATES.PICKER.REFRESH_SUCCESS"))}catch{ne(a("CONTENT_TEMPLATES.PICKER.REFRESH_ERROR"))}finally{l.value=!1}};return(h,g)=>{const f=W("fluent-icon");return p(),E("div",Exe,[m("div",bxe,[m("div",Txe,[S(f,{icon:"search",class:"text-n-slate-12",size:"16"}),re(m("input",{"onUpdate:modelValue":g[0]||(g[0]=b=>i.value=b),type:"search",placeholder:C(a)("CONTENT_TEMPLATES.PICKER.SEARCH_PLACEHOLDER"),class:"reset-base w-full h-9 bg-transparent text-n-slate-12 !text-sm !outline-0"},null,8,Sxe),[[gt,i.value]])]),m("button",{disabled:l.value,class:"flex justify-center items-center w-9 h-9 rounded-lg bg-n-alpha-black2 outline outline-1 outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 hover:bg-n-alpha-2 dark:hover:bg-n-solid-2 disabled:opacity-50 disabled:cursor-not-allowed",title:C(a)("CONTENT_TEMPLATES.PICKER.REFRESH_BUTTON"),onClick:d},[S(dt,{icon:"i-lucide-refresh-ccw",class:ae(["text-n-slate-12 size-4",{"animate-spin":l.value}])},null,8,["class"])],8,Axe)]),m("div",yxe,[(p(!0),E(ue,null,Ae(c.value,(b,A)=>(p(),E("div",{key:b.content_sid},[m("button",{class:"block p-2.5 w-full text-left rounded-lg cursor-pointer hover:bg-n-alpha-2 dark:hover:bg-n-solid-2",onClick:v=>s("onSelect",b)},[m("div",null,[m("div",Cxe,[m("p",Nxe,I(b.friendly_name),1),m("div",Oxe,[m("span",Rxe,I(u(b)),1),m("span",xxe,I(`${C(a)("CONTENT_TEMPLATES.PICKER.LABELS.LANGUAGE")}: ${b.language}`),1)])]),m("div",null,[m("p",wxe,I(C(a)("CONTENT_TEMPLATES.PICKER.BODY")),1),m("p",$xe,I(b.body||C(a)("CONTENT_TEMPLATES.PICKER.NO_CONTENT")),1)]),m("div",Mxe,[m("div",null,[m("p",Lxe,I(C(a)("CONTENT_TEMPLATES.PICKER.LABELS.CATEGORY")),1),m("p",Dxe,I(b.category||"utility"),1)]),m("div",Pxe,I(new Date(b.created_at).toLocaleDateString()),1)])])],8,Ixe),A!=c.value.length-1?(p(),E("hr",{key:`hr-${A}`,class:"border-b border-solid border-n-weak my-2.5 mx-auto max-w-[95%]"})):$("",!0)]))),128)),c.value.length?$("",!0):(p(),E("div",kxe,[i.value&&r.value.length?(p(),E("div",Bxe,[m("p",null,[xe(I(C(a)("CONTENT_TEMPLATES.PICKER.NO_TEMPLATES_FOUND"))+" ",1),m("strong",null,I(i.value),1)])])):r.value.length?$("",!0):(p(),E("div",Uxe,[m("p",Fxe,I(C(a)("CONTENT_TEMPLATES.PICKER.NO_TEMPLATES_AVAILABLE")),1)]))]))])])}}},Vxe=De(Gxe,[["__scopeId","data-v-d3248251"]]),Hxe={class:"flex flex-col gap-4 p-4 mb-4 rounded-lg bg-n-alpha-black2"},Wxe={class:"flex justify-between items-center"},zxe={class:"text-sm font-medium text-n-slate-12"},Yxe={class:"text-xs text-n-slate-11"},jxe={class:"flex flex-col gap-2"},Kxe={class:"rounded-md"},Xxe={class:"text-sm whitespace-pre-wrap text-n-slate-12"},qxe={class:"text-xs text-n-slate-11"},Zxe={key:0},Qxe={key:0,class:"mb-4"},Jxe={class:"mb-2.5 text-sm font-semibold"},ewe={class:"flex items-center mb-2.5"},twe={key:1},nwe={class:"mb-2.5 text-sm font-semibold"},swe={key:2,class:"p-2.5 text-center rounded-md bg-n-ruby-9/20 text-n-ruby-9"},cC={__name:"ContentTemplateParser",props:{template:{type:Object,default:()=>({}),validator:e=>!(!e||typeof e!="object"||!e.friendly_name)}},emits:["sendMessage","resetTemplate","back"],setup(e,{expose:t,emit:n}){const s=e,a=n,o=/{{([^}]+)}}/g,{t:i}=be(),l=j({}),r=y(()=>`${i("CONTENT_TEMPLATES.PARSER.LANGUAGE")}: ${s.template.language||"en"}`),c=y(()=>`${i("CONTENT_TEMPLATES.PARSER.CATEGORY")}: ${s.template.category||"utility"}`),u=y(()=>s.template.body||""),d=y(()=>s.template.template_type===mf.MEDIA),h=y(()=>{var w;return((w=u.value)==null?void 0:w.match(o))!==null}),g=y(()=>{var D,M,P,U,F;if(!d.value)return null;const w=(U=(P=(M=(D=s.template)==null?void 0:D.types)==null?void 0:M["twilio/media"])==null?void 0:P.media)==null?void 0:U[0];return w?((F=w.match(/{{(\d+)}}/))==null?void 0:F[1])??null:null}),f=y(()=>d.value&&g.value!==null),b=y(()=>{var w,D,M,P;return d.value&&((P=(M=(D=(w=s.template)==null?void 0:w.types)==null?void 0:D["twilio/media"])==null?void 0:M.media)==null?void 0:P[0])||""}),A=y(()=>h.value?(u.value.match(o)||[]).map(D=>D.replace(/[{}]/g,"")):[]),v=y(()=>{let w=u.value;return l.value&&Object.keys(l.value).length>0&&(w=w.replace(o,(D,M)=>{const P=M.trim();return l.value[P]||D})),w}),T=y(()=>!h.value&&!f.value?!1:!!(h.value&&A.value.some(D=>!l.value[D])||f.value&&g.value&&!l.value[g.value])),_=bt({processedParams:{requiredIfKeysPresent:Ei(()=>h.value||f.value)}},{processedParams:l}),N=()=>{l.value={},h.value&&A.value.forEach(w=>{l.value[w]=""}),f.value&&g.value&&(l.value[g.value]="")},R=()=>{if(_.value.$touch(),_.value.$invalid||T.value)return;const{friendly_name:w,language:D}=s.template,M={...l.value};f.value&&g.value&&M[g.value]&&(M[g.value]=XO(M[g.value]));const P={message:v.value,templateParams:{name:w,language:D,processed_params:M}};a("sendMessage",P)},O=()=>{a("resetTemplate")},x=()=>{a("back")};return lt(N),it(()=>s.template,()=>{N(),_.value.$reset()},{deep:!0}),t({processedParams:l,hasVariables:h,hasMediaTemplate:d,renderedTemplate:v,v$:_,sendMessage:R,resetTemplate:O,goBack:x}),(w,D)=>(p(),E("div",null,[m("div",Hxe,[m("div",Wxe,[m("h3",zxe,I(e.template.friendly_name),1),m("span",Yxe,I(r.value),1)]),m("div",jxe,[m("div",Kxe,[m("div",Xxe,I(v.value),1)])]),m("div",qxe,I(c.value),1)]),h.value||f.value?(p(),E("div",Zxe,[f.value?(p(),E("div",Qxe,[m("p",Jxe,I(w.$t("CONTENT_TEMPLATES.PARSER.MEDIA_URL_LABEL")),1),m("div",ewe,[S(Tt,{modelValue:l.value[g.value],"onUpdate:modelValue":D[0]||(D[0]=M=>l.value[g.value]=M),type:"url",class:"flex-1",placeholder:b.value||C(i)("CONTENT_TEMPLATES.PARSER.MEDIA_URL_PLACEHOLDER")},null,8,["modelValue","placeholder"])])])):$("",!0),h.value?(p(),E("div",twe,[m("p",nwe,I(w.$t("CONTENT_TEMPLATES.PARSER.VARIABLES_LABEL")),1),(p(!0),E(ue,null,Ae(A.value,M=>(p(),E("div",{key:`variable-${M}`,class:"flex items-center mb-2.5"},[S(Tt,{modelValue:l.value[M],"onUpdate:modelValue":P=>l.value[M]=P,type:"text",class:"flex-1",placeholder:C(i)("CONTENT_TEMPLATES.PARSER.VARIABLE_PLACEHOLDER",{variable:M})},null,8,["modelValue","onUpdate:modelValue","placeholder"])]))),128))])):$("",!0),C(_).$dirty&&(C(_).$invalid||T.value)?(p(),E("p",swe,I(w.$t("CONTENT_TEMPLATES.PARSER.FORM_ERROR_MESSAGE")),1)):$("",!0)])):$("",!0),We(w.$slots,"actions",{sendMessage:R,resetTemplate:O,goBack:x,isValid:!C(_).$invalid&&!T.value,disabled:T.value})]))}},awe={class:"px-8 py-6 row"},owe={class:"flex gap-2 mt-6"},iwe={__name:"ContentTemplatesModal",props:{show:{type:Boolean,default:!1},inboxId:{type:Number,default:void 0}},emits:["onSend","cancel","update:show"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=j(null),i=y({get(){return n.show},set(h){s("update:show",h)}}),l=y(()=>o.value?a("CONTENT_TEMPLATES.MODAL.TEMPLATE_SELECTED_SUBTITLE",{templateName:o.value.friendly_name}):a("CONTENT_TEMPLATES.MODAL.SUBTITLE")),r=h=>{o.value=h},c=()=>{o.value=null},u=h=>{s("onSend",h)},d=()=>{s("cancel")};return(h,g)=>{const f=W("woot-modal-header"),b=W("woot-modal");return p(),L(b,{show:i.value,"onUpdate:show":g[0]||(g[0]=A=>i.value=A),"on-close":d,size:"modal-big"},{default:Y(()=>[S(f,{"header-title":h.$t("CONTENT_TEMPLATES.MODAL.TITLE"),"header-content":l.value},null,8,["header-title","header-content"]),m("div",awe,[o.value?(p(),L(cC,{key:1,template:o.value,onResetTemplate:c,onSendMessage:u},{actions:Y(({sendMessage:A,resetTemplate:v,disabled:T})=>[m("div",owe,[S(te,{label:C(a)("CONTENT_TEMPLATES.PARSER.GO_BACK_LABEL"),color:"slate",variant:"faded",class:"flex-1",onClick:v},null,8,["label","onClick"]),S(te,{label:C(a)("CONTENT_TEMPLATES.PARSER.SEND_MESSAGE_LABEL"),class:"flex-1",disabled:T,onClick:A},null,8,["label","disabled","onClick"])])]),_:1},8,["template"])):(p(),L(Vxe,{key:0,"inbox-id":e.inboxId,onOnSelect:r},null,8,["inbox-id"]))])]),_:1},8,["show"])}}},$T=e=>{if(!e)return"";if(typeof document>"u")return e.replace(/<[^>]*>/g," ");const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""},lwe=(e,t)=>{var a;const n=(a=e==null?void 0:e.sender)==null?void 0:a.name;if(n&&n.trim())return n.trim();const s=t==null?void 0:t.name;return s&&s.trim()?s.trim():""},rwe=(e,t)=>{var i;const n=(i=e==null?void 0:e.sender)==null?void 0:i.email;if(n&&n.trim())return n.trim();const a=((e==null?void 0:e.contentAttributes)||(e==null?void 0:e.content_attributes)||{}).email||{};if(Array.isArray(a.from)&&a.from.length>0){const l=a.from[0];if(l&&l.trim())return l.trim()}const o=t==null?void 0:t.email;return o&&o.trim()?o.trim():""},uC=e=>{const n=((e==null?void 0:e.contentAttributes)||(e==null?void 0:e.content_attributes)||{}).email||{};if(n.date){const a=Wg(n.date);if(no(a))return a}const s=e==null?void 0:e.created_at;if(s){const a=Number(s);if(!Number.isNaN(a)){const o=a>1e12?a:a*1e3,i=new Date(o);if(!Number.isNaN(i.getTime()))return i}}return null},dC=e=>{try{return Yn(e,"EEE, MMM d, yyyy 'at' p")}catch{const n=new Date(e);if(!Number.isNaN(n.getTime()))return Yn(n,"EEE, MMM d, yyyy 'at' p")}return""},cwe=(e,t)=>{const s=((e==null?void 0:e.contentAttributes)||(e==null?void 0:e.content_attributes)||{}).email||{};if(Array.isArray(s.to)&&s.to.length>0){const o=s.to[0];if(o&&o.trim())return o.trim()}const a=t==null?void 0:t.email;return a&&a.trim()?a.trim():""},uwe=(e,t)=>{if(!e)return"";const n=uC(e),s=rwe(e,t);if(!n||!s)return"";const a=dC(n);if(!a)return"";const o=lwe(e,t),l=!!o?`${o} <${s}>`:`<${s}>`;return`On ${a} ${l} wrote:`},dwe=(e,t)=>{if(!e)return"";const n=uC(e),s=cwe(e,t);if(!n||!s)return"";const a=dC(n);if(!a)return"";const o=t==null?void 0:t.name,l=!!o?`${o} <${s}>`:`<${s}>`;return`On ${a} ${l} wrote:`},pwe=(e,t,n)=>e?e.message_type===1?dwe(e,n):uwe(e,t):"",mwe=(e,t="")=>{const n=e?String(e).replace(/\r\n/g,`
`).split(`
`):[];if(!t&&!n.length)return"";const s=[];return t&&(s.push(`> ${t}`),s.push(">")),n.forEach(a=>{const o=a.trimEnd();s.push(o?`> ${o}`:">")}),s.join(`
`)},hwe=e=>{if(!e)return"";const n=(e.contentAttributes||e.content_attributes||{}).email||{},s=n.textContent||n.text_content;if(s!=null&&s.reply)return s.reply;if(s!=null&&s.full)return s.full;const a=n.htmlContent||n.html_content;return a!=null&&a.reply?$T(a.reply):a!=null&&a.full?$T(a.full):e.content||e.processed_message_content||""},fwe=(e,t=80)=>{const n=e.trim().replace(/\s+/g," ");return n?n.length<=t?n:`${n.slice(0,t-3)}...`:""},gwe=(e,t,n)=>{const s=e?String(e):"",a=mwe(t,n);if(!a)return s;if(!s)return a;let o=`

`;return s.endsWith(`

`)?o="":s.endsWith(`
`)&&(o=`
`),`${s}${o}${a}`},_we={computed:{...mt({accountId:"getCurrentAccountId"}),installationLimit(){return gS(this.globalConfig.maximumFileUploadSize)}},methods:{maxSizeFor(e){var s,a;if(this.isOnPrivateNote)return this.installationLimit;const t=(s=this.inbox)==null?void 0:s.channel_type;if(!t||t===St.WEB)return this.installationLimit;const n=ES({channelType:t,medium:(a=this.inbox)==null?void 0:a.medium,mime:e});return n===fS?this.installationLimit:Math.min(n,this.installationLimit)},alertOverLimit(e){ne(this.$t("CONVERSATION.FILE_SIZE_LIMIT",{MAXIMUM_SUPPORTED_FILE_UPLOAD_SIZE:e}))},onFileUpload(e){this.globalConfig.directUploadsEnabled?this.onDirectFileUpload(e):this.onIndirectFileUpload(e)},onDirectFileUpload(e){var a;if(!e)return;const t=((a=e.file)==null?void 0:a.type)||e.type,n=this.maxSizeFor(t);if(!$c(e,n)){this.alertOverLimit(n);return}new Ig.DirectUpload(e.file,`/api/v1/accounts/${this.accountId}/conversations/${this.currentChat.id}/direct_uploads`,{directUploadWillCreateBlobWithXHR:o=>{o.setRequestHeader("api_access_token",this.currentUser.access_token)}}).create((o,i)=>{o?ne(o):this.attachFile({file:e,blob:i})})},onIndirectFileUpload(e){var s;if(!e)return;const t=((s=e.file)==null?void 0:s.type)||e.type,n=this.maxSizeFor(t);if(!$c(e,n)){this.alertOverLimit(n);return}this.attachFile({file:e})}}},vwe=lg(()=>ti(()=>import("./EmojiInput-Bi8nyPcY.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))),Ewe={components:{ArticleSearchPopover:rNe,AttachmentPreview:vCe,AudioRecorder:dRe,CannedResponse:o_,ReplyBoxBanner:pNe,EmojiInput:vwe,MessageSignatureMissingAlert:dNe,ReplyBottomPanel:C2e,ReplyEmailHead:FCe,ReplyToMessage:rCe,ReplyTopPanel:CCe,ResizableTextArea:yg,ContentTemplates:iwe,WhatsappTemplates:vxe,WootMessageEditor:ai,QuotedEmailPreview:_Ne},mixins:[wr,_we,oCe],props:{popOutReplyBox:{type:Boolean,default:!1}},emits:["update:popOutReplyBox"],setup(){const{uiSettings:e,updateUISettings:t,isEditorHotKeyEnabled:n,fetchSignatureFlagFromUISettings:s,setQuotedReplyFlagForInbox:a,fetchQuotedReplyFlagFromUISettings:o}=tn(),i=Ss("replyEditor");return{uiSettings:e,updateUISettings:t,isEditorHotKeyEnabled:n,fetchSignatureFlagFromUISettings:s,setQuotedReplyFlagForInbox:a,fetchQuotedReplyFlagFromUISettings:o,replyEditor:i}},data(){return{message:"",inReplyTo:{},isFocused:!1,showEmojiPicker:!1,attachedFiles:[],isRecordingAudio:!1,recordingAudioState:"",recordingAudioDurationText:"",isUploading:!1,replyType:Vs.REPLY,mentionSearchKey:"",hasSlashCommand:!1,bccEmails:"",ccEmails:"",toEmails:"",doAutoSaveDraft:()=>{},showWhatsAppTemplatesModal:!1,showContentTemplatesModal:!1,updateEditorSelectionWith:"",undefinedVariableMessage:"",showMentions:!1,showUserMentions:!1,showCannedMenu:!1,showVariablesMenu:!1,newConversationModalActive:!1,showArticleSearchPopover:!1,hasRecordedAudio:!1}},computed:{...mt({currentChat:"getSelectedChat",messageSignature:"getMessageSignature",currentUser:"getCurrentUser",lastEmail:"getLastEmailInSelectedChat",globalConfig:"globalConfig/get",accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),currentContact(){return this.$store.getters["contacts/getContact"](this.currentChat.meta.sender.id)},shouldShowReplyToMessage(){var e;return((e=this.inReplyTo)==null?void 0:e.id)&&!this.isPrivate&&this.inboxHasFeature(zc.REPLY_TO)&&!this.is360DialogWhatsAppChannel},showRichContentEditor(){if(this.isOnPrivateNote||this.isRichEditorEnabled)return!0;if(this.isAPIInbox){const{display_rich_content_editor:e=!1}=this.uiSettings;return e}return!1},showWhatsappTemplates(){return this.isAWhatsAppCloudChannel&&!this.isPrivate},showContentTemplates(){return this.isATwilioWhatsAppChannel&&!this.isPrivate},isPrivate(){return this.currentChat.can_reply||this.isAWhatsAppChannel?this.isOnPrivateNote:!0},isReplyRestricted(){var e;return!((e=this.currentChat)!=null&&e.can_reply)&&!this.isAWhatsAppChannel},inboxId(){return this.currentChat.inbox_id},inbox(){return this.$store.getters["inboxes/getInbox"](this.inboxId)},messagePlaceHolder(){return this.isPrivate?this.$t("CONVERSATION.FOOTER.PRIVATE_MSG_INPUT"):this.$t("CONVERSATION.FOOTER.MSG_INPUT")},isMessageLengthReachingThreshold(){return this.message.length>this.maxLength-50},charactersRemaining(){return this.maxLength-this.message.length},isReplyButtonDisabled(){return this.isATwitterInbox?!0:this.hasAttachments||this.hasRecordedAudio?!1:this.isMessageEmpty||this.message.length===0||this.message.length>this.maxLength},sender(){return{name:this.currentUser.name,thumbnail:this.currentUser.avatar_url}},conversationType(){const{additional_attributes:e}=this.currentChat;return(e?e.type:"")||""},maxLength(){return this.isPrivate?vo.GENERAL:this.isAFacebookInbox?vo.FACEBOOK:this.isAnInstagramChannel?vo.INSTAGRAM:this.isATwilioWhatsAppChannel?vo.TWILIO_WHATSAPP:this.isAWhatsAppCloudChannel?vo.WHATSAPP_CLOUD:this.isASmsInbox?vo.TWILIO_SMS:this.isAnEmailChannel?vo.EMAIL:this.isATwilioSMSChannel?vo.TWILIO_SMS:this.isAWhatsAppChannel?vo.WHATSAPP_CLOUD:vo.GENERAL},showFileUpload(){return this.isAWebWidgetInbox||this.isAFacebookInbox||this.isAWhatsAppChannel||this.isAPIInbox||this.isAnEmailChannel||this.isASmsInbox||this.isATelegramChannel||this.isALineChannel||this.isAnInstagramChannel},replyButtonLabel(){let e=this.$t("CONVERSATION.REPLYBOX.SEND");this.isPrivate&&(e=this.$t("CONVERSATION.REPLYBOX.CREATE"));const t=this.isEditorHotKeyEnabled("cmd_enter")?"( + )":"()";return`${e} ${t}`},replyBoxClass(){return{"is-private":this.isPrivate,"is-focused":this.isFocused||this.hasAttachments}},hasAttachments(){return this.attachedFiles.length},isRichEditorEnabled(){return this.isAWebWidgetInbox||this.isAnEmailChannel},showAudioRecorder(){return!this.isOnPrivateNote&&this.showFileUpload},showAudioRecorderEditor(){return this.showAudioRecorder&&this.isRecordingAudio},isOnPrivateNote(){return this.replyType===Vs.NOTE},isOnExpandedLayout(){const{LAYOUT_TYPES:{CONDENSED:e}}=yt,{conversation_display_type:t=e}=this.uiSettings;return t!==e},isMessageEmpty(){return this.message?!this.message.trim().replace(/\n/g,"").length:!0},showReplyHead(){return!this.isOnPrivateNote&&this.isAnEmailChannel},enableMultipleFileUpload(){return this.isAnEmailChannel||this.isAWebWidgetInbox||this.isAPIInbox||this.isAWhatsAppChannel||this.isATelegramChannel},isSignatureEnabledForInbox(){return!this.isPrivate&&this.sendWithSignature},isSignatureAvailable(){return!!this.signatureToApply},sendWithSignature(){return this.fetchSignatureFlagFromUISettings(this.channelType)},editorMessageKey(){const{editor_message_key:e}=this.uiSettings;return e},commandPlusEnterToSendEnabled(){return this.editorMessageKey==="cmd_enter"},enterToSendEnabled(){return this.editorMessageKey==="enter"},conversationId(){return this.currentChat.id},conversationIdByRoute(){return this.conversationId},editorStateId(){return`draft-${this.conversationIdByRoute}-${this.replyType}`},audioRecordFormat(){return this.isAWhatsAppChannel||this.isATelegramChannel?im.MP3:this.isAPIInbox?im.MP3:im.WAV},messageVariables(){return BN({conversation:this.currentChat,contact:this.currentContact,inbox:this.inbox})},signatureToApply(){return this.showRichContentEditor?this.messageSignature:ul(this.messageSignature)},connectedPortalSlug(){const{help_center:e={}}=this.inbox,{slug:t=""}=e;return t},isQuotedEmailReplyEnabled(){return this.isFeatureEnabledonAccount(this.accountId,ft.QUOTED_EMAIL_REPLY)},quotedReplyPreference(){return!this.isAnEmailChannel||!this.isQuotedEmailReplyEnabled?!1:!!this.fetchQuotedReplyFlagFromUISettings(this.channelType)},lastEmailWithQuotedContent(){if(!this.isAnEmailChannel)return null;const e=this.lastEmail;return!e||e.private?null:e},quotedEmailText(){return hwe(this.lastEmailWithQuotedContent)},quotedEmailPreviewText(){return fwe(this.quotedEmailText,80)},shouldShowQuotedReplyToggle(){return this.isAnEmailChannel&&!this.isOnPrivateNote&&this.isQuotedEmailReplyEnabled},shouldShowQuotedPreview(){return this.shouldShowQuotedReplyToggle&&this.quotedReplyPreference&&!!this.quotedEmailText}},watch:{currentChat(e,t){const{can_reply:n}=e;t&&t.id!==e.id&&this.setCCAndToEmailsFromLastChat(),!this.isOnPrivateNote&&(n||this.isAWhatsAppChannel?this.replyType=Vs.REPLY:this.replyType=Vs.NOTE,this.fetchAndSetReplyTo())},lastEmail:{handler(e){e&&this.setCCAndToEmailsFromLastChat()},deep:!0},conversationIdByRoute(e,t){e!==t&&(this.setToDraft(t,this.replyType),this.getFromDraft(),this.resetRecorderAndClearAttachments())},message(e){const t=Io(e,this.signatureToApply),n=t.startsWith("/");this.hasSlashCommand=n&&!this.showRichContentEditor,this.showMentions=this.hasSlashCommand,this.mentionSearchKey=this.hasSlashCommand?t.substring(1):"",this.doAutoSaveDraft()},replyType(e,t){this.setToDraft(this.conversationIdByRoute,t),this.getFromDraft()}},mounted(){this.getFromDraft(),document.addEventListener("paste",this.onPaste),document.addEventListener("keydown",this.handleKeyEvents),this.setCCAndToEmailsFromLastChat(),this.doAutoSaveDraft=Ua(()=>{this.saveDraft(this.conversationIdByRoute,this.replyType)},500,!0),this.fetchAndSetReplyTo(),Dt.on(un.TOGGLE_REPLY_TO_MESSAGE,this.fetchAndSetReplyTo),Dt.on(un.NEW_CONVERSATION_MODAL,this.onNewConversationModalActive),Dt.on(un.INSERT_INTO_NORMAL_EDITOR,this.addIntoEditor)},unmounted(){document.removeEventListener("paste",this.onPaste),document.removeEventListener("keydown",this.handleKeyEvents),Dt.off(un.TOGGLE_REPLY_TO_MESSAGE,this.fetchAndSetReplyTo),Dt.off(un.INSERT_INTO_NORMAL_EDITOR,this.addIntoEditor),Dt.off(un.NEW_CONVERSATION_MODAL,this.onNewConversationModalActive)},methods:{handleInsert(e){const{url:t,title:n}=e;if(this.isRichEditorEnabled){const o=n.split(`
`).filter(i=>i.trim()!=="").join(" ");Dt.emit(un.INSERT_INTO_RICH_EDITOR,`[${o}](${t})`)}else this.addIntoEditor(`${this.$t("CONVERSATION.REPLYBOX.INSERT_READ_MORE")} ${t}`);zt(ea.INSERT_ARTICLE_LINK)},toggleRichContentEditor(){this.updateUISettings({display_rich_content_editor:!this.showRichContentEditor});const e=ul(this.messageSignature);if(!this.showRichContentEditor&&this.messageSignature){let t=Io(this.message,this.messageSignature);t=ul(t),t=bi(t,e),this.message=t}else this.message=wR(this.message,e,this.messageSignature)},toggleQuotedReply(){if(!this.isAnEmailChannel)return;const e=!this.quotedReplyPreference;this.setQuotedReplyFlagForInbox(this.channelType,e)},shouldIncludeQuotedEmail(){return this.isQuotedEmailReplyEnabled&&this.quotedReplyPreference&&this.shouldShowQuotedReplyToggle&&!!this.quotedEmailText},getMessageWithQuotedEmailText(e){if(!this.shouldIncludeQuotedEmail())return e;const t=this.quotedEmailText||"",n=pwe(this.lastEmailWithQuotedContent,this.currentContact,this.inbox);return gwe(e,t,n)},resetRecorderAndClearAttachments(){this.resetAudioRecorderInput(),this.attachedFiles=[]},saveDraft(e,t){if(this.message||this.message===""){const n=`draft-${e}-${t}`,s=kN(this.message||"");this.$store.dispatch("draftMessages/set",{key:n,message:s})}},setToDraft(e,t){this.saveDraft(e,t),this.message=""},getFromDraft(){if(this.conversationIdByRoute){const e=`draft-${this.conversationIdByRoute}-${this.replyType}`,t=this.$store.getters["draftMessages/get"](e)||"";this.message=this.toggleSignatureForDraft(t)}},toggleSignatureForDraft(e){return this.isPrivate?e:this.sendWithSignature?bi(e,this.signatureToApply):Io(e,this.signatureToApply)},removeFromDraft(){if(this.conversationIdByRoute){const e=`draft-${this.conversationIdByRoute}-${this.replyType}`;this.$store.dispatch("draftMessages/delete",{key:e})}},getElementToBind(){return this.replyEditor},getKeyboardEvents(){return{Escape:{action:()=>{this.hideEmojiPicker(),this.hideMentions()},allowOnFocusedInput:!0},"$mod+KeyK":{action:e=>{e.preventDefault(),document.querySelector("ninja-keys").open()},allowOnFocusedInput:!0},Enter:{action:e=>{this.isAValidEvent("enter")&&(this.onSendReply(),e.preventDefault())},allowOnFocusedInput:!0},"$mod+Enter":{action:()=>{this.isAValidEvent("cmd_enter")&&this.onSendReply()},allowOnFocusedInput:!0}}},isAValidEvent(e){return!this.showUserMentions&&!this.showMentions&&!this.showCannedMenu&&!this.showVariablesMenu&&this.isFocused&&this.isEditorHotKeyEnabled(e)},onPaste(e){const t=e.clipboardData.files;!this.showRichContentEditor&&t.length!==0&&this.$refs.messageInput.$el.blur(),!(!t.length||!t[0])&&t.forEach(n=>{const{name:s,type:a,size:o}=n;this.onFileUpload({name:s,type:a,size:o,file:n})})},toggleUserMention(e){this.showUserMentions=e},toggleCannedMenu(e){this.showCannedMenu=e},toggleVariablesMenu(e){this.showVariablesMenu=e},openWhatsappTemplateModal(){this.showWhatsAppTemplatesModal=!0},hideWhatsappTemplatesModal(){this.showWhatsAppTemplatesModal=!1},openContentTemplateModal(){this.showContentTemplatesModal=!0},hideContentTemplatesModal(){this.showContentTemplatesModal=!1},confirmOnSendReply(){if(!this.isReplyButtonDisabled&&!this.showMentions){const e=this.isATwilioWhatsAppChannel||this.isAWhatsAppCloudChannel||this.is360DialogWhatsAppChannel,t=this.isAnInstagramChannel;if((e||t)&&!this.isPrivate)this.sendMessageAsMultipleMessages(this.message);else{const n=this.getMessagePayload(this.message);this.sendMessage(n)}this.isPrivate||this.clearEmailField(),this.clearMessage(),this.hideEmojiPicker(),this.$emit("update:popOutReplyBox",!1)}},sendMessageAsMultipleMessages(e){this.getMultipleMessagesPayload(e).forEach(n=>{this.sendMessage(n)})},sendMessageAnalyticsData(e){var t;return e?zt(ea.SENT_PRIVATE_NOTE):zt(ea.SENT_MESSAGE,{channelType:this.channelType,signatureEnabled:this.sendWithSignature,hasReplyTo:!!((t=this.inReplyTo)!=null&&t.id)})},async onSendReply(){const e=PN({message:this.message,variables:this.messageVariables});if(e.length>0){const t=e.length>1?e.length:1;this.undefinedVariableMessage=this.$t("CONVERSATION.REPLYBOX.UNDEFINED_VARIABLES.MESSAGE",{undefinedVariablesCount:t,undefinedVariables:e.join(", ")}),await this.$refs.confirmDialog.showConfirmation()&&this.confirmOnSendReply()}else this.confirmOnSendReply()},async sendMessage(e){var t,n;try{await this.$store.dispatch("createPendingMessageAndSend",e),Dt.emit(un.SCROLL_TO_MESSAGE),Dt.emit(un.MESSAGE_SENT),this.removeFromDraft(),this.sendMessageAnalyticsData(e.private)}catch(s){const a=((n=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:n.error)||this.$t("CONVERSATION.MESSAGE_ERROR");ne(a)}},async onSendWhatsAppReply(e){this.sendMessage({conversationId:this.currentChat.id,...e}),this.hideWhatsappTemplatesModal()},async onSendContentTemplateReply(e){this.sendMessage({conversationId:this.currentChat.id,...e}),this.hideContentTemplatesModal()},replaceText(e){this.sendWithSignature&&!this.private&&(e=bi(e,this.signatureToApply));const t=DN({message:e,variables:this.messageVariables});setTimeout(()=>{zt(ea.INSERTED_A_CANNED_RESPONSE),this.message=t},100)},setReplyMode(e=Vs.REPLY){this.attachedFiles.length>0&&(this.attachedFiles=[]);const{can_reply:t}=this.currentChat;if(this.$store.dispatch("draftMessages/setReplyEditorMode",{mode:e}),(t||this.isAWhatsAppChannel)&&(this.replyType=e),this.showRichContentEditor){this.isRecordingAudio&&this.toggleAudioRecorder();return}this.$nextTick(()=>this.$refs.messageInput.focus())},clearEditorSelection(){this.updateEditorSelectionWith=""},insertIntoTextEditor(e,t,n){const{message:s}=this,a=s.slice(0,t)+e+s.slice(n,s.length);this.message=a},addIntoEditor(e){if(this.showRichContentEditor&&(this.updateEditorSelectionWith=e,this.onFocus()),!this.showRichContentEditor){const{selectionStart:t,selectionEnd:n}=this.$refs.messageInput.$el;this.insertIntoTextEditor(e,t,n)}},clearMessage(){this.message="",this.sendWithSignature&&!this.isPrivate&&(this.message=bi(this.message,this.signatureToApply)),this.attachedFiles=[],this.isRecordingAudio=!1,this.resetReplyToMessage(),this.resetAudioRecorderInput()},clearEmailField(){this.ccEmails="",this.bccEmails="",this.toEmails=""},toggleEmojiPicker(){this.showEmojiPicker=!this.showEmojiPicker},toggleAudioRecorder(){this.isRecordingAudio=!this.isRecordingAudio,this.isRecorderAudioStopped=!this.isRecordingAudio,this.isRecordingAudio||this.resetAudioRecorderInput()},toggleAudioRecorderPlayPause(){this.isRecordingAudio&&(this.isRecorderAudioStopped?this.isRecorderAudioStopped&&this.$refs.audioRecorderInput.playPause():(this.isRecorderAudioStopped=!0,this.$refs.audioRecorderInput.stopRecording()))},hideEmojiPicker(){this.showEmojiPicker&&this.toggleEmojiPicker()},hideMentions(){this.showMentions=!1},onTypingOn(){this.toggleTyping("on")},onTypingOff(){this.toggleTyping("off")},onBlur(){this.isFocused=!1,this.saveDraft(this.conversationIdByRoute,this.replyType)},onFocus(){this.isFocused=!0},onRecordProgressChanged(e){this.recordingAudioDurationText=e},onFinishRecorder(e){this.recordingAudioState="stopped",this.hasRecordedAudio=!0;const t={...e,isRecordedAudio:!0};return e&&this.onFileUpload(t)},toggleTyping(e){const t=this.currentChat.id,n=this.isPrivate;t&&this.$store.dispatch("conversationTypingStatus/toggleTyping",{status:e,conversationId:t,isPrivate:n})},attachFile({blob:e,file:t}){const n=new FileReader;n.readAsDataURL(t.file),n.onloadend=()=>{this.attachedFiles.push({currentChatId:this.currentChat.id,resource:e||t,isPrivate:this.isPrivate,thumb:n.result,blobSignedId:e?e.signed_id:void 0,isRecordedAudio:(t==null?void 0:t.isRecordedAudio)||!1})}},removeAttachment(e){this.attachedFiles=e},setReplyToInPayload(e){var t;return(t=this.inReplyTo)!=null&&t.id?{...e,contentAttributes:{...e.contentAttributes,in_reply_to:this.inReplyTo.id}}:e},getMultipleMessagesPayload(e){const t=[];if(this.attachedFiles&&this.attachedFiles.length){let s=this.isAnInstagramChannel?"":e;this.attachedFiles.forEach(a=>{const o=this.globalConfig.directUploadsEnabled?a.blobSignedId:a.resource.file;let i={conversationId:this.currentChat.id,files:[o],private:!1,message:s,sender:this.sender};i=this.setReplyToInPayload(i),t.push(i),this.isAnInstagramChannel||(s="")})}const n=!this.attachedFiles||!this.attachedFiles.length;if(this.isAnInstagramChannel&&this.message||!this.isAnInstagramChannel&&n){let s={conversationId:this.currentChat.id,message:e,private:!1,sender:this.sender};s=this.setReplyToInPayload(s),t.push(s)}return t},getMessagePayload(e){const t=this.getMessageWithQuotedEmailText(e);let n={conversationId:this.currentChat.id,message:t,private:this.isPrivate,sender:this.sender};return n=this.setReplyToInPayload(n),this.attachedFiles&&this.attachedFiles.length&&(n.files=[],this.attachedFiles.forEach(s=>{this.globalConfig.directUploadsEnabled?n.files.push(s.blobSignedId):n.files.push(s.resource.file)})),this.ccEmails&&!this.isOnPrivateNote&&(n.ccEmails=this.ccEmails),this.bccEmails&&!this.isOnPrivateNote&&(n.bccEmails=this.bccEmails),this.toEmails&&!this.isOnPrivateNote&&(n.toEmails=this.toEmails),n},setCcEmails(e){this.bccEmails=e.bccEmails,this.ccEmails=e.ccEmails},setCCAndToEmailsFromLastChat(){var i,l,r;const e=((r=(l=(i=this.currentChat)==null?void 0:i.meta)==null?void 0:l.sender)==null?void 0:r.email)||"",{email:t,forward_to_email:n}=this.inbox,{cc:s,bcc:a,to:o}=LN(this.lastEmail,e,t,n);this.toEmails=o.join(", "),this.ccEmails=s.join(", "),this.bccEmails=a.join(", ")},fetchAndSetReplyTo(){var n,s;const e=ao.MESSAGE_REPLY_TO,t=ka.getFromJsonStore(e,this.conversationId);this.inReplyTo=(s=(n=this.currentChat)==null?void 0:n.messages)==null?void 0:s.find(a=>a.id===t)},resetReplyToMessage(){const e=ao.MESSAGE_REPLY_TO;ka.deleteFromJsonStore(e,this.conversationId),Dt.emit(un.TOGGLE_REPLY_TO_MESSAGE)},onNewConversationModalActive(e){this.newConversationModalActive=e},onSearchPopoverClose(){this.showArticleSearchPopover=!1},toggleInsertArticle(){this.showArticleSearchPopover=!this.showArticleSearchPopover},resetAudioRecorderInput(){this.recordingAudioDurationText="00:00",this.isRecordingAudio=!1,this.recordingAudioState="",this.hasRecordedAudio=!1,this.attachedFiles=this.attachedFiles.filter(e=>!(e!=null&&e.isRecordedAudio))},togglePopout(){this.$emit("update:popOutReplyBox",!this.popOutReplyBox)}}},bwe={class:"reply-box__top"};function Twe(e,t,n,s,a,o){const i=W("ReplyBoxBanner"),l=W("ReplyTopPanel"),r=W("ArticleSearchPopover"),c=W("ReplyToMessage"),u=W("CannedResponse"),d=W("EmojiInput"),h=W("ReplyEmailHead"),g=W("AudioRecorder"),f=W("ResizableTextArea"),b=W("WootMessageEditor"),A=W("QuotedEmailPreview"),v=W("AttachmentPreview"),T=W("MessageSignatureMissingAlert"),_=W("ReplyBottomPanel"),N=W("WhatsappTemplates"),R=W("ContentTemplates"),O=W("woot-confirm-modal"),x=Qe("on-clickaway");return p(),E(ue,null,[S(i,{message:a.message,"is-on-private-note":o.isOnPrivateNote},null,8,["message","is-on-private-note"]),m("div",{ref:"replyEditor",class:ae(["reply-box",o.replyBoxClass])},[S(l,{mode:a.replyType,"is-reply-restricted":o.isReplyRestricted,"is-message-length-reaching-threshold":o.isMessageLengthReachingThreshold,"characters-remaining":o.charactersRemaining,"popout-reply-box":n.popOutReplyBox,onSetReplyMode:o.setReplyMode,onTogglePopout:o.togglePopout},null,8,["mode","is-reply-restricted","is-message-length-reaching-threshold","characters-remaining","popout-reply-box","onSetReplyMode","onTogglePopout"]),a.showArticleSearchPopover&&o.connectedPortalSlug?(p(),L(r,{key:0,"selected-portal-slug":o.connectedPortalSlug,onInsert:o.handleInsert,onClose:o.onSearchPopoverClose},null,8,["selected-portal-slug","onInsert","onClose"])):$("",!0),m("div",bwe,[o.shouldShowReplyToMessage?(p(),L(c,{key:0,message:a.inReplyTo,onDismiss:o.resetReplyToMessage},null,8,["message","onDismiss"])):$("",!0),a.showMentions&&a.hasSlashCommand?re((p(),L(u,{key:1,class:"normal-editor__canned-box","search-key":a.mentionSearchKey,onReplace:o.replaceText},null,8,["search-key","onReplace"])),[[x,o.hideMentions]]):$("",!0),a.showEmojiPicker?re((p(),L(d,{key:2,class:ae({"emoji-dialog--expanded":o.isOnExpandedLayout||n.popOutReplyBox}),"on-click":o.addIntoEditor},null,8,["class","on-click"])),[[x,o.hideEmojiPicker]]):$("",!0),o.showReplyHead?(p(),L(h,{key:3,"cc-emails":a.ccEmails,"onUpdate:ccEmails":t[0]||(t[0]=w=>a.ccEmails=w),"bcc-emails":a.bccEmails,"onUpdate:bccEmails":t[1]||(t[1]=w=>a.bccEmails=w),"to-emails":a.toEmails,"onUpdate:toEmails":t[2]||(t[2]=w=>a.toEmails=w)},null,8,["cc-emails","bcc-emails","to-emails"])):$("",!0),o.showAudioRecorderEditor?(p(),L(g,{key:4,ref:"audioRecorderInput","audio-record-format":o.audioRecordFormat,onRecorderProgressChanged:o.onRecordProgressChanged,onFinishRecord:o.onFinishRecorder,onPlay:t[3]||(t[3]=w=>a.recordingAudioState="playing"),onPause:t[4]||(t[4]=w=>a.recordingAudioState="paused")},null,8,["audio-record-format","onRecorderProgressChanged","onFinishRecord"])):o.showRichContentEditor?(p(),L(b,{key:6,modelValue:a.message,"onUpdate:modelValue":t[6]||(t[6]=w=>a.message=w),"editor-id":o.editorStateId,class:"input","is-private":o.isOnPrivateNote,placeholder:o.messagePlaceHolder,"update-selection-with":a.updateEditorSelectionWith,"min-height":4,"enable-variables":"",variables:o.messageVariables,signature:o.signatureToApply,"allow-signature":"","channel-type":e.channelType,onTypingOff:o.onTypingOff,onTypingOn:o.onTypingOn,onFocus:o.onFocus,onBlur:o.onBlur,onToggleUserMention:o.toggleUserMention,onToggleCannedMenu:o.toggleCannedMenu,onToggleVariablesMenu:o.toggleVariablesMenu,onClearSelection:o.clearEditorSelection},null,8,["modelValue","editor-id","is-private","placeholder","update-selection-with","variables","signature","channel-type","onTypingOff","onTypingOn","onFocus","onBlur","onToggleUserMention","onToggleCannedMenu","onToggleVariablesMenu","onClearSelection"])):(p(),L(f,{key:5,ref:"messageInput",modelValue:a.message,"onUpdate:modelValue":t[5]||(t[5]=w=>a.message=w),class:"rounded-none input",placeholder:o.messagePlaceHolder,"min-height":4,signature:o.signatureToApply,"allow-signature":"","send-with-signature":o.sendWithSignature,onTypingOff:o.onTypingOff,onTypingOn:o.onTypingOn,onFocus:o.onFocus,onBlur:o.onBlur},null,8,["modelValue","placeholder","signature","send-with-signature","onTypingOff","onTypingOn","onFocus","onBlur"])),o.shouldShowQuotedPreview?(p(),L(A,{key:7,"quoted-email-text":o.quotedEmailText,"preview-text":o.quotedEmailPreviewText,onToggle:o.toggleQuotedReply},null,8,["quoted-email-text","preview-text","onToggle"])):$("",!0)]),o.hasAttachments&&!o.showAudioRecorderEditor?(p(),E("div",{key:1,class:"attachment-preview-box",onPaste:t[7]||(t[7]=(...w)=>o.onPaste&&o.onPaste(...w))},[S(v,{class:"flex-col mt-4",attachments:a.attachedFiles,onRemoveAttachment:o.removeAttachment},null,8,["attachments","onRemoveAttachment"])],32)):$("",!0),o.isSignatureEnabledForInbox&&!o.isSignatureAvailable?(p(),L(T,{key:2})):$("",!0),S(_,{"conversation-id":o.conversationId,"enable-multiple-file-upload":o.enableMultipleFileUpload,"enable-whats-app-templates":o.showWhatsappTemplates,"enable-content-templates":o.showContentTemplates,inbox:o.inbox,"is-on-private-note":o.isOnPrivateNote,"is-recording-audio":a.isRecordingAudio,"is-send-disabled":o.isReplyButtonDisabled,"is-note":o.isPrivate,"on-file-upload":e.onFileUpload,"on-send":o.onSendReply,"conversation-type":o.conversationType,"recording-audio-duration-text":a.recordingAudioDurationText,"recording-audio-state":a.recordingAudioState,"send-button-text":o.replyButtonLabel,"show-audio-recorder":o.showAudioRecorder,"show-editor-toggle":e.isAPIInbox&&!o.isOnPrivateNote,"show-emoji-picker":a.showEmojiPicker,"show-file-upload":o.showFileUpload,"show-quoted-reply-toggle":o.shouldShowQuotedReplyToggle,"quoted-reply-enabled":o.quotedReplyPreference,"toggle-audio-recorder-play-pause":o.toggleAudioRecorderPlayPause,"toggle-audio-recorder":o.toggleAudioRecorder,"toggle-emoji-picker":o.toggleEmojiPicker,message:a.message,"portal-slug":o.connectedPortalSlug,"new-conversation-modal-active":a.newConversationModalActive,onSelectWhatsappTemplate:o.openWhatsappTemplateModal,onSelectContentTemplate:o.openContentTemplateModal,onToggleEditor:o.toggleRichContentEditor,onReplaceText:o.replaceText,onToggleInsertArticle:o.toggleInsertArticle,onToggleQuotedReply:o.toggleQuotedReply},null,8,["conversation-id","enable-multiple-file-upload","enable-whats-app-templates","enable-content-templates","inbox","is-on-private-note","is-recording-audio","is-send-disabled","is-note","on-file-upload","on-send","conversation-type","recording-audio-duration-text","recording-audio-state","send-button-text","show-audio-recorder","show-editor-toggle","show-emoji-picker","show-file-upload","show-quoted-reply-toggle","quoted-reply-enabled","toggle-audio-recorder-play-pause","toggle-audio-recorder","toggle-emoji-picker","message","portal-slug","new-conversation-modal-active","onSelectWhatsappTemplate","onSelectContentTemplate","onToggleEditor","onReplaceText","onToggleInsertArticle","onToggleQuotedReply"]),S(N,{"inbox-id":o.inbox.id,show:a.showWhatsAppTemplatesModal,onClose:o.hideWhatsappTemplatesModal,onOnSend:o.onSendWhatsAppReply,onCancel:o.hideWhatsappTemplatesModal},null,8,["inbox-id","show","onClose","onOnSend","onCancel"]),S(R,{"inbox-id":o.inbox.id,show:a.showContentTemplatesModal,onClose:o.hideContentTemplatesModal,onOnSend:o.onSendContentTemplateReply,onCancel:o.hideContentTemplatesModal},null,8,["inbox-id","show","onClose","onOnSend","onCancel"]),S(O,{ref:"confirmDialog",title:e.$t("CONVERSATION.REPLYBOX.UNDEFINED_VARIABLES.TITLE"),description:a.undefinedVariableMessage},null,8,["title","description"])],2)],64)}const Swe=De(Ewe,[["render",Twe],["__scopeId","data-v-4464cdf9"]]),as={INCOMING:0,OUTGOING:1,ACTIVITY:2,TEMPLATE:3},Cn={USER:"user",AGENT:"agent",ACTIVITY:"activity",PRIVATE:"private",BOT:"bot",ERROR:"error",TEMPLATE:"template",EMAIL:"email",UNSUPPORTED:"unsupported"},Wl={USER:"User",AGENT_BOT:"agent_bot",CAPTAIN_ASSISTANT:"captain_assistant"},cs={LEFT:"left",RIGHT:"right",CENTER:"center"},Tn={SENT:"sent",DELIVERED:"delivered",READ:"read",FAILED:"failed",PROGRESS:"progress"},is={IMAGE:"image",AUDIO:"audio",VIDEO:"video",FILE:"file",LOCATION:"location",FALLBACK:"fallback",SHARE:"share",STORY_MENTION:"story_mention",CONTACT:"contact",IG_REEL:"ig_reel"},Qa={TEXT:"text",INPUT_TEXT:"input_text",INPUT_TEXTAREA:"input_textarea",INPUT_EMAIL:"input_email",INPUT_SELECT:"input_select",CARDS:"cards",FORM:"form",ARTICLE:"article",INCOMING_EMAIL:"incoming_email",INPUT_CSAT:"input_csat",INTEGRATIONS:"integrations",STICKER:"sticker",VOICE_CALL:"voice_call"};is.IMAGE,is.VIDEO,is.AUDIO,is.IG_REEL;const pC=Symbol("MessageControl");function Jn(){const e=Ro(pC,null);if(e===null)throw new Error("Component is missing a parent <Message /> component.");const t=_e("getSelectedChatAttachments"),n=y(()=>{const s=t.value.filter(a=>[is.IMAGE,is.VIDEO,is.IG_REEL,is.AUDIO].includes(a.file_type));return Ts(s)});return{...e,filteredCurrentChatAttachments:n}}function Awe(e){Hn(pC,e)}const ywe={__name:"MessageStatus",props:{status:{type:String,required:!0,validator:e=>Object.values(Tn).includes(e)}},setup(e){const{t}=be(),n=["i-lucide-clock-1","i-lucide-clock-2","i-lucide-clock-3","i-lucide-clock-4","i-lucide-clock-5","i-lucide-clock-6","i-lucide-clock-7","i-lucide-clock-8","i-lucide-clock-9","i-lucide-clock-10","i-lucide-clock-11","i-lucide-clock-12"],s=j(n[0]);qO(()=>{const c=(n.indexOf(s.value)+1)%n.length;s.value=n[c]},500,{immediate:e.status===Tn.PROGRESS,immediateCallback:!1});const o=y(()=>({[Tn.SENT]:"i-lucide-check",[Tn.DELIVERED]:"i-lucide-check-check",[Tn.READ]:"i-lucide-check-check"})[e.status]),i=y(()=>({[Tn.SENT]:"text-n-slate-10",[Tn.DELIVERED]:"text-n-slate-10",[Tn.READ]:"text-[#7EB6FF]"})[e.status]),l=y(()=>({[Tn.SENT]:t("CHAT_LIST.SENT"),[Tn.DELIVERED]:t("CHAT_LIST.DELIVERED"),[Tn.READ]:t("CHAT_LIST.MESSAGE_READ"),[Tn.PROGRESS]:t("CHAT_LIST.SENDING")})[e.status]);return(r,c)=>{const u=Qe("tooltip");return e.status===C(Tn).PROGRESS?re((p(),L(dt,{key:0,icon:s.value,class:"text-n-slate-10"},null,8,["icon"])),[[u,l.value,void 0,{"top-start":!0}]]):re((p(),L(dt,{key:1,icon:o.value,class:ae([i.value,"size-[14px]"])},null,8,["icon","class"])),[[u,l.value,void 0,{"top-start":!0}]])}}},Iwe={class:"text-xs flex items-center gap-1.5"},Cwe={class:"inline"},Nwe={class:"inline"},Owe={__name:"MessageMeta",setup(e){const{isAFacebookInbox:t,isALineChannel:n,isAPIInbox:s,isASmsInbox:a,isATelegramChannel:o,isATwilioChannel:i,isAWebWidgetInbox:l,isAWhatsAppChannel:r,isAnEmailChannel:c,isAnInstagramChannel:u}=Np(),{status:d,isPrivate:h,createdAt:g,sourceId:f,messageType:b,contentAttributes:A}=Jn(),v=y(()=>tp(g.value,"LLL d, h:mm a")),T=y(()=>{var x;return h.value||d.value===Tn.FAILED||(x=A.value)!=null&&x.deleted?!1:b.value===as.OUTGOING||b.value===as.TEMPLATE}),_=y(()=>T.value?c.value?!!f.value:r.value||i.value||t.value||a.value||o.value||u.value?f.value&&d.value===Tn.SENT:!!n.value:!1),N=y(()=>T.value?r.value||i.value||a.value||t.value?f.value&&d.value===Tn.DELIVERED:l.value||s.value?d.value===Tn.SENT:n.value?d.value===Tn.DELIVERED:!1:!1),R=y(()=>T.value?r.value||i.value||t.value||u.value?f.value&&d.value===Tn.READ:l.value||s.value?d.value===Tn.READ:!1:!1),O=y(()=>R.value?Tn.READ:N.value?Tn.DELIVERED:_.value?Tn.SENT:Tn.PROGRESS);return(x,w)=>(p(),E("div",Iwe,[m("div",Cwe,[m("time",Nwe,I(v.value),1)]),C(h)?(p(),L(dt,{key:0,icon:"i-lucide-lock-keyhole",class:"size-3"})):$("",!0),T.value?(p(),L(ywe,{key:1,status:O.value},null,8,["status"])):$("",!0)]))}},Rwe={class:"break-all line-clamp-2"},Ya={__name:"Base",props:{hideMeta:{type:Boolean,default:!1}},setup(e){const t=e,{variant:n,orientation:s,inReplyTo:a,shouldGroupWithNext:o}=Jn(),{t:i}=be(),l={[Cn.AGENT]:"bg-n-solid-blue text-n-slate-12",[Cn.PRIVATE]:"bg-n-solid-amber text-n-amber-12 [&_.prosemirror-mention-node]:font-semibold",[Cn.USER]:"bg-n-slate-4 text-n-slate-12",[Cn.ACTIVITY]:"bg-n-alpha-1 text-n-slate-11 text-sm",[Cn.BOT]:"bg-n-solid-iris text-n-slate-12",[Cn.TEMPLATE]:"bg-n-solid-iris text-n-slate-12",[Cn.ERROR]:"bg-n-ruby-4 text-n-ruby-12",[Cn.EMAIL]:"w-full",[Cn.UNSUPPORTED]:"bg-n-solid-amber/70 border border-dashed border-n-amber-12 text-n-amber-12"},r={[cs.LEFT]:"left-bubble rounded-xl ltr:rounded-bl-sm rtl:rounded-br-sm",[cs.RIGHT]:"right-bubble rounded-xl ltr:rounded-br-sm rtl:rounded-bl-sm",[cs.CENTER]:"rounded-md"},c=y(()=>({[cs.LEFT]:"justify-start",[cs.RIGHT]:"justify-end",[cs.CENTER]:"justify-center"})[s.value]),u=y(()=>{const f=[l[n.value]];return n.value!==Cn.ACTIVITY?f.push(r[s.value]):f.push("rounded-lg"),f}),d=()=>{Dt.emit(un.SCROLL_TO_MESSAGE,{messageId:a.value.id})},h=y(()=>!t.hideMeta&&!o.value&&n.value!==Cn.ACTIVITY),g=y(()=>{if(!a)return"";const{content:f,attachments:b}=a.value;if(f)return f;if(b!=null&&b.length){const A=b[0],v=A.fileType??A.file_type;return i(`CHAT_LIST.ATTACHMENTS.${v}.CONTENT`)}return i("CONVERSATION.REPLY_MESSAGE_NOT_FOUND")});return(f,b)=>(p(),E("div",{class:ae(["text-sm",[u.value,{"max-w-lg":C(n)!==C(Cn).EMAIL}]])},[C(a)?(p(),E("div",{key:0,class:"p-2 -mx-1 mb-2 rounded-lg cursor-pointer bg-n-alpha-black1",onClick:d},[m("span",Rwe,I(g.value),1)])):$("",!0),We(f.$slots,"default"),h.value?(p(),L(Owe,{key:1,class:ae([[c.value,C(n)===C(Cn).EMAIL?"px-3 pb-3":"",C(n)===C(Cn).PRIVATE?"text-n-amber-12/50":"text-n-slate-11"],"mt-2"])},null,8,["class"])):$("",!0)],2))}},xwe={class:"prose prose-bubble"},mC={__name:"FormattedContent",props:{content:{type:String,required:!0}},setup(e){const t=e,{variant:n}=Jn(),s=y(()=>n.value===Cn.ACTIVITY?t.content:new np(t.content).formattedMessage);return(a,o)=>{const i=Qe("dompurify-html");return re((p(),E("span",xwe,null,512)),[[i,s.value]])}}},wwe=e=>{const i="center center",l=j(1),r=j(i),c=j(0),u=y(()=>({transform:`rotate(${c.value}deg)`})),d=y(()=>({transform:`scale(${l.value})`,cursor:l.value<3?"zoom-in":"zoom-out",transformOrigin:`${r.value}`})),h=()=>{e.value&&(r.value=i)},g=R=>{if(!e.value)return;h();const O=R==="clockwise"?90:-90;c.value=(c.value+O)%360,l.value=1,h()},f=(R,O)=>{if(!e.value)return{x:50,y:50};const x=e.value.getBoundingClientRect(),{relativeX:w,relativeY:D}=UN(R,O,x),{rotatedX:M,rotatedY:P}=FN(w,D,c.value);return GN(M,P,x.width,x.height)},b=(R,O,x)=>{if(!e.value)return;const w=Math.max(1,Math.min(3,l.value+R));if(w!==l.value){if(O!=null&&x!=null&&l.value===1){const{x:D,y:M}=f(O,x);r.value=`${D}% ${M}%`}l.value=w}},A=R=>{if(!e.value)return;R.preventDefault();const O=l.value>=3?1:3,{x,y:w}=f(R.clientX,R.clientY);r.value=`${x}% ${w}%`,l.value=O},v=R=>{if(!e.value)return;R.preventDefault();const O=R.deltaY>0?-.2:.2;b(O,R.clientX,R.clientY)},T=Ua(R=>{if(!e.value||l.value!==1)return;const{x:O,y:x}=f(R.clientX,R.clientY);r.value=`${O}% ${x}%`},100,!1),_=Ua(()=>{e.value&&l.value===1&&(r.value=i)},110,!1);return{zoomScale:l,imgTransformOriginPoint:r,activeImageRotation:c,imageWrapperStyle:u,imageStyle:d,getZoomOrigin:f,resetTransformOrigin:h,onRotate:g,onZoom:b,onDoubleClickZoomImage:A,onWheelImageZoom:v,onMouseMove:T,onMouseLeave:_,resetZoomAndRotation:()=>{c.value=0,l.value=1,h()}}},$we={key:0,class:"flex items-center min-w-[15rem] shrink-0"},Mwe={class:"flex flex-col ml-2 rtl:ml-0 rtl:mr-2 overflow-hidden"},Lwe={class:"text-base leading-5 m-0 font-medium"},Dwe={class:"overflow-hidden text-n-slate-12 whitespace-nowrap text-ellipsis"},Pwe={class:"text-xs text-n-slate-11 whitespace-nowrap text-ellipsis"},kwe={class:"flex-1 mx-2 px-2 truncate text-sm font-medium text-center text-n-slate-12"},Bwe={class:"truncate"},Uwe={class:"flex items-center gap-2 ml-2 shrink-0"},Fwe={class:"flex items-stretch flex-1 h-full overflow-hidden"},Gwe={class:"flex items-center justify-center w-16 shrink-0"},Vwe={class:"flex-1 flex items-center justify-center overflow-hidden"},Hwe=["src"],Wwe=["src"],zwe=["src"],Ywe={class:"flex items-center justify-center w-16 shrink-0"},jwe={class:"z-10 flex items-center justify-center h-12 border-t border-n-weak"},Kwe={class:"rounded-md flex items-center justify-center px-3 py-1 bg-n-slate-3 text-n-slate-12 text-sm font-medium"},Zp={__name:"GalleryView",props:jt({attachment:{type:Object,required:!0},allAttachments:{type:Array,required:!0}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:jt(["close"],["update:show"]),setup(e,{emit:t}){const n=e,s=t,a=Xt(e,"show"),{t:o}=be(),i=pn(),l={IMAGE:"image",VIDEO:"video",IG_REEL:"ig_reel",AUDIO:"audio"},r=j(!1),c=j({}),u=j(""),d=j(n.allAttachments.findIndex(ee=>ee.message_id===n.attachment.message_id)||0),h=Ss("imageRef"),{imageWrapperStyle:g,imageStyle:f,onRotate:b,activeImageRotation:A,onZoom:v,onDoubleClickZoomImage:T,onWheelImageZoom:_,onMouseMove:N,onMouseLeave:R,resetZoomAndRotation:O}=wwe(h),x=y(()=>i.getCurrentUser.value),w=y(()=>n.allAttachments.length>1),D=y(()=>{const{created_at:ee}=c.value;return ee&&tp(ee,"LLL d yyyy, h:mm a")||""}),M=y(()=>u.value===l.IMAGE),P=y(()=>[l.VIDEO,l.IG_REEL].includes(u.value)),U=y(()=>u.value===l.AUDIO),F=y(()=>{var J,de,Te;const{name:ee,available_name:X,avatar_url:z,thumbnail:H,id:q}=((J=c.value)==null?void 0:J.sender)||((de=n.attachment)==null?void 0:de.sender)||{};return{name:((Te=x.value)==null?void 0:Te.id)===q?"You":ee||X||"",avatar:H||z||""}}),k=y(()=>{const{data_url:ee}=c.value;if(!ee)return"";const X=ee.split("/").pop();return X?decodeURIComponent(X):""}),B=()=>s("close"),V=ee=>{const{file_type:X}=ee;Object.values(l).includes(X)&&(c.value=ee,u.value=X)},G=(ee,X)=>{ee&&(d.value=X,V(ee),O())},K=async()=>{const{file_type:ee,data_url:X,extension:z}=c.value;if(Object.values(l).includes(ee))try{r.value=!0,await pg({url:X,type:ee,extension:z})}catch{ne(o("GALLERY_VIEW.ERROR_DOWNLOADING"))}finally{r.value=!1}};return Os({Escape:{action:B},ArrowLeft:{action:()=>{G(n.allAttachments[d.value-1],d.value-1)}},ArrowRight:{action:()=>{G(n.allAttachments[d.value+1],d.value+1)}}}),lt(()=>{V(n.attachment)}),(ee,X)=>{const z=W("woot-modal"),H=Qe("dompurify-html");return p(),L(Td,{to:"body"},{default:Y(()=>[S(z,{show:a.value,"onUpdate:show":X[14]||(X[14]=q=>a.value=q),"full-width":"","show-close-button":!1,"on-close":B},{default:Y(()=>[m("div",{class:"bg-n-background flex flex-col h-[inherit] w-[inherit] overflow-hidden select-none",onClick:B},[m("header",{class:"z-10 flex items-center justify-between w-full h-16 px-6 py-2 bg-n-background border-b border-n-weak",onClick:X[4]||(X[4]=Ve(()=>{},["stop"]))},[F.value?(p(),E("div",$we,[F.value.avatar?(p(),L(kt,{key:0,name:F.value.name,src:F.value.avatar,size:40,"rounded-full":"",class:"flex-shrink-0"},null,8,["name","src"])):$("",!0),m("div",Mwe,[m("h3",Lwe,[m("span",Dwe,I(F.value.name),1)]),m("span",Pwe,I(D.value),1)])])):$("",!0),m("div",kwe,[re(m("span",Bwe,null,512),[[H,k.value]])]),m("div",Uwe,[M.value?(p(),L(te,{key:0,icon:"i-lucide-zoom-in",slate:"",ghost:"",onClick:X[0]||(X[0]=q=>C(v)(.1))})):$("",!0),M.value?(p(),L(te,{key:1,icon:"i-lucide-zoom-out",slate:"",ghost:"",onClick:X[1]||(X[1]=q=>C(v)(-.1))})):$("",!0),M.value?(p(),L(te,{key:2,icon:"i-lucide-rotate-ccw",slate:"",ghost:"",onClick:X[2]||(X[2]=q=>C(b)("counter-clockwise"))})):$("",!0),M.value?(p(),L(te,{key:3,icon:"i-lucide-rotate-cw",slate:"",ghost:"",onClick:X[3]||(X[3]=q=>C(b)("clockwise"))})):$("",!0),S(te,{icon:"i-lucide-download",slate:"",ghost:"","is-loading":r.value,disabled:r.value,onClick:K},null,8,["is-loading","disabled"]),S(te,{icon:"i-lucide-x",slate:"",ghost:"",onClick:B})])]),m("main",Fwe,[m("div",Gwe,[w.value?(p(),L(te,{key:0,icon:"ltr:i-lucide-chevron-left rtl:i-lucide-chevron-right",class:"z-10",blue:"",faded:"",lg:"",disabled:d.value===0,onClick:X[5]||(X[5]=Ve(q=>G(e.allAttachments[d.value-1],d.value-1),["stop"]))},null,8,["disabled"])):$("",!0)]),m("div",Vwe,[M.value?(p(),E("div",{key:0,style:Zt(C(g)),class:ae(["flex items-center justify-center origin-center",{"w-[calc(100dvh-8rem)] h-[calc(100dvw-7rem)]":C(A)%180!==0,"size-full":C(A)%180===0}])},[(p(),E("img",{ref_key:"imageRef",ref:h,key:c.value.message_id,src:c.value.data_url,style:Zt(C(f)),class:"max-h-full max-w-full object-contain duration-100 ease-in-out transform select-none",onClick:X[6]||(X[6]=Ve(()=>{},["stop"])),onDblclick:X[7]||(X[7]=Ve((...q)=>C(T)&&C(T)(...q),["stop"])),onWheel:X[8]||(X[8]=Ve((...q)=>C(_)&&C(_)(...q),["prevent","stop"])),onMousemove:X[9]||(X[9]=(...q)=>C(N)&&C(N)(...q)),onMouseleave:X[10]||(X[10]=(...q)=>C(R)&&C(R)(...q))},null,44,Hwe))],6)):$("",!0),P.value?(p(),E("video",{key:c.value.message_id,src:c.value.data_url,controls:"",playsInline:"",class:"max-h-full max-w-full object-contain",onClick:X[11]||(X[11]=Ve(()=>{},["stop"]))},null,8,Wwe)):$("",!0),U.value?(p(),E("audio",{key:c.value.message_id,controls:"",class:"w-full max-w-md",onClick:X[12]||(X[12]=Ve(()=>{},["stop"]))},[m("source",{src:`${c.value.data_url}?t=${Date.now()}`},null,8,zwe)])):$("",!0)]),m("div",Ywe,[w.value?(p(),L(te,{key:0,icon:"ltr:i-lucide-chevron-right rtl:i-lucide-chevron-left",class:"z-10",blue:"",faded:"",lg:"",disabled:d.value===e.allAttachments.length-1,onClick:X[13]||(X[13]=Ve(q=>G(e.allAttachments[d.value+1],d.value+1),["stop"]))},null,8,["disabled"])):$("",!0)])]),m("footer",jwe,[m("div",Kwe,I(`${d.value+1} / ${e.allAttachments.length}`),1)])])]),_:1},8,["show"])]),_:1})}}},Xwe={key:0,class:"flex flex-col items-center justify-center gap-1 text-xs text-center rounded-lg size-full bg-n-alpha-1 text-n-slate-11"},qwe=["src"],Zwe={__name:"Image",props:{attachment:{type:Object,required:!0}},setup(e){const t=j(!1),n=j(!1),{filteredCurrentChatAttachments:s}=Jn(),a=()=>{t.value=!0};return(o,i)=>(p(),E(ue,null,[m("div",{class:"size-[72px] overflow-hidden contain-content rounded-xl cursor-pointer",onClick:i[0]||(i[0]=l=>n.value=!0)},[t.value?(p(),E("div",Xwe,[S(dt,{icon:"i-lucide-circle-off",class:"text-n-slate-11"}),xe(" "+I(o.$t("COMPONENTS.MEDIA.LOADING_FAILED")),1)])):(p(),E("img",{key:1,class:"object-cover w-full h-full skip-context-menu",src:e.attachment.dataUrl,onError:a},null,40,qwe))]),n.value?(p(),L(Zp,{key:0,show:n.value,"onUpdate:show":i[1]||(i[1]=l=>n.value=l),attachment:C(Ts)(e.attachment),"all-attachments":C(s),onError:a,onClose:i[2]||(i[2]=()=>n.value=!1)},null,8,["show","attachment","all-attachments"])):$("",!0)],64))}},Qwe=["src"],Jwe={class:"absolute w-full h-full inset-0 p-1 flex items-center justify-center"},e$e={class:"size-7 bg-n-slate-1/60 backdrop-blur-sm rounded-full overflow-hidden shadow-[0_5px_15px_rgba(0,0,0,0.4)]"},t$e={__name:"Video",props:{attachment:{type:Object,required:!0}},setup(e){const t=j(!1),{filteredCurrentChatAttachments:n}=Jn();return(s,a)=>(p(),E(ue,null,[m("div",{class:"size-[72px] overflow-hidden contain-content rounded-xl cursor-pointer relative group",onClick:a[0]||(a[0]=o=>t.value=!0)},[m("video",{src:e.attachment.dataUrl,class:"w-full h-full object-cover",muted:"",playsInline:""},null,8,Qwe),m("div",Jwe,[m("div",e$e,[S(dt,{icon:"i-teenyicons-play-small-solid",class:"size-7 text-n-slate-12/80 backdrop-blur"})])])]),t.value?(p(),L(Zp,{key:0,show:t.value,"onUpdate:show":a[1]||(a[1]=o=>t.value=o),attachment:C(Ts)(e.attachment),"all-attachments":C(n),onError:s.onError,onClose:a[2]||(a[2]=()=>t.value=!1)},null,8,["show","attachment","all-attachments","onError"])):$("",!0)],64))}},n$e=["src"],s$e={class:"flex gap-1 w-full flex-1 items-center justify-start"},a$e={class:"tabular-nums text-xs"},o$e={class:"flex-1 items-center flex px-2"},i$e=["max","value"],l$e={class:"text-xs text-n-slate-11 font-medium"},r$e={key:0,class:"text-n-slate-12 p-3 text-sm bg-n-alpha-1 rounded-lg w-full break-words"},hC=Object.assign({inheritAttrs:!1},{__name:"Audio",props:{attachment:{type:Object,required:!0}},setup(e){const t=y(()=>ZO(e.attachment.dataUrl)),n=Ss("audioPlayer"),s=j(!1),a=j(!1),o=j(0),i=j(0),l=j(1),{uid:r}=rS(),c=()=>{var _;i.value=(_=n.value)==null?void 0:_.duration},u=y(()=>`${l.value}x`);lt(()=>{var _;i.value=(_=n.value)==null?void 0:_.duration,n.value.playbackRate=l.value}),Yo("pause_playing_audio",_=>{if(_!==r&&s.value){try{n.value.pause()}catch{}s.value=!1}});const d=_=>{if(!_||Number.isNaN(_))return"00:00";const N=Math.floor(_/60),R=Math.floor(_%60);return`${N.toString().padStart(2,"0")}:${R.toString().padStart(2,"0")}`},h=()=>{n.value.muted=!n.value.muted,a.value=n.value.muted},g=()=>{var _;o.value=(_=n.value)==null?void 0:_.currentTime},f=_=>{const N=Number(_.target.value);n.value.currentTime=N,o.value=N},b=()=>{s.value?(n.value.pause(),s.value=!1):(Dt.emit("pause_playing_audio",r),n.value.play(),s.value=!0)},A=()=>{s.value=!1,o.value=0,l.value=1,n.value.playbackRate=1},v=()=>{const _=[1,1.5,2],R=(_.indexOf(l.value)+1)%_.length;l.value=_[R],n.value.playbackRate=l.value},T=async()=>{const{fileType:_,dataUrl:N,extension:R}=e.attachment;pg({url:N,type:_,extension:R})};return(_,N)=>(p(),E(ue,null,[m("audio",{ref_key:"audioPlayer",ref:n,controls:"",class:"hidden",playsinline:"",onLoadedmetadata:c,onTimeupdate:g,onEnded:A},[m("source",{src:t.value},null,8,n$e)],544),m("div",Qn(_.$attrs,{class:"rounded-xl w-full gap-2 p-1.5 bg-n-alpha-white flex flex-col items-center border border-n-container shadow-[0px_2px_8px_0px_rgba(94,94,94,0.06)]"}),[m("div",s$e,[m("button",{class:"p-0 border-0 size-8",onClick:b},[s.value?(p(),L(dt,{key:0,class:"size-8",icon:"i-teenyicons-pause-small-solid"})):(p(),L(dt,{key:1,class:"size-8",icon:"i-teenyicons-play-small-solid"}))]),m("div",a$e,I(d(o.value))+" / "+I(d(i.value)),1),m("div",o$e,[m("input",{type:"range",min:"0",max:i.value,value:o.value,class:"w-full h-1 bg-n-slate-12/40 rounded-lg appearance-none cursor-pointer accent-current",onInput:f},null,40,i$e)]),m("button",{class:"border-0 w-10 h-6 grid place-content-center bg-n-alpha-2 hover:bg-alpha-3 rounded-2xl",onClick:v},[m("span",l$e,I(u.value),1)]),m("button",{class:"p-0 border-0 size-8 grid place-content-center",onClick:h},[a.value?(p(),L(dt,{key:0,class:"size-4",icon:"i-lucide-volume-off"})):(p(),L(dt,{key:1,class:"size-4",icon:"i-lucide-volume-2"}))]),m("button",{class:"p-0 border-0 size-8 grid place-content-center",onClick:T},[S(dt,{class:"size-4",icon:"i-lucide-download"})])]),e.attachment.transcribedText?(p(),E("div",r$e,I(e.attachment.transcribedText),1)):$("",!0)],16)],64))}}),fC={__name:"FileIcon",props:{fileType:{type:String,required:!0}},setup(e){const t=y(()=>({"7z":"i-woot-file-zip",csv:"i-woot-file-csv",doc:"i-woot-file-doc",docx:"i-woot-file-doc",json:"i-woot-file-txt",odt:"i-woot-file-doc",pdf:"i-woot-file-pdf",ppt:"i-woot-file-ppt",pptx:"i-woot-file-ppt",rar:"i-woot-file-zip",rtf:"i-woot-file-doc",tar:"i-woot-file-zip",txt:"i-woot-file-txt",xls:"i-woot-file-xls",xlsx:"i-woot-file-xls",zip:"i-woot-file-zip"})[e.fileType]||"i-teenyicons-text-document-solid");return(n,s)=>(p(),L(dt,{icon:t.value},null,8,["icon"]))}},c$e={class:"h-9 bg-n-alpha-white gap-2 overflow-hidden items-center flex px-2 rounded-lg border border-n-container"},u$e=["title"],d$e=["href"],p$e={__name:"File",props:{attachment:{type:Object,required:!0}},setup(e){const{t}=be(),n=y(()=>{var o;return VN(((o=e.attachment)==null?void 0:o.dataUrl)||"")}),s=y(()=>{const{base:o,type:i}=n.value,l=(r,c,u)=>r.length>c?`${r.substring(0,c).trimEnd()}${u?"..":"..."}`:r;return i?`${l(o,12,!0)}.${i}`:l(o,14,!1)}),a=y(()=>({"7z":"dark:text-[#EDEEF0] text-[#2F265F]",csv:"text-n-amber-12",doc:"dark:text-[#D6E1FF] text-[#1F2D5C]",docx:"dark:text-[#D6E1FF] text-[#1F2D5C]",json:"text-n-slate-12",odt:"dark:text-[#D6E1FF] text-[#1F2D5C]",pdf:"text-n-slate-12",ppt:"dark:text-[#FFE0C2] text-[#582D1D]",pptx:"dark:text-[#FFE0C2] text-[#582D1D]",rar:"dark:text-[#EDEEF0] text-[#2F265F]",rtf:"dark:text-[#D6E1FF] text-[#1F2D5C]",tar:"dark:text-[#EDEEF0] text-[#2F265F]",txt:"text-n-slate-12",xls:"text-n-teal-12",xlsx:"text-n-teal-12",zip:"dark:text-[#EDEEF0] text-[#2F265F]"})[n.value.type]||"text-n-slate-12");return(o,i)=>{const l=Qe("tooltip");return p(),E("div",c$e,[S(fC,{class:"flex-shrink-0","file-type":n.value.type},null,8,["file-type"]),m("span",{class:ae(["flex-1 min-w-0 text-sm max-w-36",a.value]),title:n.value.name},I(s.value),11,u$e),re((p(),E("a",{class:"flex-shrink-0 size-9 grid place-content-center cursor-pointer text-n-slate-11 hover:text-n-slate-12 transition-colors",href:e.attachment.dataUrl,rel:"noreferrer noopener nofollow",target:"_blank"},[S(dt,{icon:"i-lucide-download"})],8,d$e)),[[l,C(t)("CONVERSATION.DOWNLOAD")]])])}}},gC=Object.assign({inheritAttrs:!1},{__name:"AttachmentChips",props:{attachments:{type:Array,default:()=>[]}},setup(e){const t=e,n=rg(),{orientation:s}=Jn(),a=y(()=>{const c=[n.class,"flex","flex-wrap"];return s.value==="right"&&c.push("justify-end"),c}),o=y(()=>Array.isArray(t.attachments)?t.attachments:[]),i=y(()=>{const c=[is.IMAGE,is.VIDEO];return o.value.filter(d=>c.includes(d.fileType)).sort((d,h)=>c.indexOf(d.fileType)-c.indexOf(h.fileType))}),l=y(()=>o.value.filter(c=>c.fileType===is.AUDIO)),r=y(()=>o.value.filter(c=>c.fileType===is.FILE));return(c,u)=>(p(),E(ue,null,[i.value.length?(p(),E("div",{key:0,class:ae(a.value)},[(p(!0),E(ue,null,Ae(i.value,d=>(p(),E(ue,{key:d.id},[d.fileType===C(is).IMAGE?(p(),L(Zwe,{key:0,attachment:d},null,8,["attachment"])):d.fileType===C(is).VIDEO?(p(),L(t$e,{key:1,attachment:d},null,8,["attachment"])):$("",!0)],64))),128))],2)):$("",!0),l.value.length?(p(),E("div",{key:1,class:ae(a.value)},[(p(!0),E(ue,null,Ae(l.value,d=>(p(),E("div",{key:d.id},[S(hC,{class:"bg-n-alpha-3 dark:bg-n-alpha-2 text-n-slate-12",attachment:d},null,8,["attachment"])]))),128))],2)):$("",!0),r.value.length?(p(),E("div",{key:2,class:ae(a.value)},[(p(!0),E(ue,null,Ae(r.value,d=>(p(),L(p$e,{key:d.id,attachment:d},null,8,["attachment"]))),128))],2)):$("",!0)],64))}}),_C={__name:"TranslationToggle",props:{showingOriginal:Boolean},emits:["toggle"],setup(e){return(t,n)=>(p(),E("span",null,[m("span",{class:"text-xs text-n-slate-11 cursor-pointer hover:underline select-none",onClick:n[0]||(n[0]=s=>t.$emit("toggle"))},I(e.showingOriginal?t.$t("CONVERSATION.VIEW_TRANSLATED"):t.$t("CONVERSATION.VIEW_ORIGINAL")),1)]))}};function vC(e){const t=y(()=>{if(!e.value)return!1;const{translations:s={}}=e.value;return Object.keys(s||{}).length>0}),n=y(()=>{if(!t.value)return null;const s=e.value.translations;return s[Object.keys(s)[0]]});return{hasTranslations:t,translationContent:n}}const m$e={class:"gap-3 flex flex-col"},h$e={key:0,class:"text-n-slate-11"},f$e={key:0,class:"px-2 py-1 rounded-lg bg-n-alpha-3"},g$e={__name:"Index",setup(e){const{content:t,attachments:n,contentAttributes:s,messageType:a}=Jn(),{hasTranslations:o,translationContent:i}=vC(s),l=j(!1),r=y(()=>l.value?t.value:o.value?i.value:t.value),c=y(()=>a.value===as.TEMPLATE),u=y(()=>{var h;return!t.value&&!((h=n.value)!=null&&h.length)}),d=()=>{l.value=!l.value};return(h,g)=>(p(),L(Ya,{class:"px-4 py-3","data-bubble-name":"text"},{default:Y(()=>[m("div",m$e,[u.value?(p(),E("span",h$e,I(h.$t("CONVERSATION.NO_CONTENT")),1)):$("",!0),r.value?(p(),L(mC,{key:1,content:r.value},null,8,["content"])):$("",!0),C(o)?(p(),L(_C,{key:2,class:"-mt-3","showing-original":l.value,onToggle:d},null,8,["showing-original"])):$("",!0),S(gC,{attachments:C(n),class:"gap-2"},null,8,["attachments"]),c.value?(p(),E(ue,{key:3},[C(s).submittedEmail?(p(),E("div",f$e,I(C(s).submittedEmail),1)):$("",!0)],64)):$("",!0)])]),_:1}))}},_$e=["title"],v$e={__name:"Activity",setup(e){const{content:t,createdAt:n}=Jn(),s=y(()=>tp(n.value,"LLL d, h:mm a"));return(a,o)=>{const i=Qe("dompurify-html"),l=Qe("tooltip");return re((p(),L(Ya,{class:"px-3 py-1 !rounded-xl flex min-w-0 items-center gap-2","data-bubble-name":"activity"},{default:Y(()=>[re(m("span",{title:C(t)},null,8,_$e),[[i,C(t)]])]),_:1})),[[l,s.value,void 0,{top:!0}]])}}},E$e={key:0,class:"flex items-center gap-1 text-center rounded-lg"},b$e={class:"mb-0 text-n-slate-11"},T$e={key:1,class:"relative group rounded-lg overflow-hidden"},S$e=["src","width","height"],A$e={class:"absolute right-2 bottom-2 hidden group-hover:flex gap-2"},y$e={__name:"Image",emits:["error"],setup(e,{emit:t}){const n=t,{t:s}=be(),{filteredCurrentChatAttachments:a,attachments:o}=Jn(),i=y(()=>o.value[0]),l=j(!1),r=j(!1),c=j(!1),u=()=>{l.value=!0,n("error")},d=async()=>{const{fileType:h,dataUrl:g,extension:f}=i.value;try{c.value=!0,await pg({url:g,type:h,extension:f})}catch{ne(s("GALLERY_VIEW.ERROR_DOWNLOADING"))}finally{c.value=!1}};return(h,g)=>(p(),E(ue,null,[S(Ya,{class:"overflow-hidden p-3","data-bubble-name":"image",onClick:g[1]||(g[1]=f=>r.value=!0)},{default:Y(()=>[l.value?(p(),E("div",E$e,[S(dt,{icon:"i-lucide-circle-off",class:"text-n-slate-11"}),m("p",b$e,I(h.$t("COMPONENTS.MEDIA.IMAGE_UNAVAILABLE")),1)])):(p(),E("div",T$e,[m("img",{class:"skip-context-menu",src:i.value.dataUrl,width:i.value.width,height:i.value.height,onClick:g[0]||(g[0]=(...f)=>h.onClick&&h.onClick(...f)),onError:u},null,40,S$e),g[4]||(g[4]=m("div",{class:"inset-0 p-2 pointer-events-none absolute bg-gradient-to-tl from-n-slate-12/30 dark:from-n-slate-1/50 via-transparent to-transparent hidden group-hover:flex"},null,-1)),m("div",A$e,[S(te,{xs:"",solid:"",slate:"",icon:"i-lucide-expand",class:"opacity-60"}),S(te,{xs:"",solid:"",slate:"",icon:"i-lucide-download",class:"opacity-60","is-loading":c.value,disabled:c.value,onClick:Ve(d,["stop"])},null,8,["is-loading","disabled"])])]))]),_:1}),r.value?(p(),L(Zp,{key:0,show:r.value,"onUpdate:show":g[2]||(g[2]=f=>r.value=f),attachment:C(Ts)(i.value),"all-attachments":C(a),onError:u,onClose:g[3]||(g[3]=()=>r.value=!1)},null,8,["show","attachment","all-attachments"])):$("",!0)],64))}},I$e={class:"grid gap-4 min-w-64"},C$e={class:"grid gap-3"},N$e={class:"space-y-1 overflow-hidden"},O$e={key:0,class:"text-n-slate-12 text-sm truncate"},R$e={key:0,class:"truncate text-sm text-n-slate-12"},x$e={key:1,class:"truncate text-sm text-n-slate-11"},w$e={key:0,class:"mb-2"},$$e=["href"],Qp={__name:"BaseAttachment",props:{icon:{type:[String,Object],required:!0},iconBgColor:{type:String,default:"bg-n-alpha-3"},senderTranslationKey:{type:String,required:!0},content:{type:String,required:!0},title:{type:String,default:""},action:{type:Object,required:!0,validator:e=>e.label&&(e.href||e.onClick)}},setup(e){const{sender:t}=Jn(),{t:n}=be(),s=y(()=>{var a;return((a=t==null?void 0:t.value)==null?void 0:a.name)||""});return(a,o)=>(p(),L(Ya,{class:"overflow-hidden p-3","data-bubble-name":"attachment"},{default:Y(()=>[m("div",I$e,[m("div",C$e,[m("div",{class:ae(["size-8 rounded-lg grid place-content-center",e.iconBgColor])},[We(a.$slots,"icon",{},()=>[S(dt,{icon:e.icon,class:"text-white size-4"},null,8,["icon"])])],2),m("div",N$e,[s.value?(p(),E("div",O$e,I(C(n)(e.senderTranslationKey,{sender:s.value})),1)):$("",!0),We(a.$slots,"default",{},()=>[e.title?(p(),E("div",R$e,I(e.title),1)):$("",!0),e.content?(p(),E("div",x$e,I(e.content),1)):$("",!0)])])]),e.action?(p(),E("div",w$e,[e.action.href?(p(),E("a",{key:0,href:e.action.href,rel:"noreferrer noopener nofollow",target:"_blank",class:"w-full block bg-n-solid-3 px-4 py-2 rounded-lg text-sm text-center border border-n-container"},I(e.action.label),9,$$e)):(p(),E("button",{key:1,class:"w-full bg-n-solid-3 px-4 py-2 rounded-lg text-sm text-center border border-n-container",onClick:o[0]||(o[0]=(...i)=>e.action.onClick&&e.action.onClick(...i))},I(e.action.label),1))])):$("",!0)])]),_:3}))}},M$e={__name:"File",setup(e){const{attachments:t}=Jn(),{t:n}=be(),s=y(()=>t.value[0].dataUrl),a=y(()=>s.value&&s.value.substring(s.value.lastIndexOf("/")+1)||n("CONVERSATION.UNKNOWN_FILE_TYPE")),o=y(()=>a.value.split(".").pop());return(i,l)=>(p(),L(Qp,{icon:"i-teenyicons-user-circle-solid","icon-bg-color":"bg-n-alpha-3 dark:bg-n-alpha-white","sender-translation-key":"CONVERSATION.SHARED_ATTACHMENT.FILE",content:decodeURI(a.value),action:{href:s.value,label:i.$t("CONVERSATION.DOWNLOAD")}},{icon:Y(()=>[S(fC,{"file-type":o.value,class:"size-4"},null,8,["file-type"])]),_:1},8,["content","action"]))}},L$e={__name:"Audio",setup(e){const{attachments:t}=Jn(),n=y(()=>t.value[0]);return(s,a)=>(p(),L(Ya,{class:"bg-transparent","data-bubble-name":"audio"},{default:Y(()=>[S(hC,{attachment:n.value,class:"p-2 text-n-slate-12 skip-context-menu"},null,8,["attachment"])]),_:1}))}},D$e={class:"relative group rounded-lg overflow-hidden"},P$e={key:0,class:"absolute p-2 flex items-start justify-end right-0 pointer-events-none"},k$e=["src"],MT={__name:"Video",emits:["error"],setup(e,{emit:t}){const n=t,s=j(!1),a=j(!1),{filteredCurrentChatAttachments:o,attachments:i}=Jn(),l=()=>{s.value=!0,n("error")},r=y(()=>i.value[0]),c=y(()=>r.value.fileType===is.IG_REEL);return(u,d)=>(p(),E(ue,null,[S(Ya,{class:"overflow-hidden p-3","data-bubble-name":"video",onClick:d[1]||(d[1]=h=>a.value=!0)},{default:Y(()=>[m("div",D$e,[c.value?(p(),E("div",P$e,[S(dt,{icon:"i-lucide-instagram",class:"text-white shadow-lg"})])):$("",!0),m("video",{controls:"",class:ae(["rounded-lg skip-context-menu",{"max-w-48":c.value,"max-w-full":!c.value}]),src:r.value.dataUrl,onClick:d[0]||(d[0]=Ve(()=>{},["stop"])),onError:l},null,42,k$e)])]),_:1}),a.value?(p(),L(Zp,{key:0,show:a.value,"onUpdate:show":d[2]||(d[2]=h=>a.value=h),attachment:C(Ts)(r.value),"all-attachments":C(o),onError:u.onError,onClose:d[3]||(d[3]=()=>a.value=!1)},null,8,["show","attachment","all-attachments","onError"])):$("",!0)],64))}},B$e={key:0,class:"mb-2"},U$e=["src"],F$e=["src"],G$e={key:3,class:"flex items-center gap-1 px-5 py-4 text-center rounded-lg bg-n-alpha-1"},V$e={class:"mb-0 text-n-slate-11"},H$e={__name:"InstagramStory",emits:["error"],setup(e,{emit:t}){const n=t,{variant:s,content:a,attachments:o}=Jn(),i=y(()=>o.value[0]),l=j(!1),r=j(!1),c=y(()=>s.value===Cn.ACTIVITY?a.value:new np(a.value).formattedMessage),u=()=>{l.value=!0,n("error")},d=()=>{r.value=!0,n("error")};return(h,g)=>{const f=Qe("dompurify-html");return p(),L(Ya,{class:"p-3 overflow-hidden","data-bubble-name":"ig-story"},{default:Y(()=>[C(a)?re((p(),E("div",B$e,null,512)),[[f,c.value]]):$("",!0),l.value?r.value?(p(),E("div",G$e,[S(dt,{icon:"i-lucide-circle-off",class:"text-n-slate-11"}),m("p",V$e,I(h.$t("COMPONENTS.FILE_BUBBLE.INSTAGRAM_STORY_UNAVAILABLE")),1)])):(p(),E("video",{key:2,class:"rounded-lg max-w-80 skip-context-menu",controls:"",src:i.value.dataUrl,onError:d},null,40,F$e)):(p(),E("img",{key:1,class:"rounded-lg max-w-80 skip-context-menu",src:i.value.dataUrl,onError:u},null,40,U$e))]),_:1})}}},LT={a:["class","href","id","style","target"],address:["class","id","style"],b:["class","id","style"],blockquote:["class","id","style"],br:["class","id","style"],caption:["class","id","style"],cite:["class","id","style"],code:["class","id","style"],col:["align","bgcolor","char","charoff","class","id","style","valign","width"],colgroup:["align","bgcolor","char","charoff","class","id","style","valign","width"],center:["class","id","style"],dd:["class","id","style"],div:["align","class","dir","id","style"],dt:["class","id","style"],em:["class","id","style"],font:["class","color","face","id","size","style"],h1:["align","class","dir","id","style"],h2:["align","class","dir","id","style"],h3:["align","class","dir","id","style"],h4:["align","class","dir","id","style"],h5:["align","class","dir","id","style"],h6:["align","class","dir","id","style"],hr:["align","size","width"],i:["class","id","style"],img:["align","alt","border","class","height","hspace","id","src","style","title","usemap","vspace","width"],label:["class","id","style"],legend:["class","id","style"],li:["class","dir","id","style","type"],ol:["class","dir","id","style","type","start","reversed"],p:["align","class","dir","id","style"],pre:["class","id","style"],span:["class","id","style"],strong:["class","id","style"],style:[],sub:["class","id","style"],sup:["class","id","style"],table:["align","bgcolor","border","cellpadding","cellspacing","class","dir","frame","id","rules","style","width"],tbody:["class","id","style"],td:["abbr","align","bgcolor","class","colspan","dir","height","id","lang","rowspan","scope","style","valign","width"],tfoot:["align","bgcolor","char","charoff","class","id","style","valign"],th:["abbr","align","bgcolor","class","colspan","dir","height","id","lang","rowspan","scope","style","valign","width"],thead:["align","bgcolol","char","charoff","class","id","style","valign"],tr:["align","bgcolor","char","charoff","class","dir","id","style","valign"],u:["class","id","style"],ul:["class","dir","id","style"]},W$e=["script","iframe","textarea","title","noscript","noembed","svg"],z$e=["azimuth","background","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-repeat-x","background-repeat-y","background-size","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","box-sizing","break-after","break-before","break-inside","caption-side","clear","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","direction","display","elevation","empty-cells","float","font","font-family","font-feature-settings","font-kerning","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-weight","height","image-orientation","image-resolution","ime-mode","isolation","layout-flow","layout-grid","layout-grid-char","layout-grid-char-spacing","layout-grid-line","layout-grid-mode","layout-grid-type","letter-spacing","line-break","line-height","list-style","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","max-height","max-width","min-height","min-width","mix-blend-mode","object-fit","object-position","opacity","outline","outline-color","outline-style","outline-width","overflow","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","pitch","pitch-range","quotes","richness","speak","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","table-layout","text-align","text-align-last","text-autospace","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-style","text-indent","text-justify","text-kashida-space","text-orientation","text-overflow","text-transform","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","unicode-bidi","vertical-align","voice-family","white-space","white-space-collapse","width","word-break","word-spacing","word-wrap","writing-mode","zoom"];function Y$e(e,t){return t?e.split(",").map(n=>n.trim()).map(n=>{const s=n.replace(/\./g,"."+t+"_").replace(/#/g,"#"+t+"_");return s.toLowerCase().startsWith("body")?"#"+t+" "+s.substring(4):"#"+t+" "+s}).join(","):e}function j$e(e,t,n){return e.trim().replace(/expression\((.*?)\)/g,"").replace(/url\(["']?(.*?)["']?\)/g,(s,a)=>n?`url("${encodeURI(n(decodeURI(a)))}")`:t.includes(a.toLowerCase().split(":")[0])?s:"")}function EC(e,t,n,s,a){if(!e)return;const o=[];for(let i=0;i<e.length;i++){const l=e[i];o.push(l)}for(const i of o)if(n.includes(i)){const l=e.getPropertyValue(i);e.setProperty(i,j$e(l,t,a),s?e.getPropertyPriority(i):void 0)}else e.removeProperty(i)}function DT(e,t,n,s,a,o){e.selectorText=Y$e(e.selectorText,t),EC(e.style,n,s,a,o)}const PT=["http","https","mailto"];function K$e(e,{dropAllHtmlTags:t=!1,rewriteExternalLinks:n,rewriteExternalResources:s,id:a="msg_"+String.fromCharCode(...new Array(24).fill(void 0).map(()=>Math.random()*25%25+65)),allowedSchemas:o=PT,allowedCssProperties:i=z$e,preserveCssPriority:l=!0,noWrapper:r=!1}){var c,u,d,h,g;r&&(a="");const f=new DOMParser().parseFromString(e,"text/html");o=Array.isArray(o)?o.map(N=>N.toLowerCase()):PT;const b=f.createNodeIterator(f.documentElement,NodeFilter.SHOW_COMMENT);let A;for(;A=b.nextNode();)(c=A.parentNode)==null||c.removeChild(A);const v=[...W$e];t&&v.push("style"),f.querySelectorAll(v.join(", ")).forEach(N=>N.remove()),f.querySelectorAll("head > style").forEach(N=>{f.body.appendChild(N)});const T=[],_=f.createNodeIterator(f.body,NodeFilter.SHOW_ELEMENT,{acceptNode:()=>NodeFilter.FILTER_ACCEPT});for(;A=_.nextNode();){const N=A,R=N.tagName.toLowerCase();if(!(R==="body"||R==="html")){if(t){if(A.textContent){const O=f.createTextNode(A.textContent);(u=A.parentNode)==null||u.replaceChild(O,A)}else(d=A.parentNode)==null||d.removeChild(A);continue}if(R in LT){const O=LT[R];for(const x of N.getAttributeNames())if(!O.includes(x))N.removeAttribute(x);else if(x==="class"&&!r)N.setAttribute(x,((h=N.getAttribute(x))==null?void 0:h.split(" ").map(w=>a+"_"+w).join(" "))??"");else if(x==="id"&&!r)N.setAttribute(x,a+"_"+(N.getAttribute(x)??""));else if(x==="href"||x==="src"){const w=N.getAttribute(x)??"";x==="href"&&n?N.setAttribute(x,n(w)):x==="src"&&s?N.setAttribute(x,s(w)):o.includes(w.toLowerCase().split(":")[0])||N.removeAttribute(x)}EC(N.style,o,i,l,s),R==="a"&&(N.setAttribute("rel","noopener noreferrer"),N.setAttribute("target","_blank"))}else N.insertAdjacentHTML("afterend",N.innerHTML),T.push(N)}}for(const N of T)try{try{(g=N.parentNode)==null||g.removeChild(N)}catch{N.outerHTML=""}}catch{try{N.remove()}catch{}}if(f.querySelectorAll("body style").forEach(N=>{const R=N,O=R.sheet,x=[];if(!O.cssRules){R.textContent="";return}for(let w=0;w<O.cssRules.length;w++){const D=O.cssRules[w];if("selectorText"in D)DT(D,a,o,i,l,s),x.push(D);else if("cssRules"in D&&"media"in D){const M=D,P=[];for(let U=0;U<M.cssRules.length;U++){const F=M.cssRules[U];F.type===F.STYLE_RULE&&(DT(F,a,o,i,l,s),P.push(F))}for(;M.cssRules.length>0;)M.deleteRule(0);for(const U of P)M.insertRule(U.cssText,M.cssRules.length);x.push(M)}}R.textContent=x.map(w=>w.cssText).join(`
`)}),r)return f.body.innerHTML;{const N=f.createElement("div");return N.id=a,N.innerHTML=f.body.innerHTML,N.outerHTML}}function X$e(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}function q$e(e,t,n){let s=e??"";return(s==null?void 0:s.length)===0&&t&&(s=X$e(t).split(`
`).map(a=>"<p>"+a+"</p>").join(`
`)),K$e(s,n??{})}const Z$e=["innerHTML"],Q$e=["title"],kT=Jo({__name:"Letter",props:{className:{},html:{},text:{},useIframe:{type:Boolean},iframeTitle:{},rewriteExternalLinks:{},rewriteExternalResources:{},allowedCssProperties:{},allowedSchemas:{},preserveCssPriority:{type:Boolean}},setup(e){const t=e,{className:n,html:s,text:a,useIframe:o,iframeTitle:i,rewriteExternalLinks:l,rewriteExternalResources:r,allowedSchemas:c,allowedCssProperties:u,preserveCssPriority:d}=gn(t),h=q$e(s,a,{rewriteExternalResources:r,rewriteExternalLinks:l,allowedSchemas:c,preserveCssPriority:d,allowedCssProperties:u}),g="data:text/html;charset=utf-8,"+encodeURIComponent(h);return(f,b)=>C(o)?C(o)?(p(),E("div",{key:1,class:ae([C(n)])},[m("iframe",{src:g,title:C(i)},null,8,Q$e)],2)):$("",!0):(p(),E("div",{key:0,class:ae([C(n)]),innerHTML:C(h)},null,10,Z$e))}}),J$e=["azimuth","background","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-repeat-x","background-repeat-y","background-size","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","box-sizing","break-after","break-before","break-inside","caption-side","clear","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","direction","display","elevation","empty-cells","float","font","font-family","font-feature-settings","font-kerning","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-weight","height","image-orientation","image-resolution","ime-mode","isolation","layout-flow","layout-grid","layout-grid-char","layout-grid-char-spacing","layout-grid-line","layout-grid-mode","layout-grid-type","letter-spacing","line-break","line-height","list-style","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","max-height","max-width","min-height","min-width","mix-blend-mode","object-fit","object-position","opacity","outline","outline-color","outline-style","outline-width","overflow","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","pitch","pitch-range","quotes","richness","speak","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","table-layout","text-align","text-align-last","text-autospace","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-style","text-indent","text-justify","text-kashida-space","text-orientation","text-overflow","text-transform","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","unicode-bidi","vertical-align","voice-family","white-space","white-space-collapse","width","word-break","word-spacing","word-wrap","writing-mode","zoom"],BT=J$e,UT=[".gmail_quote_container",".gmail_quote",".OutlookQuote",".email-quote",".quoted-text",".quote",'[class*="quote"]','[class*="Quote"]'],eMe="blockquote",tMe=[/On .* wrote:/i,/-----Original Message-----/i,/Sent: /i,/From: /i];class FT{static extractQuotes(t){const n=document.createElement("div");return n.innerHTML=t,UT.forEach(a=>{n.querySelectorAll(a).forEach(o=>{o.remove()})}),this.removeTrailingBlockquote(n),this.findTextNodeQuotes(n).forEach(a=>{a.remove()}),n.innerHTML}static hasQuotes(t){const n=document.createElement("div");n.innerHTML=t;for(const a of UT)if(n.querySelector(a))return!0;return this.findTrailingBlockquote(n)?!0:this.findTextNodeQuotes(n).length>0}static findTextNodeQuotes(t){const n=[],s=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1);for(let a=s.nextNode();a!==null;a=s.nextNode())if(tMe.some(i=>i.test(a.textContent))){const i=this.findParentBlock(a);i&&!n.includes(i)&&n.push(i)}return n}static findParentBlock(t){const n=["DIV","P","BLOCKQUOTE","SECTION"];let s=t.parentElement;for(;s;){if(n.includes(s.tagName))return s;s=s.parentElement}return null}static removeTrailingBlockquote(t){const n=this.findTrailingBlockquote(t);n==null||n.remove()}static findTrailingBlockquote(t){var s;const n=t.lastElementChild;return(s=n==null?void 0:n.matches)!=null&&s.call(n,eMe)?n:null}}const nMe={key:1},sMe={key:2},aMe={key:3},oMe={key:4},iMe={__name:"EmailMeta",setup(e){const{contentAttributes:t,status:n,sender:s}=Jn(),a=y(()=>n.value===Tn.FAILED),o=y(()=>{var h,g;return((g=(h=t.value)==null?void 0:h.email)==null?void 0:g.from)??[]}),i=y(()=>{const{toEmails:h,email:g}=t.value;return(g==null?void 0:g.to)??h??[]}),l=y(()=>{var h,g,f;return((h=t.value)==null?void 0:h.ccEmails)??((f=(g=t.value)==null?void 0:g.email)==null?void 0:f.cc)??[]}),r=y(()=>{const h=o.value[0]??"",g=s.value.email??"";return!h&&!g?null:h===g?s.value.name:null}),c=y(()=>{var h,g,f;return((h=t.value)==null?void 0:h.bccEmails)??((f=(g=t.value)==null?void 0:g.email)==null?void 0:f.bcc)??[]}),u=y(()=>{var h,g;return((g=(h=t.value)==null?void 0:h.email)==null?void 0:g.subject)??""}),d=y(()=>o.value[0]||i.value.length||l.value.length||c.value.length||u.value);return(h,g)=>re((p(),E("section",{class:ae(["space-y-1 rtl:pl-9 ltr:pr-9 text-sm break-words",a.value?"text-n-ruby-11":"text-n-slate-11"])},[d.value?(p(),E(ue,{key:0},[o.value[0]?(p(),E("div",{key:0,class:ae(a.value?"text-n-ruby-11":"text-n-slate-12")},[r.value?(p(),E(ue,{key:0},[m("span",null,I(r.value),1),xe(" <"+I(o.value[0])+"> ",1)],64)):(p(),E(ue,{key:1},[xe(I(o.value[0]),1)],64))],2)):$("",!0),i.value.length?(p(),E("div",nMe,I(h.$t("EMAIL_HEADER.TO"))+": "+I(i.value.join(", ")),1)):$("",!0),l.value.length?(p(),E("div",sMe,I(h.$t("EMAIL_HEADER.CC"))+": "+I(l.value.join(", ")),1)):$("",!0),c.value.length?(p(),E("div",aMe,I(h.$t("EMAIL_HEADER.BCC"))+": "+I(c.value.join(", ")),1)):$("",!0),u.value?(p(),E("div",oMe,I(h.$t("EMAIL_HEADER.SUBJECT"))+": "+I(u.value),1)):$("",!0)],64)):$("",!0)],2)),[[rn,d.value]])}},lMe={key:1,class:"px-4 pb-4 space-y-2"},GT={__name:"Index",setup(e){const{content:t,contentAttributes:n,attachments:s,messageType:a}=Jn(),o=j(!1),i=j(!1),l=j(!1),r=j(!1),c=Ss("contentContainer");lt(()=>{var w;o.value=((w=c.value)==null?void 0:w.scrollHeight)>400});const u=y(()=>a.value===as.OUTGOING),d=y(()=>!u.value),{hasTranslations:h,translationContent:g}=vC(n),f=y(()=>{var D,M,P;const w=((P=(M=(D=n==null?void 0:n.value)==null?void 0:D.email)==null?void 0:M.textContent)==null?void 0:P.full)??t.value;return HN(w)}),b=y(()=>{var w,D,M;return((M=(D=(w=n==null?void 0:n.value)==null?void 0:w.email)==null?void 0:D.htmlContent)==null?void 0:M.full)||f.value}),A=y(()=>{var w,D,M,P,U,F;return((M=(D=(w=n==null?void 0:n.value)==null?void 0:w.email)==null?void 0:D.textContent)==null?void 0:M.full)||((F=(U=(P=n==null?void 0:n.value)==null?void 0:P.email)==null?void 0:U.htmlContent)==null?void 0:F.full)}),v=y(()=>h.value&&!r.value?g.value:t.value),T=y(()=>h.value&&!r.value?g.value:f.value),_=y(()=>h.value&&!r.value?g.value:b.value),N=y(()=>FT.extractQuotes(_.value)),R=y(()=>FT.hasQuotes(_.value)),O=y(()=>r.value?"original":h.value?"translated":"original"),x=()=>{r.value=!r.value};return(w,D)=>(p(),L(Ya,{class:ae(["w-full",{"bg-n-slate-4":d.value,"bg-n-solid-blue":u.value}]),"data-bubble-name":"email"},{default:Y(()=>[S(iMe,{class:ae(["p-3",{"border-b border-n-strong":d.value,"border-b border-n-slate-8/20":u.value}])},null,8,["class"]),m("section",{ref_key:"contentContainer",ref:c,class:"p-3"},[m("div",{class:ae({"max-h-[400px] overflow-hidden relative":!i.value&&o.value,"overflow-y-scroll relative":i.value})},[o.value&&!i.value?(p(),E("div",{key:0,class:ae(["absolute left-0 right-0 bottom-0 h-40 px-8 flex items-end",{"bg-gradient-to-t from-n-slate-4 via-n-slate-4 via-20% to-transparent":d.value,"bg-gradient-to-t from-n-solid-blue via-n-solid-blue via-20% to-transparent":u.value}])},[m("button",{class:"text-n-slate-12 py-2 px-8 mx-auto text-center flex items-center gap-2",onClick:D[0]||(D[0]=M=>i.value=!0)},[S(dt,{icon:"i-lucide-maximize-2"}),xe(" "+I(w.$t("EMAIL_HEADER.EXPAND")),1)])],2)):$("",!0),u.value&&C(t)&&!A.value?(p(),L(mC,{key:1,class:"text-n-slate-12",content:v.value},null,8,["content"])):(p(),E(ue,{key:2},[l.value?(p(),L(C(kT),{key:`letter-quoted-${O.value}`,"class-name":"prose prose-bubble !max-w-none letter-render","allowed-css-properties":[...C(BT),"transform","transform-origin"],html:_.value,text:T.value},null,8,["allowed-css-properties","html","text"])):(p(),L(C(kT),{key:`letter-unquoted-${O.value}`,"class-name":"prose prose-bubble !max-w-none letter-render",html:N.value,"allowed-css-properties":[...C(BT),"transform","transform-origin"],text:T.value},null,8,["html","allowed-css-properties","text"]))],64)),R.value?(p(),E("button",{key:3,class:"text-n-slate-11 px-1 leading-none text-sm bg-n-alpha-black2 text-center flex items-center gap-1 mt-2",onClick:D[1]||(D[1]=M=>l.value=!l.value)},[l.value?(p(),E(ue,{key:0},[xe(I(w.$t("CHAT_LIST.HIDE_QUOTED_TEXT")),1)],64)):(p(),E(ue,{key:1},[xe(I(w.$t("CHAT_LIST.SHOW_QUOTED_TEXT")),1)],64)),S(dt,{icon:l.value?"i-lucide-chevron-up":"i-lucide-chevron-down"},null,8,["icon"])])):$("",!0)],2)],512),C(h)?(p(),L(_C,{key:0,class:"py-2 px-3","showing-original":r.value,onToggle:x},null,8,["showing-original"])):$("",!0),Array.isArray(C(s))&&C(s).length?(p(),E("section",lMe,[S(gC,{attachments:C(s),class:"gap-1"},null,8,["attachments"])])):$("",!0)]),_:1},8,["class"]))}},rMe={__name:"Unsupported",setup(e){return(t,n)=>(p(),L(Ya,{class:"px-4 py-3 text-sm","data-bubble-name":"unsupported"},{default:Y(()=>[xe(I(t.$t("CONVERSATION.UNSUPPORTED_MESSAGE")),1)]),_:1}))}},cMe={__name:"Contact",setup(e){const{attachments:t}=Jn(),n=rt(),{t:s}=be(),a=y(()=>t.value[0]),o=y(()=>a.value.fallbackTitle),i=y(()=>{const{meta:f}=a.value??{},{firstName:b,lastName:A}=f??{};return`${b??""} ${A??""}`.trim()}),l=y(()=>o.value.replace(/\s|-|[A-Za-z]/g,"")),r=y(()=>o.value.replace(/\D/g,""));function c(){return{name:i.value,phone_number:`+${r.value}`}}async function u(f){const A={payload:[{attribute_key:"phone_number",filter_operator:"equal_to",values:[f],attribute_model:"standard",custom_attribute_type:""}]};return(await n.dispatch("contacts/filter",{queryPayload:A,resetState:!1})).shift()}function d(f){const A=`/app/accounts/${window.location.pathname.split("/")[3]}/contacts/${f}`;window.open(A,"_blank")}async function h(){try{let f=await u(r);f||(f=await n.dispatch("contacts/create",c()),ne(s("CONTACT_FORM.SUCCESS_MESSAGE"))),d(f.id)}catch(f){f instanceof Jd?f.data.includes("phone_number")&&ne(s("CONTACT_FORM.FORM.PHONE_NUMBER.DUPLICATE")):f instanceof eu?ne(f.data):ne(s("CONTACT_FORM.ERROR_MESSAGE"))}}const g=y(()=>({label:s("CONVERSATION.SAVE_CONTACT"),onClick:h}));return(f,b)=>(p(),L(Qp,{icon:"i-teenyicons-user-circle-solid","icon-bg-color":"bg-[#D6409F]","sender-translation-key":"CONVERSATION.SHARED_ATTACHMENT.CONTACT",title:i.value,content:o.value,action:l.value?g.value:null},null,8,["title","content","action"]))}},uMe={key:0,class:"text-sm truncate text-n-slate-12"},dMe={key:1,class:"video-call--container"},pMe=["src"],mMe={key:2},hMe={__name:"Dyte",setup(e){const{content:t,sender:n,id:s}=Jn(),{t:a}=be(),o=j(!1),i=j(""),l=y(()=>$R(i.value)),r=async()=>{o.value=!0;try{const{data:{token:d}={}}=await DI.addParticipantToMeeting(s.value);i.value=d}catch{ne(a("INTEGRATION_SETTINGS.DYTE.JOIN_ERROR"))}finally{o.value=!1}},c=()=>{i.value=""},u=y(()=>({label:a("INTEGRATION_SETTINGS.DYTE.CLICK_HERE_TO_JOIN"),onClick:r}));return(d,h)=>(p(),L(Qp,{icon:"i-ph-video-camera-fill","icon-bg-color":"bg-[#2781F6]","sender-translation-key":"CONVERSATION.SHARED_ATTACHMENT.MEETING",action:u.value},{default:Y(()=>[C(n)?$("",!0):(p(),E("div",uMe,I(C(t)),1)),i.value?(p(),E("div",dMe,[m("iframe",{src:l.value,allow:"camera;microphone;fullscreen;display-capture;picture-in-picture;clipboard-write;"},null,8,pMe),m("button",{class:"px-4 py-2 text-sm rounded-lg bg-n-solid-3 mt-3",onClick:c},I(d.$t("INTEGRATION_SETTINGS.DYTE.LEAVE_THE_ROOM")),1)])):(p(),E("div",mMe,I("")))]),_:1},8,["action"]))}},fMe={__name:"Location",setup(e){const{attachments:t}=Jn(),{t:n}=be(),s=y(()=>t.value[0]),a=y(()=>s.value.coordinatesLat),o=y(()=>s.value.coordinatesLong),i=y(()=>s.value.fallbackTitle??s.value.fallback_title),l=y(()=>`https://maps.google.com/?q=${a.value},${o.value}`);return(r,c)=>(p(),L(Qp,{icon:"i-ph-navigation-arrow-fill","icon-bg-color":"bg-[#0D9B8A]","sender-translation-key":"CONVERSATION.SHARED_ATTACHMENT.LOCATION",content:i.value,action:{label:C(n)("COMPONENTS.LOCATION_BUBBLE.SEE_ON_MAP"),href:l.value}},null,8,["content","action"]))}},gMe={key:0,class:"mt-4"},_Me={class:"text-n-slate-11 italic"},vMe={key:0},EMe={key:1,class:"flex mt-1"},bMe={key:2,class:"text-n-slate-11 italic mt-2"},TMe={__name:"CSAT",setup(e){const{contentAttributes:t,content:n}=Jn(),{t:s}=be(),a=y(()=>{var u,d;return((d=(u=t.value)==null?void 0:u.submittedValues)==null?void 0:d.csatSurveyResponse)??{}}),o=y(()=>!!a.value.rating),i=y(()=>{var u;return((u=t.value)==null?void 0:u.displayType)||Oi.EMOJI}),l=y(()=>i.value===Oi.STAR),r=y(()=>o.value?cl.find(u=>u.value===a.value.rating):null),c=y(()=>a.value.rating||0);return(u,d)=>(p(),L(Ya,{class:"px-4 py-3","data-bubble-name":"csat"},{default:Y(()=>[m("h4",null,I(C(n)||C(s)("CONVERSATION.CSAT_REPLY_MESSAGE")),1),o.value?(p(),E("dl",gMe,[m("dt",_Me,I(C(s)("CONVERSATION.RATING_TITLE")),1),l.value?(p(),E("dd",EMe,[(p(),E(ue,null,Ae(5,h=>m("span",{key:h,class:"text-2xl mr-1"},[m("i",{class:ae([h<=c.value?"i-ri-star-fill text-n-amber-9":"i-ri-star-line text-n-slate-10"])},null,2)])),64))])):(p(),E("dd",vMe,I(C(s)(r.value.translationKey)),1)),a.value.feedbackMessage?(p(),E("dt",bMe,I(C(s)("CONVERSATION.FEEDBACK_TITLE")),1)):$("",!0),m("dd",null,I(a.value.feedbackMessage),1)])):$("",!0)]),_:1}))}},SMe=["title"],AMe={key:0,class:"mt-4"},yMe={class:"text-n-slate-11 italic mt-2"},IMe={key:1,class:"my-2 font-medium"},CMe={__name:"Form",setup(e){const{content:t,contentAttributes:n,contentType:s}=Jn(),{t:a}=be(),{isAWebWidgetInbox:o}=Np(),i=y(()=>{var l;if(s.value===Qa.FORM){const{items:r,submittedValues:c=[]}=n.value;return c.length?c.map(u=>{const d=r.find(h=>h.name===u.name);return{title:u.value,value:u.value,label:d==null?void 0:d.label}}):[]}if(s.value===Qa.INPUT_SELECT){const[r]=((l=n.value)==null?void 0:l.submittedValues)??[];return r?[{title:r.title,value:r.value,label:""}]:[]}return[]});return(l,r)=>{const c=Qe("dompurify-html");return p(),L(Ya,{class:"px-4 py-3","data-bubble-name":"csat"},{default:Y(()=>[re(m("span",{title:C(t)},null,8,SMe),[[c,C(t)]]),i.value.length?(p(),E("dl",AMe,[(p(!0),E(ue,null,Ae(i.value,u=>(p(),E(ue,{key:u.title},[m("dt",yMe,I(u.label||C(a)("CONVERSATION.RESPONSE")),1),m("dd",null,I(u.title),1)],64))),128))])):C(o)?(p(),E("div",IMe,I(C(a)("CONVERSATION.NO_RESPONSE")),1)):$("",!0)]),_:1})}}},NMe={class:"flex gap-3 items-center p-3 w-full"},OMe={class:"flex overflow-hidden flex-col flex-grow"},RMe={class:"text-base font-medium truncate"},xMe={class:"text-xs text-slate-500"},wMe={__name:"VoiceCall",setup(e){const{contentAttributes:t}=Jn(),n=y(()=>{var u;return(u=t.value)==null?void 0:u.data}),s=y(()=>{var u;return(u=n.value)==null?void 0:u.status}),a=y(()=>{var u;return(u=n.value)==null?void 0:u.call_direction}),{labelKey:o,subtextKey:i,bubbleIconBg:l,bubbleIconName:r}=II(s,a),c=y(()=>s.value==="ringing"?"ring-1 ring-emerald-300":"");return(u,d)=>(p(),L(Ya,{class:"p-0 border-none","hide-meta":""},{default:Y(()=>[m("div",{class:ae(["flex overflow-hidden flex-col w-full max-w-xs bg-white rounded-lg border border-slate-100 text-slate-900 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",c.value])},[m("div",NMe,[m("div",{class:ae(["flex justify-center items-center rounded-full size-10 shrink-0",C(l)])},[m("span",{class:ae(["text-xl",C(r)])},null,2)],2),m("div",OMe,[m("span",RMe,I(u.$t(C(o))),1),m("span",xMe,I(u.$t(C(i))),1)])])],2)]),_:1}))}},$Me={class:"text-xs text-n-ruby-11 flex items-center gap-1.5"},MMe={class:"relative group"},LMe={class:"bg-n-alpha-2 rounded-md size-5 grid place-content-center cursor-pointer"},DMe=["disabled"],PMe={__name:"MessageError",props:{error:{type:String,required:!0}},emits:["retry"],setup(e,{emit:t}){const n=t,{orientation:s,status:a,createdAt:o}=Jn(),{t:i}=be(),l=y(()=>!MR(o.value));return(r,c)=>(p(),E("div",$Me,[m("span",null,I(C(i)("CHAT_LIST.FAILED_TO_SEND")),1),m("div",MMe,[m("div",LMe,[S(dt,{icon:"i-lucide-alert-triangle",class:"text-n-ruby-11 size-[14px]"})]),m("div",{class:ae(["absolute bg-n-alpha-3 px-4 py-3 border rounded-xl border-n-strong text-n-slate-12 bottom-6 w-52 text-xs backdrop-blur-[100px] shadow-[0px_0px_24px_0px_rgba(0,0,0,0.12)] opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all break-all",{"ltr:left-0 rtl:right-0":C(s)===C(cs).LEFT,"ltr:right-0 rtl:left-0":C(s)===C(cs).RIGHT}])},I(e.error),3)]),l.value?(p(),E("button",{key:0,type:"button",disabled:C(a)!==C(Tn).FAILED,class:"bg-n-alpha-2 rounded-md size-5 grid place-content-center cursor-pointer",onClick:c[0]||(c[0]=u=>n("retry"))},[S(dt,{icon:"i-lucide-refresh-ccw",class:"text-n-ruby-11 size-[14px]"})],8,DMe)):$("",!0)]))}},kMe={components:{AddCannedModal:CA,MenuItem:K_,ContextMenu:X_,NextButton:te},props:{message:{type:Object,required:!0},isOpen:{type:Boolean,default:!1},enabledOptions:{type:Object,default:()=>({})},contextMenuPosition:{type:Object,default:()=>({})},hideButton:{type:Boolean,default:!1}},emits:["open","close","replyTo"],setup(){const{getPlainText:e}=sa();return{getPlainText:e}},data(){return{isCannedResponseModalOpen:!1,showDeleteModal:!1}},computed:{...mt({getAccount:"accounts/getAccount",currentAccountId:"getCurrentAccountId"}),plainTextContent(){return this.getPlainText(this.messageContent)},conversationId(){return this.message.conversation_id??this.message.conversationId},messageId(){return this.message.id},messageContent(){return this.message.content},contentAttributes(){return Ts(this.message.content_attributes??this.message.contentAttributes)}},methods:{async copyLinkToMessage(){const e=window.chatwootConfig.hostURL+vt(bg({id:this.conversationId,accountId:this.currentAccountId}));await _a(`${e}?messageId=${this.messageId}`),ne(this.$t("CONVERSATION.CONTEXT_MENU.LINK_COPIED")),this.handleClose()},async handleCopy(){await _a(this.plainTextContent),ne(this.$t("CONTACT_PANEL.COPY_SUCCESSFUL")),this.handleClose()},showCannedResponseModal(){zt(Ad.ADDED_TO_CANNED_RESPONSE),this.isCannedResponseModalOpen=!0},hideCannedResponseModal(){this.isCannedResponseModalOpen=!1,this.handleClose()},handleOpen(e){this.$emit("open",e)},handleClose(e){this.$emit("close",e)},handleTranslate(){const{locale:e}=this.getAccount(this.currentAccountId);this.$store.dispatch("translateMessage",{conversationId:this.conversationId,messageId:this.messageId,targetLanguage:e||"en"}),zt(ea.TRANSLATE_A_MESSAGE),this.handleClose()},handleReplyTo(){this.$emit("replyTo",this.message),this.handleClose()},openDeleteModal(){this.handleClose(),this.showDeleteModal=!0},async confirmDeletion(){try{await this.$store.dispatch("deleteMessage",{conversationId:this.conversationId,messageId:this.messageId}),ne(this.$t("CONVERSATION.SUCCESS_DELETE_MESSAGE")),this.handleClose()}catch{ne(this.$t("CONVERSATION.FAIL_DELETE_MESSSAGE"))}},closeDeleteModal(){this.showDeleteModal=!1}}},BMe={class:"context-menu"},UMe={class:"menu-container"},FMe={key:5};function GMe(e,t,n,s,a,o){const i=W("AddCannedModal"),l=W("woot-modal"),r=W("woot-delete-modal"),c=W("NextButton"),u=W("MenuItem"),d=W("ContextMenu");return p(),E("div",BMe,[a.isCannedResponseModalOpen&&n.enabledOptions.cannedResponse?(p(),L(l,{key:0,show:a.isCannedResponseModalOpen,"onUpdate:show":t[0]||(t[0]=h=>a.isCannedResponseModalOpen=h),"on-close":o.hideCannedResponseModal},{default:Y(()=>[S(i,{"response-content":o.plainTextContent,"on-close":o.hideCannedResponseModal},null,8,["response-content","on-close"])]),_:1},8,["show","on-close"])):$("",!0),a.showDeleteModal&&n.enabledOptions.delete?(p(),L(r,{key:1,show:a.showDeleteModal,"onUpdate:show":t[1]||(t[1]=h=>a.showDeleteModal=h),class:"context-menu--delete-modal","on-close":o.closeDeleteModal,"on-confirm":o.confirmDeletion,title:e.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.TITLE"),message:e.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.MESSAGE"),"confirm-text":e.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.DELETE"),"reject-text":e.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.CANCEL")},null,8,["show","on-close","on-confirm","title","message","confirm-text","reject-text"])):$("",!0),n.hideButton?$("",!0):(p(),L(c,{key:2,ghost:"",slate:"",sm:"",icon:"i-lucide-ellipsis-vertical",class:"invisible group-hover/context-menu:visible",onClick:o.handleOpen},null,8,["onClick"])),n.isOpen&&!a.isCannedResponseModalOpen?(p(),L(d,{key:3,x:n.contextMenuPosition.x,y:n.contextMenuPosition.y,onClose:o.handleClose},{default:Y(()=>[m("div",UMe,[n.enabledOptions.replyTo?(p(),L(u,{key:0,option:{icon:"arrow-reply",label:e.$t("CONVERSATION.CONTEXT_MENU.REPLY_TO")},variant:"icon",onClick:Ve(o.handleReplyTo,["stop"])},null,8,["option","onClick"])):$("",!0),n.enabledOptions.copy?(p(),L(u,{key:1,option:{icon:"clipboard",label:e.$t("CONVERSATION.CONTEXT_MENU.COPY")},variant:"icon",onClick:Ve(o.handleCopy,["stop"])},null,8,["option","onClick"])):$("",!0),n.enabledOptions.translate?(p(),L(u,{key:2,option:{icon:"translate",label:e.$t("CONVERSATION.CONTEXT_MENU.TRANSLATE")},variant:"icon",onClick:Ve(o.handleTranslate,["stop"])},null,8,["option","onClick"])):$("",!0),t[2]||(t[2]=m("hr",null,null,-1)),n.enabledOptions.copyLink?(p(),L(u,{key:3,option:{icon:"link",label:e.$t("CONVERSATION.CONTEXT_MENU.COPY_PERMALINK")},variant:"icon",onClick:Ve(o.copyLinkToMessage,["stop"])},null,8,["option","onClick"])):$("",!0),n.enabledOptions.cannedResponse?(p(),L(u,{key:4,option:{icon:"comment-add",label:e.$t("CONVERSATION.CONTEXT_MENU.CREATE_A_CANNED_RESPONSE")},variant:"icon",onClick:Ve(o.showCannedResponseModal,["stop"])},null,8,["option","onClick"])):$("",!0),n.enabledOptions.delete?(p(),E("hr",FMe)):$("",!0),n.enabledOptions.delete?(p(),L(u,{key:6,option:{icon:"delete",label:e.$t("CONVERSATION.CONTEXT_MENU.DELETE")},variant:"icon",onClick:Ve(o.openDeleteModal,["stop"])},null,8,["option","onClick"])):$("",!0)])]),_:1},8,["x","y","onClose"])):$("",!0)])}const VMe=De(kMe,[["render",GMe],["__scopeId","data-v-c14c8c4d"]]),HMe=["id","data-message-id"],WMe={key:0},zMe={key:0,class:"[grid-area:avatar] flex items-end"},YMe={key:2,class:"context-menu-wrap"},jMe={__name:"Message",props:{id:{type:Number,required:!0},messageType:{type:Number,required:!0,validator:e=>Object.values(as).includes(e)},status:{type:String,required:!0,validator:e=>Object.values(Tn).includes(e)},attachments:{type:Array,default:()=>[]},content:{type:String,default:null},contentAttributes:{type:Object,default:()=>({})},contentType:{type:String,default:"text",validator:e=>Object.values(Qa).includes(e)},conversationId:{type:Number,required:!0},createdAt:{type:Number,required:!0},currentUserId:{type:Number,required:!0},groupWithNext:{type:Boolean,default:!1},inboxId:{type:Number,default:null},inboxSupportsReplyTo:{type:Object,default:()=>({})},inReplyTo:{type:Object,default:null},isEmailInbox:{type:Boolean,default:!1},private:{type:Boolean,default:!1},sender:{type:Object,default:null},senderId:{type:Number,default:null},senderType:{type:String,default:null},sourceId:{type:String,default:""}},emits:["retry"],setup(e,{emit:t}){const n=e,s=t,a=j({}),o=j(!1),i=j(!1),{t:l}=be(),r=wt(),c=y(()=>{var V;return n.private?Cn.PRIVATE:n.isEmailInbox&&[as.INCOMING,as.OUTGOING].includes(n.messageType)||n.contentType===Qa.INCOMING_EMAIL?Cn.EMAIL:n.status===Tn.FAILED?Cn.ERROR:(V=n.contentAttributes)!=null&&V.isUnsupported?Cn.UNSUPPORTED:(!n.sender||n.sender.type===Wl.AGENT_BOT)&&n.messageType===as.OUTGOING?Cn.BOT:{[as.INCOMING]:Cn.USER,[as.ACTIVITY]:Cn.ACTIVITY,[as.OUTGOING]:Cn.AGENT,[as.TEMPLATE]:Cn.TEMPLATE}[n.messageType]||Cn.USER}),u=y(()=>{var V,G;if(n.messageType===as.ACTIVITY)return!1;if(n.status===Tn.PROGRESS&&n.messageType===as.OUTGOING)return!0;const k=n.senderId??((V=n.sender)==null?void 0:V.id),B=((G=n.sender)==null?void 0:G.type)??n.senderType;return!B||!k||[Wl.AGENT_BOT,Wl.CAPTAIN_ASSISTANT].includes(B)?!0:B.toLowerCase()===Wl.USER.toLowerCase()}),d=y(()=>u.value?cs.RIGHT:n.messageType===as.ACTIVITY?cs.CENTER:cs.LEFT),h=y(()=>({[cs.LEFT]:"justify-start",[cs.RIGHT]:"justify-end",[cs.CENTER]:"justify-center"})[d.value]),g=y(()=>({[cs.LEFT]:"grid grid-cols-1fr",[cs.RIGHT]:"grid grid-cols-[1fr_24px]"})[d.value]),f=y(()=>({[cs.LEFT]:`
      "bubble"
      "meta"
    `,[cs.RIGHT]:`
      "bubble avatar"
      "meta spacer"
    `})[d.value]),b=y(()=>n.status===Tn.FAILED?!1:n.groupWithNext),A=y(()=>!(n.messageType===as.ACTIVITY||d.value===cs.LEFT)),v=y(()=>{var k;if(n.isEmailInbox&&!n.private&&[as.INCOMING,as.OUTGOING].includes(n.messageType))return GT;if(n.contentType===Qa.INPUT_CSAT)return TMe;if([Qa.INPUT_SELECT,Qa.FORM].includes(n.contentType))return CMe;if(n.contentType===Qa.VOICE_CALL)return wMe;if(n.contentType===Qa.INCOMING_EMAIL)return GT;if((k=n.contentAttributes)!=null&&k.isUnsupported)return rMe;if(n.contentAttributes.type==="dyte")return hMe;if(n.contentAttributes.imageType==="story_mention")return H$e;if(Array.isArray(n.attachments)&&n.attachments.length===1){const B=n.attachments[0].fileType;if(!n.content){if(B===is.IMAGE)return y$e;if(B===is.FILE)return M$e;if(B===is.AUDIO)return L$e;if(B===is.VIDEO||B===is.IG_REEL)return MT;if(B===is.LOCATION)return fMe}if(B===is.CONTACT)return cMe}return g$e}),T=y(()=>{var k;return!((k=n.contentAttributes)!=null&&k.isUnsupported)}),_=y(()=>n.messageType!==as.ACTIVITY),N=y(()=>{var k;return(k=n.contentAttributes)==null?void 0:k.deleted}),R=y(()=>({id:n.id,content_attributes:n.contentAttributes,content:n.content,conversation_id:n.conversationId})),O=y(()=>{const k=!!n.content,B=!!(n.attachments&&n.attachments.length>0),V=n.messageType===as.OUTGOING,G=n.status===Tn.FAILED||n.status===Tn.PROGRESS;return{copy:k,delete:(k||B)&&!G&&!N.value,cannedResponse:V&&k&&!N.value,copyLink:!G,translate:!G&&!N.value&&k,replyTo:!n.private&&n.inboxSupportsReplyTo.outgoing&&!G}}),x=y(()=>{var K;const k=!!(n.attachments&&n.attachments.length>0),B=n.contentType===Qa.INCOMING_EMAIL,V=(K=n.contentAttributes)==null?void 0:K.isUnsupported,G=n.contentType===Qa.INTEGRATIONS;return k||n.content||B||V||G});function w(k){var V,G;(V=k.target)!=null&&V.classList.contains("skip-context-menu")||["a","img"].includes((G=k.target)==null?void 0:G.tagName.toLowerCase())||getSelection().toString()||(k.preventDefault(),k.type==="contextmenu"&&zt(Ad.OPEN_MESSAGE_CONTEXT_MENU),a.value={x:k.pageX||k.clientX,y:k.pageY||k.clientY},i.value=!0)}function D(){i.value=!1,a.value={x:null,y:null}}function M(){const k=ao.MESSAGE_REPLY_TO,{conversationId:B,id:V}=n;ka.updateJsonStore(k,B,V),Dt.emit(un.TOGGLE_REPLY_TO_MESSAGE,n)}const P=y(()=>{if(!n.sender)return{name:l("CONVERSATION.BOT"),src:""};const{sender:k}=n,{name:B,type:V,avatarUrl:G,thumbnail:K}=k||{};return[Wl.AGENT_BOT,Wl.CAPTAIN_ASSISTANT].includes(V)?{name:B??"",src:G??""}:{name:B??"",src:K??""}}),U=y(()=>P.value.name===""?"":`${l("CONVERSATION.SENT_BY")} ${P.value.name}`);return lt(()=>{if(Number(r.query.messageId)!==Number(n.id))return;o.value=!0,QO(()=>{o.value=!1},1e3)}),Awe({...yN(n),isPrivate:y(()=>n.private),variant:c,orientation:d,isBotOrAgentMessage:u,shouldGroupWithNext:b}),(k,B)=>{const V=Qe("tooltip");return x.value?(p(),E("div",{key:0,id:`message${n.id}`,class:ae(["flex w-full message-bubble-container mb-2",[h.value,{"group-with-next":b.value,"bg-n-alpha-1":o.value}]]),"data-message-id":n.id},[c.value===C(Cn).ACTIVITY?(p(),E("div",WMe,[S(v$e,{content:e.content},null,8,["content"])])):(p(),E("div",{key:1,class:ae([[g.value,{"gap-y-2":e.contentAttributes.externalError,"w-full":c.value===C(Cn).EMAIL}],"gap-x-2"]),style:Zt({gridTemplateAreas:f.value})},[!b.value&&A.value?re((p(),E("div",zMe,[S(kt,Qn(P.value,{size:24}),null,16)])),[[V,U.value,void 0,{"left-end":!0}]]):$("",!0),m("div",{class:ae(["[grid-area:bubble] flex",{"ltr:ml-8 rtl:mr-8 justify-end":d.value===C(cs).RIGHT,"ltr:mr-8 rtl:ml-8":d.value===C(cs).LEFT,"min-w-0":c.value===C(Cn).EMAIL}]),onContextmenu:B[0]||(B[0]=G=>w(G))},[(p(),L(ds(v.value)))],34),e.contentAttributes.externalError?(p(),L(PMe,{key:1,class:ae(["[grid-area:meta]",h.value]),error:e.contentAttributes.externalError,onRetry:B[1]||(B[1]=G=>s("retry"))},null,8,["class","error"])):$("",!0)],6)),T.value?(p(),E("div",YMe,[_.value?(p(),L(VMe,{key:0,"context-menu-position":a.value,"is-open":i.value,"enabled-options":O.value,message:R.value,"hide-button":"",onOpen:w,onClose:D,onReplyTo:M},null,8,["context-menu-position","is-open","enabled-options","message"])):$("",!0)])):$("",!0)],10,HMe)):$("",!0)}}},KMe={class:"px-4 bg-n-background"},XMe={__name:"MessageList",props:{currentUserId:{type:Number,required:!0},firstUnreadId:{type:Number,default:null},isAnEmailChannel:{type:Boolean,default:!1},inboxSupportsReplyTo:{type:Object,default:()=>({incoming:!1,outgoing:!1})},messages:{type:Array,default:()=>[]}},emits:["retry"],setup(e,{emit:t}){const n=e,s=t,a=y(()=>so(n.messages,{deep:!0})),o=_e("getSelectedChat"),i=gn(new Map),l=async(u,d)=>{var h;if(i.has(u))return i.get(u);try{const b=(((h=(await JO.getPreviousMessages({conversationId:d,before:u+100,after:u-100})).data)==null?void 0:h.payload)||[]).find(A=>A.id===u);if(b){const A=so(b);return i.set(u,A),A}return i.set(u,null),null}catch{return i.set(u,null),null}},r=(u,d)=>{var N,R;if(u===d.length-1)return!1;const h=d[u],g=d[u+1];if(g.status==="failed")return!1;const f=g.senderId??((N=g.sender)==null?void 0:N.id),b=h.senderId??((R=h.sender)==null?void 0:R.id),A=f===b,v=g.messageType,T=h.messageType,_=v===as.TEMPLATE&&T===as.TEMPLATE;return!A||_||T!==v?!1:Math.floor(g.createdAt/60)===Math.floor(h.createdAt/60)},c=u=>{var g,f,b,A,v;if(!u)return null;const d=((g=u.contentAttributes)==null?void 0:g.inReplyTo)??((f=u.content_attributes)==null?void 0:f.in_reply_to);if(!d)return null;let h=(b=n.messages)==null?void 0:b.find(T=>T.id===d);return!h&&((A=o.value)!=null&&A.messages)&&(h=o.value.messages.find(T=>T.id===d)),!h&&i.has(d)&&(h=i.get(d)),!h&&((v=o.value)!=null&&v.id)?(l(d,o.value.id),null):h?so(h):null};return(u,d)=>(p(),E("ul",KMe,[We(u.$slots,"beforeAll"),(p(!0),E(ue,null,Ae(a.value,(h,g)=>(p(),E(ue,{key:h.id},[e.firstUnreadId&&h.id===e.firstUnreadId?We(u.$slots,"unreadBadge",{key:0}):$("",!0),S(jMe,Qn({ref_for:!0},h,{"is-email-inbox":e.isAnEmailChannel,"in-reply-to":c(h),"group-with-next":r(g,a.value),"inbox-supports-reply-to":e.inboxSupportsReplyTo,"current-user-id":e.currentUserId,"data-clarity-mask":"True",onRetry:f=>s("retry",h)}),null,16,["is-email-inbox","in-reply-to","group-with-next","inbox-supports-reply-to","current-user-id","onRetry"])],64))),128)),We(u.$slots,"after")]))}},qMe={name:"LabelSuggestion",components:{Avatar:kt,NextButton:te},props:{suggestedLabels:{type:Array,required:!0},chatLabels:{type:Array,required:!1,default:()=>[]}},setup(){const{isAIIntegrationEnabled:e}=hu();return{isAIIntegrationEnabled:e}},data(){return{isDismissed:!1,isHovered:!1,selectedLabels:[]}},computed:{...mt({allLabels:"labels/getLabels",currentAccountId:"getCurrentAccountId",currentChat:"getSelectedChat"}),conversationId(){var e;return(e=this.currentChat)==null?void 0:e.id},labelTooltip(){return this.preparedLabels.length>1?this.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.MULTIPLE_SUGGESTION"):this.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.SINGLE_SUGGESTION")},addButtonText(){return this.selectedLabels.length===1?this.$t("LABEL_MGMT.SUGGESTIONS.ADD_SELECTED_LABEL"):this.selectedLabels.length>1?this.$t("LABEL_MGMT.SUGGESTIONS.ADD_SELECTED_LABELS"):this.$t("LABEL_MGMT.SUGGESTIONS.ADD_ALL_LABELS")},preparedLabels(){return this.allLabels.filter(e=>this.suggestedLabels.includes(e.title))},shouldShowSuggestions(){return this.isDismissed||!this.isAIIntegrationEnabled?!1:this.preparedLabels.length&&this.chatLabels.length===0}},watch:{conversationId:{immediate:!0,handler(){this.selectedLabels=[],this.isDismissed=this.isConversationDismissed()}}},methods:{pushOrAddLabel(e){if(this.preparedLabels.length===1){this.addAllLabels();return}this.selectedLabels.includes(e)?this.selectedLabels=this.selectedLabels.filter(t=>t!==e):this.selectedLabels.push(e)},dismissSuggestions(){ka.setFlag(ao.DISMISSED_LABEL_SUGGESTIONS,this.currentAccountId,this.conversationId),this.isDismissed=!0,this.trackLabelEvent(Sd.DISMISS_LABEL_SUGGESTION)},isConversationDismissed(){return ka.getFlag(ao.DISMISSED_LABEL_SUGGESTIONS,this.currentAccountId,this.conversationId)},addAllLabels(){let e=this.selectedLabels;e.length||(e=this.preparedLabels.map(t=>t.title)),this.$store.dispatch("conversationLabels/update",{conversationId:this.conversationId,labels:e}),this.trackLabelEvent(Sd.APPLY_LABEL_SUGGESTION)},trackLabelEvent(e){const t={conversationId:this.conversationId,account:this.currentAccountId,suggestions:this.suggestedLabels,labelsApplied:this.selectedLabels.length?this.selectedLabels:this.suggestedLabels};zt(e,t)}}},ZMe={class:"wrap"},QMe={class:"label-suggestion--container"},JMe={class:"label-suggestion--title"},eLe={class:"label-suggestion--options"},tLe=["onClick"],nLe={key:0,class:"inline-flex items-center gap-1"},sLe={class:"sender--info has-tooltip","data-original-title":"null"};function aLe(e,t,n,s,a,o){const i=W("woot-label"),l=W("NextButton"),r=W("Avatar"),c=Qe("tooltip");return o.shouldShowSuggestions?(p(),E("li",{key:0,class:"label-suggestion right list-none",onMouseover:t[0]||(t[0]=u=>a.isHovered=!0),onMouseleave:t[1]||(t[1]=u=>a.isHovered=!1)},[m("div",ZMe,[m("div",QMe,[m("h6",JMe,I(e.$t("LABEL_MGMT.SUGGESTIONS.SUGGESTED_LABELS")),1),m("div",eLe,[(p(!0),E(ue,null,Ae(o.preparedLabels,u=>re((p(),E("button",{key:u.title,class:"label-suggestion--option !px-0",onClick:d=>o.pushOrAddLabel(u.title)},[S(i,Qn({variant:"dashed",ref_for:!0},u,{"bg-color":a.selectedLabels.includes(u.title)?"#2781F6":""}),null,16,["bg-color"])],8,tLe)),[[c,{content:a.selectedLabels.includes(u.title)?e.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.DESELECT"):o.labelTooltip,delay:{show:600,hide:0},hideOnClick:!0},void 0,{top:!0}]])),128)),o.preparedLabels.length===1?re((p(),L(l,{key:0,faded:"",xs:"",icon:"i-lucide-x",class:"flex-shrink-0",color:a.isHovered?"ruby":"blue",onClick:o.dismissSuggestions},null,8,["color","onClick"])),[[c,{content:e.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.DISMISS"),delay:{show:600,hide:0},hideOnClick:!0},void 0,{top:!0}]]):$("",!0)]),o.preparedLabels.length>1?(p(),E("div",nLe,[S(l,{xs:"",icon:"i-lucide-plus",class:"flex-shrink-0",variant:a.selectedLabels.length===0?"faded":"solid",label:o.addButtonText,onClick:o.addAllLabels},null,8,["variant","label","onClick"]),re(S(l,{faded:"",xs:"",icon:"i-lucide-x",class:"flex-shrink-0",color:a.isHovered?"ruby":"blue",onClick:o.dismissSuggestions},null,8,["color","onClick"]),[[c,{content:e.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.DISMISS"),delay:{show:600,hide:0},hideOnClick:!0},void 0,{top:!0}]])])):$("",!0)]),m("div",sLe,[re(S(r,{size:16,name:"chatwoot-ai","icon-name":"i-lucide-sparkles"},null,512),[[c,{content:e.$t("LABEL_MGMT.SUGGESTIONS.POWERED_BY"),delay:{show:600,hide:0},hideOnClick:!0},void 0,{top:!0}]])])])],32)):$("",!0)}const oLe=De(qMe,[["render",aLe],["__scopeId","data-v-d77d666e"]]),iLe=(e,t)=>e+t.scrollHeight,lLe=(e,t,n)=>{let s=[...n].reduce(iLe,0);return e-s-t/2},cf={FACEBOOK:"https://developers.facebook.com/docs/messenger-platform/policy/policy-overview/",TWILIO_WHATSAPP:"https://www.twilio.com/docs/whatsapp/tutorial/send-whatsapp-notification-messages-templates#sending-non-template-messages-within-a-24-hour-session",WHATSAPP_CLOUD:"https://business.whatsapp.com/policy#:~:text=You%20may%20reply%20to%20a,messages%20via%20approved%20Message%20Templates."},rLe="https://hub.2.chatwoot.com/changelogs",cLe={components:{MessageList:XMe,ReplyBox:Swe,Banner:fr,ConversationLabelSuggestion:oLe,Spinner:An},mixins:[wr],setup(){const e=j(!1),t=j(null),{isEnterprise:n}=si();Os({Escape:{action:()=>{e.value=!1}}});const{isAIIntegrationEnabled:a,isLabelSuggestionFeatureEnabled:o,fetchIntegrationsIfRequired:i,fetchLabelSuggestions:l}=hu();return Hn("contextMenuElementTarget",t),{isEnterprise:n,isPopOutReplyBox:e,isAIIntegrationEnabled:a,isLabelSuggestionFeatureEnabled:o,fetchIntegrationsIfRequired:i,fetchLabelSuggestions:l,conversationPanelRef:t}},data(){return{isLoadingPrevious:!0,heightBeforeLoad:null,conversationPanel:null,hasUserScrolled:!1,isProgrammaticScroll:!1,messageSentSinceOpened:!1,labelSuggestions:[]}},computed:{...mt({currentChat:"getSelectedChat",currentUserId:"getCurrentUserID",listLoadingStatus:"getAllMessagesLoaded",currentAccountId:"getCurrentAccountId"}),isOpen(){var e;return((e=this.currentChat)==null?void 0:e.status)===yt.STATUS_TYPE.OPEN},shouldShowLabelSuggestions(){return this.isOpen&&this.isEnterprise&&this.isAIIntegrationEnabled&&!this.messageSentSinceOpened},inboxId(){return this.currentChat.inbox_id},inbox(){return this.$store.getters["inboxes/getInbox"](this.inboxId)},typingUsersList(){return this.$store.getters["conversationTypingStatus/getUserList"](this.currentChat.id)},isAnyoneTyping(){return this.typingUsersList.length!==0},typingUserNames(){const e=this.typingUsersList;if(this.isAnyoneTyping){const[t,n]=eR(e);return this.$t(t,n)}return""},getMessages(){const e=this.currentChat.messages||[];return this.isAWhatsAppChannel?i0e(e):e},readMessages(){return r0e(this.getMessages,this.currentChat.agent_last_seen_at)},unReadMessages(){return c0e(this.getMessages,this.currentChat.agent_last_seen_at)},shouldShowSpinner(){return this.currentChat&&this.currentChat.dataFetched===void 0||!this.listLoadingStatus&&this.isLoadingPrevious},hasDuplicateInstagramInbox(){const e=this.inbox.instagram_id,{additional_attributes:t={}}=this.inbox,n=this.$store.getters["inboxes/getInstagramInboxByInstagramId"](e);return this.inbox.channel_type===St.FB&&t.type==="instagram_direct_message"&&n},replyWindowBannerMessage(){if(this.isAWhatsAppChannel)return this.$t("CONVERSATION.TWILIO_WHATSAPP_CAN_REPLY");if(this.isAPIInbox){const{additional_attributes:e={}}=this.inbox;if(e){const{agent_reply_time_window_message:t,agent_reply_time_window:n}=e;return t||this.$t("CONVERSATION.API_HOURS_WINDOW",{hours:n})}return""}return this.$t("CONVERSATION.CANNOT_REPLY")},replyWindowLink(){return this.isAFacebookInbox||this.isAnInstagramChannel?cf.FACEBOOK:this.isAWhatsAppCloudChannel?cf.WHATSAPP_CLOUD:this.isAPIInbox?"":cf.TWILIO_WHATSAPP},replyWindowLinkText(){return this.isAWhatsAppChannel||this.isAFacebookInbox||this.isAnInstagramChannel?this.$t("CONVERSATION.24_HOURS_WINDOW"):this.isAPIInbox?"":this.$t("CONVERSATION.TWILIO_WHATSAPP_24_HOURS_WINDOW")},unreadMessageCount(){return this.currentChat.unread_count||0},unreadMessageLabel(){const e=this.unreadMessageCount>9?"9+":this.unreadMessageCount,t=this.unreadMessageCount>1?"CONVERSATION.UNREAD_MESSAGES":"CONVERSATION.UNREAD_MESSAGE";return`${e} ${this.$t(t)}`},inboxSupportsReplyTo(){const e=this.inboxHasFeature(zc.REPLY_TO),t=this.inboxHasFeature(zc.REPLY_TO_OUTGOING)&&!this.is360DialogWhatsAppChannel;return{incoming:e,outgoing:t}}},watch:{currentChat(e,t){e.id!==t.id&&(this.fetchAllAttachmentsFromCurrentChat(),this.fetchSuggestions(),this.messageSentSinceOpened=!1)}},created(){Dt.on(un.SCROLL_TO_MESSAGE,this.onScrollToMessage),Dt.on(un.FETCH_LABEL_SUGGESTIONS,this.fetchSuggestions),Dt.on(un.MESSAGE_SENT,()=>{this.messageSentSinceOpened=!0})},mounted(){this.addScrollListener(),this.fetchAllAttachmentsFromCurrentChat(),this.fetchSuggestions()},unmounted(){this.removeBusListeners(),this.removeScrollListener()},methods:{async fetchSuggestions(){this.labelSuggestions=[],!this.isLabelSuggestionDismissed()&&this.isEnterprise&&(await this.fetchIntegrationsIfRequired(),this.isLabelSuggestionFeatureEnabled&&(this.labelSuggestions=await this.fetchLabelSuggestions({conversationId:this.currentChat.id}),this.$nextTick(()=>{const{messageId:e}=this.$route.query;!e&&!this.hasUserScrolled&&this.scrollToBottom()})))},isLabelSuggestionDismissed(){return ka.getFlag(ao.DISMISSED_LABEL_SUGGESTIONS,this.currentAccountId,this.currentChat.id)},fetchAllAttachmentsFromCurrentChat(){this.$store.dispatch("fetchAllAttachments",this.currentChat.id)},removeBusListeners(){Dt.off(un.SCROLL_TO_MESSAGE,this.onScrollToMessage)},onScrollToMessage({messageId:e=""}={}){this.$nextTick(()=>{const t=document.getElementById("message"+e);t?(this.isProgrammaticScroll=!0,t.scrollIntoView({behavior:"smooth"}),this.fetchPreviousMessages()):this.scrollToBottom()}),this.makeMessagesRead()},addScrollListener(){this.conversationPanel=this.$el.querySelector(".conversation-panel"),this.setScrollParams(),this.conversationPanel.addEventListener("scroll",this.handleScroll),this.$nextTick(()=>this.scrollToBottom()),this.isLoadingPrevious=!1},removeScrollListener(){this.conversationPanel.removeEventListener("scroll",this.handleScroll)},scrollToBottom(){this.isProgrammaticScroll=!0;let e=[],t=this.conversationPanel.querySelector(".label-suggestion");this.unreadMessageCount>0?e=this.conversationPanel.querySelectorAll(".message--unread"):t?e=[t]:e=Array.from(this.conversationPanel.querySelectorAll(".message--read")).slice(-1),this.conversationPanel.scrollTop=lLe(this.conversationPanel.scrollHeight,this.$el.scrollHeight,e)},setScrollParams(){this.heightBeforeLoad=this.conversationPanel.scrollHeight,this.scrollTopBeforeLoad=this.conversationPanel.scrollTop},async fetchPreviousMessages(e=0){this.setScrollParams();const t=this.currentChat.dataFetched===!0&&!this.listLoadingStatus&&!this.isLoadingPrevious;if(e<100&&!this.isLoadingPrevious&&t){this.isLoadingPrevious=!0;try{await this.$store.dispatch("fetchPreviousMessages",{conversationId:this.currentChat.id,before:this.currentChat.messages[0].id});const n=this.conversationPanel.scrollHeight-this.heightBeforeLoad;this.conversationPanel.scrollTop=this.scrollTopBeforeLoad+n,this.setScrollParams()}catch{}finally{this.isLoadingPrevious=!1}}},handleScroll(e){this.isProgrammaticScroll?(this.isProgrammaticScroll=!1,this.hasUserScrolled=!1):this.hasUserScrolled=!0,Dt.emit(un.ON_MESSAGE_LIST_SCROLL),this.fetchPreviousMessages(e.target.scrollTop)},makeMessagesRead(){this.$store.dispatch("markMessagesRead",{id:this.currentChat.id})},async handleMessageRetry(e){if(!e)return;const t=Ts(e);await this.$store.dispatch("sendMessageWithData",t)}}},uLe={class:"flex flex-col justify-between flex-grow h-full min-w-0 m-0"},dLe={class:"min-h-[4rem] flex flex-shrink-0 flex-grow-0 items-center flex-auto justify-center max-w-full mt-0 mr-0 mb-1 ml-0 relative first:mt-auto last:mb-0"},pLe={class:"list-none flex justify-center items-center"},mLe={class:"shadow-lg rounded-full bg-n-brand text-white text-xs font-medium my-2.5 mx-auto px-2.5 py-1.5"},hLe={key:0,class:"absolute flex items-center w-full h-0 -top-7"},fLe={class:"flex py-2 pr-4 pl-5 shadow-md rounded-full bg-white dark:bg-n-solid-3 text-n-slate-11 text-xs font-semibold my-2.5 mx-auto"};function gLe(e,t,n,s,a,o){var d;const i=W("Banner"),l=W("Spinner"),r=W("ConversationLabelSuggestion"),c=W("MessageList"),u=W("ReplyBox");return p(),E("div",uLe,[e.currentChat.can_reply?o.hasDuplicateInstagramInbox?(p(),L(i,{key:1,"color-scheme":"alert",class:"mx-2 mt-2 overflow-hidden rounded-lg","banner-message":e.$t("CONVERSATION.OLD_INSTAGRAM_INBOX_REPLY_BANNER")},null,8,["banner-message"])):$("",!0):(p(),L(i,{key:0,"color-scheme":"alert",class:"mx-2 mt-2 overflow-hidden rounded-lg","banner-message":o.replyWindowBannerMessage,"href-link":o.replyWindowLink,"href-link-text":o.replyWindowLinkText},null,8,["banner-message","href-link","href-link-text"])),S(c,{ref:"conversationPanelRef",class:"conversation-panel flex-shrink flex-grow basis-px flex flex-col overflow-y-auto relative h-full m-0 pb-4","current-user-id":e.currentUserId,"first-unread-id":(d=o.unReadMessages[0])==null?void 0:d.id,"is-an-email-channel":e.isAnEmailChannel,"inbox-supports-reply-to":o.inboxSupportsReplyTo,messages:o.getMessages,onRetry:o.handleMessageRetry},{beforeAll:Y(()=>[S(Ys,{name:"slide-up"},{default:Y(()=>[m("li",dLe,[o.shouldShowSpinner?(p(),L(l,{key:0,class:"text-n-brand"})):$("",!0)])]),_:1})]),unreadBadge:Y(()=>[re(m("li",pLe,[m("span",mLe,I(o.unreadMessageLabel),1)],512),[[rn,o.unreadMessageCount!=0]])]),after:Y(()=>[o.shouldShowLabelSuggestions?(p(),L(r,{key:0,"suggested-labels":a.labelSuggestions,"chat-labels":e.currentChat.labels,"conversation-id":e.currentChat.id},null,8,["suggested-labels","chat-labels","conversation-id"])):$("",!0)]),_:1},8,["current-user-id","first-unread-id","is-an-email-channel","inbox-supports-reply-to","messages","onRetry"]),m("div",{class:ae(["flex relative flex-col",{"modal-mask":s.isPopOutReplyBox,"bg-n-background":!s.isPopOutReplyBox}])},[o.isAnyoneTyping?(p(),E("div",hLe,[m("div",fLe,[xe(I(o.typingUserNames)+" ",1),t[1]||(t[1]=m("img",{class:"w-6 ltr:ml-2 rtl:mr-2",src:LR,alt:"Someone is typing"},null,-1))])])):$("",!0),S(u,{"pop-out-reply-box":s.isPopOutReplyBox,"onUpdate:popOutReplyBox":t[0]||(t[0]=h=>s.isPopOutReplyBox=h)},null,8,["pop-out-reply-box"])],2)])}const _Le=De(cLe,[["render",gLe],["__scopeId","data-v-8d01b076"]]),vLe={components:{ConversationHeader:bIe,DashboardAppFrame:IIe,EmptyState:nCe,MessagesView:_Le},props:{inboxId:{type:[Number,String],default:"",required:!1},isInboxView:{type:Boolean,default:!1},isContactPanelOpen:{type:Boolean,default:!0},isOnExpandedLayout:{type:Boolean,default:!0}},data(){return{activeIndex:0}},computed:{...mt({currentChat:"getSelectedChat",dashboardApps:"dashboardApps/getRecords"}),dashboardAppTabs(){return[{key:"messages",index:0,name:this.$t("CONVERSATION.DASHBOARD_APP_TAB_MESSAGES")},...this.dashboardApps.map((e,t)=>({key:`dashboard-${e.id}`,index:t+1,name:e.title}))]},showContactPanel(){return this.isContactPanelOpen&&this.currentChat.id}},watch:{"currentChat.inbox_id":{immediate:!0,handler(e){e&&this.$store.dispatch("inboxAssignableAgents/fetch",[e])}},"currentChat.id"(){this.fetchLabels(),this.activeIndex=0}},mounted(){this.fetchLabels(),this.$store.dispatch("dashboardApps/get")},methods:{fetchLabels(){this.currentChat.id&&this.$store.dispatch("conversationLabels/get",this.currentChat.id)},onDashboardAppTabChange(e){this.activeIndex=e}}},ELe={class:"flex h-full min-h-0 m-0"};function bLe(e,t,n,s,a,o){const i=W("ConversationHeader"),l=W("woot-tabs-item"),r=W("woot-tabs"),c=W("MessagesView"),u=W("EmptyState"),d=W("DashboardAppFrame");return p(),E("div",{class:ae(["conversation-details-wrap flex flex-col min-w-0 w-full bg-n-background relative",{"border-l rtl:border-l-0 rtl:border-r border-n-weak":!n.isOnExpandedLayout}])},[e.currentChat.id?(p(),L(i,{key:0,chat:e.currentChat,"show-back-button":n.isOnExpandedLayout&&!n.isInboxView},null,8,["chat","show-back-button"])):$("",!0),e.dashboardApps.length&&e.currentChat.id?(p(),L(r,{key:1,index:a.activeIndex,class:"-mt-px border-t border-t-n-background",onChange:o.onDashboardAppTabChange},{default:Y(()=>[(p(!0),E(ue,null,Ae(o.dashboardAppTabs,h=>(p(),L(l,{key:h.key,index:h.index,name:h.name,"show-badge":!1,"is-compact":"",class:"[&_a]:pt-1"},null,8,["index","name"]))),128))]),_:1},8,["index","onChange"])):$("",!0),re(m("div",ELe,[e.currentChat.id?(p(),L(c,{key:0,"inbox-id":n.inboxId,"is-inbox-view":n.isInboxView},null,8,["inbox-id","is-inbox-view"])):$("",!0),!e.currentChat.id&&!n.isInboxView?(p(),L(u,{key:1,"is-on-expanded-layout":n.isOnExpandedLayout},null,8,["is-on-expanded-layout"])):$("",!0),We(e.$slots,"default")],512),[[rn,!a.activeIndex]]),(p(!0),E(ue,null,Ae(e.dashboardApps,(h,g)=>re((p(),L(d,{key:e.currentChat.id+"-"+h.id,"is-visible":a.activeIndex-1===g,config:e.dashboardApps[g].content,position:g,"current-chat":e.currentChat},null,8,["is-visible","config","position","current-chat"])),[[rn,a.activeIndex-1===g]])),128))],2)}const bC=De(vLe,[["render",bLe]]),TC={__name:"CmdBarConversationSnooze",setup(e){const t=rt(),n=pn(),{t:s}=be(),a=j(!1),o=y(()=>n.getSelectedChat.value),i=y(()=>n.getContextMenuChatId.value),l=async(d,h)=>{var g;await t.dispatch("toggleStatus",{conversationId:((g=o.value)==null?void 0:g.id)||i.value,status:d,snoozedUntil:h}),t.dispatch("setContextMenuChatId",null),ne(s("CONVERSATION.CHANGE_STATUS"))},r=d=>{d===yt.SNOOZE_OPTIONS.UNTIL_CUSTOM_TIME?a.value=!0:l(yt.STATUS_TYPE.SNOOZED,q_(d)||null)},c=d=>{a.value=!1,d&&l(yt.STATUS_TYPE.SNOOZED,Ao(d))},u=()=>{t.dispatch("setContextMenuChatId",null),a.value=!1};return Yo(cAe,r),(d,h)=>{const g=W("woot-modal");return p(),L(g,{show:a.value,"onUpdate:show":h[0]||(h[0]=f=>a.value=f),"on-close":u},{default:Y(()=>[S(Z_,{onClose:u,onChooseTime:c})]),_:1},8,["show"])}}},SC={__name:"SidepanelSwitch",setup(e){const{updateUISettings:t}=tn(),n=_e("getCurrentAccountId"),s=_e("accounts/isFeatureEnabledonAccount"),a=y(()=>s.value(n.value,ft.CAPTAIN)),{uiSettings:o}=tn(),i=y(()=>o.value.is_contact_sidebar_open),l=y(()=>o.value.is_copilot_panel_open),r=()=>{t({is_contact_sidebar_open:!i.value,is_copilot_panel_open:!1})},c=()=>{t({is_contact_sidebar_open:!0,is_copilot_panel_open:!1})},u=()=>{t({is_contact_sidebar_open:!1,is_copilot_panel_open:!0})};return Os({"Alt+KeyO":{action:r}}),(h,g)=>{const f=Qe("tooltip");return p(),L(Yp,{class:"flex flex-col justify-center items-center absolute top-36 xl:top-24 ltr:right-2 rtl:left-2 bg-n-solid-2/90 backdrop-blur-lg border border-n-weak/50 rounded-full gap-1.5 p-1.5 shadow-sm transition-shadow duration-200 hover:shadow"},{default:Y(()=>[re(S(te,{ghost:"",slate:"",sm:"",class:ae(["!rounded-full transition-all duration-[250ms] ease-out active:!scale-95 active:!brightness-105 active:duration-75",{"bg-n-alpha-2 active:shadow-sm":i.value}]),icon:"i-ph-user-bold",onClick:c},null,8,["class"]),[[f,h.$t("CONVERSATION.SIDEBAR.CONTACT"),void 0,{top:!0}]]),a.value?re((p(),L(te,{key:0,ghost:"",slate:"",sm:"",class:ae(["!rounded-full transition-all duration-[250ms] ease-out active:!scale-95 active:duration-75",{"bg-n-alpha-2 !text-n-iris-9 active:!brightness-105 active:shadow-sm":l.value}]),icon:"i-woot-captain",onClick:u},null,8,["class"])),[[f,h.$t("CONVERSATION.SIDEBAR.COPILOT"),void 0,{bottom:!0}]]):$("",!0)]),_:1})}}},TLe={props:{icon:{type:String,default:""},iconSize:{type:[Number,String],default:20},emoji:{type:String,default:""}},computed:{...mt({uiSettings:"getUISettings"}),isIconTypeEmoji(){const{icon_type:e}=this.uiSettings||{};return e==="emoji"},showEmoji(){return this.isIconTypeEmoji&&this.emoji&&sO(this.emoji)},showIcon(){return!this.showEmoji&&this.icon},iconContent(){return this.showEmoji?this.emoji:""},className(){return{"icon--emoji":this.showEmoji,"icon--font":this.showIcon,[this.icon]:this.showIcon}}}};function SLe(e,t,n,s,a,o){const i=W("fluent-icon");return o.showEmoji?(p(),E("i",{key:0,class:ae(o.className)},I(o.iconContent),3)):o.showIcon?(p(),L(i,{key:1,size:n.iconSize,icon:n.icon,class:ae(["flex-shrink-0",o.className])},null,8,["size","icon","class"])):$("",!0)}const AC=De(TLe,[["render",SLe],["__scopeId","data-v-93a331dd"]]),ALe={class:"text-sm"},yLe={class:"flex justify-between"},ILe={class:"text-n-slate-12 text-sm mb-0 py-0 pr-2 pl-0"},CLe={class:"flex flex-row"},NLe={class:"flex justify-end w-3 text-n-blue-text cursor-pointer"},Uo={__name:"AccordionItem",props:{title:{type:String,required:!0},compact:{type:Boolean,default:!1},icon:{type:String,default:""},emoji:{type:String,default:""},isOpen:{type:Boolean,default:!0}},emits:["toggle"],setup(e,{emit:t}){const n=t,s=()=>{n("toggle")};return(a,o)=>{const i=W("fluent-icon");return p(),E("div",ALe,[m("button",{class:ae(["flex items-center select-none w-full rounded-lg bg-n-slate-2 outline outline-1 outline-n-weak m-0 cursor-grab justify-between py-2 px-4 drag-handle",{"rounded-bl-none rounded-br-none":e.isOpen}]),onClick:Ve(s,["stop"])},[m("div",yLe,[S(AC,{class:"inline-block w-5",icon:e.icon,emoji:e.emoji},null,8,["icon","emoji"]),m("h5",ILe,I(e.title),1)]),m("div",CLe,[We(a.$slots,"button"),m("div",NLe,[e.isOpen?(p(),L(i,{key:0,size:"24",icon:"subtract",type:"solid"})):(p(),L(i,{key:1,size:"24",icon:"add",type:"solid"}))])])],2),e.isOpen?(p(),E("div",{key:0,class:ae(["bg-n-background outline outline-1 outline-n-weak -mt-[-1px] border-t-0 rounded-br-lg rounded-bl-lg",e.compact?"p-0":"px-2 py-4"])},[We(a.$slots,"default")],2)):$("",!0)])}}},OLe={components:{ConversationCard:wI,Spinner:An},props:{contactId:{type:[String,Number],required:!0},conversationId:{type:[String,Number],required:!0}},computed:{conversations(){return this.$store.getters["contactConversations/getContactConversation"](this.contactId)},previousConversations(){return this.conversations.filter(e=>e.id!==Number(this.conversationId))},...mt({uiFlags:"contactConversations/getUIFlags"})},watch:{contactId(e,t){e&&e!==t&&this.$store.dispatch("contactConversations/get",e)}},mounted(){this.$store.dispatch("contactConversations/get",this.contactId)}},RLe={key:0,class:""},xLe={key:0,class:"no-label-message px-4 p-3"},wLe={key:1,class:"contact-conversation--list"},$Le={key:1,class:"flex items-center justify-center py-5"};function MLe(e,t,n,s,a,o){const i=W("ConversationCard"),l=W("Spinner");return e.uiFlags.isFetching?(p(),E("div",$Le,[S(l)])):(p(),E("div",RLe,[o.previousConversations.length?(p(),E("div",wLe,[(p(!0),E(ue,null,Ae(o.previousConversations,r=>(p(),L(i,{key:r.id,chat:r,"hide-inbox-name":!1,"hide-thumbnail":"","enable-context-menu":"",compact:"","allowed-context-menu-options":["open-new-tab","copy-link"]},null,8,["chat"]))),128))])):(p(),E("div",xLe,[m("span",null,I(e.$t("CONTACT_PANEL.CONVERSATIONS.NO_RECORDS_FOUND")),1)]))]))}const LLe=De(OLe,[["render",MLe],["__scopeId","data-v-a047c83a"]]);function yC(e=!0){const{t}=be(),n=_e("getCurrentUser"),s=_e("getSelectedChat"),a=_e("getCurrentAccountId"),o=_e("inboxAssignableAgents/getAssignableAgents"),i=y(()=>{var d;return(d=s.value)==null?void 0:d.inbox_id}),l=y(()=>{var d,h;return(h=(d=s.value)==null?void 0:d.meta)==null?void 0:h.assignee}),r=()=>({confirmed:!0,name:t("AGENT_MGMT.MULTI_SELECTOR.LIST.NONE")||"None",id:0,role:"agent",account_id:0,email:"None"}),c=y(()=>i.value?o.value(i.value):[]);return{agentsList:y(()=>{const d=c.value||[],h=OI(d,n.value,a.value),g=NI(h);return[...e&&l.value?[r()]:[],...g]}),assignableAgents:c}}const DLe={props:{title:{type:String,required:!0},value:{type:[String,Number],default:""},compact:{type:Boolean,default:!1}}},PLe={class:"items-center flex justify-between mb-1.5"},kLe={class:"text-sm font-medium text-n-slate-12"},BLe={key:0,class:"break-words"};function ULe(e,t,n,s,a,o){return p(),E("div",{class:ae(["overflow-auto",n.compact?"py-0 px-0":"py-3 px-4"])},[m("div",PLe,[m("span",kLe,I(n.title),1),We(e.$slots,"button")]),n.value?(p(),E("div",BLe,[We(e.$slots,"default",{},()=>[xe(I(n.value),1)])])):$("",!0)],2)}const IC=De(DLe,[["render",ULe]]),FLe={components:{WootDropdownItem:Gc,WootDropdownMenu:cp,Avatar:kt,NextButton:te},props:{options:{type:Array,default:()=>[]},selectedItems:{type:Array,default:()=>[]},hasThumbnail:{type:Boolean,default:!0},inputPlaceholder:{type:String,default:"Search"},noSearchResult:{type:String,default:"No results found"}},emits:["select"],data(){return{search:""}},computed:{filteredOptions(){return this.options.filter(e=>e.name.toLowerCase().includes(this.search.toLowerCase()))},noResult(){return this.filteredOptions.length===0&&this.search!==""}},mounted(){this.focusInput()},methods:{onclick(e){this.$emit("select",e)},focusInput(){this.$refs.searchbar.focus()},isActive(e){return this.selectedItems.some(t=>t&&e.id===t.id)}}},GLe={class:"dropdown-wrap"},VLe={class:"flex-auto flex-grow-0 flex-shrink-0 mb-2 max-h-8"},HLe=["placeholder"],WLe={class:"flex items-start justify-start flex-auto overflow-auto mt-2"},zLe={class:"w-full max-h-[10rem]"},YLe={class:"flex items-center justify-between w-full min-w-0 gap-2"},jLe=["title"],KLe={key:0,class:"w-full justify-center items-center flex text-n-slate-10 py-2 px-2.5 overflow-hidden whitespace-nowrap text-ellipsis text-sm"};function XLe(e,t,n,s,a,o){const i=W("Avatar"),l=W("NextButton"),r=W("WootDropdownItem"),c=W("WootDropdownMenu");return p(),E("div",GLe,[m("div",VLe,[re(m("input",{ref:"searchbar","onUpdate:modelValue":t[0]||(t[0]=u=>a.search=u),type:"text",class:"search-input",autofocus:"true",placeholder:n.inputPlaceholder},null,8,HLe),[[gt,a.search]])]),m("div",WLe,[m("div",zLe,[S(c,null,{default:Y(()=>[(p(!0),E(ue,null,Ae(o.filteredOptions,u=>(p(),L(r,{key:u.id},{default:Y(()=>[S(l,{slate:"",variant:o.isActive(u)?"faded":"ghost","trailing-icon":"",icon:o.isActive(u)?"i-lucide-check":"",class:"w-full !px-2.5",onClick:()=>o.onclick(u)},{default:Y(()=>[m("div",YLe,[m("span",{class:"my-0 overflow-hidden text-sm leading-4 whitespace-nowrap text-ellipsis",title:u.name},I(u.name),9,jLe)]),n.hasThumbnail?(p(),L(i,{key:0,src:u.thumbnail,name:u.name,status:u.availability_status,size:24,"hide-offline-status":"","rounded-full":""},null,8,["src","name","status"])):$("",!0)]),_:2},1032,["variant","icon","onClick"])]),_:2},1024))),128))]),_:1}),o.noResult?(p(),E("h4",KLe,I(n.noSearchResult),1)):$("",!0)])])])}const CC=De(FLe,[["render",XLe],["__scopeId","data-v-7ae8e95d"]]),qLe={class:"flex items-center justify-between w-full min-w-0"},ZLe={key:0,class:"text-sm text-ellipsis text-n-slate-12"},QLe=["title"],JLe={class:"flex items-center justify-between mb-1"},e3e={class:"m-0 overflow-hidden text-sm text-n-slate-11 whitespace-nowrap text-ellipsis"},NC={__name:"MultiselectDropdown",props:{options:{type:Array,default:()=>[]},selectedItem:{type:Object,default:()=>({})},hasThumbnail:{type:Boolean,default:!0},multiselectorTitle:{type:String,default:""},multiselectorPlaceholder:{type:String,default:"None"},noSearchResult:{type:String,default:"No results found"},inputPlaceholder:{type:String,default:"Search"}},emits:["select"],setup(e,{emit:t}){const n=e,s=t,[a,o]=yn(!1),i=()=>o(!1),l=c=>{s("select",c),i()},r=y(()=>!!(n.selectedItem&&n.selectedItem.id));return(c,u)=>(p(),L(C(ep),{onTrigger:i},{default:Y(()=>[m("div",{class:"relative w-full mb-2",onKeyup:wn(i,["esc"])},[S(te,{slate:"",outline:"","trailing-icon":"",icon:C(a)?"i-lucide-chevron-up":"i-lucide-chevron-down",class:"w-full !px-2",onClick:u[0]||(u[0]=()=>C(o)())},{default:Y(()=>[m("div",qLe,[r.value?(p(),E("h4",{key:1,class:"items-center overflow-hidden text-sm leading-tight whitespace-nowrap text-ellipsis text-n-slate-12",title:e.selectedItem.name},I(e.selectedItem.name),9,QLe)):(p(),E("h4",ZLe,I(e.multiselectorPlaceholder),1))]),r.value&&e.hasThumbnail?(p(),L(kt,{key:0,src:e.selectedItem.thumbnail,status:e.selectedItem.availability_status,name:e.selectedItem.name,size:24,"hide-offline-status":"","rounded-full":""},null,8,["src","status","name"])):$("",!0)]),_:1},8,["icon"]),m("div",{class:ae([{"block visible":C(a),"hidden invisible":!C(a)},"box-border top-[2.625rem] w-full border rounded-lg bg-n-alpha-3 backdrop-blur-[100px] absolute shadow-lg border-n-strong dark:border-n-strong p-2 z-[9999]"])},[m("div",JLe,[m("h4",e3e,I(e.multiselectorTitle),1),S(te,{ghost:"",slate:"",xs:"",icon:"i-lucide-x",onClick:i})]),C(a)?(p(),L(CC,{key:0,options:e.options,"selected-items":[e.selectedItem],"has-thumbnail":e.hasThumbnail,"input-placeholder":e.inputPlaceholder,"no-search-result":e.noSearchResult,onSelect:l},null,8,["options","selected-items","has-thumbnail","input-placeholder","no-search-result"])):$("",!0)],2)],32)]),_:1}))}};function t3e(){const e=rt(),t=pn(),n=y(()=>t.getSelectedChat.value),s=y(()=>{var d;return(d=n.value)==null?void 0:d.id}),a=y(()=>t["labels/getLabels"].value),o=y(()=>e.getters["conversationLabels/getConversationLabels"](s.value)),i=y(()=>a.value.filter(({title:d})=>o.value.includes(d))),l=y(()=>a.value.filter(({title:d})=>!o.value.includes(d))),r=async d=>{await e.dispatch("conversationLabels/update",{conversationId:s.value,labels:d})};return{accountLabels:a,savedLabels:o,activeLabels:i,inactiveLabels:l,addLabelToConversation:d=>{const h=i.value.map(g=>g.title);h.push(d.title),r(h)},removeLabelFromConversation:d=>{const h=i.value.map(g=>g.title).filter(g=>g!==d);r(h)},onUpdateLabels:r}}const n3e={components:{NextButton:te},props:{title:{type:String,default:""},color:{type:String,default:""},selected:{type:Boolean,default:!1}},emits:["selectLabel"],methods:{onClick(){this.$emit("selectLabel",this.title)}}},s3e={class:"flex items-center min-w-0 gap-2"},a3e=["title"];function o3e(e,t,n,s,a,o){const i=W("NextButton"),l=W("woot-dropdown-item");return p(),L(l,null,{default:Y(()=>[S(i,{slate:"",ghost:"",blue:"","trailing-icon":"",icon:n.selected?"i-lucide-circle-check":"",class:ae(["w-full !px-2.5 justify-between",{"!flex-row":!n.selected}]),onClick:o.onClick},{default:Y(()=>[m("div",s3e,[n.color?(p(),E("div",{key:0,class:"size-3 flex-shrink-0 rounded-full outline outline-1 outline-n-weak",style:Zt({backgroundColor:n.color})},null,4)):$("",!0),m("span",{class:"overflow-hidden text-ellipsis whitespace-nowrap leading-[1.1]",title:n.title},I(n.title),9,a3e)])]),_:1},8,["icon","class","onClick"])]),_:1})}const i3e=De(n3e,[["render",o3e]]),l3e=/[^a-zA-Z0-9_-]/g,r3e=/\s+/g,c3e=(e="")=>e?e.trim().toLowerCase().replace(r3e,"-").replace(l3e,""):"",u3e={components:{LabelDropdownItem:i3e,AddLabelModal:gy,Hotkey:Jl,NextButton:te},props:{accountLabels:{type:Array,default:()=>[]},selectedLabels:{type:Array,default:()=>[]},allowCreation:{type:Boolean,default:!1}},emits:["update","add","remove"],data(){return{search:"",createModalVisible:!1}},computed:{createLabelPlaceholder(){const e=this.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.CREATE_LABEL");return this.search?`${e}:`:e},filteredActiveLabels(){return this.search?bl(this.accountLabels,this.search,["title"],{threshold:.9}):this.accountLabels},noResult(){return this.filteredActiveLabels.length===0},hasExactMatchInResults(){return this.filteredActiveLabels.some(e=>e.title===this.search)},shouldShowCreate(){return this.allowCreation&&this.filteredActiveLabels.length<3},parsedSearch(){return c3e(this.search)}},mounted(){this.focusInput()},methods:{focusInput(){this.$refs.searchbar.focus()},updateLabels(e){this.$emit("update",e)},onAdd(e){this.$emit("add",e)},onRemove(e){this.$emit("remove",e)},onAddRemove(e){this.selectedLabels.includes(e.title)?this.onRemove(e.title):this.onAdd(e)},showCreateModal(){this.createModalVisible=!0},hideCreateModal(){this.createModalVisible=!1}}},d3e={class:"flex flex-col w-full max-h-[12.5rem]"},p3e={class:"flex items-center justify-center mb-1"},m3e={class:"flex-grow m-0 overflow-hidden text-sm text-n-slate-12 whitespace-nowrap text-ellipsis"},h3e={class:"flex-auto flex-grow-0 flex-shrink-0 mb-2 max-h-8"},f3e=["placeholder"],g3e={class:"flex items-start justify-start flex-auto flex-grow flex-shrink overflow-auto"},_3e={class:"w-full my-1"},v3e={key:0,class:"flex justify-center py-4 px-2.5 font-medium text-xs text-n-slate-11"},E3e={key:1,class:"flex pt-1 border-t border-solid border-n-weak"};function b3e(e,t,n,s,a,o){const i=W("Hotkey"),l=W("LabelDropdownItem"),r=W("woot-dropdown-menu"),c=W("NextButton"),u=W("AddLabelModal"),d=W("woot-modal");return p(),E("div",d3e,[m("div",p3e,[m("h4",m3e,I(e.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.TITLE")),1),S(i,{"custom-class":"border border-solid text-n-slate-12 bg-n-slate-2 text-xxs border-n-strong flex-shrink-0"},{default:Y(()=>t[2]||(t[2]=[xe(I("L"))])),_:1})]),m("div",h3e,[re(m("input",{ref:"searchbar","onUpdate:modelValue":t[0]||(t[0]=h=>a.search=h),type:"text",class:"search-input",autofocus:"true",placeholder:e.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.PLACEHOLDER")},null,8,f3e),[[gt,a.search]])]),m("div",g3e,[m("div",_3e,[S(r,null,{default:Y(()=>[(p(!0),E(ue,null,Ae(o.filteredActiveLabels,h=>(p(),L(l,{key:h.title,title:h.title,color:h.color,selected:n.selectedLabels.includes(h.title),onSelectLabel:g=>o.onAddRemove(h)},null,8,["title","color","selected","onSelectLabel"]))),128))]),_:1}),o.noResult?(p(),E("div",v3e,I(e.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.NO_RESULT")),1)):$("",!0),n.allowCreation&&o.shouldShowCreate?(p(),E("div",E3e,[S(c,{icon:"i-lucide-plus",slate:"",sm:"",ghost:"",label:`${o.createLabelPlaceholder} ${o.parsedSearch}`,disabled:o.hasExactMatchInResults,onClick:o.showCreateModal},null,8,["label","disabled","onClick"]),S(d,{show:a.createModalVisible,"onUpdate:show":t[1]||(t[1]=h=>a.createModalVisible=h),"on-close":o.hideCreateModal},{default:Y(()=>[S(u,{"prefill-title":o.parsedSearch,onClose:o.hideCreateModal},null,8,["prefill-title","onClose"])]),_:1},8,["show","on-close"])])):$("",!0)])])])}const T3e=De(u3e,[["render",b3e]]),S3e={__name:"AddLabel",emits:["add"],setup(e,{emit:t}){const n=t,s=()=>{n("add")};return(a,o)=>(p(),L(te,{faded:"",xs:"",icon:"i-lucide-plus",class:"mb-0.5 ltr:mr-0.5 rtl:ml-0.5 !rounded-[4px]",label:a.$t("CONTACT_PANEL.LABELS.CONVERSATION.ADD_BUTTON"),onClick:s},null,8,["label"]))}},A3e={components:{Spinner:Ls,LabelDropdown:T3e,AddLabel:S3e},setup(){const{isAdmin:e}=za(),{savedLabels:t,activeLabels:n,accountLabels:s,addLabelToConversation:a,removeLabelFromConversation:o}=t3e(),i=j(!1),l=()=>{i.value=!i.value},r=()=>{i.value=!1};return Os({KeyL:{action:u=>{u.preventDefault(),l()}},Escape:{action:()=>{i.value&&l()},allowOnFocusedInput:!0}}),{isAdmin:e,savedLabels:t,activeLabels:n,accountLabels:s,addLabelToConversation:a,removeLabelFromConversation:o,showSearchDropdownLabel:i,closeDropdownLabel:r,toggleLabels:l}},data(){return{selectedLabels:[]}},computed:{...mt({conversationUiFlags:"conversationLabels/getUIFlags"})}},y3e={class:"sidebar-labels-wrap"},I3e={key:0,class:"contact-conversation--list"};function C3e(e,t,n,s,a,o){const i=W("AddLabel"),l=W("woot-label"),r=W("LabelDropdown"),c=W("Spinner"),u=Qe("on-clickaway");return p(),E("div",y3e,[e.conversationUiFlags.isFetching?(p(),L(c,{key:1})):(p(),E("div",I3e,[re((p(),E("div",{class:"label-wrap flex flex-wrap",onKeyup:t[0]||(t[0]=wn((...d)=>s.closeDropdownLabel&&s.closeDropdownLabel(...d),["esc"]))},[S(i,{onAdd:s.toggleLabels},null,8,["onAdd"]),(p(!0),E(ue,null,Ae(s.activeLabels,d=>(p(),L(l,{key:d.id,title:d.title,description:d.description,"show-close":"",color:d.color,variant:"smooth",class:"max-w-[calc(100%-0.5rem)]",onRemove:s.removeLabelFromConversation},null,8,["title","description","color","onRemove"]))),128)),m("div",{class:ae([{"block visible":s.showSearchDropdownLabel,"hidden invisible":!s.showSearchDropdownLabel},"border rounded-lg bg-n-alpha-3 top-6 backdrop-blur-[100px] absolute w-full shadow-lg border-n-strong dark:border-n-strong p-2 box-border z-[9999]"])},[s.showSearchDropdownLabel?(p(),L(r,{key:0,"account-labels":s.accountLabels,"selected-labels":s.savedLabels,"allow-creation":s.isAdmin,onAdd:s.addLabelToConversation,onRemove:s.removeLabelFromConversation},null,8,["account-labels","selected-labels","allow-creation","onAdd","onRemove"])):$("",!0)],2)],32)),[[u,s.closeDropdownLabel]])]))])}const N3e=De(A3e,[["render",C3e],["__scopeId","data-v-0ae0a433"]]),O3e={components:{ContactDetailsItem:IC,MultiselectDropdown:NC,ConversationLabels:N3e,NextButton:te},props:{conversationId:{type:[Number,String],required:!0}},setup(){const{agentsList:e}=yC();return{agentsList:e}},data(){return{priorityOptions:[{id:null,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.NONE"),thumbnail:"/assets/images/dashboard/priority/none.svg"},{id:Js.URGENT,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.URGENT"),thumbnail:`/assets/images/dashboard/priority/${Js.URGENT}.svg`},{id:Js.HIGH,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.HIGH"),thumbnail:`/assets/images/dashboard/priority/${Js.HIGH}.svg`},{id:Js.MEDIUM,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.MEDIUM"),thumbnail:`/assets/images/dashboard/priority/${Js.MEDIUM}.svg`},{id:Js.LOW,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.LOW"),thumbnail:`/assets/images/dashboard/priority/${Js.LOW}.svg`}]}},computed:{...mt({currentChat:"getSelectedChat",currentUser:"getCurrentUser",teams:"teams/getTeams"}),hasAnAssignedTeam(){var e,t;return!!((t=(e=this.currentChat)==null?void 0:e.meta)!=null&&t.team)},teamsList(){return this.hasAnAssignedTeam?[{id:0,name:this.$t("TEAMS_SETTINGS.LIST.NONE")},...this.teams]:this.teams},assignedAgent:{get(){return this.currentChat.meta.assignee},set(e){const t=e?e.id:null;this.$store.dispatch("setCurrentChatAssignee",e),this.$store.dispatch("assignAgent",{conversationId:this.currentChat.id,agentId:t}).then(()=>{ne(this.$t("CONVERSATION.CHANGE_AGENT"))})}},assignedTeam:{get(){return this.currentChat.meta.team},set(e){const t=this.currentChat.id,n=e?e.id:0;this.$store.dispatch("setCurrentChatTeam",{team:e,conversationId:t}),this.$store.dispatch("assignTeam",{conversationId:t,teamId:n}).then(()=>{ne(this.$t("CONVERSATION.CHANGE_TEAM"))})}},assignedPriority:{get(){return this.priorityOptions.find(t=>t.id===this.currentChat.priority)||this.priorityOptions[0]},set(e){var a;const t=this.currentChat.id,n=(a=this.currentChat)==null?void 0:a.priority,s=e?e.id:null;this.$store.dispatch("setCurrentChatPriority",{priority:s,conversationId:t}),this.$store.dispatch("assignPriority",{conversationId:t,priority:s}).then(()=>{zt(ea.CHANGE_PRIORITY,{oldValue:n,newValue:s,from:"Conversation Sidebar"}),ne(this.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.SUCCESSFUL",{priority:e.name,conversationId:t}))})}},showSelfAssign(){return!this.assignedAgent||this.assignedAgent.id!==this.currentUser.id}},methods:{onSelfAssign(){const{account_id:e,availability_status:t,available_name:n,email:s,id:a,name:o,role:i,avatar_url:l}=this.currentUser,r={account_id:e,availability_status:t,available_name:n,email:s,id:a,name:o,role:i,thumbnail:l};this.assignedAgent=r},onClickAssignAgent(e){this.assignedAgent&&this.assignedAgent.id===e.id?this.assignedAgent=null:this.assignedAgent=e},onClickAssignTeam(e){this.assignedTeam&&this.assignedTeam.id===e.id?this.assignedTeam=null:this.assignedTeam=e},onClickAssignPriority(e){const t=this.assignedPriority&&this.assignedPriority.id===e.id;this.assignedPriority=t?null:e}}},R3e={class:"bg-n-background"},x3e={class:"multiselect-wrap--small"},w3e={class:"multiselect-wrap--small"},$3e={class:"multiselect-wrap--small"};function M3e(e,t,n,s,a,o){const i=W("NextButton"),l=W("ContactDetailsItem"),r=W("MultiselectDropdown"),c=W("ConversationLabels");return p(),E("div",R3e,[m("div",x3e,[S(l,{compact:"",title:e.$t("CONVERSATION_SIDEBAR.ASSIGNEE_LABEL")},{button:Y(()=>[o.showSelfAssign?(p(),L(i,{key:0,link:"",xs:"",icon:"i-lucide-arrow-right",class:"!gap-1",label:e.$t("CONVERSATION_SIDEBAR.SELF_ASSIGN"),onClick:o.onSelfAssign},null,8,["label","onClick"])):$("",!0)]),_:1},8,["title"]),S(r,{options:s.agentsList,"selected-item":o.assignedAgent,"multiselector-title":e.$t("AGENT_MGMT.MULTI_SELECTOR.TITLE.AGENT"),"multiselector-placeholder":e.$t("AGENT_MGMT.MULTI_SELECTOR.PLACEHOLDER"),"no-search-result":e.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.NO_RESULTS.AGENT"),"input-placeholder":e.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.PLACEHOLDER.AGENT"),onSelect:o.onClickAssignAgent},null,8,["options","selected-item","multiselector-title","multiselector-placeholder","no-search-result","input-placeholder","onSelect"])]),m("div",w3e,[S(l,{compact:"",title:e.$t("CONVERSATION_SIDEBAR.TEAM_LABEL")},null,8,["title"]),S(r,{options:o.teamsList,"selected-item":o.assignedTeam,"multiselector-title":e.$t("AGENT_MGMT.MULTI_SELECTOR.TITLE.TEAM"),"multiselector-placeholder":e.$t("AGENT_MGMT.MULTI_SELECTOR.PLACEHOLDER"),"no-search-result":e.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.NO_RESULTS.TEAM"),"input-placeholder":e.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.PLACEHOLDER.TEAM"),onSelect:o.onClickAssignTeam},null,8,["options","selected-item","multiselector-title","multiselector-placeholder","no-search-result","input-placeholder","onSelect"])]),m("div",$3e,[S(l,{compact:"",title:e.$t("CONVERSATION.PRIORITY.TITLE")},null,8,["title"]),S(r,{options:a.priorityOptions,"selected-item":o.assignedPriority,"multiselector-title":e.$t("CONVERSATION.PRIORITY.TITLE"),"multiselector-placeholder":e.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.SELECT_PLACEHOLDER"),"no-search-result":e.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.NO_RESULTS"),"input-placeholder":e.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.INPUT_PLACEHOLDER"),onSelect:o.onClickAssignPriority},null,8,["options","selected-item","multiselector-title","multiselector-placeholder","no-search-result","input-placeholder","onSelect"])]),S(l,{compact:"",title:e.$t("CONVERSATION_SIDEBAR.ACCORDION.CONVERSATION_LABELS")},null,8,["title"]),S(c,{"conversation-id":n.conversationId},null,8,["conversation-id"])])}const L3e=De(O3e,[["render",M3e]]),D3e={class:"flex"},P3e={__name:"ThumbnailGroup",props:{usersList:{type:Array,default:()=>[]},size:{type:Number,default:24},showMoreThumbnailsCount:{type:Boolean,default:!1},moreThumbnailsText:{type:String,default:""},gap:{type:String,default:"normal",validator(e){return["normal","tight"].includes(e)}}},setup(e){const t=e,n=y(()=>t.gap==="tight"?"ltr:[&:not(:first-child)]:-ml-2 rtl:[&:not(:first-child)]:-mr-2":"ltr:[&:not(:first-child)]:-ml-1 rtl:[&:not(:first-child)]:-mr-1"),s=y(()=>t.gap==="tight"?"ltr:-ml-2 rtl:-mr-2":"ltr:-ml-1 rtl:-mr-1");return(a,o)=>{const i=Qe("tooltip");return p(),E("div",D3e,[(p(!0),E(ue,null,Ae(e.usersList,l=>re((p(),L(kt,{key:l.id,title:l.name,src:l.thumbnail,name:l.name,size:e.size,class:ae(["[&>span]:outline [&>span]:outline-1 [&>span]:outline-n-background [&>span]:shadow",n.value]),"rounded-full":""},null,8,["title","src","name","size","class"])),[[i,l.name]])),128)),e.showMoreThumbnailsCount?(p(),E("span",{key:0,class:ae(["text-n-slate-11 bg-n-slate-4 outline outline-1 outline-n-background text-xs font-medium rounded-full px-2 inline-flex items-center shadow relative",s.value])},I(e.moreThumbnailsText),3)):$("",!0)])}}},k3e={components:{Spinner:Ls,ThumbnailGroup:P3e,MultiselectDropdownItems:CC,NextButton:te},props:{conversationId:{type:[Number,String],required:!0}},setup(){const{agentsList:e}=yC(!1);return{agentsList:e}},data(){return{selectedWatchers:[],showDropDown:!1}},computed:{...mt({watchersUiFlas:"conversationWatchers/getUIFlags",currentUser:"getCurrentUser"}),watchersFromStore(){return this.$store.getters["conversationWatchers/getByConversationId"](this.conversationId)},watchersList:{get(){return this.selectedWatchers},set(e){this.selectedWatchers=[...e];const t=e.map(n=>n.id);this.updateParticipant(t)}},isUserWatching(){return this.selectedWatchers.some(e=>e.id===this.currentUser.id)},thumbnailList(){return this.selectedWatchers.slice(0,4)},moreAgentCount(){return this.watchersList.length-4},moreThumbnailsText(){return this.moreAgentCount>1?this.$t("CONVERSATION_PARTICIPANTS.REMANING_PARTICIPANTS_TEXT",{count:this.moreAgentCount}):this.$t("CONVERSATION_PARTICIPANTS.REMANING_PARTICIPANT_TEXT",{count:1})},showMoreThumbs(){return this.moreAgentCount>0},totalWatchersText(){return this.selectedWatchers.length>1?this.$t("CONVERSATION_PARTICIPANTS.TOTAL_PARTICIPANTS_TEXT",{count:this.selectedWatchers.length}):this.$t("CONVERSATION_PARTICIPANTS.TOTAL_PARTICIPANT_TEXT",{count:1})}},watch:{conversationId(){this.fetchParticipants()},watchersFromStore(e=[]){this.selectedWatchers=[...e]}},mounted(){this.fetchParticipants(),this.$store.dispatch("agents/get")},methods:{fetchParticipants(){const e=this.conversationId;this.$store.dispatch("conversationWatchers/show",{conversationId:e})},async updateParticipant(e){const t=this.conversationId;let n=this.$t("CONVERSATION_PARTICIPANTS.API.SUCCESS_MESSAGE");try{await this.$store.dispatch("conversationWatchers/update",{conversationId:t,userIds:e})}catch(s){n=(s==null?void 0:s.message)||this.$t("CONVERSATION_PARTICIPANTS.API.ERROR_MESSAGE")}finally{ne(n)}this.fetchParticipants()},onOpenDropdown(){this.showDropDown=!0},onCloseDropdown(){this.showDropDown=!1},onClickItem(e){if(this.watchersList.some(n=>n.id===e.id)){const n=this.watchersList.filter(s=>s.id!==e.id);this.watchersList=[...n]}else this.watchersList=[...this.watchersList,e]},onSelfAssign(){this.watchersList=[...this.selectedWatchers,this.currentUser]}}},B3e={class:"relative bg-n-background"},U3e={class:"flex justify-between"},F3e={class:"flex justify-between w-full mb-1"},G3e={key:0,class:"m-0 text-sm total-watchers"},V3e={key:1,class:"m-0 text-sm text-n-slate-10"},H3e={class:"flex items-center justify-between"},W3e={key:0,class:"m-0 text-sm text-n-slate-10"},z3e={class:"flex items-center justify-between mb-1"},Y3e={class:"m-0 overflow-hidden text-sm whitespace-nowrap text-ellipsis text-n-slate-12"};function j3e(e,t,n,s,a,o){const i=W("Spinner"),l=W("NextButton"),r=W("ThumbnailGroup"),c=W("MultiselectDropdownItems"),u=Qe("tooltip"),d=Qe("on-clickaway");return p(),E("div",B3e,[m("div",U3e,[m("div",F3e,[m("div",null,[o.watchersList.length?(p(),E("p",G3e,[e.watchersUiFlas.isFetching?(p(),L(i,{key:0,size:"tiny"})):$("",!0),xe(" "+I(o.totalWatchersText),1)])):(p(),E("p",V3e,I(e.$t("CONVERSATION_PARTICIPANTS.NO_PARTICIPANTS_TEXT")),1))]),re(S(l,{slate:"",ghost:"",sm:"",icon:"i-lucide-settings",class:"relative -top-1",title:e.$t("CONVERSATION_PARTICIPANTS.ADD_PARTICIPANTS"),onClick:o.onOpenDropdown},null,8,["title","onClick"]),[[u,e.$t("CONVERSATION_PARTICIPANTS.ADD_PARTICIPANTS"),void 0,{left:!0}]])])]),m("div",H3e,[S(r,{"more-thumbnails-text":o.moreThumbnailsText,"show-more-thumbnails-count":o.showMoreThumbs,"users-list":o.thumbnailList},null,8,["more-thumbnails-text","show-more-thumbnails-count","users-list"]),o.isUserWatching?(p(),E("p",W3e,I(e.$t("CONVERSATION_PARTICIPANTS.YOU_ARE_WATCHING")),1)):(p(),L(l,{key:1,link:"",xs:"",icon:"i-lucide-arrow-right",class:"!gap-1",label:e.$t("CONVERSATION_PARTICIPANTS.WATCH_CONVERSATION"),onClick:o.onSelfAssign},null,8,["label","onClick"]))]),re((p(),E("div",{class:ae([{"block visible":a.showDropDown,"hidden invisible":!a.showDropDown},"border rounded-lg shadow-lg bg-n-alpha-3 absolute backdrop-blur-[100px] border-n-strong dark:border-n-strong p-2 z-[9999] box-border top-8 w-full"])},[m("div",z3e,[m("h4",Y3e,I(e.$t("CONVERSATION_PARTICIPANTS.ADD_PARTICIPANTS")),1),S(l,{ghost:"",slate:"",xs:"",icon:"i-lucide-x",onClick:o.onCloseDropdown},null,8,["onClick"])]),S(c,{options:s.agentsList,"selected-items":a.selectedWatchers,"has-thumbnail":"",onSelect:o.onClickItem},null,8,["options","selected-items","onSelect"])],2)),[[d,()=>{o.onCloseDropdown()}]])])}const K3e=De(k3e,[["render",j3e]]),X3e={components:{EmojiOrIcon:AC,NextButton:te},props:{href:{type:String,default:""},icon:{type:String,required:!0},emoji:{type:String,required:!0},value:{type:String,default:""},showCopy:{type:Boolean,default:!1}},methods:{async onCopy(e){e.preventDefault(),await _a(this.value),ne(this.$t("CONTACT_PANEL.COPY_SUCCESSFUL"))}}},q3e={class:"w-full h-5 ltr:-ml-1 rtl:-mr-1"},Z3e=["href"],Q3e=["title"],J3e={key:1,class:"text-sm text-n-slate-11"},eDe={key:1,class:"flex items-center gap-2 text-n-slate-11"},tDe={key:0,class:"overflow-hidden text-sm whitespace-nowrap text-ellipsis"},nDe={key:1,class:"text-sm text-n-slate-11"};function sDe(e,t,n,s,a,o){const i=W("EmojiOrIcon"),l=W("NextButton"),r=Qe("dompurify-html");return p(),E("div",q3e,[n.href?(p(),E("a",{key:0,href:n.href,class:"flex items-center gap-2 text-n-slate-11 hover:underline"},[S(i,{icon:n.icon,emoji:n.emoji,"icon-size":"14",class:"flex-shrink-0 ltr:ml-1 rtl:mr-1"},null,8,["icon","emoji"]),n.value?(p(),E("span",{key:0,class:"overflow-hidden text-sm whitespace-nowrap text-ellipsis",title:n.value},I(n.value),9,Q3e)):(p(),E("span",J3e,I(e.$t("CONTACT_PANEL.NOT_AVAILABLE")),1)),n.showCopy?(p(),L(l,{key:2,ghost:"",xs:"",slate:"",class:"ltr:-ml-1 rtl:-mr-1",icon:"i-lucide-clipboard",onClick:o.onCopy},null,8,["onClick"])):$("",!0)],8,Z3e)):(p(),E("div",eDe,[S(i,{icon:n.icon,emoji:n.emoji,"icon-size":"14",class:"flex-shrink-0 ltr:ml-1 rtl:mr-1"},null,8,["icon","emoji"]),n.value?re((p(),E("span",tDe,null,512)),[[r,n.value]]):(p(),E("span",nDe,I(e.$t("CONTACT_PANEL.NOT_AVAILABLE")),1))]))])}const aDe=De(X3e,[["render",sDe]]),oDe={props:{socialProfiles:{type:Object,default:()=>({})}},data(){return{socialMediaLinks:[{key:"facebook",icon:"facebook",link:"https://facebook.com/"},{key:"twitter",icon:"twitter",link:"https://twitter.com/"},{key:"linkedin",icon:"linkedin",link:"https://linkedin.com/"},{key:"github",icon:"github",link:"https://github.com/"},{key:"instagram",icon:"instagram",link:"https://instagram.com/"},{key:"telegram",icon:"telegram",link:"https://t.me/"}]}},computed:{availableProfiles(){return this.socialMediaLinks.filter(e=>!!this.socialProfiles[e.key])}}},iDe={key:0,class:"flex items-end gap-3 mx-0 my-2"},lDe=["href"];function rDe(e,t,n,s,a,o){const i=W("fluent-icon");return o.availableProfiles.length?(p(),E("div",iDe,[(p(!0),E(ue,null,Ae(o.availableProfiles,l=>(p(),E("a",{key:l.key,href:`${l.link}${n.socialProfiles[l.key]}`,target:"_blank",rel:"noopener noreferrer nofollow"},[S(i,{icon:`brand-${l.key}`,size:"16",class:"text-n-slate-11 hover:text-n-slate-10"},null,8,["icon"])],8,lDe))),128))])):$("",!0)}const cDe=De(oDe,[["render",rDe]]),uDe={components:{NextButton:te,Avatar:kt},props:{contact:{type:Object,default:()=>({})},inProgress:{type:Boolean,default:!1},onSubmit:{type:Function,default:()=>{}}},emits:["cancel","success"],setup(){return{v$:bt()}},data(){return{countries:Fa,companyName:"",description:"",email:"",name:"",phoneNumber:"",activeDialCode:"",avatarFile:null,avatarUrl:"",country:{id:"",name:""},city:"",socialProfileUserNames:{facebook:"",twitter:"",linkedin:"",github:""},socialProfileKeys:[{key:"facebook",prefixURL:"https://facebook.com/"},{key:"twitter",prefixURL:"https://twitter.com/"},{key:"linkedin",prefixURL:"https://linkedin.com/"},{key:"github",prefixURL:"https://github.com/"}]}},validations:{name:{required:Ye},description:{},email:{email:Li},companyName:{},phoneNumber:{},bio:{}},computed:{parsePhoneNumber(){return Md(this.phoneNumber)},isPhoneNumberNotValid(){return this.phoneNumber!==""?!Cv(this.phoneNumber,this.activeDialCode)||(this.phoneNumber!==""?this.activeDialCode==="":!1):!1},phoneNumberError(){return this.activeDialCode===""?this.$t("CONTACT_FORM.FORM.PHONE_NUMBER.DIAL_CODE_ERROR"):Cv(this.phoneNumber,this.activeDialCode)?"":this.$t("CONTACT_FORM.FORM.PHONE_NUMBER.ERROR")},setPhoneNumber(){return this.parsePhoneNumber&&this.parsePhoneNumber.countryCallingCode?this.phoneNumber:this.phoneNumber===""&&this.activeDialCode!==""?"":this.activeDialCode?`${this.activeDialCode}${this.phoneNumber}`:""}},watch:{contact(){this.setContactObject()}},mounted(){this.setContactObject(),this.setDialCode()},methods:{onCancel(){this.$emit("cancel")},onSuccess(){this.$emit("success")},countryNameWithCode({name:e,id:t}){return t?!e&&!t?"":`${e} (${t})`:e},setDialCode(){if(this.phoneNumber!==""&&this.parsePhoneNumber&&this.parsePhoneNumber.countryCallingCode){const e=this.parsePhoneNumber.countryCallingCode;this.activeDialCode=`+${e}`}},setContactObject(){const{email:e,phone_number:t,name:n}=this.contact,s=this.contact.additional_attributes||{};this.name=n||"",this.email=e||"",this.phoneNumber=t||"",this.companyName=s.company_name||"",this.country={id:s.country_code||"",name:s.country||this.$t("CONTACT_FORM.FORM.COUNTRY.SELECT_COUNTRY")},this.city=s.city||"",this.description=s.description||"",this.avatarUrl=this.contact.thumbnail||"";const{social_profiles:a={},screen_name:o}=s;this.socialProfileUserNames={twitter:a.twitter||o||"",facebook:a.facebook||"",linkedin:a.linkedin||"",github:a.github||"",instagram:a.instagram||""}},getContactObject(){this.country===null&&(this.country={id:"",name:""});const e={id:this.contact.id,name:this.name,email:this.email,phone_number:this.setPhoneNumber,additional_attributes:{...this.contact.additional_attributes,description:this.description,company_name:this.companyName,country_code:this.country.id,country:this.country.name===this.$t("CONTACT_FORM.FORM.COUNTRY.SELECT_COUNTRY")?"":this.country.name,city:this.city,social_profiles:this.socialProfileUserNames}};return this.avatarFile&&(e.avatar=this.avatarFile,e.isFormData=!0),e},setPhoneCode(e){if(this.phoneNumber!==""&&this.parsePhoneNumber){const t=this.parsePhoneNumber.countryCallingCode;if(t===e)return;this.activeDialCode=`+${t}`;const n=this.phoneNumber.replace(`+${t}`,`${e}`);this.phoneNumber=n}else this.activeDialCode=e},async handleSubmit(){if(this.v$.$touch(),!(this.v$.$invalid||this.isPhoneNumberNotValid))try{await this.onSubmit(this.getContactObject()),this.onSuccess(),ne(this.$t("CONTACT_FORM.SUCCESS_MESSAGE"))}catch(e){e instanceof Jd?e.data.includes("email")?ne(this.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.DUPLICATE")):e.data.includes("phone_number")&&ne(this.$t("CONTACT_FORM.FORM.PHONE_NUMBER.DUPLICATE")):e instanceof eu?ne(e.data):ne(this.$t("CONTACT_FORM.ERROR_MESSAGE"))}},handleImageUpload({file:e,url:t}){this.avatarFile=e,this.avatarUrl=t},async handleAvatarDelete(){try{this.contact&&this.contact.id&&(await this.$store.dispatch("contacts/deleteAvatar",this.contact.id),ne(this.$t("CONTACT_FORM.DELETE_AVATAR.API.SUCCESS_MESSAGE"))),this.avatarFile=null,this.avatarUrl="",this.activeDialCode=""}catch(e){ne(e.message?e.message:this.$t("CONTACT_FORM.DELETE_AVATAR.API.ERROR_MESSAGE"))}}}},dDe={class:"flex flex-col mb-4 items-start gap-1 w-full"},pDe={class:"mb-0.5 text-sm font-medium text-n-slate-12"},mDe={class:"w-full"},hDe=["placeholder"],fDe=["placeholder"],gDe={key:0,class:"message"},_De={class:"w-full"},vDe=["placeholder"],EDe={class:"w-full"},bDe={key:0,class:"message"},TDe={key:0,class:"relative mx-0 mt-0 mb-2.5 p-2 rounded-md text-sm border border-solid border-n-amber-5 text-n-amber-12 bg-n-amber-3"},SDe={class:"w-full"},ADe={class:"w-full"},yDe={class:"flex items-center h-10 px-2 text-sm border-solid border-y ltr:border-l rtl:border-r ltr:rounded-l-md rtl:rounded-r-md bg-n-solid-3 text-n-slate-11 border-n-weak"},IDe=["onUpdate:modelValue"],CDe={class:"flex flex-row justify-start w-full gap-2 px-0 py-2"};function NDe(e,t,n,s,a,o){const i=W("Avatar"),l=W("woot-phone-input"),r=W("woot-input"),c=W("multiselect"),u=W("NextButton");return p(),E("form",{class:"w-full px-8 pt-6 pb-8 contact--form",onSubmit:t[10]||(t[10]=Ve((...d)=>o.handleSubmit&&o.handleSubmit(...d),["prevent"]))},[m("div",dDe,[m("label",pDe,I(e.$t("CONTACT_FORM.FORM.AVATAR.LABEL")),1),S(i,{src:a.avatarUrl,size:72,name:n.contact.name,"allow-upload":"","rounded-full":"",onUpload:o.handleImageUpload,onDelete:o.handleAvatarDelete},null,8,["src","name","onUpload","onDelete"])]),m("div",null,[m("div",mDe,[m("label",{class:ae({error:s.v$.name.$error})},[xe(I(e.$t("CONTACT_FORM.FORM.NAME.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>a.name=d),type:"text",placeholder:e.$t("CONTACT_FORM.FORM.NAME.PLACEHOLDER"),onInput:t[1]||(t[1]=(...d)=>s.v$.name.$touch&&s.v$.name.$touch(...d))},null,40,hDe),[[gt,a.name]])],2),m("label",{class:ae({error:s.v$.email.$error})},[xe(I(e.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[2]||(t[2]=d=>a.email=d),type:"text",placeholder:e.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.PLACEHOLDER"),onInput:t[3]||(t[3]=(...d)=>s.v$.email.$touch&&s.v$.email.$touch(...d))},null,40,fDe),[[gt,a.email]]),s.v$.email.$error?(p(),E("span",gDe,I(e.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.ERROR")),1)):$("",!0)],2)])]),m("div",_De,[m("label",{class:ae({error:s.v$.description.$error})},[xe(I(e.$t("CONTACT_FORM.FORM.BIO.LABEL"))+" ",1),re(m("textarea",{"onUpdate:modelValue":t[4]||(t[4]=d=>a.description=d),type:"text",placeholder:e.$t("CONTACT_FORM.FORM.BIO.PLACEHOLDER"),onInput:t[5]||(t[5]=(...d)=>s.v$.description.$touch&&s.v$.description.$touch(...d))},null,40,vDe),[[gt,a.description]])],2)]),m("div",null,[m("div",EDe,[m("label",{class:ae({error:o.isPhoneNumberNotValid})},[xe(I(e.$t("CONTACT_FORM.FORM.PHONE_NUMBER.LABEL"))+" ",1),S(l,{modelValue:a.phoneNumber,"onUpdate:modelValue":t[6]||(t[6]=d=>a.phoneNumber=d),value:a.phoneNumber,error:o.isPhoneNumberNotValid,placeholder:e.$t("CONTACT_FORM.FORM.PHONE_NUMBER.PLACEHOLDER"),onBlur:s.v$.phoneNumber.$touch,onSetCode:o.setPhoneCode},null,8,["modelValue","value","error","placeholder","onBlur","onSetCode"]),o.isPhoneNumberNotValid?(p(),E("span",bDe,I(o.phoneNumberError),1)):$("",!0)],2),o.isPhoneNumberNotValid||!a.phoneNumber?(p(),E("div",TDe,I(e.$t("CONTACT_FORM.FORM.PHONE_NUMBER.HELP")),1)):$("",!0)])]),S(r,{modelValue:a.companyName,"onUpdate:modelValue":t[7]||(t[7]=d=>a.companyName=d),class:"w-full",label:e.$t("CONTACT_FORM.FORM.COMPANY_NAME.LABEL"),placeholder:e.$t("CONTACT_FORM.FORM.COMPANY_NAME.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),m("div",null,[m("div",SDe,[m("label",null,I(e.$t("CONTACT_FORM.FORM.COUNTRY.LABEL")),1),S(c,{modelValue:a.country,"onUpdate:modelValue":t[8]||(t[8]=d=>a.country=d),"track-by":"id",label:"name",placeholder:e.$t("CONTACT_FORM.FORM.COUNTRY.PLACEHOLDER"),"selected-label":"","select-label":e.$t("CONTACT_FORM.FORM.COUNTRY.SELECT_PLACEHOLDER"),"deselect-label":e.$t("CONTACT_FORM.FORM.COUNTRY.REMOVE"),"custom-label":o.countryNameWithCode,"max-height":160,options:a.countries,"allow-empty":"","option-height":104},null,8,["modelValue","placeholder","select-label","deselect-label","custom-label","options"])])]),S(r,{modelValue:a.city,"onUpdate:modelValue":t[9]||(t[9]=d=>a.city=d),class:"w-full",label:e.$t("CONTACT_FORM.FORM.CITY.LABEL"),placeholder:e.$t("CONTACT_FORM.FORM.CITY.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),m("div",ADe,[m("label",null,I(e.$t("CONTACTS_PAGE.LIST.TABLE_HEADER.SOCIAL_PROFILES")),1),(p(!0),E(ue,null,Ae(a.socialProfileKeys,d=>(p(),E("div",{key:d.key,class:"flex items-stretch w-full mb-4"},[m("span",yDe,I(d.prefixURL),1),re(m("input",{"onUpdate:modelValue":h=>a.socialProfileUserNames[d.key]=h,class:"input-group-field ltr:!rounded-l-none rtl:!rounded-r-none !mb-0",type:"text"},null,8,IDe),[[gt,a.socialProfileUserNames[d.key]]])]))),128))]),m("div",CDe,[S(u,{type:"submit",label:e.$t("CONTACT_FORM.FORM.SUBMIT"),"is-loading":n.inProgress},null,8,["label","is-loading"]),S(u,{faded:"",slate:"",type:"reset",label:e.$t("CONTACT_FORM.FORM.CANCEL"),onClick:Ve(o.onCancel,["prevent"])},null,8,["label","onClick"])])],32)}const ODe=De(uDe,[["render",NDe],["__scopeId","data-v-0fdc19dd"]]),RDe={components:{ContactForm:ODe},props:{show:{type:Boolean,default:!1},contact:{type:Object,default:()=>({})}},emits:["cancel","update:show"],computed:{...mt({uiFlags:"contacts/getUIFlags"}),localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}}},methods:{onCancel(){this.$emit("cancel")},onSuccess(){this.$emit("cancel")},async onSubmit(e){await this.$store.dispatch("contacts/update",e),await this.$store.dispatch("contacts/fetchContactableInbox",this.contact.id)}}},xDe={class:"flex flex-col h-auto overflow-auto"};function wDe(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("ContactForm"),r=W("woot-modal");return p(),L(r,{show:o.localShow,"onUpdate:show":t[0]||(t[0]=c=>o.localShow=c),"on-close":o.onCancel,"modal-type":"right-aligned"},{default:Y(()=>[m("div",xDe,[S(i,{"header-title":`${e.$t("EDIT_CONTACT.TITLE")} - ${n.contact.name||n.contact.email}`,"header-content":e.$t("EDIT_CONTACT.DESC")},null,8,["header-title","header-content"]),S(l,{contact:n.contact,"in-progress":e.uiFlags.isUpdating,"on-submit":o.onSubmit,onSuccess:o.onSuccess,onCancel:o.onCancel},null,8,["contact","in-progress","on-submit","onSuccess","onCancel"])])]),_:1},8,["show","on-close"])}const $De=De(RDe,[["render",wDe]]),MDe={props:{primaryContactName:{type:String,default:""},parentContactName:{type:String,default:""}}},LDe={key:0,class:"my-4 relative p-2.5 border rounded-[4px] text-n-slate-12 border-n-weak bg-n-background"},DDe={class:"text-base font-medium text-n-slate-12"},PDe={class:"ml-0 list-none"};function kDe(e,t,n,s,a,o){const i=Qe("dompurify-html");return n.parentContactName?(p(),E("div",LDe,[m("h5",DDe,I(e.$t("MERGE_CONTACTS.SUMMARY.TITLE")),1),m("ul",PDe,[m("li",null,[t[0]||(t[0]=m("span",{class:"inline-block mr-1"},"",-1)),re(m("span",null,null,512),[[i,e.$t("MERGE_CONTACTS.SUMMARY.DELETE_WARNING",{primaryContactName:n.primaryContactName})]])]),m("li",null,[t[1]||(t[1]=m("span",{class:"inline-block mr-1"},"",-1)),re(m("span",null,null,512),[[i,e.$t("MERGE_CONTACTS.SUMMARY.ATTRIBUTE_WARNING",{primaryContactName:n.primaryContactName,parentContactName:n.parentContactName})]])])])])):$("",!0)}const BDe=De(MDe,[["render",kDe]]),UDe={class:"option-item--user"},FDe={class:"option__user-data"},GDe={class:"option__title"},VDe={key:0,class:"user-identifier"},HDe={class:"option__body"},WDe={key:0,class:"email-icon-wrap"},zDe={key:1,class:"phone-icon-wrap"},YDe={key:2},jDe={__name:"ContactDropdownItem",props:{name:{type:String,default:""},thumbnail:{type:String,default:""},email:{type:String,default:""},phoneNumber:{type:String,default:""},identifier:{type:[String,Number],required:!0}},setup(e){return(t,n)=>{const s=W("fluent-icon");return p(),E("div",UDe,[S(kt,{src:e.thumbnail,size:28,name:e.name,"rounded-full":""},null,8,["src","name"]),m("div",FDe,[m("h5",GDe,[xe(I(e.name)+" ",1),e.identifier?(p(),E("span",VDe,I(t.$t("MERGE_CONTACTS.DROPDOWN_ITEM.ID",{identifier:e.identifier})),1)):$("",!0)]),m("p",HDe,[e.email?(p(),E("span",WDe,[S(s,{class:"merge-contact--icon",icon:"mail",size:"12"}),xe(" "+I(e.email),1)])):$("",!0),e.phoneNumber?(p(),E("span",zDe,[S(s,{class:"merge-contact--icon",icon:"call",size:"12"}),xe(" "+I(e.phoneNumber),1)])):$("",!0),!e.phoneNumber&&!e.email?(p(),E("span",YDe,I("---"))):$("",!0)])])])}}},KDe=De(jDe,[["__scopeId","data-v-99c0745e"]]),XDe={components:{MergeContactSummary:BDe,ContactDropdownItem:KDe,NextButton:te},props:{primaryContact:{type:Object,required:!0},isSearching:{type:Boolean,default:!1},isMerging:{type:Boolean,default:!1},searchResults:{type:Array,default:()=>[]}},emits:["search","submit","cancel"],setup(){return{v$:bt()}},validations:{primaryContact:{required:Ye},parentContact:{required:Ye}},data(){return{parentContact:void 0}},computed:{parentContactName(){return this.parentContact?this.parentContact.name:""}},methods:{searchChange(e){this.$emit("search",e)},onSubmit(){this.v$.$touch(),!this.v$.$invalid&&this.$emit("submit",this.parentContact.id)},onCancel(){this.$emit("cancel")}}},qDe={class:"multiselect__label"},ZDe={key:0,class:"message"},QDe={class:"flex multiselect-wrap--medium"},JDe={class:"w-8 relative text-base text-n-strong after:content-[''] after:h-12 after:w-0 ltr:after:left-4 rtl:after:right-4 after:absolute after:border-l after:border-solid after:border-n-strong before:content-[''] before:h-0 before:w-4 ltr:before:left-4 rtl:before:right-4 before:top-12 before:absolute before:border-b before:border-solid before:border-n-strong"},ePe={class:"flex flex-col w-full ltr:pl-8 rtl:pr-8"},tPe={class:"multiselect__label"},nPe={class:"flex justify-end gap-2 mt-6"};function sPe(e,t,n,s,a,o){const i=W("woot-label"),l=W("ContactDropdownItem"),r=W("multiselect"),c=W("fluent-icon"),u=W("MergeContactSummary"),d=W("NextButton");return p(),E("form",{onSubmit:t[1]||(t[1]=Ve((...h)=>o.onSubmit&&o.onSubmit(...h),["prevent"]))},[m("div",null,[m("div",null,[m("div",{class:ae(["mt-1 multiselect-wrap--medium",{error:s.v$.parentContact.$error}])},[m("label",qDe,[xe(I(e.$t("MERGE_CONTACTS.PARENT.TITLE"))+" ",1),S(i,{title:e.$t("MERGE_CONTACTS.PARENT.HELP_LABEL"),"color-scheme":"success",small:"",class:"ml-2"},null,8,["title"])]),S(r,{modelValue:a.parentContact,"onUpdate:modelValue":t[0]||(t[0]=h=>a.parentContact=h),options:n.searchResults,label:"name","track-by":"id","internal-search":!1,"clear-on-select":!1,"show-labels":!1,placeholder:e.$t("MERGE_CONTACTS.PARENT.PLACEHOLDER"),"allow-empty":"",loading:n.isSearching,"max-height":150,"open-direction":"top",onSearchChange:o.searchChange},{singleLabel:Y(h=>[S(l,{thumbnail:h.option.thumbnail,identifier:h.option.id,name:h.option.name,email:h.option.email,"phone-number":h.option.phone_number},null,8,["thumbnail","identifier","name","email","phone-number"])]),option:Y(h=>[S(l,{thumbnail:h.option.thumbnail,identifier:h.option.id,name:h.option.name,email:h.option.email,"phone-number":h.option.phone_number},null,8,["thumbnail","identifier","name","email","phone-number"])]),noResult:Y(()=>[m("span",null,I(e.$t("AGENT_MGMT.SEARCH.NO_RESULTS")),1)]),_:1},8,["modelValue","options","placeholder","loading","onSearchChange"]),s.v$.parentContact.$error?(p(),E("span",ZDe,I(e.$t("MERGE_CONTACTS.FORM.CHILD_CONTACT.ERROR")),1)):$("",!0)],2)]),m("div",QDe,[m("div",JDe,[S(c,{icon:"arrow-up",class:"absolute -top-1 ltr:left-2 rtl:right-2",size:"17"})]),m("div",ePe,[m("label",tPe,[xe(I(e.$t("MERGE_CONTACTS.PRIMARY.TITLE"))+" ",1),S(i,{title:e.$t("MERGE_CONTACTS.PRIMARY.HELP_LABEL"),"color-scheme":"alert",small:"",class:"ml-2"},null,8,["title"])]),S(r,{"model-value":n.primaryContact,disabled:"",options:[],"show-labels":!1,label:"name","track-by":"id"},{singleLabel:Y(h=>[S(l,{thumbnail:h.option.thumbnail,name:h.option.name,identifier:h.option.id,email:h.option.email,"phone-number":h.option.phoneNumber},null,8,["thumbnail","name","identifier","email","phone-number"])]),_:1},8,["model-value"])])])]),S(u,{"primary-contact-name":n.primaryContact.name,"parent-contact-name":o.parentContactName},null,8,["primary-contact-name","parent-contact-name"]),m("div",nPe,[S(d,{faded:"",slate:"",type:"reset",label:e.$t("MERGE_CONTACTS.FORM.CANCEL"),onClick:Ve(o.onCancel,["prevent"])},null,8,["label","onClick"]),S(d,{type:"submit","is-loading":n.isMerging,label:e.$t("MERGE_CONTACTS.FORM.SUBMIT")},null,8,["is-loading","label"])])],32)}const aPe=De(XDe,[["render",sPe],["__scopeId","data-v-86ea5319"]]),oPe={components:{MergeContact:aPe},props:{show:{type:Boolean,default:!1},primaryContact:{type:Object,required:!0}},emits:["close","update:show"],data(){return{isSearching:!1,searchResults:[]}},computed:{...mt({uiFlags:"contacts/getUIFlags"}),localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}}},methods:{onClose(){this.$emit("close")},async onContactSearch(e){this.isSearching=!0,this.searchResults=[];try{const{data:{payload:t}}=await tu.search(e);this.searchResults=t.filter(n=>n.id!==this.primaryContact.id)}catch{ne(this.$t("MERGE_CONTACTS.SEARCH.ERROR_MESSAGE"))}finally{this.isSearching=!1}},async onMergeContacts(e){zt(gl.MERGED_CONTACTS);try{await this.$store.dispatch("contacts/merge",{childId:this.primaryContact.id,parentId:e}),ne(this.$t("MERGE_CONTACTS.FORM.SUCCESS_MESSAGE")),this.onClose()}catch{ne(this.$t("MERGE_CONTACTS.FORM.ERROR_MESSAGE"))}}}};function iPe(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("MergeContact"),r=W("woot-modal");return p(),L(r,{show:o.localShow,"onUpdate:show":t[0]||(t[0]=c=>o.localShow=c),"on-close":o.onClose},{default:Y(()=>[S(i,{"header-title":e.$t("MERGE_CONTACTS.TITLE"),"header-content":e.$t("MERGE_CONTACTS.DESCRIPTION")},null,8,["header-title","header-content"]),S(l,{"primary-contact":n.primaryContact,"is-searching":a.isSearching,"is-merging":e.uiFlags.isMerging,"search-results":a.searchResults,onSearch:o.onContactSearch,onCancel:o.onClose,onSubmit:o.onMergeContacts},null,8,["primary-contact","is-searching","is-merging","search-results","onSearch","onCancel","onSubmit"])]),_:1},8,["show","on-close"])}const lPe=De(oPe,[["render",iPe]]),VT={"Channel::Email":1,"Channel::Whatsapp":2,"Channel::Sms":3,"Channel::TwilioSms":4,"Channel::WebWidget":5,"Channel::Api":6},OC=({name:e,email:t,channelType:n,phoneNumber:s})=>n===St.EMAIL?`${e} (${t})`:(n===St.TWILIO||n===St.WHATSAPP)&&s?`${e} (${s})`:e,rPe=({name:e,id:t,email:n,channelType:s,phoneNumber:a,medium:o,...i})=>({id:t,icon:ni(s,o,"line"),label:OC({name:e,email:n,channelType:s,phoneNumber:a}),action:"inbox",value:t,name:e,email:n,phoneNumber:a,channelType:s,medium:o,...i}),cPe=(e,t)=>{const n=VT[e.channelType]||999,s=VT[t.channelType]||999;if(n!==s)return n-s;const a=e.name||"",o=t.name||"";return a.localeCompare(o)},uPe=e=>e?e.map(rPe).sort(cPe):[],dPe=e=>{var n;const t=((n=e.match(/^([^@]*)@/))==null?void 0:n[1])||e.split("@")[0];return t.charAt(0).toUpperCase()+t.slice(1)},RC=e=>e.map(t=>({...t.inbox,sourceId:t.sourceId})),HT=(e,t=[])=>!e||!e.length?[]:e.map(n=>{const s=t.find(a=>a.id===n.id)||{};return{...yr(s,{deep:!0}),...n}}),pPe=(e,t)=>{const n=[];return e.forEach(s=>{t?n.push(s.blobSignedId):n.push(s.resource.file)}),n},mPe=({targetInbox:e,selectedContact:t,message:n,subject:s,ccEmails:a,bccEmails:o,currentUser:i,attachedFiles:l=[],directUploadsEnabled:r=!1})=>{const c={inboxId:e.id,sourceId:e.sourceId,contactId:Number(t.id),message:{content:n},assigneeId:i.id};return l!=null&&l.length&&(c.files=pPe(l,r)),s&&(c.mailSubject=s),a&&(c.message.cc_emails=a),o&&(c.message.bcc_emails=o),c},WT=({targetInbox:e,selectedContact:t,message:n,templateParams:s,currentUser:a})=>({inboxId:e.id,sourceId:e.sourceId,contactId:t.id,message:{content:n,template_params:s},assigneeId:a.id}),hPe=({keys:e=["email"],query:t})=>({payload:e.map(n=>{const s={attribute_key:n,filter_operator:"contains",values:[t],attribute_model:"standard"};return e.findIndex(a=>a===n)!==e.length-1&&(s.query_operator="or"),s})}),fPe=async({keys:e,query:t})=>{const{data:{payload:n}}=await tu.filter(void 0,"name",hPe({keys:e,query:t})),s=yr(n,{deep:!0});return(s==null?void 0:s.filter(o=>o.phoneNumber||o.email))||[]},gPe=async e=>{const t={name:e.startsWith("+")?e.slice(1):dPe(e),...e.startsWith("+")?{phone_number:e}:{email:e}},{data:{payload:{contact:n}}}=await tu.create(t);return yr(n,{deep:!0})},_Pe=async e=>{const{data:{payload:t=[]}}=await tu.getContactableInboxes(e),n=yr(t,{deep:!0});return RC(n)},_i={SINGLE:"single",MULTIPLE:"multiple"},Oa={EMAIL:"email",TEL:"tel",TEXT:"text"},xC=e=>{if(!e)return!0;try{return x3(e)}catch{return!1}},vPe=e=>{try{const t=R3(e);return{isValid:(t==null?void 0:t.isValid())||!1,formattedValue:(t==null?void 0:t.formatInternational())||e}}catch{return{isValid:!1,formattedValue:e}}},EPe=e=>({newTag:{...e===Oa.EMAIL?{email:Li}:{},...e===Oa.TEL?{isValidPhone:xC}:{}}}),bPe=(e,t,n)=>e===Oa.TEL?!xC(t):n.$invalid,TPe=(e,t,n)=>{let s=!0,a=e;if(t===Oa.EMAIL)s=!n;else if(t===Oa.TEL){const{isValid:o,formattedValue:i}=vPe(e);s=o,a=i}return{isValid:s,formattedValue:a}},SPe=(e,t,n)=>({label:e,value:t,...n===Oa.EMAIL?{email:t}:{},...n===Oa.TEL?{phoneNumber:t}:{},thumbnail:{name:e,src:""},action:"create"}),APe=({mode:e,tags:t,menuItems:n,newTag:s,isLoading:a,type:o,isNewTagInValidType:i})=>{if(e===_i.SINGLE&&t.length>=1)return[];const l=n.filter(u=>!t.includes(u.label)),r=s==null?void 0:s.trim();if(r&&!t.includes(r)&&!a&&!l.length){const{isValid:u,formattedValue:d}=TPe(r,o,i);if(u)return[SPe(d,r,o)]}return l},yPe=(e,t)=>!(e===_i.SINGLE&&t>=1),IPe=(e,t)=>e.find(n=>n.email===t),CPe={class:"relative flex items-center justify-between w-full gap-3 whitespace-nowrap"},NPe=["for"],OPe=["id","type","placeholder","disabled","onKeydown"],vu={__name:"InlineInput",props:jt({type:{type:String,default:"text"},customInputClass:{type:[String,Object,Array],default:""},customLabelClass:{type:[String,Object,Array],default:""},placeholder:{type:String,default:""},label:{type:String,default:""},id:{type:String,default:""},disabled:{type:Boolean,default:!1},focusOnMount:{type:Boolean,default:!1}},{modelValue:{type:[String,Number],default:""},modelModifiers:{}}),emits:jt(["enterPress","input","blur","focus"],["update:modelValue"]),setup(e,{expose:t,emit:n}){const s=e,a=n,o=Xt(e,"modelValue"),i=j(null),l=()=>{a("enterPress")},r=d=>{a("input",d.target.value),o.value=d.target.value},c=d=>{a("blur",d.target.value)},u=d=>{a("focus",d.target.value)};return lt(()=>{Wt(()=>{var d;s.focusOnMount&&((d=i.value)==null||d.focus())})}),t({focus:()=>{var d;return(d=i.value)==null?void 0:d.focus()}}),(d,h)=>(p(),E("div",CPe,[e.label?(p(),E("label",{key:0,for:e.id,class:ae([e.customLabelClass,"mb-0.5 text-sm font-medium text-n-slate-12"])},I(e.label),11,NPe)):$("",!0),We(d.$slots,"prefix"),re(m("input",{id:e.id,ref_key:"inlineInputRef",ref:i,"onUpdate:modelValue":h[0]||(h[0]=g=>o.value=g),type:e.type,placeholder:e.placeholder,disabled:e.disabled,class:ae([e.customInputClass,"flex w-full reset-base text-sm h-6 !mb-0 border-0 rounded-none outline-none outline-0 bg-transparent dark:bg-transparent placeholder:text-n-slate-10 dark:placeholder:text-n-slate-10 disabled:cursor-not-allowed disabled:opacity-50 text-n-slate-12 dark:text-n-slate-12 transition-all duration-500 ease-in-out"]),onInput:r,onFocus:u,onBlur:c,onKeydown:wn(Ve(l,["prevent"]),["enter"])},null,42,OPe),[[pS,o.value]])]))}},RPe={class:"flex-grow min-w-0 text-sm truncate text-n-slate-12"},xPe=["onClick"],wPe={key:0,class:"relative flex items-center gap-2 flex-1 min-w-[200px] w-full"},ag={__name:"TagInput",props:jt({placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},type:{type:String,default:Oa.TEXT},isLoading:{type:Boolean,default:!1},menuItems:{type:Array,default:()=>[],validator:e=>e.every(({action:t,value:n,label:s})=>t&&n&&s)},showDropdown:{type:Boolean,default:!1},mode:{type:String,default:_i.MULTIPLE,validator:e=>[_i.SINGLE,_i.MULTIPLE].includes(e)},focusOnMount:{type:Boolean,default:!1},allowCreate:{type:Boolean,default:!1}},{modelValue:{type:Array,default:()=>[]},modelModifiers:{}}),emits:jt(["update:modelValue","input","blur","focus","onClickOutside","add","remove"],["update:modelValue"]),setup(e,{emit:t}){const n=e,s=t,a=Xt(e,"modelValue"),o=j(null),i=j(n.modelValue),l=j(""),r=j(!0),c=y(()=>EPe(n.type)),u=bt(c,{newTag:l}),d=y(()=>bPe(n.type,l.value,u.value)),h=y(()=>n.mode===_i.SINGLE?r.value&&!i.value.length:r.value||!i.value.length),g=y(()=>n.mode===_i.SINGLE&&i.value.length>=1?!1:n.showDropdown),f=y(()=>APe({mode:n.mode,tags:i.value,menuItems:n.menuItems,newTag:l.value,isLoading:n.isLoading,type:n.type,isNewTagInValidType:d.value})),b=D=>{const M=IPe(n.menuItems,D);return M?s("add",{value:D,...M}):s("add",{value:D,action:"create"})},A=D=>{var M;i.value.push(D),l.value="",a.value=i.value,(M=o.value)==null||M.focus()},v=async()=>{var M;const D=(M=l.value)==null?void 0:M.trim();if(D){if(!yPe(n.mode,i.value.length)){l.value="";return}if([Oa.EMAIL,Oa.TEL].includes(n.type)||n.allowCreate){if(!await u.value.$validate())return;b(D)}A(D)}},T=D=>{i.value.splice(D,1),a.value=i.value,s("remove")},_=async({email:D,phoneNumber:M,...P})=>{if(n.mode===_i.SINGLE&&i.value.length>=1||!n.showDropdown)return;const U=n.type==="email";if(l.value=U?D:M,!await u.value.$validate())return;const F=U?{email:D,...P}:{phoneNumber:M,...P};s("add",F),A(D)},N=()=>{var D;s("focus"),(D=o.value)==null||D.focus(),r.value=!0},R=D=>{D.key===","&&(D.preventDefault(),v())},O=()=>{i.value.length&&(r.value=!1),s("onClickOutside")};it(()=>n.modelValue,D=>{i.value=D}),it(()=>l.value,async D=>{var M;n.type==="email"&&((M=D==null?void 0:D.trim())==null?void 0:M.length)>2&&await u.value.$validate()});const x=D=>s("input",D),w=D=>s("blur",D);return(D,M)=>re((p(),E("div",{class:"flex flex-wrap w-full gap-2 border border-transparent focus:outline-none",tabindex:"0",onFocus:N,onClick:N},[(p(!0),E(ue,null,Ae(i.value,(P,U)=>(p(),E("div",{key:U,class:"flex items-center justify-center max-w-full gap-1 px-3 py-1 rounded-lg h-7 bg-n-alpha-2"},[m("span",RPe,I(P),1),m("span",{class:"flex-shrink-0 cursor-pointer i-lucide-x size-3.5 text-n-slate-11",onClick:Ve(F=>T(U),["stop"])},null,8,xPe)]))),128)),h.value||g.value?(p(),E("div",wPe,[S(vu,{ref_key:"tagInputRef",ref:o,modelValue:l.value,"onUpdate:modelValue":M[0]||(M[0]=P=>l.value=P),placeholder:e.placeholder,disabled:e.disabled,class:"w-full","focus-on-mount":e.focusOnMount,"custom-input-class":`w-full ${d.value?"!text-n-ruby-9 dark:!text-n-ruby-9":""}`,onEnterPress:v,onFocus:N,onInput:x,onBlur:w,onKeydown:R},null,8,["modelValue","placeholder","disabled","focus-on-mount","custom-input-class"]),g.value?(p(),L(qs,{key:0,"menu-items":f.value,"is-searching":e.isLoading,class:"ltr:left-0 rtl:right-0 z-[100] top-8 overflow-y-auto max-h-60 w-[inherit] max-w-md dark:!outline-n-slate-5",onAction:_},null,8,["menu-items","is-searching"])):$("",!0)])):$("",!0)],32)),[[C(ms),()=>O()]])}},$Pe={class:"relative flex-1 px-4 py-3 overflow-y-visible"},MPe={class:"flex items-baseline w-full gap-3 min-h-7"},LPe={class:"text-sm font-medium text-n-slate-11 whitespace-nowrap"},DPe={key:0,class:"flex items-center gap-1.5 rounded-md bg-n-alpha-2 px-3 min-h-7 min-w-0"},PPe={class:"text-sm truncate text-n-slate-12"},kPe={class:"text-sm truncate text-n-slate-12"},od="COMPOSE_NEW_CONVERSATION.FORM.CONTACT_SELECTOR",BPe={__name:"ContactSelector",props:{contacts:{type:Array,required:!0},selectedContact:{type:Object,default:null},showContactsDropdown:{type:Boolean,required:!0},isLoading:{type:Boolean,required:!0},isCreatingContact:{type:Boolean,required:!0},contactId:{type:String,default:null},contactableInboxesList:{type:Array,default:()=>[]},showInboxesDropdown:{type:Boolean,required:!0},hasErrors:{type:Boolean,default:!1}},emits:["searchContacts","setSelectedContact","clearSelectedContact","updateDropdown"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=j(Oa.EMAIL),i=y(()=>{var u;return(u=n.contacts)==null?void 0:u.map(({name:d,id:h,thumbnail:g,email:f,...b})=>({id:h,label:f?`${d} (${f})`:d,value:h,thumbnail:{name:d,src:g},...b,name:d,email:f,action:"contact"}))}),l=y(()=>{const{name:u,email:d="",phoneNumber:h=""}=n.selectedContact||{};return d?`${u} (${d})`:h?`${u} (${h})`:u||""}),r=y(()=>n.hasErrors?"[&_input]:placeholder:!text-n-ruby-9 [&_input]:dark:placeholder:!text-n-ruby-9":""),c=u=>{o.value=u.startsWith("+")?Oa.TEL:Oa.EMAIL,s("searchContacts",u)};return(u,d)=>{var h;return p(),E("div",$Pe,[m("div",MPe,[m("label",LPe,I(C(a)(`${od}.LABEL`)),1),e.isCreatingContact?(p(),E("div",DPe,[m("span",PPe,I(C(a)(`${od}.CONTACT_CREATING`)),1)])):e.selectedContact?(p(),E("div",{key:1,class:ae(["flex items-center gap-1.5 rounded-md bg-n-alpha-2 min-h-7 min-w-0",e.contactId?"px-3":"ltr:pl-3 rtl:pr-3 ltr:pr-1 rtl:pl-1"])},[m("span",kPe,I(e.isCreatingContact?C(a)(`${od}.CONTACT_CREATING`):l.value),1),e.contactId?$("",!0):(p(),L(te,{key:0,variant:"ghost",icon:"i-lucide-x",color:"slate",disabled:e.contactId,size:"xs",onClick:d[0]||(d[0]=g=>s("clearSelectedContact"))},null,8,["disabled"]))],2)):(p(),L(ag,{key:2,placeholder:C(a)(`${od}.TAG_INPUT_PLACEHOLDER`),mode:"single","menu-items":i.value,"show-dropdown":e.showContactsDropdown,"is-loading":e.isLoading,disabled:((h=e.contactableInboxesList)==null?void 0:h.length)>0&&e.showInboxesDropdown,"allow-create":"",type:o.value,class:ae(["flex-1 min-h-7",r.value]),"focus-on-mount":"",onInput:c,onOnClickOutside:d[1]||(d[1]=g=>s("updateDropdown","contacts",!1)),onAdd:d[2]||(d[2]=g=>s("setSelectedContact",g)),onRemove:d[3]||(d[3]=g=>s("clearSelectedContact"))},null,8,["placeholder","menu-items","show-dropdown","is-loading","disabled","type","class"]))])])}}},UPe={class:"flex items-center flex-1 w-full gap-3 px-4 py-3 overflow-y-visible"},FPe={class:"mb-0.5 text-sm font-medium text-n-slate-11 whitespace-nowrap"},GPe={key:0,class:"flex items-center gap-1.5 rounded-md bg-n-alpha-2 truncate ltr:pl-3 rtl:pr-3 ltr:pr-1 rtl:pl-1 h-7 min-w-0"},VPe={class:"text-sm truncate text-n-slate-12"},HPe={key:1,class:"relative flex items-center h-7"},WPe={__name:"InboxSelector",props:{targetInbox:{type:Object,default:null},selectedContact:{type:Object,default:null},showInboxesDropdown:{type:Boolean,required:!0},contactableInboxesList:{type:Array,default:()=>[]},hasErrors:{type:Boolean,default:!1}},emits:["updateInbox","toggleDropdown","handleInboxAction"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=y(()=>OC(n.targetInbox));return(i,l)=>{var r;return p(),E("div",UPe,[m("label",FPe,I(C(a)("COMPOSE_NEW_CONVERSATION.FORM.INBOX_SELECTOR.LABEL")),1),e.targetInbox?(p(),E("div",GPe,[m("span",VPe,I(o.value),1),S(te,{variant:"ghost",icon:"i-lucide-x",color:"slate",size:"xs",class:"flex-shrink-0",onClick:l[0]||(l[0]=c=>s("updateInbox",null))})])):re((p(),E("div",HPe,[S(te,{label:C(a)("COMPOSE_NEW_CONVERSATION.FORM.INBOX_SELECTOR.BUTTON"),variant:"link",size:"sm",color:e.hasErrors?"ruby":"slate",disabled:!e.selectedContact,class:"hover:!no-underline",onClick:l[1]||(l[1]=c=>s("toggleDropdown",!e.showInboxesDropdown))},null,8,["label","color","disabled"]),((r=e.contactableInboxesList)==null?void 0:r.length)>0&&e.showInboxesDropdown?(p(),L(qs,{key:0,"menu-items":e.contactableInboxesList,class:"ltr:left-0 rtl:right-0 z-[100] top-8 overflow-y-auto max-h-60 w-fit max-w-sm dark:!outline-n-slate-5",onAction:l[2]||(l[2]=c=>s("handleInboxAction",c))},null,8,["menu-items"])):$("",!0)])),[[C(ms),()=>s("toggleDropdown",!1)]])])}}},zPe={class:"flex flex-col divide-y divide-n-strong"},YPe={class:"flex items-baseline flex-1 w-full h-8 gap-3 px-4 py-3"},jPe={class:"flex items-baseline flex-1 w-full gap-3 px-4 py-3 min-h-8"},KPe={class:"mb-0.5 text-sm font-medium whitespace-nowrap text-n-slate-11"},XPe={class:"flex items-center w-full gap-3 min-h-7"},qPe={key:0,class:"flex items-baseline flex-1 w-full gap-3 px-4 py-3 min-h-8"},ZPe={class:"mb-0.5 text-sm font-medium whitespace-nowrap text-n-slate-11"},tl="COMPOSE_NEW_CONVERSATION.FORM.EMAIL_OPTIONS",QPe={__name:"EmailOptions",props:jt({contacts:{type:Array,required:!0},showCcEmailsDropdown:{type:Boolean,required:!1},showBccEmailsDropdown:{type:Boolean,required:!1},isLoading:{type:Boolean,default:!1},hasErrors:{type:Boolean,default:!1}},{subject:{type:String,default:""},subjectModifiers:{},ccEmails:{type:String,default:""},ccEmailsModifiers:{},bccEmails:{type:String,default:""},bccEmailsModifiers:{}}),emits:jt(["searchCcEmails","searchBccEmails","updateDropdown"],["update:subject","update:ccEmails","update:bccEmails"]),setup(e,{emit:t}){const n=e,s=t,a=j(!1),o=()=>{a.value=!a.value},i=Xt(e,"subject"),l=Xt(e,"ccEmails"),r=Xt(e,"bccEmails"),{t:c}=be(),u=y(()=>n.ccEmails?n.ccEmails.split(",").map(A=>A.trim()):[]),d=y(()=>n.bccEmails?n.bccEmails.split(",").map(A=>A.trim()):[]),h=y(()=>{var A;return(A=n.contacts)==null?void 0:A.map(({name:v,id:T,email:_})=>({id:T,label:_,email:_,thumbnail:{name:v,src:""},value:T,action:"email"}))}),g=A=>{l.value=A.join(",")},f=A=>{r.value=A.join(",")},b=y(()=>n.hasErrors?"placeholder:!text-n-ruby-9 dark:placeholder:!text-n-ruby-9":"");return(A,v)=>(p(),E("div",zPe,[m("div",YPe,[S(vu,{modelValue:i.value,"onUpdate:modelValue":v[0]||(v[0]=T=>i.value=T),placeholder:C(c)(`${tl}.SUBJECT_PLACEHOLDER`),label:C(c)(`${tl}.SUBJECT_LABEL`),"focus-on-mount":"","custom-input-class":b.value},null,8,["modelValue","placeholder","label","custom-input-class"])]),m("div",jPe,[m("label",KPe,I(C(c)(`${tl}.CC_LABEL`)),1),m("div",XPe,[S(ag,{"model-value":u.value,placeholder:C(c)(`${tl}.CC_PLACEHOLDER`),"menu-items":h.value,"show-dropdown":e.showCcEmailsDropdown,"is-loading":e.isLoading,type:"email",class:"flex-1 min-h-7",onFocus:v[1]||(v[1]=T=>s("updateDropdown","cc",!0)),onInput:v[2]||(v[2]=T=>s("searchCcEmails",T)),onOnClickOutside:v[3]||(v[3]=T=>s("updateDropdown","cc",!1)),"onUpdate:modelValue":g},null,8,["model-value","placeholder","menu-items","show-dropdown","is-loading"]),S(te,{label:C(c)(`${tl}.BCC_BUTTON`),variant:"ghost",size:"sm",color:"slate",class:"flex-shrink-0",onClick:o},null,8,["label"])])]),a.value?(p(),E("div",qPe,[m("label",ZPe,I(C(c)(`${tl}.BCC_LABEL`)),1),S(ag,{"model-value":d.value,placeholder:C(c)(`${tl}.BCC_PLACEHOLDER`),"menu-items":h.value,"show-dropdown":e.showBccEmailsDropdown,"is-loading":e.isLoading,type:"email",class:"flex-1 min-h-7","focus-on-mount":"",onFocus:v[4]||(v[4]=T=>s("updateDropdown","bcc",!0)),onInput:v[5]||(v[5]=T=>s("searchBccEmails",T)),onOnClickOutside:v[6]||(v[6]=T=>s("updateDropdown","bcc",!1)),"onUpdate:modelValue":f},null,8,["model-value","placeholder","menu-items","show-dropdown","is-loading"])])):$("",!0)]))}},JPe={__name:"MessageEditor",props:jt({isEmailOrWebWidgetInbox:{type:Boolean,required:!0},hasErrors:{type:Boolean,default:!1},hasAttachments:{type:Boolean,default:!1},sendWithSignature:{type:Boolean,default:!1},messageSignature:{type:String,default:""},channelType:{type:String,default:""}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,{t:n}=be(),s=Xt(e,"modelValue"),a=j({hasSlashCommand:!1,showMentions:!1,mentionSearchKey:""}),o=y(()=>ul(t.messageSignature));it(s,r=>{if(t.isEmailOrWebWidgetInbox)return;const c=r?Io(r,o.value):"",u=c.startsWith("/");a.value={...a.value,hasSlashCommand:u,showMentions:u,mentionSearchKey:u?c.slice(1):""}},{immediate:!0});const i=()=>{a.value.showMentions=!1},l=async r=>{const c=t.sendWithSignature?bi(r,o.value):r;await Wt(),s.value=c};return(r,c)=>{const u=Qe("on-clickaway");return p(),E("div",{class:ae(["flex-1 h-full",[!e.hasAttachments&&"min-h-[200px]"]])},[e.isEmailOrWebWidgetInbox?(p(),L(Ks,{key:0,modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=d=>s.value=d),placeholder:C(n)("COMPOSE_NEW_CONVERSATION.FORM.MESSAGE_EDITOR.PLACEHOLDER"),class:ae(["[&>div]:!border-transparent [&>div]:px-4 [&>div]:py-4 [&>div]:!bg-transparent h-full [&_.ProseMirror-woot-style]:!max-h-[200px]",e.hasErrors?"[&_.empty-node]:before:!text-n-ruby-9 [&_.empty-node]:dark:before:!text-n-ruby-9":""]),"enable-variables":"","show-character-count":!1,signature:e.messageSignature,"allow-signature":"","send-with-signature":e.sendWithSignature,"channel-type":e.channelType},null,8,["modelValue","placeholder","class","signature","send-with-signature","channel-type"])):(p(),L(lo,{key:1,modelValue:s.value,"onUpdate:modelValue":c[1]||(c[1]=d=>s.value=d),placeholder:C(n)("COMPOSE_NEW_CONVERSATION.FORM.MESSAGE_EDITOR.PLACEHOLDER"),class:"!px-0 [&>div]:!px-4 [&>div]:!border-transparent [&>div]:!bg-transparent","custom-text-area-class":e.hasErrors?"placeholder:!text-n-ruby-9 dark:placeholder:!text-n-ruby-9":"","auto-height":"","allow-signature":"",signature:e.messageSignature,"send-with-signature":e.sendWithSignature},{default:Y(()=>[a.value.showMentions&&a.value.hasSlashCommand?re((p(),L(o_,{key:0,class:"normal-editor__canned-box","search-key":a.value.mentionSearchKey,onReplace:l},null,8,["search-key"])),[[u,i]]):$("",!0)]),_:1},8,["modelValue","placeholder","custom-text-area-class","signature","send-with-signature"]))],2)}}},eke=({inbox:e,attachFile:t,isPrivateNote:n=!1})=>{var f;const{t:s}=be(),a=_e("getCurrentAccountId"),o=_e("getCurrentUser"),i=_e("getSelectedChat"),l=_e("globalConfig/get"),r=gS((f=l.value)==null?void 0:f.maximumFileUploadSize),c=b=>{if(n)return r;const A=e==null?void 0:e.channel_type;if(!A||A===St.WEB)return r;const v=ES({channelType:A,medium:e==null?void 0:e.medium,mime:b});return v===fS?r:Math.min(v,r)},u=b=>ne(s("CONVERSATION.FILE_SIZE_LIMIT",{MAXIMUM_SUPPORTED_FILE_UPLOAD_SIZE:b})),d=b=>{var _;if(!b)return;const A=((_=b.file)==null?void 0:_.type)||b.type,v=c(A);if(!$c(b,v)){u(v);return}new Ig.DirectUpload(b.file,`/api/v1/accounts/${a.value}/conversations/${i.value.id}/direct_uploads`,{directUploadWillCreateBlobWithXHR:N=>{N.setRequestHeader("api_access_token",o.value.access_token)}}).create((N,R)=>{N?ne(N):t({file:b,blob:R})})},h=b=>{var T;if(!b)return;const A=((T=b.file)==null?void 0:T.type)||b.type,v=c(A);if(!$c(b,v)){u(v);return}t({file:b})};return{onFileUpload:b=>{l.value.directUploadsEnabled?d(b):h(b)}}},tke={class:"absolute top-full mt-1.5 max-h-[30rem] overflow-y-auto ltr:left-0 rtl:right-0 flex flex-col gap-4 px-4 pt-6 pb-5 items-start w-[28.75rem] h-auto bg-n-solid-2 border border-n-strong shadow-sm rounded-lg"},nke={class:"w-full"},ske={class:"flex gap-3 justify-between items-end w-full h-14"},ake={__name:"WhatsappTemplate",props:{template:{type:Object,default:()=>({})}},emits:["sendMessage","back"],setup(e,{emit:t}){const n=t,{t:s}=be(),a=i=>{n("sendMessage",i)},o=()=>{n("back")};return(i,l)=>(p(),E("div",tke,[m("div",nke,[S(iv,{template:e.template,onSendMessage:a,onBack:o},{actions:Y(({sendMessage:r,goBack:c,disabled:u})=>[m("div",ske,[S(te,{label:C(s)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.TEMPLATE_PARSER.BACK"),color:"slate",variant:"faded",class:"w-full font-medium",onClick:c},null,8,["label","onClick"]),S(te,{label:C(s)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.TEMPLATE_PARSER.SEND_MESSAGE"),class:"w-full font-medium",disabled:u,onClick:r},null,8,["label","disabled","onClick"])])]),_:1},8,["template"])])]))}},oke={class:"relative"},ike={key:0,class:"absolute top-full mt-1.5 max-h-96 overflow-y-auto ltr:left-0 rtl:right-0 flex flex-col gap-2 p-4 items-center w-[21.875rem] h-auto bg-n-solid-2 border border-n-strong shadow-sm rounded-lg"},lke={class:"relative w-full"},rke=["placeholder"],cke=["onClick"],uke={class:"text-sm text-n-slate-12"},dke={class:"mb-0 text-xs leading-5 text-n-slate-11 line-clamp-2"},pke={key:0,class:"pt-2 w-full text-sm text-n-slate-11"},mke={__name:"WhatsAppOptions",props:{inboxId:{type:Number,required:!0}},emits:["sendMessage"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=_e("inboxes/getFilteredWhatsAppTemplates"),i=j(""),l=j(null),r=j(!1),c=y(()=>o.value(n.inboxId)),u=y(()=>c.value.filter(A=>A.name.toLowerCase().includes(i.value.toLowerCase()))),d=A=>A.components.find(v=>v.type==="BODY").text,h=()=>{i.value="",r.value=!r.value},g=A=>{l.value=A,r.value=!1},f=()=>{l.value=null,r.value=!0},b=A=>{s("sendMessage",A),l.value=null};return(A,v)=>(p(),E("div",oke,[S(te,{icon:"i-ri-whatsapp-line",label:C(a)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.LABEL"),color:"slate",size:"sm",disabled:l.value,class:"!text-xs font-medium",onClick:h},null,8,["label","disabled"]),r.value?(p(),E("div",ike,[m("div",lke,[S(dt,{icon:"i-lucide-search",class:"absolute size-3.5 top-2 ltr:left-3 rtl:right-3"}),re(m("input",{"onUpdate:modelValue":v[0]||(v[0]=T=>i.value=T),type:"search",placeholder:C(a)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.SEARCH_PLACEHOLDER"),class:"w-full h-8 py-2 ltr:pl-10 rtl:pr-10 ltr:pr-2 rtl:pl-2 text-sm reset-base outline-none border-none rounded-lg bg-n-alpha-black2 dark:bg-n-solid-1 text-n-slate-12"},null,8,rke),[[gt,i.value]])]),(p(!0),E(ue,null,Ae(u.value,T=>(p(),E("div",{key:T.id,class:"flex flex-col gap-2 p-2 w-full rounded-lg cursor-pointer dark:hover:bg-n-alpha-3 hover:bg-n-alpha-1",onClick:_=>g(T)},[m("span",uke,I(T.name),1),m("p",dke,I(d(T)),1)],8,cke))),128)),u.value.length===0?(p(),E("p",pke,I(C(a)("COMPOSE_NEW_CONVERSATION.FORM.WHATSAPP_OPTIONS.EMPTY_STATE")),1)):$("",!0)])):$("",!0),l.value?(p(),L(ake,{key:1,template:l.value,onSendMessage:b,onBack:f},null,8,["template"])):$("",!0)]))}},hke={class:"absolute top-full mt-1.5 max-h-[30rem] overflow-y-auto ltr:left-0 rtl:right-0 flex flex-col gap-4 px-4 pt-6 pb-5 items-start w-[28.75rem] h-auto bg-n-solid-2 border border-n-strong shadow-sm rounded-lg"},fke={class:"w-full"},gke={class:"flex gap-3 justify-between items-end w-full h-14"},_ke={__name:"ContentTemplateForm",props:{template:{type:Object,default:()=>({})}},emits:["sendMessage","back"],setup(e,{emit:t}){const n=t,{t:s}=be(),a=i=>{n("sendMessage",i)},o=()=>{n("back")};return(i,l)=>(p(),E("div",hke,[m("div",fke,[S(cC,{template:e.template,onSendMessage:a,onBack:o},{actions:Y(({sendMessage:r,goBack:c,disabled:u})=>[m("div",gke,[S(te,{label:C(s)("CONTENT_TEMPLATES.FORM.BACK_BUTTON"),color:"slate",variant:"faded",class:"w-full font-medium",onClick:c},null,8,["label","onClick"]),S(te,{label:C(s)("CONTENT_TEMPLATES.FORM.SEND_MESSAGE_BUTTON"),class:"w-full font-medium",disabled:u,onClick:r},null,8,["label","disabled","onClick"])])]),_:1},8,["template"])])]))}},vke={class:"relative"},Eke={key:0,class:"absolute top-full mt-1.5 max-h-96 overflow-y-auto ltr:left-0 rtl:right-0 flex flex-col gap-2 p-4 items-center w-[21.875rem] h-auto bg-n-solid-2 border border-n-strong shadow-sm rounded-lg"},bke={class:"w-full"},Tke=["onClick"],Ske={class:"flex justify-between items-center"},Ake={class:"text-sm text-n-slate-12"},yke={class:"mb-0 text-xs leading-5 text-n-slate-11 line-clamp-2"},Ike={key:0,class:"pt-2 w-full text-sm text-n-slate-11"},Cke={__name:"ContentTemplateSelector",props:{inboxId:{type:Number,required:!0}},emits:["sendMessage"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=_e("inboxes/getInbox"),i=j(""),l=j(null),r=j(!1),c=y(()=>{var A;const b=o.value(n.inboxId);return((A=b==null?void 0:b.content_templates)==null?void 0:A.templates)||[]}),u=y(()=>c.value.filter(b=>b.friendly_name.toLowerCase().includes(i.value.toLowerCase())&&b.status==="approved")),d=()=>{i.value="",r.value=!r.value},h=b=>{l.value=b,r.value=!1},g=()=>{l.value=null,r.value=!0},f=b=>{s("sendMessage",b),l.value=null};return(b,A)=>(p(),E("div",vke,[S(te,{icon:"i-ph-whatsapp-logo",label:C(a)("COMPOSE_NEW_CONVERSATION.FORM.TWILIO_OPTIONS.LABEL"),color:"slate",size:"sm",disabled:l.value,class:"!text-xs font-medium",onClick:d},null,8,["label","disabled"]),r.value?(p(),E("div",Eke,[m("div",bke,[S(Tt,{modelValue:i.value,"onUpdate:modelValue":A[0]||(A[0]=v=>i.value=v),type:"search",placeholder:C(a)("COMPOSE_NEW_CONVERSATION.FORM.TWILIO_OPTIONS.SEARCH_PLACEHOLDER"),"custom-input-class":"ltr:pl-10 rtl:pr-10"},{prefix:Y(()=>[S(dt,{icon:"i-lucide-search",class:"absolute top-2 size-3.5 ltr:left-3 rtl:right-3"})]),_:1},8,["modelValue","placeholder"])]),(p(!0),E(ue,null,Ae(u.value,v=>(p(),E("div",{key:v.content_sid,tabindex:"0",class:"flex flex-col gap-2 p-2 w-full rounded-lg cursor-pointer dark:hover:bg-n-alpha-3 hover:bg-n-alpha-1",onClick:T=>h(v)},[m("div",Ske,[m("span",Ake,I(v.friendly_name),1)]),m("p",yke,I(v.body||C(a)("CONTENT_TEMPLATES.PICKER.NO_CONTENT")),1)],8,Tke))),128)),u.value.length===0?(p(),E("p",Ike,I(C(a)("COMPOSE_NEW_CONVERSATION.FORM.TWILIO_OPTIONS.EMPTY_STATE")),1)):$("",!0)])):$("",!0),l.value?(p(),L(_ke,{key:1,template:l.value,onSendMessage:f,onBack:g},null,8,["template"])):$("",!0)]))}},Nke={class:"flex items-center justify-between w-full h-[3.25rem] gap-2 px-4 py-3"},Oke={class:"flex gap-2 items-center"},Rke={key:2,class:"relative"},xke={class:"flex gap-2 items-center"},wke={__name:"ActionButtons",props:{attachedFiles:{type:Array,default:()=>[]},isWhatsappInbox:{type:Boolean,default:!1},isEmailOrWebWidgetInbox:{type:Boolean,default:!1},isTwilioSmsInbox:{type:Boolean,default:!1},isTwilioWhatsAppInbox:{type:Boolean,default:!1},messageTemplates:{type:Array,default:()=>[]},channelType:{type:String,default:""},isLoading:{type:Boolean,default:!1},disableSendButton:{type:Boolean,default:!1},hasSelectedInbox:{type:Boolean,default:!1},hasNoInbox:{type:Boolean,default:!1},isDropdownActive:{type:Boolean,default:!1},messageSignature:{type:String,default:""},inboxId:{type:Number,default:null}},emits:["discard","sendMessage","sendWhatsappMessage","sendTwilioMessage","insertEmoji","addSignature","removeSignature","attachFile"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=j(null),i=j(!1),l=lg(()=>ti(()=>import("./EmojiInput-Bi8nyPcY.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))),r=y(()=>n.isEmailOrWebWidgetInbox?n.messageSignature:ul(n.messageSignature)),{fetchSignatureFlagFromUISettings:c,setSignatureFlagForInbox:u,isEditorHotKeyEnabled:d}=tn(),h=y(()=>c(n.channelType)),g=y(()=>n.isTwilioWhatsAppInbox&&n.inboxId),f=y(()=>!n.isWhatsappInbox&&!n.isTwilioWhatsAppInbox&&!n.hasNoInbox),b=y(()=>!n.isWhatsappInbox&&!n.isTwilioWhatsAppInbox),A=()=>{r.value&&(h.value?s("addSignature",r.value):s("removeSignature",r.value))},v=()=>{u(n.channelType,!h.value)};it(()=>n.hasSelectedInbox,O=>{Wt(()=>{O&&n.isEmailOrWebWidgetInbox&&A()})},{immediate:!0});const T=O=>{s("insertEmoji",O)},{onFileUpload:_}=eke({isATwilioSMSChannel:n.isTwilioSmsInbox,attachFile:({blob:O,file:x})=>{if(!x)return;const w=new FileReader;w.readAsDataURL(x.file),w.onloadend=()=>{const D={resource:O||x,isPrivate:!1,thumb:w.result,blobSignedId:O==null?void 0:O.signed_id};s("attachFile",[...n.attachedFiles,D])}}}),N=y(()=>{const O=d("cmd_enter")?" + ":"";return a("COMPOSE_NEW_CONVERSATION.FORM.ACTION_BUTTONS.SEND",{keyCode:O})});return Os({Enter:{action:()=>{d("enter")&&b.value&&!n.isDropdownActive&&s("sendMessage")}},"$mod+Enter":{action:()=>{d("cmd_enter")&&b.value&&!n.isDropdownActive&&s("sendMessage")}}}),(O,x)=>(p(),E("div",Nke,[m("div",Oke,[e.isWhatsappInbox?(p(),L(mke,{key:0,"inbox-id":e.inboxId,"message-templates":e.messageTemplates,onSendMessage:x[0]||(x[0]=w=>s("sendWhatsappMessage",w))},null,8,["inbox-id","message-templates"])):$("",!0),g.value?(p(),L(Cke,{key:1,"inbox-id":e.inboxId,onSendMessage:x[1]||(x[1]=w=>s("sendTwilioMessage",w))},null,8,["inbox-id"])):$("",!0),f.value?re((p(),E("div",Rke,[S(te,{icon:"i-lucide-smile-plus",color:"slate",size:"sm",class:"!w-10",onClick:x[2]||(x[2]=w=>i.value=!i.value)}),i.value?(p(),L(C(l),{key:0,class:"top-full mt-1.5 ltr:left-0 rtl:right-0","on-click":T})):$("",!0)])),[[C(ms),()=>i.value=!1]]):$("",!0),e.isEmailOrWebWidgetInbox?(p(),L(C(RS),{key:3,ref_key:"uploadAttachment",ref:o,"input-id":"composeNewConversationAttachment",size:4096*4096,accept:C(hS),multiple:"","drop-directory":!1,data:{direct_upload_url:"/rails/active_storage/direct_uploads",direct_upload:!0},class:"p-px",onInputFile:C(_)},{default:Y(()=>[S(te,{icon:"i-lucide-plus",color:"slate",size:"sm",class:"!w-10 relative"})]),_:1},8,["accept","onInputFile"])):$("",!0),e.hasSelectedInbox&&b.value?(p(),L(te,{key:4,icon:"i-lucide-signature",color:"slate",size:"sm",class:"!w-10",onClick:v})):$("",!0)]),m("div",xke,[S(te,{label:C(a)("COMPOSE_NEW_CONVERSATION.FORM.ACTION_BUTTONS.DISCARD"),variant:"faded",color:"slate",size:"sm",class:"!text-xs font-medium",onClick:x[3]||(x[3]=w=>s("discard"))},null,8,["label"]),b.value?(p(),L(te,{key:0,label:N.value,size:"sm",class:"!text-xs font-medium",disabled:e.isLoading||e.disableSendButton,"is-loading":e.isLoading,onClick:x[4]||(x[4]=w=>s("sendMessage"))},null,8,["label","disabled","is-loading"])):$("",!0)])]))}},$ke=De(wke,[["__scopeId","data-v-cfe490cd"]]),Mke={},Lke={class:"flex items-center w-full px-4 py-3 dark:bg-n-amber-11/15 bg-n-amber-3"},Dke={class:"text-sm dark:text-n-amber-11 text-n-amber-11"};function Pke(e,t){return p(),E("div",Lke,[m("span",Dke,I(e.$t("COMPOSE_NEW_CONVERSATION.FORM.NO_INBOX_ALERT")),1)])}const kke=De(Mke,[["render",Pke]]),Bke={class:"flex flex-col gap-4 p-4"},Uke={key:0,class:"flex flex-wrap gap-3"},Fke=["src"],Gke={key:1,class:"flex flex-wrap gap-3"},Vke={class:"text-sm font-medium text-n-slate-11"},Hke={__name:"AttachmentPreviews",props:{attachments:{type:Array,required:!0}},emits:["update:attachments"],setup(e,{emit:t}){const n=e,s=t,a=r=>(r.content_type||r.type).includes("image"),o=y(()=>n.attachments.filter(r=>a(r.resource))),i=y(()=>n.attachments.filter(r=>!a(r.resource))),l=r=>{const c=n.attachments.filter(u=>u.resource.id!==r);s("update:attachments",c)};return(r,c)=>(p(),E("div",Bke,[o.value.length>0?(p(),E("div",Uke,[(p(!0),E(ue,null,Ae(o.value,u=>(p(),E("div",{key:u.id,class:"relative group/image w-[4.5rem] h-[4.5rem]"},[m("img",{class:"object-cover w-[4.5rem] h-[4.5rem] rounded-lg",src:u.thumb},null,8,Fke),S(te,{variant:"ghost",icon:"i-lucide-trash",color:"slate",class:"absolute top-1 ltr:right-1 rtl:left-1 !w-5 !h-5 transition-opacity duration-150 ease-in-out opacity-0 group-hover/image:opacity-100",onClick:d=>l(u.resource.id)},null,8,["onClick"])]))),128))])):$("",!0),i.value.length>0?(p(),E("div",Gke,[(p(!0),E(ue,null,Ae(i.value,u=>(p(),E("div",{key:u.id,class:"max-w-[18.75rem] inline-flex items-center h-8 min-w-0 bg-n-alpha-2 dark:bg-n-solid-3 rounded-lg gap-3 ltr:pl-3 rtl:pr-3 ltr:pr-2 rtl:pl-2"},[m("span",Vke,I(C(WN)(u.resource)),1),S(te,{variant:"ghost",icon:"i-lucide-x",color:"slate",size:"xs",class:"shrink-0 !h-5 !w-5",onClick:d=>l(u.resource.id)},null,8,["onClick"])]))),128))])):$("",!0)]))}},Wke={class:"w-[42rem] divide-y divide-n-strong overflow-visible transition-all duration-300 ease-in-out top-full justify-between flex flex-col bg-n-alpha-3 border border-n-strong shadow-sm backdrop-blur-[100px] rounded-xl min-w-0"},zke={__name:"ComposeNewConversationForm",props:{contacts:{type:Array,default:()=>[]},contactId:{type:String,default:null},selectedContact:{type:Object,default:null},targetInbox:{type:Object,default:null},currentUser:{type:Object,default:null},isCreatingContact:{type:Boolean,default:!1},isFetchingInboxes:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isDirectUploadsEnabled:{type:Boolean,default:!1},contactConversationsUiFlags:{type:Object,default:null},contactsUiFlags:{type:Object,default:null},messageSignature:{type:String,default:""},sendWithSignature:{type:Boolean,default:!1}},emits:["searchContacts","discard","updateSelectedContact","updateTargetInbox","clearSelectedContact","createConversation"],setup(e,{emit:t}){const n=e,s=t,a=j(!1),o=j(!1),i=j(!1),l=j(!1),r=y(()=>n.contactConversationsUiFlags.isCreating),c=gn({message:"",subject:"",ccEmails:"",bccEmails:"",attachedFiles:[]}),u=y(()=>{var z,H,q,J,de,Te,ce,Ne,Me,Fe,Ge;return{isEmail:((z=n.targetInbox)==null?void 0:z.channelType)===St.EMAIL,isTwilio:((H=n.targetInbox)==null?void 0:H.channelType)===St.TWILIO,isWhatsapp:((q=n.targetInbox)==null?void 0:q.channelType)===St.WHATSAPP,isWebWidget:((J=n.targetInbox)==null?void 0:J.channelType)===St.WEB,isApi:((de=n.targetInbox)==null?void 0:de.channelType)===St.API,isEmailOrWebWidget:((Te=n.targetInbox)==null?void 0:Te.channelType)===St.EMAIL||((ce=n.targetInbox)==null?void 0:ce.channelType)===St.WEB,isTwilioSMS:((Ne=n.targetInbox)==null?void 0:Ne.channelType)===St.TWILIO&&((Me=n.targetInbox)==null?void 0:Me.medium)==="sms",isTwilioWhatsapp:((Fe=n.targetInbox)==null?void 0:Fe.channelType)===St.TWILIO&&((Ge=n.targetInbox)==null?void 0:Ge.medium)==="whatsapp"}}),d=y(()=>{var z;return Object.keys(((z=n.targetInbox)==null?void 0:z.messageTemplates)||{}).length?n.targetInbox.messageTemplates:[]}),h=y(()=>{var z;return((z=n.targetInbox)==null?void 0:z.channelType)||""}),g=y(()=>({selectedContact:{required:Ye},targetInbox:{required:Ye},message:{required:Ei(!u.value.isWhatsapp)},subject:{required:Ei(u.value.isEmail)}})),f=bt(g,{selectedContact:y(()=>n.selectedContact),targetInbox:y(()=>n.targetInbox),message:y(()=>c.message),subject:y(()=>c.subject)}),b=y(()=>({isContactInvalid:f.value.selectedContact.$dirty&&f.value.selectedContact.$invalid,isInboxInvalid:f.value.targetInbox.$dirty&&f.value.targetInbox.$invalid,isSubjectInvalid:f.value.subject.$dirty&&f.value.subject.$invalid,isMessageInvalid:f.value.message.$dirty&&f.value.message.$invalid})),A=()=>{const{message:z,subject:H,ccEmails:q,bccEmails:J,attachedFiles:de}=c;return mPe({targetInbox:n.targetInbox,selectedContact:n.selectedContact,message:z,subject:H,ccEmails:q,bccEmails:J,currentUser:n.currentUser,attachedFiles:de,directUploadsEnabled:n.isDirectUploadsEnabled})},v=y(()=>{var z;return uPe((z=n.selectedContact)==null?void 0:z.contactInboxes)}),T=y(()=>n.selectedContact&&v.value.length===0&&!n.contactsUiFlags.isFetchingInboxes&&!n.isFetchingInboxes),_=y(()=>a.value||o.value||i.value||l.value),N=z=>{a.value=!0;const H=typeof z=="string"?z.trim():"",q=Array.from(H).some(Te=>{const ce=Te.toLowerCase(),Ne=Te.toUpperCase();return ce!==Ne}),J=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(H),de=["email","phone_number","name"].filter(Te=>!(Te==="phone_number"&&q||Te==="name"&&J));s("searchContacts",{keys:de,query:z})},R=(z,H)=>{z==="cc"?i.value=H:z==="bcc"?l.value=H:a.value=H},O=z=>{i.value=!0,s("searchContacts",{keys:["email"],query:z})},x=z=>{l.value=!0,s("searchContacts",{keys:["email"],query:z})},w=async({value:z,action:H,...q})=>{f.value.$reset(),s("updateSelectedContact",{value:z,action:H,...q}),a.value=!1,o.value=!0},D=({value:z,action:H,...q})=>{f.value.$reset(),s("updateTargetInbox",{...q}),o.value=!1,c.attachedFiles=[]},M=()=>{const z=u.value.isEmailOrWebWidget?n.messageSignature:ul(n.messageSignature);z&&(c.message=Io(c.message,z))},P=z=>{f.value.$reset(),M(),s("updateTargetInbox",z),c.attachedFiles=[]},U=()=>{s("clearSelectedContact"),c.attachedFiles=[],M()},F=z=>{c.message+=z},k=z=>{c.message=bi(c.message,z)},B=z=>{c.message=Io(c.message,z)},V=z=>{c.attachedFiles=z},G=()=>{Object.assign(c,{message:"",subject:"",ccEmails:"",bccEmails:"",attachedFiles:[]}),f.value.$reset()},K=async()=>{if(await f.value.$validate())try{await s("createConversation",{payload:A(),isFromWhatsApp:!1})&&G()}catch{}},se=async({message:z,templateParams:H})=>{const q=WT({targetInbox:n.targetInbox,selectedContact:n.selectedContact,message:z,templateParams:H,currentUser:n.currentUser});await s("createConversation",{payload:q,isFromWhatsApp:!0})},ee=async({message:z,templateParams:H})=>{const q=WT({targetInbox:n.targetInbox,selectedContact:n.selectedContact,message:z,templateParams:H,currentUser:n.currentUser});await s("createConversation",{payload:q,isFromWhatsApp:!0})},X=y(()=>!u.value.isWhatsapp&&!T.value&&!u.value.isTwilioWhatsapp);return(z,H)=>{var q;return p(),E("div",Wke,[S(BPe,{contacts:e.contacts,"selected-contact":e.selectedContact,"show-contacts-dropdown":a.value,"is-loading":e.isLoading,"is-creating-contact":e.isCreatingContact,"contact-id":e.contactId,"contactable-inboxes-list":v.value,"show-inboxes-dropdown":o.value,"has-errors":b.value.isContactInvalid,onSearchContacts:N,onSetSelectedContact:w,onClearSelectedContact:U,onUpdateDropdown:R},null,8,["contacts","selected-contact","show-contacts-dropdown","is-loading","is-creating-contact","contact-id","contactable-inboxes-list","show-inboxes-dropdown","has-errors"]),T.value?(p(),L(kke,{key:0})):(p(),L(WPe,{key:1,"target-inbox":e.targetInbox,"selected-contact":e.selectedContact,"show-inboxes-dropdown":o.value,"contactable-inboxes-list":v.value,"has-errors":b.value.isInboxInvalid,onUpdateInbox:P,onToggleDropdown:H[0]||(H[0]=J=>o.value=J),onHandleInboxAction:D},null,8,["target-inbox","selected-contact","show-inboxes-dropdown","contactable-inboxes-list","has-errors"])),u.value.isEmail?(p(),L(QPe,{key:2,"cc-emails":c.ccEmails,"onUpdate:ccEmails":H[1]||(H[1]=J=>c.ccEmails=J),"bcc-emails":c.bccEmails,"onUpdate:bccEmails":H[2]||(H[2]=J=>c.bccEmails=J),subject:c.subject,"onUpdate:subject":H[3]||(H[3]=J=>c.subject=J),contacts:e.contacts,"show-cc-emails-dropdown":i.value,"show-bcc-emails-dropdown":l.value,"is-loading":e.isLoading,"has-errors":b.value.isSubjectInvalid,onSearchCcEmails:O,onSearchBccEmails:x,onUpdateDropdown:R},null,8,["cc-emails","bcc-emails","subject","contacts","show-cc-emails-dropdown","show-bcc-emails-dropdown","is-loading","has-errors"])):$("",!0),X.value?(p(),L(JPe,{key:3,modelValue:c.message,"onUpdate:modelValue":H[4]||(H[4]=J=>c.message=J),"message-signature":e.messageSignature,"send-with-signature":e.sendWithSignature,"is-email-or-web-widget-inbox":u.value.isEmailOrWebWidget,"has-errors":b.value.isMessageInvalid,"has-attachments":c.attachedFiles.length>0,"channel-type":h.value},null,8,["modelValue","message-signature","send-with-signature","is-email-or-web-widget-inbox","has-errors","has-attachments","channel-type"])):$("",!0),c.attachedFiles.length>0?(p(),L(Hke,{key:4,attachments:c.attachedFiles,"onUpdate:attachments":H[5]||(H[5]=J=>c.attachedFiles=J)},null,8,["attachments"])):$("",!0),S($ke,{"attached-files":c.attachedFiles,"is-whatsapp-inbox":u.value.isWhatsapp,"is-email-or-web-widget-inbox":u.value.isEmailOrWebWidget,"is-twilio-sms-inbox":u.value.isTwilioSMS,"is-twilio-whats-app-inbox":u.value.isTwilioWhatsapp,"message-templates":d.value,"channel-type":h.value,"is-loading":r.value,"disable-send-button":r.value,"has-selected-inbox":!!e.targetInbox,"inbox-id":(q=e.targetInbox)==null?void 0:q.id,"has-no-inbox":T.value,"is-dropdown-active":_.value,"message-signature":e.messageSignature,onInsertEmoji:F,onAddSignature:k,onRemoveSignature:B,onAttachFile:V,onDiscard:H[6]||(H[6]=J=>z.$emit("discard")),onSendMessage:K,onSendWhatsappMessage:se,onSendTwilioMessage:ee},null,8,["attached-files","is-whatsapp-inbox","is-email-or-web-widget-inbox","is-twilio-sms-inbox","is-twilio-whats-app-inbox","message-templates","channel-type","is-loading","disable-send-button","has-selected-inbox","inbox-id","has-no-inbox","is-dropdown-active","message-signature"])])}}},Jp={__name:"ComposeConversation",props:{alignPosition:{type:String,default:"left"},contactId:{type:String,default:null},isModal:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,a=rt(),{t:o}=be(),{width:i}=Di(),{fetchSignatureFlagFromUISettings:l}=tn(),r=y(()=>i.value<yt.SMALL_SCREEN_BREAKPOINT),c=y(()=>n.isModal||r.value),u=j([]),d=j(null),h=j(null),g=j(!1),f=j(!1),b=j(!1),A=j(!1),v=_e("contacts/getContactById"),T=_e("contacts/getUIFlags"),_=_e("getCurrentUser"),N=_e("globalConfig/get"),R=_e("contactConversations/getUIFlags"),O=_e("getMessageSignature"),x=_e("inboxes/getInboxes"),w=y(()=>{var H;return l((H=h.value)==null?void 0:H.channelType)}),D=y(()=>N.value.directUploadsEnabled),M=y(()=>v.value(n.contactId)),P=y(()=>c.value?"":n.alignPosition==="right"?"absolute ltr:left-0 ltr:right-[unset] rtl:right-0 rtl:left-[unset]":"absolute rtl:left-0 rtl:right-[unset] ltr:right-0 ltr:left-[unset]"),U=Ua(async H=>{b.value=!0,u.value=[];try{u.value=await fPe(H),b.value=!1}catch{ne(o("COMPOSE_NEW_CONVERSATION.CONTACT_SEARCH.ERROR_MESSAGE"))}finally{b.value=!1}},300,!1),F=()=>{u.value=[]},k=async({value:H,action:q,...J})=>{let de;if(q==="create"){g.value=!0;try{de=await gPe(H),g.value=!1}catch{g.value=!1;return}}else de=J;if(d.value=de,de!=null&&de.id){f.value=!0;try{const Te=await _Pe(de.id);d.value.contactInboxes=HT(Te,x.value),f.value=!1}catch{f.value=!1}}},B=H=>{h.value=H,F()},V=()=>{d.value=null,h.value=null},G=()=>{A.value=!1,n.contactId||(d.value=null),h.value=null,F(),s("close")},K=async({payload:H,isFromWhatsApp:q})=>{try{const J=await a.dispatch("contactConversations/create",{params:H,isFromWhatsApp:q}),de={type:"link",to:`/app/accounts/${J.account_id}/conversations/${J.id}`,message:o("COMPOSE_NEW_CONVERSATION.FORM.GO_TO_CONVERSATION")};return G(),ne(o("COMPOSE_NEW_CONVERSATION.FORM.SUCCESS_MESSAGE"),de),!0}catch(J){return ne(J instanceof eu?J.data:o("COMPOSE_NEW_CONVERSATION.FORM.ERROR_MESSAGE")),!1}},se=()=>{A.value=!A.value};it(M,(H,q)=>{if(H&&n.contactId){(H==null?void 0:H.id)!==(q==null?void 0:q.id)&&V();const J=RC(H.contactInboxes||[]);d.value={...H,contactInboxes:HT(J,x.value)}}},{immediate:!0,deep:!0});const ee=()=>{A.value&&(A.value=!1,s("close"))},X=()=>{c.value&&ee()};return lt(()=>F()),Os({Escape:{action:()=>{A.value&&(A.value=!1)}}}),(H,q)=>re((p(),E("div",{class:ae(["relative",{"z-50":A.value&&!c.value}])},[We(H.$slots,"trigger",{isOpen:A.value,toggle:se}),A.value?(p(),E("div",{key:0,class:ae({"fixed z-50 bg-n-alpha-black1 backdrop-blur-[4px] flex items-start pt-[clamp(3rem,15vh,12rem)] justify-center inset-0":c.value}),onClick:Ve(X,["self"])},[S(zke,{class:ae([{"mt-2":!c.value},P.value]),contacts:u.value,"contact-id":e.contactId,"is-loading":b.value,"current-user":C(_),"selected-contact":d.value,"target-inbox":h.value,"is-creating-contact":g.value,"is-fetching-inboxes":f.value,"is-direct-uploads-enabled":D.value,"contact-conversations-ui-flags":C(R),"contacts-ui-flags":C(T),"message-signature":C(O),"send-with-signature":w.value,onSearchContacts:C(U),onResetContactSearch:F,onUpdateSelectedContact:k,onUpdateTargetInbox:B,onClearSelectedContact:V,onCreateConversation:K,onDiscard:G},null,8,["class","contacts","contact-id","is-loading","current-user","selected-contact","target-inbox","is-creating-contact","is-fetching-inboxes","is-direct-uploads-enabled","contact-conversations-ui-flags","contacts-ui-flags","message-signature","send-with-signature","onSearchContacts"])],2)):$("",!0)],2)),[[C(ms),[ee,{ignore:["div.ProseMirror-prompt"]}]]])}},Yke={class:"contents"},jke={class:"flex flex-col gap-2"},Kke=["onClick"],Xke={class:"flex items-center gap-2"},qke={class:"text-sm text-n-slate-12"},Zke={key:0,class:"text-xs text-n-slate-10"},wC=Object.assign({inheritAttrs:!1},{__name:"VoiceCallButton",props:{phone:{type:String,default:""},label:{type:String,default:""},icon:{type:[String,Object,Function],default:""},size:{type:String,default:"sm"},tooltipLabel:{type:String,default:""}},setup(e){const t=e,n=rg(),{t:s}=be(),a=_e("inboxes/getInboxes"),o=y(()=>(a.value||[]).filter(d=>d.channel_type===St.VOICE)),i=y(()=>o.value.length>0),l=y(()=>i.value&&!!t.phone),r=j(null),c=()=>{var d;if(o.value.length>1){(d=r.value)==null||d.open();return}ne(s("CONTACT_PANEL.CALL_UNDER_DEVELOPMENT"))},u=()=>{var d;ne(s("CONTACT_PANEL.CALL_UNDER_DEVELOPMENT")),(d=r.value)==null||d.close()};return(d,h)=>{const g=Qe("tooltip");return p(),E("span",Yke,[l.value?re((p(),L(te,Qn({key:0},C(n),{label:e.label,icon:e.icon,size:e.size,onClick:c}),null,16,["label","icon","size"])),[[g,e.tooltipLabel||null,void 0,{"top-end":!0}]]):$("",!0),l.value&&o.value.length>1?(p(),L($n,{key:1,ref_key:"dialogRef",ref:r,title:d.$t("CONTACT_PANEL.VOICE_INBOX_PICKER.TITLE"),"show-cancel-button":"","show-confirm-button":!1,width:"md"},{default:Y(()=>[m("div",jke,[(p(!0),E(ue,null,Ae(o.value,f=>(p(),E("button",{key:f.id,type:"button",class:"flex items-center justify-between w-full px-4 py-2 text-left rounded-lg hover:bg-n-alpha-2",onClick:b=>u(f)},[m("div",Xke,[h[0]||(h[0]=m("span",{class:"i-ri-phone-fill text-n-slate-10"},null,-1)),m("span",qke,I(f.name),1)]),f.phone_number?(p(),E("span",Zke,I(f.phone_number),1)):$("",!0)],8,Kke))),128))])]),_:1},8,["title"])):$("",!0)])}}}),Qke={components:{NextButton:te,ContactInfoRow:aDe,EditContact:$De,Avatar:kt,ComposeConversation:Jp,SocialIcons:cDe,ContactMergeModal:lPe,VoiceCallButton:wC},props:{contact:{type:Object,default:()=>({})},showAvatar:{type:Boolean,default:!0}},emits:["panelClose"],setup(){const{isAdmin:e}=za();return{isAdmin:e}},data(){return{showEditModal:!1,showMergeModal:!1,showDeleteModal:!1}},computed:{...mt({uiFlags:"contacts/getUIFlags"}),contactProfileLink(){return`/app/accounts/${this.$route.params.accountId}/contacts/${this.contact.id}`},additionalAttributes(){return this.contact.additional_attributes||{}},location(){const{country:e="",city:t="",country_code:n}=this.additionalAttributes,s=[t,e].filter(a=>!!a).join(", ");return s?this.findCountryFlag(n,s):""},socialProfiles(){const{social_profiles:e,screen_name:t,social_telegram_user_name:n}=this.additionalAttributes;return{twitter:t,telegram:n,...e||{}}},confirmDeleteMessage(){return` ${this.contact.name}?`}},watch:{"contact.id":{handler(e){this.$store.dispatch("contacts/fetchContactableInbox",e)},immediate:!0}},methods:{dynamicTime:us,toggleEditModal(){this.showEditModal=!this.showEditModal},openComposeConversationModal(e){e(),Dt.emit(un.NEW_CONVERSATION_MODAL,!0)},closeComposeConversationModal(){Dt.emit(un.NEW_CONVERSATION_MODAL,!1)},toggleDeleteModal(){this.showDeleteModal=!this.showDeleteModal},confirmDeletion(){this.deleteContact(this.contact),this.closeDelete()},closeDelete(){this.showDeleteModal=!1,this.showEditModal=!1},findCountryFlag(e,t){try{if(!e)return`${t} `;const n=e==null?void 0:e.toLowerCase();return`${t} <span class="fi fi-${n} size-3.5"></span>`}catch{return""}},async deleteContact({id:e}){try{await this.$store.dispatch("contacts/delete",e),this.$emit("panelClose"),ne(this.$t("DELETE_CONTACT.API.SUCCESS_MESSAGE")),Yg(this.$route.name)?this.$router.push({name:VP(this.$route.name)}):jg(this.$route.name)?this.$router.push({name:"inbox_view"}):this.$route.name!=="contacts_dashboard"&&this.$router.push({name:"contacts_dashboard"})}catch(t){ne(t.message?t.message:this.$t("DELETE_CONTACT.API.ERROR_MESSAGE"))}},closeMergeModal(){this.showMergeModal=!1},openMergeModal(){this.showMergeModal=!0}}},Jke={class:"relative items-center w-full p-4"},e8e={class:"flex flex-col w-full gap-2 text-left rtl:text-right"},t8e={class:"flex flex-row justify-between"},n8e={class:"flex flex-col items-start gap-1.5 min-w-0 w-full"},s8e={key:0,class:"flex items-center w-full min-w-0 gap-3"},a8e={class:"flex-shrink max-w-full min-w-0 my-0 text-base capitalize break-words text-n-slate-12"},o8e={class:"flex flex-row items-center gap-2"},i8e={key:0,class:"i-lucide-info text-sm text-n-slate-10"},l8e=["href"],r8e={key:1,class:"break-words mb-0.5"},c8e={class:"flex flex-col items-start w-full gap-2"},u8e={class:"flex items-center w-full mt-0.5 gap-2"};function d8e(e,t,n,s,a,o){const i=W("Avatar"),l=W("ContactInfoRow"),r=W("SocialIcons"),c=W("NextButton"),u=W("ComposeConversation"),d=W("VoiceCallButton"),h=W("EditContact"),g=W("ContactMergeModal"),f=W("woot-delete-modal"),b=Qe("tooltip");return p(),E("div",Jke,[m("div",e8e,[m("div",t8e,[n.showAvatar?(p(),L(i,{key:0,src:n.contact.thumbnail,name:n.contact.name,status:n.contact.availability_status,size:48,"hide-offline-status":"","rounded-full":""},null,8,["src","name","status"])):$("",!0)]),m("div",n8e,[n.showAvatar?(p(),E("div",s8e,[m("h3",a8e,I(n.contact.name),1),m("div",o8e,[n.contact.created_at?re((p(),E("span",i8e,null,512)),[[b,`${e.$t("CONTACT_PANEL.CREATED_AT_LABEL")} ${o.dynamicTime(n.contact.created_at)}`,void 0,{left:!0}]]):$("",!0),m("a",{href:o.contactProfileLink,target:"_blank",rel:"noopener nofollow noreferrer",class:"leading-3"},t[1]||(t[1]=[m("span",{class:"i-lucide-external-link text-sm text-n-slate-10"},null,-1)]),8,l8e)])])):$("",!0),o.additionalAttributes.description?(p(),E("p",r8e,I(o.additionalAttributes.description),1)):$("",!0),m("div",c8e,[S(l,{href:n.contact.email?`mailto:${n.contact.email}`:"",value:n.contact.email,icon:"mail",emoji:"",title:e.$t("CONTACT_PANEL.EMAIL_ADDRESS"),"show-copy":""},null,8,["href","value","title"]),S(l,{href:n.contact.phone_number?`tel:${n.contact.phone_number}`:"",value:n.contact.phone_number,icon:"call",emoji:"",title:e.$t("CONTACT_PANEL.PHONE_NUMBER"),"show-copy":""},null,8,["href","value","title"]),n.contact.identifier?(p(),L(l,{key:0,value:n.contact.identifier,icon:"contact-identify",emoji:"",title:e.$t("CONTACT_PANEL.IDENTIFIER")},null,8,["value","title"])):$("",!0),S(l,{value:o.additionalAttributes.company_name,icon:"building-bank",emoji:"",title:e.$t("CONTACT_PANEL.COMPANY")},null,8,["value","title"]),o.location||o.additionalAttributes.location?(p(),L(l,{key:1,value:o.location||o.additionalAttributes.location,icon:"map",emoji:"",title:e.$t("CONTACT_PANEL.LOCATION")},null,8,["value","title"])):$("",!0),S(r,{"social-profiles":o.socialProfiles},null,8,["social-profiles"])])]),m("div",u8e,[S(u,{"contact-id":String(n.contact.id),"is-modal":"",onClose:o.closeComposeConversationModal},{trigger:Y(({toggle:A})=>[re(S(c,{icon:"i-ph-chat-circle-dots",slate:"",faded:"",sm:"",onClick:v=>o.openComposeConversationModal(A)},null,8,["onClick"]),[[b,e.$t("CONTACT_PANEL.NEW_MESSAGE"),void 0,{"top-end":!0}]])]),_:1},8,["contact-id","onClose"]),S(d,{phone:n.contact.phone_number,icon:"i-ri-phone-fill",size:"sm","tooltip-label":e.$t("CONTACT_PANEL.CALL"),slate:"",faded:""},null,8,["phone","tooltip-label"]),re(S(c,{icon:"i-ph-pencil-simple",slate:"",faded:"",sm:"",onClick:o.toggleEditModal},null,8,["onClick"]),[[b,e.$t("EDIT_CONTACT.BUTTON_LABEL"),void 0,{"top-end":!0}]]),re(S(c,{icon:"i-ph-arrows-merge",slate:"",faded:"",sm:"",disabled:e.uiFlags.isMerging,onClick:o.openMergeModal},null,8,["disabled","onClick"]),[[b,e.$t("CONTACT_PANEL.MERGE_CONTACT"),void 0,{"top-end":!0}]]),s.isAdmin?re((p(),L(c,{key:0,icon:"i-ph-trash",slate:"",faded:"",sm:"",ruby:"",disabled:e.uiFlags.isDeleting,onClick:o.toggleDeleteModal},null,8,["disabled","onClick"])),[[b,e.$t("DELETE_CONTACT.BUTTON_LABEL"),void 0,{"top-end":!0}]]):$("",!0)]),a.showEditModal?(p(),L(h,{key:0,show:a.showEditModal,contact:n.contact,onCancel:o.toggleEditModal},null,8,["show","contact","onCancel"])):$("",!0),a.showMergeModal?(p(),L(g,{key:1,"primary-contact":n.contact,show:a.showMergeModal,onClose:o.closeMergeModal},null,8,["primary-contact","show","onClose"])):$("",!0)]),a.showDeleteModal?(p(),L(f,{key:0,show:a.showDeleteModal,"onUpdate:show":t[0]||(t[0]=A=>a.showDeleteModal=A),"on-close":o.closeDelete,"on-confirm":o.confirmDeletion,title:e.$t("DELETE_CONTACT.CONFIRM.TITLE"),message:e.$t("DELETE_CONTACT.CONFIRM.MESSAGE"),"message-value":o.confirmDeleteMessage,"confirm-text":e.$t("DELETE_CONTACT.CONFIRM.YES"),"reject-text":e.$t("DELETE_CONTACT.CONFIRM.NO")},null,8,["show","on-close","on-confirm","title","message","message-value","confirm-text","reject-text"])):$("",!0)])}const p8e=De(Qke,[["render",d8e]]),m8e={class:"flex flex-col gap-2 border-b border-n-strong group/note"},h8e={class:"flex items-center justify-between gap-2"},f8e={class:"flex items-center gap-1.5 min-w-0"},g8e={class:"min-w-0 truncate"},_8e={class:"inline-flex items-center gap-1 text-sm text-n-slate-11"},v8e={class:"font-medium text-n-slate-12"},E8e={class:"font-medium text-n-slate-12"},b8e={key:0},$C={__name:"ContactNoteItem",props:{note:{type:Object,required:!0},writtenBy:{type:String,required:!0},allowDelete:{type:Boolean,default:!1},collapsible:{type:Boolean,default:!1}},emits:["delete"],setup(e,{emit:t}){const n=e,s=t,a=Ss("noteContentRef"),o=j(!1),[i,l]=yn(),{t:r}=be(),{formatMessage:c}=sa(),u=()=>{s("delete",n.note.id)};return lt(()=>{var d;n.collapsible&&(o.value=((d=a.value)==null?void 0:d.clientHeight)>91)}),(d,h)=>{var f,b,A,v,T,_;const g=Qe("dompurify-html");return p(),E("div",m8e,[m("div",h8e,[m("div",f8e,[S(kt,{name:((b=(f=e.note)==null?void 0:f.user)==null?void 0:b.name)||"Bot",src:(v=(A=e.note)==null?void 0:A.user)!=null&&v.name?(_=(T=e.note)==null?void 0:T.user)==null?void 0:_.thumbnail:"/assets/images/chatwoot_bot.png",size:16,"rounded-full":""},null,8,["name","src"]),m("div",g8e,[m("span",_8e,[m("span",v8e,I(e.writtenBy),1),xe(" "+I(C(r)("CONTACTS_LAYOUT.SIDEBAR.NOTES.WROTE"))+" ",1),m("span",E8e,I(C(us)(e.note.createdAt)),1)])])]),e.allowDelete?(p(),L(te,{key:0,variant:"faded",color:"ruby",size:"xs",icon:"i-lucide-trash",class:"opacity-0 group-hover/note:opacity-100",onClick:u})):$("",!0)]),re(m("p",{ref_key:"noteContentRef",ref:a,class:ae(["mb-0 prose-sm prose-p:text-sm prose-p:leading-relaxed prose-p:mb-1 prose-p:mt-0 prose-ul:mb-1 prose-ul:mt-0 text-n-slate-12",{"line-clamp-4":e.collapsible&&!C(i)&&o.value}])},null,2),[[g,C(c)(e.note.content||"")]]),e.collapsible&&o.value?(p(),E("p",b8e,[S(te,{variant:"faded",color:"blue",size:"xs",icon:C(i)?"i-lucide-chevron-up":"i-lucide-chevron-down",onClick:h[0]||(h[0]=()=>C(l)())},{default:Y(()=>[C(i)?(p(),E(ue,{key:0},[xe(I(C(r)("CONTACTS_LAYOUT.SIDEBAR.NOTES.COLLAPSE")),1)],64)):(p(),E(ue,{key:1},[xe(I(C(r)("CONTACTS_LAYOUT.SIDEBAR.NOTES.EXPAND")),1)],64))]),_:1},8,["icon"])])):$("",!0)])}}},T8e={class:"px-4 pt-3 pb-2"},S8e={key:0,class:"flex items-center justify-center py-8 text-n-slate-11"},A8e={key:1,class:"flex flex-col max-h-[300px] overflow-y-auto"},y8e={key:2,class:"px-6 py-6 text-sm leading-6 text-center text-n-slate-11"},I8e={class:"flex w-full flex-col gap-6 px-6 py-6"},C8e={class:"text-lg font-semibold text-n-slate-12"},N8e={class:"flex items-center justify-end gap-3"},O8e={__name:"ContactNotes",props:{contactId:{type:[String,Number],required:!0}},setup(e){const t=e,{t:n}=be(),s=rt(),a=_e("getCurrentUser"),o=_e("contactNotes/getUIFlags"),i=_e("contactNotes/getAllNotesByContactId"),l=y(()=>o.value.isFetching),r=y(()=>o.value.isCreating),c=y(()=>t.contactId),u=j(""),d=j(!1),h=y(()=>c.value?i.value(c.value)||[]:[]),g=({user:_}={})=>{var R;const N=(R=a.value)==null?void 0:R.id;return(_==null?void 0:_.id)===N?n("CONTACTS_LAYOUT.SIDEBAR.NOTES.YOU"):(_==null?void 0:_.name)||n("CONVERSATION.BOT")},f=()=>{c.value&&(u.value="",d.value=!0)},b=()=>{d.value=!1,u.value=""},A=async()=>{!c.value||!u.value||r.value||(await s.dispatch("contactNotes/create",{content:u.value,contactId:c.value}),u.value="",b())},v=_=>{!c.value||!_||s.dispatch("contactNotes/delete",{noteId:_,contactId:c.value})};return Os({"$mod+Enter":{action:A,allowOnFocusedInput:!0}}),it(c,_=>{b(),_&&s.dispatch("contactNotes/get",{contactId:_})},{immediate:!0}),(_,N)=>{const R=W("woot-modal");return p(),E("div",null,[m("div",T8e,[S(te,{ghost:"",xs:"",icon:"i-lucide-plus",label:_.$t("CONTACTS_LAYOUT.SIDEBAR.NOTES.ADD_NOTE"),disabled:!c.value||l.value,onClick:f},null,8,["label","disabled"])]),l.value?(p(),E("div",S8e,[S(An)])):h.value.length?(p(),E("div",A8e,[(p(!0),E(ue,null,Ae(h.value,O=>(p(),L($C,{key:O.id,class:"py-4 last-of-type:border-b-0 px-4",note:O,"written-by":g(O),"allow-delete":"",collapsible:"",onDelete:v},null,8,["note","written-by"]))),128))])):(p(),E("p",y8e,I(C(n)("CONTACTS_LAYOUT.SIDEBAR.NOTES.CONVERSATION_EMPTY_STATE")),1)),S(R,{show:d.value,"onUpdate:show":N[1]||(N[1]=O=>d.value=O),"on-close":b,"close-on-backdrop-click":!1,class:"!items-start [&>div]:!top-12 [&>div]:sticky"},{default:Y(()=>[m("div",I8e,[m("h3",C8e,I(C(n)("CONTACTS_LAYOUT.SIDEBAR.NOTES.ADD_NOTE")),1),S(Ks,{modelValue:u.value,"onUpdate:modelValue":N[0]||(N[0]=O=>u.value=O),"focus-on-mount":"",placeholder:C(n)("CONTACTS_LAYOUT.SIDEBAR.NOTES.PLACEHOLDER"),class:"[&>div]:!border-transparent [&>div]:px-4 [&>div]:py-4"},null,8,["modelValue","placeholder"]),m("div",N8e,[S(te,{solid:"",blue:"",label:C(n)("CONTACTS_LAYOUT.SIDEBAR.NOTES.SAVE"),"is-loading":r.value,disabled:!u.value||r.value,onClick:A},null,8,["label","is-loading","disabled"])])])]),_:1},8,["show"])])}}},R8e={class:"relative group w-[inherit] whitespace-normal z-20"},x8e={class:"bg-n-background w-fit ltr:left-4 rtl:right-4 top-0 border p-2.5 group-hover:flex items-center hidden absolute border-n-weak rounded-lg shadow-md"},w8e={class:"text-n-slate-12 mb-0 text-xs"},$8e={__name:"HelperTextPopup",props:{message:{type:String,default:""}},setup(e){return(t,n)=>{const s=W("fluent-icon");return p(),E("div",R8e,[S(s,{icon:"info",size:"14",class:"mt-0.5 text-n-slate-11 absolute"}),m("div",x8e,[m("p",w8e,I(e.message),1)])])}}},M8e="yyyy-MM-dd",L8e={components:{MultiselectDropdown:NC,HelperTextPopup:$8e,NextButton:te},props:{label:{type:String,required:!0},description:{type:String,default:""},values:{type:Array,default:()=>[]},value:{type:[String,Number,Boolean],default:""},showActions:{type:Boolean,default:!1},attributeType:{type:String,default:"text"},attributeRegex:{type:String,default:null},regexCue:{type:String,default:null},attributeKey:{type:String,required:!0},contactId:{type:Number,default:null}},emits:["update","delete","copy"],setup(){return{v$:bt()}},data(){return{isEditing:!1,editedValue:null}},computed:{displayValue(){return this.isAttributeTypeDate?this.value?new Date(this.value||new Date).toLocaleDateString():"---":this.isAttributeTypeCheckbox?this.value==="false"?!1:this.value:this.hasValue?this.value:"---"},formattedValue(){return this.isAttributeTypeDate?Yn(this.value?new Date(this.value):new Date,M8e):this.value},listOptions(){return this.values.map((e,t)=>({id:t+1,name:e}))},selectedItem(){return{id:this.values.indexOf(this.editedValue)+1,name:this.editedValue}},isAttributeTypeCheckbox(){return this.attributeType==="checkbox"},isAttributeTypeList(){return this.attributeType==="list"},isAttributeTypeLink(){return this.attributeType==="link"},isAttributeTypeDate(){return this.attributeType==="date"},hasValue(){return this.value!==null&&this.value!==""},urlValue(){return hf(this.value)?this.value:"---"},hrefURL(){return hf(this.value)?this.value:""},notAttributeTypeCheckboxAndList(){return!this.isAttributeTypeCheckbox&&!this.isAttributeTypeList},inputType(){return this.isAttributeTypeLink?"url":this.attributeType},shouldShowErrorMessage(){return this.v$.editedValue.$error},errorMessage(){return this.v$.editedValue.url?this.$t("CUSTOM_ATTRIBUTES.VALIDATIONS.INVALID_URL"):this.v$.editedValue.regexValidation?this.$t("CUSTOM_ATTRIBUTES.VALIDATIONS.REQUIRED"):this.regexCue?this.regexCue:this.$t("CUSTOM_ATTRIBUTES.VALIDATIONS.INVALID_INPUT")}},watch:{value(){this.isEditing=!1,this.editedValue=this.formattedValue},contactId(){this.v$.$reset()}},validations(){return this.isAttributeTypeLink?{editedValue:{required:Ye,url:Qc}}:{editedValue:{required:Ye,regexValidation:e=>!(this.attributeRegex&&!fg(this.attributeRegex).test(e))}}},mounted(){this.editedValue=this.formattedValue,Dt.on(un.FOCUS_CUSTOM_ATTRIBUTE,this.onFocusAttribute)},unmounted(){Dt.off(un.FOCUS_CUSTOM_ATTRIBUTE,this.onFocusAttribute)},methods:{onFocusAttribute(e){this.attributeKey===e&&this.onEdit()},focusInput(){this.$refs.inputfield&&this.$refs.inputfield.focus()},onClickAway(){this.v$.$reset(),this.isEditing=!1},onEdit(){this.isEditing=!0,this.$nextTick(()=>{this.focusInput()})},onUpdateListValue(e){e&&(this.editedValue=e.name,this.onUpdate())},onUpdate(){const e=this.attributeType==="date"?Wg(this.editedValue):this.editedValue;this.v$.$touch(),!this.v$.$invalid&&(this.isEditing=!1,this.$emit("update",this.attributeKey,e))},onDelete(){this.isEditing=!1,this.v$.$reset(),this.$emit("delete",this.attributeKey)},onCopy(){this.$emit("copy",this.value)}}},D8e={class:"px-4 py-3"},P8e={class:"flex items-center mb-1"},k8e={class:"flex items-center w-full m-0 text-sm error"},B8e={key:0,class:"flex items-center"},U8e={class:"flex items-center justify-between w-full"},F8e={key:0},G8e={key:0},V8e={class:"flex items-center w-full mb-2"},H8e=["type"],W8e={key:0,class:"block w-full -mt-px text-sm font-normal text-n-ruby-11"},z8e=["href"],Y8e={key:1,class:"group-hover:bg-n-slate-3 group-hover:dark:bg-n-solid-3 inline-block rounded-sm mb-0 break-all py-0.5 px-1"},j8e={class:"flex items-center max-w-[2rem] gap-1 ml-1 rtl:mr-1 rtl:ml-0"},K8e={key:1};function X8e(e,t,n,s,a,o){const i=W("HelperTextPopup"),l=W("NextButton"),r=W("MultiselectDropdown"),c=Qe("tooltip"),u=Qe("on-clickaway");return p(),E("div",D8e,[m("div",P8e,[m("h4",k8e,[o.isAttributeTypeCheckbox?(p(),E("div",B8e,[re(m("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>a.editedValue=d),class:"!my-0 ltr:mr-2 ltr:ml-0 rtl:mr-0 rtl:ml-2",type:"checkbox",onChange:t[1]||(t[1]=(...d)=>o.onUpdate&&o.onUpdate(...d))},null,544),[[dn,a.editedValue]])])):$("",!0),m("div",U8e,[m("span",{class:ae(["w-full inline-flex gap-1.5 items-start font-medium whitespace-nowrap text-sm mb-0",s.v$.editedValue.$error?"text-n-ruby-11":"text-n-slate-12"])},[xe(I(n.label)+" ",1),n.description?(p(),L(i,{key:0,message:n.description,class:"mt-0.5"},null,8,["message"])):$("",!0)],2),n.showActions&&o.hasValue?re((p(),L(l,{key:0,slate:"",sm:"",link:"",icon:"i-lucide-trash-2",onClick:o.onDelete},null,8,["onClick"])),[[c,e.$t("CUSTOM_ATTRIBUTES.ACTIONS.DELETE"),void 0,{left:!0}]]):$("",!0)])])]),o.notAttributeTypeCheckboxAndList?(p(),E("div",F8e,[a.isEditing?re((p(),E("div",G8e,[m("div",V8e,[re(m("input",{ref:"inputfield","onUpdate:modelValue":t[2]||(t[2]=d=>a.editedValue=d),type:o.inputType,class:ae(["!h-8 ltr:!rounded-r-none rtl:!rounded-l-none !mb-0 !text-sm",{error:s.v$.editedValue.$error}]),autofocus:"true",onBlur:t[3]||(t[3]=(...d)=>s.v$.editedValue.$touch&&s.v$.editedValue.$touch(...d)),onKeyup:t[4]||(t[4]=wn((...d)=>o.onUpdate&&o.onUpdate(...d),["enter"]))},null,42,H8e),[[pS,a.editedValue]]),m("div",null,[S(l,{sm:"",icon:"i-lucide-check",class:"ltr:rounded-l-none rtl:rounded-r-none h-[34px]",onClick:o.onUpdate},null,8,["onClick"])])]),o.shouldShowErrorMessage?(p(),E("span",W8e,I(o.errorMessage),1)):$("",!0)])),[[u,o.onClickAway]]):$("",!0),re(m("div",{class:ae(["flex group",{"is-editable":n.showActions}])},[o.isAttributeTypeLink?(p(),E("a",{key:0,href:o.hrefURL,target:"_blank",rel:"noopener noreferrer",class:"group-hover:bg-n-slate-3 group-hover:dark:bg-n-solid-3 inline-block rounded-sm mb-0 break-all py-0.5 px-1"},I(o.urlValue),9,z8e)):(p(),E("p",Y8e,I(o.displayValue),1)),m("div",j8e,[n.showActions&&o.hasValue?re((p(),L(l,{key:0,xs:"",slate:"",ghost:"",icon:"i-lucide-clipboard",class:"hidden group-hover:flex flex-shrink-0",onClick:o.onCopy},null,8,["onClick"])),[[c,e.$t("CUSTOM_ATTRIBUTES.ACTIONS.COPY")]]):$("",!0),n.showActions?re((p(),L(l,{key:1,xs:"",slate:"",ghost:"",icon:"i-lucide-pen",class:"hidden group-hover:flex flex-shrink-0",onClick:o.onEdit},null,8,["onClick"])),[[c,e.$t("CUSTOM_ATTRIBUTES.ACTIONS.EDIT"),void 0,{right:!0}]]):$("",!0)])],2),[[rn,!a.isEditing]])])):$("",!0),o.isAttributeTypeList?(p(),E("div",K8e,[S(r,{options:o.listOptions,"selected-item":o.selectedItem,"has-thumbnail":!1,"multiselector-placeholder":e.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_TYPE.LIST.PLACEHOLDER"),"no-search-result":e.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_TYPE.LIST.NO_RESULT"),"input-placeholder":e.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_TYPE.LIST.SEARCH_INPUT_PLACEHOLDER"),onSelect:o.onUpdateListValue},null,8,["options","selected-item","multiselector-placeholder","no-search-result","input-placeholder","onSelect"])])):$("",!0)])}const q8e=De(L8e,[["render",X8e],["__scopeId","data-v-c2c5de8e"]]),Z8e={class:"conversation--details"},Q8e={key:0,class:"p-3 text-center"},J8e={key:1,class:"flex items-center px-2 py-2"},e4e={__name:"CustomAttributes",props:{attributeType:{type:String,default:"conversation_attribute"},contactId:{type:Number,default:null},attributeFrom:{type:String,required:!0},emptyStateMessage:{type:String,default:""},staticElements:{type:Array,default:()=>[]}},setup(e){const t=e,n=rt(),s=pn(),a=wt(),{t:o}=be(),{uiSettings:i,updateUISettings:l}=tn(),r=j(!1),[c,u]=yn(!1),d=y(()=>s.getSelectedChat.value),h=y(()=>s["attributes/getAttributesByModel"].value(t.attributeType)),g=y(()=>{var k,B;return((B=(k=d.value.meta)==null?void 0:k.sender)==null?void 0:B.id)||a.params.contactId||t.contactId}),f=y(()=>s["contacts/getContact"].value(g.value)),b=y(()=>t.attributeType==="conversation_attribute"?d.value.custom_attributes||{}:f.value.custom_attributes||{}),A=y(()=>d.value.id),v=y(()=>c.value?o("CUSTOM_ATTRIBUTES.SHOW_LESS"):o("CUSTOM_ATTRIBUTES.SHOW_MORE")),T=y(()=>h.value.map(k=>{const B=Object.hasOwnProperty.call(b.value,k.attribute_key);return{...k,type:"custom_attribute",key:k.attribute_key,value:B?b.value[k.attribute_key]:""}})),_=y(()=>`conversation_elements_order_${t.attributeFrom}`),N=y(()=>{const k=i.value[_.value]??[],B=[...t.staticElements,...T.value];return k.length?B.sort((V,G)=>{const K=k.indexOf(V.key),se=k.indexOf(G.key);return K===-1&&se===-1?0:K===-1?1:se===-1?-1:K-se}):B}),R=y(()=>c.value||N.value.length<=5?N.value:N.value.slice(0,5)),O=(k=[],B=[])=>{const V=[...B],G=new Set(B);return k.filter(K=>K.startsWith("static-")&&!G.has(K)).forEach(K=>{const se=k.slice(k.indexOf(K)).find(ee=>G.has(ee));se?V.splice(V.indexOf(se),0,K):V.push(K)}),V},x=()=>{r.value=!1;const k=i.value[_.value]??[],B=N.value.map(({key:G})=>G),V=O(k,B);l({[_.value]:V})},w=()=>{if(!i.value[_.value]){const B=N.value.map(V=>V.key);l({[_.value]:B})}c.value=i.value[`show_all_attributes_${t.attributeFrom}`]||!1},D=()=>{u(),l({[`show_all_attributes_${t.attributeFrom}`]:c.value})},M=async(k,B)=>{var G;const V={...b.value,[k]:B};try{t.attributeType==="conversation_attribute"?await n.dispatch("updateCustomAttributes",{conversationId:A.value,customAttributes:V}):n.dispatch("contacts/update",{id:t.contactId,customAttributes:V}),ne(o("CUSTOM_ATTRIBUTES.FORM.UPDATE.SUCCESS"))}catch(K){const se=((G=K==null?void 0:K.response)==null?void 0:G.message)||o("CUSTOM_ATTRIBUTES.FORM.UPDATE.ERROR");ne(se)}},P=async k=>{var B;try{const{[k]:V,...G}=b.value;t.attributeType==="conversation_attribute"?await n.dispatch("updateCustomAttributes",{conversationId:A.value,customAttributes:G}):n.dispatch("contacts/deleteCustomAttributes",{id:t.contactId,customAttributes:[k]}),ne(o("CUSTOM_ATTRIBUTES.FORM.DELETE.SUCCESS"))}catch(V){const G=((B=V==null?void 0:V.response)==null?void 0:B.message)||o("CUSTOM_ATTRIBUTES.FORM.DELETE.ERROR");ne(G)}},U=async k=>{await _a(k),ne(o("CUSTOM_ATTRIBUTES.COPY_SUCCESSFUL"))};lt(()=>{w()});const F=["[&>*:nth-child(odd)]:!bg-n-background [&>*:nth-child(even)]:!bg-n-slate-2","dark:[&>*:nth-child(odd)]:!bg-n-background dark:[&>*:nth-child(even)]:!bg-n-solid-1"];return(k,B)=>(p(),E("div",Z8e,[S(C(cu),{list:R.value,disabled:!C(c),animation:"200","ghost-class":"ghost",handle:".drag-handle","item-key":"key",class:ae(["last:rounded-b-lg",F]),onStart:B[0]||(B[0]=V=>r.value=!0),onEnd:x},{item:Y(({element:V})=>[m("div",{class:ae(["drag-handle relative border-b border-n-weak/50 dark:border-n-weak/90",{"cursor-grab":C(c),"last:border-transparent dark:last:border-transparent":N.value.length<=5}])},[V.type==="static_attribute"?We(k.$slots,"staticItem",{key:0,element:V},void 0,!0):(p(),L(q8e,{key:V.id,"attribute-key":V.attribute_key,"attribute-type":V.attribute_display_type,values:V.attribute_values,label:V.attribute_display_name,description:V.attribute_description,value:V.value,"show-actions":"","attribute-regex":V.regex_pattern,"regex-cue":V.regex_cue,"contact-id":e.contactId,onUpdate:M,onDelete:P,onCopy:U},null,8,["attribute-key","attribute-type","values","label","description","value","attribute-regex","regex-cue","contact-id"]))],2)]),_:3},8,["list","disabled"]),!R.value.length&&e.emptyStateMessage?(p(),E("p",Q8e,I(e.emptyStateMessage),1)):$("",!0),N.value.length>5?(p(),E("div",J8e,[S(te,{ghost:"",xs:"",icon:C(c)?"i-lucide-chevron-up":"i-lucide-chevron-down",label:v.value,onClick:D},null,8,["icon","label"])])):$("",!0)]))}},MC=De(e4e,[["__scopeId","data-v-d46305f9"]]),t4e={class:"conversation--details"},n4e=["href"],s4e={__name:"ConversationInfo",props:{conversationAttributes:{type:Object,default:()=>({})},contactAttributes:{type:Object,default:()=>({})}},setup(e){const t=e,n=y(()=>t.conversationAttributes.referer),s=y(()=>{var u;return(u=t.conversationAttributes.initiated_at)==null?void 0:u.timestamp}),a=y(()=>t.conversationAttributes.browser),o=y(()=>{if(!a.value)return"";const{browser_name:u="",browser_version:d=""}=a.value;return`${u} ${d}`}),i=y(()=>WR(t.conversationAttributes.browser_language)),l=y(()=>{if(!a.value)return"";const{platform_name:u="",platform_version:d=""}=a.value;return`${u} ${d}`}),r=y(()=>t.contactAttributes.created_at_ip),c=y(()=>[{content:s,title:"CONTACT_PANEL.INITIATED_AT",key:"static-initiated-at",type:"static_attribute"},{content:i,title:"CONTACT_PANEL.BROWSER_LANGUAGE",key:"static-browser-language",type:"static_attribute"},{content:n,title:"CONTACT_PANEL.INITIATED_FROM",key:"static-referer",type:"static_attribute"},{content:o,title:"CONTACT_PANEL.BROWSER",key:"static-browser",type:"static_attribute"},{content:l,title:"CONTACT_PANEL.OS",key:"static-platform",type:"static_attribute"},{content:r,title:"CONTACT_PANEL.IP_ADDRESS",key:"static-ip-address",type:"static_attribute"}].filter(u=>!!u.content.value));return(u,d)=>(p(),E("div",t4e,[S(MC,{"static-elements":c.value,"attribute-class":"conversation--attribute","attribute-from":"conversation_panel","attribute-type":"conversation_attribute"},{staticItem:Y(({element:h})=>[(p(),L(IC,{key:h.title,title:u.$t(h.title),value:h.content.value},{default:Y(()=>[h.key==="static-referer"?(p(),E("a",{key:0,href:h.content.value,rel:"noopener noreferrer nofollow",target:"_blank",class:"text-n-brand"},I(h.content.value),9,n4e)):$("",!0)]),_:2},1032,["title","value"]))]),_:1},8,["static-elements"])]))}},a4e={class:"macro-preview absolute border border-n-weak max-h-[22.5rem] z-50 w-64 rounded-md bg-n-alpha-3 backdrop-blur-[100px] shadow-lg bottom-8 right-8 overflow-y-auto p-4 text-left rtl:text-right"},o4e={class:"mb-4 text-sm text-n-slate-12"},i4e={key:0,class:"top-[0.390625rem] absolute -bottom-1 left-0 w-px bg-n-slate-6"},l4e={class:"mb-1 text-xs text-n-slate-11"},r4e={class:"text-n-slate-12 text-sm"},c4e={__name:"MacroPreview",props:{macro:{type:Object,required:!0}},setup(e){const t=e,n=_e("labels/getLabels"),s=_e("teams/getTeams"),a=_e("agents/getAgents"),o=(l,r)=>({assign_team:Fle(s.value,r),add_label:vb(n.value,r),remove_label:vb(n.value,r),assign_agent:Gle(a.value,r),mute_conversation:null,snooze_conversation:null,resolve_conversation:null,remove_assigned_team:null,send_webhook_event:r[0],send_message:r[0],send_email_transcript:r[0],add_private_note:r[0]})[l]||"",i=y(()=>t.macro.actions.map(l=>({actionName:Ule(l.action_name),actionValue:o(l.action_name,l.action_params)})));return(l,r)=>(p(),E("div",a4e,[m("h6",o4e,I(e.macro.name),1),(p(!0),E(ue,null,Ae(i.value,(c,u)=>(p(),E("div",{key:u,class:"relative pl-4 macro-block"},[u!==e.macro.actions.length-1?(p(),E("div",i4e)):$("",!0),r[0]||(r[0]=m("div",{class:"absolute -left-[0.21875rem] top-[0.2734375rem] w-2 h-2 rounded-full bg-n-solid-1 border-2 border-solid border-n-weak dark:border-n-slate-6"},null,-1)),m("p",l4e,I(l.$t(`MACROS.ACTIONS.${c.actionName}`)),1),m("p",r4e,I(c.actionValue),1)]))),128))]))}},u4e=De(c4e,[["__scopeId","data-v-de8da4be"]]),d4e={class:"overflow-hidden whitespace-nowrap text-ellipsis font-medium text-n-slate-12"},p4e={class:"flex items-center gap-1 justify-end"},m4e={__name:"MacroItem",props:{macro:{type:Object,required:!0},conversationId:{type:[Number,String],required:!0}},setup(e){const t=e,n=rt(),{t:s}=be(),a=j(!1),o=j(!1),i=async c=>{try{a.value=!0,await n.dispatch("macros/execute",{macroId:c.id,conversationIds:[t.conversationId]}),zt(ea.EXECUTED_A_MACRO),ne(s("MACROS.EXECUTE.EXECUTED_SUCCESSFULLY"))}catch{ne(s("MACROS.ERROR"))}finally{a.value=!1}},l=()=>{o.value=!o.value},r=()=>{o.value=!1};return(c,u)=>{const d=Qe("tooltip"),h=Qe("on-clickaway");return p(),E("div",{class:ae(["relative flex items-center justify-between leading-4 rounded-md h-10 pl-3 pr-2",o.value?"cursor-default":"drag-handle cursor-grab"])},[m("span",d4e,I(e.macro.name),1),m("div",p4e,[re(S(te,{icon:"i-lucide-info",slate:"",faded:"",xs:"",onClick:l},null,512),[[d,c.$t("MACROS.EXECUTE.PREVIEW"),void 0,{"left-start":!0}]]),re(S(te,{icon:"i-lucide-play",slate:"",faded:"",xs:"","is-loading":a.value,onClick:u[0]||(u[0]=g=>i(e.macro))},null,8,["is-loading"]),[[d,c.$t("MACROS.EXECUTE.BUTTON_TOOLTIP"),void 0,{"left-start":!0}]])]),S(Ys,{name:"menu-slide"},{default:Y(()=>[o.value?re((p(),L(u4e,{key:0,macro:e.macro},null,8,["macro"])),[[h,r]]):$("",!0)]),_:1})],2)}}},h4e={key:0,class:"p-3"},f4e={class:"flex flex-col items-center justify-center h-full"},g4e={key:1,class:"flex items-center gap-2 justify-center p-6 text-n-slate-12"},_4e={class:"text-sm"},zT="macros_display_order",v4e={__name:"List",props:{conversationId:{type:[Number,String],required:!0}},setup(e){const t=rt(),{accountScopedUrl:n}=ln(),{uiSettings:s,updateUISettings:a}=tn(),o=j(!1),i=_e("macros/getMacros"),l=_e("macros/getUIFlags"),r=y({get:()=>{var g;const u=((g=s.value)==null?void 0:g[zT])??[],d=i.value??[];if(!u.length||!d.length)return d;const h=new Map(u.map((f,b)=>[f,b]));return[...d].sort((f,b)=>{const A=h.get(f.id)??1/0,v=h.get(b.id)??1/0;return A-v})},set:u=>{a({[zT]:u.map(({id:d})=>d)})}}),c=()=>{o.value=!1};return lt(()=>{t.dispatch("macros/get")}),(u,d)=>{const h=W("router-link");return p(),E("div",null,[!C(l).isFetching&&!C(i).length?(p(),E("div",h4e,[m("p",f4e,I(u.$t("MACROS.LIST.404")),1),S(h,{to:C(n)("settings/macros")},{default:Y(()=>[S(te,{faded:"",xs:"",icon:"i-lucide-plus",class:"mt-1",label:u.$t("MACROS.HEADER_BTN_TXT")},null,8,["label"])]),_:1},8,["to"])])):$("",!0),C(l).isFetching?(p(),E("div",g4e,[m("span",_4e,I(u.$t("MACROS.LOADING")),1),S(An,{class:"size-5"})])):$("",!0),!C(l).isFetching&&C(i).length?(p(),L(C(cu),{key:2,modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=g=>r.value=g),class:"p-1",animation:"200","ghost-class":"ghost",handle:".drag-handle","item-key":"id",onStart:d[1]||(d[1]=g=>o.value=!0),onEnd:c},{item:Y(({element:g})=>[(p(),L(m4e,{key:g.id,macro:g,"conversation-id":e.conversationId},null,8,["macro","conversation-id"]))]),_:1},8,["modelValue"])):$("",!0)])}}},E4e=De(v4e,[["__scopeId","data-v-306724a7"]]);class b4e extends Ea{constructor(){super("integrations/shopify",{accountScoped:!0})}getOrders(t){return axios.get(`${this.url}/orders`,{params:{contact_id:t}})}}const T4e=new b4e,S4e={class:"py-3 border-b border-n-weak last:border-b-0 flex flex-col gap-1.5"},A4e={class:"flex justify-between items-center"},y4e={class:"font-medium flex"},I4e=["href"],C4e=["title"],N4e={class:"text-sm text-n-slate-12"},O4e={class:"text-n-slate-11 border-r border-n-weak pr-2"},R4e={class:"text-n-slate-11 pl-2"},x4e={key:0},w4e=["title"],$4e={__name:"ShopifyOrderItem",props:{order:{type:Object,required:!0}},setup(e){const t=e,{t:n}=be(),s=u=>Yn(new Date(u),"MMM d, yyyy"),a=(u,d)=>new Intl.NumberFormat("en",{style:"currency",currency:d||"USD"}).format(u),o=u=>({paid:"bg-n-teal-5 text-n-teal-12"})[u]||"bg-n-solid-3 text-n-slate-12",i=(u,d="")=>`CONVERSATION_SIDEBAR.SHOPIFY.${u.toUpperCase()}_STATUS.${d.toUpperCase()}`,l=y(()=>{const{fulfillment_status:u}=t.order;return u?n(i("FULFILLMENT",u)):""}),r=y(()=>{const{financial_status:u}=t.order;return u?n(i("FINANCIAL",u)):""}),c=u=>({fulfilled:"text-n-teal-9",partial:"text-n-amber-9",unfulfilled:"text-n-ruby-9"})[u]||"text-n-slate-11";return(u,d)=>(p(),E("div",S4e,[m("div",A4e,[m("div",y4e,[m("a",{href:e.order.admin_url,target:"_blank",rel:"noopener noreferrer",class:"hover:underline text-n-slate-12 cursor-pointer truncate"},[xe(I(u.$t("CONVERSATION_SIDEBAR.SHOPIFY.ORDER_ID",{id:e.order.id}))+" ",1),d[0]||(d[0]=m("i",{class:"i-lucide-external-link pl-5"},null,-1))],8,I4e)]),m("div",{class:ae([o(e.order.financial_status),"text-xs px-2 py-1 rounded capitalize truncate"]),title:r.value},I(r.value),11,C4e)]),m("div",N4e,[m("span",O4e,I(s(e.order.created_at)),1),m("span",R4e,I(a(e.order.total_price,e.order.currency)),1)]),l.value?(p(),E("div",x4e,[m("span",{class:ae([c(e.order.fulfillment_status),"capitalize font-medium"]),title:l.value},I(l.value),11,w4e)])):$("",!0)]))}},M4e={class:"px-4 py-2 text-n-slate-12"},L4e={key:0,class:"text-center text-n-slate-12"},D4e={key:1,class:"flex justify-center items-center p-4"},P4e={key:2,class:"text-center text-n-ruby-12"},k4e={key:3,class:"text-center text-n-slate-12"},B4e={key:4},U4e={__name:"ShopifyOrdersList",props:{contactId:{type:[Number,String],required:!0}},setup(e){const t=e,n=Hs("contacts/getContact",t.contactId),s=y(()=>{var r,c;return!!((r=n.value)!=null&&r.email)||!!((c=n.value)!=null&&c.phone_number)}),a=j([]),o=j(!0),i=j(""),l=async()=>{var r,c;try{o.value=!0;const u=await T4e.getOrders(t.contactId);a.value=u.data.orders}catch(u){i.value=((c=(r=u.response)==null?void 0:r.data)==null?void 0:c.error)||"CONVERSATION_SIDEBAR.SHOPIFY.ERROR"}finally{o.value=!1}};return it(()=>t.contactId,()=>{s.value&&l()},{immediate:!0}),(r,c)=>(p(),E("div",M4e,[s.value?o.value?(p(),E("div",D4e,[S(An,{size:"32",class:"text-n-brand"})])):i.value?(p(),E("div",P4e,I(i.value),1)):a.value.length?(p(),E("div",B4e,[(p(!0),E(ue,null,Ae(a.value,u=>(p(),L($4e,{key:u.id,order:u},null,8,["order"]))),128))])):(p(),E("div",k4e,I(r.$t("CONVERSATION_SIDEBAR.SHOPIFY.NO_SHOPIFY_ORDERS")),1)):(p(),E("div",L4e,I(r.$t("CONVERSATION_SIDEBAR.SHOPIFY.NO_SHOPIFY_ORDERS")),1))]))}},F4e={class:"flex items-center justify-between px-4 py-2 border-b border-n-weak h-12"},G4e={class:"flex items-center justify-between gap-2 flex-1"},V4e={class:"font-medium text-sm text-n-slate-12"},H4e={class:"flex items-center"},LC={__name:"SidebarActionsHeader",props:{title:{type:String,required:!0},buttons:{type:Array,default:()=>[]}},emits:["click","close"],setup(e,{emit:t}){const n=t,s=a=>{n("click",a.key)};return(a,o)=>{const i=Qe("tooltip");return p(),E("div",F4e,[m("div",G4e,[m("span",V4e,I(e.title),1),m("div",H4e,[(p(!0),E(ue,null,Ae(e.buttons,l=>re((p(),L(te,{key:l.key,icon:l.icon,ghost:"",sm:"",onClick:r=>s(l)},null,8,["icon","onClick"])),[[i,l.tooltip]])),128)),re(S(te,{icon:"i-lucide-x",ghost:"",sm:"",onClick:o[0]||(o[0]=l=>a.$emit("close"))},null,512),[[i,a.$t("GENERAL.CLOSE")]])])])])}}};class W4e extends Ea{constructor(){super("integrations/linear",{accountScoped:!0})}getTeams(){return axios.get(`${this.url}/teams`)}getTeamEntities(t){return axios.get(`${this.url}/team_entities?team_id=${t}`)}createIssue(t){return axios.post(`${this.url}/create_issue`,t)}link_issue(t,n,s){return axios.post(`${this.url}/link_issue`,{issue_id:n,conversation_id:t,title:s})}getLinkedIssue(t){return axios.get(`${this.url}/linked_issues?conversation_id=${t}`)}unlinkIssue(t,n,s){return axios.post(`${this.url}/unlink_issue`,{link_id:t,issue_id:n,conversation_id:s})}searchIssues(t){return axios.get(`${this.url}/search_issue?q=${t}`)}}const Ni=new W4e,z4e={class:"flex items-center justify-end w-full gap-2 mt-2"},Y4e={__name:"LinkIssue",props:{conversationId:{type:[Number,String],required:!0},title:{type:String,default:null}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=j([]),i=j(!1),l=j({id:null,name:""}),r=j(!1),c=j(!1),u=j(""),d=()=>{o.value=[],i.value=!i.value},h=y(()=>l.value.id?l.value.name:a("INTEGRATION_SETTINGS.LINEAR.LINK.SELECT")),g=y(()=>!l.value.id||c.value),f=T=>{l.value=T,d()},b=()=>{s("close")},A=async T=>{if(o.value=[],!!T){u.value=T;try{r.value=!0;const _=await Ni.searchIssues(T);o.value=_.data.map(N=>({id:N.identifier,name:`${N.identifier} ${N.title}`,icon:"status",iconColor:N.state.color}))}catch(_){const N=tr(_,a("INTEGRATION_SETTINGS.LINEAR.LINK.ERROR"));ne(N)}finally{r.value=!1}}},v=async()=>{const{id:T}=l.value;try{c.value=!0,await Ni.link_issue(n.conversationId,T,n.title),ne(a("INTEGRATION_SETTINGS.LINEAR.LINK.LINK_SUCCESS")),u.value="",o.value=[],b(),zt(Tg.LINK_ISSUE)}catch(_){const N=tr(_,a("INTEGRATION_SETTINGS.LINEAR.LINK.LINK_ERROR"));ne(N)}finally{c.value=!1}};return(T,_)=>{const N=Qe("on-clickaway");return p(),E("div",{class:ae(["flex flex-col justify-between",i.value?"h-[256px]":"gap-2"])},[S(mu,{"trailing-icon":"",icon:"i-lucide-chevron-down","button-text":h.value,class:"justify-between w-full h-[2.5rem] py-1.5 px-3 rounded-xl bg-n-alpha-black2 outline outline-1 outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6",onClick:d},co({_:2},[i.value?{name:"dropdown",fn:Y(()=>[o.value?re((p(),L(Xc,{key:0,"show-clear-filter":!1,"list-items":o.value,"active-filter-id":l.value.id,"is-loading":r.value,"input-placeholder":T.$t("INTEGRATION_SETTINGS.LINEAR.LINK.SEARCH"),"loading-placeholder":T.$t("INTEGRATION_SETTINGS.LINEAR.LINK.LOADING"),"enable-search":"",class:"left-0 flex flex-col w-full overflow-y-auto h-fit !max-h-[160px] md:left-auto md:right-0 top-10",onOnSearch:A,onSelect:f},null,8,["list-items","active-filter-id","is-loading","input-placeholder","loading-placeholder"])),[[N,d]]):$("",!0)]),key:"0"}:void 0]),1032,["button-text"]),m("div",z4e,[S(te,{faded:"",slate:"",type:"reset",label:T.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CANCEL"),onClick:Ve(b,["prevent"])},null,8,["label"]),S(te,{type:"submit",label:T.$t("INTEGRATION_SETTINGS.LINEAR.LINK.TITLE"),disabled:g.value,"is-loading":c.value,onClick:Ve(v,["prevent"])},null,8,["label","disabled","is-loading"])])],2)}}},j4e={title:{required:Ye},teamId:{required:Ye}},K4e={key:0,class:"mt-1 message"},X4e=Object.assign({name:"SearchableDropdown"},{__name:"SearchableDropdown",props:{type:{type:String,required:!0},label:{type:String,default:null},items:{type:Array,required:!0},value:{type:[Number,String],default:null},placeholder:{type:String,default:null},error:{type:String,default:null}},emits:["change"],setup(e,{emit:t}){const n=e,s=t,a=j(!1),o=()=>{a.value=!a.value},i=d=>{s("change",d,n.type),o()},l=y(()=>!!n.error),r=y(()=>n.value?n.items.find(d=>d.id===n.value):null),c=y(()=>{var d;return((d=r.value)==null?void 0:d.name)||n.placeholder}),u=y(()=>{var d;return((d=r.value)==null?void 0:d.id)||null});return(d,h)=>{const g=Qe("on-clickaway");return p(),E("div",{class:ae(["flex w-full",e.type==="stateId"&&a.value?"h-[150px]":"gap-2"])},[m("label",{class:ae(["w-full",{error:l.value}])},[xe(I(e.label)+" ",1),S(mu,{"trailing-icon":"",icon:"i-lucide-chevron-down","button-text":c.value,class:"justify-between w-full h-[2.5rem] py-1.5 px-3 rounded-xl bg-n-alpha-black2 outline outline-1 outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6",onClick:o},co({_:2},[a.value?{name:"dropdown",fn:Y(()=>[re(S(Xc,{"show-clear-filter":!1,"list-items":e.items,"active-filter-id":u.value,"input-placeholder":e.placeholder,"enable-search":"",class:"left-0 flex flex-col w-full overflow-y-auto h-fit !max-h-[160px] md:left-auto md:right-0 top-10",onSelect:i},null,8,["list-items","active-filter-id","input-placeholder"]),[[g,o]])]),key:"0"}:void 0]),1032,["button-text"]),l.value?(p(),E("span",K4e,I(e.error),1)):$("",!0)],2)],2)}}}),q4e=["placeholder"],Z4e={class:"flex flex-col gap-4"},Q4e={class:"flex items-center justify-end w-full gap-2 mt-8"},J4e={__name:"CreateIssue",props:{conversationId:{type:[Number,String],required:!0},title:{type:String,default:null}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=j([]),i=j([]),l=j([]),r=j([]),c=j([]),u=[{id:0,name:"No priority"},{id:1,name:"Urgent"},{id:2,name:"High"},{id:3,name:"Normal"},{id:4,name:"Low"}],d=["Backlog","Todo","In Progress","Done","Canceled"],h=j(!1),g={borderRadius:"0.75rem",fontSize:"0.875rem"},f=gn({title:"",description:"",teamId:"",assigneeId:"",labelId:"",stateId:"",priority:"",projectId:""}),b=bt(j4e,f),A=y(()=>b.value.title.$invalid||h.value),v=y(()=>b.value.title.$error?a("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TITLE.REQUIRED_ERROR"):""),T=y(()=>b.value.teamId.$error?a("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TEAM.REQUIRED_ERROR"):""),_=y(()=>[{type:"teamId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TEAM.LABEL",items:o.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TEAM.SEARCH",error:T.value},{type:"assigneeId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.ASSIGNEE.LABEL",items:i.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.ASSIGNEE.SEARCH",error:""},{type:"labelId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.LABEL.LABEL",items:r.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.LABEL.SEARCH",error:""},{type:"priority",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.PRIORITY.LABEL",items:u,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.PRIORITY.SEARCH",error:""},{type:"projectId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.PROJECT.LABEL",items:l.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.PROJECT.SEARCH",error:""},{type:"stateId",label:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.STATUS.LABEL",items:c.value,placeholder:"INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.STATUS.SEARCH",error:""}]),N=()=>s("close"),R=async()=>{try{const D=await Ni.getTeams();o.value=D.data}catch(D){const M=tr(D,a("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.LOADING_TEAM_ERROR"));ne(M)}},O=async()=>{try{const D=await Ni.getTeamEntities(f.teamId);i.value=D.data.users,r.value=D.data.labels,l.value=D.data.projects,c.value=d.map(M=>D.data.states.find(P=>P.name===M)).filter(Boolean)}catch(D){const M=tr(D,a("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.LOADING_TEAM_ENTITIES_ERROR"));ne(M)}},x=(D,M)=>{f[M]=D.id,M==="teamId"&&(f.assigneeId="",f.stateId="",f.labelId="",f.projectId="",O())},w=async()=>{if(b.value.$touch(),b.value.$invalid)return;const D={team_id:f.teamId,title:f.title,description:f.description||void 0,assignee_id:f.assigneeId||void 0,project_id:f.projectId||void 0,state_id:f.stateId||void 0,priority:f.priority||void 0,label_ids:f.labelId?[f.labelId]:void 0,conversation_id:n.conversationId};try{h.value=!0;const M=await Ni.createIssue(D),{identifier:P}=M.data;await Ni.link_issue(n.conversationId,P,n.title),ne(a("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CREATE_SUCCESS")),zt(Tg.CREATE_ISSUE),N()}catch(M){const P=tr(M,a("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CREATE_ERROR"));ne(P)}finally{h.value=!1}};return lt(R),(D,M)=>{const P=W("woot-input");return p(),E("div",null,[S(P,{modelValue:f.title,"onUpdate:modelValue":M[0]||(M[0]=U=>f.title=U),class:ae([{error:C(b).title.$error},"w-full"]),styles:{...g,padding:"0.375rem 0.75rem"},label:D.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TITLE.LABEL"),placeholder:D.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.TITLE.PLACEHOLDER"),error:v.value,onInput:C(b).title.$touch},null,8,["modelValue","class","styles","label","placeholder","error","onInput"]),m("label",null,[xe(I(D.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.DESCRIPTION.LABEL"))+" ",1),re(m("textarea",{"onUpdate:modelValue":M[1]||(M[1]=U=>f.description=U),style:Zt({...g,padding:"0.5rem 0.75rem"}),rows:"3",class:"text-sm",placeholder:D.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.FORM.DESCRIPTION.PLACEHOLDER")},null,12,q4e),[[gt,f.description]])]),m("div",Z4e,[(p(!0),E(ue,null,Ae(_.value,U=>(p(),L(X4e,{key:U.type,type:U.type,value:f[U.type],label:D.$t(U.label),items:U.items,placeholder:D.$t(U.placeholder),error:U.error,onChange:x},null,8,["type","value","label","items","placeholder","error"]))),128))]),m("div",Q4e,[S(te,{faded:"",slate:"",type:"reset",label:D.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CANCEL"),onClick:Ve(N,["prevent"])},null,8,["label"]),S(te,{type:"submit",label:D.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.CREATE"),disabled:A.value,"is-loading":h.value,onClick:Ve(w,["prevent"])},null,8,["label","disabled","is-loading"])])])}}},e5e={class:"flex flex-col h-auto overflow-auto"},t5e={class:"flex flex-col h-auto overflow-auto"},n5e={class:"flex flex-col px-8 pb-4 mt-1"},s5e={key:0,class:"flex flex-col px-8 pb-4"},a5e={key:1,class:"flex flex-col px-8 pb-4"},o5e={__name:"CreateOrLinkIssue",props:{accountId:{type:[Number,String],required:!0},conversation:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=j(0),i=y(()=>{const{meta:{sender:{name:u=null}={}}={}}=n.conversation;return a("INTEGRATION_SETTINGS.LINEAR.LINK.LINK_TITLE",{conversationId:n.conversation.id,name:u})}),l=j([{key:0,name:a("INTEGRATION_SETTINGS.LINEAR.CREATE")},{key:1,name:a("INTEGRATION_SETTINGS.LINEAR.LINK.TITLE")}]),r=()=>{s("close")},c=u=>{o.value=u};return(u,d)=>{const h=W("woot-modal-header"),g=W("woot-tabs-item"),f=W("woot-tabs");return p(),E("div",e5e,[S(h,{"header-title":u.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.TITLE"),"header-content":u.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK.DESCRIPTION")},null,8,["header-title","header-content"]),m("div",t5e,[m("div",n5e,[S(f,{class:"ltr:[&>ul]:pl-0 rtl:[&>ul]:pr-0",index:o.value,onChange:c},{default:Y(()=>[(p(!0),E(ue,null,Ae(l.value,(b,A)=>(p(),L(g,{key:b.key,index:A,name:b.name,"show-badge":!1,"is-compact":""},null,8,["index","name"]))),128))]),_:1},8,["index"])]),o.value===0?(p(),E("div",s5e,[S(J4e,{"account-id":e.accountId,"conversation-id":e.conversation.id,title:i.value,onClose:r},null,8,["account-id","conversation-id","title"])])):(p(),E("div",a5e,[S(Y4e,{"conversation-id":e.conversation.id,title:i.value,onClose:r},null,8,["conversation-id","title"])]))])])}}},i5e={class:"inline-flex items-center justify-center rounded-md"},l5e={key:0,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r5e={key:1,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c5e={key:2,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u5e={key:3,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},lv={__name:"CardPriorityIcon",props:{priority:{type:String,default:""}},setup(e){return(t,n)=>(p(),E("div",i5e,[e.priority===C(Js).LOW?(p(),E("svg",l5e,n[0]||(n[0]=[Kl('<mask id="mask0_2030_12879" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20"><rect width="20" height="20" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_2030_12879)"><rect x="3.33301" y="10" width="3.33333" height="6.66667" rx="1.66667" class="fill-n-amber-9"></rect><rect x="8.33301" y="6.6665" width="3.33333" height="10" rx="1.66667" class="fill-n-slate-6"></rect><rect x="13.333" y="3.3335" width="3.33333" height="13.3333" rx="1.66667" class="fill-n-slate-6"></rect></g>',2)]))):$("",!0),e.priority===C(Js).MEDIUM?(p(),E("svg",r5e,n[1]||(n[1]=[Kl('<mask id="mask0_2030_12879" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20"><rect width="20" height="20" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_2030_12879)"><rect x="3.33301" y="10" width="3.33333" height="6.66667" rx="1.66667" class="fill-n-amber-9"></rect><rect x="8.33301" y="6.6665" width="3.33333" height="10" rx="1.66667" class="fill-n-amber-9"></rect><rect x="13.333" y="3.3335" width="3.33333" height="13.3333" rx="1.66667" class="fill-n-slate-6"></rect></g>',2)]))):$("",!0),e.priority===C(Js).HIGH?(p(),E("svg",c5e,n[2]||(n[2]=[Kl('<mask id="mask0_2030_12879" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20"><rect width="20" height="20" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_2030_12879)"><rect x="3.33301" y="10" width="3.33333" height="6.66667" rx="1.66667" class="fill-n-amber-9"></rect><rect x="8.33301" y="6.6665" width="3.33333" height="10" rx="1.66667" class="fill-n-amber-9"></rect><rect x="13.333" y="3.3335" width="3.33333" height="13.3333" rx="1.66667" class="fill-n-amber-9"></rect></g>',2)]))):$("",!0),e.priority===C(Js).URGENT?(p(),E("svg",u5e,n[3]||(n[3]=[Kl('<mask id="mask0_2030_12879" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20"><rect width="20" height="20" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_2030_12879)"><rect x="3.33301" y="10" width="3.33333" height="6.66667" rx="1.66667" class="fill-n-ruby-9"></rect><rect x="8.33301" y="6.6665" width="3.33333" height="10" rx="1.66667" class="fill-n-ruby-9"></rect><rect x="13.333" y="3.3335" width="3.33333" height="13.3333" rx="1.66667" class="fill-n-ruby-9"></rect></g>',2)]))):$("",!0)]))}},d5e={class:"flex items-center justify-between"},p5e={class:"flex items-center gap-2 px-2 py-1.5 border rounded-lg border-n-strong"},m5e={class:"flex items-center gap-1"},h5e={class:"text-xs font-medium text-n-slate-12"},f5e={__name:"IssueHeader",props:{identifier:{type:String,required:!0},issueUrl:{type:String,required:!0}},emits:["unlinkIssue"],setup(e,{emit:t}){const n=e,s=t,a=()=>{s("unlinkIssue")},o=()=>{window.open(n.issueUrl,"_blank")};return(i,l)=>{const r=W("fluent-icon");return p(),E("div",d5e,[m("div",p5e,[m("div",m5e,[S(r,{icon:"linear",size:"16",class:"text-[#5E6AD2]","view-box":"0 0 19 19"}),m("span",h5e,I(e.identifier),1)]),l[0]||(l[0]=m("span",{class:"w-px h-3 text-n-weak bg-n-weak"},null,-1)),S(te,{link:"",xs:"",slate:"",icon:"i-lucide-arrow-up-right",class:"!size-4",onClick:o})]),S(te,{ghost:"",xs:"",slate:"",icon:"i-lucide-unlink",onClick:a})])}}},g5e={class:"flex flex-col gap-4"},_5e={class:"flex flex-col w-full"},v5e={class:"mt-2 text-sm font-medium text-n-slate-12"},E5e={key:0,class:"mt-1 text-sm text-n-slate-11 line-clamp-3"},b5e={class:"flex flex-col gap-2"},T5e={class:"flex items-center gap-2"},S5e={key:0,class:"flex items-center gap-1.5"},A5e={class:"text-xs capitalize truncate text-n-slate-12"},y5e={key:1,class:"w-px h-3 bg-n-slate-4"},I5e={class:"flex items-center gap-1"},C5e={class:"text-xs text-n-slate-12"},N5e={key:2,class:"w-px h-3 bg-n-slate-4"},O5e={key:3,class:"flex items-center gap-1.5"},R5e={class:"text-xs text-n-slate-12"},x5e={key:0,class:"flex flex-wrap"},w5e={__name:"LinearIssueItem",props:{linkedIssue:{type:Object,required:!0}},emits:["unlinkIssue"],setup(e,{emit:t}){const n=e,s=t,{linkedIssue:a}=n,o={1:"Urgent",2:"High",3:"Medium",4:"Low"},i=y(()=>a.issue),l=y(()=>{const d=i.value.assignee;return d?{name:d.name,thumbnail:d.avatarUrl}:null}),r=y(()=>{var d;return((d=i.value.labels)==null?void 0:d.nodes)||[]}),c=y(()=>o[i.value.priority]),u=()=>{s("unlinkIssue",a.id,a.issue.identifier)};return(d,h)=>{var f,b;const g=W("woot-label");return p(),E("div",g5e,[m("div",_5e,[S(f5e,{identifier:i.value.identifier,"link-id":C(a).id,"issue-url":i.value.url,onUnlinkIssue:u},null,8,["identifier","link-id","issue-url"]),m("h3",v5e,I(i.value.title),1),i.value.description?(p(),E("p",E5e,I(i.value.description),1)):$("",!0)]),m("div",b5e,[m("div",T5e,[l.value?(p(),E("div",S5e,[S(kt,{src:l.value.thumbnail,name:l.value.name,size:16},null,8,["src","name"]),m("span",A5e,I(l.value.name),1)])):$("",!0),l.value?(p(),E("div",y5e)):$("",!0),m("div",I5e,[S(dt,{icon:"i-lucide-activity",class:"size-4",style:Zt({color:(f=i.value.state)==null?void 0:f.color})},null,8,["style"]),m("span",C5e,I((b=i.value.state)==null?void 0:b.name),1)]),c.value?(p(),E("div",N5e)):$("",!0),c.value?(p(),E("div",O5e,[S(lv,{priority:c.value.toLowerCase()},null,8,["priority"]),m("span",R5e,I(c.value),1)])):$("",!0)]),r.value.length?(p(),E("div",x5e,[(p(!0),E(ue,null,Ae(r.value,A=>(p(),L(g,{key:A.id,title:A.name,description:A.description,color:A.color,variant:"smooth",small:""},null,8,["title","description","color"]))),128))])):$("",!0)])])}}},$5e={class:"px-4 pt-3 pb-2"},M5e={key:0,class:"flex justify-center p-8"},L5e={key:1,class:"flex justify-center p-4"},D5e={class:"text-sm text-n-slate-11"},P5e={key:2,class:"max-h-[300px] overflow-y-auto"},k5e={__name:"IssuesList",props:{conversationId:{type:[Number,String],required:!0}},setup(e){const t=e,{t:n}=be(),s=pn(),a=j([]),o=j(!1),i=j(!1),l=s.getCurrentAccountId,r=y(()=>s.getConversationById.value(t.conversationId)||{}),c=y(()=>a.value.length>0),u=async()=>{o.value=!0,a.value=[];try{const f=await Ni.getLinkedIssue(t.conversationId);a.value=f.data||[]}catch{}finally{o.value=!1}},d=async(f,b)=>{try{await Ni.unlinkIssue(f,b,t.conversationId),zt(Tg.UNLINK_ISSUE),a.value=a.value.filter(A=>A.id!==f),ne(n("INTEGRATION_SETTINGS.LINEAR.UNLINK.SUCCESS"))}catch(A){const v=tr(A,n("INTEGRATION_SETTINGS.LINEAR.UNLINK.ERROR"));ne(v)}},h=()=>{i.value=!0},g=()=>{i.value=!1,u()};return it(()=>t.conversationId,()=>{u()}),lt(()=>{u()}),(f,b)=>{const A=W("woot-modal");return p(),E("div",null,[m("div",$5e,[S(te,{ghost:"",xs:"",icon:"i-lucide-plus",label:f.$t("INTEGRATION_SETTINGS.LINEAR.ADD_OR_LINK_BUTTON"),onClick:h},null,8,["label"])]),o.value?(p(),E("div",M5e,[S(An)])):c.value?(p(),E("div",P5e,[(p(!0),E(ue,null,Ae(a.value,v=>(p(),L(w5e,{key:v.id,class:"px-4 pt-3 pb-4 border-b border-n-weak last:border-b-0","linked-issue":v,onUnlinkIssue:d},null,8,["linked-issue"]))),128))])):(p(),E("div",L5e,[m("p",D5e,I(f.$t("INTEGRATION_SETTINGS.LINEAR.NO_LINKED_ISSUES")),1)])),S(A,{show:i.value,"onUpdate:show":b[0]||(b[0]=v=>i.value=v),"on-close":g,"close-on-backdrop-click":!1,class:"!items-start [&>div]:!top-12 [&>div]:sticky"},{default:Y(()=>[S(o5e,{conversation:r.value,"account-id":C(l),onClose:g},null,8,["conversation","account-id"])]),_:1},8,["show"])])}}},B5e={class:"flex flex-col p-3"},U5e={class:"w-12 h-12 mb-3"},F5e=["src"],G5e=["src"],V5e={class:"flex-1 mb-4"},H5e={class:"mb-1.5 text-sm font-medium text-n-slate-12"},W5e={key:0,class:"text-sm text-n-slate-11"},z5e={key:1,class:"text-sm text-n-slate-11"},uf="linear",Y5e={__name:"LinearSetupCTA",setup(e){const{isAdmin:t}=za(),s=pn().getCurrentAccountId,a=y(()=>vt(`accounts/${s.value}/settings/integrations/${uf}`)),o=()=>{window.open(a.value,"_blank")};return(i,l)=>(p(),E("div",B5e,[m("div",U5e,[m("img",{src:`/dashboard/images/integrations/${uf}.png`,class:"object-contain w-full h-full border rounded-md shadow-sm border-n-weak dark:hidden dark:bg-n-alpha-2"},null,8,F5e),m("img",{src:`/dashboard/images/integrations/${uf}-dark.png`,class:"hidden object-contain w-full h-full border rounded-md shadow-sm border-n-weak dark:block"},null,8,G5e)]),m("div",V5e,[m("h3",H5e,I(i.$t("INTEGRATION_SETTINGS.LINEAR.CTA.TITLE")),1),C(t)?(p(),E("p",W5e,I(i.$t("INTEGRATION_SETTINGS.LINEAR.CTA.DESCRIPTION")),1)):(p(),E("p",z5e,I(i.$t("INTEGRATION_SETTINGS.LINEAR.CTA.AGENT_DESCRIPTION")),1))]),C(t)?(p(),L(te,{key:0,faded:"",slate:"",onClick:o},{default:Y(()=>[xe(I(i.$t("INTEGRATION_SETTINGS.LINEAR.CTA.BUTTON_TEXT")),1)]),_:1})):$("",!0)]))}},j5e={class:"w-full"},K5e={class:"px-2 pb-8 list-group"},X5e={key:0,class:"conversation--actions"},q5e={key:1,class:"conversation--actions"},Z5e={key:2},Q5e={key:3},J5e={key:4},eBe={key:6},tBe={key:7},nBe={key:8},sBe={__name:"ContactPanel",props:{conversationId:{type:[Number,String],required:!0},inboxId:{type:Number,default:void 0}},setup(e){const t=e,{updateUISettings:n,isContactSidebarItemOpen:s,conversationSidebarItemsOrder:a,toggleSidebarUIState:o}=tn(),i=j(!1),l=j([]),r=Hs("integrations/getIntegration","shopify"),c=y(()=>r.value.enabled),u=Hs("integrations/getIntegration","linear"),d=y(()=>{var M;return((M=u.value)==null?void 0:M.enabled)||!1}),h=rt(),g=_e("getSelectedChat"),f=y(()=>t.conversationId),b=_e("conversationMetadata/getConversationMetadata"),A=y(()=>b.value(f.value)),v=y(()=>A.value.additional_attributes||{}),T=y(()=>{var M;return(M=g.value.meta)==null?void 0:M.channel}),_=_e("contacts/getContact"),N=y(()=>{var M,P;return(P=(M=g.value.meta)==null?void 0:M.sender)==null?void 0:P.id}),R=y(()=>_.value(N.value)),O=y(()=>R.value.additional_attributes||{}),x=()=>{N.value&&h.dispatch("contacts/show",{id:N.value})};it(N,(M,P)=>{M&&M!==P&&x()});const w=()=>{i.value=!1,n({conversation_sidebar_items_order:l.value})},D=()=>{n({is_contact_sidebar_open:!1,is_copilot_panel_open:!1})};return lt(()=>{l.value=a.value,x(),h.dispatch("attributes/get",0),h.dispatch("integrations/get","linear")}),(M,P)=>{const U=W("woot-feature-toggle");return p(),E("div",j5e,[S(LC,{title:M.$t("CONVERSATION.SIDEBAR.CONTACT"),onClose:D},null,8,["title"]),S(p8e,{contact:R.value,"channel-type":T.value},null,8,["contact","channel-type"]),m("div",K5e,[S(C(cu),{list:l.value,animation:"200","ghost-class":"ghost",handle:".drag-handle","item-key":"name",class:"flex flex-col gap-3",onStart:P[9]||(P[9]=F=>i.value=!0),onEnd:w},{item:Y(({element:F})=>[F.name==="conversation_actions"?(p(),E("div",X5e,[S(Uo,{title:M.$t("CONVERSATION_SIDEBAR.ACCORDION.CONVERSATION_ACTIONS"),"is-open":C(s)("is_conv_actions_open"),onToggle:P[0]||(P[0]=k=>C(o)("is_conv_actions_open",k))},{default:Y(()=>[S(L3e,{"conversation-id":f.value,"inbox-id":e.inboxId},null,8,["conversation-id","inbox-id"])]),_:1},8,["title","is-open"])])):F.name==="conversation_participants"?(p(),E("div",q5e,[S(Uo,{title:M.$t("CONVERSATION_PARTICIPANTS.SIDEBAR_TITLE"),"is-open":C(s)("is_conv_participants_open"),onToggle:P[1]||(P[1]=k=>C(o)("is_conv_participants_open",k))},{default:Y(()=>[S(K3e,{"conversation-id":f.value,"inbox-id":e.inboxId},null,8,["conversation-id","inbox-id"])]),_:1},8,["title","is-open"])])):F.name==="conversation_info"?(p(),E("div",Z5e,[S(Uo,{title:M.$t("CONVERSATION_SIDEBAR.ACCORDION.CONVERSATION_INFO"),"is-open":C(s)("is_conv_details_open"),compact:"",onToggle:P[2]||(P[2]=k=>C(o)("is_conv_details_open",k))},{default:Y(()=>[S(s4e,{"conversation-attributes":v.value,"contact-attributes":O.value},null,8,["conversation-attributes","contact-attributes"])]),_:1},8,["title","is-open"])])):F.name==="contact_attributes"?(p(),E("div",Q5e,[S(Uo,{title:M.$t("CONVERSATION_SIDEBAR.ACCORDION.CONTACT_ATTRIBUTES"),"is-open":C(s)("is_contact_attributes_open"),compact:"",onToggle:P[3]||(P[3]=k=>C(o)("is_contact_attributes_open",k))},{default:Y(()=>[S(MC,{"attribute-type":"contact_attribute","attribute-from":"conversation_contact_panel","contact-id":R.value.id,"empty-state-message":M.$t("CONVERSATION_CUSTOM_ATTRIBUTES.NO_RECORDS_FOUND")},null,8,["contact-id","empty-state-message"])]),_:1},8,["title","is-open"])])):F.name==="previous_conversation"?(p(),E("div",J5e,[R.value.id?(p(),L(Uo,{key:0,title:M.$t("CONVERSATION_SIDEBAR.ACCORDION.PREVIOUS_CONVERSATION"),"is-open":C(s)("is_previous_conv_open"),compact:"",onToggle:P[4]||(P[4]=k=>C(o)("is_previous_conv_open",k))},{default:Y(()=>[S(LLe,{"contact-id":R.value.id,"conversation-id":f.value},null,8,["contact-id","conversation-id"])]),_:1},8,["title","is-open"])):$("",!0)])):F.name==="macros"?(p(),L(U,{key:5,"feature-key":"macros"},{default:Y(()=>[S(Uo,{title:M.$t("CONVERSATION_SIDEBAR.ACCORDION.MACROS"),"is-open":C(s)("is_macro_open"),compact:"",onToggle:P[5]||(P[5]=k=>C(o)("is_macro_open",k))},{default:Y(()=>[S(E4e,{"conversation-id":f.value},null,8,["conversation-id"])]),_:1},8,["title","is-open"])]),_:1})):F.name==="linear_issues"?(p(),E("div",eBe,[S(Uo,{title:M.$t("CONVERSATION_SIDEBAR.ACCORDION.LINEAR_ISSUES"),"is-open":C(s)("is_linear_issues_open"),compact:"",onToggle:P[6]||(P[6]=k=>C(o)("is_linear_issues_open",k))},{default:Y(()=>[d.value?(p(),L(k5e,{key:1,"conversation-id":f.value},null,8,["conversation-id"])):(p(),L(Y5e,{key:0}))]),_:1},8,["title","is-open"])])):F.name==="shopify_orders"&&c.value?(p(),E("div",tBe,[S(Uo,{title:M.$t("CONVERSATION_SIDEBAR.ACCORDION.SHOPIFY_ORDERS"),"is-open":C(s)("is_shopify_orders_open"),compact:"",onToggle:P[7]||(P[7]=k=>C(o)("is_shopify_orders_open",k))},{default:Y(()=>[S(U4e,{"contact-id":N.value},null,8,["contact-id"])]),_:1},8,["title","is-open"])])):F.name==="contact_notes"?(p(),E("div",nBe,[S(Uo,{title:M.$t("CONVERSATION_SIDEBAR.ACCORDION.CONTACT_NOTES"),"is-open":C(s)("is_contact_notes_open"),compact:"",onToggle:P[8]||(P[8]=k=>C(o)("is_contact_notes_open",k))},{default:Y(()=>[S(O8e,{"contact-id":N.value},null,8,["contact-id"])]),_:1},8,["title","is-open"])])):$("",!0)]),_:1},8,["list"])])])}}},aBe=De(sBe,[["__scopeId","data-v-80ca8bcc"]]),oBe={class:"flex flex-1 overflow-auto"},DC={__name:"ConversationSidebar",props:{currentChat:{required:!0,type:Object}},setup(e){const{uiSettings:t,updateUISettings:n}=tn(),{width:s}=Di(),a=y(()=>{const{is_contact_sidebar_open:l}=t.value;return l?0:null}),o=y(()=>s.value<yt.SMALL_SCREEN_BREAKPOINT),i=()=>{var l;o.value&&((l=t.value)!=null&&l.is_contact_sidebar_open)&&n({is_contact_sidebar_open:!1,is_copilot_panel_open:!1})};return(l,r)=>re((p(),E("div",{class:ae(["bg-n-background h-full overflow-hidden flex flex-col fixed top-0 z-40 w-full max-w-sm transition-transform duration-300 ease-in-out ltr:right-0 rtl:left-0 md:static md:w-[320px] md:min-w-[320px] ltr:border-l rtl:border-r border-n-weak 2xl:min-w-[360px] 2xl:w-[360px] shadow-lg md:shadow-none",[{"md:flex":a.value===0,"md:hidden":a.value!==0}]])},[m("div",oBe,[re(S(aBe,{"conversation-id":e.currentChat.id,"inbox-id":e.currentChat.inbox_id},null,8,["conversation-id","inbox-id"]),[[rn,a.value===0]])])],2)),[[C(ms),()=>i()]])}},iBe={components:{ChatList:zye,ConversationBox:bC,CmdBarConversationSnooze:TC,SidepanelSwitch:SC,ConversationSidebar:DC},beforeRouteLeave(e,t,n){this.conversationId&&this.$store.dispatch("clearSelectedState"),n()},props:{inboxId:{type:[String,Number],default:0},conversationId:{type:[String,Number],default:0},label:{type:String,default:""},teamId:{type:String,default:""},conversationType:{type:String,default:""},foldersId:{type:[String,Number],default:0}},setup(){const{uiSettings:e,updateUISettings:t}=tn(),{accountId:n}=ln();return{uiSettings:e,updateUISettings:t,accountId:n}},data(){return{showSearchModal:!1}},computed:{...mt({chatList:"getAllConversations",currentChat:"getSelectedChat"}),showConversationList(){return this.isOnExpandedLayout?!this.conversationId:!0},showMessageView(){return this.conversationId?!0:!this.isOnExpandedLayout},isOnExpandedLayout(){const{LAYOUT_TYPES:{CONDENSED:e}}=yt,{conversation_display_type:t=e}=this.uiSettings;return t!==e},shouldShowSidebar(){if(!this.currentChat.id)return!1;const{is_contact_sidebar_open:e}=this.uiSettings;return e}},watch:{conversationId(){this.fetchConversationIfUnavailable()}},created(){this.conversationId||this.$store.dispatch("clearSelectedState")},mounted(){this.$store.dispatch("agents/get"),this.$store.dispatch("portals/index"),this.initialize(),this.$watch("$store.state.route",()=>this.initialize()),this.$watch("chatList.length",()=>{this.setActiveChat()})},methods:{onConversationLoad(){this.fetchConversationIfUnavailable()},initialize(){this.$store.dispatch("setActiveInbox",this.inboxId),this.setActiveChat()},toggleConversationLayout(){const{LAYOUT_TYPES:e}=yt,{conversation_display_type:t=e.CONDENSED}=this.uiSettings,n=t===e.CONDENSED?e.EXPANDED:e.CONDENSED;this.updateUISettings({conversation_display_type:n,previously_used_conversation_display_type:n})},fetchConversationIfUnavailable(){if(!this.conversationId)return;this.findConversation()||this.$store.dispatch("getConversation",this.conversationId)},findConversation(){const e=parseInt(this.conversationId,10),[t]=this.chatList.filter(n=>n.id===e);return t},setActiveChat(){if(this.conversationId){const e=this.findConversation();if(!e||e.id===this.currentChat.id)return;const{messageId:t}=this.$route.query;this.$store.dispatch("setActiveChat",{data:e,after:t}).then(()=>{Dt.emit(un.SCROLL_TO_MESSAGE,{messageId:t})})}else this.$store.dispatch("clearSelectedState")},onSearch(){this.showSearchModal=!0},closeSearch(){this.showSearchModal=!1}}},lBe={class:"flex w-full h-full min-w-0"};function rBe(e,t,n,s,a,o){const i=W("ChatList"),l=W("SidepanelSwitch"),r=W("ConversationBox"),c=W("ConversationSidebar"),u=W("CmdBarConversationSnooze");return p(),E("section",lBe,[S(i,{"show-conversation-list":o.showConversationList,"conversation-inbox":n.inboxId,label:n.label,"team-id":n.teamId,"conversation-type":n.conversationType,"folders-id":n.foldersId,"is-on-expanded-layout":o.isOnExpandedLayout,onConversationLoad:o.onConversationLoad},null,8,["show-conversation-list","conversation-inbox","label","team-id","conversation-type","folders-id","is-on-expanded-layout","onConversationLoad"]),o.showMessageView?(p(),L(r,{key:0,"inbox-id":n.inboxId,"is-on-expanded-layout":o.isOnExpandedLayout},{default:Y(()=>[e.currentChat.id?(p(),L(l,{key:0})):$("",!0)]),_:1},8,["inbox-id","is-on-expanded-layout"])):$("",!0),o.shouldShowSidebar?(p(),L(c,{key:1,"current-chat":e.currentChat},null,8,["current-chat"])):$("",!0),S(u)])}const Us=De(iBe,[["render",rBe]]),Fs=["administrator","agent","conversation_manage","conversation_unassigned_manage","conversation_participating_manage"],cBe={routes:[{path:vt("accounts/:accountId/dashboard"),name:"home",meta:{permissions:Fs},component:Us,props:()=>({inboxId:0})},{path:vt("accounts/:accountId/conversations/:conversation_id"),name:"inbox_conversation",meta:{permissions:Fs},component:Us,props:e=>({inboxId:0,conversationId:e.params.conversation_id})},{path:vt("accounts/:accountId/inbox/:inbox_id"),name:"inbox_dashboard",meta:{permissions:Fs},component:Us,props:e=>({inboxId:e.params.inbox_id})},{path:vt("accounts/:accountId/inbox/:inbox_id/conversations/:conversation_id"),name:"conversation_through_inbox",meta:{permissions:Fs},component:Us,props:e=>({conversationId:e.params.conversation_id,inboxId:e.params.inbox_id})},{path:vt("accounts/:accountId/label/:label"),name:"label_conversations",meta:{permissions:Fs},component:Us,props:e=>({label:e.params.label})},{path:vt("accounts/:accountId/label/:label/conversations/:conversation_id"),name:"conversations_through_label",meta:{permissions:Fs},component:Us,props:e=>({conversationId:e.params.conversation_id,label:e.params.label})},{path:vt("accounts/:accountId/team/:teamId"),name:"team_conversations",meta:{permissions:Fs},component:Us,props:e=>({teamId:e.params.teamId})},{path:vt("accounts/:accountId/team/:teamId/conversations/:conversationId"),name:"conversations_through_team",meta:{permissions:Fs},component:Us,props:e=>({conversationId:e.params.conversationId,teamId:e.params.teamId})},{path:vt("accounts/:accountId/custom_view/:id"),name:"folder_conversations",meta:{permissions:Fs},component:Us,props:e=>({foldersId:e.params.id})},{path:vt("accounts/:accountId/custom_view/:id/conversations/:conversation_id"),name:"conversations_through_folders",meta:{permissions:Fs},component:Us,props:e=>({conversationId:e.params.conversation_id,foldersId:e.params.id})},{path:vt("accounts/:accountId/mentions/conversations"),name:"conversation_mentions",meta:{permissions:Fs},component:Us,props:()=>({conversationType:"mention"})},{path:vt("accounts/:accountId/mentions/conversations/:conversationId"),name:"conversation_through_mentions",meta:{permissions:Fs},component:Us,props:e=>({conversationId:e.params.conversationId,conversationType:"mention"})},{path:vt("accounts/:accountId/unattended/conversations"),name:"conversation_unattended",meta:{permissions:Fs},component:Us,props:()=>({conversationType:"unattended"})},{path:vt("accounts/:accountId/unattended/conversations/:conversationId"),name:"conversation_through_unattended",meta:{permissions:Fs},component:Us,props:e=>({conversationId:e.params.conversationId,conversationType:"unattended"})},{path:vt("accounts/:accountId/participating/conversations"),name:"conversation_participating",meta:{permissions:Fs},component:Us,props:()=>({conversationType:"participating"})},{path:vt("accounts/:accountId/participating/conversations/:conversationId"),name:"conversation_through_participating",meta:{permissions:Fs},component:Us,props:e=>({conversationId:e.params.conversationId,conversationType:"participating"})}]},uBe={class:"flex items-center"},dBe=["placeholder","value"],pBe={__name:"SearchHeader",props:{initialQuery:{type:String,default:""}},emits:["search"],setup(e,{emit:t}){const n=e,s=t,a=j(n.initialQuery),o=j(!1),i=Ss("searchInput"),l=h=>{h.key==="/"&&document.activeElement.tagName!=="INPUT"?(h.preventDefault(),i.value.focus()):h.key==="Escape"&&document.activeElement.tagName==="INPUT"&&(h.preventDefault(),i.value.blur())},r=Ua(h=>s("search",h.length>1||h.match(/^[0-9]+$/)?h:""),500),c=h=>{a.value=h.target.value,r(a.value)},u=()=>{o.value=!0},d=()=>{o.value=!1};return it(()=>n.initialQuery,h=>{a.value!==h&&(a.value=h)},{immediate:!0}),lt(()=>{i.value.focus(),document.addEventListener("keydown",l)}),ei(()=>{document.removeEventListener("keydown",l)}),(h,g)=>{const f=W("fluent-icon"),b=W("woot-label");return p(),E("div",{class:ae(["input-container rounded-xl transition-[border-bottom] duration-[0.2s] ease-[ease-in-out] relative flex items-center py-2 px-4 h-14 gap-2 border border-solid bg-n-alpha-black2",{"border-n-brand":o.value,"border-n-weak":!o.value}])},[m("div",uBe,[S(f,{icon:"search",class:ae(["icon",{"text-n-blue-text":o.value,"text-n-slate-10":!o.value}]),"aria-hidden":"true"},null,8,["class"])]),m("input",{ref_key:"searchInput",ref:i,type:"search",class:"reset-base outline-none w-full m-0 bg-transparent border-transparent shadow-none text-n-slate-12 dark:text-n-slate-12 active:border-transparent active:shadow-none hover:border-transparent hover:shadow-none focus:border-transparent focus:shadow-none",placeholder:h.$t("SEARCH.INPUT_PLACEHOLDER"),value:a.value,onFocus:u,onBlur:d,onInput:c},null,40,dBe),S(b,{title:h.$t("SEARCH.PLACEHOLDER_KEYBINDING"),"show-close":!1,small:"",class:"!m-0 whitespace-nowrap !bg-n-slate-3 dark:!bg-n-solid-3 !border-n-weak dark:!border-n-strong"},null,8,["title"])],2)}}},mBe={class:"mt-1 border-b border-n-weak"},hBe={__name:"SearchTabs",props:{tabs:{type:Array,default:()=>[]},selectedTab:{type:Number,default:0}},emits:["tabChange"],setup(e,{emit:t}){const n=e,s=t,a=j(n.selectedTab);it(()=>n.selectedTab,(i,l)=>{i!==l&&(a.value=n.selectedTab)});const o=i=>{a.value=i,s("tabChange",n.tabs[i].key)};return(i,l)=>{const r=W("woot-tabs-item"),c=W("woot-tabs");return p(),E("div",mBe,[S(c,{index:a.value,border:!1,onChange:o},{default:Y(()=>[(p(!0),E(ue,null,Ae(e.tabs,(u,d)=>(p(),L(r,{key:u.key,index:d,name:u.name,count:u.count,"show-badge":u.showBadge,"is-compact":""},null,8,["index","name","count","show-badge"]))),128))]),_:1},8,["index"])])}}},fBe={class:"mx-0 my-2"},gBe={key:0,class:"sticky top-0 p-2 z-50 mb-0.5 bg-n-background"},_Be={class:"text-sm text-n-slate-12"},vBe={key:2,class:"flex items-center justify-center px-4 py-6 m-2 rounded-xl bg-n-slate-2 dark:bg-n-solid-1"},EBe={class:"mx-2 my-0 text-center text-n-slate-11"},em={__name:"SearchResultSection",props:{title:{type:String,default:""},empty:{type:Boolean,default:!1},query:{type:String,default:""},showTitle:{type:Boolean,default:!0},isFetching:{type:Boolean,default:!0}},setup(e){const t=e,n=y(()=>t.title.toLowerCase());return(s,a)=>{const o=W("woot-loading-state"),i=W("fluent-icon");return p(),E("section",fBe,[e.showTitle?(p(),E("div",gBe,[m("h3",_Be,I(e.title),1)])):$("",!0),We(s.$slots,"default"),e.isFetching?(p(),L(o,{key:1,message:e.empty?s.$t("SEARCH.SEARCHING_DATA"):s.$t("SEARCH.LOADING_DATA")},null,8,["message"])):$("",!0),e.empty&&!e.isFetching?(p(),E("div",vBe,[S(i,{icon:"info",size:"16px",class:"text-n-slate-11"}),m("p",EBe,I(s.$t("SEARCH.EMPTY_STATE",{item:n.value,query:e.query})),1)])):$("",!0)])}}},bBe={class:"flex-grow min-w-0 ml-2"},TBe={class:"flex items-center min-w-0 justify-between gap-1 mb-1"},SBe={class:"flex"},ABe={class:"flex items-center justify-center h-5 ml-1 rounded bg-n-slate-3 dark:bg-n-solid-3 w-fit rtl:ml-0 rtl:mr-1"},yBe={class:"text-xs font-normal min-w-0 truncate text-n-slate-11 dark:text-n-slate-11"},IBe={class:"flex flex-wrap gap-x-2 gap-y-1.5"},CBe={class:"text-xs font-normal text-n-slate-11 dark:text-n-slate-11"},PC={__name:"SearchResultConversationItem",props:{id:{type:Number,default:0},inbox:{type:Object,default:()=>({})},name:{type:String,default:""},email:{type:String,default:""},accountId:{type:[String,Number],default:""},createdAt:{type:[String,Date,Number],default:""},messageId:{type:Number,default:0},emailSubject:{type:String,default:""}},setup(e){const t=e,n=y(()=>{const i={};return t.messageId&&(i.messageId=t.messageId),vt(`accounts/${t.accountId}/conversations/${t.id}`,i)}),s=us(t.createdAt),a=y(()=>[{label:"SEARCH.FROM",value:t.name,show:!!t.name},{label:"SEARCH.EMAIL",value:t.email,show:!!t.email},{label:"SEARCH.EMAIL_SUBJECT",value:t.emailSubject,show:!!t.emailSubject}]),o=y(()=>a.value.filter(i=>i.show));return(i,l)=>{const r=W("woot-label"),c=W("router-link");return p(),L(c,{to:n.value,class:"flex p-2 rounded-xl cursor-pointer hover:bg-n-slate-2"},{default:Y(()=>[S(kt,{name:"chats",size:24,"icon-name":"i-lucide-messages-square",class:"[&>span]:rounded"}),m("div",bBe,[m("div",TBe,[m("div",SBe,[S(r,{class:"!bg-n-slate-3 dark:!bg-n-solid-3 !border-n-weak dark:!border-n-strong m-0",title:`#${e.id}`,"show-close":!1,small:""},null,8,["title"]),m("div",ABe,[S(j_,{inbox:e.inbox,class:"mx-2 bg-n-slate-3 dark:bg-n-solid-3 text-n-slate-11 dark:text-n-slate-11"},null,8,["inbox"])])]),m("span",yBe,I(C(s)),1)]),m("div",IBe,[(p(!0),E(ue,null,Ae(o.value,u=>(p(),E("h5",{key:u.label,class:"m-0 text-sm min-w-0 text-n-slate-12 dark:text-n-slate-12 truncate"},[m("span",CBe,I(i.$t(u.label))+": ",1),xe(" "+I(u.value),1)]))),128))]),We(i.$slots,"default")])]),_:3},8,["to"])}}},NBe={key:0,class:"space-y-1.5 list-none"},OBe={__name:"SearchResultConversationsList",props:{conversations:{type:Array,default:()=>[]},query:{type:String,default:""},isFetching:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0}},setup(e){const t=e,n=_e("getCurrentAccountId"),s=y(()=>t.conversations.map(a=>{var o;return{...a,mail_subject:((o=a.additional_attributes)==null?void 0:o.mail_subject)||""}}));return(a,o)=>(p(),L(em,{title:a.$t("SEARCH.SECTION.CONVERSATIONS"),empty:!e.conversations.length,query:e.query,"show-title":e.showTitle,"is-fetching":e.isFetching},{default:Y(()=>[e.conversations.length?(p(),E("ul",NBe,[(p(!0),E(ue,null,Ae(s.value,i=>(p(),E("li",{key:i.id},[S(PC,{id:i.id,name:i.contact.name,email:i.contact.email,"account-id":C(n),inbox:i.inbox,"created-at":i.created_at,"email-subject":i.mail_subject},null,8,["id","name","email","account-id","inbox","created-at","email-subject"])]))),128))])):$("",!0)]),_:1},8,["title","empty","query","show-title","is-fetching"]))}},RBe={key:0,class:"absolute inset-x-0 bottom-0 h-16 bg-gradient-to-t to-transparent from-n-background flex items-end justify-center pb-2"},xBe={__name:"ReadMore",props:{shrink:{type:Boolean,default:!1}},emits:["expand"],setup(e){return(t,n)=>(p(),E("div",null,[m("div",{class:ae({"max-h-[100px] overflow-hidden relative":e.shrink})},[We(t.$slots,"default"),e.shrink?(p(),E("div",RBe,[S(te,{label:t.$t("SEARCH.READ_MORE"),icon:"i-lucide-chevrons-down",blue:"",xs:"",faded:"",class:"backdrop-filter backdrop-blur-[2px]",onClick:n[0]||(n[0]=Ve(s=>t.$emit("expand"),["prevent"]))},null,8,["label"])])):$("",!0)],2)]))}},wBe={class:"header"},$Be={class:"text-n-slate-11"},MBe={class:"message-content"},LBe={__name:"MessageContent",props:{author:{type:String,default:""},message:{type:Object,default:()=>({})},searchTerm:{type:String,default:""}},setup(e){const t=e,n=y(()=>{if(t.message.content)return t.message.content;const{content_attributes:c={}}=t.message,{email:u={}}=c||{};if(u.subject)return u.subject;const d=t.message.attachments.find(h=>h.file_type==="audio");return(d==null?void 0:d.transcribed_text)||""}),{highlightContent:s}=sa(),a=Ss("messageContainer"),o=j(!1),i=()=>{const c=a.value;if(c){const u=c.querySelector(".message-content");o.value=u.offsetHeight>150}},l=c=>{var u=document.createTextNode(c),d=document.createElement("p");return d.appendChild(u),d.innerText},r=()=>{const c=n.value||"",u=l(c);return s(u,t.searchTerm,"searchkey--highlight")};return lt(()=>{it(()=>a.value,i),Wt(i)}),(c,u)=>{const d=Qe("dompurify-html");return p(),E("blockquote",{ref_key:"messageContainer",ref:a,class:"message border-l-2 border-n-weak"},[m("p",wBe,[m("strong",$Be,I(e.author),1),xe(" "+I(c.$t("SEARCH.WROTE")),1)]),S(xBe,{shrink:o.value,onExpand:u[0]||(u[0]=h=>o.value=!1)},{default:Y(()=>[re(m("div",MBe,null,512),[[d,r()]])]),_:1},8,["shrink"])],512)}}},DBe=De(LBe,[["__scopeId","data-v-5b5a7ad2"]]),PBe={key:0,class:"space-y-1.5 list-none"},kBe={__name:"SearchResultMessagesList",props:{messages:{type:Array,default:()=>[]},query:{type:String,default:""},isFetching:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0}},setup(e){const{t}=be(),n=_e("getCurrentAccountId"),s=a=>a&&a.sender&&a.sender.name?a.sender.name:t("SEARCH.BOT_LABEL");return(a,o)=>(p(),L(em,{title:a.$t("SEARCH.SECTION.MESSAGES"),empty:!e.messages.length,query:e.query,"show-title":e.showTitle,"is-fetching":e.isFetching},{default:Y(()=>[e.messages.length?(p(),E("ul",PBe,[(p(!0),E(ue,null,Ae(e.messages,i=>(p(),E("li",{key:i.id},[S(PC,{id:i.conversation_id,"account-id":C(n),inbox:i.inbox,"created-at":i.created_at,"message-id":i.id},{default:Y(()=>[S(DBe,{author:s(i),message:i,"search-term":e.query},null,8,["author","message","search-term"])]),_:2},1032,["id","account-id","inbox","created-at","message-id"])]))),128))])):$("",!0)]),_:1},8,["title","empty","query","show-title","is-fetching"]))}},BBe={class:"ml-2 rtl:mr-2 min-w-0 rtl:ml-0"},UBe={class:"text-sm name truncate min-w-0 text-n-slate-12"},FBe={class:"grid items-center m-0 gap-1 text-sm grid-cols-[minmax(0,1fr)_auto_auto]"},GBe=["title"],VBe={key:1,class:"text-n-slate-10"},HBe={key:2,class:"text-n-slate-12"},WBe={__name:"SearchResultContactItem",props:{id:{type:[String,Number],default:0},email:{type:String,default:""},phone:{type:String,default:""},name:{type:String,default:""},thumbnail:{type:String,default:""},accountId:{type:[String,Number],default:0}},setup(e){const t=e,n=y(()=>vt(`accounts/${t.accountId}/contacts/${t.id}`));return(s,a)=>{const o=W("router-link");return p(),L(o,{to:n.value,class:"flex items-start p-2 rounded-xl cursor-pointer hover:bg-n-slate-2"},{default:Y(()=>[S(kt,{name:e.name,src:e.thumbnail,size:24,"rounded-full":"",class:"mt-0.5"},null,8,["name","src"]),m("div",BBe,[m("h5",UBe,I(e.name),1),m("p",FBe,[e.email?(p(),E("span",{key:0,class:"truncate text-n-slate-12",title:e.email},I(e.email),9,GBe)):$("",!0),e.phone?(p(),E("span",VBe,"")):$("",!0),e.phone?(p(),E("span",HBe,I(e.phone),1)):$("",!0)])])]),_:1},8,["to"])}}},zBe={key:0,class:"space-y-1.5 list-none"},YBe={__name:"SearchResultContactsList",props:{contacts:{type:Array,default:()=>[]},query:{type:String,default:""},isFetching:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0}},setup(e){const t=_e("getCurrentAccountId");return(n,s)=>(p(),L(em,{title:n.$t("SEARCH.SECTION.CONTACTS"),empty:!e.contacts.length,query:e.query,"show-title":e.showTitle,"is-fetching":e.isFetching},{default:Y(()=>[e.contacts.length?(p(),E("ul",zBe,[(p(!0),E(ue,null,Ae(e.contacts,a=>(p(),E("li",{key:a.id},[S(WBe,{id:a.id,name:a.name,email:a.email,phone:a.phone_number,"account-id":C(t),thumbnail:a.thumbnail},null,8,["id","name","email","phone","account-id","thumbnail"])]))),128))])):$("",!0)]),_:1},8,["title","empty","query","show-title","is-fetching"]))}},jBe={class:"flex items-center justify-center w-6 h-6 mt-0.5 rounded bg-n-slate-3"},KBe={class:"ltr:ml-2 rtl:mr-2 min-w-0 flex-1"},XBe={class:"flex items-center gap-2"},qBe={class:"text-sm font-medium truncate min-w-0 text-n-slate-12"},ZBe={key:0,class:"text-xs font-medium whitespace-nowrap capitalize bg-n-slate-3 px-1 py-0.5 rounded text-n-slate-10"},QBe={key:0,class:"mt-1 text-sm text-n-slate-11 line-clamp-2"},YT=300,JBe={__name:"SearchResultArticleItem",props:{id:{type:[String,Number],default:0},title:{type:String,default:""},description:{type:String,default:""},category:{type:String,default:""},locale:{type:String,default:""},content:{type:String,default:""},portalSlug:{type:String,required:!0},accountId:{type:[String,Number],default:0}},setup(e){const t=e,n=y(()=>vt(`accounts/${t.accountId}/portals/${t.portalSlug}/${t.locale}/articles/edit/${t.id}`)),s=y(()=>{if(!t.content)return t.description||"";const o=new np(t.content).plainText.trim();return o.length>YT?`${o.substring(0,YT)}...`:o});return(a,o)=>{const i=W("router-link");return p(),L(i,{to:n.value,class:"flex items-start p-2 rounded-xl cursor-pointer hover:bg-n-slate-2"},{default:Y(()=>[m("div",jBe,[S(dt,{icon:"i-lucide-library-big",class:"text-n-slate-10"})]),m("div",KBe,[m("div",XBe,[m("h5",qBe,I(e.title),1),e.category?(p(),E("span",ZBe,I(e.category),1)):$("",!0)]),s.value?(p(),E("p",QBe,I(s.value),1)):$("",!0)])]),_:1},8,["to"])}}},e6e={key:0,class:"space-y-1.5 list-none"},t6e={__name:"SearchResultArticlesList",props:{articles:{type:Array,default:()=>[]},query:{type:String,default:""},isFetching:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0}},setup(e){const t=_e("getCurrentAccountId");return(n,s)=>(p(),L(em,{title:n.$t("SEARCH.SECTION.ARTICLES"),empty:!e.articles.length,query:e.query,"show-title":e.showTitle,"is-fetching":e.isFetching},{default:Y(()=>[e.articles.length?(p(),E("ul",e6e,[(p(!0),E(ue,null,Ae(e.articles,a=>(p(),E("li",{key:a.id},[S(JBe,{id:a.id,title:a.title,description:a.description,content:a.content,"portal-slug":a.portal_slug,locale:a.locale,"account-id":C(t),category:a.category_name,status:a.status},null,8,["id","title","description","content","portal-slug","locale","account-id","category","status"])]))),128))])):$("",!0)]),_:1},8,["title","empty","query","show-title","is-fetching"]))}},n6e={class:"flex flex-col w-full h-full bg-n-background"},s6e={class:"flex w-full p-4"},a6e={class:"flex flex-col flex-grow w-full h-full overflow-hidden"},o6e={class:"w-full max-w-4xl mx-auto"},i6e={class:"flex flex-col w-full px-4"},l6e={class:"flex-grow w-full h-full overflow-y-auto"},r6e={class:"w-full max-w-4xl mx-auto px-4 pb-6"},c6e={key:0},u6e={key:1,class:"flex justify-center mt-4 mb-6"},d6e={key:1,class:"flex flex-col items-center justify-center px-4 py-6 mt-8 rounded-md"},p6e={class:"m-2 text-center text-n-slate-11"},m6e={key:2,class:"flex flex-col items-center justify-center px-4 py-6 mt-8 text-center rounded-md"},h6e={class:"text-center margin-bottom-0"},f6e={class:"m-2 text-center text-n-slate-11"},g6e=15,_6e={__name:"SearchView",setup(e){const t=Ft(),n=wt(),s=rt(),{t:a}=be(),o=j(n.params.tab||"all"),i=j(n.query.q||""),l=j({contacts:1,conversations:1,messages:1,articles:1}),r=_e("conversationSearch/getContactRecords"),c=_e("conversationSearch/getConversationRecords"),u=_e("conversationSearch/getMessageRecords"),d=_e("conversationSearch/getArticleRecords"),h=_e("conversationSearch/getUIFlags"),g=(Me,Fe)=>Me.value.map(Ge=>({...Ge,type:Fe})),f=y(()=>g(r,"contact")),b=y(()=>g(c,"conversation")),A=y(()=>g(u,"message")),v=y(()=>g(d,"article")),T=y(()=>o.value==="all"),_=Me=>T.value?Me.value.slice(0,5):Me.value,N=y(()=>_(f)),R=y(()=>_(b)),O=y(()=>_(A)),x=y(()=>_(v)),w=Me=>y(()=>o.value===Me||T.value),D=w("contacts"),M=w("conversations"),P=w("messages"),U=w("articles"),{shouldShow:F,isFeatureFlagEnabled:k}=Cl(),B={all:{permissions:[Xl,...qn,...Ms,ql],count:()=>null},contacts:{permissions:[...qn,Xl],count:()=>f.value.length},conversations:{permissions:[...qn,...Ms],count:()=>b.value.length},messages:{permissions:[...qn,...Ms],count:()=>A.value.length},articles:{permissions:[...qn,ql],featureFlag:ft.HELP_CENTER,count:()=>v.value.length}},V=y(()=>Object.entries(B).map(([Me,Fe])=>({key:Me,name:a(`SEARCH.TABS.${Me.toUpperCase()}`),count:Fe.count(),showBadge:Me!=="all",permissions:Fe.permissions,featureFlag:Fe.featureFlag})).filter(Me=>F(Me.featureFlag,Me.permissions,null)&&k(Me.featureFlag))),G=y(()=>[{permissions:[...qn,Xl],count:()=>N.value.length},{permissions:[...qn,...Ms],count:()=>R.value.length+O.value.length},{permissions:[...qn,ql],featureFlag:ft.HELP_CENTER,count:()=>x.value.length}].filter(Fe=>F(Fe.featureFlag,Fe.permissions,null)&&k(Fe.featureFlag)).map(Fe=>Fe.count()).reduce((Fe,Ge)=>Fe+Ge,0)),K=y(()=>{const Me=V.value.findIndex(Fe=>Fe.key===o.value);return Me>=0?Me:0}),se=y(()=>{const{contact:Me,message:Fe,conversation:Ge,article:je,isFetching:Ze}=h.value;return Ze||Me.isFetching||Fe.isFetching||Ge.isFetching||je.isFetching}),ee=y(()=>G.value===0&&h.value.isSearchCompleted&&T.value&&!se.value&&i.value),X=y(()=>h.value.isSearchCompleted&&G.value!==0||se.value||!T.value&&i.value&&!se.value),z=y(()=>{if(!i.value||se.value||o.value==="all")return!1;const Me={contacts:f.value,conversations:b.value,messages:A.value,articles:v.value}[o.value];return(Me==null?void 0:Me.length)>0&&Me.length===l.value[o.value]*g6e}),H=y(()=>{var Me,Fe,Ge,je;return{contacts:((Me=f.value)==null?void 0:Me.length)>5&&T.value,conversations:((Fe=b.value)==null?void 0:Fe.length)>5&&T.value,messages:((Ge=A.value)==null?void 0:Ge.length)>5&&T.value,articles:((je=v.value)==null?void 0:je.length)>5&&T.value}}),q=()=>{l.value={contacts:1,conversations:1,messages:1,articles:1},s.dispatch("conversationSearch/clearSearchResults")},J=()=>{var Ge;const Me={accountId:n.params.accountId},Fe={};o.value!=="all"&&(Me.tab=o.value),(Ge=i.value)!=null&&Ge.trim()&&(Fe.q=i.value.trim()),t.replace({name:"search",params:Me,query:Fe})},de=Me=>{i.value=Me,q(),J(),Me&&(zt(ea.SEARCH_CONVERSATION),s.dispatch("conversationSearch/fullSearch",{q:Me,page:1}))},Te=()=>{window.history.length>2?t.go(-1):t.push({name:"home"}),q()},ce=()=>{const Me={contacts:"conversationSearch/contactSearch",conversations:"conversationSearch/conversationSearch",messages:"conversationSearch/messageSearch",articles:"conversationSearch/articleSearch"};if(h.value.isFetching||o.value==="all")return;const Fe=o.value;l.value[Fe]+=1,s.dispatch(Me[Fe],{q:i.value,page:l.value[Fe]})},Ne=Me=>{o.value=Me,J()};return lt(()=>{s.dispatch("conversationSearch/clearSearchResults"),n.query.q&&de(n.query.q)}),ei(()=>{i.value="",s.dispatch("conversationSearch/clearSearchResults")}),(Me,Fe)=>{const Ge=W("fluent-icon");return p(),E("div",n6e,[m("div",s6e,[S(te,{label:C(a)("GENERAL_SETTINGS.BACK"),icon:"i-lucide-chevron-left",faded:"",primary:"",sm:"",onClick:Te},null,8,["label"])]),m("section",a6e,[m("div",o6e,[m("div",i6e,[S(pBe,{"initial-query":i.value,onSearch:de},null,8,["initial-query"]),i.value?(p(),L(hBe,{key:0,tabs:V.value,"selected-tab":K.value,onTabChange:Ne},null,8,["tabs","selected-tab"])):$("",!0)])]),m("div",l6e,[m("div",r6e,[X.value?(p(),E("div",c6e,[S(js,{permissions:[...C(qn),C(Xl)],class:"flex flex-col justify-center"},{default:Y(()=>[C(D)?(p(),L(YBe,{key:0,"is-fetching":C(h).contact.isFetching,contacts:N.value,query:i.value,"show-title":T.value},null,8,["is-fetching","contacts","query","show-title"])):$("",!0),H.value.contacts?(p(),L(te,{key:1,label:C(a)("SEARCH.VIEW_MORE"),icon:"i-lucide-eye",slate:"",sm:"",outline:"",onClick:Fe[0]||(Fe[0]=je=>o.value="contacts")},null,8,["label"])):$("",!0)]),_:1},8,["permissions"]),S(js,{permissions:[...C(qn),...C(Ms)],class:"flex flex-col justify-center"},{default:Y(()=>[C(P)?(p(),L(kBe,{key:0,"is-fetching":C(h).message.isFetching,messages:O.value,query:i.value,"show-title":T.value},null,8,["is-fetching","messages","query","show-title"])):$("",!0),H.value.messages?(p(),L(te,{key:1,label:C(a)("SEARCH.VIEW_MORE"),icon:"i-lucide-eye",slate:"",sm:"",outline:"",onClick:Fe[1]||(Fe[1]=je=>o.value="messages")},null,8,["label"])):$("",!0)]),_:1},8,["permissions"]),S(js,{permissions:[...C(qn),...C(Ms)],class:"flex flex-col justify-center"},{default:Y(()=>[C(M)?(p(),L(OBe,{key:0,"is-fetching":C(h).conversation.isFetching,conversations:R.value,query:i.value,"show-title":T.value},null,8,["is-fetching","conversations","query","show-title"])):$("",!0),H.value.conversations?(p(),L(te,{key:1,label:C(a)("SEARCH.VIEW_MORE"),icon:"i-lucide-eye",slate:"",sm:"",outline:"",onClick:Fe[2]||(Fe[2]=je=>o.value="conversations")},null,8,["label"])):$("",!0)]),_:1},8,["permissions"]),C(k)(C(ft).HELP_CENTER)?(p(),L(js,{key:0,permissions:[...C(qn),C(ql)],"feature-flag":C(ft).HELP_CENTER,class:"flex flex-col justify-center"},{default:Y(()=>[C(U)?(p(),L(t6e,{key:0,"is-fetching":C(h).article.isFetching,articles:x.value,query:i.value,"show-title":T.value},null,8,["is-fetching","articles","query","show-title"])):$("",!0),H.value.articles?(p(),L(te,{key:1,label:C(a)("SEARCH.VIEW_MORE"),icon:"i-lucide-eye",slate:"",sm:"",outline:"",onClick:Fe[3]||(Fe[3]=je=>o.value="articles")},null,8,["label"])):$("",!0)]),_:1},8,["permissions","feature-flag"])):$("",!0),z.value?(p(),E("div",u6e,[T.value?$("",!0):(p(),L(te,{key:0,label:C(a)("SEARCH.LOAD_MORE"),icon:"i-lucide-cloud-download",slate:"",sm:"",faded:"",onClick:ce},null,8,["label"]))])):$("",!0)])):ee.value?(p(),E("div",d6e,[S(Ge,{icon:"info",size:"16px",class:"text-n-slate-11"}),m("p",p6e,I(C(a)("SEARCH.EMPTY_STATE_FULL",{query:i.value})),1)])):i.value?$("",!0):(p(),E("div",m6e,[m("p",h6e,[S(Ge,{icon:"search",size:"24px",class:"text-n-slate-11"})]),m("p",f6e,I(C(a)("SEARCH.EMPTY_STATE_DEFAULT")),1)]))])])])])}}},v6e=[{path:vt("accounts/:accountId/search/:tab?"),name:"search",meta:{permissions:[...qn,...Ms,Xl,ql]},component:_6e}],E6e={class:"relative"},b6e={key:0,class:"absolute top-full mt-1 ltr:-right-32 rtl:-left-32 sm:ltr:right-0 sm:rtl:left-0 flex flex-col gap-4 bg-n-alpha-3 backdrop-blur-[100px] border border-n-weak w-72 rounded-xl p-4"},T6e={class:"flex items-center justify-between gap-2"},S6e={class:"text-sm text-n-slate-12"},A6e={class:"flex items-center justify-between gap-2"},y6e={class:"text-sm text-n-slate-12"},I6e={__name:"ContactSortMenu",props:{activeSort:{type:String,default:"last_activity_at"},activeOrdering:{type:String,default:""}},emits:["update:sort"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=j(!1),i=[{label:a("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.NAME"),value:"name"},{label:a("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.EMAIL"),value:"email"},{label:a("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.COMPANY"),value:"company_name"},{label:a("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.COUNTRY"),value:"country"},{label:a("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.CITY"),value:"city"},{label:a("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.LAST_ACTIVITY"),value:"last_activity_at"},{label:a("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.OPTIONS.CREATED_AT"),value:"created_at"}],l=[{label:a("CONTACTS_LAYOUT.HEADER.ACTIONS.ORDER.OPTIONS.ASCENDING"),value:""},{label:a("CONTACTS_LAYOUT.HEADER.ACTIONS.ORDER.OPTIONS.DESCENDING"),value:"-"}],r=cr(n,"activeSort"),c=cr(n,"activeOrdering"),u=y(()=>{const f=i.find(b=>b.value===r.value);return(f==null?void 0:f.label)||a("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.LABEL")}),d=y(()=>{const f=l.find(b=>b.value===c.value);return(f==null?void 0:f.label)||a("CONTACTS_LAYOUT.HEADER.ACTIONS.ORDER.LABEL")}),h=f=>{s("update:sort",{sort:f,order:n.activeOrdering})},g=f=>{s("update:sort",{sort:n.activeSort,order:f})};return(f,b)=>{const A=Qe("on-clickaway");return p(),E("div",E6e,[S(te,{icon:"i-lucide-arrow-down-up",color:"slate",size:"sm",variant:"ghost",class:ae(o.value?"bg-n-alpha-2":""),onClick:b[0]||(b[0]=v=>o.value=!o.value)},null,8,["class"]),o.value?re((p(),E("div",b6e,[m("div",T6e,[m("span",S6e,I(C(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.SORT_BY.LABEL")),1),S(Tr,{"model-value":r.value,options:i,label:u.value,"onUpdate:modelValue":h},null,8,["model-value","label"])]),m("div",A6e,[m("span",y6e,I(C(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.ORDER.LABEL")),1),S(Tr,{"model-value":c.value,options:l,label:d.value,"onUpdate:modelValue":g},null,8,["model-value","label"])])])),[[A,()=>o.value=!1]]):$("",!0)])}}},C6e={class:"relative"},N6e={__name:"ContactMoreActions",emits:["add","import","export"],setup(e,{emit:t}){const n=t,{t:s}=be(),a=[{label:s("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.ADD_CONTACT"),action:"add",value:"add",icon:"i-lucide-plus"},{label:s("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.EXPORT_CONTACT"),action:"export",value:"export",icon:"i-lucide-upload"},{label:s("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.IMPORT_CONTACT"),action:"import",value:"import",icon:"i-lucide-download"}],o=j(!1),i=({action:l})=>{l==="add"?n("add"):l==="import"?n("import"):l==="export"&&n("export")};return(l,r)=>{const c=Qe("on-clickaway");return re((p(),E("div",C6e,[S(te,{icon:"i-lucide-ellipsis-vertical",color:"slate",variant:"ghost",size:"sm",class:ae(o.value?"bg-n-alpha-2":""),onClick:r[0]||(r[0]=u=>o.value=!o.value)},null,8,["class"]),o.value?(p(),L(qs,{key:0,"menu-items":a,class:"ltr:right-0 rtl:left-0 mt-1 w-52 top-full",onAction:r[1]||(r[1]=u=>i(u))})):$("",!0)])),[[c,()=>o.value=!1]])}}},O6e={class:"sticky top-0 z-10"},R6e={class:"flex items-start sm:items-center justify-between w-full py-6 px-6 gap-2 mx-auto max-w-[60rem]"},x6e={class:"text-xl font-medium truncate text-n-slate-12"},w6e={class:"flex items-center flex-col sm:flex-row flex-shrink-0 gap-4"},$6e={key:0,class:"flex items-center gap-2 w-full"},M6e={class:"flex items-center flex-shrink-0 gap-4"},L6e={class:"flex items-center gap-2"},D6e={key:0,class:"relative"},P6e={key:0,class:"absolute top-0 right-0 w-2 h-2 rounded-full bg-n-brand"},k6e={__name:"ContactHeader",props:{showSearch:{type:Boolean,default:!0},searchValue:{type:String,default:""},headerTitle:{type:String,required:!0},buttonLabel:{type:String,default:""},activeSort:{type:String,default:"last_activity_at"},activeOrdering:{type:String,default:""},isSegmentsView:{type:Boolean,default:!1},hasActiveFilters:{type:Boolean,default:!1},isLabelView:{type:Boolean,default:!1},isActiveView:{type:Boolean,default:!1}},emits:["search","filter","update:sort","add","import","export","createSegment","deleteSegment"],setup(e,{emit:t}){const n=t;return(s,a)=>(p(),E("header",O6e,[m("div",R6e,[m("span",x6e,I(e.headerTitle),1),m("div",w6e,[e.showSearch?(p(),E("div",$6e,[S(Tt,{"model-value":e.searchValue,type:"search",placeholder:s.$t("CONTACTS_LAYOUT.HEADER.SEARCH_PLACEHOLDER"),"custom-input-class":["h-8 [&:not(.focus)]:!border-transparent bg-n-alpha-2 dark:bg-n-solid-1 ltr:!pl-8 !py-1 rtl:!pr-8"],class:"w-full",onInput:a[0]||(a[0]=o=>n("search",o.target.value))},{prefix:Y(()=>[S(dt,{icon:"i-lucide-search",class:"absolute -translate-y-1/2 text-n-slate-11 size-4 top-1/2 ltr:left-2 rtl:right-2"})]),_:1},8,["model-value","placeholder"])])):$("",!0),m("div",M6e,[m("div",L6e,[!e.isLabelView&&!e.isActiveView?(p(),E("div",D6e,[S(te,{id:"toggleContactsFilterButton",icon:e.isSegmentsView?"i-lucide-pen-line":"i-lucide-list-filter",color:"slate",size:"sm",class:"relative w-8",variant:"ghost",onClick:a[1]||(a[1]=o=>n("filter"))},{default:Y(()=>[e.hasActiveFilters&&!e.isSegmentsView?(p(),E("div",P6e)):$("",!0)]),_:1},8,["icon"]),We(s.$slots,"filter")])):$("",!0),e.hasActiveFilters&&!e.isSegmentsView&&!e.isLabelView&&!e.isActiveView?(p(),L(te,{key:1,icon:"i-lucide-save",color:"slate",size:"sm",variant:"ghost",onClick:a[2]||(a[2]=o=>n("createSegment"))})):$("",!0),e.isSegmentsView&&!e.isLabelView&&!e.isActiveView?(p(),L(te,{key:2,icon:"i-lucide-trash",color:"slate",size:"sm",variant:"ghost",onClick:a[3]||(a[3]=o=>n("deleteSegment"))})):$("",!0),S(I6e,{"active-sort":e.activeSort,"active-ordering":e.activeOrdering,"onUpdate:sort":a[4]||(a[4]=o=>n("update:sort",o))},null,8,["active-sort","active-ordering"]),S(N6e,{onAdd:a[5]||(a[5]=o=>n("add")),onImport:a[6]||(a[6]=o=>n("import")),onExport:a[7]||(a[7]=o=>n("export"))})]),a[8]||(a[8]=m("div",{class:"w-px h-4 bg-n-strong"},null,-1)),S(Jp,null,{trigger:Y(({toggle:o})=>[S(te,{label:e.buttonLabel,size:"sm",onClick:o},null,8,["label","onClick"])]),_:1})])])])]))}},B6e={class:"absolute z-50 w-full mt-1 transition-opacity duration-200 border rounded-md shadow-lg bg-n-solid-1 border-n-strong"},U6e={class:"relative border-b border-n-strong"},F6e=["value","placeholder"],G6e=["aria-multiselectable"],V6e=["aria-selected","onClick"],H6e={key:0,class:"flex-shrink-0 i-lucide-check size-4 text-n-slate-11"},W6e={key:0,class:"px-3 py-2 text-sm text-n-slate-11"},kC={__name:"ComboBoxDropdown",props:jt({open:{type:Boolean,required:!0},options:{type:Array,required:!0},searchPlaceholder:{type:String,default:""},emptyState:{type:String,default:""},multiple:{type:Boolean,default:!1},selectedValues:{type:[String,Number,Array],default:()=>[]}},{searchValue:{type:String,default:""},searchValueModifiers:{}}),emits:jt(["select","search"],["update:searchValue"]),setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=be(),i=Xt(e,"searchValue"),l=j(null),r=u=>Array.isArray(s.selectedValues)?s.selectedValues.includes(u.value):u.value===s.selectedValues,c=u=>{i.value=u.target.value,a("search",u.target.value)};return t({focus:()=>{var u;return(u=l.value)==null?void 0:u.focus()}}),(u,d)=>re((p(),E("div",B6e,[m("div",U6e,[d[0]||(d[0]=m("span",{class:"absolute i-lucide-search top-2.5 size-4 left-3"},null,-1)),m("input",{ref_key:"searchInput",ref:l,value:i.value,type:"search",placeholder:e.searchPlaceholder||C(o)("COMBOBOX.SEARCH_PLACEHOLDER"),class:"reset-base w-full py-2 pl-10 pr-2 text-sm focus:outline-none border-none rounded-t-md bg-n-solid-1 text-n-slate-12",onInput:c},null,40,F6e)]),m("ul",{class:"py-1 mb-0 overflow-auto max-h-60",role:"listbox","aria-multiselectable":e.multiple},[(p(!0),E(ue,null,Ae(e.options,h=>(p(),E("li",{key:h.value,class:ae(["flex items-center justify-between w-full gap-2 px-3 py-2 text-sm transition-colors duration-150 cursor-pointer hover:bg-n-alpha-2",{"bg-n-alpha-2":r(h)}]),role:"option","aria-selected":r(h),onClick:g=>a("select",h)},[m("span",{class:ae([{"font-medium":r(h)},"text-n-slate-12"])},I(h.label),3),r(h)?(p(),E("span",H6e)):$("",!0)],10,V6e))),128)),e.options.length===0?(p(),E("li",W6e,I(e.emptyState||C(o)("COMBOBOX.EMPTY_STATE")),1)):$("",!0)],8,G6e)],512)),[[rn,e.open]])}},Ha={__name:"ComboBox",props:{options:{type:Array,required:!0,validator:e=>e.every(t=>"value"in t&&"label"in t)},placeholder:{type:String,default:""},modelValue:{type:[String,Number],default:""},disabled:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:""},emptyState:{type:String,default:""},message:{type:String,default:""},hasError:{type:Boolean,default:!1},useApiResults:{type:Boolean,default:!1}},emits:["update:modelValue","search"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=j(n.modelValue),i=j(!1),l=j(""),r=j(null),c=j(null),u=y(()=>{if(n.useApiResults&&l.value)return n.options;const b=l.value.toLowerCase();return n.options.filter(A=>A.label.toLowerCase().includes(b))}),d=y(()=>n.placeholder||a("COMBOBOX.PLACEHOLDER")),h=y(()=>{const b=n.options.find(A=>A.value===o.value);return(b==null?void 0:b.label)??d.value}),g=b=>{o.value=b.value,s("update:modelValue",b.value),i.value=!1,l.value=""},f=()=>{n.disabled||(i.value=!i.value,i.value&&(l.value="",Wt(()=>{var b;return(b=r.value)==null?void 0:b.focus()})))};return it(()=>n.modelValue,b=>{o.value=b}),(b,A)=>(p(),E("div",{ref_key:"comboboxRef",ref:c,class:ae(["relative w-full min-w-0",{"cursor-not-allowed":e.disabled,"group/combobox":!e.disabled}]),onClick:A[3]||(A[3]=Ve(()=>{},["prevent"]))},[S(C(ep),{onTrigger:A[2]||(A[2]=v=>i.value=!1)},{default:Y(()=>[S(te,{variant:"outline",color:e.hasError&&!i.value?"ruby":i.value?"blue":"slate",label:h.value,"trailing-icon":"",disabled:e.disabled,"no-animation":"",class:ae(["justify-between w-full !px-3 !py-2.5 text-n-slate-12 font-normal group-hover/combobox:border-n-slate-6 focus:outline-n-brand",{focused:i.value,"[&:not(.focused)]:dark:outline-n-weak [&:not(.focused)]:hover:enabled:outline-n-slate-6 [&:not(.focused)]:dark:hover:enabled:outline-n-slate-6":!e.hasError}]),icon:i.value?"i-lucide-chevron-up":"i-lucide-chevron-down",onClick:f},null,8,["color","label","disabled","class","icon"]),S(kC,{ref_key:"dropdownRef",ref:r,"search-value":l.value,"onUpdate:searchValue":A[0]||(A[0]=v=>l.value=v),open:i.value,options:u.value,"search-placeholder":e.searchPlaceholder,"empty-state":e.emptyState,"selected-values":o.value,onSearch:A[1]||(A[1]=v=>s("search",v)),onSelect:g},null,8,["search-value","open","options","search-placeholder","empty-state","selected-values"]),e.message?(p(),E("p",{key:0,class:ae(["mt-2 mb-0 text-xs truncate transition-all duration-500 ease-in-out",{"text-n-ruby-9":e.hasError,"text-n-slate-11":!e.hasError}])},I(e.message),3)):$("",!0)]),_:1})],2))}},z6e={class:"flex items-center flex-shrink-0"},Y6e={key:0,class:"inline-flex justify-center text-sm whitespace-nowrap"},j6e={key:0,class:"text-sm left-[38px] top-2.5 text-n-slate-11 ltr:!pl-1 rtl:!pr-1"},K6e={key:0,class:"min-w-0 mt-1 mb-0 text-xs truncate transition-all duration-500 ease-in-out text-n-ruby-9 dark:text-n-ruby-9"},X6e={__name:"PhoneNumberInput",props:jt({placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},showBorder:{type:Boolean,default:!0}},{modelValue:{type:[String,Number],default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,n=Xt(e,"modelValue"),{t:s}=be(),a=j(!1),o=j(""),i=j(wS()),l=j(xS()),r=j(""),c={phoneNumber:{minLength:en(2),numeric:hO},activeDialCode:{required:Ye,validDialCode:R=>Fa.some(O=>O.dial_code===R)}},u=bt(c,{phoneNumber:r,activeDialCode:l}),d=y(()=>u.value.$invalid),h=y(()=>Fa.map(R=>({value:R.id,label:R.name,dialCode:R.dial_code,emoji:R.emoji,isSelected:String(i.value)===String(R.id),action:"phoneNumberInput"}))),g=y(()=>{const R=o.value.toLowerCase();return h.value.filter(({label:O,dialCode:x,value:w})=>[O,x,w].some(D=>D.toLowerCase().includes(R)))}),f=y(()=>i.value?h.value.find(R=>R.value===i.value):""),b=y(()=>{const R="outline-n-ruby-8 dark:outline-n-ruby-8 hover:outline-n-ruby-9 dark:hover:outline-n-ruby-9 disabled:outline-n-ruby-8 dark:disabled:outline-n-ruby-8",O="has-[:focus]:outline-n-brand dark:has-[:focus]:outline-n-brand";return t.showBorder?d.value?R:`${O} outline-n-weak dark:outline-n-weak hover:outline-n-slate-6 dark:hover:outline-n-slate-6 disabled:outline-n-weak dark:disabled:outline-n-weak`:d.value?R:`outline-transparent ${O}`}),A=y(()=>u.value.$dirty?u.value.activeDialCode.$invalid?s("PHONE_INPUT.DIAL_CODE_ERROR"):u.value.phoneNumber.$invalid&&s("PHONE_INPUT.ERROR"):""),v=R=>{const O=R?`${l.value}${R}`:"";n.value=O},T=async({value:R,dialCode:O})=>{!R||!a.value||(i.value=R,l.value=O,o.value="",a.value=!1,!u.value.$invalid&&r.value&&v(r.value))},_=()=>{a.value=!a.value},N=()=>{a.value=!1};return it(r,async R=>{await u.value.$touch(),u.value.$invalid||v(R)}),it(n,R=>{const O=Md(R);O&&(O!=null&&O.country&&(i.value=O.country),O!=null&&O.countryCallingCode&&(l.value=`+${O.countryCallingCode}`),r.value=R.replace(`+${O.countryCallingCode}`,""))},{immediate:!0}),(R,O)=>{const x=Qe("on-clickaway");return p(),E("div",null,[re((p(),E("div",{class:ae(["relative flex items-center h-8 transition-all duration-500 ease-in-out outline outline-1 outline-offset-[-1px] rounded-lg bg-n-alpha-black2",[b.value,{"cursor-not-allowed opacity-50":e.disabled}]])},[S(Tt,{modelValue:r.value,"onUpdate:modelValue":O[0]||(O[0]=w=>r.value=w),type:"tel",placeholder:e.placeholder,disabled:e.disabled,"custom-input-class":"!border-0 !outline-none h-8 !py-0.5 !bg-transparent ltr:!pl-1 rtl:!pr-1",class:"w-full !flex-row"},{prefix:Y(()=>{var w;return[m("div",z6e,[S(te,{label:((w=f.value)==null?void 0:w.emoji)||"",color:"slate",size:"sm",icon:f.value?"i-lucide-chevron-down":"i-lucide-globe","trailing-icon":"",disabled:e.disabled,type:"button",class:"!h-[1.875rem] top-1 ltr:ml-px rtl:mr-px !px-2 outline-0 !outline-none !rounded-lg border-0 ltr:!rounded-r-none rtl:!rounded-l-none",onClick:_},{default:Y(()=>{var D;return[f.value?(p(),E("span",Y6e,I((D=f.value)==null?void 0:D.emoji),1)):$("",!0)]}),_:1},8,["label","icon","disabled"]),f.value?(p(),E("span",j6e,I(l.value),1)):$("",!0)])]}),_:1},8,["modelValue","placeholder","disabled"]),a.value?(p(),L(qs,{key:0,"menu-items":g.value,"show-search":"",class:"z-[100] w-48 mt-2 overflow-y-auto ltr:left-0 rtl:right-0 top-full max-h-52",onAction:T},null,8,["menu-items"])):$("",!0)],2)),[[x,()=>N()]]),A.value?(p(),E(ue,{key:0},[A.value?(p(),E("p",K6e,I(A.value),1)):$("",!0)],64)):$("",!0)])}}},q6e={class:"flex flex-col gap-6"},Z6e={class:"flex flex-col items-start gap-2"},Q6e={class:"py-1 text-sm font-medium text-n-slate-12"},J6e={class:"grid w-full grid-cols-1 gap-4 sm:grid-cols-2"},e9e={class:"flex flex-col items-start gap-2"},t9e={class:"py-1 text-sm font-medium text-n-slate-12"},n9e={class:"flex flex-wrap gap-2"},s9e=["onUpdate:modelValue","placeholder","size"],rv={__name:"ContactsForm",props:{contactData:{type:Object,default:null},isDetailsView:{type:Boolean,default:!1},isNewContact:{type:Boolean,default:!1}},emits:["update"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=be(),i={FIRST_NAME:{field:"firstName"},LAST_NAME:{field:"lastName"},EMAIL_ADDRESS:{field:"email"},PHONE_NUMBER:{field:"phoneNumber"},CITY:{field:"additionalAttributes.city"},COUNTRY:{field:"additionalAttributes.countryCode"},BIO:{field:"additionalAttributes.description"},COMPANY_NAME:{field:"additionalAttributes.companyName"}},l={LINKEDIN:"i-ri-linkedin-box-fill",FACEBOOK:"i-ri-facebook-circle-fill",INSTAGRAM:"i-ri-instagram-line",TWITTER:"i-ri-twitter-x-fill",GITHUB:"i-ri-github-fill"},r={id:0,name:"",email:"",firstName:"",lastName:"",phoneNumber:"",additionalAttributes:{description:"",companyName:"",countryCode:"",country:"",city:"",socialProfiles:{facebook:"",github:"",instagram:"",linkedin:"",twitter:""}}},c=gn({...r}),d=bt({firstName:{required:Ye},email:{email:Li}},c),h=y(()=>d.value.$invalid),g=()=>{if(s.isNewContact)return;const{id:w,name:D="",email:M,phoneNumber:P,additionalAttributes:U={}}=s.contactData||{},{firstName:F,lastName:k}=zN(D||""),{description:B="",companyName:V="",countryCode:G="",country:K="",city:se="",socialProfiles:ee={}}=U||{};Object.assign(c,{id:w,name:D,firstName:F,lastName:k,email:M,phoneNumber:P,additionalAttributes:{description:B,companyName:V,countryCode:G,country:K,city:se,socialProfiles:ee}})},f=y(()=>Fa.map(({name:w,id:D})=>({label:w,value:D}))),b=y(()=>Object.keys(i).map(w=>({key:w,placeholder:o(`CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.FORM.${w}.PLACEHOLDER`)}))),A=y(()=>Object.entries(l).map(([w,D])=>({key:w,placeholder:o(`CONTACTS_LAYOUT.CARD.SOCIAL_MEDIA.FORM.${w}.PLACEHOLDER`),icon:D}))),v=w=>{var M;const D=(M=i[w])==null?void 0:M.field;return["firstName","email"].includes(D)},T=w=>{var D;return(D=i[w])==null?void 0:D.field},_=w=>{var M;const D=(M=i[w])==null?void 0:M.field;return D?y({get:()=>{var F,k;if(D==="firstName"||D==="lastName")return((F=c[D])==null?void 0:F.toString())||"";const[P,U]=D.split(".");return((k=U?c[P][U]:c[P])==null?void 0:k.toString())||""},set:async P=>{if(D==="firstName"||D==="lastName")c[D]=P,c.name=`${c.firstName} ${c.lastName}`.trim();else{const[F,k]=D.split(".");k?c[F][k]=P:c[F]=P}if(await d.value.$validate()){const{firstName:F,lastName:k,...B}=c;a("update",B)}}}):null},N=w=>{var D;return v(w)&&((D=d.value[T(w)])!=null&&D.$error)?"error":"info"},R=w=>{const D=Fa.find(M=>M.id===w);c.additionalAttributes.country=(D==null?void 0:D.name)||"",a("update",c)},O=()=>{d.value.$reset()},x=()=>{Object.assign(c,r)};return it(()=>{var w;return(w=s.contactData)==null?void 0:w.id},w=>{w&&g()},{immediate:!0}),t({state:c,resetValidation:O,isFormInvalid:h,resetForm:x}),(w,D)=>(p(),E("div",q6e,[m("div",Z6e,[m("span",Q6e,I(C(o)("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.TITLE")),1),m("div",J6e,[(p(!0),E(ue,null,Ae(b.value,M=>(p(),E(ue,{key:M.key},[M.key==="COUNTRY"?(p(),L(Ha,{key:0,modelValue:c.additionalAttributes.countryCode,"onUpdate:modelValue":[D[0]||(D[0]=P=>c.additionalAttributes.countryCode=P),R],options:f.value,placeholder:M.placeholder,class:ae(["[&>div>button]:h-8",{"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:!outline-transparent":!e.isDetailsView,"[&>div>button]:!bg-n-alpha-black2":e.isDetailsView}])},null,8,["modelValue","options","placeholder","class"])):M.key==="PHONE_NUMBER"?(p(),L(X6e,{key:1,modelValue:_(M.key).value,"onUpdate:modelValue":P=>_(M.key).value=P,placeholder:M.placeholder,"show-border":e.isDetailsView},null,8,["modelValue","onUpdate:modelValue","placeholder","show-border"])):(p(),L(Tt,{key:2,modelValue:_(M.key).value,"onUpdate:modelValue":P=>_(M.key).value=P,placeholder:M.placeholder,"message-type":N(M.key),"custom-input-class":`h-8 !pt-1 !pb-1 ${e.isDetailsView?"":"[&:not(.error,.focus)]:!outline-transparent"}`,class:"w-full",onInput:P=>v(M.key)&&C(d)[T(M.key)].$touch(),onBlur:P=>v(M.key)&&C(d)[T(M.key)].$touch()},null,8,["modelValue","onUpdate:modelValue","placeholder","message-type","custom-input-class","onInput","onBlur"]))],64))),128))])]),m("div",e9e,[m("span",t9e,I(C(o)("CONTACTS_LAYOUT.CARD.SOCIAL_MEDIA.TITLE")),1),m("div",n9e,[(p(!0),E(ue,null,Ae(A.value,M=>(p(),E("div",{key:M.key,class:ae(["flex items-center h-8 gap-2 px-2 rounded-lg",{"bg-n-alpha-2 dark:bg-n-solid-2":e.isDetailsView,"bg-n-alpha-2 dark:bg-n-solid-3":!e.isDetailsView}])},[S(dt,{icon:M.icon,class:"flex-shrink-0 text-n-slate-11 size-4"},null,8,["icon"]),re(m("input",{"onUpdate:modelValue":P=>c.additionalAttributes.socialProfiles[M.key.toLowerCase()]=P,class:"w-auto min-w-[100px] text-sm bg-transparent outline-none reset-base text-n-slate-12 dark:text-n-slate-12 placeholder:text-n-slate-10 dark:placeholder:text-n-slate-10",placeholder:M.placeholder,size:M.placeholder.length,onInput:D[1]||(D[1]=P=>a("update",c))},null,40,s9e),[[gt,c.additionalAttributes.socialProfiles[M.key.toLowerCase()]]])],2))),128))])])]))}},a9e={class:"flex items-center justify-between w-full gap-3"},BC={__name:"CreateNewContactDialog",emits:["create"],setup(e,{expose:t,emit:n}){const s=n,{t:a}=be(),o=j(null),i=j(null),l=j(null),r=_e("contacts/getUIFlags"),c=y(()=>r.value.isCreating),u=f=>{l.value=f},d=async()=>{l.value&&s("create",l.value)},h=()=>{var f;(f=i.value)==null||f.resetForm(),o.value.close()},g=()=>{o.value.close()};return t({dialogRef:o,contactsFormRef:i,onSuccess:h}),(f,b)=>(p(),L($n,{ref_key:"dialogRef",ref:o,width:"3xl",onConfirm:d},{footer:Y(()=>{var A;return[m("div",a9e,[S(te,{label:C(a)("DIALOG.BUTTONS.CANCEL"),variant:"link",type:"reset",class:"h-10 hover:!no-underline hover:text-n-brand",onClick:g},null,8,["label"]),S(te,{type:"submit",label:C(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.SAVE_CONTACT"),color:"blue",disabled:(A=i.value)==null?void 0:A.isFormInvalid,"is-loading":c.value},null,8,["label","disabled","is-loading"])])]}),default:Y(()=>[S(rv,{ref_key:"contactsFormRef",ref:i,"is-new-contact":"",onUpdate:u},null,512)]),_:1},512))}},o9e={__name:"ContactExportDialog",emits:["export"],setup(e,{expose:t,emit:n}){const s=n,{t:a}=be(),o=wt(),i=j(null),l=_e("customViews/getContactCustomViews"),r=_e("contacts/getAppliedContactFilters"),c=_e("contacts/getUIFlags"),u=y(()=>c.value.isExporting),d=y(()=>o.params.segmentId),h=y(()=>d.value?l.value.find(b=>b.id===Number(d.value)):void 0),g=async()=>{let b={payload:[]};d.value&&h.value?b=h.value.query:Object.keys(r.value).length>0&&(b=yo(r.value)),s("export",{...b,label:o.params.label||""})},f=async()=>{var b;await g(),(b=i.value)==null||b.close()};return t({dialogRef:i}),(b,A)=>(p(),L($n,{ref_key:"dialogRef",ref:i,title:C(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.TITLE"),description:C(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.DESCRIPTION"),"confirm-button-label":C(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.CONFIRM"),"is-loading":u.value,"disable-confirm-button":u.value,onConfirm:f},null,8,["title","description","confirm-button-label","is-loading","disable-confirm-button"]))}},i9e={class:"mb-0 text-sm text-n-slate-11"},l9e={class:"flex flex-col gap-2"},r9e={class:"flex items-center gap-2"},c9e={class:"text-sm text-n-slate-12 whitespace-nowrap"},u9e={class:"flex items-center justify-between w-full gap-2"},d9e={key:0,class:"text-sm text-n-slate-12"},p9e={key:2,class:"flex items-center gap-1"},m9e="/downloads/import-contacts-sample.csv",h9e={__name:"ContactImportDialog",emits:["import"],setup(e,{expose:t,emit:n}){const s=n,{t:a}=be(),o=_e("contacts/getUIFlags"),i=y(()=>o.value.isImporting),l=j(null),r=j(null),c=j(null),u=j(""),d=()=>{var A;return(A=r.value)==null?void 0:A.click()},h=A=>{const v=A.lastIndexOf("."),T=A.slice(v),_=A.slice(0,v);return _.length>20?`${_.slice(0,20)}...${T}`:A},g=()=>{var v;const A=(v=r.value)==null?void 0:v.files[0];c.value=A,u.value=A?h(A.name):""},f=()=>{c.value=null,r.value&&(r.value.value=null),u.value=""},b=async()=>{c.value&&s("import",c.value)};return t({dialogRef:l}),(A,v)=>(p(),L($n,{ref_key:"dialogRef",ref:l,title:C(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.TITLE"),"confirm-button-label":C(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.IMPORT"),"is-loading":i.value,"disable-confirm-button":i.value,onConfirm:b},{description:Y(()=>[m("p",i9e,[xe(I(C(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.DESCRIPTION"))+" ",1),m("a",{href:m9e,target:"_blank",rel:"noopener noreferrer",download:"import-contacts-sample.csv",class:"text-n-blue-text"},I(C(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.DOWNLOAD_LABEL")),1)])]),default:Y(()=>[m("div",l9e,[m("div",r9e,[m("label",c9e,I(C(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.LABEL")),1),m("div",u9e,[c.value?(p(),E("span",d9e,I(u.value),1)):$("",!0),c.value?(p(),E("div",p9e,[S(te,{label:C(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.CHANGE"),color:"slate",variant:"ghost",size:"sm",onClick:d},null,8,["label"]),v[0]||(v[0]=m("div",{class:"w-px h-3 bg-n-strong"},null,-1)),S(te,{icon:"i-lucide-trash",color:"slate",variant:"ghost",size:"sm",onClick:f})])):(p(),L(te,{key:1,label:C(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.CHOOSE_FILE"),icon:"i-lucide-upload",color:"slate",variant:"ghost",size:"sm",class:"!w-fit",onClick:d},null,8,["label"]))])])]),m("input",{ref_key:"fileInput",ref:r,type:"file",accept:"text/csv",class:"hidden",onChange:g},null,544)]),_:1},8,["title","confirm-button-label","is-loading","disable-confirm-button"]))}},f9e=1,g9e={__name:"CreateSegmentDialog",emits:["create"],setup(e,{expose:t,emit:n}){const s=n,{t:a}=be(),o=_e("customViews/getUIFlags"),i=y(()=>o.value.isCreating),l=j(null),r=gn({name:""}),u=bt({name:{required:Ye}},r),d=async()=>{await u.value.$validate()&&(s("create",{name:r.name,filter_type:f9e}),r.name="",u.value.$reset())};return t({dialogRef:l}),(h,g)=>(p(),L($n,{ref_key:"dialogRef",ref:l,title:C(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.TITLE"),"confirm-button-label":C(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.CONFIRM"),"is-loading":i.value,"disable-confirm-button":i.value,onConfirm:d},{default:Y(()=>[S(Tt,{modelValue:r.name,"onUpdate:modelValue":g[0]||(g[0]=f=>r.name=f),label:C(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.LABEL"),placeholder:C(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.PLACEHOLDER"),message:C(u).name.$error?C(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.ERROR"):"","message-type":C(u).name.$error?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"])]),_:1},8,["title","confirm-button-label","is-loading","disable-confirm-button"]))}},_9e="contact",v9e={__name:"DeleteSegmentDialog",emits:["delete"],setup(e,{expose:t,emit:n}){const s=n,{t:a}=be(),o=_e("customViews/getUIFlags"),i=y(()=>o.value.isDeleting),l=j(null),r=async()=>{s("delete",{filterType:_9e})};return t({dialogRef:l}),(c,u)=>(p(),L($n,{ref_key:"dialogRef",ref:l,type:"alert",title:C(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.TITLE"),description:C(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.DESCRIPTION"),"confirm-button-label":C(a)("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.CONFIRM"),"is-loading":i.value,"disable-confirm-button":i.value,onConfirm:r},null,8,["title","description","confirm-button-label","is-loading","disable-confirm-button"]))}};function E9e(){const{t:e}=be(),t=_e("attributes/getContactAttributes"),n=_e("labels/getLabels"),{equalityOperators:s,containmentOperators:a,dateOperators:o,getOperatorTypes:i}=AI(),l=y(()=>yI(t.value,i,"contact"));return{filterTypes:y(()=>{var c;return[{attributeKey:Kn.NAME,value:Kn.NAME,attributeName:e("CONTACTS_LAYOUT.FILTER.NAME"),label:e("CONTACTS_LAYOUT.FILTER.NAME"),inputType:"plainText",dataType:"text",filterOperators:s.value,attributeModel:"standard"},{attributeKey:Kn.EMAIL,value:Kn.EMAIL,attributeName:e("CONTACTS_LAYOUT.FILTER.EMAIL"),label:e("CONTACTS_LAYOUT.FILTER.EMAIL"),inputType:"plainText",dataType:"text",filterOperators:a.value,attributeModel:"standard"},{attributeKey:Kn.PHONE_NUMBER,value:Kn.PHONE_NUMBER,attributeName:e("CONTACTS_LAYOUT.FILTER.PHONE_NUMBER"),label:e("CONTACTS_LAYOUT.FILTER.PHONE_NUMBER"),inputType:"plainText",dataType:"text",filterOperators:a.value,attributeModel:"standard"},{attributeKey:Kn.IDENTIFIER,value:Kn.IDENTIFIER,attributeName:e("CONTACTS_LAYOUT.FILTER.IDENTIFIER"),label:e("CONTACTS_LAYOUT.FILTER.IDENTIFIER"),inputType:"plainText",dataType:"number",filterOperators:s.value,attributeModel:"standard"},{attributeKey:Kn.COUNTRY_CODE,value:Kn.COUNTRY_CODE,attributeName:e("FILTER.ATTRIBUTES.COUNTRY_NAME"),label:e("FILTER.ATTRIBUTES.COUNTRY_NAME"),inputType:"searchSelect",options:Fa,dataType:"number",filterOperators:s.value,attributeModel:"additional"},{attributeKey:Kn.CITY,value:Kn.CITY,attributeName:e("CONTACTS_LAYOUT.FILTER.CITY"),label:e("CONTACTS_LAYOUT.FILTER.CITY"),inputType:"plainText",dataType:"text",filterOperators:a.value,attributeModel:"standard"},{attributeKey:Kn.CREATED_AT,value:Kn.CREATED_AT,attributeName:e("CONTACTS_LAYOUT.FILTER.CREATED_AT"),label:e("CONTACTS_LAYOUT.FILTER.CREATED_AT"),inputType:"date",dataType:"text",filterOperators:o.value,attributeModel:"standard"},{attributeKey:Kn.LAST_ACTIVITY_AT,value:Kn.LAST_ACTIVITY_AT,attributeName:e("CONTACTS_LAYOUT.FILTER.LAST_ACTIVITY"),label:e("CONTACTS_LAYOUT.FILTER.LAST_ACTIVITY"),inputType:"date",dataType:"text",filterOperators:o.value,attributeModel:"standard"},{attributeKey:Kn.REFERER,value:Kn.REFERER,attributeName:e("CONTACTS_LAYOUT.FILTER.REFERER_LINK"),label:e("CONTACTS_LAYOUT.FILTER.REFERER_LINK"),inputType:"plainText",dataType:"text",filterOperators:a.value,attributeModel:"standard"},{attributeKey:Kn.BLOCKED,value:Kn.BLOCKED,attributeName:e("CONTACTS_LAYOUT.FILTER.BLOCKED"),label:e("CONTACTS_LAYOUT.FILTER.BLOCKED"),inputType:"searchSelect",options:[{id:"true",name:e("CONTACTS_LAYOUT.FILTER.BLOCKED_TRUE")},{id:"false",name:e("CONTACTS_LAYOUT.FILTER.BLOCKED_FALSE")}],dataType:"text",filterOperators:s.value,attributeModel:"standard"},{attributeKey:Kn.LABELS,value:Kn.LABELS,attributeName:e("CONTACTS_FILTER.ATTRIBUTES.LABELS"),label:e("CONTACTS_FILTER.ATTRIBUTES.LABELS"),inputType:"multiSelect",options:(c=n.value)==null?void 0:c.map(u=>({id:u.title,name:u.title})),dataType:"text",filterOperators:s.value,attributeModel:"standard"},...l.value]})}}const b9e={class:"z-40 max-w-3xl min-w-96 lg:w-[750px] overflow-visible w-full border border-n-weak bg-n-alpha-3 backdrop-blur-[100px] shadow-lg rounded-xl p-6 grid gap-6"},T9e={class:"text-base font-medium leading-6 text-n-slate-12"},S9e={key:0},A9e={class:"pb-6 border-b border-n-weak"},y9e={class:"grid gap-4 list-none"},I9e={class:"flex justify-between gap-2"},C9e={class:"flex gap-2 flex-shrink-0"},N9e={__name:"ContactsFilter",props:jt({isSegmentView:{type:Boolean,default:!1},segmentName:{type:String,default:""}},{modelValue:{type:Array,default:[]},modelModifiers:{}}),emits:jt(["applyFilter","updateSegment","close","clearFilters"],["update:modelValue"]),setup(e,{emit:t}){const n=e,s=t,{filterTypes:a}=E9e(),o=Xt(e,"modelValue"),i=j(n.segmentName),l={attributeKey:"name",filterOperator:"equal_to",values:"",queryOperator:"and",attributeModel:"standard"},{t:r}=be(),c=rt(),u=()=>{s("clearFilters"),o.value=[{...l}]},d=_=>{o.value.length===1?u():o.value.splice(_,1)},h=()=>{o.value.push({...l})},g=Ss("conditionsRef"),f=()=>g.value.every(_=>_.validate()),b=()=>{f()&&s("updateSegment",o.value,i.value)};function A(){f()&&(c.dispatch("contacts/setContactFilters",Ts(JSON.parse(JSON.stringify(o.value)))),s("applyFilter",o.value),zt(gl.APPLY_FILTER,{appliedFilters:o.value.map(_=>({key:_.attributeKey,operator:_.filterOperator,queryOperator:_.queryOperator}))}))}const v=y(()=>n.isSegmentView?r("CONTACTS_LAYOUT.FILTER.EDIT_SEGMENT"):r("CONTACTS_LAYOUT.FILTER.TITLE"));Ar(()=>s("close"));const T=[()=>s("close"),{ignore:["#toggleContactsFilterButton"]}];return(_,N)=>re((p(),E("div",b9e,[m("h3",T9e,I(v.value),1),n.isSegmentView?(p(),E("div",S9e,[m("div",A9e,[S(Tt,{modelValue:i.value,"onUpdate:modelValue":N[0]||(N[0]=R=>i.value=R),label:_.$t("CONTACTS_LAYOUT.FILTER.SEGMENT.LABEL"),placeholder:C(r)("CONTACTS_LAYOUT.FILTER.SEGMENT.INPUT_PLACEHOLDER")},null,8,["modelValue","label","placeholder"])])])):$("",!0),m("ul",y9e,[(p(!0),E(ue,null,Ae(o.value,(R,O)=>(p(),E(ue,{key:R.id},[O===0?(p(),L(Zd,{ref_for:!0,ref_key:"conditionsRef",ref:g,key:`filter-${R.attributeKey}-0`,"attribute-key":R.attributeKey,"onUpdate:attributeKey":x=>R.attributeKey=x,"filter-operator":R.filterOperator,"onUpdate:filterOperator":x=>R.filterOperator=x,values:R.values,"onUpdate:values":x=>R.values=x,"filter-types":C(a),"show-query-operator":!1,onRemove:x=>d(O)},null,8,["attribute-key","onUpdate:attributeKey","filter-operator","onUpdate:filterOperator","values","onUpdate:values","filter-types","onRemove"])):(p(),L(Zd,{key:`filter-${R.attributeKey}-${O}`,ref_for:!0,ref_key:"conditionsRef",ref:g,"attribute-key":R.attributeKey,"onUpdate:attributeKey":x=>R.attributeKey=x,"filter-operator":R.filterOperator,"onUpdate:filterOperator":x=>R.filterOperator=x,"query-operator":o.value[O-1].queryOperator,"onUpdate:queryOperator":x=>o.value[O-1].queryOperator=x,values:R.values,"onUpdate:values":x=>R.values=x,"show-query-operator":"","filter-types":C(a),onRemove:x=>d(O)},null,8,["attribute-key","onUpdate:attributeKey","filter-operator","onUpdate:filterOperator","query-operator","onUpdate:queryOperator","values","onUpdate:values","filter-types","onRemove"]))],64))),128))]),m("div",I9e,[S(te,{sm:"",ghost:"",blue:"",class:"flex-shrink-0",onClick:h},{default:Y(()=>[xe(I(_.$t("CONTACTS_LAYOUT.FILTER.BUTTONS.ADD_FILTER")),1)]),_:1}),m("div",C9e,[S(te,{sm:"",faded:"",slate:"",onClick:u},{default:Y(()=>[xe(I(_.$t("CONTACTS_LAYOUT.FILTER.BUTTONS.CLEAR_FILTERS")),1)]),_:1}),e.isSegmentView?(p(),L(te,{key:0,sm:"",solid:"",blue:"",disabled:!i.value,onClick:b},{default:Y(()=>[xe(I(_.$t("CONTACTS_LAYOUT.FILTER.BUTTONS.UPDATE_SEGMENT")),1)]),_:1},8,["disabled"])):(p(),L(te,{key:1,sm:"",solid:"",blue:"",onClick:A},{default:Y(()=>[xe(I(_.$t("CONTACTS_LAYOUT.FILTER.BUTTONS.APPLY_FILTERS")),1)]),_:1}))])])])),[[C(ms),T]])}},O9e={class:"absolute mt-1 ltr:-right-52 rtl:-left-52 sm:ltr:right-0 sm:rtl:left-0 top-full"},R9e={__name:"ContactListHeaderWrapper",props:{showSearch:{type:Boolean,default:!0},searchValue:{type:String,default:""},activeSort:{type:String,default:"last_activity_at"},activeOrdering:{type:String,default:""},headerTitle:{type:String,default:""},segmentsId:{type:[String,Number],default:0},activeSegment:{type:Object,default:null},hasAppliedFilters:{type:Boolean,default:!1},isLabelView:{type:Boolean,default:!1},isActiveView:{type:Boolean,default:!1}},emits:["update:sort","search","applyFilter","clearFilters"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=be(),i=rt(),l=Ft(),r=j(null),c=j(null),u=j(null),d=j(null),h=j(null),g=j(!1),f=j([]),b=j({}),A=_e("contacts/getAppliedContactFiltersV4"),v=_e("attributes/getContactAttributes"),T=_e("labels/getLabels"),_=y(()=>s.activeSegment&&s.segmentsId!==0),N=y(()=>{var z;return(z=s.activeSegment)==null?void 0:z.name}),R=async()=>{var z,H;await((z=r.value)==null?void 0:z.contactsFormRef.resetValidation()),(H=r.value)==null||H.dialogRef.open()},O=()=>{var z;return(z=u.value)==null?void 0:z.dialogRef.open()},x=()=>{var z;return(z=c.value)==null?void 0:z.dialogRef.open()},w=()=>{var z;return(z=d.value)==null?void 0:z.dialogRef.open()},D=()=>{var z;return(z=h.value)==null?void 0:z.dialogRef.open()},M=async z=>{var H;try{await i.dispatch("contacts/create",z),(H=r.value)==null||H.onSuccess(),ne(o("CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION.SUCCESS_MESSAGE"))}catch(q){const J="CONTACTS_LAYOUT.HEADER.ACTIONS.CONTACT_CREATION";q instanceof Jd?q.data.includes("email")?ne(o(`${J}.EMAIL_ADDRESS_DUPLICATE`)):q.data.includes("phone_number")&&ne(o(`${J}.PHONE_NUMBER_DUPLICATE`)):q instanceof eu?ne(q.data):ne(o(`${J}.ERROR_MESSAGE`))}},P=async z=>{var H;try{await i.dispatch("contacts/import",z),(H=u.value)==null||H.dialogRef.close(),ne(o("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.SUCCESS_MESSAGE")),zt(gl.IMPORT_SUCCESS)}catch(q){ne(q.message??o("CONTACTS_LAYOUT.HEADER.ACTIONS.IMPORT_CONTACT.ERROR_MESSAGE")),zt(gl.IMPORT_FAILURE)}},U=async z=>{try{await i.dispatch("contacts/export",z),ne(o("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.SUCCESS_MESSAGE"))}catch(H){ne(H.message||o("CONTACTS_LAYOUT.HEADER.ACTIONS.EXPORT_CONTACT.ERROR_MESSAGE"))}},F=async z=>{var H,q;try{const J={...z,query:b.value},de=await i.dispatch("customViews/create",J);(H=d.value)==null||H.dialogRef.close(),ne(o("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.SUCCESS_MESSAGE"));const Te=(q=de==null?void 0:de.data)==null?void 0:q.id;if(!Te)return;l.push({name:"contacts_dashboard_segments_index",params:{segmentId:Te},query:{page:1}})}catch{ne(o("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.CREATE_SEGMENT.ERROR_MESSAGE"))}},k=async z=>{var H;try{await i.dispatch("customViews/delete",{id:Number(s.segmentsId),...z}),l.push({name:"contacts_dashboard_index",query:{page:1}}),(H=h.value)==null||H.dialogRef.close(),ne(o("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.SUCCESS_MESSAGE"))}catch{ne(o("CONTACTS_LAYOUT.HEADER.ACTIONS.FILTERS.DELETE_SEGMENT.ERROR_MESSAGE"))}},B=()=>{g.value=!1,f.value=[]},V=async()=>{a("clearFilters")},G=async z=>{z=Ts(z),b.value=yo(z),a("applyFilter",yo(z)),g.value=!1},K=async(z,H)=>{z=Ts(z);const q={...s.activeSegment,name:H,query:yo(z)};await i.dispatch("customViews/update",q),B()},se=()=>({countries:Fa,filterTypes:Rye,allCustomAttributes:Ts(v.value),labels:T.value||[]}),ee=z=>{var J,de;const H=(de=(J=C(z))==null?void 0:J.query)==null?void 0:de.payload;if(!Array.isArray(H))return;const q=H.map(Te=>{const ce=so(Te),Ne=Array.isArray(ce.values)?LI(Ts(Te),se()):[];return{attributeKey:ce.attributeKey,attributeModel:ce.attributeModel,customAttributeType:ce.customAttributeType,filterOperator:ce.filterOperator,queryOperator:ce.queryOperator??"and",values:Ne}});f.value=[...f.value,...q]},X=()=>{f.value=[],_.value?ee(s.activeSegment):f.value=s.hasAppliedFilters?[...A.value]:[{attributeKey:"name",filterOperator:"equal_to",values:"",queryOperator:"and",attributeModel:"standard"}],g.value=!0};return t({onToggleFilters:X}),(z,H)=>(p(),E(ue,null,[S(k6e,{"show-search":e.showSearch,"search-value":e.searchValue,"active-sort":e.activeSort,"active-ordering":e.activeOrdering,"header-title":e.headerTitle,"is-segments-view":_.value,"is-label-view":e.isLabelView,"is-active-view":e.isActiveView,"has-active-filters":e.hasAppliedFilters,"button-label":C(o)("CONTACTS_LAYOUT.HEADER.MESSAGE_BUTTON"),onSearch:H[1]||(H[1]=q=>a("search",q)),"onUpdate:sort":H[2]||(H[2]=q=>a("update:sort",q)),onAdd:R,onImport:O,onExport:x,onFilter:X,onCreateSegment:w,onDeleteSegment:D},{filter:Y(()=>[m("div",O9e,[g.value?(p(),L(N9e,{key:0,modelValue:f.value,"onUpdate:modelValue":H[0]||(H[0]=q=>f.value=q),"segment-name":N.value,"is-segment-view":_.value,onApplyFilter:G,onUpdateSegment:K,onClose:B,onClearFilters:V},null,8,["modelValue","segment-name","is-segment-view"])):$("",!0)])]),_:1},8,["show-search","search-value","active-sort","active-ordering","header-title","is-segments-view","is-label-view","is-active-view","has-active-filters","button-label"]),S(BC,{ref_key:"createNewContactDialogRef",ref:r,onCreate:M},null,512),S(o9e,{ref_key:"contactExportDialogRef",ref:c,onExport:U},null,512),S(h9e,{ref_key:"contactImportDialogRef",ref:u,onImport:P},null,512),S(g9e,{ref_key:"createSegmentDialogRef",ref:d,onCreate:F},null,512),S(v9e,{ref_key:"deleteSegmentDialogRef",ref:h,onDelete:k},null,512)],64))}},x9e={class:"flex flex-wrap items-center w-full gap-2 mx-auto"},w9e={key:0,class:"inline-flex items-center gap-2 h-7"},$9e={class:"lowercase whitespace-nowrap first-letter:capitalize text-n-slate-12"},M9e={class:"px-1 text-xs text-n-slate-10 whitespace-nowrap"},L9e=["title"],D9e={key:0,class:"content-center h-full px-1 text-xs font-medium uppercase rounded-lg text-n-slate-10"},P9e={key:1,class:"w-px h-3 rounded-lg bg-n-strong"},k9e={__name:"ActiveFilterPreview",props:{appliedFilters:{type:Array,default:()=>[]},maxVisibleFilters:{type:Number,default:2},clearButtonLabel:{type:String,default:""},moreFiltersLabel:{type:String,default:""},showClearButton:{type:Boolean,default:!0}},emits:["clearFilters","openFilter"],setup(e,{emit:t}){const n=t,s=i=>!["email"].includes(i),a=i=>({equal_to:"is",not_equal_to:"is not",contains:"contains",does_not_contain:"does not contain",is_present:"is present",is_not_present:"is not present",is_greater_than:"is greater than",is_less_than:"is less than",days_before:"days before"})[i]||Yb(i),o=i=>i?Array.isArray(i)?i.map(l=>(l==null?void 0:l.name)??l).join(", "):(i==null?void 0:i.name)??i:"";return(i,l)=>(p(),E("div",x9e,[(p(!0),E(ue,null,Ae(e.appliedFilters,(r,c)=>(p(),E(ue,{key:c},[c<e.maxVisibleFilters?(p(),E("div",w9e,[m("div",{class:"flex items-center h-full min-w-0 gap-1 px-2 py-1 text-xs border rounded-lg hover:bg-n-solid-2 max-w-72 border-n-weak hover:cursor-pointer",onClick:l[0]||(l[0]=u=>n("openFilter"))},[m("span",$9e,I(C(Yb)(r.attributeKey)),1),m("span",M9e,I(a(r.filterOperator)),1),r.values?(p(),E("span",{key:0,title:o(r.values),class:ae(["lowercase truncate text-n-slate-12",{"first-letter:capitalize":s(r.attributeKey)}])},I(o(r.values)),11,L9e)):$("",!0)]),c<e.maxVisibleFilters-1&&c<e.appliedFilters.length-1?(p(),E("span",D9e,I(r.queryOperator),1)):$("",!0)])):$("",!0)],64))),128)),e.appliedFilters.length>e.maxVisibleFilters?(p(),E("div",{key:0,class:"inline-flex items-center content-center px-1 text-xs rounded-lg text-n-slate-10 hover:text-n-slate-11 h-7 hover:cursor-pointer",onClick:l[1]||(l[1]=r=>n("openFilter"))},I(e.moreFiltersLabel),1)):$("",!0),e.showClearButton?(p(),E("div",P9e)):$("",!0),e.showClearButton?(p(),L(te,{key:2,label:e.clearButtonLabel,size:"xs",class:"!px-1",variant:"ghost",onClick:l[2]||(l[2]=r=>n("clearFilters"))},null,8,["label"])):$("",!0)]))}},B9e={__name:"ContactsActiveFiltersPreview",props:{activeSegment:{type:Object,default:null}},emits:["clearFilters","openFilter"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=wt(),i=_e("contacts/getAppliedContactFiltersV4"),l=y(()=>o.params.segmentId),r=y(()=>{var g,f;const d=(f=(g=n.activeSegment)==null?void 0:g.query)==null?void 0:f.payload;return Array.isArray(d)?d.map(b=>{const A=so(b);return{attributeKey:A.attributeKey,attributeModel:A.attributeModel,customAttributeType:A.customAttributeType,filterOperator:A.filterOperator,queryOperator:A.queryOperator??"and",values:A.values}}):[]}),c=y(()=>n.activeSegment&&l.value!==0),u=y(()=>c.value?r.value:i.value);return(d,h)=>(p(),L(k9e,{"applied-filters":u.value,"max-visible-filters":2,"more-filters-label":C(a)("CONTACTS_LAYOUT.FILTER.ACTIVE_FILTERS.MORE_FILTERS",{count:u.value.length-2}),"clear-button-label":C(a)("CONTACTS_LAYOUT.FILTER.ACTIVE_FILTERS.CLEAR_FILTERS"),"show-clear-button":!c.value,class:"max-w-[60rem] px-6",onOpenFilter:h[0]||(h[0]=g=>s("openFilter")),onClearFilters:h[1]||(h[1]=g=>s("clearFilters"))},null,8,["applied-filters","more-filters-label","clear-button-label","show-clear-button"]))}},U9e={class:"flex justify-between h-12 w-full max-w-[calc(60rem-3px)] outline outline-n-container outline-1 -outline-offset-1 mx-auto bg-n-solid-2 rounded-xl py-2 ltr:pl-4 rtl:pr-4 ltr:pr-3 rtl:pl-3 items-center before:absolute before:inset-x-0 before:-top-4 before:bg-gradient-to-t before:from-n-background before:from-10% before:dark:from-0% before:to-transparent before:h-4 before:pointer-events-none"},F9e={class:"flex items-center gap-3"},G9e={class:"min-w-0 text-sm font-normal line-clamp-1 text-n-slate-11"},V9e={class:"flex items-center gap-2"},H9e={class:"inline-flex items-center gap-2 text-sm text-n-slate-11"},W9e={class:"px-3 tabular-nums py-0.5 bg-n-alpha-black2 rounded-md"},z9e={class:"truncate"},cv={__name:"PaginationFooter",props:{currentPage:{type:Number,required:!0},totalItems:{type:Number,required:!0},itemsPerPage:{type:Number,default:16},currentPageInfo:{type:String,default:""}},emits:["update:currentPage"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=y(()=>Math.ceil(n.totalItems/n.itemsPerPage)),i=y(()=>(n.currentPage-1)*n.itemsPerPage+1),l=y(()=>Math.min(i.value+n.itemsPerPage-1,n.totalItems)),r=y(()=>n.currentPage===1),c=y(()=>n.currentPage===o.value),u=g=>{g>=1&&g<=o.value&&s("update:currentPage",g)},d=y(()=>a(n.currentPageInfo?n.currentPageInfo:"PAGINATION_FOOTER.SHOWING",{startItem:i.value,endItem:l.value,totalItems:n.totalItems})),h=y(()=>a("PAGINATION_FOOTER.CURRENT_PAGE_INFO",{currentPage:"",totalPages:o.value}));return(g,f)=>(p(),E("div",U9e,[m("div",F9e,[m("span",G9e,I(d.value),1)]),m("div",V9e,[S(te,{icon:"i-lucide-chevrons-left",variant:"ghost",size:"sm",color:"slate",class:"!w-8 !h-6",disabled:r.value,onClick:f[0]||(f[0]=b=>u(1))},null,8,["disabled"]),S(te,{icon:"i-lucide-chevron-left",variant:"ghost",color:"slate",size:"sm",class:"!w-8 !h-6",disabled:r.value,onClick:f[1]||(f[1]=b=>u(e.currentPage-1))},null,8,["disabled"]),m("div",H9e,[m("span",W9e,I(e.currentPage),1),m("span",z9e,I(h.value),1)]),S(te,{icon:"i-lucide-chevron-right",variant:"ghost",color:"slate",size:"sm",class:"!w-8 !h-6",disabled:c.value,onClick:f[2]||(f[2]=b=>u(e.currentPage+1))},null,8,["disabled"]),S(te,{icon:"i-lucide-chevrons-right",variant:"ghost",color:"slate",size:"sm",class:"!w-8 !h-6",disabled:c.value,onClick:f[3]||(f[3]=b=>u(o.value))},null,8,["disabled"])])]))}},Y9e={class:"flex w-full h-full gap-4 overflow-hidden justify-evenly bg-n-background"},j9e={class:"flex flex-col w-full h-full transition-all duration-300"},K9e={class:"flex-1 overflow-y-auto"},X9e={class:"w-full mx-auto max-w-[60rem]"},q9e={key:0,class:"sticky bottom-0 z-0 px-4 pb-4"},Z9e={__name:"ContactsListLayout",props:{searchValue:{type:String,default:""},headerTitle:{type:String,default:""},showPaginationFooter:{type:Boolean,default:!0},currentPage:{type:Number,default:1},totalItems:{type:Number,default:100},itemsPerPage:{type:Number,default:15},activeSort:{type:String,default:""},activeOrdering:{type:String,default:""},activeSegment:{type:Object,default:null},segmentsId:{type:[String,Number],default:0},hasAppliedFilters:{type:Boolean,default:!1},isFetchingList:{type:Boolean,default:!1}},emits:["update:currentPage","update:sort","search","applyFilter","clearFilters"],setup(e,{emit:t}){const n=e,s=t,a=wt(),o=j(null),i=y(()=>a.name!=="contacts_dashboard_segments_index"),l=y(()=>a.name==="contacts_dashboard_active"),r=y(()=>a.name==="contacts_dashboard_labels_index"),c=y(()=>(n.hasAppliedFilters||!i.value)&&!n.isFetchingList&&!r.value&&!l.value),u=h=>{s("update:currentPage",h)},d=()=>{var h;(h=o.value)==null||h.onToggleFilters()};return(h,g)=>(p(),E("section",Y9e,[m("div",j9e,[S(R9e,{ref_key:"contactListHeaderWrapper",ref:o,"show-search":i.value&&!l.value,"search-value":e.searchValue,"active-sort":e.activeSort,"active-ordering":e.activeOrdering,"header-title":e.headerTitle,"active-segment":e.activeSegment,"segments-id":e.segmentsId,"has-applied-filters":e.hasAppliedFilters,"is-label-view":r.value,"is-active-view":l.value,"onUpdate:sort":g[0]||(g[0]=f=>s("update:sort",f)),onSearch:g[1]||(g[1]=f=>s("search",f)),onApplyFilter:g[2]||(g[2]=f=>s("applyFilter",f)),onClearFilters:g[3]||(g[3]=f=>s("clearFilters"))},null,8,["show-search","search-value","active-sort","active-ordering","header-title","active-segment","segments-id","has-applied-filters","is-label-view","is-active-view"]),m("main",K9e,[m("div",X9e,[c.value?(p(),L(B9e,{key:0,"active-segment":e.activeSegment,onClearFilters:g[4]||(g[4]=f=>s("clearFilters")),onOpenFilter:d},null,8,["active-segment"])):$("",!0),We(h.$slots,"default")])]),e.showPaginationFooter?(p(),E("footer",q9e,[S(cv,{"current-page-info":"CONTACTS_LAYOUT.PAGINATION_FOOTER.SHOWING","current-page":e.currentPage,"total-items":e.totalItems,"items-per-page":e.itemsPerPage,"onUpdate:currentPage":u},null,8,["current-page","total-items","items-per-page"])])):$("",!0)])]))}},Q9e={class:"relative flex flex-col items-center justify-center w-full h-full overflow-hidden"},J9e={class:"relative w-full max-w-[60rem] mx-auto overflow-hidden h-full max-h-[28rem]"},eUe={key:0,class:"w-full h-full space-y-4 overflow-y-hidden opacity-50 pointer-events-none"},tUe={class:"flex flex-col items-center justify-center gap-3"},nUe={class:"text-3xl font-medium text-center text-n-slate-12 font-interDisplay"},sUe={key:0,class:"max-w-xl text-base text-center text-n-slate-11 font-interDisplay tracking-[0.3px]"},Do={__name:"EmptyStateLayout",props:{title:{type:String,required:!0},subtitle:{type:String,required:!0},actionPerms:{type:Array,default:()=>[]},showBackdrop:{type:Boolean,default:!0}},setup(e){return(t,n)=>(p(),E("section",Q9e,[m("div",J9e,[e.showBackdrop?(p(),E("div",eUe,[We(t.$slots,"empty-state-item")])):$("",!0),m("div",{class:ae(["flex flex-col items-center justify-end w-full h-full pb-20",{"absolute inset-x-0 bottom-0 bg-gradient-to-t from-n-background from-25% dark:from-n-background to-transparent":e.showBackdrop}])},[m("div",{class:ae(["flex flex-col items-center justify-center gap-6",{"mt-48":!e.showBackdrop}])},[m("div",tUe,[m("h2",nUe,I(e.title),1),e.subtitle?(p(),E("p",sUe,I(e.subtitle),1)):$("",!0)]),S(js,{permissions:e.actionPerms},{default:Y(()=>[We(t.$slots,"actions")]),_:3},8,["permissions"])],2)],2)])]))}},aUe={__name:"Flag",props:{country:{type:String,required:!0},squared:{type:Boolean,default:!1}},setup(e){const t=e,n=()=>{const s=["fi",`fi-${t.country.toLowerCase()}`,"flex-shrink-0"];return t.squared&&s.push("fis"),On("span",{class:s})};return(s,a)=>(p(),L(ds(n)))}},UC={__name:"ConfirmContactDeleteDialog",props:{selectedContact:{type:Object,default:null}},emits:["goToContactsList"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=be(),i=rt(),l=wt(),r=j(null),c=async d=>{if(d)try{await i.dispatch("contacts/delete",d),ne(o("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.API.SUCCESS_MESSAGE"))}catch{ne(o("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.API.ERROR_MESSAGE"))}},u=async()=>{var d;a("goToContactsList"),await c(l.params.contactId||s.selectedContact.id),(d=r.value)==null||d.close()};return t({dialogRef:r}),(d,h)=>(p(),L($n,{ref_key:"dialogRef",ref:r,type:"alert",title:C(o)("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.TITLE"),description:C(o)("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.DESCRIPTION"),"confirm-button-label":C(o)("CONTACTS_LAYOUT.DETAILS.DELETE_DIALOG.CONFIRM"),onConfirm:u},null,8,["title","description","confirm-button-label"]))}},oUe={class:"flex flex-col items-start border-t border-n-strong px-6 py-5"},iUe={class:"overflow-hidden min-h-0"},lUe={class:"inline-flex text-n-slate-11 text-sm items-center gap-1"},rUe={__name:"ContactDeleteSection",props:{selectedContact:{type:Object,required:!0}},setup(e){const{t}=be(),[n,s]=yn(),a=j(null),o=()=>{var i;(i=a.value)==null||i.dialogRef.open()};return(i,l)=>(p(),L(js,{permissions:["administrator"]},{default:Y(()=>[m("div",oUe,[S(te,{label:C(t)("CONTACTS_LAYOUT.DETAILS.DELETE_CONTACT"),sm:"",link:"",slate:"",class:"hover:!no-underline text-n-slate-12",icon:"i-lucide-chevron-down","trailing-icon":"",onClick:l[0]||(l[0]=r=>C(s)())},null,8,["label"]),m("div",{class:ae(["transition-all duration-300 ease-in-out grid w-full overflow-hidden",C(n)?"grid-rows-[1fr] opacity-100 mt-2":"grid-rows-[0fr] opacity-0 mt-0"])},[m("div",iUe,[m("span",lUe,[xe(I(C(t)("CONTACTS_LAYOUT.CARD.DELETE_CONTACT.MESSAGE"))+" ",1),S(te,{label:C(t)("CONTACTS_LAYOUT.CARD.DELETE_CONTACT.BUTTON"),sm:"",ruby:"",link:"",onClick:l[1]||(l[1]=r=>o())},null,8,["label"])])])],2)]),S(UC,{ref_key:"confirmDeleteContactDialogRef",ref:a,"selected-contact":e.selectedContact},null,8,["selected-contact"])]),_:1}))}},cUe={class:"relative w-4 h-4"},uUe=["checked","indeterminate","disabled"],kr={__name:"Checkbox",props:jt({indeterminate:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:jt(["change"],["update:modelValue"]),setup(e,{emit:t}){const n=t,s=Xt(e,"modelValue"),a=o=>{s.value=o.target.checked,n("change",o)};return(o,i)=>(p(),E("div",cUe,[m("input",{checked:s.value,indeterminate:e.indeterminate,type:"checkbox",disabled:e.disabled,class:"peer absolute inset-0 z-10 h-4 w-4 disabled:opacity-50 appearance-none rounded border border-n-slate-6 ring-transparent transition-all duration-200 checked:border-n-brand checked:bg-n-brand dark:border-gray-600 dark:checked:border-n-brand indeterminate:border-n-brand indeterminate:bg-n-brand hover:enabled:bg-n-blue-border cursor-pointer",onChange:a},null,40,uUe),i[0]||(i[0]=m("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none absolute w-3.5 h-3.5 z-20 stroke-white opacity-0 peer-checked:opacity-100 transition-opacity duration-200 left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"},[m("path",{d:"M3 8L6 11L11 3.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),i[1]||(i[1]=m("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none absolute w-3.5 h-3.5 z-20 stroke-white opacity-0 peer-indeterminate:opacity-100 transition-opacity duration-200 left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"},[m("path",{d:"M3 7L11 7","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1))]))}},dUe={class:"relative"},pUe={class:"flex items-center justify-start flex-1 gap-4"},mUe={class:"flex flex-col gap-0.5 flex-1"},hUe={class:"flex flex-wrap items-center gap-x-4 gap-y-1"},fUe={class:"text-base font-medium truncate text-n-slate-12"},gUe={class:"inline-flex items-center gap-1"},_Ue={key:0,class:"i-ph-building-light size-4 text-n-slate-10 mb-0.5"},vUe={key:1,class:"text-sm truncate text-n-slate-11"},EUe={class:"flex flex-wrap items-center justify-start gap-x-3 gap-y-1"},bUe=["title"],TUe={class:"text-sm text-n-slate-11"},SUe={key:1,class:"w-px h-3 truncate bg-n-slate-6"},AUe={key:2,class:"text-sm truncate text-n-slate-11"},yUe={key:3,class:"w-px h-3 truncate bg-n-slate-6"},IUe={key:4,class:"inline-flex items-center gap-2 text-sm truncate text-n-slate-11"},CUe={key:5,class:"w-px h-3 truncate bg-n-slate-6"},NUe={class:"overflow-hidden"},OUe={class:"flex flex-col gap-6 p-6 border-t border-n-strong"},FC={__name:"ContactsCard",props:{id:{type:Number,required:!0},name:{type:String,default:""},email:{type:String,default:""},additionalAttributes:{type:Object,default:()=>({})},phoneNumber:{type:String,default:""},thumbnail:{type:String,default:""},availabilityStatus:{type:String,default:null},isExpanded:{type:Boolean,default:!1},isUpdating:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1}},emits:["toggle","updateContact","showContact","select","avatarHover"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=j(null),i=()=>({id:n.id,name:n.name,email:n.email,phoneNumber:n.phoneNumber,additionalAttributes:n.additionalAttributes}),l=j(i()),r=y(()=>{var T;return(T=o.value)==null?void 0:T.isFormInvalid}),c=y(()=>Fa.reduce((T,_)=>(T[_.code]=_,T[_.id]=_,T),{})),u=y(()=>{const T=n.additionalAttributes||{},{country:_,countryCode:N,city:R}=T;if(!_&&!N)return null;const O=c.value[_]||c.value[N];return O?{countryCode:O.id,city:R?`${R},`:null,name:O.name}:null}),d=y(()=>u.value?[u.value.city,u.value.name].filter(Boolean).join(" "):""),h=T=>{Object.assign(l.value,T)},g=()=>{s("updateContact",l.value)},f=()=>{s("toggle"),l.value=i()},b=()=>s("showContact",n.id),A=T=>{s("select",T)},v=T=>{s("avatarHover",T)};return(T,_)=>(p(),E("div",dUe,[(p(),L(ba,{key:e.id,layout:"row",class:ae({"outline-n-weak !bg-n-slate-3 dark:!bg-n-solid-3":e.isSelected})},{after:Y(()=>[m("div",{class:ae(["transition-all duration-500 ease-in-out grid overflow-hidden",e.isExpanded?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"])},[m("div",NUe,[m("div",OUe,[S(rv,{ref_key:"contactsFormRef",ref:o,"contact-data":l.value,onUpdate:h},null,8,["contact-data"]),m("div",null,[S(te,{label:C(a)("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.UPDATE_BUTTON"),size:"sm","is-loading":e.isUpdating,disabled:e.isUpdating||r.value,onClick:g},null,8,["label","is-loading","disabled"])])]),S(rUe,{"selected-contact":{id:n.id,name:n.name}},null,8,["selected-contact"])])],2)]),default:Y(()=>{var N,R;return[m("div",pUe,[m("div",{class:"relative",onMouseenter:_[2]||(_[2]=O=>v(!0)),onMouseleave:_[3]||(_[3]=O=>v(!1))},[S(kt,{name:e.name,src:e.thumbnail,size:48,status:e.availabilityStatus,"hide-offline-status":"","rounded-full":""},co({_:2},[e.selectable?{name:"overlay",fn:Y(({size:O})=>[m("label",{class:"flex items-center justify-center rounded-full cursor-pointer absolute inset-0 z-10 backdrop-blur-[2px] border border-n-weak",style:Zt({width:`${O}px`,height:`${O}px`}),onClick:_[1]||(_[1]=Ve(()=>{},["stop"]))},[S(kr,{"model-value":e.isSelected,onChange:_[0]||(_[0]=x=>A(x.target.checked))},null,8,["model-value"])],4)]),key:"0"}:void 0]),1032,["name","src","status"])],32),m("div",mUe,[m("div",hUe,[m("span",fUe,I(e.name),1),m("span",gUe,[(N=e.additionalAttributes)!=null&&N.companyName?(p(),E("span",_Ue)):$("",!0),(R=e.additionalAttributes)!=null&&R.companyName?(p(),E("span",vUe,I(e.additionalAttributes.companyName),1)):$("",!0)])]),m("div",EUe,[e.email?(p(),E("div",{key:0,class:"truncate max-w-72",title:e.email},[m("span",TUe,I(e.email),1)],8,bUe)):$("",!0),e.email?(p(),E("div",SUe)):$("",!0),e.phoneNumber?(p(),E("span",AUe,I(e.phoneNumber),1)):$("",!0),e.phoneNumber?(p(),E("div",yUe)):$("",!0),u.value?(p(),E("span",IUe,[S(aUe,{country:u.value.countryCode,class:"size-3.5"},null,8,["country"]),xe(" "+I(d.value),1)])):$("",!0),u.value?(p(),E("div",CUe)):$("",!0),S(te,{label:C(a)("CONTACTS_LAYOUT.CARD.VIEW_DETAILS"),variant:"link",size:"xs",onClick:b},null,8,["label"])])])]),S(te,{icon:"i-lucide-chevron-down",variant:"ghost",color:"slate",size:"xs",class:ae({"rotate-180":e.isExpanded}),onClick:f},null,8,["class"])]}),_:1},8,["class"]))]))}},RUe=[{additionalAttributes:{city:"Los Angeles",country:"United States",description:"I'm Candice, a developer focusing on building web solutions. Currently, Im working as a Product Developer at Lumora.",companyName:"Lumora",countryCode:"US",socialProfiles:{github:"candice-dev",twitter:"candice_w_dev",facebook:"candice.dev",linkedin:"candice-matherson",instagram:"candice.codes"}},availabilityStatus:"offline",email:"candice.matherson@lumora.com",id:22,name:"Candice Matherson",phoneNumber:"+14155552671",identifier:null,thumbnail:"",customAttributes:{dateContact:"2024-11-11T11:53:09.299Z",linkContact:"https://example.com",listContact:"Follow-Up",textContact:"Hi there!",numberContact:"42",checkboxContact:!1},lastActivityAt:1712123233,createdAt:1712123233},{additionalAttributes:{city:"San Francisco",country:"United States",description:"Passionate about design and user experience.",companyName:"Designify",countryCode:"US",socialProfiles:{github:"ophelia-folkard",twitter:"oph_designs",facebook:"ophelia.folkard",linkedin:"ophelia-folkard",instagram:"ophelia.design"}},availabilityStatus:"offline",email:"ophelia.folkard@designify.com",id:21,name:"Ophelia Folkard",phoneNumber:"+14155552672",identifier:null,thumbnail:"",customAttributes:{dateContact:"2024-10-05T10:12:34.567Z",linkContact:"https://designify.com",listContact:"Prospects",textContact:"Looking forward to connecting!"},lastActivityAt:1712123233,createdAt:1712123233},{additionalAttributes:{city:"Austin",country:"United States",description:"Avid coder and tech enthusiast.",companyName:"CodeHub",countryCode:"US",socialProfiles:{github:"willy_castelot",twitter:"willy_code",facebook:"willy.castelot",linkedin:"willy-castelot",instagram:"willy.coder"}},availabilityStatus:"offline",email:"willy.castelot@codehub.io",id:20,name:"Willy Castelot",phoneNumber:"+14155552673",identifier:null,thumbnail:"",customAttributes:{textContact:"Lets collaborate!",checkboxContact:!0},lastActivityAt:1712123233,createdAt:1712123233},{additionalAttributes:{city:"Seattle",country:"United States",description:"Product manager with a love for innovation.",companyName:"InnovaTech",countryCode:"US",socialProfiles:{github:"elisabeth-d",twitter:"elisabeth_innova",facebook:"elisabeth.derington",linkedin:"elisabeth-derington",instagram:"elisabeth.innovates"}},availabilityStatus:"offline",email:"elisabeth.derington@innova.com",id:19,name:"Elisabeth Derington",phoneNumber:"+14155552674",identifier:null,thumbnail:"",customAttributes:{textContact:"Lets schedule a call."},lastActivityAt:1712123232,createdAt:1712123232},{additionalAttributes:{city:"Chicago",country:"United States",description:"Marketing specialist and content creator.",companyName:"Contently",countryCode:"US",socialProfiles:{github:"olia-olenchenko",twitter:"olia_content",facebook:"olia.olenchenko",linkedin:"olia-olenchenko",instagram:"olia.creates"}},availabilityStatus:"offline",email:"olia.olenchenko@contently.com",id:18,name:"Olia Olenchenko",phoneNumber:"+14155552675",identifier:null,thumbnail:"",customAttributes:{},lastActivityAt:1712123232,createdAt:1712123232},{additionalAttributes:{city:"Boston",country:"United States",description:"SEO expert and analytics enthusiast.",companyName:"OptiSearch",countryCode:"US",socialProfiles:{github:"nate-vannuchi",twitter:"nate_seo",facebook:"nathaniel.vannuchi",linkedin:"nathaniel-vannuchi",instagram:"nate.optimizes"}},availabilityStatus:"offline",email:"nathaniel.vannuchi@optisearch.com",id:17,name:"Nathaniel Vannuchi",phoneNumber:"+14155552676",identifier:null,thumbnail:"",customAttributes:{},lastActivityAt:1712123232,createdAt:1712123232},{additionalAttributes:{city:"Denver",country:"United States",description:"UI/UX designer with a flair for minimalist designs.",companyName:"Minimal Designs",countryCode:"US",socialProfiles:{github:"merrile-petruk",twitter:"merrile_ux",facebook:"merrile.petruk",linkedin:"merrile-petruk",instagram:"merrile.designs"}},availabilityStatus:"offline",email:"merrile.petruk@minimal.com",id:16,name:"Merrile Petruk",phoneNumber:"+14155552677",identifier:null,thumbnail:"",customAttributes:{},lastActivityAt:1712123232,createdAt:1712123232},{additionalAttributes:{city:"Miami",country:"United States",description:"Entrepreneur with a background in e-commerce.",companyName:"Ecom Solutions",countryCode:"US",socialProfiles:{github:"cordell-d",twitter:"cordell_entrepreneur",facebook:"cordell.dalinder",linkedin:"cordell-dalinder",instagram:"cordell.ecom"}},availabilityStatus:"offline",email:"cordell.dalinder@ecomsolutions.com",id:15,name:"Cordell Dalinder",phoneNumber:"+14155552678",identifier:null,thumbnail:"",customAttributes:{},lastActivityAt:1712123232,createdAt:1712123232}],xUe={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},wUe={key:0},$Ue={__name:"ContactEmptyState",props:{title:{type:String,default:""},subtitle:{type:String,default:""},showButton:{type:Boolean,default:!0},buttonLabel:{type:String,default:""}},emits:["create"],setup(e,{emit:t}){const n=t,s=j(null),a=()=>{var o;(o=s.value)==null||o.dialogRef.open()};return(o,i)=>(p(),L(Do,{title:e.title,subtitle:e.subtitle},{"empty-state-item":Y(()=>[m("div",xUe,[(p(!0),E(ue,null,Ae(C(RUe).slice(0,5),l=>(p(),L(FC,{id:l.id,key:l.id,name:l.name,email:l.email,thumbnail:l.thumbnail,"phone-number":l.phoneNumber,"additional-attributes":l.additionalAttributes,"is-expanded":l.id===0,onToggle:r=>o.toggleExpanded(l.id)},null,8,["id","name","email","thumbnail","phone-number","additional-attributes","is-expanded","onToggle"]))),128))])]),actions:Y(()=>[e.showButton?(p(),E("div",wUe,[S(te,{label:e.buttonLabel,icon:"i-lucide-plus",onClick:a},null,8,["label"]),S(BC,{ref_key:"createNewContactDialogRef",ref:s,onCreate:i[0]||(i[0]=l=>n("create",l))},null,512)])):$("",!0)]),_:1},8,["title","subtitle"]))}},MUe={class:"flex flex-col gap-4"},LUe={__name:"ContactsList",props:{contacts:{type:Array,required:!0},selectedContactIds:{type:Array,default:()=>[]}},emits:["toggleContact"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=rt(),i=Ft(),l=wt(),r=_e("contacts/getUIFlags"),c=y(()=>r.value.isUpdating),u=j(null),d=j(null),h=y(()=>new Set(n.selectedContactIds||[])),g=async N=>{try{await o.dispatch("contacts/update",N),ne(a("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.SUCCESS_MESSAGE"))}catch(R){const O="CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.FORM";R instanceof Jd?R.data.includes("email")?ne(a(`${O}.EMAIL_ADDRESS.DUPLICATE`)):R.data.includes("phone_number")&&ne(a(`${O}.PHONE_NUMBER.DUPLICATE`)):R instanceof eu?ne(R.data):ne(a(`${O}.ERROR_MESSAGE`))}},f=async N=>{const R={contacts_dashboard_segments_index:["contacts_edit_segment","segmentId"],contacts_dashboard_labels_index:["contacts_edit_label","label"]},[O,x]=R[l.name]||["contacts_edit"],w={contactId:N,...x&&{[x]:l.params[x]}};await i.push({name:O,params:w,query:l.query})},b=N=>{u.value=u.value===N?null:N},A=N=>h.value.has(N),v=N=>d.value===N||A(N),T=(N,R)=>{s("toggleContact",{id:N,value:R})},_=(N,R)=>{d.value=R?N:null};return(N,R)=>(p(),E("div",MUe,[(p(!0),E(ue,null,Ae(e.contacts,O=>(p(),E("div",{key:O.id,class:"relative"},[S(FC,{id:O.id,name:O.name,email:O.email,thumbnail:O.thumbnail,"phone-number":O.phoneNumber,"additional-attributes":O.additionalAttributes,"availability-status":O.availabilityStatus,"is-expanded":u.value===O.id,"is-updating":c.value,selectable:v(O.id),"is-selected":A(O.id),onToggle:x=>b(O.id),onUpdateContact:g,onShowContact:f,onSelect:x=>T(O.id,x),onAvatarHover:x=>_(O.id,x)},null,8,["id","name","email","thumbnail","phone-number","additional-attributes","availability-status","is-expanded","is-updating","selectable","is-selected","onToggle","onSelect","onAvatarHover"])]))),128))]))}},DUe={key:0,class:"flex items-center gap-3 py-1 ltr:pl-3 rtl:pr-3 ltr:pr-4 rtl:pl-4 rounded-lg bg-n-solid-2 outline outline-1 outline-n-container shadow"},PUe={class:"flex items-center gap-3"},kUe={class:"flex items-center gap-1.5 min-w-0"},BUe={class:"text-sm font-medium truncate text-n-slate-12 tabular-nums"},UUe={class:"text-sm text-n-slate-10 truncate tabular-nums"},FUe={class:"flex items-center gap-3"},GUe={key:1,class:"flex items-center gap-3"},Br={__name:"BulkSelectBar",props:jt({allItems:{type:Array,required:!0},selectAllLabel:{type:String,default:""},selectedCountLabel:{type:String,default:""},deleteLabel:{type:String,default:"Delete"}},{modelValue:{type:Set,default:()=>new Set},modelModifiers:{}}),emits:jt(["bulkDelete"],["update:modelValue"]),setup(e,{emit:t}){const n=e,s=t,a=Xt(e,"modelValue"),o=y(()=>a.value.size),i=y(()=>n.allItems.length),l=y(()=>o.value>0),r=y(()=>l.value&&o.value<i.value),c=y(()=>i.value>0&&o.value===i.value),u=y({get:()=>c.value,set:d=>{const h=d?new Set(n.allItems.map(g=>g.id)):new Set;a.value=h}});return(d,h)=>(p(),L(Ys,{name:"slide-fade","enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform ltr:-translate-x-4 rtl:translate-x-4","enter-to-class":"opacity-100 transform translate-x-0","leave-active-class":"hidden opacity-0"},{default:Y(()=>[l.value?(p(),E("div",DUe,[m("div",PUe,[m("div",kUe,[S(kr,{modelValue:u.value,"onUpdate:modelValue":h[0]||(h[0]=g=>u.value=g),indeterminate:r.value},null,8,["modelValue","indeterminate"]),m("span",BUe,I(e.selectAllLabel),1)]),m("span",UUe,I(e.selectedCountLabel),1),h[2]||(h[2]=m("div",{class:"h-4 w-px bg-n-strong"},null,-1)),We(d.$slots,"secondary-actions")]),m("div",FUe,[We(d.$slots,"actions",{selectedCount:o.value},()=>[S(te,{label:e.deleteLabel,sm:"",ruby:"",ghost:"",class:"!px-1.5",icon:"i-lucide-trash",onClick:h[1]||(h[1]=g=>s("bulkDelete"))},null,8,["label"])])])])):(p(),E("div",GUe,[We(d.$slots,"default-actions")]))]),_:3}))}},VUe={class:"sticky top-0 z-10 bg-gradient-to-b from-n-background from-90% to-transparent px-6 pt-1 pb-2"},HUe={class:"flex items-center gap-2 ml-auto"},WUe={class:"relative flex items-center"},zUe={__name:"ContactsBulkActionBar",props:{visibleContactIds:{type:Array,default:()=>[]},selectedContactIds:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1}},emits:["clearSelection","assignLabels","toggleAll","deleteSelected"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=y(()=>n.selectedContactIds.length),i=y(()=>n.visibleContactIds.length),l=j(!1),r=y(()=>i.value?a("CONTACTS_BULK_ACTIONS.SELECT_ALL",{count:i.value}):""),c=y(()=>a("CONTACTS_BULK_ACTIONS.SELECTED_COUNT",{count:o.value})),u=y(()=>n.visibleContactIds.map(A=>({id:A}))),d=y({get:()=>new Set(n.selectedContactIds),set:A=>{if(!n.visibleContactIds.length){s("toggleAll",!1);return}const v=A.size===n.visibleContactIds.length&&A.size>0;s("toggleAll",v)}}),h=()=>{l.value=!1,s("clearSelection")},g=()=>{!o.value||n.isLoading||(l.value=!l.value)},f=()=>{l.value=!1},b=A=>{s("assignLabels",A),f()};return(A,v)=>{const T=Qe("tooltip");return p(),E("div",VUe,[S(Br,{modelValue:d.value,"onUpdate:modelValue":v[1]||(v[1]=_=>d.value=_),"all-items":u.value,"select-all-label":r.value,"selected-count-label":c.value,class:"py-2 ltr:!pr-3 rtl:!pl-3 justify-between"},{"secondary-actions":Y(()=>[S(te,{sm:"",ghost:"",slate:"",label:C(a)("CONTACTS_BULK_ACTIONS.CLEAR_SELECTION"),class:"!px-1.5",onClick:h},null,8,["label"])]),actions:Y(()=>[m("div",HUe,[re((p(),E("div",WUe,[S(te,{sm:"",faded:"",slate:"",icon:"i-lucide-tags",label:C(a)("CONTACTS_BULK_ACTIONS.ASSIGN_LABELS"),disabled:!o.value||e.isLoading,"is-loading":e.isLoading,class:"[&>span:nth-child(2)]:hidden sm:[&>span:nth-child(2)]:inline w-fit",onClick:g},null,8,["label","disabled","is-loading"]),S(Ys,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:Y(()=>[l.value?(p(),L($I,{key:0,class:"[&>.triangle]:!hidden [&>div>button]:!hidden ltr:!right-0 rtl:!left-0 top-8 mt-0.5",onAssign:b})):$("",!0)]),_:1})])),[[C(ms),f]]),S(js,{permissions:["administrator"]},{default:Y(()=>[re(S(te,{sm:"",faded:"",ruby:"",icon:"i-lucide-trash",label:C(a)("CONTACTS_BULK_ACTIONS.DELETE_CONTACTS"),"aria-label":C(a)("CONTACTS_BULK_ACTIONS.DELETE_CONTACTS"),disabled:!o.value||e.isLoading,"is-loading":e.isLoading,class:"!px-1.5 [&>span:nth-child(2)]:hidden",onClick:v[0]||(v[0]=_=>s("deleteSelected"))},null,8,["label","aria-label","disabled","is-loading"]),[[T,C(a)("CONTACTS_BULK_ACTIONS.DELETE_CONTACTS"),void 0,{bottom:!0}]])]),_:1})])]),_:1},8,["modelValue","all-items","select-all-label","selected-count-label"])])}}},YUe={class:"flex flex-col justify-between flex-1 h-full m-0 overflow-auto bg-n-background"},jUe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},KUe={key:2,class:"flex items-center justify-center py-10"},XUe={class:"text-base text-n-slate-11"},qUe={key:3,class:"flex flex-col gap-4 px-6 pt-4 pb-6"},ZUe="last_activity_at",QUe=300,oc={__name:"ContactsIndex",setup(e){const t=rt(),n=wt(),s=Ft(),{t:a}=be(),{updateUISettings:o,uiSettings:i}=tn(),l=_e("contacts/getContactsList"),r=_e("contacts/getUIFlags"),c=_e("customViews/getUIFlags"),u=_e("customViews/getContactCustomViews"),d=_e("contacts/getAppliedContactFilters"),h=_e("contacts/getMeta"),g=y(()=>{var Ie;return(Ie=n.query)==null?void 0:Ie.search}),f=j(g.value||""),b=y(()=>{var Ie;return Number((Ie=n.query)==null?void 0:Ie.page)||1}),A=(Ie="")=>{const Be=Ie.startsWith("-");return{sort:(Be?Ie.slice(1):Ie)||ZUe,order:Be?"-":""}},{contacts_sort_by:v=""}=i.value??{},{sort:T,order:_}=A(v),N=gn({activeSort:T,activeOrdering:_}),R=y(()=>n.params.label),O=y(()=>n.params.segmentId),x=y(()=>r.value.isFetching||c.value.isFetching),w=y(()=>{var Ie;return Number((Ie=h.value)==null?void 0:Ie.currentPage)}),D=y(()=>{var Ie;return(Ie=h.value)==null?void 0:Ie.count}),M=j([]),P=j(!1),U=j(null),F=y(()=>M.value.length),k=y(()=>F.value>1?a("CONTACTS_BULK_ACTIONS.DELETE_DIALOG.TITLE"):a("CONTACTS_BULK_ACTIONS.DELETE_DIALOG.SINGULAR_TITLE")),B=y(()=>F.value>1?a("CONTACTS_BULK_ACTIONS.DELETE_DIALOG.DESCRIPTION",{count:F.value}):a("CONTACTS_BULK_ACTIONS.DELETE_DIALOG.SINGULAR_DESCRIPTION")),V=y(()=>F.value>1?a("CONTACTS_BULK_ACTIONS.DELETE_DIALOG.CONFIRM_MULTIPLE"):a("CONTACTS_BULK_ACTIONS.DELETE_DIALOG.CONFIRM_SINGLE")),G=y(()=>F.value>0),K=y(()=>{if(O.value)return u.value.find(Ie=>Ie.id===Number(O.value))}),se=y(()=>l.value.length>0),ee=y(()=>n.name==="contacts_dashboard_index"&&b.value===1),X=y(()=>n.name==="contacts_dashboard_active"),z=y(()=>d.value.length>0),H=y(()=>!g.value&&!se.value&&ee.value&&!z.value),q=y(()=>(g.value||z.value||!ee.value)&&!se.value),J=y(()=>{var Ie;return g.value?a("CONTACTS_LAYOUT.HEADER.SEARCH_TITLE"):X.value?a("CONTACTS_LAYOUT.HEADER.ACTIVE_TITLE"):O.value?(Ie=K.value)==null?void 0:Ie.name:R.value?`#${R.value}`:a("CONTACTS_LAYOUT.HEADER.TITLE")}),de=y(()=>X.value?a("CONTACTS_LAYOUT.EMPTY_STATE.ACTIVE_EMPTY_STATE_TITLE"):!g.value||z.value?a("CONTACTS_LAYOUT.EMPTY_STATE.LIST_EMPTY_STATE_TITLE"):a("CONTACTS_LAYOUT.EMPTY_STATE.SEARCH_EMPTY_STATE_TITLE")),Te=y(()=>l.value.map(Ie=>Ie.id)),ce=()=>{M.value=[]},Ne=()=>{var Ie,Be;!M.value.length||P.value||(Be=(Ie=U.value)==null?void 0:Ie.open)==null||Be.call(Ie)},Me=Ie=>{M.value=Ie?[...Te.value]:[]},Fe=({id:Ie,value:Be})=>{const ye=M.value.includes(Ie),$e=Be??!ye;$e&&!ye?M.value=[...M.value,Ie]:!$e&&ye&&(M.value=M.value.filter(Pe=>Pe!==Ie))},Ge=(Ie,Be="")=>{const ye={...n.query,page:Ie.toString(),...Be?{search:Be}:{}};Be||delete ye.search,s.replace({query:ye})},je=()=>`${N.activeOrdering}${N.activeSort}`,Ze=(Ie=1)=>({page:Ie,sortAttr:je(),label:R.value}),nt=async(Ie=1)=>{ce(),await t.dispatch("contacts/clearContactFilters"),await t.dispatch("contacts/get",Ze(Ie)),Ge(Ie)},st=async(Ie,Be=1)=>{!O.value&&!z.value||(ce(),await t.dispatch("contacts/filter",{...Ze(Be),queryPayload:Ie}),Ge(Be))},At=async(Ie=1)=>{ce(),await t.dispatch("contacts/clearContactFilters"),await t.dispatch("contacts/active",{page:Ie,sortAttr:je()}),Ge(Ie)},Mt=Ua(async(Ie,Be=1)=>{if(ce(),await t.dispatch("contacts/clearContactFilters"),f.value=Ie,!Ie){Ge(Be),await nt(Be);return}Ge(Be,Ie),await t.dispatch("contacts/search",{...Ze(Be),search:encodeURIComponent(Ie)})},QUe),Z=async Ie=>{var Be,ye;if(ce(),Ge(Ie,f.value),!x.value){if(g.value){await Mt(g.value,Ie);return}if(f.value="",X.value){await At(Ie);return}if((z.value||(Be=K.value)!=null&&Be.query)&&!R.value){const $e=((ye=K.value)==null?void 0:ye.query)||yo(d.value);await st($e,Ie);return}await nt(Ie)}},ie=async Ie=>{if(!(!Ie.length||!M.value.length)){P.value=!0;try{await xv.create({type:"Contact",ids:M.value,labels:{add:Ie}}),ne(a("CONTACTS_BULK_ACTIONS.ASSIGN_LABELS_SUCCESS")),ce(),await Z(b.value)}catch{ne(a("CONTACTS_BULK_ACTIONS.ASSIGN_LABELS_FAILED"))}finally{P.value=!1}}},le=async()=>{var Ie,Be;if(M.value.length){P.value=!0;try{await xv.create({type:"Contact",ids:M.value,action_name:"delete"}),ne(a("CONTACTS_BULK_ACTIONS.DELETE_SUCCESS")),ce(),await Z(b.value),(Be=(Ie=U.value)==null?void 0:Ie.close)==null||Be.call(Ie)}catch{ne(a("CONTACTS_BULK_ACTIONS.DELETE_FAILED"))}finally{P.value=!1}}},ve=async({sort:Ie,order:Be})=>{var ye;if(Object.assign(N,{activeSort:Ie,activeOrdering:Be}),await o({contacts_sort_by:je()}),g.value){await Mt(f.value);return}if(X.value){await At();return}await(O.value||z.value?st(O.value?(ye=K.value)==null?void 0:ye.query:yo(d.value)):nt())},ge=async Ie=>{await t.dispatch("contacts/create",Ie)};return it(l,Ie=>{const Be=Ie.map(ye=>ye.id);M.value=M.value.filter(ye=>Be.includes(ye))},{deep:!0}),it(G,Ie=>{var Be,ye;Ie||(ye=(Be=U.value)==null?void 0:Be.close)==null||ye.call(Be)}),it(()=>{var Ie;return(Ie=i.value)==null?void 0:Ie.contacts_sort_by},Ie=>{if(Ie){const{sort:Be,order:ye}=A(Ie);N.activeSort=Be,N.activeOrdering=ye}},{immediate:!0}),it([R,K,X],()=>{Z(b.value)},{deep:!0}),it(g,Ie=>{if(!x.value&&(f.value=Ie||"",Ie===void 0)){if(X.value||R.value||K.value||z.value)return;nt()}}),lt(async()=>{if(O.value)K.value&&O.value&&await st(K.value.query,b.value);else{if(g.value){await Mt(g.value,b.value);return}if(X.value){await At(b.value);return}await nt(b.value)}}),(Ie,Be)=>(p(),E("div",YUe,[S(Z9e,{"search-value":f.value,"header-title":J.value,"current-page":w.value,"total-items":D.value,"show-pagination-footer":!x.value&&se.value,"active-sort":N.activeSort,"active-ordering":N.activeOrdering,"active-segment":K.value,"segments-id":O.value,"is-fetching-list":x.value,"has-applied-filters":z.value,"onUpdate:currentPage":Z,onSearch:C(Mt),"onUpdate:sort":ve,onApplyFilter:st,onClearFilters:nt},{default:Y(()=>[x.value?(p(),E("div",jUe,[S(An)])):(p(),E(ue,{key:1},[G.value?(p(),L(zUe,{key:0,"visible-contact-ids":Te.value,"selected-contact-ids":M.value,"is-loading":P.value,onToggleAll:Me,onClearSelection:ce,onAssignLabels:ie,onDeleteSelected:Ne},null,8,["visible-contact-ids","selected-contact-ids","is-loading"])):$("",!0),H.value?(p(),L($Ue,{key:1,class:"pt-14",title:C(a)("CONTACTS_LAYOUT.EMPTY_STATE.TITLE"),subtitle:C(a)("CONTACTS_LAYOUT.EMPTY_STATE.SUBTITLE"),"button-label":C(a)("CONTACTS_LAYOUT.EMPTY_STATE.BUTTON_LABEL"),onCreate:ge},null,8,["title","subtitle","button-label"])):q.value?(p(),E("div",KUe,[m("span",XUe,I(de.value),1)])):(p(),E("div",qUe,[S(LUe,{contacts:C(l),"selected-contact-ids":M.value,onToggleContact:Fe},null,8,["contacts","selected-contact-ids"]),F.value?(p(),L($n,{key:0,ref_key:"bulkDeleteDialogRef",ref:U,type:"alert",title:k.value,description:B.value,"confirm-button-label":V.value,"is-loading":P.value,onConfirm:le},null,8,["title","description","confirm-button-label","is-loading"])):$("",!0)]))],64))]),_:1},8,["search-value","header-title","current-page","total-items","show-pagination-footer","active-sort","active-ordering","active-segment","segments-id","is-fetching-list","has-applied-filters","onSearch"])]))}},JUe={class:"flex w-full h-full overflow-hidden justify-evenly bg-n-background"},eFe={class:"flex flex-col w-full h-full transition-all duration-300 ltr:2xl:ml-56 rtl:2xl:mr-56"},tFe={class:"sticky top-0 z-10 px-6 3xl:px-0"},nFe={class:"w-full mx-auto max-w-[40.625rem]"},sFe={class:"flex flex-col xs:flex-row items-start xs:items-center justify-between w-full py-7 gap-2"},aFe={class:"flex items-center gap-2"},oFe={class:"flex-1 px-6 overflow-y-auto 3xl:px-px"},iFe={class:"w-full py-4 mx-auto max-w-[40.625rem]"},lFe={key:0,class:"hidden lg:block overflow-y-auto justify-end min-w-52 w-full py-6 max-w-md border-l border-n-weak bg-n-solid-2"},rFe={key:0,id:"contact-sidebar-content",class:"order-2 w-[85%] sm:w-[50%] bg-n-solid-2 ltr:border-l rtl:border-r border-n-weak overflow-y-auto py-6 shadow-lg"},cFe={__name:"ContactsDetailsLayout",props:{selectedContact:{type:Object,default:()=>({})},isUpdating:{type:Boolean,default:!1}},emits:["goToContactsList","toggleBlock"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=ig(),i=wt(),l=j(!1),r=y(()=>i.params.contactId),c=y(()=>{var A;return(A=n.selectedContact)==null?void 0:A.name}),u=y(()=>{const A=[{label:a("CONTACTS_LAYOUT.HEADER.BREADCRUMB.CONTACTS"),link:"#"}];return n.selectedContact&&A.push({label:c.value}),A}),d=y(()=>{var A;return(A=n.selectedContact)==null?void 0:A.blocked}),h=()=>{s("goToContactsList")},g=()=>{s("toggleBlock",d.value)},f=()=>{l.value=!l.value},b=()=>{l.value&&(l.value=!1)};return(A,v)=>{var T;return p(),E("section",JUe,[m("div",eFe,[m("header",tFe,[m("div",nFe,[m("div",sFe,[S(Al,{items:u.value,onClick:h},null,8,["items"]),m("div",aFe,[S(te,{label:d.value?A.$t("CONTACTS_LAYOUT.HEADER.UNBLOCK_CONTACT"):A.$t("CONTACTS_LAYOUT.HEADER.BLOCK_CONTACT"),size:"sm",slate:"","is-loading":e.isUpdating,disabled:e.isUpdating,onClick:g},null,8,["label","is-loading","disabled"]),S(wC,{phone:(T=e.selectedContact)==null?void 0:T.phoneNumber,label:A.$t("CONTACT_PANEL.CALL"),size:"sm"},null,8,["phone","label"]),S(Jp,{"contact-id":r.value},{trigger:Y(({toggle:_})=>[S(te,{label:A.$t("CONTACTS_LAYOUT.HEADER.SEND_MESSAGE"),size:"sm",onClick:_},null,8,["label","onClick"])]),_:1},8,["contact-id"])])])])]),m("main",oFe,[m("div",iFe,[We(A.$slots,"default")])])]),C(o).sidebar?(p(),E("div",lFe,[We(A.$slots,"sidebar")])):$("",!0),C(o).sidebar?(p(),E("div",{key:1,class:ae(["lg:hidden fixed top-0 ltr:right-0 rtl:left-0 h-full z-50 flex justify-end transition-all duration-200 ease-in-out",l.value?"w-full":"w-16"])},[re((p(),E("div",{class:ae(["flex items-start p-1 w-fit h-fit relative order-1 xs:top-24 top-28 transition-all bg-n-solid-2 border border-n-weak duration-500 ease-in-out",[l.value?"justify-end ltr:rounded-l-full rtl:rounded-r-full ltr:rounded-r-none rtl:rounded-l-none":"justify-center rounded-full ltr:mr-6 rtl:ml-6"]])},[S(te,{ghost:"",slate:"",sm:"",class:ae(["!rounded-full rtl:rotate-180",{"bg-n-alpha-2":l.value}]),icon:l.value?"i-lucide-panel-right-close":"i-lucide-panel-right-open","data-contact-sidebar-toggle":"",onClick:f},null,8,["class","icon"])],2)),[[C(ms),[b,{ignore:["#contact-sidebar-content"]}]]]),S(Ys,{"enter-active-class":"transition-transform duration-200 ease-in-out","leave-active-class":"transition-transform duration-200 ease-in-out","enter-from-class":"ltr:translate-x-full rtl:-translate-x-full","enter-to-class":"ltr:translate-x-0 rtl:-translate-x-0","leave-from-class":"ltr:translate-x-0 rtl:-translate-x-0","leave-to-class":"ltr:translate-x-full rtl:-translate-x-full"},{default:Y(()=>[l.value?(p(),E("div",rFe,[We(A.$slots,"sidebar")])):$("",!0)]),_:3})],2)):$("",!0)])}}},uFe={class:"relative"},dFe={class:"text-sm text-n-slate-11"},pFe={__name:"AddLabel",props:{labelMenuItems:{type:Array,default:()=>[]}},emits:["updateLabel"],setup(e,{emit:t}){const n=t,{t:s}=be(),a=j(!1);return(o,i)=>{const l=Qe("on-clickaway");return p(),E("div",uFe,[m("button",{class:ae(["flex items-center gap-1 px-2 py-1 rounded-md outline-dashed h-6 outline-1 outline-n-slate-6 hover:bg-n-alpha-2",{"bg-n-alpha-2":a.value}]),onClick:i[0]||(i[0]=r=>a.value=!a.value)},[i[2]||(i[2]=m("span",{class:"i-lucide-plus"},null,-1)),m("span",dFe,I(C(s)("LABEL.TAG_BUTTON")),1)],2),a.value?re((p(),L(qs,{key:0,"menu-items":e.labelMenuItems,"show-search":"",class:"z-[100] w-48 mt-2 overflow-y-auto ltr:left-0 rtl:right-0 top-full max-h-52",onAction:i[1]||(i[1]=r=>n("updateLabel",r))},{thumbnail:Y(({item:r})=>[m("div",{class:"rounded-sm size-2",style:Zt({backgroundColor:r.thumbnail.color})},null,4)]),_:1},8,["menu-items"])),[[l,()=>a.value=!1]]):$("",!0)])}}},mFe={__name:"ContactLabels",props:{contactId:{type:[String,Number],default:null}},setup(e){const t=e,n=rt(),s=wt(),a=j(!1),o=j(null),i=_e("labels/getLabels"),l=_e("contactLabels/getContactLabels"),r=y(()=>{const b=l.value(t.contactId);return i.value.filter(({title:A})=>b.includes(A))}),c=y(()=>{var b;return(b=i.value)==null?void 0:b.map(A=>({label:A.title,value:A.id,thumbnail:{name:A.title,color:A.color},isSelected:r.value.some(v=>v.id===A.id),action:"contactLabel"})).toSorted((A,v)=>Number(A.isSelected)-Number(v.isSelected))}),u=async b=>{b&&n.dispatch("contactLabels/get",b)},d=async({value:b})=>{try{const A=r.value.map(_=>_.title),v=i.value.find(_=>_.id===b);if(!v)return;let T;A.includes(v.title)?T=A.filter(_=>_!==v.title):T=[...A,v.title],await n.dispatch("contactLabels/update",{contactId:t.contactId,labels:T}),a.value=!1}catch{}},h=b=>d({value:b.id});it(()=>t.contactId,(b,A)=>{b!==A&&u(b)}),lt(()=>{s.params.contactId&&u(s.params.contactId)});const g=()=>{o.value=null},f=b=>{o.value=b};return(b,A)=>(p(),E("div",{class:"flex flex-wrap items-center gap-2",onMouseleave:g},[(p(!0),E(ue,null,Ae(r.value,v=>(p(),L(oA,{key:v.id,label:v,"is-hovered":o.value===v.id,onRemove:h,onHover:T=>f(v.id)},null,8,["label","is-hovered","onHover"]))),128)),S(pFe,{"label-menu-items":c.value,onUpdateLabel:d},null,8,["label-menu-items"])],32))}},hFe={class:"flex flex-col items-start gap-8 pb-6"},fFe={class:"flex flex-col items-start gap-3"},gFe={class:"flex flex-col gap-1"},_Fe={class:"text-base font-medium text-n-slate-12"},vFe={class:"flex flex-col gap-1.5"},EFe={key:0,class:"inline-flex items-center gap-1 text-sm text-n-slate-11"},bFe={class:"inline-flex items-center gap-1 text-sm text-n-slate-11"},TFe={key:0,class:"i-ph-activity text-n-slate-10 size-4"},SFe={class:"flex flex-col items-start gap-6"},AFe={class:"flex flex-col items-start w-full gap-4 pt-6 border-t border-n-strong"},yFe={class:"flex flex-col gap-2"},IFe={class:"text-base font-medium text-n-slate-12"},CFe={class:"text-sm text-n-slate-11"},NFe={__name:"ContactDetails",props:{selectedContact:{type:Object,required:!0}},emits:["goToContactsList"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=rt(),i=j(null),l=j(null),r=j(""),c=j(null),u=_e("contacts/getUIFlags"),d=y(()=>u.value.isUpdating),h=y(()=>{var x;return(x=c.value)==null?void 0:x.isFormInvalid}),g=j({}),f=()=>n.selectedContact?{...n.selectedContact}:{};lt(()=>{Object.assign(g.value,f())});const b=y(()=>{var x;return(x=g.value)!=null&&x.createdAt?us(g.value.createdAt):""}),A=y(()=>{var x;return(x=g.value)!=null&&x.lastActivityAt?us(g.value.lastActivityAt):""}),v=y(()=>{var x;return r.value?r.value:(x=g.value)==null?void 0:x.thumbnail}),T=x=>{Object.assign(g.value,x)},_=async()=>{try{const{customAttributes:x,...w}=g.value;await o.dispatch("contacts/update",w),await o.dispatch("contacts/fetchContactableInbox",n.selectedContact.id),ne(a("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.SUCCESS_MESSAGE"))}catch{ne(a("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.ERROR_MESSAGE"))}},N=()=>{var x;(x=i.value)==null||x.dialogRef.open()},R=async({file:x,url:w})=>{var D;l.value=x,r.value=w;try{await o.dispatch("contacts/update",{...(D=c.value)==null?void 0:D.state,avatar:x,isFormData:!0}),ne(a("CONTACTS_LAYOUT.DETAILS.AVATAR.UPLOAD.SUCCESS_MESSAGE"))}catch{ne(a("CONTACTS_LAYOUT.DETAILS.AVATAR.UPLOAD.ERROR_MESSAGE"))}},O=async()=>{try{n.selectedContact&&n.selectedContact.id&&(await o.dispatch("contacts/deleteAvatar",n.selectedContact.id),ne(a("CONTACTS_LAYOUT.DETAILS.AVATAR.DELETE.SUCCESS_MESSAGE"))),l.value=null,r.value="",g.value.thumbnail=null}catch(x){ne(x.message?x.message:a("CONTACTS_LAYOUT.DETAILS.AVATAR.DELETE.ERROR_MESSAGE"))}};return(x,w)=>{var D,M,P,U,F,k;return p(),E("div",hFe,[m("div",fFe,[S(kt,{src:v.value||"",name:((D=e.selectedContact)==null?void 0:D.name)||"",size:72,"allow-upload":"",onUpload:R,onDelete:O},null,8,["src","name"]),m("div",gFe,[m("h3",_Fe,I((M=e.selectedContact)==null?void 0:M.name),1),m("div",vFe,[(P=e.selectedContact)!=null&&P.identifier?(p(),E("span",EFe,[w[1]||(w[1]=m("span",{class:"i-ph-user-gear text-n-slate-10 size-4"},null,-1)),xe(" "+I((U=e.selectedContact)==null?void 0:U.identifier),1)])):$("",!0),m("span",bFe,[(F=e.selectedContact)!=null&&F.identifier?(p(),E("span",TFe)):$("",!0),xe(" "+I(x.$t("CONTACTS_LAYOUT.DETAILS.CREATED_AT",{date:b.value}))+"  "+I(x.$t("CONTACTS_LAYOUT.DETAILS.LAST_ACTIVITY",{date:A.value})),1)])])]),S(mFe,{"contact-id":(k=e.selectedContact)==null?void 0:k.id},null,8,["contact-id"])]),m("div",SFe,[S(rv,{ref_key:"contactsFormRef",ref:c,"contact-data":g.value,"is-details-view":"",onUpdate:T},null,8,["contact-data"]),S(te,{label:C(a)("CONTACTS_LAYOUT.CARD.EDIT_DETAILS_FORM.UPDATE_BUTTON"),size:"sm","is-loading":d.value,disabled:d.value||h.value,onClick:_},null,8,["label","is-loading","disabled"])]),S(js,{permissions:["administrator"]},{default:Y(()=>[m("div",AFe,[m("div",yFe,[m("h6",IFe,I(C(a)("CONTACTS_LAYOUT.DETAILS.DELETE_CONTACT")),1),m("span",CFe,I(C(a)("CONTACTS_LAYOUT.DETAILS.DELETE_CONTACT_DESCRIPTION")),1)]),S(te,{label:C(a)("CONTACTS_LAYOUT.DETAILS.DELETE_CONTACT"),color:"ruby",onClick:N},null,8,["label"])]),S(UC,{ref_key:"confirmDeleteContactDialogRef",ref:i,"selected-contact":e.selectedContact,onGoToContactsList:w[0]||(w[0]=B=>s("goToContactsList"))},null,8,["selected-contact"])]),_:1})])}}},OFe={class:"relative flex items-center h-8 rounded-lg bg-n-alpha-1 w-fit transition-all duration-200 ease-out has-[button:active]:scale-[1.01]"},RFe=["onClick"],xFe={__name:"TabBar",props:{initialActiveTab:{type:Number,default:0},tabs:{type:Array,required:!0,validator:e=>e.every(t=>typeof t.label=="string"&&(t.count?typeof t.count=="number":!0))}},emits:["tabChanged"],setup(e,{emit:t}){const n=e,s=t,a=y(()=>n.initialActiveTab),o=j([]),i=j({}),l=j(!1),r=y(()=>o.value[a.value]),c=()=>{r.value&&(i.value={left:`${r.value.offsetLeft}px`,width:`${r.value.offsetWidth}px`})};tR(r,()=>{(l.value||!r.value)&&c()}),lt(()=>{c(),Wt(()=>{l.value=!0})});const u=h=>{s("tabChanged",n.tabs[h])},d=h=>h>a.value&&h<n.tabs.length-1||h<a.value-1&&h>-1;return(h,g)=>(p(),E("div",OFe,[m("div",{class:ae(["absolute rounded-lg bg-n-solid-active shadow-sm pointer-events-none h-8 outline-1 outline outline-n-container inset-y-0",{"transition-all duration-300 ease-out":l.value}]),style:Zt(i.value)},null,6),(p(!0),E(ue,null,Ae(e.tabs,(f,b)=>(p(),E(ue,{key:b},[m("button",{ref_for:!0,ref:A=>o.value[b]=A,class:ae(["relative z-10 px-4 truncate py-1.5 text-sm border-0 outline-1 outline-transparent rounded-lg transition-all duration-200 ease-out hover:text-n-brand active:scale-[1.02]",[a.value===b?"text-n-blue-text scale-100":"text-n-slate-10 scale-[0.98]"]]),onClick:A=>u(b)},I(f.label)+" "+I(f.count?`(${f.count})`:""),11,RFe),b<e.tabs.length-1?(p(),E("div",{key:0,class:ae(["w-px h-3.5 rounded my-auto transition-colors duration-300 ease-in-out",d(b)?"bg-n-strong":"bg-transparent dark:bg-transparent"])},null,2)):$("",!0)],64))),128))]))}},wFe={class:"flex flex-col gap-6 py-6"},$Fe={class:"flex items-center gap-3"},MFe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},LFe={key:1},DFe={key:2,class:"px-6 py-6 text-sm leading-6 text-center text-n-slate-11"},PFe={__name:"ContactNotes",setup(e){const{t}=be(),n=rt(),s=wt(),a=gn({message:""}),o=_e("getCurrentUser"),i=_e("contactNotes/getAllNotesByContactId"),l=_e("contactNotes/getUIFlags"),r=y(()=>l.value.isFetching),c=y(()=>l.value.isCreating),u=y(()=>i.value(s.params.contactId)),d=b=>{var v,T;return((v=b==null?void 0:b.user)==null?void 0:v.id)===o.value.id?t("CONTACTS_LAYOUT.SIDEBAR.NOTES.YOU"):((T=b==null?void 0:b.user)==null?void 0:T.name)||"Bot"},h=b=>{if(!b)return;const{contactId:A}=s.params;n.dispatch("contactNotes/create",{content:b,contactId:A}),a.message=""},g=b=>{if(!b)return;const{contactId:A}=s.params;n.dispatch("contactNotes/delete",{noteId:b,contactId:A})};return Os({"$mod+Enter":{action:()=>h(a.message),allowOnFocusedInput:!0}}),(b,A)=>(p(),E("div",wFe,[S(Ks,{modelValue:a.message,"onUpdate:modelValue":A[1]||(A[1]=v=>a.message=v),placeholder:C(t)("CONTACTS_LAYOUT.SIDEBAR.NOTES.PLACEHOLDER"),"focus-on-mount":"",class:"[&>div]:!border-transparent [&>div]:px-4 [&>div]:py-4 px-6"},{actions:Y(()=>[m("div",$Fe,[S(te,{variant:"link",color:"blue",size:"sm",label:C(t)("CONTACTS_LAYOUT.SIDEBAR.NOTES.SAVE"),class:"hover:no-underline","is-loading":c.value,disabled:!a.message||c.value,onClick:A[0]||(A[0]=v=>h(a.message))},null,8,["label","is-loading","disabled"])])]),_:1},8,["modelValue","placeholder"]),r.value?(p(),E("div",MFe,[S(An)])):u.value.length>0?(p(),E("div",LFe,[(p(!0),E(ue,null,Ae(u.value,v=>(p(),L($C,{key:v.id,class:"mx-6 py-4",note:v,"written-by":d(v),"allow-delete":"",onDelete:g},null,8,["note","written-by"]))),128))])):(p(),E("p",DFe,I(C(t)("CONTACTS_LAYOUT.SIDEBAR.NOTES.EMPTY_STATE")),1))]))}},kFe={class:"flex items-end w-full gap-2 pb-1"},BFe={class:"w-full mb-0 text-sm leading-7 text-n-slate-12 line-clamp-2"},UFe={class:"flex items-center flex-shrink-0 gap-2 pb-2"},FFe={key:1,class:"inline-flex items-center justify-center rounded-full size-5 bg-n-brand"},GFe={class:"text-xs font-semibold text-white"},VFe={__name:"CardMessagePreview",props:{conversation:{type:Object,required:!0}},setup(e){const t=e,{t:n}=be(),{getPlainText:s}=sa(),a=y(()=>{const{lastNonActivityMessage:l={},customAttributes:r={}}=t.conversation,{email:{subject:c}={}}=r;return s(c||(l==null?void 0:l.content)||n("CHAT_LIST.NO_CONTENT"))}),o=y(()=>{const{meta:{assignee:l={}}={}}=t.conversation;return{name:l.name??l.availableName,thumbnail:l.thumbnail,status:l.availabilityStatus}}),i=y(()=>{const{unreadCount:l}=t.conversation;return l});return(l,r)=>(p(),E("div",kFe,[m("p",BFe,I(a.value),1),m("div",UFe,[o.value.name?(p(),L(kt,{key:0,name:o.value.name,src:o.value.thumbnail,size:20,status:o.value.status,"rounded-full":""},null,8,["name","src","status"])):$("",!0),i.value>0?(p(),E("div",FFe,[m("span",GFe,I(i.value),1)])):$("",!0)])]))}},HFe={__name:"CardLabels",props:{conversationLabels:{type:Array,required:!0},accountLabels:{type:Array,required:!0}},setup(e){const t=e,n=Object.freeze({DEFAULT_WIDTH:80,CHAR_WIDTH:{SHORT:8,LONG:6},BASE_WIDTH:12,THRESHOLD:5}),s=j(null),a=j(1),o=y(()=>{var d;const u=new Set(t.conversationLabels);return(d=t.accountLabels)==null?void 0:d.filter(({title:h})=>u.has(h))}),i=({title:u=""})=>{const d=u.length>n.THRESHOLD?n.CHAR_WIDTH.LONG:n.CHAR_WIDTH.SHORT;return u.length*d+n.BASE_WIDTH},l=u=>u.length?u.reduce((h,g)=>h+i(g),0)/u.length:n.DEFAULT_WIDTH,r=y(()=>{var u;return(u=o.value)==null?void 0:u.slice(0,a.value)}),c=()=>{if(!s.value)return;const u=s.value.offsetWidth,d=l(o.value);a.value=Math.max(1,Math.floor(u/d))};return(u,d)=>{const h=Qe("resize");return re((p(),E("div",{ref_key:"containerRef",ref:s,class:"flex items-center gap-2.5 w-full min-w-0 h-6 overflow-hidden"},[(p(!0),E(ue,null,Ae(r.value,(g,f)=>(p(),E("div",{key:g.id,class:ae(["flex items-center gap-1.5 min-w-0",[f!==r.value.length-1?"flex-shrink-0 text-ellipsis":"flex-shrink"]])},[m("div",{style:Zt({backgroundColor:g.color}),class:"size-1.5 rounded-full flex-shrink-0"},null,4),m("span",{class:ae(["text-sm text-n-slate-10 whitespace-nowrap",{truncate:f===r.value.length-1}])},I(g.title),3)],2))),128))])),[[h,c]])}}},WFe={class:"flex items-center min-w-fit gap-0.5 h-6"},zFe={class:"flex items-center justify-center size-4"},YFe=6e4,GC={__name:"SLACardLabel",props:{conversation:{type:Object,required:!0}},setup(e,{expose:t}){const n=e,s=j(null),a=j({threshold:null,isSlaMissed:!1,type:null,icon:null}),o=h=>Object.keys(h).reduce((g,f)=>(g[f.replace(/([A-Z])/g,"_$1").toLowerCase()]=h[f],g),{}),i=y(()=>{var h;return(h=n.conversation)==null?void 0:h.appliedSla}),l=y(()=>{var h;return(h=a.value)==null?void 0:h.isSlaMissed}),r=y(()=>{var h,g;return((h=a.value)==null?void 0:h.threshold)&&((g=i.value)==null?void 0:g.id)}),c=y(()=>{var h,g;return(g=(h=a.value)==null?void 0:h.type)==null?void 0:g.toUpperCase()}),u=()=>{a.value=vS({appliedSla:o(i.value||{}),chat:n.conversation})},d=()=>{s.value=setTimeout(()=>{u(),d()},YFe)};return lt(()=>{u(),d()}),ei(()=>{s.value&&clearTimeout(s.value)}),it(()=>n.conversation,u),t({hasSlaThreshold:r}),(h,g)=>(p(),E("div",WFe,[m("div",zFe,[(p(),E("svg",{width:"10",height:"13",viewBox:"0 0 10 13",fill:"none",class:ae(l.value?"fill-n-ruby-10":"fill-n-slate-9"),xmlns:"http://www.w3.org/2000/svg"},g[0]||(g[0]=[m("path",{d:"M4.55091 12.412C7.44524 12.412 9.37939 10.4571 9.37939 7.51446C9.37939 2.63072 5.21405 0.599854 2.36808 0.599854C1.81546 0.599854 1.45626 0.800176 1.45626 1.1801C1.45626 1.32516 1.52534 1.48404 1.64277 1.62219C2.27828 2.38204 2.92069 3.27314 2.93451 4.36455C2.93451 4.5925 2.9276 4.78592 2.76181 5.08295L3.05194 5.03459C2.81017 4.21949 2.18848 3.63234 1.5806 3.63234C1.32501 3.63234 1.15232 3.81884 1.15232 4.09514C1.15232 4.23331 1.19377 4.56488 1.19377 4.79974C1.19377 5.95332 0.26123 6.69935 0.26123 8.67495C0.26123 10.92 1.97434 12.412 4.55091 12.412ZM4.68906 10.8923C3.65982 10.8923 2.96905 10.2637 2.96905 9.33119C2.96905 8.3572 3.66672 8.01181 3.75652 7.38322C3.76344 7.32796 3.79107 7.31414 3.83251 7.34867C4.08809 7.57663 4.24697 7.85293 4.37822 8.1776C4.67525 7.77696 4.81341 6.9204 4.73051 6.0293C4.72361 5.97404 4.75814 5.94642 4.80649 5.96713C6.02916 6.53357 6.65085 7.74241 6.65085 8.82693C6.65085 9.92527 6.00844 10.8923 4.68906 10.8923Z"},null,-1)]),2))]),m("span",{class:ae(["text-sm truncate",l.value?"text-n-ruby-11":"text-n-slate-11"])},I(`${c.value}: ${a.value.threshold}`),3)]))}},jFe={class:"flex flex-col w-full gap-1"},KFe={class:"flex items-center justify-between w-full gap-2 py-1 h-7"},XFe={class:"mb-0 text-sm leading-7 text-n-slate-12 line-clamp-1"},qFe={key:0,class:"inline-flex items-center justify-center flex-shrink-0 rounded-full size-5 bg-n-brand"},ZFe={class:"text-xs font-semibold text-white"},QFe={key:0,class:"w-px h-3 bg-n-slate-4"},JFe={class:"overflow-hidden"},e7e={__name:"CardMessagePreviewWithMeta",props:{conversation:{type:Object,required:!0},accountLabels:{type:Array,required:!0}},setup(e,{expose:t}){const n=e,{t:s}=be(),a=j(null),{getPlainText:o}=sa(),i=y(()=>{const{lastNonActivityMessage:u={},customAttributes:d={}}=n.conversation,{email:{subject:h}={}}=d;return o(h||(u==null?void 0:u.content)||s("CHAT_LIST.NO_CONTENT"))}),l=y(()=>{const{meta:{assignee:u={}}={}}=n.conversation;return{name:u.name??u.availableName,thumbnail:u.thumbnail,status:u.availabilityStatus}}),r=y(()=>{const{unreadCount:u}=n.conversation;return u}),c=y(()=>{var u,d;return((u=a.value)==null?void 0:u.hasSlaThreshold)&&((d=n.conversation)==null?void 0:d.slaPolicyId)});return t({hasSlaThreshold:c}),(u,d)=>(p(),E("div",jFe,[m("div",KFe,[m("p",XFe,I(i.value),1),r.value>0?(p(),E("div",qFe,[m("span",ZFe,I(r.value),1)])):$("",!0)]),m("div",{class:ae(["grid items-center gap-2.5 h-7",c.value?"grid-cols-[auto_auto_1fr_20px]":"grid-cols-[1fr_20px]"])},[re(S(GC,{ref_key:"slaCardLabelRef",ref:a,conversation:e.conversation},null,8,["conversation"]),[[rn,c.value]]),c.value?(p(),E("div",QFe)):$("",!0),m("div",JFe,[S(HFe,{"conversation-labels":e.conversation.labels,"account-labels":e.accountLabels},null,8,["conversation-labels","account-labels"])]),l.value.name?(p(),L(kt,{key:1,name:l.value.name,src:l.value.thumbnail,size:20,status:l.value.status,"rounded-full":""},null,8,["name","src","status"])):$("",!0)],2)]))}},t7e={class:"flex flex-col w-full gap-1 min-w-0"},n7e={class:"flex items-center justify-between h-6 gap-2"},s7e={class:"text-base font-medium truncate text-n-slate-12"},a7e={class:"flex items-center gap-2"},o7e={class:"flex items-center justify-center flex-shrink-0 rounded-full bg-n-alpha-2 size-5"},i7e={class:"text-sm text-n-slate-10"},l7e={__name:"ConversationCard",props:{conversation:{type:Object,required:!0},contact:{type:Object,required:!0},stateInbox:{type:Object,required:!0},accountLabels:{type:Array,required:!0}},setup(e){const t=e,n=Ft(),s=wt(),a=j(null),o=y(()=>t.contact),i=y(()=>{var b;return(b=o.value)==null?void 0:b.name}),l=y(()=>{var b;return(b=o.value)==null?void 0:b.thumbnail}),r=y(()=>{var b;return(b=o.value)==null?void 0:b.availabilityStatus}),c=y(()=>t.stateInbox),u=y(()=>{var b;return(b=c.value)==null?void 0:b.name}),d=y(()=>{const{channelType:b,medium:A}=c.value;return ni(b,A)}),h=y(()=>{var A;const b=(A=t.conversation)==null?void 0:A.timestamp;return b?Lc(us(b)):""}),g=y(()=>{var A;const{labels:b=[]}=t.conversation;return!((A=a.value)!=null&&A.hasSlaThreshold)&&b.length===0}),f=b=>{const A=vt(bg({accountId:s.params.accountId,id:t.conversation.id}));if(b.metaKey||b.ctrlKey){window.open(window.chatwootConfig.hostURL+A,"_blank","noopener noreferrer nofollow");return}n.push({path:A})};return(b,A)=>{const v=Qe("tooltip");return p(),E("div",{role:"button",class:"flex w-full gap-3 px-3 py-4 transition-all duration-300 ease-in-out cursor-pointer",onClick:f},[S(kt,{name:i.value,src:l.value,size:24,status:r.value,"rounded-full":""},null,8,["name","src","status"]),m("div",t7e,[m("div",n7e,[m("h4",s7e,I(i.value),1),m("div",a7e,[S(lv,{priority:e.conversation.priority||null},null,8,["priority"]),re((p(),E("div",o7e,[S(dt,{icon:d.value,class:"flex-shrink-0 text-n-slate-11 size-3"},null,8,["icon"])])),[[v,u.value,void 0,{left:!0}]]),m("span",i7e,I(h.value),1)])]),re(S(VFe,{conversation:e.conversation},null,8,["conversation"]),[[rn,g.value]]),re(S(e7e,{ref_key:"cardMessagePreviewWithMetaRef",ref:a,conversation:e.conversation,"account-labels":e.accountLabels},null,8,["conversation","account-labels"]),[[rn,!g.value]])])])}}},r7e={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},c7e={key:1,class:"px-6 py-4 divide-y divide-n-strong [&>*:hover]:!border-y-transparent [&>*:hover+*]:!border-t-transparent"},u7e={key:2,class:"px-6 py-10 text-sm leading-6 text-center text-n-slate-11"},d7e={__name:"ContactHistory",setup(e){const{t}=be(),n=wt(),s=_e("contactConversations/getAllConversationsByContactId"),a=_e("contacts/getContactById"),o=_e("inboxes/getInboxById"),i=_e("labels/getLabels"),l=y(()=>i.value),r=_e("contactConversations/getUIFlags"),c=y(()=>r.value.isFetching),u=y(()=>s.value(n.params.contactId));return(d,h)=>c.value?(p(),E("div",r7e,[S(An)])):u.value.length>0?(p(),E("div",c7e,[(p(!0),E(ue,null,Ae(u.value,g=>(p(),L(l7e,{key:g.id,conversation:g,contact:C(a)(g.meta.sender.id),"state-inbox":C(o)(g.inboxId),"account-labels":l.value,class:"rounded-none hover:rounded-xl hover:bg-n-alpha-1 dark:hover:bg-n-alpha-3"},null,8,["conversation","contact","state-inbox","account-labels"]))),128))])):(p(),E("p",u7e,I(C(t)("CONTACTS_LAYOUT.SIDEBAR.HISTORY.EMPTY_STATE")),1))}},p7e={class:"flex flex-col"},m7e={class:"flex flex-col gap-2"},h7e={class:"flex items-center justify-between h-5 gap-2"},f7e={class:"text-sm text-n-slate-12"},g7e={class:"flex items-center justify-center w-24 h-5 text-xs rounded-md text-n-teal-11 bg-n-alpha-2"},_7e={class:"relative flex justify-center gap-2 top-4"},v7e={class:"flex flex-col gap-2"},E7e={class:"flex items-center justify-between h-5 gap-2"},b7e={class:"text-sm text-n-slate-12"},T7e={class:"flex items-center justify-center w-24 h-5 text-xs rounded-md text-n-ruby-11 bg-n-alpha-2"},S7e={class:"border border-n-strong h-[60px] gap-2 flex items-center rounded-xl p-3"},A7e={class:"flex flex-col w-full min-w-0 gap-1"},y7e={class:"text-sm leading-4 truncate text-n-slate-11"},I7e={class:"text-sm leading-4 truncate text-n-slate-11"},C7e={__name:"ContactMergeForm",props:{selectedContact:{type:Object,required:!0},primaryContactId:{type:[Number,null],default:null},primaryContactList:{type:Array,default:()=>[]},isSearching:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},errorMessage:{type:String,default:""}},emits:["update:primaryContactId","search"],setup(e,{emit:t}){const n=t,{t:s}=be();return(a,o)=>(p(),E("div",p7e,[m("div",m7e,[m("div",h7e,[m("label",f7e,I(C(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PRIMARY")),1),m("span",g7e,I(C(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PRIMARY_HELP_LABEL")),1)]),S(Ha,{id:"inbox","use-api-results":"","model-value":e.primaryContactId,options:e.primaryContactList,"empty-state":e.isSearching?C(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.IS_SEARCHING"):C(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.EMPTY_STATE"),"search-placeholder":C(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.SEARCH_PLACEHOLDER"),placeholder:C(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PLACEHOLDER"),"has-error":e.hasError,message:e.errorMessage,class:"[&>div>button]:bg-n-alpha-black2","onUpdate:modelValue":o[0]||(o[0]=i=>n("update:primaryContactId",i)),onSearch:o[1]||(o[1]=i=>n("search",i))},null,8,["model-value","options","empty-state","search-placeholder","placeholder","has-error","message"])]),m("div",_7e,[(p(),E(ue,null,Ae(3,i=>m("div",{key:i,class:"relative w-4 h-8"},o[2]||(o[2]=[m("div",{class:"absolute w-0 h-0 border-l-[4px] border-r-[4px] border-b-[6px] border-l-transparent border-r-transparent border-n-strong ltr:translate-x-[4px] rtl:-translate-x-[4px] -translate-y-[4px]"},null,-1),m("div",{class:"absolute w-[1px] h-full bg-n-strong left-1/2 transform -translate-x-1/2"},null,-1)]))),64))]),m("div",v7e,[m("div",E7e,[m("label",b7e,I(C(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PARENT")),1),m("span",T7e,I(C(s)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PARENT_HELP_LABEL")),1)]),m("div",S7e,[S(kt,{name:e.selectedContact.name||"",src:e.selectedContact.thumbnail||"",size:32,"rounded-full":""},null,8,["name","src"]),m("div",A7e,[m("span",y7e,I(e.selectedContact.name),1),m("span",I7e,I(e.selectedContact.email),1)])])])]))}},N7e={class:"flex flex-col gap-8 px-6 py-6"},O7e={class:"flex flex-col gap-2"},R7e={class:"text-base text-n-slate-12"},x7e={class:"text-sm text-n-slate-11"},w7e={class:"flex items-center justify-between gap-3"},$7e={__name:"ContactMerge",props:{selectedContact:{type:Object,required:!0}},emits:["goToContactsList","resetTab"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=rt(),i=wt(),l=gn({primaryContactId:null}),r=_e("contacts/getUIFlags"),c=j([]),u=j(!1),h=bt({primaryContactId:{required:Ye}},l),g=y(()=>r.value.isMerging),f=y(()=>{var T;return((T=c.value)==null?void 0:T.map(_=>({value:_.id,label:`(ID: ${_.id}) ${_.name}`})))??[]}),b=Ua(async T=>{u.value=!0,c.value=[];try{const{data:{payload:_}}=await tu.search(T);c.value=_.filter(N=>N.id!==n.selectedContact.id),u.value=!1}catch{ne(a("CONTACTS_LAYOUT.SIDEBAR.MERGE.SEARCH_ERROR_MESSAGE"))}finally{u.value=!1}},300,!1),A=()=>{l.primaryContactId===null&&s("resetTab"),l.primaryContactId=null,c.value=[],u.value=!1},v=async()=>{if(await h.value.$validate()){zt(gl.MERGED_CONTACTS);try{await o.dispatch("contacts/merge",{childId:n.selectedContact.id||i.params.contactId,parentId:l.primaryContactId}),s("goToContactsList"),ne(a("CONTACTS_LAYOUT.SIDEBAR.MERGE.SUCCESS_MESSAGE")),A()}catch{ne(a("CONTACTS_LAYOUT.SIDEBAR.MERGE.ERROR_MESSAGE"))}}};return(T,_)=>(p(),E("div",N7e,[m("div",O7e,[m("h4",R7e,I(C(a)("CONTACTS_LAYOUT.SIDEBAR.MERGE.TITLE")),1),m("p",x7e,I(C(a)("CONTACTS_LAYOUT.SIDEBAR.MERGE.DESCRIPTION")),1)]),S(C7e,{"primary-contact-id":l.primaryContactId,"onUpdate:primaryContactId":_[0]||(_[0]=N=>l.primaryContactId=N),"selected-contact":e.selectedContact,"primary-contact-list":f.value,"is-searching":u.value,"has-error":!!C(h).primaryContactId.$error,"error-message":C(h).primaryContactId.$error?C(a)("CONTACTS_LAYOUT.SIDEBAR.MERGE.PRIMARY_REQUIRED_ERROR"):"",onSearch:C(b)},null,8,["primary-contact-id","selected-contact","primary-contact-list","is-searching","has-error","error-message","onSearch"]),m("div",w7e,[S(te,{variant:"faded",color:"slate",label:C(a)("CONTACTS_LAYOUT.SIDEBAR.MERGE.BUTTONS.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:A},null,8,["label"]),S(te,{label:C(a)("CONTACTS_LAYOUT.SIDEBAR.MERGE.BUTTONS.CONFIRM"),class:"w-full","is-loading":g.value,disabled:g.value,onClick:v},null,8,["label","is-loading","disabled"])])]))}},M7e={class:"relative flex items-center"},L7e={key:0,class:"flex items-center gap-1"},D7e={__name:"ListAttribute",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},emits:["update","delete"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),[o,i]=yn(),l=y(()=>{var c;return((c=n.attribute.attributeValues)==null?void 0:c.map(u=>({label:u,value:u,action:"select",isSelected:u===n.attribute.value})))||[]}),r=async c=>{s("update",c.value),i(!1)};return(c,u)=>{const d=Qe("on-clickaway");return p(),E("div",{class:ae(["flex items-center w-full min-w-0 gap-2",{"justify-start":e.isEditingView,"justify-end":!e.isEditingView}])},[re((p(),E("div",M7e,[m("span",{class:ae(["min-w-0 text-sm",{"cursor-pointer text-n-slate-11 hover:text-n-slate-12 py-2 select-none font-medium":!e.isEditingView,"text-n-slate-12 truncate flex-1":e.isEditingView}]),onClick:u[0]||(u[0]=h=>C(i)(!n.isEditingView))},I(e.attribute.value||C(a)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.TRIGGER.SELECT")),3),C(o)?(p(),L(qs,{key:0,"menu-items":l.value,"show-search":"",class:ae(["w-48 mt-2 top-full",{"ltr:right-0 rtl:left-0":!e.isEditingView,"ltr:left-0 rtl:right-0":e.isEditingView}]),onAction:u[1]||(u[1]=h=>r(h))},null,8,["menu-items","class"])):$("",!0)])),[[d,()=>C(i)(!1)]]),e.isEditingView?(p(),E("div",L7e,[S(te,{variant:"faded",color:"slate",icon:"i-lucide-pencil",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:u[2]||(u[2]=h=>C(i)())}),S(te,{variant:"faded",color:"ruby",icon:"i-lucide-trash",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:u[3]||(u[3]=h=>s("delete"))})])):$("",!0)],2)}}},P7e={__name:"CheckboxAttribute",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},emits:["update","delete"],setup(e,{emit:t}){const n=e,s=t,a=j(!!n.attribute.value),o=i=>{s("update",i)};return(i,l)=>(p(),E("div",{class:ae(["flex items-center w-full gap-2",{"justify-start":e.isEditingView,"justify-end":!e.isEditingView}])},[S(va,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=r=>a.value=r),onChange:o},null,8,["modelValue"]),e.isEditingView?(p(),L(te,{key:0,variant:"faded",color:"ruby",icon:"i-lucide-trash",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:l[1]||(l[1]=r=>s("delete"))})):$("",!0)],2))}},k7e={key:1,class:"flex items-center gap-1"},B7e={key:2,class:"flex items-center w-full"},U7e={__name:"DateAttribute",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},emits:["update","delete"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=j(!1),i=j(n.attribute.value||""),r=bt({editedValue:{required:Ye,isDate:f=>new Date(f).toISOString()}},{editedValue:i}),c=y(()=>n.attribute.value?new Date(n.attribute.value).toLocaleDateString():a("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.TRIGGER.INPUT")),u=y(()=>r.value.$errors.length>0),d=y({get(){const f=i.value??n.attribute.value;return f?new Date(f).toISOString().slice(0,10):o.value&&!u.value?new Date().toISOString().slice(0,10):""},set(f){i.value=f&&new Date(f).toISOString()}}),h=f=>{o.value=typeof f=="boolean"?f:!o.value,o.value&&!i.value&&(r.value.$reset(),i.value=new Date().toISOString())},g=async()=>{await r.value.$validate()&&(s("update",Wg(i.value)),o.value=!1)};return(f,b)=>{const A=Qe("on-clickaway");return p(),E("div",{class:ae(["flex items-center w-full min-w-0 gap-2",{"justify-start":e.isEditingView,"justify-end":!e.isEditingView}])},[o.value?$("",!0):(p(),E("span",{key:0,class:ae(["min-w-0 text-sm",{"cursor-pointer text-n-slate-11 hover:text-n-slate-12 py-2 select-none font-medium":!e.isEditingView,"text-n-slate-12 truncate":e.isEditingView}]),onClick:b[0]||(b[0]=v=>h(!e.isEditingView))},I(c.value),3)),e.isEditingView&&!o.value?(p(),E("div",k7e,[S(te,{variant:"faded",color:"slate",icon:"i-lucide-pencil",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:b[1]||(b[1]=v=>h(!0))}),S(te,{variant:"faded",color:"ruby",icon:"i-lucide-trash",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:b[2]||(b[2]=v=>s("delete"))})])):$("",!0),o.value?re((p(),E("div",B7e,[S(Tt,{modelValue:d.value,"onUpdate:modelValue":b[3]||(b[3]=v=>d.value=v),type:"date",class:"w-full [&>p]:absolute [&>p]:mt-0.5 [&>p]:top-8 ltr:[&>p]:left-0 rtl:[&>p]:right-0",message:u.value?C(a)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.INVALID_DATE"):"","message-type":u.value?"error":"info",autofocus:"","custom-input-class":"h-8 ltr:rounded-r-none rtl:rounded-l-none",onKeyup:wn(g,["enter"])},null,8,["modelValue","message","message-type"]),S(te,{icon:"i-lucide-check",color:u.value?"ruby":"blue",size:"sm",class:"flex-shrink-0 ltr:rounded-l-none rtl:rounded-r-none",onClick:g},null,8,["color"])])),[[A,()=>h(!1)]]):$("",!0)],2)}}},F7e=["href"],G7e={key:1,class:"flex items-center gap-1"},V7e={key:2,class:"flex items-center w-full"},H7e={__name:"OtherAttribute",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},emits:["update","delete"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=j(!1),i=j(n.attribute.value||""),l=y(()=>n.attribute.attributeDisplayType==="link"),r=y(()=>n.attribute.attributeDisplayType==="text"),c=y(()=>n.attribute.attributeDisplayType==="number"),u=y(()=>({editedValue:{required:Ye,...l.value&&{url:v=>!v||hf(v)},...r.value&&n.attribute.regexPattern&&{regexValidation:v=>v?fg(n.attribute.regexPattern).test(v):!0}}})),d=bt(u,{editedValue:i}),h=y(()=>d.value.$error),g=y(()=>{var v,T,_;return h.value?l.value&&((v=d.value.editedValue.url)!=null&&v.$invalid)?a("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.INVALID_URL"):r.value&&n.attribute.regexPattern&&((T=d.value.editedValue.regexValidation)!=null&&T.$invalid)?n.attribute.regexCue||a("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.INVALID_INPUT"):c.value&&((_=d.value.editedValue.required)!=null&&_.$invalid)?a("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.INVALID_NUMBER"):a("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.VALIDATIONS.REQUIRED"):""}),f=y(()=>{switch(n.attribute.attributeDisplayType){case"link":return"url";case"number":return"number";default:return"text"}}),b=v=>{o.value=typeof v=="boolean"?v:!o.value,o.value&&(d.value.$reset(),i.value=n.attribute.value||"")},A=async()=>{await d.value.$validate()&&(s("update",i.value),b(!1))};return(v,T)=>{const _=Qe("on-clickaway");return p(),E("div",{class:ae(["flex items-center w-full min-w-0 gap-2",{"justify-start":e.isEditingView,"justify-end":!e.isEditingView}])},[o.value?$("",!0):(p(),E("span",{key:0,class:ae(["min-w-0 text-sm",{"cursor-pointer text-n-slate-11 hover:text-n-slate-12 py-2 select-none font-medium":!e.isEditingView,"text-n-slate-12 truncate":e.isEditingView&&!l.value,"truncate hover:text-n-brand text-n-blue-text":e.isEditingView&&l.value}]),onClick:T[1]||(T[1]=N=>b(!e.isEditingView))},[l.value&&e.attribute.value&&e.isEditingView?(p(),E("a",{key:0,href:e.attribute.value,target:"_blank",rel:"noopener noreferrer",class:"hover:underline",onClick:T[0]||(T[0]=Ve(()=>{},["stop"]))},I(e.attribute.value),9,F7e)):(p(),E(ue,{key:1},[xe(I(e.attribute.value||C(a)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.TRIGGER.INPUT")),1)],64))],2)),e.isEditingView&&!o.value?(p(),E("div",G7e,[S(te,{variant:"faded",color:"slate",icon:"i-lucide-pencil",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:T[2]||(T[2]=N=>b(!0))}),S(te,{variant:"faded",color:"ruby",icon:"i-lucide-trash",size:"xs",class:"flex-shrink-0 opacity-0 group-hover/attribute:opacity-100 hover:no-underline",onClick:T[3]||(T[3]=N=>s("delete"))})])):$("",!0),o.value?re((p(),E("div",V7e,[S(Tt,{modelValue:i.value,"onUpdate:modelValue":T[4]||(T[4]=N=>i.value=N),placeholder:C(a)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.TRIGGER.INPUT"),type:f.value,class:"w-full [&>p]:absolute [&>p]:mt-0.5 [&>p]:top-8 ltr:[&>p]:left-0 rtl:[&>p]:right-0",autofocus:"",message:g.value,"message-type":h.value?"error":"info","custom-input-class":"h-8 ltr:rounded-r-none rtl:rounded-l-none",onKeyup:wn(A,["enter"])},null,8,["modelValue","placeholder","type","message","message-type"]),S(te,{icon:"i-lucide-check",color:h.value?"ruby":"blue",size:"sm",class:"flex-shrink-0 ltr:rounded-l-none rtl:rounded-r-none",onClick:A},null,8,["color"])])),[[_,()=>b(!1)]]):$("",!0)],2)}}},W7e={class:"flex items-center justify-between truncate"},z7e={class:"text-sm font-medium truncate text-n-slate-12"},jT={__name:"ContactCustomAttributeItem",props:{attribute:{type:Object,required:!0},isEditingView:{type:Boolean,default:!1}},setup(e){const t=e,n=rt(),{t:s}=be(),a=wt(),o=async()=>{var c;try{await n.dispatch("contacts/deleteCustomAttributes",{id:a.params.contactId,customAttributes:[t.attribute.attributeKey]}),ne(s("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.API.DELETE_SUCCESS_MESSAGE"))}catch(u){ne(((c=u==null?void 0:u.response)==null?void 0:c.message)||s("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.API.DELETE_ERROR"))}},i=async c=>{var u;try{await n.dispatch("contacts/update",{id:a.params.contactId,customAttributes:{[t.attribute.attributeKey]:c}}),ne(s("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.API.SUCCESS_MESSAGE"))}catch(d){ne(((u=d==null?void 0:d.response)==null?void 0:u.message)||s("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.API.UPDATE_ERROR"))}},l={list:D7e,checkbox:P7e,date:U7e,default:H7e},r=y(()=>l[t.attribute.attributeDisplayType]||l.default);return(c,u)=>(p(),E("div",{class:ae(["grid grid-cols-[140px,1fr] group/attribute items-center w-full gap-2",e.isEditingView?"min-h-10":"min-h-11"])},[m("div",W7e,[m("span",z7e,I(e.attribute.attributeDisplayName),1)]),(p(),L(ds(r.value),{attribute:e.attribute,"is-editing-view":e.isEditingView,onUpdate:i,onDelete:o},null,40,["attribute","is-editing-view"]))],2))}},Y7e={key:0,class:"flex flex-col gap-6 px-6 py-6"},j7e={key:0,class:"flex flex-col gap-2"},K7e={key:1,class:"flex items-center gap-3"},X7e={class:"text-sm font-medium text-n-slate-10"},q7e={class:"flex flex-col gap-3"},Z7e={key:0,class:"relative"},Q7e=["placeholder"],J7e={key:1,class:"flex items-center justify-start h-11"},eGe={class:"text-sm text-n-slate-11"},tGe={key:2,class:"flex flex-col gap-2"},nGe={key:1,class:"px-6 py-10 text-sm leading-6 text-center text-n-slate-11"},sGe={__name:"ContactCustomAttributes",props:{selectedContact:{type:Object,default:null}},setup(e){const t=e,{t:n}=be(),{uiSettings:s}=tn(),a=j(""),o=_e("attributes/getContactAttributes")||[],i=y(()=>{var A;return((A=o.value)==null?void 0:A.length)>0}),l=(A,v,T)=>!A.length||!v?[]:A.reduce((_,N)=>{const{attributeKey:R}=N;return T(R,v)&&_.push({...N,value:v[R]??""}),_},[]),r=y(()=>s.value.conversation_elements_order_conversation_contact_panel??[]),c=A=>{const v=r.value;if(!(v!=null&&v.length))return A;const T=new Map(v.map((_,N)=>[_,N]));return[...A].sort((_,N)=>{const R=T.get(_.attributeKey)??1/0,O=T.get(N.attributeKey)??1/0;return R-O})},u=y(()=>{var v;const A=l(o.value,(v=t.selectedContact)==null?void 0:v.customAttributes,(T,_)=>T in _);return c(A)}),d=y(()=>{var v;const A=l(o.value,(v=t.selectedContact)==null?void 0:v.customAttributes,(T,_)=>!(T in _));return c(A)}),h=y(()=>{var A;return(A=d.value)==null?void 0:A.filter(v=>v.attributeDisplayName.toLowerCase().includes(a.value.toLowerCase()))}),g=y(()=>{var A;return(A=d.value)==null?void 0:A.length}),f=y(()=>g.value===0),b=y(()=>u.value.length===0);return(A,v)=>i.value?(p(),E("div",Y7e,[b.value?$("",!0):(p(),E("div",j7e,[(p(!0),E(ue,null,Ae(u.value,T=>(p(),L(jT,{key:T.id,"is-editing-view":"",attribute:T},null,8,["attribute"]))),128))])),f.value?$("",!0):(p(),E("div",K7e,[v[1]||(v[1]=m("div",{class:"flex-1 h-[1px] bg-n-slate-5"},null,-1)),m("span",X7e,I(C(n)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.UNUSED_ATTRIBUTES",{count:g.value})),1),v[2]||(v[2]=m("div",{class:"flex-1 h-[1px] bg-n-slate-5"},null,-1))])),m("div",q7e,[f.value?$("",!0):(p(),E("div",Z7e,[v[3]||(v[3]=m("span",{class:"absolute i-lucide-search size-3.5 top-2 left-3"},null,-1)),re(m("input",{"onUpdate:modelValue":v[0]||(v[0]=T=>a.value=T),type:"search",placeholder:C(n)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.SEARCH_PLACEHOLDER"),class:"w-full h-8 py-2 pl-10 pr-2 text-sm reset-base outline-none border-none rounded-lg bg-n-alpha-black2 dark:bg-n-solid-1 text-n-slate-12"},null,8,Q7e),[[gt,a.value]])])),h.value.length===0&&!f.value?(p(),E("div",J7e,[m("p",eGe,I(C(n)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.NO_ATTRIBUTES")),1)])):$("",!0),f.value?$("",!0):(p(),E("div",tGe,[(p(!0),E(ue,null,Ae(h.value,T=>(p(),L(jT,{key:T.id,attribute:T},null,8,["attribute"]))),128))]))])])):(p(),E("p",nGe,I(C(n)("CONTACTS_LAYOUT.SIDEBAR.ATTRIBUTES.EMPTY_STATE")),1))}},aGe={class:"flex flex-col justify-between flex-1 h-full m-0 overflow-auto bg-n-background"},oGe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},iGe={class:"px-6"},lGe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},id={__name:"ContactManageView",setup(e){const t=rt(),n=wt(),s=Ft(),a=_e("contacts/getContactById"),o=_e("contacts/getUIFlags"),i=j("attributes"),l=j(null),r=y(()=>o.value.isFetchingItem),c=y(()=>o.value.isMerging),u=y(()=>o.value.isUpdating),d=y(()=>a.value(n.params.contactId)),h=y(()=>r.value||c.value),{t:g}=be(),f=[{key:"ATTRIBUTES",value:"attributes"},{key:"HISTORY",value:"history"},{key:"NOTES",value:"notes"},{key:"MERGE",value:"merge"}],b=y(()=>f.map(w=>({label:g(`CONTACTS_LAYOUT.SIDEBAR.TABS.${w.key}`),value:w.value}))),A=y(()=>f.findIndex(w=>w.value===i.value)),v=()=>{var w;(w=window.history.state)!=null&&w.back||window.history.length>1?s.back():s.push(`/app/accounts/${n.params.accountId}/contacts?page=1`)},T=async()=>{n.params.contactId&&(await t.dispatch("contacts/show",{id:n.params.contactId}),await t.dispatch("contacts/fetchContactableInbox",n.params.contactId))},_=w=>{i.value=w.value},N=()=>{const{contactId:w}=n.params;w&&t.dispatch("contactNotes/get",{contactId:w})},R=()=>{const{contactId:w}=n.params;w&&t.dispatch("contactConversations/get",w)},O=()=>{t.dispatch("attributes/get")},x=async w=>{const D={success:{block:g("CONTACTS_LAYOUT.HEADER.ACTIONS.BLOCK_SUCCESS_MESSAGE"),unblock:g("CONTACTS_LAYOUT.HEADER.ACTIONS.UNBLOCK_SUCCESS_MESSAGE")},error:{block:g("CONTACTS_LAYOUT.HEADER.ACTIONS.BLOCK_ERROR_MESSAGE"),unblock:g("CONTACTS_LAYOUT.HEADER.ACTIONS.UNBLOCK_ERROR_MESSAGE")}};try{await t.dispatch("contacts/update",{...d.value,blocked:!w}),ne(w?D.success.unblock:D.success.block)}catch{ne(w?D.error.unblock:D.error.block)}};return lt(()=>{T(),N(),R(),O()}),(w,D)=>(p(),E("div",aGe,[S(cFe,{"button-label":w.$t("CONTACTS_LAYOUT.HEADER.SEND_MESSAGE"),"selected-contact":d.value,"is-detail-view":"","show-pagination-footer":!1,"is-updating":u.value,onGoToContactsList:v,onToggleBlock:x},{sidebar:Y(()=>[m("div",iGe,[S(xFe,{tabs:b.value,"initial-active-tab":A.value,class:"w-full [&>button]:w-full bg-n-alpha-black2",onTabChanged:_},null,8,["tabs","initial-active-tab"])]),r.value?(p(),E("div",lGe,[S(An)])):(p(),E(ue,{key:1},[i.value==="attributes"?(p(),L(sGe,{key:0,"selected-contact":d.value},null,8,["selected-contact"])):$("",!0),i.value==="notes"?(p(),L(PFe,{key:1})):$("",!0),i.value==="history"?(p(),L(d7e,{key:2})):$("",!0),i.value==="merge"?(p(),L($7e,{key:3,ref_key:"contactMergeRef",ref:l,"selected-contact":d.value,onGoToContactsList:v,onResetTab:D[0]||(D[0]=M=>_(f[0]))},null,8,["selected-contact"])):$("",!0)],64))]),default:Y(()=>[h.value?(p(),E("div",oGe,[S(An)])):d.value?(p(),L(NFe,{key:1,"selected-contact":d.value,onGoToContactsList:v},null,8,["selected-contact"])):$("",!0)]),_:1},8,["button-label","selected-contact","is-updating"])]))}},Fo={featureFlag:ft.CRM,permissions:["administrator","agent","contact_manage"]},rGe=[{path:vt("accounts/:accountId/contacts"),component:oc,meta:Fo,children:[{path:"",name:"contacts_dashboard_index",component:oc,meta:Fo},{path:"segments/:segmentId",name:"contacts_dashboard_segments_index",component:oc,meta:Fo},{path:"labels/:label",name:"contacts_dashboard_labels_index",component:oc,meta:Fo},{path:"active",name:"contacts_dashboard_active",component:oc,meta:Fo}]},{path:vt("accounts/:accountId/contacts/:contactId"),component:id,meta:Fo,children:[{path:"",name:"contacts_edit",component:id,meta:Fo},{path:"segments/:segmentId",name:"contacts_edit_segment",component:id,meta:Fo},{path:"labels/:label",name:"contacts_edit_label",component:id,meta:Fo}]}],cGe={class:"relative"},uGe={key:0,class:"absolute top-full mt-1 ltr:-right-32 rtl:-left-32 sm:ltr:right-0 sm:rtl:left-0 flex flex-col gap-4 bg-n-alpha-3 backdrop-blur-[100px] border border-n-weak w-72 rounded-xl p-4"},dGe={class:"flex items-center justify-between gap-2"},pGe={class:"text-sm text-n-slate-12"},mGe={class:"flex items-center justify-between gap-2"},hGe={class:"text-sm text-n-slate-12"},fGe={__name:"CompanySortMenu",props:{activeSort:{type:String,default:"name"},activeOrdering:{type:String,default:""}},emits:["update:sort"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=j(!1),i=[{label:a("COMPANIES.SORT_BY.OPTIONS.NAME"),value:"name"},{label:a("COMPANIES.SORT_BY.OPTIONS.DOMAIN"),value:"domain"},{label:a("COMPANIES.SORT_BY.OPTIONS.CREATED_AT"),value:"created_at"}],l=[{label:a("COMPANIES.ORDER.OPTIONS.ASCENDING"),value:""},{label:a("COMPANIES.ORDER.OPTIONS.DESCENDING"),value:"-"}],r=cr(n,"activeSort"),c=cr(n,"activeOrdering"),u=y(()=>{const f=i.find(b=>b.value===r.value);return(f==null?void 0:f.label)||a("COMPANIES.SORT_BY.LABEL")}),d=y(()=>{const f=l.find(b=>b.value===c.value);return(f==null?void 0:f.label)||a("COMPANIES.ORDER.LABEL")}),h=f=>{s("update:sort",{sort:f,order:n.activeOrdering})},g=f=>{s("update:sort",{sort:n.activeSort,order:f})};return(f,b)=>{const A=Qe("on-clickaway");return p(),E("div",cGe,[S(te,{icon:"i-lucide-arrow-down-up",color:"slate",size:"sm",variant:"ghost",class:ae(o.value?"bg-n-alpha-2":""),onClick:b[0]||(b[0]=v=>o.value=!o.value)},null,8,["class"]),o.value?re((p(),E("div",uGe,[m("div",dGe,[m("span",pGe,I(C(a)("COMPANIES.SORT_BY.LABEL")),1),S(Tr,{"model-value":r.value,options:i,label:u.value,"onUpdate:modelValue":h},null,8,["model-value","label"])]),m("div",mGe,[m("span",hGe,I(C(a)("COMPANIES.ORDER.LABEL")),1),S(Tr,{"model-value":c.value,options:l,label:d.value,"onUpdate:modelValue":g},null,8,["model-value","label"])])])),[[A,()=>o.value=!1]]):$("",!0)])}}},gGe={class:"sticky top-0 z-10"},_Ge={class:"flex items-start sm:items-center justify-between w-full py-6 px-6 gap-2 mx-auto max-w-[60rem]"},vGe={class:"text-xl font-medium truncate text-n-slate-12"},EGe={class:"flex items-center flex-row flex-shrink-0 gap-2"},bGe={class:"flex items-center"},TGe={key:0,class:"flex items-center gap-2 w-full"},SGe={__name:"CompanyHeader",props:{showSearch:{type:Boolean,default:!0},searchValue:{type:String,default:""},headerTitle:{type:String,required:!0},activeSort:{type:String,default:"last_activity_at"},activeOrdering:{type:String,default:""}},emits:["search","update:sort"],setup(e,{emit:t}){const n=t;return(s,a)=>(p(),E("header",gGe,[m("div",_Ge,[m("span",vGe,I(e.headerTitle),1),m("div",EGe,[m("div",bGe,[S(fGe,{"active-sort":e.activeSort,"active-ordering":e.activeOrdering,"onUpdate:sort":a[0]||(a[0]=o=>n("update:sort",o))},null,8,["active-sort","active-ordering"])]),e.showSearch?(p(),E("div",TGe,[S(Tt,{"model-value":e.searchValue,type:"search",placeholder:s.$t("CONTACTS_LAYOUT.HEADER.SEARCH_PLACEHOLDER"),"custom-input-class":["h-8 [&:not(.focus)]:!border-transparent bg-n-alpha-2 dark:bg-n-solid-1 ltr:!pl-8 !py-1 rtl:!pr-8"],class:"w-full",onInput:a[1]||(a[1]=o=>n("search",o.target.value))},{prefix:Y(()=>[S(dt,{icon:"i-lucide-search",class:"absolute -translate-y-1/2 text-n-slate-11 size-4 top-1/2 ltr:left-2 rtl:right-2"})]),_:1},8,["model-value","placeholder"])])):$("",!0)])])]))}},AGe={class:"flex w-full h-full gap-4 overflow-hidden justify-evenly bg-n-background"},yGe={class:"flex flex-col w-full h-full transition-all duration-300"},IGe={class:"flex-1 overflow-y-auto"},CGe={class:"w-full mx-auto max-w-[60rem]"},NGe={class:"sticky bottom-0 z-0 px-4 pb-4"},OGe={__name:"CompaniesListLayout",props:{searchValue:{type:String,default:""},headerTitle:{type:String,default:""},currentPage:{type:Number,default:1},totalItems:{type:Number,default:100},activeSort:{type:String,default:"name"},activeOrdering:{type:String,default:""}},emits:["update:currentPage","update:sort","search"],setup(e,{emit:t}){const n=t,s=a=>{n("update:currentPage",a)};return(a,o)=>(p(),E("section",AGe,[m("div",yGe,[S(SGe,{"search-value":e.searchValue,"header-title":e.headerTitle,"active-sort":e.activeSort,"active-ordering":e.activeOrdering,onSearch:o[0]||(o[0]=i=>n("search",i)),"onUpdate:sort":o[1]||(o[1]=i=>n("update:sort",i))},null,8,["search-value","header-title","active-sort","active-ordering"]),m("main",IGe,[m("div",CGe,[We(a.$slots,"default")])]),m("footer",NGe,[S(cv,{"current-page-info":"COMPANIES_LAYOUT.PAGINATION_FOOTER.SHOWING","current-page":e.currentPage,"total-items":e.totalItems,"items-per-page":25,"onUpdate:currentPage":s},null,8,["current-page","total-items"])])])]))}},RGe={class:"flex items-center justify-start flex-1 gap-4"},xGe={class:"flex flex-col gap-0.5 flex-1 min-w-0"},wGe={class:"flex flex-wrap items-center gap-x-4 gap-y-1 min-w-0"},$Ge={class:"text-base font-medium truncate text-n-slate-12"},MGe={key:0,class:"inline-flex items-center gap-1.5 text-sm text-n-slate-11 truncate"},LGe={class:"truncate"},DGe={class:"flex items-center justify-between"},PGe={class:"flex flex-wrap items-center gap-x-3 gap-y-1 min-w-0"},kGe={key:0,class:"inline-flex items-center gap-1.5 text-sm text-n-slate-11 truncate"},BGe={class:"truncate"},UGe={key:1,class:"text-sm text-n-slate-11 truncate"},FGe={key:2,class:"w-px h-3 bg-n-slate-6"},GGe={key:3,class:"inline-flex items-center gap-1.5 text-sm text-n-slate-11 truncate"},VGe={key:0,class:"inline-flex items-center gap-1.5 text-sm text-n-slate-11 flex-shrink-0"},HGe={__name:"CompaniesCard",props:{id:{type:Number,required:!0},name:{type:String,default:""},domain:{type:String,default:""},contactsCount:{type:Number,default:0},description:{type:String,default:""},avatarUrl:{type:String,default:""},updatedAt:{type:[String,Number],default:null}},emits:["showCompany"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=()=>s("showCompany",n.id),i=y(()=>n.name||a("COMPANIES.UNNAMED")),l=y(()=>n.avatarUrl||null),r=y(()=>n.updatedAt?DR(new Date(n.updatedAt),{addSuffix:!0}):"");return(c,u)=>(p(),L(ba,{layout:"row",onClick:o},{default:Y(()=>[m("div",RGe,[S(kt,{username:i.value,src:l.value,class:"shrink-0",name:e.name,size:48,"hide-offline-status":"","rounded-full":""},null,8,["username","src","name"]),m("div",xGe,[m("div",wGe,[m("span",$Ge,I(i.value),1),e.domain&&e.description?(p(),E("span",MGe,[S(dt,{icon:"i-lucide-globe",size:"size-3.5 text-n-slate-11"}),m("span",LGe,I(e.domain),1)])):$("",!0)]),m("div",DGe,[m("div",PGe,[e.domain&&!e.description?(p(),E("span",kGe,[S(dt,{icon:"i-lucide-globe",size:"size-3.5 text-n-slate-11"}),m("span",BGe,I(e.domain),1)])):$("",!0),e.description?(p(),E("span",UGe,I(e.description),1)):$("",!0),(e.description||e.domain)&&e.contactsCount?(p(),E("div",FGe)):$("",!0),e.contactsCount?(p(),E("span",GGe,[S(dt,{icon:"i-lucide-contact",size:"size-3.5 text-n-slate-11"}),xe(" "+I(C(a)("COMPANIES.CONTACTS_COUNT",{count:e.contactsCount})),1)])):$("",!0)]),e.updatedAt?(p(),E("span",VGe,I(r.value),1)):$("",!0)])])])]),_:1}))}},WGe={key:0,class:"flex items-center justify-center p-8"},zGe={class:"text-n-slate-11 text-base"},YGe={key:1,class:"flex items-center justify-center p-8"},jGe={class:"text-n-slate-11 text-base"},KGe={key:2,class:"flex flex-col gap-4 p-4"},XGe=300,KT={__name:"CompaniesIndex",setup(e){const t=na(),n=wt(),s=Ft(),{t:a}=be(),o=y(()=>{var N;return((N=n.query)==null?void 0:N.search)||""}),i=j(o.value),l=y(()=>{var N;return Number((N=n.query)==null?void 0:N.page)||1}),r=y(()=>{var R;const N=((R=n.query)==null?void 0:R.sort)||"name";return N.startsWith("-")?N.slice(1):N}),c=y(()=>{var R;return(((R=n.query)==null?void 0:R.sort)||"name").startsWith("-")?"-":""}),u=_e("companies/getCompaniesList"),d=_e("companies/getMeta"),h=_e("companies/getUIFlags"),g=y(()=>h.value.fetchingList),f=y(()=>c.value==="-"?`-${r.value}`:r.value),b=(N,R="",O="")=>{const x={...n.query,page:N.toString()};R?x.search=R:delete x.search,O?x.sort=O:delete x.sort,s.replace({query:x})},A=async(N,R,O)=>{const x=N??l.value,w=R??o.value,D=O??f.value;(N!==void 0||R!==void 0||O!==void 0)&&b(x,w,D),w?await t.dispatch("companies/search",{search:w,page:x,sort:D}):await t.dispatch("companies/get",{page:x,sort:D})},v=Ua(N=>{i.value=N,A(1,N,f.value)},XGe),T=N=>{A(N,i.value,f.value)},_=({sort:N,order:R})=>{const O=R==="-"?`-${N}`:N;A(1,i.value,O)};return lt(()=>{i.value=o.value,A()}),(N,R)=>(p(),L(OGe,{"search-value":i.value,"header-title":C(a)("COMPANIES.HEADER"),"current-page":l.value,"total-items":Number(C(d).totalCount||0),"active-sort":r.value,"active-ordering":c.value,"is-fetching-list":g.value,"onUpdate:currentPage":T,"onUpdate:sort":_,onSearch:C(v)},{default:Y(()=>[g.value?(p(),E("div",WGe,[m("span",zGe,I(C(a)("COMPANIES.LOADING")),1)])):C(u).length===0?(p(),E("div",YGe,[m("span",jGe,I(C(a)("COMPANIES.EMPTY_STATE.TITLE")),1)])):(p(),E("div",KGe,[(p(!0),E(ue,null,Ae(C(u),O=>(p(),L(HGe,{id:O.id,key:O.id,name:O.name,domain:O.domain,"contacts-count":O.contactsCount||0,description:O.description,"avatar-url":O.avatarUrl,"updated-at":O.updatedAt},null,8,["id","name","domain","contacts-count","description","avatar-url","updated-at"]))),128))]))]),_:1},8,["search-value","header-title","current-page","total-items","active-sort","active-ordering","is-fetching-list","onSearch"]))}},XT={featureFlag:ft.COMPANIES,permissions:["administrator","agent"],installationTypes:[Gn.CLOUD,Gn.ENTERPRISE]},qGe=[{path:vt("accounts/:accountId/companies"),component:KT,meta:XT,children:[{path:"",name:"companies_dashboard_index",component:KT,meta:XT}]}],ZGe={components:{Avatar:kt,Spinner:Ls,EmptyState:Il,NextButton:te},props:{notifications:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1},isUpdating:{type:Boolean,default:!1},onClickNotification:{type:Function,default:()=>{}},onMarkAllDoneClick:{type:Function,default:()=>{}}},computed:{...mt({notificationMetadata:"notifications/getMeta"}),showEmptyResult(){return!this.isLoading&&this.notifications.length===0}},methods:{dynamicTime:us}},QGe={class:"flex-grow flex-shrink h-full px-4 py-8 overflow-hidden bg-n-background"},JGe={class:"flex w-full items-center justify-between gap-2 mb-4"},eVe={class:"text-xl font-medium text-n-slate-12"},tVe={class:"notifications-table overflow-auto"},nVe=["onClick"],sVe={class:"p-2.5 text-n-slate-12"},aVe={class:"overflow-hidden flex-view notification-contant--wrap whitespace-nowrap text-ellipsis"},oVe={class:"notification--title"},iVe={class:"overflow-hidden notification--message-title whitespace-nowrap text-ellipsis"},lVe={class:"text-right"},rVe={class:"notification--type"},cVe={class:"thumbnail--column"},uVe={class:"text-right timestamp--column ltr:mr-2 rtl:ml-2"},dVe={class:"notification--created-at"},pVe={key:0,class:"notification--unread-indicator"},mVe={key:1,class:"notifications--loader"};function hVe(e,t,n,s,a,o){const i=W("NextButton"),l=W("Avatar"),r=W("EmptyState"),c=W("Spinner");return p(),E("section",QGe,[m("div",JGe,[m("h6",eVe,I(e.$t("NOTIFICATIONS_PAGE.HEADER")),1),e.notificationMetadata.unreadCount?(p(),L(i,{key:0,type:"submit",sm:"",label:e.$t("NOTIFICATIONS_PAGE.MARK_ALL_DONE"),"is-loading":n.isUpdating,onClick:n.onMarkAllDoneClick},null,8,["label","is-loading","onClick"])):$("",!0)]),m("table",tVe,[re(m("tbody",null,[(p(!0),E(ue,null,Ae(n.notifications,u=>(p(),E("tr",{key:u.id,class:ae([{"is-unread":u.read_at===null},"border-b border-n-weak"]),onClick:()=>n.onClickNotification(u)},[m("td",sVe,[m("div",aVe,[m("h5",oVe,I(`#${u.primary_actor?u.primary_actor.id:e.$t("NOTIFICATIONS_PAGE.DELETE_TITLE")}`),1),m("span",iVe,I(u.push_message_title),1)])]),m("td",lVe,[m("span",rVe,I(e.$t(`NOTIFICATIONS_PAGE.TYPE_LABEL.${u.notification_type}`)),1)]),m("td",cVe,[u.primary_actor.meta.assignee?(p(),L(l,{key:0,src:u.primary_actor.meta.assignee.thumbnail,size:28,name:u.primary_actor.meta.assignee.name,"rounded-full":""},null,8,["src","name"])):$("",!0)]),m("td",null,[m("div",uVe,[m("span",dVe,I(o.dynamicTime(u.last_activity_at)),1)])]),m("td",null,[u.read_at?$("",!0):(p(),E("div",pVe))])],10,nVe))),128))],512),[[rn,!n.isLoading]])]),o.showEmptyResult?(p(),L(r,{key:0,title:e.$t("NOTIFICATIONS_PAGE.LIST.404")},null,8,["title"])):$("",!0),n.isLoading?(p(),E("div",mVe,[S(c),m("span",null,I(e.$t("NOTIFICATIONS_PAGE.LIST.LOADING_MESSAGE")),1)])):$("",!0)])}const fVe=De(ZGe,[["render",hVe],["__scopeId","data-v-577256f2"]]),gVe={components:{NotificationTable:fVe,TableFooter:c_},computed:{...mt({accountId:"getCurrentAccountId",meta:"notifications/getMeta",records:"notifications/getNotifications",uiFlags:"notifications/getUIFlags"})},mounted(){this.$store.dispatch("notifications/get",{page:1})},methods:{onPageChange(e){window.history.pushState({},null,`${this.$route.path}?page=${e}`),this.$store.dispatch("notifications/get",{page:e})},openConversation(e){const{primary_actor_id:t,primary_actor_type:n,primary_actor:{id:s},notification_type:a}=e;zt(Ad.OPEN_CONVERSATION_VIA_NOTIFICATION,{notificationType:a}),this.$store.dispatch("notifications/read",{id:e.id,primaryActorId:t,primaryActorType:n,unreadCount:this.meta.unreadCount}),this.$router.push(`/app/accounts/${this.accountId}/conversations/${s}`)},onMarkAllDoneClick(){zt(Ad.MARK_AS_READ_NOTIFICATIONS),this.$store.dispatch("notifications/readAll")}}},_Ve={class:"h-full overflow-y-auto"},vVe={class:"flex flex-col h-full"};function EVe(e,t,n,s,a,o){const i=W("NotificationTable"),l=W("TableFooter");return p(),E("div",_Ve,[m("div",vVe,[S(i,{notifications:e.records,"is-loading":e.uiFlags.isFetching,"is-updating":e.uiFlags.isUpdating,"on-click-notification":o.openConversation,"on-mark-all-done-click":o.onMarkAllDoneClick},null,8,["notifications","is-loading","is-updating","on-click-notification","on-mark-all-done-click"]),S(l,{class:"border-t border-n-weak","current-page":Number(e.meta.currentPage),"total-count":e.meta.count,"page-size":15,onPageChange:o.onPageChange},null,8,["current-page","total-count","onPageChange"])])])}const bVe=De(gVe,[["render",EVe]]),TVe=[{path:vt("accounts/:accountId/notifications"),component:au,props:{headerTitle:"",icon:"",showNewButton:!1},children:[{path:"",name:"notifications_index",component:bVe,meta:{permissions:["administrator","agent","custom_role"]}}]}],SVe={CONVERSATION_MENTION:["i-lucide-at-sign","text-n-blue-text"],CONVERSATION_ASSIGNMENT:["i-lucide-chevrons-right","text-n-blue-text"],CONVERSATION_CREATION:["i-lucide-mail-plus","text-n-blue-text"],PARTICIPATING_CONVERSATION_NEW_MESSAGE:["i-lucide-message-square-plus","text-n-blue-text"],ASSIGNED_CONVERSATION_NEW_MESSAGE:["i-lucide-message-square-plus","text-n-blue-text"],SLA_MISSED_FIRST_RESPONSE:["i-lucide-heart-crack","text-n-ruby-11"],SLA_MISSED_NEXT_RESPONSE:["i-lucide-heart-crack","text-n-ruby-11"],SLA_MISSED_RESOLUTION:["i-lucide-heart-crack","text-n-ruby-11"]},AVe={class:"p-1 rounded-md shadow-xl bg-n-alpha-3/50 backdrop-blur-[100px] outline-1 outline outline-n-weak/50"},yVe={__name:"InboxContextMenu",props:{contextMenuPosition:{type:Object,default:()=>({})},menuItems:{type:Array,default:()=>[]}},emits:["close","selectAction"],setup(e,{emit:t}){const n=t,s=()=>{n("close")},a=o=>{n("selectAction",o),s()};return(o,i)=>(p(),L(X_,{x:e.contextMenuPosition.x,y:e.contextMenuPosition.y,onClose:s},{default:Y(()=>[m("div",AVe,[(p(!0),E(ue,null,Ae(e.menuItems,l=>(p(),L(K_,{key:l.key,option:l,variant:"icon",class:"!w-48",onClick:Ve(r=>a(l.key),["stop"])},null,8,["option","onClick"]))),128))])]),_:1},8,["x","y"]))}},IVe={class:"flex items-start gap-2"},CVe={class:"mb-0 line-clamp-2"},NVe={class:"flex items-center justify-between h-6 gap-2"},OVe={class:"flex items-center flex-1 min-w-0 gap-1"},RVe={key:0,class:"flex items-center w-full min-w-0 gap-2 ltr:pl-1 rtl:pr-1"},xVe={key:1,class:"flex items-center w-full min-w-0 gap-2 ltr:pl-1 rtl:pr-1"},wVe={class:"flex items-center flex-shrink-0 gap-2"},$Ve={key:0,class:"w-px h-3 rounded-sm bg-n-slate-4"},MVe={key:2,class:"flex items-center justify-center flex-shrink-0 rounded-full bg-n-alpha-2 size-4"},LVe={class:"text-xs text-n-slate-10"},DVe={__name:"InboxCard",props:{inboxItem:{type:Object,default:()=>({})},stateInbox:{type:Object,default:()=>({})}},emits:["click","contextMenuOpen","contextMenuClose","markNotificationAsRead","markNotificationAsUnRead","deleteNotification"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=j(!1),i=j({x:null,y:null}),l=j(null),r={emphasis:"text-sm font-medium text-n-slate-11",emphasisUnread:"text-sm font-medium text-n-slate-12",normal:"text-sm font-normal text-n-slate-11",normalUnread:"text-sm text-n-slate-12"},c=y(()=>{var M;return(M=n.inboxItem)==null?void 0:M.primaryActor}),u=y(()=>{var M;return(M=c.value)==null?void 0:M.meta}),d=y(()=>{var M;return(M=u.value)==null?void 0:M.sender}),h=y(()=>{var M;return!((M=n.inboxItem)!=null&&M.readAt)}),g=y(()=>n.stateInbox),f=y(()=>{const{channelType:M,medium:P}=g.value;return ni(M,P)}),b=y(()=>{var M,P;return((M=l.value)==null?void 0:M.hasSlaThreshold)&&((P=c.value)==null?void 0:P.slaPolicyId)}),A=y(()=>{var P;const M=(P=n.inboxItem)==null?void 0:P.lastActivityAt;return M?Lc(us(M)):""}),v=y(()=>[{key:h.value?"mark_as_read":"mark_as_unread",icon:h.value?"mail":"mail-unread",label:a(`INBOX.MENU_ITEM.MARK_AS_${h.value?"READ":"UNREAD"}`)},{key:"delete",icon:"delete",label:a("INBOX.MENU_ITEM.DELETE")}]),T=y(()=>({emphasis:h.value?r.emphasisUnread:r.emphasis,normal:h.value?r.normalUnread:r.normal})),_=M=>M.startsWith(": ")?M.slice(2):M.replace(/^([^:]+):/g,(P,U)=>`<span class="${T.value.emphasis}">${U}:</span>`),N=y(()=>{var P;const M=`<span class="${T.value.normal}">${_(((P=n.inboxItem)==null?void 0:P.pushMessageBody)||"")}</span>`;return h.value?`<span class="inline-flex flex-shrink-0 w-2 h-2 mb-px rounded-full bg-n-iris-10 ltr:mr-1 rtl:ml-1"></span> ${M}`:M}),R=y(()=>{var F,k;const M=((k=(F=n.inboxItem)==null?void 0:F.notificationType)==null?void 0:k.toUpperCase())||"",[P="",U="text-n-blue-text"]=SVe[M]||[];return{text:M?a(`INBOX.TYPES_NEXT.${M}`):"",icon:P,color:U}}),O=y(()=>{const{snoozedUntil:M}=n.inboxItem;return M?iAe(us(oAe(M))):null}),x=y(()=>{var M,P;return(P=(M=n.inboxItem)==null?void 0:M.meta)==null?void 0:P.lastSnoozedAt}),w=y(()=>x.value?a("INBOX.TYPES_NEXT.SNOOZED_ENDS"):a("INBOX.TYPES_NEXT.SNOOZED_UNTIL",{time:Lc(O.value)})),D={close:()=>{o.value=!1,i.value={x:null,y:null},s("contextMenuClose")},open:M=>{M.preventDefault(),i.value={x:M.pageX||M.clientX,y:M.pageY||M.clientY},o.value=!0,s("contextMenuOpen")},handle:M=>{var U;const P={mark_as_read:()=>s("markNotificationAsRead",n.inboxItem),mark_as_unread:()=>s("markNotificationAsUnRead",n.inboxItem),delete:()=>s("deleteNotification",n.inboxItem)};(U=P[M])==null||U.call(P)}};return uS(D.close),(M,P)=>{var k,B,V;const U=Qe("dompurify-html"),F=Qe("tooltip");return p(),E("div",{role:"button",class:"flex flex-col w-full gap-1 p-3 transition-all duration-300 ease-in-out cursor-pointer",onContextmenu:P[0]||(P[0]=G=>D.open(G)),onClick:P[1]||(P[1]=G=>s("click"))},[m("div",IVe,[S(kt,{name:d.value.name,src:d.value.thumbnail,size:20,"rounded-full":"",class:"mt-1"},null,8,["name","src"]),re(m("p",CVe,null,512),[[U,N.value]])]),m("div",NVe,[m("div",OVe,[O.value||x.value?(p(),E("div",RVe,[S(dt,{icon:x.value?"i-lucide-alarm-clock-off":"i-lucide-alarm-clock-plus",class:ae(["flex-shrink-0 size-4",h.value?"text-n-blue-text":"text-n-slate-11"])},null,8,["icon","class"]),m("span",{class:ae(["text-xs font-medium truncate",h.value?"text-n-blue-text":"text-n-slate-11"])},I(w.value),3)])):R.value.text?(p(),E("div",xVe,[S(dt,{icon:R.value.icon,class:ae([h.value?R.value.color:"text-n-slate-11","flex-shrink-0 size-4"])},null,8,["icon","class"]),m("span",{class:ae(["text-xs font-medium truncate",h.value?R.value.color:"text-n-slate-11"])},I(R.value.text),3)])):$("",!0)]),m("div",wVe,[re(S(GC,{ref_key:"slaCardLabel",ref:l,conversation:c.value,class:ae(["[&>span]:text-xs",!h.value&&"[&>span]:text-n-slate-11 [&>div>svg]:fill-n-slate-11"])},null,8,["conversation","class"]),[[rn,b.value]]),b.value?(p(),E("div",$Ve)):$("",!0),(k=c.value)!=null&&k.priority?(p(),L(lv,{key:1,priority:(B=c.value)==null?void 0:B.priority,class:"[&>svg]:size-4"},null,8,["priority"])):$("",!0),f.value?re((p(),E("div",MVe,[S(dt,{icon:f.value,class:"flex-shrink-0 text-n-slate-11 size-2.5"},null,8,["icon"])])),[[F,(V=g.value)==null?void 0:V.name,void 0,{left:!0}]]):$("",!0),m("span",LVe,I(A.value),1)])]),o.value?(p(),L(yVe,{key:0,"context-menu-position":i.value,"menu-items":v.value,onClose:D.close,onSelectAction:D.handle},null,8,["context-menu-position","menu-items","onClose","onSelectAction"])):$("",!0)],32)}}},PVe={role:"button",class:"flex items-center w-full h-8 px-2 py-1 rounded-md cursor-pointer hover:text-n-blue-text min-w-0"},kVe={class:"text-xs font-medium truncate text-n-slate-12"},BVe={__name:"MenuItem",props:{label:{type:String,default:""}},setup(e){return(t,n)=>(p(),E("div",PVe,[m("span",kVe,I(e.label),1)]))}},UVe={components:{MenuItem:BVe},emits:["optionClick"],data(){return{menuItems:[{key:"mark_all_read",label:this.$t("INBOX.MENU_ITEM.MARK_ALL_READ")},{key:"delete_all",label:this.$t("INBOX.MENU_ITEM.DELETE_ALL")},{key:"delete_all_read",label:this.$t("INBOX.MENU_ITEM.DELETE_ALL_READ")}]}},methods:{onClick(e){this.$emit("optionClick",e)}}},FVe={class:"z-50 flex flex-col max-w-64 min-w-40 gap-1 bg-n-alpha-3 backdrop-blur-[100px] divide-y py-2 px-2 outline outline-1 outline-n-container shadow-lg rounded-xl divide-n-weak dark:divide-n-strong"},GVe={class:"flex flex-col"};function VVe(e,t,n,s,a,o){const i=W("MenuItem");return p(),E("div",FVe,[m("div",GVe,[(p(!0),E(ue,null,Ae(a.menuItems,l=>(p(),L(i,{key:l.key,label:l.label,onClick:Ve(r=>o.onClick(l.key),["stop"])},null,8,["label","onClick"]))),128))])])}const HVe=De(UVe,[["render",VVe]]),WVe={components:{NextButton:te},emits:["filter"],setup(){const{uiSettings:e,updateUISettings:t}=tn();return{uiSettings:e,updateUISettings:t}},data(){return{showSortMenu:!1,displayOptions:[{name:this.$t("INBOX.DISPLAY_MENU.DISPLAY_OPTIONS.SNOOZED"),key:yt.INBOX_DISPLAY_BY.SNOOZED,selected:!1,type:yt.INBOX_FILTER_TYPE.STATUS},{name:this.$t("INBOX.DISPLAY_MENU.DISPLAY_OPTIONS.READ"),key:yt.INBOX_DISPLAY_BY.READ,selected:!1,type:yt.INBOX_FILTER_TYPE.TYPE}],sortOptions:[{name:this.$t("INBOX.DISPLAY_MENU.SORT_OPTIONS.NEWEST"),key:yt.INBOX_SORT_BY.NEWEST,type:yt.INBOX_FILTER_TYPE.SORT_ORDER},{name:this.$t("INBOX.DISPLAY_MENU.SORT_OPTIONS.OLDEST"),key:yt.INBOX_SORT_BY.OLDEST,type:yt.INBOX_FILTER_TYPE.SORT_ORDER}],activeSort:yt.INBOX_SORT_BY.NEWEST,activeDisplayFilter:{status:"",type:""}}},computed:{activeSortOption(){var e;return((e=this.sortOptions.find(t=>t.key===this.activeSort))==null?void 0:e.name)||""}},mounted(){this.setSavedFilter()},methods:{updateDisplayOption(e){this.displayOptions.forEach(t=>{t.key===e.key&&(t.selected=!e.selected,this.activeDisplayFilter[t.type]=t.selected?t.key:"",this.saveSelectedDisplayFilter(),this.$emit("filter",e))})},openSortMenu(){this.showSortMenu=!this.showSortMenu},onSortOptionClick(e){this.activeSort=e.key,this.showSortMenu=!1,this.saveSelectedDisplayFilter(),this.$emit("filter",e)},saveSelectedDisplayFilter(){this.updateUISettings({inbox_filter_by:{...this.activeDisplayFilter,sort_by:this.activeSort||yt.INBOX_SORT_BY.NEWEST}})},setSavedFilter(){const{inbox_filter_by:e={}}=this.uiSettings,{status:t,type:n,sort_by:s}=e;this.activeSort=s||yt.INBOX_SORT_BY.NEWEST,this.displayOptions.forEach(a=>{a.selected=a.type===yt.INBOX_FILTER_TYPE.STATUS?a.key===t:a.key===n,this.activeDisplayFilter[a.type]=a.selected?a.key:""})}}},zVe={class:"flex flex-col bg-n-alpha-3 backdrop-blur-[100px] border-0 outline outline-1 outline-n-container shadow-lg z-50 max-w-64 min-w-[170px] w-fit rounded-xl divide-y divide-n-weak dark:divide-n-strong"},YVe={class:"flex items-center gap-2 justify-between p-3 rounded-t-lg h-11"},jVe={class:"flex gap-1.5 min-w-0"},KVe={class:"text-xs font-medium text-n-slate-12 truncate min-w-0"},XVe={class:"relative"},qVe={key:0,class:"absolute flex flex-col gap-0.5 bg-n-alpha-3 backdrop-blur-[100px] z-60 rounded-lg p-0.5 w-fit min-w-20 max-w-32 top-px outline outline-1 outline-n-container dark:outline-n-strong"},ZVe=["onClick"],QVe={key:0,class:"i-lucide-check size-2.5 flex-shrink-0 text-n-blue-text"},JVe={class:"px-3 py-4 text-xs font-medium text-n-slate-11"},eHe={class:"flex flex-col divide-y divide-n-weak dark:divide-n-strong"},tHe=["id","name","checked","onChange"],nHe=["for"];function sHe(e,t,n,s,a,o){const i=W("NextButton"),l=Qe("on-clickaway");return p(),E("div",zVe,[m("div",YVe,[m("div",jVe,[t[0]||(t[0]=m("span",{class:"i-lucide-arrow-down-up size-3.5 text-n-slate-12"},null,-1)),m("span",KVe,I(e.$t("INBOX.DISPLAY_MENU.SORT")),1)]),re((p(),E("div",XVe,[S(i,{label:o.activeSortOption,icon:"i-lucide-chevron-down",slate:"","trailing-icon":"",xs:"",outline:"",class:"w-fit min-w-20 max-w-32",onClick:o.openSortMenu},null,8,["label","onClick"]),a.showSortMenu?(p(),E("div",qVe,[(p(!0),E(ue,null,Ae(a.sortOptions,r=>(p(),E("div",{key:r.key,role:"button",class:ae(["flex rounded-md h-5 w-full items-center justify-between px-1.5 py-0.5 gap-2 whitespace-nowrap",{"bg-n-brand/10 dark:bg-n-brand/10":a.activeSort===r.key}]),onClick:Ve(c=>o.onSortOptionClick(r),["stop"])},[m("span",{class:ae(["text-xs font-medium hover:text-n-brand truncate min-w-0 dark:hover:text-n-brand",{"text-n-blue-text dark:text-n-blue-text":a.activeSort===r.key,"text-n-slate-11":a.activeSort!==r.key}])},I(r.name),3),a.activeSort===r.key?(p(),E("span",QVe)):$("",!0)],10,ZVe))),128))])):$("",!0)])),[[l,()=>a.showSortMenu=!1]])]),m("div",null,[m("span",JVe,I(e.$t("INBOX.DISPLAY_MENU.DISPLAY")),1),m("div",eHe,[(p(!0),E(ue,null,Ae(a.displayOptions,r=>(p(),E("div",{key:r.key,class:"flex items-center px-3 py-2 gap-1.5 h-9"},[m("input",{id:r.key,type:"checkbox",name:r.key,checked:r.selected,class:"m-0 border-[1.5px] shadow border-n-weak appearance-none rounded-[4px] w-4 h-4 dark:bg-n-background focus:ring-1 focus:ring-n-weak dark:focus:ring-n-strong checked:bg-n-brand dark:checked:bg-n-brand after:content-[''] after:text-white checked:after:content-[''] after:flex after:items-center after:justify-center checked:border-t checked:border-n-blue-10 checked:border-b-0 checked:border-r-0 checked:border-l-0 after:text-center after:text-xs after:font-bold after:relative after:-top-[1.5px]",onChange:c=>o.updateDisplayOption(r)},null,40,tHe),m("label",{for:r.key,class:"text-xs font-medium text-n-slate-12 !ml-0 !mr-0 dark:text-n-slate-12"},I(r.name),9,nHe)]))),128))])])])}const aHe=De(WVe,[["render",sHe]]),oHe={components:{NextButton:te,InboxOptionMenu:HVe,InboxDisplayMenu:aHe},props:{isContextMenuOpen:{type:Boolean,default:!1}},emits:["redirect","filter"],data(){return{showInboxDisplayMenu:!1,showInboxOptionMenu:!1}},watch:{isContextMenuOpen:{handler(e){e&&(this.showInboxDisplayMenu=!1,this.showInboxOptionMenu=!1)},immediate:!0}},methods:{markAllRead(){zt(ol.MARK_ALL_NOTIFICATIONS_AS_READ),this.$store.dispatch("notifications/readAll").then(()=>{ne(this.$t("INBOX.ALERTS.MARK_ALL_READ"))})},deleteAll(){this.$store.dispatch("notifications/deleteAll").then(()=>{ne(this.$t("INBOX.ALERTS.DELETE_ALL"))})},deleteAllRead(){this.$store.dispatch("notifications/deleteAllRead").then(()=>{ne(this.$t("INBOX.ALERTS.DELETE_ALL_READ"))})},openInboxDisplayMenu(){this.showInboxDisplayMenu=!this.showInboxDisplayMenu},openInboxOptionsMenu(){this.showInboxOptionMenu=!this.showInboxOptionMenu},onInboxOptionMenuClick(e){const n={mark_all_read:()=>this.markAllRead(),delete_all:()=>this.deleteAll(),delete_all_read:()=>this.deleteAllRead()}[e];n&&n(),this.$emit("redirect")},onFilterChange(e){this.$emit("filter",e),this.showInboxDisplayMenu=!1,this.$emit("redirect")}}},iHe={class:"flex items-center justify-between w-full gap-1 h-12 px-3"},lHe={class:"flex items-center gap-2 min-w-0 flex-1"},rHe={class:"min-w-0 text-base font-medium truncate text-n-slate-12"},cHe={class:"relative"},uHe={class:"relative flex items-center gap-1"};function dHe(e,t,n,s,a,o){const i=W("NextButton"),l=W("InboxDisplayMenu"),r=W("InboxOptionMenu"),c=Qe("on-clickaway");return p(),E("div",iHe,[m("div",lHe,[m("h1",rHe,I(e.$t("INBOX.LIST.TITLE")),1),m("div",cHe,[S(i,{label:e.$t("INBOX.LIST.DISPLAY_DROPDOWN"),icon:"i-lucide-chevron-down","trailing-icon":"",slate:"",xs:"",faded:"",onClick:o.openInboxDisplayMenu},null,8,["label","onClick"]),a.showInboxDisplayMenu?re((p(),L(l,{key:0,class:"absolute mt-1 top-full ltr:left-0 rtl:right-0",onFilter:o.onFilterChange},null,8,["onFilter"])),[[c,o.openInboxDisplayMenu]]):$("",!0)])]),m("div",uHe,[S(i,{icon:"i-lucide-sliders-vertical",slate:"",xs:"",faded:"",onClick:o.openInboxOptionsMenu},null,8,["onClick"]),a.showInboxOptionMenu?re((p(),L(r,{key:0,class:"absolute top-full mt-1 ltr:right-0 ltr:lg:right-[unset] rtl:left-0 rtl:lg:left-[unset]",onOptionClick:o.onInboxOptionMenuClick},null,8,["onOptionClick"])),[[c,o.openInboxOptionsMenu]]):$("",!0)])])}const pHe=De(oHe,[["render",dHe]]),mHe={class:"flex w-full h-full bg-n-solid-1"},hHe={key:0,class:"flex justify-center my-4"},fHe={key:1,class:"p-4 text-sm font-medium text-center text-n-slate-10"},gHe={__name:"InboxList",setup(e){const{t}=be(),n=wt(),s=Ft(),a=rt(),{uiSettings:o}=tn(),i=j(null),l=j(1),r=j(""),c=j(""),u=j(yt.INBOX_SORT_BY.NEWEST),d=j(!1),h=y(()=>({root:i.value,rootMargin:"100px 0px 100px 0px"})),g=_e("notifications/getMeta"),f=_e("notifications/getUIFlags"),b=_e("notifications/getFilteredNotificationsV4"),A=_e("inboxes/getInboxById"),v=y(()=>Number(n.params.id)),T=y(()=>({page:l.value,status:r.value,type:c.value,sortOrder:u.value})),_=y(()=>b.value(T.value)),N=y(()=>f.value.isAllNotificationsLoaded&&!f.value.isFetching),R=y(()=>!f.value.isFetching&&!_.value.length),O=G=>A.value(G),x=()=>{l.value=1,a.dispatch("notifications/clear");const G=T.value;a.dispatch("notifications/index",G)},w=()=>{var K;const G=(K=i.value)==null?void 0:K.querySelector(".inbox-card.active");G==null||G.scrollIntoView({block:"center",behavior:"smooth"})},D=()=>{n.name!=="inbox_view"&&s.replace({name:"inbox_view"})},M=()=>{f.value.isAllNotificationsLoaded||(l.value+=1,a.dispatch("notifications/index",{page:l.value,status:r.value,type:c.value,sortOrder:u.value}))},P=async G=>{zt(ol.MARK_NOTIFICATION_AS_READ);const{id:K,primaryActorId:se,primaryActorType:ee}=G;try{await a.dispatch("notifications/read",{id:K,primaryActorId:se,primaryActorType:ee,unreadCount:g.value.unreadCount}),ne(t("INBOX.ALERTS.MARK_AS_READ")),a.dispatch("notifications/unReadCount")}catch{}},U=async G=>{zt(ol.MARK_NOTIFICATION_AS_UNREAD),D();const{id:K}=G;try{await a.dispatch("notifications/unread",{id:K}),ne(t("INBOX.ALERTS.MARK_AS_UNREAD")),a.dispatch("notifications/unReadCount")}catch{}},F=async G=>{zt(ol.DELETE_NOTIFICATION),D();try{await a.dispatch("notifications/delete",{notification:G,unread_count:g.value.unreadCount,count:g.value.count}),ne(t("INBOX.ALERTS.DELETE"))}catch{}},k=G=>{const{STATUS:K,TYPE:se,SORT_ORDER:ee}=yt.INBOX_FILTER_TYPE;G.type===K&&(r.value=G.selected?G.key:""),G.type===se&&(c.value=G.selected?G.key:""),G.type===ee&&(u.value=G.key),x()},B=()=>{const{inbox_filter_by:G={}}=o.value,{status:K,type:se,sort_by:ee}=G;r.value=K,c.value=se,u.value=ee||yt.INBOX_SORT_BY.NEWEST,a.dispatch("notifications/setNotificationFilters",T.value)},V=async G=>{const{id:K,primaryActorId:se,primaryActorType:ee,primaryActor:{inboxId:X,id:z},notificationType:H}=G;if(n.params.id!==String(z)){zt(ol.OPEN_CONVERSATION_VIA_INBOX,{notificationType:H});try{await a.dispatch("notifications/read",{id:K,primaryActorId:se,primaryActorType:ee,unreadCount:g.value.unreadCount}),a.dispatch("notifications/unReadCount"),s.push({name:"inbox_view_conversation",params:{inboxId:X,type:"conversation",id:z}})}catch{}}};return it(T,(G,K)=>{G!==K&&a.dispatch("notifications/updateNotificationFilters",G)},{deep:!0}),it(v,()=>{Wt(w)}),lt(()=>{w(),B(),x()}),(G,K)=>{const se=W("router-view");return p(),E("section",mHe,[m("div",{class:ae(["flex flex-col h-full w-full lg:min-w-[340px] lg:max-w-[340px] ltr:border-r rtl:border-l border-n-weak",v.value?"hidden xl:flex":"flex"])},[S(pHe,{"is-context-menu-open":d.value,onFilter:k,onRedirect:D},null,8,["is-context-menu-open"]),m("div",{ref_key:"notificationList",ref:i,class:"flex flex-col gap-0.5 w-full h-[calc(100%-56px)] pb-4 overflow-x-hidden px-2 overflow-y-auto divide-y divide-n-weak [&>*:hover]:!border-y-transparent [&>*.active]:!border-y-transparent [&>*:hover+*]:!border-t-transparent [&>*.active+*]:!border-t-transparent"},[(p(!0),E(ue,null,Ae(_.value,ee=>{var X,z;return p(),L(DVe,{key:ee.id,"inbox-item":ee,"state-inbox":O((X=ee.primaryActor)==null?void 0:X.inboxId),class:ae(["inbox-card rounded-none hover:rounded-lg hover:bg-n-alpha-1 dark:hover:bg-n-alpha-3",v.value===((z=ee.primaryActor)==null?void 0:z.id)?"bg-n-alpha-1 dark:bg-n-alpha-3 rounded-lg active":""]),onMarkNotificationAsRead:P,onMarkNotificationAsUnRead:U,onDeleteNotification:F,onContextMenuOpen:K[0]||(K[0]=H=>d.value=!0),onContextMenuClose:K[1]||(K[1]=H=>d.value=!1),onClick:H=>V(ee)},null,8,["inbox-item","state-inbox","class","onClick"])}),128)),C(f).isFetching?(p(),E("div",hHe,[S(An,{class:"text-n-brand"})])):$("",!0),R.value?(p(),E("p",fHe,I(G.$t("INBOX.LIST.NO_NOTIFICATIONS")),1)):$("",!0),!N.value&&!C(f).isFetching?(p(),L(MI,{key:2,options:h.value,onObserved:M},null,8,["options"])):$("",!0)],512)],2),S(se),S(TC)])}}},_He={components:{NextButton:te},props:{totalLength:{type:Number,default:0},currentIndex:{type:Number,default:0}},emits:["prev","next"],computed:{isUpDisabled(){return this.currentIndex===1},isDownDisabled(){return this.currentIndex===this.totalLength||this.totalLength<=1}},methods:{handleUpClick(){this.currentIndex>1&&this.$emit("prev")},handleDownClick(){this.currentIndex<this.totalLength&&this.$emit("next")}}},vHe={class:"flex gap-2 items-center"},EHe={class:"flex gap-1 items-center"},bHe={class:"flex items-center gap-1 whitespace-nowrap"},THe={class:"text-sm font-medium text-n-slate-12 tabular-nums"},SHe={key:0,class:"text-sm text-n-slate-9 relative -top-px"},AHe={key:1,class:"text-sm text-n-slate-9 tabular-nums"};function yHe(e,t,n,s,a,o){const i=W("NextButton");return p(),E("div",vHe,[m("div",EHe,[S(i,{icon:"i-lucide-chevron-up",xs:"",slate:"",faded:"",disabled:o.isUpDisabled,onClick:o.handleUpClick},null,8,["disabled","onClick"]),S(i,{icon:"i-lucide-chevron-down",xs:"",slate:"",faded:"",disabled:o.isDownDisabled,onClick:o.handleDownClick},null,8,["disabled","onClick"])]),m("div",bHe,[m("span",THe,I(n.totalLength<=1?"1":n.currentIndex),1),n.totalLength>1?(p(),E("span",SHe," / ")):$("",!0),n.totalLength>1?(p(),E("span",AHe,I(n.totalLength),1)):$("",!0)])])}const IHe=De(_He,[["render",yHe]]),CHe={components:{PaginationButton:IHe,NextButton:te,BackButton:Rr,CustomSnoozeModal:Z_},props:{totalLength:{type:Number,default:0},currentIndex:{type:Number,default:0},activeNotification:{type:Object,default:null}},emits:["next","prev"],data(){return{showCustomSnoozeModal:!1}},computed:{...mt({meta:"notifications/getMeta"})},mounted(){Dt.on(Jb,this.onCmdSnoozeNotification)},unmounted(){Dt.off(Jb,this.onCmdSnoozeNotification)},methods:{openSnoozeNotificationModal(){document.querySelector("ninja-keys").open({parent:"snooze_notification"})},hideCustomSnoozeModal(){this.showCustomSnoozeModal=!1},async snoozeNotification(e){var t;try{await this.$store.dispatch("notifications/snooze",{id:(t=this.activeNotification)==null?void 0:t.id,snoozedUntil:e}),ne(this.$t("INBOX.ALERTS.SNOOZE"))}catch{}},onCmdSnoozeNotification(e){if(e===yt.SNOOZE_OPTIONS.UNTIL_CUSTOM_TIME)this.showCustomSnoozeModal=!0;else{const t=q_(e)||null;this.snoozeNotification(t)}},scheduleCustomSnooze(e){if(this.showCustomSnoozeModal=!1,e){const t=Ao(e)||null;this.snoozeNotification(t)}},deleteNotification(){zt(ol.DELETE_NOTIFICATION),this.$store.dispatch("notifications/delete",{notification:this.activeNotification,unread_count:this.meta.unreadCount,count:this.meta.count}).then(()=>{ne(this.$t("INBOX.ALERTS.DELETE"))}),this.$router.replace({name:"inbox_view"})},onClickNext(){this.$emit("next")},onClickPrev(){this.$emit("prev")},onClickGoToInboxList(){this.$router.replace({name:"inbox_view"})}}},NHe={class:"flex items-center justify-between w-full gap-2 border-b px-3 h-12 rtl:border-r border-n-weak flex-shrink-0"},OHe={class:"flex items-center gap-4"},RHe={class:"flex items-center gap-2"};function xHe(e,t,n,s,a,o){const i=W("BackButton"),l=W("PaginationButton"),r=W("NextButton"),c=W("CustomSnoozeModal"),u=W("woot-modal");return p(),E("div",NHe,[m("div",OHe,[S(i,{compact:"","button-label":e.$t("INBOX.ACTION_HEADER.BACK"),class:"xl:hidden flex"},null,8,["button-label"]),n.totalLength>1?(p(),L(l,{key:0,"total-length":n.totalLength,"current-index":n.currentIndex+1,onNext:o.onClickNext,onPrev:o.onClickPrev},null,8,["total-length","current-index","onNext","onPrev"])):$("",!0)]),m("div",RHe,[S(r,{label:e.$t("INBOX.ACTION_HEADER.SNOOZE"),icon:"i-lucide-bell-minus",slate:"",xs:"",faded:"",class:"[&>.truncate]:hidden md:[&>.truncate]:block",onClick:o.openSnoozeNotificationModal},null,8,["label","onClick"]),S(r,{label:e.$t("INBOX.ACTION_HEADER.DELETE"),icon:"i-lucide-trash-2",slate:"",xs:"",faded:"",class:"[&>.truncate]:hidden md:[&>.truncate]:block",onClick:o.deleteNotification},null,8,["label","onClick"])]),S(u,{show:a.showCustomSnoozeModal,"onUpdate:show":t[0]||(t[0]=d=>a.showCustomSnoozeModal=d),"on-close":o.hideCustomSnoozeModal},{default:Y(()=>[S(c,{onClose:o.hideCustomSnoozeModal,onChooseTime:o.scheduleCustomSnooze},null,8,["onClose","onChooseTime"])]),_:1},8,["show","on-close"])])}const wHe=De(CHe,[["render",xHe]]),$He={components:{Spinner:An},props:{emptyStateMessage:{type:String,default:""}},computed:{...mt({uiFlags:"notifications/getUIFlags"}),emptyMessage(){return this.emptyStateMessage?this.emptyStateMessage:this.$t("INBOX.LIST.NOTE")}}},MHe={class:"items-center justify-center hidden w-full h-full text-center bg-n-background lg:flex"},LHe={key:0,class:"flex justify-center my-4"},DHe={key:1,class:"flex flex-col items-center gap-2"},PHe={class:"text-sm font-medium text-n-slate-11"};function kHe(e,t,n,s,a,o){const i=W("Spinner"),l=W("fluent-icon");return p(),E("div",MHe,[e.uiFlags.isFetching?(p(),E("div",LHe,[S(i,{class:"text-n-brand"})])):(p(),E("div",DHe,[S(l,{icon:"mail-inbox",size:"40",class:"text-n-slate-11"}),m("span",PHe,I(o.emptyMessage),1)]))])}const VC=De($He,[["render",kHe]]),BHe={class:"h-full w-full flex-1"},UHe={key:0,class:"flex w-full h-full"},FHe={key:1,class:"flex flex-col w-full h-full"},GHe={key:0,class:"flex items-center flex-1 my-4 justify-center bg-n-solid-1"},VHe={key:1,class:"flex h-[calc(100%-48px)] min-w-0"},HHe={__name:"InboxView",setup(e){const t=wt(),n=Ft(),s=rt(),{uiSettings:a}=tn(),o=j(!1),i=_e("notifications/getFilteredNotifications"),l=_e("getSelectedChat"),r=_e("getConversationById"),c=_e("notifications/getUIFlags"),u=_e("notifications/getMeta"),d=y(()=>Number(t.params.inboxId)),h=y(()=>Number(t.params.id)),g=y(()=>{const{inbox_filter_by:P={}}=a.value,{sort_by:U}=P;return U||"desc"}),f=y(()=>i.value({sortOrder:g.value})),b=y(()=>{var P;return(P=f.value)==null?void 0:P.find(U=>{var F;return((F=U.primary_actor)==null?void 0:F.id)===h.value})}),A=y(()=>u.value.count),v=y(()=>{var P;return!h.value||!((P=f.value)!=null&&P.length)&&c.value.isFetching}),T=y(()=>{var P;return(P=f.value)==null?void 0:P.findIndex(U=>{var F;return((F=U.primary_actor)==null?void 0:F.id)===h.value})}),_=y(()=>{if(l.value.id){const{is_contact_sidebar_open:P}=a.value;return P}return!1}),N=()=>r.value(h.value),R=async P=>{const{id:U,primary_actor_id:F,primary_actor_type:k,primary_actor:{meta:{unreadCount:B}={},id:V},notification_type:G}=P;zt(ol.OPEN_CONVERSATION_VIA_INBOX,{notificationType:G});try{await s.dispatch("notifications/read",{id:U,primaryActorId:F,primaryActorType:k,unreadCount:B}),n.push({name:"inbox_view_conversation",params:{type:"conversation",id:V}})}catch{}},O=async()=>{const P=N();if(P)try{await s.dispatch("setActiveChat",{data:P}),Dt.emit(un.SCROLL_TO_MESSAGE)}catch{}},x=async()=>{if(!h.value)return;if(s.dispatch("clearSelectedState"),N()){await O();return}o.value=!0;try{await s.dispatch("getConversation",h.value),await O()}catch{}finally{o.value=!1}},w=(P,U)=>{const F=U==="prev"&&P>0,k=U==="next"&&P<A.value-1;if(!F&&!k)return;const B=U==="prev"?P-1:P+1,V=f.value[B];V&&R(V)},D=()=>{w(T.value,"next")},M=()=>{w(T.value,"prev")};return it(h,(P,U)=>{P!==U&&x()},{immediate:!0}),lt(async()=>{await s.dispatch("agents/get")}),(P,U)=>(p(),E("div",BHe,[v.value?(p(),E("div",UHe,[S(VC,{"empty-state-message":P.$t("INBOX.LIST.NO_MESSAGES_AVAILABLE")},null,8,["empty-state-message"])])):(p(),E("div",FHe,[S(wHe,{"total-length":A.value,"current-index":T.value,"active-notification":b.value,onNext:D,onPrev:M},null,8,["total-length","current-index","active-notification"]),o.value?(p(),E("div",GHe,[S(An,{class:"text-n-brand"})])):(p(),E("div",VHe,[S(bC,{class:"flex-1 [&.conversation-details-wrap]:!border-0","is-inbox-view":"","inbox-id":d.value,"is-on-expanded-layout":!1},{default:Y(()=>[C(l).id?(p(),L(SC,{key:0})):$("",!0)]),_:1},8,["inbox-id"]),_.value?(p(),L(DC,{key:0,"current-chat":C(l)},null,8,["current-chat"])):$("",!0)]))]))]))}},WHe=[{path:vt("accounts/:accountId/inbox-view"),component:gHe,children:[{path:"",name:"inbox_view",component:VC,meta:{permissions:[...qn,...Ms]}},{path:":type/:id",name:"inbox_view_conversation",component:HHe,meta:{permissions:[...qn,...Ms]}}]}],Za=(e="")=>{const t=e?`/${e}`:"";return vt(`accounts/:accountId/portals${t}`)},zHe={components:{NextButton:te},data(){return{helpCenterDocsURL:yt.HELP_CENTER_DOCS_URL,upgradeFeature:[{key:1,title:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.PORTALS.TITLE"),icon:"book-copy",description:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.PORTALS.DESCRIPTION")},{key:2,title:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.LOCALES.TITLE"),icon:"globe-line",description:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.LOCALES.DESCRIPTION")},{key:3,title:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.SEO.TITLE"),icon:"heart-handshake",description:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.SEO.DESCRIPTION")},{key:4,title:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.API.TITLE"),icon:"search-check",description:this.$t("HELP_CENTER.UPGRADE_PAGE.FEATURES.API.DESCRIPTION")}]}},computed:{...mt({accountId:"getCurrentAccountId",isOnChatwootCloud:"globalConfig/isOnChatwootCloud"})},methods:{openBillingPage(){this.$router.push({name:"billing_settings_index",params:{accountId:this.accountId}})},openHelpCenterDocs(){window.open(this.helpCenterDocsURL,"_blank")}}},YHe={class:"flex flex-col gap-12 sm:gap-16 items-center justify-center py-0 px-4 w-full min-h-screen max-w-full overflow-auto bg-n-background"},jHe={class:"flex flex-col justify-start sm:justify-center gap-6"},KHe={class:"flex flex-col gap-1.5 items-start sm:items-center"},XHe={class:"text-n-slate-12 text-left sm:text-center text-4xl sm:text-5xl mb-6 font-semibold"},qHe={class:"max-w-2xl text-base font-normal leading-6 text-left sm:text-center text-n-slate-11"},ZHe={key:0,class:"flex flex-row gap-3 justify-start items-center sm:justify-center"},QHe={class:"grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-16 w-full max-w-2xl overflow-auto"},JHe={class:"flex gap-2 flex-row"},eWe={class:"font-semibold text-lg text-n-slate-12"},tWe={class:"text-sm leading-6 text-n-slate-12"};function nWe(e,t,n,s,a,o){const i=W("NextButton"),l=W("fluent-icon");return p(),E("div",YHe,[m("div",jHe,[m("div",KHe,[m("h1",XHe,I(e.$t("HELP_CENTER.UPGRADE_PAGE.TITLE")),1),m("p",qHe,I(e.isOnChatwootCloud?e.$t("HELP_CENTER.UPGRADE_PAGE.DESCRIPTION"):e.$t("HELP_CENTER.UPGRADE_PAGE.SELF_HOSTED_DESCRIPTION")),1)]),e.isOnChatwootCloud?(p(),E("div",ZHe,[S(i,{outline:"",label:e.$t("HELP_CENTER.UPGRADE_PAGE.BUTTON.LEARN_MORE"),onClick:o.openHelpCenterDocs},null,8,["label","onClick"]),S(i,{label:e.$t("HELP_CENTER.UPGRADE_PAGE.BUTTON.UPGRADE"),onClick:o.openBillingPage},null,8,["label","onClick"])])):$("",!0)]),m("div",QHe,[(p(!0),E(ue,null,Ae(a.upgradeFeature,r=>(p(),E("div",{key:r.key,class:"w-64 min-w-full"},[m("div",JHe,[m("div",null,[S(l,{icon:r.icon,"icon-lib":"lucide",size:26,class:"mt-px text-n-slate-12"},null,8,["icon"])]),m("div",null,[m("h5",eWe,I(r.title),1),m("p",tWe,I(r.description),1)])])]))),128))])])}const sWe=De(zHe,[["render",nWe]]),aWe={class:"flex w-full h-full min-h-0"},oWe={key:0,class:"flex flex-1 h-full px-0 overflow-hidden bg-n-background"},iWe={__name:"HelpCenterPageRouteView",setup(e){const t=wt(),n=na(),{uiSettings:s,updateUISettings:a}=tn(),o=y(()=>n.getters.getCurrentAccountId),i=y(()=>n.getters["portals/allPortals"]),l=(f,b)=>n.getters["accounts/isFeatureEnabledonAccount"](f,b),r=y(()=>l(o.value,ft.HELP_CENTER)),c=y(()=>{const f=t.params.portalSlug||s.value.last_active_portal_slug;return f?n.getters["portals/portalBySlug"](f):i.value[0]}),u=y(()=>{var f;return c.value?(f=c.value.meta)==null?void 0:f.default_locale:""}),d=y(()=>t.params.locale||u.value),h=y(()=>c.value?c.value.slug:""),g=async()=>{await n.dispatch("portals/index");const f={portalSlug:h.value,locale:d.value};n.dispatch("portals/show",f),n.dispatch("categories/index",f),n.dispatch("agents/get")};return lt(()=>g()),it(()=>t.params.portalSlug,f=>{f&&f!==s.value.last_active_portal_slug&&a({last_active_portal_slug:f,last_active_locale_code:d.value})}),(f,b)=>{const A=W("router-view");return p(),E("div",aWe,[r.value?(p(),E("section",oWe,[S(A)])):(p(),L(sWe,{key:1}))])}}},lWe={class:"flex items-center justify-center w-full bg-n-background text-n-slate-11"},rWe={__name:"PortalsIndexPage",setup(e){const t=na(),n=Ft(),{uiSettings:s}=tn(),a=wt(),o=y(()=>t.getters["portals/allPortals"]),i=d=>!!o.value.find(h=>h.slug===d),l=(d,h)=>{n.replace({name:d,params:h,replace:!0})},r=()=>{const{last_active_portal_slug:d,last_active_locale_code:h}=s.value||{};if(i(d))return{portalSlug:d,locale:h};if(o.value.length>0){const{slug:g,meta:{default_locale:f}={}}=o.value[0];return{portalSlug:g,locale:f}}return null},c=()=>{const d=r(),{navigationPath:h}=a.params,f=["portals_articles_index","portals_categories_index","portals_locales_index","portals_settings_index"].includes(h)?h:"portals_articles_index";return d?l(f,d):l("portals_new",{})},u=async()=>{await t.dispatch("portals/index"),Wt(()=>c())};return lt(()=>u()),(d,h)=>(p(),E("div",lWe,[S(An)]))}},cWe={class:"flex justify-between w-full gap-1"},uWe={class:"flex items-center gap-2"},dWe={class:"relative flex items-center group"},pWe={class:"flex items-center justify-between w-full gap-4"},mWe={class:"flex items-center gap-4"},hWe={class:"flex items-center gap-1"},fWe={class:"text-sm truncate text-n-slate-11"},gWe={class:"block text-sm whitespace-nowrap text-n-slate-11"},_We={class:"inline-flex items-center gap-1 text-n-slate-11 whitespace-nowrap"},vWe={class:"text-sm"},EWe={class:"text-sm text-n-slate-11 line-clamp-1"},qT={__name:"ArticleCard",props:{id:{type:Number,required:!0},title:{type:String,required:!0},status:{type:String,required:!0},author:{type:Object,default:null},category:{type:Object,required:!0},views:{type:Number,required:!0},updatedAt:{type:Number,required:!0}},emits:["openArticle","articleAction"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),[o,i]=yn(),l=y(()=>{const A=Object.entries(sNe).reduce((T,[_,N])=>(T[_]={...N,label:a(N.label)},T),{});return[...(nT[n.status]||nT[ml.PUBLISHED]).map(T=>A[T]),A.delete]}),r=y(()=>{switch(n.status){case"archived":return"text-n-slate-12";case"draft":return"text-n-amber-11";default:return"text-n-teal-11"}}),c=y(()=>{switch(n.status){case"archived":return a("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.STATUS.ARCHIVED");case"draft":return a("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.STATUS.DRAFT");default:return a("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.STATUS.PUBLISHED")}}),u=y(()=>{var A;return(A=n.category)!=null&&A.slug?`${n.category.icon} ${n.category.name}`:a("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.CATEGORY.UNCATEGORISED")}),d=y(()=>{var A,v;return((A=n.author)==null?void 0:A.name)||((v=n.author)==null?void 0:v.availableName)||""}),h=y(()=>{var A;return(A=n.author)==null?void 0:A.thumbnail}),g=y(()=>us(n.updatedAt)),f=({action:A,value:v})=>{i(!1),s("articleAction",{action:A,value:v,id:n.id})},b=A=>{s("openArticle",A)};return(A,v)=>{const T=Qe("on-clickaway");return p(),L(ba,null,{default:Y(()=>[m("div",cWe,[m("span",{class:"text-base cursor-pointer hover:underline underline-offset-2 hover:text-n-blue-text text-n-slate-12 line-clamp-1",onClick:v[0]||(v[0]=_=>b(e.id))},I(e.title),1),m("div",uWe,[m("span",{class:ae(["text-xs font-medium inline-flex items-center h-6 px-2 py-0.5 rounded-md bg-n-alpha-2",r.value])},I(c.value),3),re((p(),E("div",dWe,[S(te,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:v[1]||(v[1]=_=>C(i)())}),C(o)?(p(),L(qs,{key:0,"menu-items":l.value,class:"mt-1 ltr:right-0 rtl:left-0 xl:ltr:left-0 xl:rtl:right-0 top-full",onAction:v[2]||(v[2]=_=>f(_))},null,8,["menu-items"])):$("",!0)])),[[T,()=>C(i)(!1)]])])]),m("div",pWe,[m("div",mWe,[m("div",hWe,[S(kt,{name:d.value,src:h.value,size:16,"rounded-full":""},null,8,["name","src"]),m("span",fWe,I(d.value||"-"),1)]),m("span",gWe,I(u.value),1),m("div",_We,[S(dt,{icon:"i-lucide-eye",class:"size-4"}),m("span",vWe,I(C(a)("HELP_CENTER.ARTICLES_PAGE.ARTICLE_CARD.CARD.VIEWS",{count:e.views})),1)])]),m("span",EWe,I(g.value),1)])]),_:1})}}},ZT=[{id:1,title:"How to get an SSL certificate for your Help Center's custom domain",status:"draft",updatedAt:1729205669,author:{availableName:"Michael"},category:{slug:"configuration",icon:"",name:"Setup & Configuration"},views:3400},{id:2,title:"Setting up your first Help Center portal",status:"published",updatedAt:1729205669,author:{availableName:"John"},category:{slug:"onboarding",icon:"",name:"Onboarding"},views:400},{id:3,title:"Best practices for organizing your Help Center content",status:"archived",updatedAt:1729205669,author:{availableName:"Fernando"},category:{slug:"best-practices",icon:"",name:"Best Practices"},views:400},{id:4,title:"Customizing the appearance of your Help Center",status:"draft",updatedAt:1729205669,author:{availableName:"Jane"},category:{slug:"design",icon:"",name:"Design"},views:400},{id:5,title:"Integrating your Help Center with third-party tools",status:"published",updatedAt:1729205669,author:{availableName:"Sarah"},category:{slug:"integrations",icon:"",name:"Integrations"},views:2800},{id:6,title:"Managing user permissions in your Help Center",status:"draft",updatedAt:1729205669,author:{availableName:"Alex"},category:{slug:"administration",icon:"",name:"Administration"},views:1200},{id:7,title:"Creating and managing FAQ sections",status:"published",updatedAt:1729205669,author:{availableName:"Emily"},category:{slug:"content-management",icon:"",name:"Content Management"},views:5600},{id:8,title:"Implementing search functionality in your Help Center",status:"archived",updatedAt:1729205669,author:{availableName:"David"},category:{slug:"features",icon:"",name:"Features"},views:1800},{id:9,title:"Analyzing Help Center usage metrics",status:"published",updatedAt:1729205669,author:{availableName:"Rachel"},category:{slug:"analytics",icon:"",name:"Analytics"},views:3200},{id:10,title:"Setting up multilingual support in your Help Center",status:"draft",updatedAt:1729205669,author:{availableName:"Carlos"},category:{slug:"localization",icon:"",name:"Localization"},views:900},{id:11,title:"Creating interactive tutorials for your products",status:"published",updatedAt:1729205669,author:{availableName:"Olivia"},category:{slug:"education",icon:"",name:"Education"},views:4100},{id:12,title:"Implementing a feedback system in your Help Center",status:"draft",updatedAt:1729205669,author:{availableName:"Nathan"},category:{slug:"user-engagement",icon:"",name:"User Engagement"},views:750},{id:13,title:"Optimizing Help Center content for SEO",status:"published",updatedAt:1729205669,author:{availableName:"Sophia"},category:{slug:"seo",icon:"",name:"SEO"},views:2900},{id:14,title:"Creating a knowledge base for internal teams",status:"archived",updatedAt:1729205669,author:{availableName:"Daniel"},category:{slug:"internal-resources",icon:"",name:"Internal Resources"},views:1500}],bWe={class:"flex flex-col gap-6"},TWe={__name:"CreatePortalDialog",emits:["create"],setup(e,{expose:t,emit:n}){const s=n,{t:a}=be(),o=rt(),i=j(null),l=_e("portals/isCreatingPortal"),r=gn({name:"",slug:"",domain:"",logoUrl:"",avatarBlobId:""}),c={name:{required:Ye,minLength:en(2)},slug:{required:_c.withMessage(()=>a("HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.ERROR"),Ye),isValidSlug:_c.withMessage(()=>a("HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.FORMAT_ERROR"),uO)}},u=bt(c,r),d=y(()=>u.value.name.$error?a("HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.ERROR"):""),h=y(()=>{var T;return((T=u.value.slug.$errors[0])==null?void 0:T.$message)||""}),g=y(()=>u.value.$invalid);it(()=>r.name,()=>{r.slug=nR(r.name)});const f=T=>{s("create",{slug:T.slug,locale:"en"})},b=()=>{Object.keys(r).forEach(T=>{r[T]=""}),u.value.$reset()},A=async T=>{try{await o.dispatch("portals/create",T),i.value.close();const _={has_custom_domain:!!T.custom_domain};zt(wv.ONBOARD_BASIC_INFORMATION,_),zt(wv.CREATE_PORTAL,_),ne(a("HELP_CENTER.PORTAL_SETTINGS.API.CREATE_PORTAL.SUCCESS_MESSAGE")),b(),f(T)}catch(_){i.value.close(),ne((_==null?void 0:_.message)||a("HELP_CENTER.PORTAL_SETTINGS.API.CREATE_PORTAL.ERROR_MESSAGE"))}},v=async()=>{if(!await u.value.$validate())return;const _={name:r.name,slug:r.slug,custom_domain:r.domain,blob_id:r.avatarBlobId||null,color:"#2781F6"};await A(_)};return t({dialogRef:i}),(T,_)=>(p(),L($n,{ref_key:"dialogRef",ref:i,type:"edit",title:C(a)("HELP_CENTER.CREATE_PORTAL_DIALOG.TITLE"),"confirm-button-label":C(a)("HELP_CENTER.CREATE_PORTAL_DIALOG.CONFIRM_BUTTON_LABEL"),description:C(a)("HELP_CENTER.CREATE_PORTAL_DIALOG.DESCRIPTION"),"disable-confirm-button":g.value||C(l),"is-loading":C(l),onConfirm:v},{default:Y(()=>[m("div",bWe,[S(Tt,{id:"portal-name",modelValue:r.name,"onUpdate:modelValue":_[0]||(_[0]=N=>r.name=N),type:"text",placeholder:C(a)("HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.PLACEHOLDER"),label:C(a)("HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.LABEL"),"message-type":d.value?"error":"info",message:d.value||C(a)("HELP_CENTER.CREATE_PORTAL_DIALOG.NAME.MESSAGE"),onBlur:_[1]||(_[1]=N=>C(u).name.$touch())},null,8,["modelValue","placeholder","label","message-type","message"]),S(Tt,{id:"portal-slug",modelValue:r.slug,"onUpdate:modelValue":_[2]||(_[2]=N=>r.slug=N),type:"text",placeholder:C(a)("HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.PLACEHOLDER"),label:C(a)("HELP_CENTER.CREATE_PORTAL_DIALOG.SLUG.LABEL"),"message-type":h.value?"error":"info",message:h.value||C(PI)(r.slug),onInput:_[3]||(_[3]=N=>C(u).slug.$touch()),onBlur:_[4]||(_[4]=N=>C(u).slug.$touch())},null,8,["modelValue","placeholder","label","message-type","message"])])]),_:1},8,["title","confirm-button-label","description","disable-confirm-button","is-loading"]))}},SWe={class:"grid grid-cols-2 gap-4 p-px"},AWe={class:"space-y-4"},yWe={class:"space-y-4"},IWe={__name:"PortalEmptyState",setup(e){const t=j(null),n=()=>{t.value.dialogRef.open()},s=Ft(),a=({slug:o,locale:i})=>{s.push({name:"portals_articles_index",params:{portalSlug:o,locale:i}})};return(o,i)=>(p(),L(Do,{title:o.$t("HELP_CENTER.TITLE"),subtitle:o.$t("HELP_CENTER.NEW_PAGE.DESCRIPTION")},{"empty-state-item":Y(()=>[m("div",SWe,[m("div",AWe,[(p(!0),E(ue,null,Ae(C(ZT),(l,r)=>(p(),L(qT,{id:l.id,key:`article-${r}`,title:l.title,status:l.status,"updated-at":l.updatedAt,author:l.author,category:l.category,views:l.views},null,8,["id","title","status","updated-at","author","category","views"]))),128))]),m("div",yWe,[(p(!0),E(ue,null,Ae(C(ZT).reverse(),(l,r)=>(p(),L(qT,{id:l.id,key:`article-${r}`,title:l.title,status:l.status,"updated-at":l.updatedAt,author:l.author,category:l.category,views:l.views},null,8,["id","title","status","updated-at","author","category","views"]))),128))])])]),actions:Y(()=>[S(te,{label:o.$t("HELP_CENTER.NEW_PAGE.CREATE_PORTAL_BUTTON"),icon:"i-lucide-plus",onClick:n},null,8,["label"]),S(TWe,{ref_key:"createPortalDialogRef",ref:t,onCreate:a},null,512)]),_:1},8,["title","subtitle"]))}},CWe={class:"w-full h-full bg-n-background"},NWe={__name:"PortalsNewPage",setup(e){return(t,n)=>(p(),E("div",CWe,[S(IWe)]))}},QT=()=>ti(()=>import("./PortalsArticlesIndexPage-BGINfHOt.js"),__vite__mapDeps([15,3,2,4,5,7,8,9,16,17,18,10,19,13,20,6,21,22,1,11,23,24,12,25,26,27,28])),OWe=()=>ti(()=>import("./PortalsArticlesNewPage-DK1t1zKF.js"),__vite__mapDeps([29,3,2,4,5,7,8,9,19,17,18,10,13,20,30,16,6,1,11,31,23,24,12,25,26,27])),JT=()=>ti(()=>import("./PortalsArticlesEditPage-aoac-HIl.js"),__vite__mapDeps([32,3,2,4,5,7,8,9,19,17,18,10,13,20,30,16,6,1,11,31,23,24,12,25,26,27])),RWe=()=>ti(()=>import("./PortalsCategoriesIndexPage-DvLRwBgd.js"),__vite__mapDeps([33,3,2,4,5,7,8,9,19,17,18,10,13,20,16,6,21,22,1,11,23,24,12,25,26,27])),xWe=()=>ti(()=>import("./PortalsLocalesIndexPage-Cw9g2ZfA.js"),__vite__mapDeps([34,3,2,4,5,7,8,9,16,17,18,10,19,13,20,6,1,11,23,24,12,25,26,27])),wWe=()=>ti(()=>import("./PortalsSettingsIndexPage-CH1_B0AG.js"),__vite__mapDeps([35,3,7,8,9,2,4,5,19,17,18,10,13,20,16,6,1,11,23,24,12,25,26,27,36])),mi={featureFlag:ft.HELP_CENTER,permissions:["administrator","agent","knowledge_base_manage"]},$We=[{path:Za(":portalSlug/:locale/:categorySlug?/articles/:tab?"),name:"portals_articles_index",meta:mi,component:QT},{path:Za(":portalSlug/:locale/:categorySlug?/articles/new"),name:"portals_articles_new",meta:mi,component:OWe},{path:Za(":portalSlug/:locale/:categorySlug?/articles/:tab?/edit/:articleSlug"),name:"portals_articles_edit",meta:mi,component:JT},{path:Za(":portalSlug/:locale/categories"),name:"portals_categories_index",meta:mi,component:RWe},{path:Za(":portalSlug/:locale/categories/:categorySlug/articles"),name:"portals_categories_articles_index",meta:mi,component:QT},{path:Za(":portalSlug/:locale/categories/:categorySlug/articles/:articleSlug"),name:"portals_categories_articles_edit",meta:mi,component:JT},{path:Za(":portalSlug/locales"),name:"portals_locales_index",meta:mi,component:xWe},{path:Za(":portalSlug/settings"),name:"portals_settings_index",meta:mi,component:wWe},{path:Za("new"),name:"portals_new",meta:{featureFlag:ft.HELP_CENTER,permissions:["administrator","knowledge_base_manage"]},component:NWe},{path:Za(":navigationPath"),name:"portals_index",meta:{featureFlag:ft.HELP_CENTER,permissions:["administrator","knowledge_base_manage"]},component:rWe}],MWe={routes:[{path:Za(),component:iWe,redirect:e=>({name:"portals_index",params:{navigationPath:"portals_articles_index",...e.params}}),children:[...$We]}]},LWe={class:"flex flex-col justify-between flex-1 h-full m-0 overflow-auto bg-n-background px-6"},DWe={__name:"CampaignsPageRouteView",props:{keepAlive:{type:Boolean,default:!0}},setup(e){const t=rt();return lt(()=>{t.dispatch("campaigns/get"),t.dispatch("labels/get")}),(n,s)=>{const a=W("router-view");return p(),E("div",LWe,[S(a,null,{default:Y(({Component:o})=>[e.keepAlive?(p(),L(Qd,{key:0},[(p(),L(ds(o)))],1024)):(p(),L(ds(o),{key:1}))]),_:1})])}}},PWe={class:"flex flex-col w-full h-full overflow-hidden bg-n-background"},kWe={class:"sticky top-0 z-10 px-6 lg:px-0"},BWe={class:"w-full max-w-[60rem] mx-auto"},UWe={class:"flex items-center justify-between w-full h-20 gap-2"},FWe={class:"text-xl font-medium text-n-slate-12"},GWe={class:"relative group/campaign-button"},VWe={class:"flex-1 px-6 overflow-y-auto lg:px-0"},HWe={class:"w-full max-w-[60rem] mx-auto py-4"},uv={__name:"CampaignLayout",props:{headerTitle:{type:String,default:""},buttonLabel:{type:String,default:""}},emits:["click","close"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(a,o)=>{const i=Qe("on-clickaway");return p(),E("section",PWe,[m("header",kWe,[m("div",BWe,[m("div",UWe,[m("span",FWe,I(e.headerTitle),1),re((p(),E("div",GWe,[S(te,{label:e.buttonLabel,icon:"i-lucide-plus",size:"sm",class:"group-hover/campaign-button:brightness-110",onClick:s},null,8,["label"]),We(a.$slots,"action")])),[[i,()=>n("close")]])])])]),m("main",VWe,[m("div",HWe,[We(a.$slots,"default")])])])}}},WWe={class:"flex-shrink-0 text-sm text-n-slate-11 whitespace-nowrap"},zWe={class:"flex items-center gap-1.5 flex-shrink-0"},YWe={class:"text-sm font-medium text-n-slate-12"},jWe={class:"flex-shrink-0 text-sm text-n-slate-11 whitespace-nowrap"},KWe={class:"flex items-center gap-1.5 flex-shrink-0"},XWe={class:"text-sm font-medium text-n-slate-12"},qWe={__name:"LiveChatCampaignDetails",props:{sender:{type:Object,default:null},inboxName:{type:String,default:""},inboxIcon:{type:String,default:""}},setup(e){const t=e,{t:n}=be(),s=y(()=>{var o;return((o=t.sender)==null?void 0:o.name)||n("CAMPAIGN.LIVE_CHAT.CARD.CAMPAIGN_DETAILS.BOT")}),a=y(()=>{var o;return(o=t.sender)==null?void 0:o.thumbnail});return(o,i)=>(p(),E(ue,null,[m("span",WWe,I(C(n)("CAMPAIGN.LIVE_CHAT.CARD.CAMPAIGN_DETAILS.SENT_BY")),1),m("div",zWe,[S(kt,{name:s.value,src:a.value,size:16,"rounded-full":""},null,8,["name","src"]),m("span",YWe,I(s.value),1)]),m("span",jWe,I(C(n)("CAMPAIGN.LIVE_CHAT.CARD.CAMPAIGN_DETAILS.FROM")),1),m("div",KWe,[S(dt,{icon:e.inboxIcon,class:"flex-shrink-0 text-n-slate-12 size-3"},null,8,["icon"]),m("span",XWe,I(e.inboxName),1)])],64))}},ZWe={class:"flex-shrink-0 text-sm text-n-slate-11 whitespace-nowrap"},QWe={class:"flex items-center gap-1.5 flex-shrink-0"},JWe={class:"text-sm font-medium text-n-slate-12"},eze={class:"flex-shrink-0 text-sm text-n-slate-11 whitespace-nowrap"},tze={class:"flex-1 text-sm font-medium truncate text-n-slate-12"},nze={__name:"SMSCampaignDetails",props:{inboxName:{type:String,default:""},inboxIcon:{type:String,default:""},scheduledAt:{type:Number,default:0}},setup(e){const{t}=be();return(n,s)=>(p(),E(ue,null,[m("span",ZWe,I(C(t)("CAMPAIGN.SMS.CARD.CAMPAIGN_DETAILS.SENT_FROM")),1),m("div",QWe,[S(dt,{icon:e.inboxIcon,class:"flex-shrink-0 text-n-slate-12 size-3"},null,8,["icon"]),m("span",JWe,I(e.inboxName),1)]),m("span",eze,I(C(t)("CAMPAIGN.SMS.CARD.CAMPAIGN_DETAILS.ON")),1),m("span",tze,I(C(yd)(new Date(e.scheduledAt),"LLL d, h:mm a")),1)],64))}},sze={class:"flex flex-col items-start justify-between flex-1 min-w-0 gap-2"},aze={class:"flex justify-between gap-3 w-fit"},oze={class:"text-base font-medium capitalize text-n-slate-12 line-clamp-1"},ize={class:"text-sm text-n-slate-11 line-clamp-1 [&>p]:mb-0 h-6"},lze={class:"flex items-center w-full h-6 gap-2 overflow-hidden"},rze={class:"flex items-center justify-end w-20 gap-2"},eS="completed",tm={__name:"CampaignCard",props:{title:{type:String,default:""},message:{type:String,default:""},isLiveChatType:{type:Boolean,default:!1},isEnabled:{type:Boolean,default:!1},status:{type:String,default:""},sender:{type:Object,default:null},inbox:{type:Object,default:null},scheduledAt:{type:Number,default:0}},emits:["edit","delete"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),{formatMessage:o}=sa(),i=y(()=>n.isLiveChatType?n.isEnabled:n.status!==eS),l=y(()=>({"text-n-teal-11":i.value,"text-n-slate-12":!i.value})),r=y(()=>n.isLiveChatType?n.isEnabled?a("CAMPAIGN.LIVE_CHAT.CARD.STATUS.ENABLED"):a("CAMPAIGN.LIVE_CHAT.CARD.STATUS.DISABLED"):n.status===eS?a("CAMPAIGN.SMS.CARD.STATUS.COMPLETED"):a("CAMPAIGN.SMS.CARD.STATUS.SCHEDULED")),c=y(()=>{var d;return((d=n.inbox)==null?void 0:d.name)||""}),u=y(()=>{const{medium:d,channel_type:h}=n.inbox;return ni(h,d)});return(d,h)=>{const g=Qe("dompurify-html");return p(),L(ba,{layout:"row"},{default:Y(()=>[m("div",sze,[m("div",aze,[m("span",oze,I(e.title),1),m("span",{class:ae(["text-xs font-medium inline-flex items-center h-6 px-2 py-0.5 rounded-md bg-n-alpha-2",l.value])},I(r.value),3)]),re(m("div",ize,null,512),[[g,C(o)(e.message,!1,!1,!1)]]),m("div",lze,[e.isLiveChatType?(p(),L(qWe,{key:0,sender:e.sender,"inbox-name":c.value,"inbox-icon":u.value},null,8,["sender","inbox-name","inbox-icon"])):(p(),L(nze,{key:1,"inbox-name":c.value,"inbox-icon":u.value,"scheduled-at":e.scheduledAt},null,8,["inbox-name","inbox-icon","scheduled-at"]))])]),m("div",rze,[e.isLiveChatType?(p(),L(te,{key:0,variant:"faded",size:"sm",color:"slate",icon:"i-lucide-sliders-vertical",onClick:h[0]||(h[0]=f=>s("edit"))})):$("",!0),S(te,{variant:"faded",color:"ruby",size:"sm",icon:"i-lucide-trash",onClick:h[1]||(h[1]=f=>s("delete"))})])]),_:1})}}},cze={class:"flex flex-col gap-4"},dv={__name:"CampaignList",props:{campaigns:{type:Array,required:!0},isLiveChatType:{type:Boolean,default:!1}},emits:["edit","delete"],setup(e,{emit:t}){const n=t,s=o=>n("edit",o),a=o=>n("delete",o);return(o,i)=>(p(),E("div",cze,[(p(!0),E(ue,null,Ae(e.campaigns,l=>(p(),L(tm,{key:l.id,title:l.title,message:l.message,"is-enabled":l.enabled,status:l.campaign_status,sender:l.sender,inbox:l.inbox,"scheduled-at":l.scheduled_at,"is-live-chat-type":e.isLiveChatType,onEdit:r=>s(l),onDelete:r=>a(l)},null,8,["title","message","is-enabled","status","sender","inbox","scheduled-at","is-live-chat-type","onEdit","onDelete"]))),128))]))}},uze={class:"flex flex-col gap-1"},dze={for:"inbox",class:"mb-0.5 text-sm font-medium text-n-slate-12"},pze={class:"flex flex-col gap-1"},mze={for:"sentBy",class:"mb-0.5 text-sm font-medium text-n-slate-12"},hze={class:"flex flex-col gap-2.5"},fze={class:"mb-2.5 text-sm font-medium text-n-slate-12"},gze={class:"flex items-center gap-2"},_ze={class:"text-sm font-medium text-n-slate-12"},vze={class:"flex items-center gap-2"},Eze={class:"text-sm font-medium text-n-slate-12"},bze={key:0,class:"flex items-center justify-between w-full gap-3"},HC={__name:"LiveChatCampaignForm",props:{mode:{type:String,required:!0,validator:e=>["edit","create"].includes(e)},selectedCampaign:{type:Object,default:()=>({})},showActionButtons:{type:Boolean,default:!0}},emits:["submit","cancel"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=be(),i=rt(),l={uiFlags:_e("campaigns/getUIFlags"),inboxes:_e("inboxes/getWebsiteInboxes")},r=j([]),c={title:"",message:"",inboxId:null,senderId:0,enabled:!0,triggerOnlyDuringBusinessHours:!1,endPoint:"",timeOnPage:10},u=gn({...c}),d={shouldBeAValidURLPattern:P=>{try{return new aO(P),!0}catch{return!1}},shouldStartWithHTTP:P=>P?P.startsWith("https://")||P.startsWith("http://"):!1},h={title:{required:Ye,minLength:en(1)},message:{required:Ye,minLength:en(1)},inboxId:{required:Ye},senderId:{required:Ye},endPoint:{required:Ye,...d},timeOnPage:{required:Ye}},g=bt(h,u),f=y(()=>l.uiFlags.value.isCreating),b=y(()=>g.value.$invalid),A=(P,U,F)=>(P==null?void 0:P.map(k=>({value:k[U],label:k[F]})))??[],v=y(()=>A(l.inboxes.value,"id","name")),T=y(()=>[{value:0,label:"Bot"},...A(r.value,"id","name")]),_=(P,U)=>g.value[P].$error?o(`CAMPAIGN.LIVE_CHAT.CREATE.FORM.${U}.ERROR`):"",N=y(()=>({title:_("title","TITLE"),message:_("message","MESSAGE"),inbox:_("inboxId","INBOX"),endPoint:_("endPoint","END_POINT"),timeOnPage:_("timeOnPage","TIME_ON_PAGE"),sender:_("senderId","SENT_BY")})),R=()=>Object.assign(u,c),O=()=>a("cancel"),x=async P=>{var U,F;if(!P){r.value=[];return}try{const k=await i.dispatch("inboxMembers/get",{inboxId:P});r.value=((U=k==null?void 0:k.data)==null?void 0:U.payload)??[]}catch(k){r.value=[],ne(((F=k==null?void 0:k.response)==null?void 0:F.message)??o("CAMPAIGN.LIVE_CHAT.CREATE.FORM.API.ERROR_MESSAGE"))}},w=()=>({title:u.title,message:u.message,inbox_id:u.inboxId,sender_id:u.senderId||null,enabled:u.enabled,trigger_only_during_business_hours:u.triggerOnlyDuringBusinessHours,trigger_rules:{url:u.endPoint,time_on_page:u.timeOnPage}}),D=async()=>{await g.value.$validate()&&(a("submit",w()),s.mode==="create"&&(R(),O()))},M=P=>{if(!P)return;const{title:U,message:F,inbox:{id:k},sender:B,enabled:V,trigger_only_during_business_hours:G,trigger_rules:{url:K,time_on_page:se}}=P;Object.assign(u,{title:U,message:F,inboxId:k,senderId:(B==null?void 0:B.id)??0,enabled:V,triggerOnlyDuringBusinessHours:G,endPoint:K,timeOnPage:se})};return it(()=>u.inboxId,P=>{P&&x(P)},{immediate:!0}),it(()=>s.selectedCampaign,P=>{s.mode==="edit"&&P&&M(P)},{immediate:!0}),t({prepareCampaignDetails:w,isSubmitDisabled:b}),(P,U)=>(p(),E("form",{class:"flex flex-col gap-4",onSubmit:Ve(D,["prevent"])},[S(Tt,{modelValue:u.title,"onUpdate:modelValue":U[0]||(U[0]=F=>u.title=F),label:C(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.TITLE.LABEL"),placeholder:C(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.TITLE.PLACEHOLDER"),message:N.value.title,"message-type":N.value.title?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),S(Ks,{modelValue:u.message,"onUpdate:modelValue":U[1]||(U[1]=F=>u.message=F),label:C(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.MESSAGE.LABEL"),placeholder:C(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.MESSAGE.PLACEHOLDER"),message:N.value.message,"message-type":N.value.message?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),m("div",uze,[m("label",dze,I(C(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.INBOX.LABEL")),1),S(Ha,{id:"inbox",modelValue:u.inboxId,"onUpdate:modelValue":U[2]||(U[2]=F=>u.inboxId=F),options:v.value,"has-error":!!N.value.inbox,placeholder:C(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.INBOX.PLACEHOLDER"),message:N.value.inbox,class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6"},null,8,["modelValue","options","has-error","placeholder","message"])]),m("div",pze,[m("label",mze,I(C(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.SENT_BY.LABEL")),1),S(Ha,{id:"sentBy",modelValue:u.senderId,"onUpdate:modelValue":U[3]||(U[3]=F=>u.senderId=F),options:T.value,"has-error":!!N.value.sender,disabled:!u.inboxId,placeholder:C(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.SENT_BY.PLACEHOLDER"),class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6",message:N.value.sender},null,8,["modelValue","options","has-error","disabled","placeholder","message"])]),S(Tt,{modelValue:u.endPoint,"onUpdate:modelValue":U[4]||(U[4]=F=>u.endPoint=F),type:"url",label:C(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.END_POINT.LABEL"),placeholder:C(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.END_POINT.PLACEHOLDER"),message:N.value.endPoint,"message-type":N.value.endPoint?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),S(Tt,{modelValue:u.timeOnPage,"onUpdate:modelValue":U[5]||(U[5]=F=>u.timeOnPage=F),type:"number",label:C(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.TIME_ON_PAGE.LABEL"),placeholder:C(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.TIME_ON_PAGE.PLACEHOLDER"),message:N.value.timeOnPage,"message-type":N.value.timeOnPage?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),m("fieldset",hze,[m("legend",fze,I(C(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.OTHER_PREFERENCES.TITLE")),1),m("label",gze,[re(m("input",{"onUpdate:modelValue":U[6]||(U[6]=F=>u.enabled=F),type:"checkbox"},null,512),[[dn,u.enabled]]),m("span",_ze,I(C(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.OTHER_PREFERENCES.ENABLED")),1)]),m("label",vze,[re(m("input",{"onUpdate:modelValue":U[7]||(U[7]=F=>u.triggerOnlyDuringBusinessHours=F),type:"checkbox"},null,512),[[dn,u.triggerOnlyDuringBusinessHours]]),m("span",Eze,I(C(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.OTHER_PREFERENCES.TRIGGER_ONLY_BUSINESS_HOURS")),1)])]),e.showActionButtons?(p(),E("div",bze,[S(te,{type:"button",variant:"faded",color:"slate",label:C(o)("CAMPAIGN.LIVE_CHAT.CREATE.FORM.BUTTONS.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:O},null,8,["label"]),S(te,{type:"submit",label:C(o)(`CAMPAIGN.LIVE_CHAT.CREATE.FORM.BUTTONS.${e.mode.toUpperCase()}`),class:"w-full","is-loading":f.value,disabled:f.value||b.value},null,8,["label","is-loading","disabled"])])):$("",!0)],32))}},Tze={class:"w-[25rem] z-50 min-w-0 absolute top-10 ltr:right-0 rtl:left-0 bg-n-alpha-3 backdrop-blur-[100px] p-6 rounded-xl border border-n-weak shadow-md flex flex-col gap-6 max-h-[85vh] overflow-y-auto"},Sze={class:"text-base font-medium text-n-slate-12"},Aze={__name:"LiveChatCampaignDialog",emits:["close"],setup(e,{emit:t}){const n=t,s=rt(),{t:a}=be(),o=async r=>{var c;try{await s.dispatch("campaigns/create",r),zt(Sg.CREATE_CAMPAIGN,{type:Ag.ONGOING}),ne(a("CAMPAIGN.LIVE_CHAT.CREATE.FORM.API.SUCCESS_MESSAGE"))}catch(u){const d=((c=u==null?void 0:u.response)==null?void 0:c.message)||a("CAMPAIGN.LIVE_CHAT.CREATE.FORM.API.ERROR_MESSAGE");ne(d)}},i=()=>n("close"),l=r=>{o(r),i()};return(r,c)=>(p(),E("div",Tze,[m("h3",Sze,I(C(a)("CAMPAIGN.LIVE_CHAT.CREATE.TITLE")),1),S(HC,{mode:"create",onSubmit:l,onCancel:i})]))}},yze={__name:"EditLiveChatCampaignDialog",props:{selectedCampaign:{type:Object,default:null}},setup(e,{expose:t}){const n=e,{t:s}=be(),a=rt(),o=j(null),i=j(null),l=_e("campaigns/getUIFlags"),r=y(()=>l.value.isUpdating),c=y(()=>{var g;return(g=i.value)==null?void 0:g.isSubmitDisabled}),u=y(()=>n.selectedCampaign.id),d=async g=>{var f;try{await a.dispatch("campaigns/update",{id:u.value,...g}),ne(s("CAMPAIGN.LIVE_CHAT.EDIT.FORM.API.SUCCESS_MESSAGE")),o.value.close()}catch(b){const A=((f=b==null?void 0:b.response)==null?void 0:f.message)||s("CAMPAIGN.LIVE_CHAT.EDIT.FORM.API.ERROR_MESSAGE");ne(A)}},h=()=>{d(i.value.prepareCampaignDetails())};return t({dialogRef:o}),(g,f)=>(p(),L($n,{ref_key:"dialogRef",ref:o,type:"edit",title:C(s)("CAMPAIGN.LIVE_CHAT.EDIT.TITLE"),"is-loading":r.value,"disable-confirm-button":r.value||c.value,"overflow-y-auto":"",onConfirm:h},{default:Y(()=>[S(HC,{ref_key:"liveChatCampaignFormRef",ref:i,mode:"edit","selected-campaign":e.selectedCampaign,"show-action-buttons":!1,onSubmit:h},null,8,["selected-campaign"])]),_:1},8,["title","is-loading","disable-confirm-button"]))}},pv={__name:"ConfirmDeleteCampaignDialog",props:{selectedCampaign:{type:Object,default:null}},setup(e,{expose:t}){const n=e,{t:s}=be(),a=rt(),o=j(null),i=async r=>{if(r)try{await a.dispatch("campaigns/delete",r),ne(s("CAMPAIGN.CONFIRM_DELETE.API.SUCCESS_MESSAGE"))}catch{ne(s("CAMPAIGN.CONFIRM_DELETE.API.ERROR_MESSAGE"))}},l=async()=>{var r;await i(n.selectedCampaign.id),(r=o.value)==null||r.close()};return t({dialogRef:o}),(r,c)=>(p(),L($n,{ref_key:"dialogRef",ref:o,type:"alert",title:C(s)("CAMPAIGN.CONFIRM_DELETE.TITLE"),description:C(s)("CAMPAIGN.CONFIRM_DELETE.DESCRIPTION"),"confirm-button-label":C(s)("CAMPAIGN.CONFIRM_DELETE.CONFIRM"),onConfirm:l},null,8,["title","description","confirm-button-label"]))}},Ize=[{id:1,title:"Chatbot Assistance",inbox:{id:2,name:"PaperLayer Website",channel_type:"Channel::WebWidget",phone_number:""},sender:{id:1,name:"Alexa Rivera"},message:"Hello!  Need help with our chatbot features? Feel free to ask!",campaign_status:"active",enabled:!0,campaign_type:"ongoing",trigger_rules:{url:"https://www.chatwoot.com/features/chatbot/",time_on_page:10},trigger_only_during_business_hours:!0,created_at:"2024-10-24T13:10:26.636Z",updated_at:"2024-10-24T13:10:26.636Z"},{id:2,title:"Pricing Information Support",inbox:{id:2,name:"PaperLayer Website",channel_type:"Channel::WebWidget",phone_number:""},sender:{id:1,name:"Jamie Lee"},message:"Hello!  Any questions on pricing? Im here to help!",campaign_status:"active",enabled:!1,campaign_type:"ongoing",trigger_rules:{url:"https://www.chatwoot.com/pricings",time_on_page:10},trigger_only_during_business_hours:!1,created_at:"2024-10-24T13:11:08.763Z",updated_at:"2024-10-24T13:11:08.763Z"},{id:3,title:"Product Setup Assistance",inbox:{id:2,name:"PaperLayer Website",channel_type:"Channel::WebWidget",phone_number:""},sender:{id:1,name:"Chatwoot"},message:"Hi! Chatwoot here. Need help setting up? Let me know!",campaign_status:"active",enabled:!1,campaign_type:"ongoing",trigger_rules:{url:"https://{*.}?chatwoot.com/apps/account/*/settings/inboxes/new/",time_on_page:10},trigger_only_during_business_hours:!1,created_at:"2024-10-24T13:11:44.285Z",updated_at:"2024-10-24T13:11:44.285Z"},{id:4,title:"General Assistance Campaign",inbox:{id:2,name:"PaperLayer Website",channel_type:"Channel::WebWidget",phone_number:""},sender:{id:1,name:"Chris Barlow"},message:"Hi there!  Im here for any questions you may have. Lets chat!",campaign_status:"active",enabled:!0,campaign_type:"ongoing",trigger_rules:{url:"https://siv.com",time_on_page:200},trigger_only_during_business_hours:!1,created_at:"2024-10-29T19:54:33.741Z",updated_at:"2024-10-29T19:56:26.296Z"}],WC=[{id:1,title:"Customer Feedback Request",inbox:{id:6,name:"PaperLayer Mobile",channel_type:"Channel::Sms",phone_number:"+29818373149903",provider:"default"},message:"Hello! Enjoying our product? Share your feedback on G2 and earn a $25 Amazon coupon: https://chwt.app/g2-review",campaign_status:"active",enabled:!0,campaign_type:"one_off",scheduled_at:1729775588,audience:[{id:4,type:"Label"},{id:5,type:"Label"},{id:6,type:"Label"}],trigger_rules:{},trigger_only_during_business_hours:!1,created_at:"2024-10-24T13:13:08.496Z",updated_at:"2024-10-24T13:15:38.698Z"},{id:2,title:"Welcome New Customer",inbox:{id:6,name:"PaperLayer Mobile",channel_type:"Channel::Sms",phone_number:"+29818373149903",provider:"default"},message:"Welcome aboard!  Let us know if you have any questions.",campaign_status:"completed",enabled:!0,campaign_type:"one_off",scheduled_at:1729732500,audience:[{id:1,type:"Label"},{id:6,type:"Label"},{id:5,type:"Label"},{id:2,type:"Label"},{id:4,type:"Label"}],trigger_rules:{},trigger_only_during_business_hours:!1,created_at:"2024-10-24T13:14:00.168Z",updated_at:"2024-10-24T13:15:38.707Z"},{id:3,title:"New Business Welcome",inbox:{id:6,name:"PaperLayer Mobile",channel_type:"Channel::Sms",phone_number:"+29818373149903",provider:"default"},message:"Hello! Were excited to have your business with us!",campaign_status:"active",enabled:!0,campaign_type:"one_off",scheduled_at:1730368440,audience:[{id:1,type:"Label"},{id:3,type:"Label"},{id:6,type:"Label"},{id:4,type:"Label"},{id:2,type:"Label"},{id:5,type:"Label"}],trigger_rules:{},trigger_only_during_business_hours:!1,created_at:"2024-10-30T07:54:49.915Z",updated_at:"2024-10-30T07:54:49.915Z"},{id:4,title:"New Member Onboarding",inbox:{id:6,name:"PaperLayer Mobile",channel_type:"Channel::Sms",phone_number:"+29818373149903",provider:"default"},message:"Welcome to the team! Reach out if you have questions.",campaign_status:"completed",enabled:!0,campaign_type:"one_off",scheduled_at:1730304840,audience:[{id:1,type:"Label"},{id:3,type:"Label"},{id:6,type:"Label"}],trigger_rules:{},trigger_only_during_business_hours:!1,created_at:"2024-10-29T16:14:10.374Z",updated_at:"2024-10-30T16:15:03.157Z"}],Cze={class:"flex flex-col gap-4 p-px"},Nze={__name:"LiveChatCampaignEmptyState",props:{title:{type:String,default:""},subtitle:{type:String,default:""}},setup(e){return(t,n)=>(p(),L(Do,{title:e.title,subtitle:e.subtitle},{"empty-state-item":Y(()=>[m("div",Cze,[(p(!0),E(ue,null,Ae(C(Ize),s=>(p(),L(tm,{key:s.id,title:s.title,message:s.message,"is-enabled":s.enabled,status:s.campaign_status,sender:s.sender,inbox:s.inbox,"scheduled-at":s.scheduled_at,"is-live-chat-type":""},null,8,["title","message","is-enabled","status","sender","inbox","scheduled-at"]))),128))])]),_:1},8,["title","subtitle"]))}},Oze={key:0,class:"flex justify-center items-center py-10 text-n-slate-11"},Rze={__name:"LiveChatCampaignsPage",setup(e){const{t}=be(),n=pn(),s=j(null),a=j(null),o=j(null),i=_e("campaigns/getUIFlags"),l=y(()=>i.value.isFetching),[r,c]=yn(),u=y(()=>n["campaigns/getLiveChatCampaigns"].value),d=y(()=>{var f;return((f=u.value)==null?void 0:f.length)===0&&!l.value}),h=f=>{o.value=f,s.value.dialogRef.open()},g=f=>{o.value=f,a.value.dialogRef.open()};return(f,b)=>(p(),L(uv,{"header-title":C(t)("CAMPAIGN.LIVE_CHAT.HEADER_TITLE"),"button-label":C(t)("CAMPAIGN.LIVE_CHAT.NEW_CAMPAIGN"),onClick:b[1]||(b[1]=A=>C(c)()),onClose:b[2]||(b[2]=A=>C(c)(!1))},{action:Y(()=>[C(r)?(p(),L(Aze,{key:0,onClose:b[0]||(b[0]=A=>C(c)(!1))})):$("",!0)]),default:Y(()=>[l.value?(p(),E("div",Oze,[S(An)])):d.value?(p(),L(Nze,{key:2,title:C(t)("CAMPAIGN.LIVE_CHAT.EMPTY_STATE.TITLE"),subtitle:C(t)("CAMPAIGN.LIVE_CHAT.EMPTY_STATE.SUBTITLE"),class:"pt-14"},null,8,["title","subtitle"])):(p(),L(dv,{key:1,campaigns:u.value,"is-live-chat-type":"",onEdit:h,onDelete:g},null,8,["campaigns"])),S(yze,{ref_key:"editLiveChatCampaignDialogRef",ref:s,"selected-campaign":o.value},null,8,["selected-campaign"]),S(pv,{ref_key:"confirmDeleteCampaignDialogRef",ref:a,"selected-campaign":o.value},null,8,["selected-campaign"])]),_:1},8,["header-title","button-label"]))}},xze={class:"flex-grow min-w-0 text-sm truncate text-n-slate-12"},wze=["onClick"],$ze={key:0,class:"flex items-center text-sm text-n-slate-11"},zC={__name:"TagMultiSelectComboBox",props:{options:{type:Array,required:!0,validator:e=>e.every(t=>"value"in t&&"label"in t)},placeholder:{type:String,default:""},modelValue:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:""},emptyState:{type:String,default:""},message:{type:String,default:""},hasError:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=be(),i=j(s.modelValue),l=j(!1),r=j(""),c=j(null),u=j(null),d=y(()=>{const v=r.value.toLowerCase();return s.options.filter(T=>{var _;return(_=T.label)==null?void 0:_.toLowerCase().includes(v)})}),h=y(()=>s.placeholder||o("COMBOBOX.PLACEHOLDER")),g=y(()=>i.value.map(v=>s.options.find(_=>_.value===v)||{value:v,label:v})),f=v=>{const T=i.value.indexOf(v.value);T===-1?i.value.push(v.value):i.value.splice(T,1),a("update:modelValue",i.value)},b=v=>{const T=i.value.indexOf(v);T!==-1&&(i.value.splice(T,1),a("update:modelValue",i.value))},A=()=>{s.disabled||(l.value=!l.value,l.value&&(r.value="",Wt(()=>{var v;return(v=c.value)==null?void 0:v.focus()})))};return it(()=>s.modelValue,v=>{i.value=v}),t({toggleDropdown:A,open:l,disabled:s.disabled}),(v,T)=>(p(),E("div",{ref_key:"comboboxRef",ref:u,class:ae(["relative w-full min-w-0",{"cursor-not-allowed":e.disabled,"group/combobox":!e.disabled}]),onClick:T[3]||(T[3]=Ve(()=>{},["prevent"]))},[S(C(ep),{onTrigger:T[2]||(T[2]=_=>l.value=!1)},{default:Y(()=>[m("div",{class:ae(["flex flex-wrap w-full gap-2 px-3 py-2.5 border rounded-lg cursor-pointer bg-n-alpha-black2 min-h-[42px] transition-all duration-500 ease-in-out",{"border-n-ruby-8":e.hasError,"border-n-weak dark:border-n-weak hover:border-n-slate-6 dark:hover:border-n-slate-6":!e.hasError&&!l.value,"border-n-brand":l.value,"cursor-not-allowed pointer-events-none opacity-50":e.disabled}]),onClick:A},[(p(!0),E(ue,null,Ae(g.value,_=>(p(),E("div",{key:_.value,class:"flex items-center justify-center max-w-full gap-1 px-2 py-0.5 rounded-lg bg-n-alpha-black1",onClick:T[0]||(T[0]=Ve(()=>{},["stop"]))},[m("span",xze,I(_.label),1),m("span",{class:"flex-shrink-0 cursor-pointer i-lucide-x size-3 text-n-slate-11",onClick:N=>b(_.value)},null,8,wze)]))),128)),g.value.length===0?(p(),E("span",$ze,I(h.value),1)):$("",!0)],2),S(kC,{ref_key:"dropdownRef",ref:c,open:l.value,options:d.value,"search-value":r.value,"search-placeholder":e.searchPlaceholder,"empty-state":e.emptyState,multiple:"","selected-values":i.value,"onUpdate:searchValue":T[1]||(T[1]=_=>r.value=_),onSelect:f},null,8,["open","options","search-value","search-placeholder","empty-state","selected-values"]),e.message?(p(),E("p",{key:0,class:ae(["mt-2 mb-0 text-xs truncate transition-all duration-500 ease-in-out",{"text-n-ruby-9":e.hasError,"text-n-slate-11":!e.hasError}])},I(e.message),3)):$("",!0)]),_:1})],2))}},Mze={class:"flex flex-col gap-1"},Lze={for:"inbox",class:"mb-0.5 text-sm font-medium text-n-slate-12"},Dze={class:"flex flex-col gap-1"},Pze={for:"audience",class:"mb-0.5 text-sm font-medium text-n-slate-12"},kze={class:"flex items-center justify-between w-full gap-3"},Bze={__name:"SMSCampaignForm",emits:["submit","cancel"],setup(e,{emit:t}){const n=t,{t:s}=be(),a={uiFlags:_e("campaigns/getUIFlags"),labels:_e("labels/getLabels"),inboxes:_e("inboxes/getSMSInboxes")},o={title:"",message:"",inboxId:null,scheduledAt:null,selectedAudience:[]},i=gn({...o}),l={title:{required:Ye,minLength:en(1)},message:{required:Ye,minLength:en(1)},inboxId:{required:Ye},scheduledAt:{required:Ye},selectedAudience:{required:Ye}},r=bt(l,i),c=y(()=>a.uiFlags.value.isCreating),u=y(()=>{const O=new Date;return new Date(O.getTime()-O.getTimezoneOffset()*6e4).toISOString().slice(0,16)}),d=(O,x,w)=>(O==null?void 0:O.map(D=>({value:D[x],label:D[w]})))??[],h=y(()=>d(a.labels.value,"id","title")),g=y(()=>d(a.inboxes.value,"id","name")),f=(O,x)=>r.value[O].$error?s(`CAMPAIGN.SMS.CREATE.FORM.${x}.ERROR`):"",b=y(()=>({title:f("title","TITLE"),message:f("message","MESSAGE"),inbox:f("inboxId","INBOX"),scheduledAt:f("scheduledAt","SCHEDULED_AT"),audience:f("selectedAudience","AUDIENCE")})),A=y(()=>r.value.$invalid),v=O=>O?new Date(O).toISOString():null,T=()=>{Object.assign(i,o)},_=()=>n("cancel"),N=()=>{var O;return{title:i.title,message:i.message,inbox_id:i.inboxId,scheduled_at:v(i.scheduledAt),audience:(O=i.selectedAudience)==null?void 0:O.map(x=>({id:x,type:"Label"}))}},R=async()=>{await r.value.$validate()&&(n("submit",N()),T(),_())};return(O,x)=>(p(),E("form",{class:"flex flex-col gap-4",onSubmit:Ve(R,["prevent"])},[S(Tt,{modelValue:i.title,"onUpdate:modelValue":x[0]||(x[0]=w=>i.title=w),label:C(s)("CAMPAIGN.SMS.CREATE.FORM.TITLE.LABEL"),placeholder:C(s)("CAMPAIGN.SMS.CREATE.FORM.TITLE.PLACEHOLDER"),message:b.value.title,"message-type":b.value.title?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),S(lo,{modelValue:i.message,"onUpdate:modelValue":x[1]||(x[1]=w=>i.message=w),label:C(s)("CAMPAIGN.SMS.CREATE.FORM.MESSAGE.LABEL"),placeholder:C(s)("CAMPAIGN.SMS.CREATE.FORM.MESSAGE.PLACEHOLDER"),"show-character-count":"",message:b.value.message,"message-type":b.value.message?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),m("div",Mze,[m("label",Lze,I(C(s)("CAMPAIGN.SMS.CREATE.FORM.INBOX.LABEL")),1),S(Ha,{id:"inbox",modelValue:i.inboxId,"onUpdate:modelValue":x[2]||(x[2]=w=>i.inboxId=w),options:g.value,"has-error":!!b.value.inbox,placeholder:C(s)("CAMPAIGN.SMS.CREATE.FORM.INBOX.PLACEHOLDER"),message:b.value.inbox,class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6"},null,8,["modelValue","options","has-error","placeholder","message"])]),m("div",Dze,[m("label",Pze,I(C(s)("CAMPAIGN.SMS.CREATE.FORM.AUDIENCE.LABEL")),1),S(zC,{modelValue:i.selectedAudience,"onUpdate:modelValue":x[3]||(x[3]=w=>i.selectedAudience=w),options:h.value,label:C(s)("CAMPAIGN.SMS.CREATE.FORM.AUDIENCE.LABEL"),placeholder:C(s)("CAMPAIGN.SMS.CREATE.FORM.AUDIENCE.PLACEHOLDER"),"has-error":!!b.value.audience,message:b.value.audience,class:"[&>div>button]:bg-n-alpha-black2"},null,8,["modelValue","options","label","placeholder","has-error","message"])]),S(Tt,{modelValue:i.scheduledAt,"onUpdate:modelValue":x[4]||(x[4]=w=>i.scheduledAt=w),label:C(s)("CAMPAIGN.SMS.CREATE.FORM.SCHEDULED_AT.LABEL"),type:"datetime-local",min:u.value,placeholder:C(s)("CAMPAIGN.SMS.CREATE.FORM.SCHEDULED_AT.PLACEHOLDER"),message:b.value.scheduledAt,"message-type":b.value.scheduledAt?"error":"info"},null,8,["modelValue","label","min","placeholder","message","message-type"]),m("div",kze,[S(te,{variant:"faded",color:"slate",type:"button",label:C(s)("CAMPAIGN.SMS.CREATE.FORM.BUTTONS.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:_},null,8,["label"]),S(te,{label:C(s)("CAMPAIGN.SMS.CREATE.FORM.BUTTONS.CREATE"),class:"w-full",type:"submit","is-loading":c.value,disabled:c.value||A.value},null,8,["label","is-loading","disabled"])])],32))}},Uze={class:"w-[25rem] z-50 min-w-0 absolute top-10 ltr:right-0 rtl:left-0 bg-n-alpha-3 backdrop-blur-[100px] p-6 rounded-xl border border-n-weak shadow-md flex flex-col gap-6"},Fze={class:"text-base font-medium text-n-slate-12"},Gze={__name:"SMSCampaignDialog",emits:["close"],setup(e,{emit:t}){const n=t,s=rt(),{t:a}=be(),o=async r=>{var c;try{await s.dispatch("campaigns/create",r),zt(Sg.CREATE_CAMPAIGN,{type:Ag.ONE_OFF}),ne(a("CAMPAIGN.SMS.CREATE.FORM.API.SUCCESS_MESSAGE"))}catch(u){const d=((c=u==null?void 0:u.response)==null?void 0:c.message)||a("CAMPAIGN.SMS.CREATE.FORM.API.ERROR_MESSAGE");ne(d)}},i=r=>{o(r)},l=()=>n("close");return(r,c)=>(p(),E("div",Uze,[m("h3",Fze,I(C(a)("CAMPAIGN.SMS.CREATE.TITLE")),1),S(Bze,{onSubmit:i,onCancel:l})]))}},Vze={class:"flex flex-col gap-4 p-px"},Hze={__name:"SMSCampaignEmptyState",props:{title:{type:String,default:""},subtitle:{type:String,default:""}},setup(e){return(t,n)=>(p(),L(Do,{title:e.title,subtitle:e.subtitle},{"empty-state-item":Y(()=>[m("div",Vze,[(p(!0),E(ue,null,Ae(C(WC),s=>(p(),L(tm,{key:s.id,title:s.title,message:s.message,"is-enabled":s.enabled,status:s.campaign_status,sender:s.sender,inbox:s.inbox,"scheduled-at":s.scheduled_at},null,8,["title","message","is-enabled","status","sender","inbox","scheduled-at"]))),128))])]),_:1},8,["title","subtitle"]))}},Wze={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},zze={__name:"SMSCampaignsPage",setup(e){const{t}=be(),n=pn(),s=j(null),[a,o]=yn(),i=_e("campaigns/getUIFlags"),l=y(()=>i.value.isFetching),r=j(null),c=y(()=>n["campaigns/getSMSCampaigns"].value),u=y(()=>{var h;return((h=c.value)==null?void 0:h.length)===0&&!l.value}),d=h=>{s.value=h,r.value.dialogRef.open()};return(h,g)=>(p(),L(uv,{"header-title":C(t)("CAMPAIGN.SMS.HEADER_TITLE"),"button-label":C(t)("CAMPAIGN.SMS.NEW_CAMPAIGN"),onClick:g[1]||(g[1]=f=>C(o)()),onClose:g[2]||(g[2]=f=>C(o)(!1))},{action:Y(()=>[C(a)?(p(),L(Gze,{key:0,onClose:g[0]||(g[0]=f=>C(o)(!1))})):$("",!0)]),default:Y(()=>[l.value?(p(),E("div",Wze,[S(An)])):u.value?(p(),L(Hze,{key:2,title:C(t)("CAMPAIGN.SMS.EMPTY_STATE.TITLE"),subtitle:C(t)("CAMPAIGN.SMS.EMPTY_STATE.SUBTITLE"),class:"pt-14"},null,8,["title","subtitle"])):(p(),L(dv,{key:1,campaigns:c.value,onDelete:d},null,8,["campaigns"])),S(pv,{ref_key:"confirmDeleteCampaignDialogRef",ref:r,"selected-campaign":s.value},null,8,["selected-campaign"])]),_:1},8,["header-title","button-label"]))}},Yze={class:"flex flex-col gap-1"},jze={for:"inbox",class:"mb-0.5 text-sm font-medium text-n-slate-12"},Kze={class:"flex flex-col gap-1"},Xze={for:"template",class:"mb-0.5 text-sm font-medium text-n-slate-12"},qze={class:"mt-1 text-xs text-n-slate-11"},Zze={class:"flex flex-col gap-1"},Qze={for:"audience",class:"mb-0.5 text-sm font-medium text-n-slate-12"},Jze={class:"flex gap-3 justify-between items-center w-full"},eYe={__name:"WhatsAppCampaignForm",emits:["submit","cancel"],setup(e,{emit:t}){const n=t,{t:s}=be(),a={uiFlags:_e("campaigns/getUIFlags"),labels:_e("labels/getLabels"),inboxes:_e("inboxes/getWhatsAppInboxes"),getFilteredWhatsAppTemplates:_e("inboxes/getFilteredWhatsAppTemplates")},o={title:"",inboxId:null,templateId:null,scheduledAt:null,selectedAudience:[]},i=gn({...o}),l=j(null),r={title:{required:Ye,minLength:en(1)},inboxId:{required:Ye},templateId:{required:Ye},scheduledAt:{required:Ye},selectedAudience:{required:Ye}},c=bt(r,i),u=y(()=>a.uiFlags.value.isCreating),d=y(()=>{const M=new Date;return new Date(M.getTime()-M.getTimezoneOffset()*6e4).toISOString().slice(0,16)}),h=(M,P,U)=>(M==null?void 0:M.map(F=>({value:F[P],label:F[U]})))??[],g=y(()=>h(a.labels.value,"id","title")),f=y(()=>h(a.inboxes.value,"id","name")),b=y(()=>i.inboxId?a.getFilteredWhatsAppTemplates.value(i.inboxId).map(P=>{const U=P.name.replace(/_/g," ").replace(/\b\w/g,F=>F.toUpperCase());return{value:P.id,label:`${U} (${P.language||"en"})`,template:P}}):[]),A=y(()=>{var M;return i.templateId?(M=b.value.find(P=>P.value===i.templateId))==null?void 0:M.template:null}),v=(M,P)=>c.value[M].$error?s(`CAMPAIGN.WHATSAPP.CREATE.FORM.${P}.ERROR`):"",T=y(()=>({title:v("title","TITLE"),inbox:v("inboxId","INBOX"),template:v("templateId","TEMPLATE"),scheduledAt:v("scheduledAt","SCHEDULED_AT"),audience:v("selectedAudience","AUDIENCE")})),_=y(()=>{var M,P;return((P=(M=l.value)==null?void 0:M.v$)==null?void 0:P.$invalid)===!1||!0}),N=y(()=>c.value.$invalid||!_.value),R=M=>M?new Date(M).toISOString():null,O=()=>{Object.assign(i,o),c.value.$reset()},x=()=>n("cancel"),w=()=>{var k;const M=A.value,P=l.value,U=(P==null?void 0:P.renderedTemplate)||"",F={name:(M==null?void 0:M.name)||"",namespace:(M==null?void 0:M.namespace)||"",category:(M==null?void 0:M.category)||"UTILITY",language:(M==null?void 0:M.language)||"en_US",processed_params:(P==null?void 0:P.processedParams)||{}};return{title:i.title,message:U,template_params:F,inbox_id:i.inboxId,scheduled_at:R(i.scheduledAt),audience:(k=i.selectedAudience)==null?void 0:k.map(B=>({id:B,type:"Label"}))}},D=async()=>{await c.value.$validate()&&(n("submit",w()),O(),x())};return it(()=>i.inboxId,()=>{i.templateId=null}),(M,P)=>(p(),E("form",{class:"flex flex-col gap-4",onSubmit:Ve(D,["prevent"])},[S(Tt,{modelValue:i.title,"onUpdate:modelValue":P[0]||(P[0]=U=>i.title=U),label:C(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.TITLE.LABEL"),placeholder:C(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.TITLE.PLACEHOLDER"),message:T.value.title,"message-type":T.value.title?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),m("div",Yze,[m("label",jze,I(C(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.INBOX.LABEL")),1),S(Ha,{id:"inbox",modelValue:i.inboxId,"onUpdate:modelValue":P[1]||(P[1]=U=>i.inboxId=U),options:f.value,"has-error":!!T.value.inbox,placeholder:C(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.INBOX.PLACEHOLDER"),message:T.value.inbox,class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6"},null,8,["modelValue","options","has-error","placeholder","message"])]),m("div",Kze,[m("label",Xze,I(C(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.TEMPLATE.LABEL")),1),S(Ha,{id:"template",modelValue:i.templateId,"onUpdate:modelValue":P[2]||(P[2]=U=>i.templateId=U),options:b.value,"has-error":!!T.value.template,placeholder:C(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.TEMPLATE.PLACEHOLDER"),message:T.value.template,class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6"},null,8,["modelValue","options","has-error","placeholder","message"]),m("p",qze,I(C(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.TEMPLATE.INFO")),1)]),A.value?(p(),L(iv,{key:0,ref_key:"templateParserRef",ref:l,template:A.value},null,8,["template"])):$("",!0),m("div",Zze,[m("label",Qze,I(C(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.AUDIENCE.LABEL")),1),S(zC,{modelValue:i.selectedAudience,"onUpdate:modelValue":P[3]||(P[3]=U=>i.selectedAudience=U),options:g.value,label:C(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.AUDIENCE.LABEL"),placeholder:C(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.AUDIENCE.PLACEHOLDER"),"has-error":!!T.value.audience,message:T.value.audience,class:"[&>div>button]:bg-n-alpha-black2"},null,8,["modelValue","options","label","placeholder","has-error","message"])]),S(Tt,{modelValue:i.scheduledAt,"onUpdate:modelValue":P[4]||(P[4]=U=>i.scheduledAt=U),label:C(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.SCHEDULED_AT.LABEL"),type:"datetime-local",min:d.value,placeholder:C(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.SCHEDULED_AT.PLACEHOLDER"),message:T.value.scheduledAt,"message-type":T.value.scheduledAt?"error":"info"},null,8,["modelValue","label","min","placeholder","message","message-type"]),m("div",Jze,[S(te,{variant:"faded",color:"slate",type:"button",label:C(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.BUTTONS.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:x},null,8,["label"]),S(te,{label:C(s)("CAMPAIGN.WHATSAPP.CREATE.FORM.BUTTONS.CREATE"),class:"w-full",type:"submit","is-loading":u.value,disabled:u.value||N.value},null,8,["label","is-loading","disabled"])])],32))}},tYe={class:"w-[25rem] z-50 min-w-0 absolute top-10 ltr:right-0 rtl:left-0 bg-n-alpha-3 backdrop-blur-[100px] rounded-xl border border-n-weak shadow-md max-h-[80vh] overflow-y-auto"},nYe={class:"p-6 flex flex-col gap-6"},sYe={class:"text-base font-medium text-n-slate-12 flex-shrink-0"},aYe={__name:"WhatsAppCampaignDialog",emits:["close"],setup(e,{emit:t}){const n=t,s=rt(),{t:a}=be(),o=async r=>{var c;try{await s.dispatch("campaigns/create",r),zt(Sg.CREATE_CAMPAIGN,{type:Ag.ONE_OFF}),ne(a("CAMPAIGN.WHATSAPP.CREATE.FORM.API.SUCCESS_MESSAGE"))}catch(u){const d=((c=u==null?void 0:u.response)==null?void 0:c.message)||a("CAMPAIGN.WHATSAPP.CREATE.FORM.API.ERROR_MESSAGE");ne(d)}},i=r=>{o(r)},l=()=>n("close");return(r,c)=>(p(),E("div",tYe,[m("div",nYe,[m("h3",sYe,I(C(a)("CAMPAIGN.WHATSAPP.CREATE.TITLE")),1),S(eYe,{onSubmit:i,onCancel:l})])]))}},oYe={class:"flex flex-col gap-4 p-px"},iYe={__name:"WhatsAppCampaignEmptyState",props:{title:{type:String,default:""},subtitle:{type:String,default:""}},setup(e){return(t,n)=>(p(),L(Do,{title:e.title,subtitle:e.subtitle},{"empty-state-item":Y(()=>[m("div",oYe,[(p(!0),E(ue,null,Ae(C(WC),s=>(p(),L(tm,{key:s.id,title:s.title,message:s.message,"is-enabled":s.enabled,status:s.campaign_status,sender:s.sender,inbox:s.inbox,"scheduled-at":s.scheduled_at},null,8,["title","message","is-enabled","status","sender","inbox","scheduled-at"]))),128))])]),_:1},8,["title","subtitle"]))}},lYe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},rYe={__name:"WhatsAppCampaignsPage",setup(e){const{t}=be(),n=pn(),s=j(null),[a,o]=yn(),i=_e("campaigns/getUIFlags"),l=y(()=>i.value.isFetching),r=j(null),c=y(()=>n["campaigns/getWhatsAppCampaigns"].value),u=y(()=>{var h;return((h=c.value)==null?void 0:h.length)===0&&!l.value}),d=h=>{s.value=h,r.value.dialogRef.open()};return(h,g)=>(p(),L(uv,{"header-title":C(t)("CAMPAIGN.WHATSAPP.HEADER_TITLE"),"button-label":C(t)("CAMPAIGN.WHATSAPP.NEW_CAMPAIGN"),onClick:g[1]||(g[1]=f=>C(o)()),onClose:g[2]||(g[2]=f=>C(o)(!1))},{action:Y(()=>[C(a)?(p(),L(aYe,{key:0,onClose:g[0]||(g[0]=f=>C(o)(!1))})):$("",!0)]),default:Y(()=>[l.value?(p(),E("div",lYe,[S(An)])):u.value?(p(),L(iYe,{key:2,title:C(t)("CAMPAIGN.WHATSAPP.EMPTY_STATE.TITLE"),subtitle:C(t)("CAMPAIGN.WHATSAPP.EMPTY_STATE.SUBTITLE"),class:"pt-14"},null,8,["title","subtitle"])):(p(),L(dv,{key:1,campaigns:c.value,onDelete:d},null,8,["campaigns"])),S(pv,{ref_key:"confirmDeleteCampaignDialogRef",ref:r,"selected-campaign":s.value},null,8,["selected-campaign"])]),_:1},8,["header-title","button-label"]))}},ic={featureFlag:ft.CAMPAIGNS,permissions:["administrator"]},cYe={routes:[{path:vt("accounts/:accountId/campaigns"),component:DWe,children:[{path:"",redirect:e=>({name:"campaigns_ongoing_index",params:e.params})},{path:"ongoing",name:"campaigns_ongoing_index",meta:ic,redirect:e=>({name:"campaigns_livechat_index",params:e.params})},{path:"one_off",name:"campaigns_one_off_index",meta:ic,redirect:e=>({name:"campaigns_sms_index",params:e.params})},{path:"live_chat",name:"campaigns_livechat_index",meta:ic,component:Rze},{path:"sms",name:"campaigns_sms_index",meta:ic,component:zze},{path:"whatsapp",name:"campaigns_whatsapp_index",meta:{...ic,featureFlag:ft.WHATSAPP_CAMPAIGNS},component:rYe}]}]},uYe={class:"flex w-full h-full min-h-0"},dYe={class:"flex flex-1 h-full px-0 overflow-hidden bg-n-background"},pYe={__name:"CaptainPageRouteView",setup(e){const t=wt(),{uiSettings:n,updateUISettings:s}=tn();return it(()=>t.params.assistantId,a=>{a&&a!==String(n.value.last_active_assistant_id)&&s({last_active_assistant_id:Number(a)})}),(a,o)=>{const i=W("router-view");return p(),E("div",uYe,[m("section",dYe,[S(i)])])}}},mYe={class:"flex items-center justify-center w-full bg-n-background text-n-slate-11"},hYe={__name:"AssistantsIndexPage",setup(e){const t=na(),n=Ft(),{uiSettings:s}=tn(),a=wt(),o=y(()=>t.getters["captainAssistants/getRecords"]),i=d=>!!o.value.find(h=>h.id===Number(d)),l=(d,h)=>{n.replace({name:d,params:h,replace:!0})},r=()=>{const{last_active_assistant_id:d}=s.value||{};if(i(d))return{assistantId:d};if(o.value.length>0){const{id:h}=o.value[0];return{assistantId:h}}return null},c=()=>{const d=r();if(!d)return l("captain_assistants_create_index",{accountId:a.params.accountId});const{navigationPath:h}=a.params,f=["captain_assistants_responses_index","captain_assistants_documents_index","captain_assistants_scenarios_index","captain_assistants_playground_index","captain_assistants_inboxes_index","captain_tools_index","captain_assistants_settings_index"].includes(h)?h:"captain_assistants_responses_index";return l(f,{accountId:a.params.accountId,...d})},u=async()=>{await t.dispatch("captainAssistants/get"),Wt(()=>c())};return lt(()=>u()),(d,h)=>(p(),E("div",mYe,[S(An)]))}},fYe={class:"pt-5 pb-3 bg-n-alpha-3 backdrop-blur-[100px] outline outline-n-container outline-1 z-50 absolute w-[27.5rem] rounded-xl shadow-md flex flex-col gap-4"},gYe={class:"flex items-center justify-between gap-4 px-6 pb-3 border-b border-n-alpha-2"},_Ye={class:"flex flex-col gap-1"},vYe={class:"flex items-center gap-2"},EYe={class:"text-base font-medium cursor-pointer text-n-slate-12 w-fit hover:underline"},bYe={class:"text-sm text-n-slate-11"},TYe={key:0,class:"flex flex-col gap-2 px-4"},SYe={class:"text-sm font-medium truncate text-n-slate-12"},AYe={key:1,class:"flex flex-col items-center gap-2 px-4 py-3"},yYe={class:"text-sm text-n-slate-11"},IYe={__name:"AssistantSwitcher",emits:["close","createAssistant"],setup(e,{emit:t}){const n=t,{t:s}=be(),a=wt(),o=Ft(),i=rt(),l=_e("captainAssistants/getRecords"),r=y(()=>a.params.assistantId),c=g=>g.id===Number(r.value),u=async(g,f)=>{const A={captain_assistants_responses_index:async()=>{await i.dispatch("captainResponses/get",{assistantId:f}),await i.dispatch("captainResponses/fetchPendingCount",f)},captain_assistants_responses_pending:async()=>{await i.dispatch("captainResponses/get",{assistantId:f,status:"pending"})},captain_assistants_documents_index:async()=>{await i.dispatch("captainDocuments/get",{assistantId:f})},captain_assistants_scenarios_index:async()=>{await i.dispatch("captainScenarios/get",{assistantId:f})},captain_assistants_playground_index:()=>{},captain_assistants_inboxes_index:async()=>{await i.dispatch("captainInboxes/get",{assistantId:f})},captain_tools_index:async()=>{await i.dispatch("captainCustomTools/get",{page:1})},captain_assistants_settings_index:async()=>{await i.dispatch("captainAssistants/show",f)}}[g];A&&await A()},d=async g=>{if(c(g))return;const b=a.name||"captain_assistants_responses_index";await u(b,g.id),await o.push({name:b,params:{accountId:a.params.accountId,assistantId:g.id}}),n("close")},h=()=>{n("createAssistant"),n("close")};return(g,f)=>(p(),E("div",fYe,[m("div",gYe,[m("div",_Ye,[m("div",vYe,[m("h2",EYe,I(C(s)("CAPTAIN.ASSISTANT_SWITCHER.ASSISTANTS")),1)]),m("p",bYe,I(C(s)("CAPTAIN.ASSISTANT_SWITCHER.SWITCH_ASSISTANT")),1)]),S(te,{label:C(s)("CAPTAIN.ASSISTANT_SWITCHER.NEW_ASSISTANT"),color:"slate",icon:"i-lucide-plus",size:"sm",class:"!bg-n-alpha-2 hover:!bg-n-alpha-3",onClick:h},null,8,["label"])]),C(l).length>0?(p(),E("div",TYe,[(p(!0),E(ue,null,Ae(C(l),b=>(p(),L(te,{key:b.id,label:b.name,variant:"ghost",color:"slate","trailing-icon":"",icon:c(b)?"i-lucide-check":"",class:"!justify-end !px-2 !py-2 hover:!bg-n-alpha-2 [&>.i-lucide-check]:text-n-teal-10 h-9",size:"sm",onClick:A=>d(b)},{default:Y(()=>[m("span",SYe,I(b.name||""),1),b?(p(),L(kt,{key:0,name:b.name,size:20,"icon-name":"i-lucide-bot","rounded-full":""},null,8,["name"])):$("",!0)]),_:2},1032,["label","icon","onClick"]))),128))])):(p(),E("div",AYe,[m("p",yYe,I(C(s)("CAPTAIN.ASSISTANT_SWITCHER.EMPTY_LIST")),1)]))]))}},CYe={class:"flex flex-col gap-2.5"},NYe={class:"mb-3 text-sm font-medium text-n-slate-12"},OYe={class:"flex items-center gap-2"},RYe={class:"text-sm font-medium text-n-slate-12"},xYe={class:"flex items-center gap-2"},wYe={class:"text-sm font-medium text-n-slate-12"},$Ye={class:"flex items-center gap-2"},MYe={class:"text-sm font-medium text-n-slate-12"},LYe={class:"flex items-center justify-between w-full gap-3"},DYe={__name:"AssistantForm",props:{mode:{type:String,required:!0,validator:e=>["edit","create"].includes(e)},assistant:{type:Object,default:()=>({})}},emits:["submit","cancel"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o={uiFlags:_e("captainAssistants/getUIFlags")},l=gn({...{name:"",description:"",productName:"",featureFaq:!1,featureMemory:!1,featureCitation:!1}}),r={name:{required:Ye,minLength:en(1)},description:{required:Ye,minLength:en(1)},productName:{required:Ye,minLength:en(1)}},c=bt(r,l),u=y(()=>o.uiFlags.value.creatingItem),d=(v,T)=>c.value[v].$error?a(`CAPTAIN.ASSISTANTS.FORM.${T}.ERROR`):"",h=y(()=>({name:d("name","NAME"),description:d("description","DESCRIPTION"),productName:d("productName","PRODUCT_NAME")})),g=()=>s("cancel"),f=()=>({name:l.name,description:l.description,config:{product_name:l.productName,feature_faq:l.featureFaq,feature_memory:l.featureMemory,feature_citation:l.featureCitation}}),b=async()=>{await c.value.$validate()&&s("submit",f())},A=v=>{if(!v)return;const{name:T,description:_,config:N}=v;Object.assign(l,{name:T,description:_,productName:N.product_name,featureFaq:N.feature_faq||!1,featureMemory:N.feature_memory||!1,featureCitation:N.feature_citation||!1})};return it(()=>n.assistant,v=>{n.mode==="edit"&&v&&A(v)},{immediate:!0}),(v,T)=>(p(),E("form",{class:"flex flex-col gap-4",onSubmit:Ve(b,["prevent"])},[S(Tt,{modelValue:l.name,"onUpdate:modelValue":T[0]||(T[0]=_=>l.name=_),label:C(a)("CAPTAIN.ASSISTANTS.FORM.NAME.LABEL"),placeholder:C(a)("CAPTAIN.ASSISTANTS.FORM.NAME.PLACEHOLDER"),message:h.value.name,"message-type":h.value.name?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),S(Ks,{modelValue:l.description,"onUpdate:modelValue":T[1]||(T[1]=_=>l.description=_),label:C(a)("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.LABEL"),placeholder:C(a)("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.PLACEHOLDER"),message:h.value.description,"message-type":h.value.description?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),S(Tt,{modelValue:l.productName,"onUpdate:modelValue":T[2]||(T[2]=_=>l.productName=_),label:C(a)("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.LABEL"),placeholder:C(a)("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.PLACEHOLDER"),message:h.value.productName,"message-type":h.value.productName?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),m("fieldset",CYe,[m("legend",NYe,I(C(a)("CAPTAIN.ASSISTANTS.FORM.FEATURES.TITLE")),1),m("label",OYe,[re(m("input",{"onUpdate:modelValue":T[3]||(T[3]=_=>l.featureFaq=_),type:"checkbox"},null,512),[[dn,l.featureFaq]]),m("span",RYe,I(C(a)("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_CONVERSATION_FAQS")),1)]),m("label",xYe,[re(m("input",{"onUpdate:modelValue":T[4]||(T[4]=_=>l.featureMemory=_),type:"checkbox"},null,512),[[dn,l.featureMemory]]),m("span",wYe,I(C(a)("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_MEMORIES")),1)]),m("label",$Ye,[re(m("input",{"onUpdate:modelValue":T[5]||(T[5]=_=>l.featureCitation=_),type:"checkbox"},null,512),[[dn,l.featureCitation]]),m("span",MYe,I(C(a)("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_CITATIONS")),1)])]),m("div",LYe,[S(te,{type:"button",variant:"faded",color:"slate",label:C(a)("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:g},null,8,["label"]),S(te,{type:"submit",label:C(a)(`CAPTAIN.FORM.${e.mode.toUpperCase()}`),class:"w-full","is-loading":u.value,disabled:u.value},null,8,["label","is-loading","disabled"])])],32))}},YC={__name:"CreateAssistantDialog",props:{selectedAssistant:{type:Object,default:()=>({})},type:{type:String,default:"create",validator:e=>["create","edit"].includes(e)}},emits:["close","created"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=be(),i=rt(),l=j(null),r=j(null),c=b=>i.dispatch("captainAssistants/update",{id:s.selectedAssistant.id,...b}),u=y(()=>`CAPTAIN.ASSISTANTS.${s.type.toUpperCase()}`),d=async b=>{try{const A=await i.dispatch("captainAssistants/create",b);a("created",A)}catch(A){const v=(A==null?void 0:A.message)||o(`${u.value}.ERROR_MESSAGE`);ne(v)}},h=async b=>{try{s.type==="edit"?await c(b):await d(b),ne(o(`${u.value}.SUCCESS_MESSAGE`)),l.value.close()}catch(A){const v=(A==null?void 0:A.message)||o(`${u.value}.ERROR_MESSAGE`);ne(v)}},g=()=>{a("close")},f=()=>{l.value.close()};return t({dialogRef:l}),(b,A)=>(p(),L($n,{ref_key:"dialogRef",ref:l,type:"edit",title:C(o)(`${u.value}.TITLE`),description:C(o)("CAPTAIN.ASSISTANTS.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,"overflow-y-auto":"",onClose:g},{footer:Y(()=>A[0]||(A[0]=[])),default:Y(()=>[S(DYe,{ref_key:"assistantForm",ref:r,mode:e.type,assistant:e.selectedAssistant,onSubmit:h,onCancel:f},null,8,["mode","assistant"])]),_:1},8,["title","description"]))}},PYe={class:"flex flex-col w-full h-full overflow-hidden bg-n-background"},kYe={class:"sticky top-0 z-10 px-6"},BYe={class:"w-full max-w-[60rem] mx-auto"},UYe={class:"flex items-start lg:items-center justify-between w-full py-6 lg:py-0 lg:h-20 gap-4 lg:gap-2 flex-col lg:flex-row"},FYe={class:"flex gap-3 items-center"},GYe={key:1,class:"flex items-center gap-2"},VYe={class:"flex items-center gap-2"},HYe={key:0,class:"text-xl font-medium truncate text-n-slate-12"},WYe={class:"relative group"},zYe={class:"flex items-center gap-4"},YYe={key:0,class:"w-0.5 h-4 rounded-2xl bg-n-weak"},jYe={key:1,class:"text-xl font-medium text-n-slate-12"},KYe={key:2,class:"flex items-center gap-2"},XYe={class:"flex gap-2"},qYe={key:0,class:"relative group/captain-button"},ZYe={class:"flex-1 px-6 overflow-y-auto"},QYe={class:"w-full max-w-[60rem] h-full mx-auto py-4"},JYe={key:1,class:"flex items-center justify-center py-10 text-n-slate-11"},eje={key:2},tje={key:3},nje={key:0,class:"sticky bottom-0 z-10 px-4 pb-4"},fo={__name:"PageLayout",props:{currentPage:{type:Number,default:1},totalCount:{type:Number,default:100},itemsPerPage:{type:Number,default:25},headerTitle:{type:String,default:""},backUrl:{type:[String,Object],default:""},buttonPolicy:{type:Array,default:()=>[]},buttonLabel:{type:String,default:""},featureFlag:{type:String,default:""},isFetching:{type:Boolean,default:!1},showKnowMore:{type:Boolean,default:!0},isEmpty:{type:Boolean,default:!1},showPaginationFooter:{type:Boolean,default:!0},showAssistantSwitcher:{type:Boolean,default:!0}},emits:["click","close","update:currentPage"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=wt(),{shouldShowPaywall:i}=Cl(),l=j(!1),r=j(null),c=_e("captainAssistants/getRecords"),u=_e("captainAssistants/getUIFlags"),d=y(()=>o.params.assistantId),h=y(()=>{var _;return(_=u.value)==null?void 0:_.fetchingList}),g=y(()=>{var _,N;return((N=(_=c.value)==null?void 0:_.find(R=>R.id===Number(d.value)))==null?void 0:N.name)||a("CAPTAIN.ASSISTANT_SWITCHER.NEW_ASSISTANT")}),f=y(()=>i(n.featureFlag)),b=()=>{s("click")},A=_=>{s("update:currentPage",_)},v=()=>{l.value=!l.value},T=()=>{l.value=!1,r.value.dialogRef.open()};return(_,N)=>{const R=Qe("on-clickaway");return p(),E("section",PYe,[m("header",kYe,[m("div",BYe,[m("div",UYe,[m("div",FYe,[e.backUrl?(p(),L(Rr,{key:0,"back-url":e.backUrl},null,8,["back-url"])):$("",!0),e.showAssistantSwitcher&&!f.value?(p(),E("div",GYe,[m("div",VYe,[h.value?$("",!0):(p(),E("span",HYe,I(g.value),1)),m("div",WYe,[S(C(ep),{onTrigger:N[1]||(N[1]=O=>l.value=!1)},{default:Y(()=>[S(te,{icon:"i-lucide-chevron-down",variant:"ghost",color:"slate",size:"xs",disabled:h.value,"is-loading":h.value,class:"rounded-md group-hover:bg-n-slate-3 hover:bg-n-slate-3 [&>span]:size-4",onClick:v},null,8,["disabled","is-loading"]),l.value?(p(),L(IYe,{key:0,class:"absolute ltr:left-0 rtl:right-0 top-9",onClose:N[0]||(N[0]=O=>l.value=!1),onCreateAssistant:T})):$("",!0)]),_:1})])])])):$("",!0),m("div",zYe,[e.showAssistantSwitcher&&!f.value&&e.headerTitle?(p(),E("div",YYe)):$("",!0),e.headerTitle?(p(),E("span",jYe,I(e.headerTitle),1)):$("",!0),!e.isEmpty&&e.showKnowMore?(p(),E("div",KYe,[N[2]||(N[2]=m("div",{class:"w-0.5 h-4 rounded-2xl bg-n-weak"},null,-1)),We(_.$slots,"knowMore")])):$("",!0)])]),m("div",XYe,[We(_.$slots,"search"),!f.value&&e.buttonLabel?re((p(),E("div",qYe,[S(js,{permissions:e.buttonPolicy},{default:Y(()=>[S(te,{label:e.buttonLabel,icon:"i-lucide-plus",size:"sm",class:"group-hover/captain-button:brightness-110",onClick:b},null,8,["label"])]),_:1},8,["permissions"]),We(_.$slots,"action")])),[[R,()=>s("close")]]):$("",!0)])]),We(_.$slots,"subHeader")])]),m("main",ZYe,[m("div",QYe,[f.value?$("",!0):We(_.$slots,"controls",{key:0}),e.isFetching?(p(),E("div",JYe,[S(An)])):f.value?(p(),E("div",eje,[We(_.$slots,"paywall")])):e.isEmpty?(p(),E("div",tje,[We(_.$slots,"emptyState")])):We(_.$slots,"body",{key:4}),We(_.$slots,"default")])]),e.showPaginationFooter?(p(),E("footer",nje,[S(cv,{"current-page":e.currentPage,"total-items":e.totalCount,"items-per-page":e.itemsPerPage,"onUpdate:currentPage":A},null,8,["current-page","total-items","items-per-page"])])):$("",!0),S(YC,{ref_key:"createAssistantDialogRef",ref:r,type:"create"},null,512)])}}},sje={class:"w-full max-w-[60rem] mx-auto h-full max-h-[448px] grid place-content-center"},Eu={__name:"Paywall",setup(e){const t=Ft(),n=_e("getCurrentUser"),s=y(()=>n.value.type==="SuperAdmin"),{accountId:a,isOnChatwootCloud:o}=ln(),i=y(()=>o.value?"PAYWALL":"ENTERPRISE_PAYWALL"),l=()=>{t.push({name:"billing_settings_index",params:{accountId:a.value}})};return(r,c)=>(p(),E("div",sje,[S(Wp,{class:"mx-auto","feature-prefix":"CAPTAIN","i18n-key":i.value,"is-super-admin":s.value,"is-on-chatwoot-cloud":C(o),onUpgrade:l},null,8,["i18n-key","is-super-admin","is-on-chatwoot-cloud"])]))}},aje={class:"flex justify-between w-full gap-1"},oje={class:"text-base font-normal text-n-slate-12 line-clamp-1 hover:underline transition-colors"},ije={class:"flex items-center gap-2"},lje={class:"relative flex items-center group"},rje={class:"flex items-center justify-between w-full gap-4"},cje={class:"text-sm truncate text-n-slate-11"},uje={class:"text-sm text-n-slate-11 line-clamp-1 shrink-0"},dje={__name:"AssistantCard",props:{id:{type:Number,required:!0},name:{type:String,required:!0},description:{type:String,required:!0},updatedAt:{type:Number,required:!0}},emits:["action"],setup(e,{emit:t}){const n=e,s=t,{checkPermissions:a}=Cl(),{t:o}=be(),[i,l]=yn(),r=y(()=>{const d=[{label:o("CAPTAIN.ASSISTANTS.OPTIONS.VIEW_CONNECTED_INBOXES"),value:"viewConnectedInboxes",action:"viewConnectedInboxes",icon:"i-lucide-link"}];return a(["administrator"])&&d.push({label:o("CAPTAIN.ASSISTANTS.OPTIONS.EDIT_ASSISTANT"),value:"edit",action:"edit",icon:"i-lucide-pencil-line"},{label:o("CAPTAIN.ASSISTANTS.OPTIONS.DELETE_ASSISTANT"),value:"delete",action:"delete",icon:"i-lucide-trash"}),d}),c=y(()=>us(n.updatedAt)),u=({action:d,value:h})=>{l(!1),s("action",{action:d,value:h,id:n.id})};return(d,h)=>{const g=Qe("on-clickaway");return p(),L(ba,null,{default:Y(()=>[m("div",aje,[m("h6",oje,I(e.name),1),m("div",ije,[re((p(),E("div",lje,[S(te,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:h[0]||(h[0]=f=>C(l)())}),C(i)?(p(),L(qs,{key:0,"menu-items":r.value,class:"mt-1 ltr:right-0 rtl:left-0 top-full",onAction:h[1]||(h[1]=f=>u(f))},null,8,["menu-items"])):$("",!0)])),[[g,()=>C(l)(!1)]])])]),m("div",rje,[m("span",cje,I(e.description||"Description not available"),1),m("span",uje,I(c.value),1)])]),_:1})}}},pje={class:"custom-dashed-border rounded-2xl py-5 px-6"},mje={class:"flex flex-col md:flex-row items-start md:items-center gap-6"},hje={class:"flex-shrink-0 bg-gray-800 w-[7.5rem] h-[6.5rem] rounded-lg flex items-center justify-center overflow-hidden"},fje=["src","alt"],gje=["src","alt"],_je=["src","alt"],vje={class:"flex flex-col flex-1 gap-3 ltr:pr-8 rtl:pl-8"},Eje={key:0,class:"text-n-slate-12 text-sm mb-0"},bje={key:1,class:"flex gap-3"},mv={__name:"FeatureSpotlight",props:{title:{type:String,default:""},note:{type:String,default:""},videoUrl:{type:String,default:""},thumbnail:{type:String,default:""},fallbackThumbnail:{type:String,default:""},fallbackThumbnailDark:{type:String,default:""},learnMoreUrl:{type:String,default:""},hideActions:{type:Boolean,default:!1}},setup(e){const t=j(!1),n=()=>{t.value=!0},s=a=>{a&&window.open(a,"_blank")};return(a,o)=>(p(),E("section",pje,[m("div",mje,[m("div",hje,[!t.value&&e.thumbnail?(p(),E("img",{key:0,src:e.thumbnail,alt:e.title,draggable:"false",class:"w-full h-full object-cover rounded-lg",loading:"lazy",onError:n},null,40,fje)):(p(),E(ue,{key:1},[e.fallbackThumbnailDark?(p(),E("img",{key:0,src:e.fallbackThumbnailDark,alt:e.title,draggable:"false",class:"w-full h-full object-cover hidden dark:block rounded-lg",loading:"lazy"},null,8,gje)):$("",!0),e.fallbackThumbnail?(p(),E("img",{key:1,src:e.fallbackThumbnail,alt:e.title,draggable:"false",class:"w-full h-full object-cover block dark:hidden rounded-lg",loading:"lazy"},null,8,_je)):$("",!0)],64))]),m("div",vje,[e.note?(p(),E("p",Eje,I(e.note),1)):$("",!0),e.hideActions?$("",!0):(p(),E("div",bje,[We(a.$slots,"actions",{},()=>[e.videoUrl?(p(),L(te,{key:0,label:a.$t("FEATURE_SPOTLIGHT.WATCH_VIDEO"),sm:"",faded:"",slate:"",icon:"i-lucide-circle-play",onClick:o[0]||(o[0]=i=>s(e.videoUrl))},null,8,["label"])):$("",!0),e.learnMoreUrl?(p(),L(te,{key:1,label:a.$t("FEATURE_SPOTLIGHT.LEARN_MORE"),sm:"",faded:"",slate:"","trailing-icon":"",icon:"i-lucide-arrow-up-right",onClick:o[1]||(o[1]=i=>s(e.learnMoreUrl))},null,8,["label"])):$("",!0)])]))])])]))}},Tje=[{account_id:2,config:{product_name:"HelpDesk Pro"},created_at:1736033561,description:"An advanced AI assistant designed to enhance customer support solutions by automating workflows and providing instant responses.",id:4,name:"Support Genie"},{account_id:3,config:{product_name:"CRM Tools"},created_at:1736033562,description:"Helps streamline customer relationship management by organizing contacts, automating follow-ups, and providing insights.",id:5,name:"CRM Assistant"},{account_id:4,config:{product_name:"SalesFlow"},created_at:1736033563,description:"Optimizes your sales pipeline by tracking prospects, forecasting sales, and automating administrative tasks.",id:6,name:"SalesBot"},{account_id:5,config:{product_name:"TicketMaster AI"},created_at:1736033564,description:"Automates ticket assignment, categorization, and customer query responses to enhance support efficiency.",id:7,name:"TicketBot"},{account_id:6,config:{product_name:"FinanceAssist"},created_at:1736033565,description:"Provides financial analytics, reporting, and insights, helping teams make data-driven financial decisions.",id:8,name:"Finance Wizard"},{account_id:8,config:{product_name:"HR Assistant"},created_at:1736033567,description:"Streamlines HR operations including employee management, payroll, and recruitment processes.",id:10,name:"HR Helper"}],Sje=[{account_id:1,assistant:{id:1,name:"Helper Pro"},content:"Comprehensive guide on using conversation filters to manage chats effectively.",created_at:1736143272,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688192-how-to-use-conversation-filters",id:3059,name:"How to use Conversation Filters? | User Guide | Chatwoot",status:"available"},{account_id:2,assistant:{id:2,name:"Support Genie"},content:"Step-by-step guide for automating ticket assignments and improving support workflow in Chatwoot.",created_at:1736143273,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688200-automating-ticket-assignments",id:3060,name:"Automating Ticket Assignments | User Guide | Chatwoot",status:"available"},{account_id:3,assistant:{id:3,name:"CRM Assistant"},content:"A detailed guide on managing and organizing customer profiles for better relationship management.",created_at:1736143274,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688210-managing-customer-profiles",id:3061,name:"Managing Customer Profiles | User Guide | Chatwoot",status:"available"},{account_id:4,assistant:{id:4,name:"SalesBot"},content:"Learn how to optimize sales tracking and improve your sales forecasting using advanced features.",created_at:1736143275,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688220-sales-tracking-guide",id:3062,name:"Sales Tracking Guide | User Guide | Chatwoot",status:"available"},{account_id:5,assistant:{id:5,name:"TicketBot"},content:"How to efficiently create, manage, and resolve tickets in Chatwoot.",created_at:1736143276,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688230-managing-tickets",id:3063,name:"Managing Tickets | User Guide | Chatwoot",status:"available"},{account_id:6,assistant:{id:6,name:"Finance Wizard"},content:"Detailed guide on how to use financial reporting tools and generate insightful analytics.",created_at:1736143277,external_link:"https://www.chatwoot.com/hc/user-guide/articles/1677688240-financial-reporting",id:3064,name:"Financial Reporting | User Guide | Chatwoot",status:"available"}],Aje=[{account_id:1,answer:"Messenger may be deactivated because you are on a free plan or the limit for inboxes might have been reached.",created_at:1736283330,id:87,question:"Why is my Messenger in Chatwoot deactivated?",status:"pending",assistant:{account_id:1,config:{product_name:"Chatwoot"},created_at:1736033280,description:"Assists with general queries and system-wide issues.",id:1,name:"Assistant 2"}},{account_id:2,answer:"You can integrate your WhatsApp account by navigating to the Integrations section and selecting the WhatsApp integration option.",created_at:1736283340,id:88,question:"How do I integrate WhatsApp with Chatwoot?",assistant:{account_id:2,config:{product_name:"Chatwoot"},created_at:1736033281,description:"Helps with integration and setup-related inquiries.",id:2,name:"Assistant 3"}},{account_id:3,answer:"To reset your password, go to the login page and click on 'Forgot Password', then follow the instructions sent to your email.",created_at:1736283350,id:89,question:"How can I reset my password in Chatwoot?",assistant:{account_id:3,config:{product_name:"Chatwoot"},created_at:1736033282,description:"Handles account management and recovery support.",id:3,name:"Assistant 4"}},{account_id:4,answer:"You can enable the dark mode in settings by navigating to 'Appearance' and selecting 'Dark Mode'.",created_at:1736283360,id:90,question:"How do I enable dark mode in Chatwoot?",assistant:{account_id:4,config:{product_name:"Chatwoot"},created_at:1736033283,description:"Helps with UI and theme-related inquiries.",id:4,name:"Assistant 5"}},{account_id:5,answer:"To add a new team member, navigate to 'Settings', then 'Team', and click on 'Add Team Member'.",created_at:1736283370,id:91,question:"How do I add a new team member in Chatwoot?",assistant:{account_id:5,config:{product_name:"Chatwoot"},created_at:1736033284,description:"Supports team management and user access-related queries.",id:5,name:"Assistant 6"}},{account_id:6,answer:"Campaigns in Chatwoot allow you to send targeted messages to specific user segments. You can create them in the 'Campaigns' section.",created_at:1736283380,id:92,question:"What are campaigns in Chatwoot?",assistant:{account_id:6,config:{product_name:"Chatwoot"},created_at:1736033285,description:"Specialized in marketing, campaign management, and messaging strategies.",id:6,name:"Assistant 7"}}],yje=[{id:7,name:"Email Support",channel_type:St.EMAIL,email:"support@company.com"},{id:1,name:"Website Chat",channel_type:St.WEB},{id:2,name:"Facebook Support",channel_type:St.FB},{id:5,name:"SMS Service",channel_type:St.TWILIO,messaging_service_sid:"MGxxxxxx"},{id:6,name:"WhatsApp Support",channel_type:St.WHATSAPP,phone_number:"+1987654321"},{id:8,name:"Telegram Support",channel_type:St.TELEGRAM},{id:9,name:"LINE Support",channel_type:St.LINE},{id:10,name:"API Channel",channel_type:St.API},{id:11,name:"SMS Basic",channel_type:St.SMS,phone_number:"+1555555555"}],Ije={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},Cje={__name:"AssistantPageEmptyState",emits:["click"],setup(e,{emit:t}){const n=t,{isOnChatwootCloud:s}=ln(),a=()=>{n("click")};return(o,i)=>(p(),E(ue,null,[S(mv,{title:o.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:o.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/assistant-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/assistant-dark.svg","learn-more-url":"https://chwt.app/captain-assistant",class:"mb-8","hide-actions":!C(s)},null,8,["title","note","hide-actions"]),S(Do,{title:o.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.TITLE"),subtitle:o.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.SUBTITLE"),"action-perms":["administrator"]},{"empty-state-item":Y(()=>[m("div",Ije,[(p(!0),E(ue,null,Ae(C(Tje).slice(0,5),(l,r)=>(p(),L(dje,{id:l.id,key:`assistant-${r}`,name:l.name,description:l.description,"updated-at":l.created_at},null,8,["id","name","description","updated-at"]))),128))])]),actions:Y(()=>[S(te,{label:o.$t("CAPTAIN.ASSISTANTS.ADD_NEW"),icon:"i-lucide-plus",onClick:a},null,8,["label"])]),_:1},8,["title","subtitle"])],64))}},Nje={class:"relative"},Oje={key:0},Rje={class:"absolute top-full mt-6 ltr:left-0 rtl:right-0 outline outline-1 outline-n-weak bg-n-alpha-3 backdrop-blur-[100px] rounded-xl p-4 w-80"},xje={class:"relative flex flex-col items-start gap-4 z-20"},wje={class:"flex-shrink-0 bg-gray-800 w-full h-[7.5rem] rounded-lg"},$je=["src","alt"],Mje=["src","alt"],Lje=["src","alt"],Dje={key:0,class:"text-n-slate-12 text-start text-sm mb-0"},Pje={key:1,class:"flex gap-3 justify-between w-full"},nm={__name:"FeatureSpotlightPopover",props:{buttonLabel:{type:String,default:""},title:{type:String,default:""},note:{type:String,default:""},videoUrl:{type:String,default:""},thumbnail:{type:String,default:""},fallbackThumbnail:{type:String,default:""},fallbackThumbnailDark:{type:String,default:""},learnMoreUrl:{type:String,default:""},hideActions:{type:Boolean,default:!1}},setup(e){const t=j(!1),[n,s]=yn(),a=()=>{t.value=!0},o=i=>{i&&window.open(i,"_blank")};return(i,l)=>(p(),E("div",Nje,[S(te,{id:"togglePopup",label:e.buttonLabel,slate:"",ghost:"",sm:"",class:ae({"bg-n-alpha-2":C(n)}),onClick:l[0]||(l[0]=r=>C(s)(!C(n)))},null,8,["label","class"]),C(n)?re((p(),E("div",Oje,[m("section",Rje,[l[3]||(l[3]=m("div",{class:"absolute -top-[0.77rem] ltr:left-12 rtl:right-12 w-6 h-6 ltr:rotate-45 rtl:-rotate-45 rtl:rounded-tr ltr:rounded-tl rtl:border-r ltr:border-l border-t border-n-weak bg-n-alpha-3 z-10"},null,-1)),m("div",xje,[m("div",wje,[!t.value&&e.thumbnail?(p(),E("img",{key:0,src:e.thumbnail,alt:e.title,draggable:"false",loading:"lazy",class:"w-full h-full object-cover rounded-lg",onError:a},null,40,$je)):(p(),E(ue,{key:1},[e.fallbackThumbnailDark?(p(),E("img",{key:0,src:e.fallbackThumbnailDark,alt:e.title,draggable:"false",loading:"lazy",class:"w-full h-full object-cover hidden dark:block"},null,8,Mje)):$("",!0),e.fallbackThumbnail?(p(),E("img",{key:1,src:e.fallbackThumbnail,alt:e.title,draggable:"false",loading:"lazy",class:"w-full h-full object-cover block dark:hidden"},null,8,Lje)):$("",!0)],64))]),e.note?(p(),E("p",Dje,I(e.note),1)):$("",!0),e.hideActions?$("",!0):(p(),E("div",Pje,[We(i.$slots,"actions",{},()=>[e.videoUrl?(p(),L(te,{key:0,label:i.$t("FEATURE_SPOTLIGHT.WATCH_VIDEO"),sm:"",faded:"",slate:"",icon:"i-lucide-circle-play",class:"w-full",onClick:l[1]||(l[1]=r=>o(e.videoUrl))},null,8,["label"])):$("",!0),e.learnMoreUrl?(p(),L(te,{key:1,label:i.$t("FEATURE_SPOTLIGHT.LEARN_MORE"),sm:"",faded:"",slate:"","trailing-icon":"",class:"w-full",icon:"i-lucide-arrow-up-right",onClick:l[2]||(l[2]=r=>o(e.learnMoreUrl))},null,8,["label"])):$("",!0)])]))])])])),[[C(ms),[()=>C(n)&&(n.value=!1),{ignore:["#togglePopup"]}]]]):$("",!0)]))}},kje={__name:"Index",setup(e){const{isOnChatwootCloud:t}=ln(),n=j(""),s=_e("captainAssistants/getUIFlags"),a=y(()=>s.value.fetchingList),o=j(null),i=j(null),l=Ft(),r=()=>{n.value="create",Wt(()=>i.value.dialogRef.open())},c=()=>{n.value="",o.value=null},u=d=>{d!=null&&d.id&&l.push({name:"captain_assistants_responses_index",params:{accountId:l.currentRoute.value.params.accountId,assistantId:d.id}})};return(d,h)=>(p(),L(fo,{"header-title":d.$t("CAPTAIN.ASSISTANTS.HEADER"),"show-pagination-footer":!1,"is-fetching":a.value,"feature-flag":C(ft).CAPTAIN,"is-empty":"",onClick:r},{knowMore:Y(()=>[S(nm,{"button-label":d.$t("CAPTAIN.HEADER_KNOW_MORE"),title:d.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:d.$t("CAPTAIN.ASSISTANTS.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"hide-actions":!C(t),"fallback-thumbnail":"/assets/images/dashboard/captain/assistant-popover-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/assistant-popover-dark.svg","learn-more-url":"https://chwt.app/captain-assistant"},null,8,["button-label","title","note","hide-actions"])]),emptyState:Y(()=>[S(Cje,{onClick:r})]),paywall:Y(()=>[S(Eu)]),default:Y(()=>[n.value?(p(),L(YC,{key:0,ref_key:"createAssistantDialog",ref:i,type:n.value,"selected-assistant":o.value,onClose:c,onCreated:u},null,8,["type","selected-assistant"])):$("",!0)]),_:1},8,["header-title","is-fetching","feature-flag"]))}},Bje={class:"flex flex-col items-start gap-2"},Uje={class:"text-n-slate-12 text-base font-medium"},Fje={class:"text-n-slate-11 text-sm"},rr={__name:"SettingsHeader",props:{heading:{type:String,required:!0},description:{type:String,default:""}},setup(e){return(t,n)=>(p(),E("header",Bje,[m("h2",Uje,I(e.heading),1),m("p",Fje,I(e.description),1)]))}},Gje={class:"flex flex-col gap-6"},Vje={class:"flex flex-col gap-2"},Hje={class:"text-sm font-medium text-n-slate-12"},Wje={class:"flex flex-col gap-2"},zje={class:"flex items-center gap-2"},Yje={class:"flex items-center gap-2"},jje={class:"flex items-center gap-2"},Kje={__name:"AssistantBasicSettingsForm",props:{assistant:{type:Object,default:()=>({})}},emits:["submit"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),i=gn({...{name:"",description:"",productName:"",features:{conversationFaqs:!1,memories:!1,citations:!1}}}),l={name:{required:Ye,minLength:en(1)},description:{required:Ye,minLength:en(1)},productName:{required:Ye,minLength:en(1)}},r=bt(l,i),c=g=>r.value[g].$error?r.value[g].$errors[0].$message:"",u=y(()=>({name:c("name"),description:c("description"),productName:c("productName")})),d=g=>{const{config:f={}}=g;i.name=g.name,i.description=g.description,i.productName=f.product_name,i.features={conversationFaqs:f.feature_faq||!1,memories:f.feature_memory||!1,citations:f.feature_citation||!1}},h=async()=>{if(!await Promise.all([r.value.name.$validate(),r.value.description.$validate(),r.value.productName.$validate()]).then(b=>b.every(Boolean)))return;const f={name:i.name,description:i.description,config:{...n.assistant.config,product_name:i.productName,feature_faq:i.features.conversationFaqs,feature_memory:i.features.memories,feature_citation:i.features.citations}};s("submit",f)};return it(()=>n.assistant,g=>{g&&d(g)},{immediate:!0}),(g,f)=>(p(),E("div",Gje,[S(Tt,{modelValue:i.name,"onUpdate:modelValue":f[0]||(f[0]=b=>i.name=b),label:C(a)("CAPTAIN.ASSISTANTS.FORM.NAME.LABEL"),placeholder:C(a)("CAPTAIN.ASSISTANTS.FORM.NAME.PLACEHOLDER"),message:u.value.name,"message-type":u.value.name?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),S(Tt,{modelValue:i.productName,"onUpdate:modelValue":f[1]||(f[1]=b=>i.productName=b),label:C(a)("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.LABEL"),placeholder:C(a)("CAPTAIN.ASSISTANTS.FORM.PRODUCT_NAME.PLACEHOLDER"),message:u.value.productName,"message-type":u.value.productName?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),S(Ks,{modelValue:i.description,"onUpdate:modelValue":f[2]||(f[2]=b=>i.description=b),label:C(a)("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.LABEL"),placeholder:C(a)("CAPTAIN.ASSISTANTS.FORM.DESCRIPTION.PLACEHOLDER"),message:u.value.description,"message-type":u.value.description?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),m("div",Vje,[m("label",Hje,I(C(a)("CAPTAIN.ASSISTANTS.FORM.FEATURES.TITLE")),1),m("div",Wje,[m("label",zje,[re(m("input",{"onUpdate:modelValue":f[3]||(f[3]=b=>i.features.conversationFaqs=b),type:"checkbox"},null,512),[[dn,i.features.conversationFaqs]]),xe(" "+I(C(a)("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_CONVERSATION_FAQS")),1)]),m("label",Yje,[re(m("input",{"onUpdate:modelValue":f[4]||(f[4]=b=>i.features.memories=b),type:"checkbox"},null,512),[[dn,i.features.memories]]),xe(" "+I(C(a)("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_MEMORIES")),1)]),m("label",jje,[re(m("input",{"onUpdate:modelValue":f[5]||(f[5]=b=>i.features.citations=b),type:"checkbox"},null,512),[[dn,i.features.citations]]),xe(" "+I(C(a)("CAPTAIN.ASSISTANTS.FORM.FEATURES.ALLOW_CITATIONS")),1)])])]),m("div",null,[S(te,{label:C(a)("CAPTAIN.ASSISTANTS.FORM.UPDATE"),onClick:h},null,8,["label"])])]))}},Xje={class:"flex flex-col gap-6"},qje={class:"flex flex-col gap-2"},Zje={class:"text-sm font-medium text-n-slate-12"},Qje={class:"flex items-center gap-4"},Jje={class:"text-sm text-n-slate-12"},eKe={class:"text-sm text-n-slate-11 italic"},tKe={__name:"AssistantSystemSettingsForm",props:{assistant:{type:Object,default:()=>({})}},emits:["submit"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),{isCloudFeatureEnabled:o}=ln(),i=y(()=>o(ft.CAPTAIN_V2)),r=gn({...{handoffMessage:"",resolutionMessage:"",instructions:"",temperature:1}}),c={handoffMessage:{minLength:en(1)},resolutionMessage:{minLength:en(1)},instructions:{minLength:en(1)}},u=bt(c,r),d=b=>u.value[b].$error?u.value[b].$errors[0].$message:"",h=y(()=>({handoffMessage:d("handoffMessage"),resolutionMessage:d("resolutionMessage"),instructions:d("instructions")})),g=b=>{const{config:A={}}=b;r.handoffMessage=A.handoff_message,r.resolutionMessage=A.resolution_message,r.instructions=A.instructions,r.temperature=A.temperature||1},f=async()=>{const b=[u.value.handoffMessage.$validate(),u.value.resolutionMessage.$validate()];if(i.value||b.push(u.value.instructions.$validate()),!await Promise.all(b).then(T=>T.every(Boolean)))return;const v={config:{...n.assistant.config,handoff_message:r.handoffMessage,resolution_message:r.resolutionMessage,temperature:r.temperature||1}};i.value||(v.config.instructions=r.instructions),s("submit",v)};return it(()=>n.assistant,b=>{b&&g(b)},{immediate:!0}),(b,A)=>(p(),E("div",Xje,[S(Ks,{modelValue:r.handoffMessage,"onUpdate:modelValue":A[0]||(A[0]=v=>r.handoffMessage=v),label:C(a)("CAPTAIN.ASSISTANTS.FORM.HANDOFF_MESSAGE.LABEL"),placeholder:C(a)("CAPTAIN.ASSISTANTS.FORM.HANDOFF_MESSAGE.PLACEHOLDER"),message:h.value.handoffMessage,"message-type":h.value.handoffMessage?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),S(Ks,{modelValue:r.resolutionMessage,"onUpdate:modelValue":A[1]||(A[1]=v=>r.resolutionMessage=v),label:C(a)("CAPTAIN.ASSISTANTS.FORM.RESOLUTION_MESSAGE.LABEL"),placeholder:C(a)("CAPTAIN.ASSISTANTS.FORM.RESOLUTION_MESSAGE.PLACEHOLDER"),message:h.value.resolutionMessage,"message-type":h.value.resolutionMessage?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),i.value?$("",!0):(p(),L(Ks,{key:0,modelValue:r.instructions,"onUpdate:modelValue":A[2]||(A[2]=v=>r.instructions=v),label:C(a)("CAPTAIN.ASSISTANTS.FORM.INSTRUCTIONS.LABEL"),placeholder:C(a)("CAPTAIN.ASSISTANTS.FORM.INSTRUCTIONS.PLACEHOLDER"),message:h.value.instructions,"max-length":2e4,"message-type":h.value.instructions?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"])),m("div",qje,[m("label",Zje,I(C(a)("CAPTAIN.ASSISTANTS.FORM.TEMPERATURE.LABEL")),1),m("div",Qje,[re(m("input",{"onUpdate:modelValue":A[3]||(A[3]=v=>r.temperature=v),type:"range",min:"0",max:"1",step:"0.1",class:"w-full"},null,512),[[gt,r.temperature]]),m("span",Jje,I(r.temperature),1)]),m("p",eKe,I(C(a)("CAPTAIN.ASSISTANTS.FORM.TEMPERATURE.DESCRIPTION")),1)]),m("div",null,[S(te,{label:C(a)("CAPTAIN.ASSISTANTS.FORM.UPDATE"),onClick:f},null,8,["label"])])]))}},nKe={class:"flex items-center justify-between w-full gap-1 h-8"},sKe={class:"text-sm font-medium text-n-slate-12 line-clamp-1"},aKe={class:"flex items-center gap-2"},oKe={class:"text-n-slate-11 text-sm leading-[21px] line-clamp-5"},iKe={__name:"AssistantControlItems",props:{controlItem:{type:Object,default:()=>({})}},setup(e){const t=Ft(),n=s=>{t.push({name:s})};return(s,a)=>(p(),E("div",{key:e.controlItem.name,class:"pt-3 ltr:pl-4 rtl:pr-4 ltr:pr-2 rtl:pl-2 pb-5 gap-2 flex flex-col w-full shadow outline-1 outline outline-n-container rounded-2xl bg-n-solid-2 cursor-pointer",onClick:a[1]||(a[1]=o=>n(e.controlItem.routeName))},[m("div",nKe,[m("span",sKe,I(e.controlItem.name),1),m("div",aKe,[S(te,{icon:"i-lucide-chevron-right",slate:"",ghost:"",xs:"",onClick:a[0]||(a[0]=o=>n(e.controlItem.routeName))})])]),m("span",oKe,I(e.controlItem.description),1)]))}},Ur={__name:"DeleteDialog",props:{type:{type:String,required:!0},translationKey:{type:String,required:!0},entity:{type:Object,required:!0},deletePayload:{type:Object,default:null}},emits:["deleteSuccess"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=be(),i=rt(),l=j(null),r=y(()=>s.translationKey||s.type.toUpperCase()),c=async d=>{if(d)try{await i.dispatch(`captain${s.type}/delete`,d),a("deleteSuccess"),ne(o(`CAPTAIN.${r.value}.DELETE.SUCCESS_MESSAGE`))}catch{ne(o(`CAPTAIN.${r.value}.DELETE.ERROR_MESSAGE`))}},u=async()=>{var d;await c(s.deletePayload||s.entity.id),(d=l.value)==null||d.close()};return t({dialogRef:l}),(d,h)=>(p(),L($n,{ref_key:"deleteDialogRef",ref:l,type:"alert",title:C(o)(`CAPTAIN.${r.value}.DELETE.TITLE`),description:C(o)(`CAPTAIN.${r.value}.DELETE.DESCRIPTION`),"confirm-button-label":C(o)(`CAPTAIN.${r.value}.DELETE.CONFIRM`),onConfirm:u},null,8,["title","description","confirm-button-label"]))}},lKe={class:"flex flex-col gap-6"},rKe={class:"flex flex-col gap-6"},cKe={class:"flex flex-col gap-6"},uKe={class:"flex items-end justify-between w-full gap-4"},dKe={class:"flex flex-col gap-2"},pKe={class:"text-n-slate-12 text-base font-medium"},mKe={class:"text-n-slate-11 text-sm"},hKe={class:"flex-shrink-0"},fKe={key:0,class:"flex flex-col gap-6"},gKe={class:"flex flex-col gap-6"},_Ke={__name:"Settings",setup(e){const{t}=be(),{isCloudFeatureEnabled:n}=ln(),s=y(()=>n(ft.CAPTAIN_V2)),a=wt(),o=Ft(),i=rt(),l=j(null),r=_e("captainAssistants/getUIFlags"),c=_e("captainAssistants/getRecords"),u=y(()=>r.value.fetchingItem),d=y(()=>Number(a.params.assistantId)),h=y(()=>i.getters["captainAssistants/getRecord"](d.value)),g=y(()=>[{name:t("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.OPTIONS.GUARDRAILS.TITLE"),description:t("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.OPTIONS.GUARDRAILS.DESCRIPTION"),routeName:"captain_assistants_guardrails_index"},{name:t("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.OPTIONS.RESPONSE_GUIDELINES.TITLE"),description:t("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.OPTIONS.RESPONSE_GUIDELINES.DESCRIPTION"),routeName:"captain_assistants_guidelines_index"}]),f=async v=>{try{await i.dispatch("captainAssistants/update",{id:d.value,...v}),ne(t("CAPTAIN.ASSISTANTS.EDIT.SUCCESS_MESSAGE"))}catch(T){const _=(T==null?void 0:T.message)||t("CAPTAIN.ASSISTANTS.EDIT.ERROR_MESSAGE");ne(_)}},b=()=>{l.value.dialogRef.open()},A=()=>{const v=c.value.filter(T=>T.id!==d.value);if(v.length>0){const T=v[0];o.push({name:"captain_assistants_settings_index",params:{accountId:a.params.accountId,assistantId:T.id}})}else o.push({name:"captain_assistants_create_index",params:{accountId:a.params.accountId}})};return(v,T)=>(p(),L(fo,{"is-fetching":u.value,"show-pagination-footer":!1,"show-know-more":!1,class:ae({"[&>header>div]:max-w-[80rem] [&>main>div]:max-w-[80rem]":s.value})},{body:Y(()=>[m("div",{class:ae(["gap-6 lg:gap-16 pb-8",{"grid grid-cols-2":s.value}])},[m("div",lKe,[m("div",rKe,[S(rr,{heading:C(t)("CAPTAIN.ASSISTANTS.SETTINGS.BASIC_SETTINGS.TITLE"),description:C(t)("CAPTAIN.ASSISTANTS.SETTINGS.BASIC_SETTINGS.DESCRIPTION")},null,8,["heading","description"]),S(Kje,{assistant:h.value,onSubmit:f},null,8,["assistant"])]),T[0]||(T[0]=m("span",{class:"h-px w-full bg-n-weak mt-2"},null,-1)),m("div",cKe,[S(rr,{heading:C(t)("CAPTAIN.ASSISTANTS.SETTINGS.SYSTEM_SETTINGS.TITLE"),description:C(t)("CAPTAIN.ASSISTANTS.SETTINGS.SYSTEM_SETTINGS.DESCRIPTION")},null,8,["heading","description"]),S(tKe,{assistant:h.value,onSubmit:f},null,8,["assistant"])]),T[1]||(T[1]=m("span",{class:"h-px w-full bg-n-weak mt-2"},null,-1)),m("div",uKe,[m("div",dKe,[m("h6",pKe,I(C(t)("CAPTAIN.ASSISTANTS.SETTINGS.DELETE.TITLE")),1),m("span",mKe,I(C(t)("CAPTAIN.ASSISTANTS.SETTINGS.DELETE.DESCRIPTION")),1)]),m("div",hKe,[S(te,{label:C(t)("CAPTAIN.ASSISTANTS.SETTINGS.DELETE.BUTTON_TEXT",{assistantName:h.value.name}),color:"ruby",class:"max-w-56 !w-fit",onClick:b},null,8,["label"])])])]),s.value?(p(),E("div",fKe,[S(rr,{heading:C(t)("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.TITLE"),description:C(t)("CAPTAIN.ASSISTANTS.SETTINGS.CONTROL_ITEMS.DESCRIPTION")},null,8,["heading","description"]),m("div",gKe,[(p(!0),E(ue,null,Ae(g.value,_=>(p(),L(iKe,{key:_.name,"control-item":_},null,8,["control-item"]))),128))])])):$("",!0)],2)]),default:Y(()=>[h.value?(p(),L(Ur,{key:0,ref_key:"deleteAssistantDialog",ref:l,entity:h.value,type:"Assistants","translation-key":"ASSISTANTS",onDeleteSuccess:A},null,8,["entity"])):$("",!0)]),_:1},8,["is-fetching","class"]))}},vKe={class:"flex flex-col gap-1"},EKe={for:"inbox",class:"mb-0.5 text-sm font-medium text-n-slate-12"},bKe={class:"flex items-center justify-between w-full gap-3"},TKe={__name:"ConnectInboxForm",props:{assistantId:{type:Number,required:!0}},emits:["submit","cancel"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o={uiFlags:_e("captainInboxes/getUIFlags"),inboxes:_e("inboxes/getInboxes"),captainInboxes:_e("captainInboxes/getRecords")},l=gn({...{inboxId:null}}),r={inboxId:{required:Ye}},c=y(()=>{const v=o.captainInboxes.value.map(T=>T.id);return o.inboxes.value.filter(T=>!v.includes(T.id)).map(T=>({value:T.id,label:T.name}))}),u=bt(r,l),d=y(()=>o.uiFlags.value.creatingItem),h=(v,T)=>u.value[v].$error?a(`CAPTAIN.INBOXES.FORM.${T}.ERROR`):"",g=y(()=>({inboxId:h("inboxId","INBOX")})),f=()=>s("cancel"),b=()=>({inboxId:l.inboxId,assistantId:n.assistantId}),A=async()=>{await u.value.$validate()&&s("submit",b())};return(v,T)=>(p(),E("form",{class:"flex flex-col gap-4",onSubmit:Ve(A,["prevent"])},[m("div",vKe,[m("label",EKe,I(C(a)("CAPTAIN.INBOXES.FORM.INBOX.LABEL")),1),S(Ha,{id:"inbox",modelValue:l.inboxId,"onUpdate:modelValue":T[0]||(T[0]=_=>l.inboxId=_),options:c.value,"has-error":!!g.value.inboxId,placeholder:C(a)("CAPTAIN.INBOXES.FORM.INBOX.PLACEHOLDER"),class:"[&>div>button]:bg-n-alpha-black2 [&>div>button:not(.focused)]:dark:outline-n-weak [&>div>button:not(.focused)]:hover:!outline-n-slate-6",message:g.value.inboxId},null,8,["modelValue","options","has-error","placeholder","message"])]),m("div",bKe,[S(te,{type:"button",variant:"faded",color:"slate",label:C(a)("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:f},null,8,["label"]),S(te,{type:"submit",label:C(a)("CAPTAIN.FORM.CREATE"),class:"w-full","is-loading":d.value,disabled:d.value},null,8,["label","is-loading","disabled"])])],32))}},df="CAPTAIN.INBOXES.CREATE",SKe={__name:"ConnectInboxDialog",props:{assistantId:{type:Number,required:!0}},emits:["close"],setup(e,{expose:t,emit:n}){const s=n,{t:a}=be(),o=rt(),i=j(null),l=j(null),r=async d=>{try{await o.dispatch("captainInboxes/create",d),ne(a(`${df}.SUCCESS_MESSAGE`)),i.value.close()}catch(h){const g=(h==null?void 0:h.message)||a(`${df}.ERROR_MESSAGE`);ne(g)}},c=()=>{s("close")},u=()=>{i.value.close()};return t({dialogRef:i}),(d,h)=>(p(),L($n,{ref_key:"dialogRef",ref:i,type:"create",title:d.$t(`${df}.TITLE`),description:d.$t("CAPTAIN.INBOXES.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,onClose:c},{footer:Y(()=>h[0]||(h[0]=[])),default:Y(()=>[S(TKe,{ref_key:"connectForm",ref:l,"assistant-id":e.assistantId,onSubmit:r,onCancel:u},null,8,["assistant-id"])]),_:1},8,["title","description"]))}},AKe={class:"flex justify-between w-full gap-1"},yKe={class:"text-base text-n-slate-12 line-clamp-1 flex items-center gap-2"},IKe={class:"flex items-center gap-2"},jC={__name:"InboxCard",props:{id:{type:Number,required:!0},inbox:{type:Object,required:!0}},emits:["action"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),[o,i]=yn(),l=y(()=>{const d=n.inbox;if(!(d!=null&&d.name))return"";const h=d.channel_type===St.TWILIO,g=d.channel_type===St.WHATSAPP,f=d.channel_type===St.EMAIL;if(h||g){const b=d.messaging_service_sid||d.phone_number;return b?`${d.name} (${b})`:d.name}return f&&d.email?`${d.name} (${d.email})`:d.name}),r=y(()=>[{label:a("CAPTAIN.INBOXES.OPTIONS.DISCONNECT"),value:"delete",action:"delete",icon:"i-lucide-trash"}]),c=y(()=>{const{medium:d,channel_type:h}=n.inbox;return ni(h,d,"outline")}),u=({action:d,value:h})=>{i(!1),s("action",{action:d,value:h,id:n.id})};return(d,h)=>{const g=Qe("on-clickaway");return p(),L(ba,null,{default:Y(()=>[m("div",AKe,[m("span",yKe,[m("span",{class:ae(c.value)},null,2),xe(" "+I(l.value),1)]),m("div",IKe,[re((p(),L(js,{permissions:["administrator"],class:"relative flex items-center group"},{default:Y(()=>[S(te,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:h[0]||(h[0]=f=>C(i)())}),C(o)?(p(),L(qs,{key:0,"menu-items":r.value,class:"mt-1 ltr:right-0 rtl:left-0 top-full",onAction:h[1]||(h[1]=f=>u(f))},null,8,["menu-items"])):$("",!0)]),_:1})),[[g,()=>C(i)(!1)]])])])]),_:1})}}},CKe={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},NKe={__name:"InboxPageEmptyState",emits:["click"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(a,o)=>(p(),L(Do,{title:a.$t("CAPTAIN.INBOXES.EMPTY_STATE.TITLE"),subtitle:a.$t("CAPTAIN.INBOXES.EMPTY_STATE.SUBTITLE"),"action-perms":["administrator"]},{"empty-state-item":Y(()=>[m("div",CKe,[(p(!0),E(ue,null,Ae(C(yje).slice(0,5),(i,l)=>(p(),L(jC,{id:i.id,key:`inbox-${l}`,inbox:i},null,8,["id","inbox"]))),128))])]),actions:Y(()=>[S(te,{label:a.$t("CAPTAIN.INBOXES.ADD_NEW"),icon:"i-lucide-plus",onClick:s},null,8,["label"])]),_:1},8,["title","subtitle"]))}},OKe={class:"flex flex-col gap-4"},RKe={__name:"Index",setup(e){const t=rt(),n=j(""),s=wt(),a=_e("captainAssistants/getUIFlags"),o=_e("captainInboxes/getUIFlags"),i=y(()=>a.value.fetchingItem),l=y(()=>o.value.fetchingList),r=_e("captainInboxes/getRecords"),c=j(null),u=j(null),d=()=>{u.value.dialogRef.open()},h=j(null),g=()=>{n.value="create",Wt(()=>h.value.dialogRef.open())},f=({action:v,id:T})=>{c.value=r.value.find(_=>T===_.id),Wt(()=>{v==="delete"&&d()})},b=()=>{n.value="",c.value=null},A=Number(s.params.assistantId);return lt(()=>t.dispatch("captainInboxes/get",{assistantId:A})),(v,T)=>(p(),L(fo,{"header-title":v.$t("CAPTAIN.INBOXES.HEADER"),"button-label":v.$t("CAPTAIN.INBOXES.ADD_NEW"),"button-policy":["administrator"],"is-fetching":i.value||l.value,"is-empty":!C(r).length,"show-pagination-footer":!1,"show-know-more":!1,"feature-flag":C(ft).CAPTAIN,onClick:g},{emptyState:Y(()=>[S(NKe,{onClick:g})]),body:Y(()=>[m("div",OKe,[(p(!0),E(ue,null,Ae(C(r),_=>(p(),L(jC,{id:_.id,key:_.id,inbox:_,onAction:f},null,8,["id","inbox"]))),128))])]),default:Y(()=>[c.value?(p(),L(Ur,{key:0,ref_key:"disconnectInboxDialog",ref:u,entity:c.value,"delete-payload":{assistantId:C(A),inboxId:c.value.id},type:"Inboxes"},null,8,["entity","delete-payload"])):$("",!0),n.value?(p(),L(SKe,{key:1,ref_key:"connectInboxDialog",ref:h,"assistant-id":C(A),type:n.value,onClose:b},null,8,["assistant-id","type"])):$("",!0)]),_:1},8,["header-title","button-label","is-fetching","is-empty","feature-flag"]))}},xKe=["innerHTML"],wKe={key:0,class:"flex justify-start"},$Ke={class:"flex items-start gap-1.5"},MKe={__name:"MessageList",props:{messages:{type:Array,required:!0},isLoading:{type:Boolean,default:!1}},setup(e){const t=e,n=j(null),{t:s}=be(),{formatMessage:a}=sa(),o=d=>d==="user",i=d=>o(d)?"justify-end":"justify-start",l=d=>o(d)?"flex-row-reverse":"flex-row",r=d=>o(d)?s("CAPTAIN.PLAYGROUND.USER"):s("CAPTAIN.PLAYGROUND.ASSISTANT"),c=d=>o(d)?"bg-n-solid-blue text-n-slate-12 rounded-br-sm rounded-bl-xl rounded-t-xl":"bg-n-solid-iris text-n-slate-12 rounded-bl-sm rounded-br-xl rounded-t-xl";return it(()=>t.messages.length,async()=>{await Wt(),n.value&&(n.value.scrollTop=n.value.scrollHeight)}),(d,h)=>(p(),E("div",{ref_key:"messageContainer",ref:n,class:"flex-1 overflow-y-auto mb-4 px-6 space-y-6"},[(p(!0),E(ue,null,Ae(e.messages,(g,f)=>(p(),E("div",{key:f,class:ae(["flex",i(g.sender)])},[m("div",{class:ae(["flex items-end gap-1.5 max-w-[90%] md:max-w-[60%]",l(g.sender)])},[S(kt,{name:r(g.sender),"rounded-full":"",size:24,class:"shrink-0"},null,8,["name"]),m("div",{class:ae(["px-4 py-3 text-sm [overflow-wrap:break-word]",c(g.sender)])},[m("div",{innerHTML:C(a)(g.content)},null,8,xKe)],2)],2)],2))),128)),e.isLoading?(p(),E("div",wKe,[m("div",$Ke,[S(kt,{name:r("assistant"),"rounded-full":"",size:24},null,8,["name"]),h[0]||(h[0]=Kl('<div class="max-w-sm rounded-lg p-3 text-sm bg-n-solid-iris text-n-slate-12"><div class="flex gap-1"><div class="w-2 h-2 rounded-full bg-n-iris-10 animate-bounce"></div><div class="w-2 h-2 rounded-full bg-n-iris-10 animate-bounce [animation-delay:0.2s]"></div><div class="w-2 h-2 rounded-full bg-n-iris-10 animate-bounce [animation-delay:0.4s]"></div></div></div>',1))])])):$("",!0)],512))}},LKe={class:"flex flex-col h-full rounded-xl border py-6 border-n-weak text-n-slate-11"},DKe={class:"mb-8 px-6"},PKe={class:"flex justify-between items-center mb-1"},kKe={class:"text-lg font-medium"},BKe={class:"text-sm text-n-slate-11"},UKe={class:"flex items-center mx-6 bg-n-background outline outline-1 outline-n-weak rounded-xl p-3"},FKe=["placeholder"],GKe={class:"text-xs text-n-slate-11 pt-2 text-center"},VKe={__name:"AssistantPlayground",props:{assistantId:{type:Number,required:!0}},setup(e){const{t}=be(),n=j([]),s=j(""),a=j(!1),o=()=>n.value.map(r=>({role:r.sender,content:r.content})),i=()=>{n.value=[],s.value=""};it(()=>e.assistantId,(r,c)=>{c&&r!==c&&i()});const l=async()=>{if(!s.value.trim()||a.value)return;const r={content:s.value,sender:"user",timestamp:new Date().toISOString()};n.value.push(r);const c=s.value;s.value="";try{a.value=!0;const{data:u}=await sR.playground({assistantId:e.assistantId,messageContent:c,messageHistory:o()});n.value.push({content:u.response,sender:"assistant",timestamp:new Date().toISOString()})}catch(u){console.error("Error getting assistant response:",u)}finally{a.value=!1}};return(r,c)=>(p(),E("div",LKe,[m("div",DKe,[m("div",PKe,[m("h3",kKe,I(C(t)("CAPTAIN.PLAYGROUND.HEADER")),1),S(te,{ghost:"",sm:"",slate:"",icon:"i-lucide-rotate-ccw",onClick:i})]),m("p",BKe,I(C(t)("CAPTAIN.PLAYGROUND.DESCRIPTION")),1)]),S(MKe,{messages:n.value,"is-loading":a.value},null,8,["messages","is-loading"]),m("div",UKe,[re(m("input",{"onUpdate:modelValue":c[0]||(c[0]=u=>s.value=u),class:"flex-1 bg-transparent border-none focus:outline-none text-sm mb-0 text-n-slate-12 placeholder:text-n-slate-10",placeholder:C(t)("CAPTAIN.PLAYGROUND.MESSAGE_PLACEHOLDER"),onKeyup:wn(l,["enter"])},null,40,FKe),[[gt,s.value]]),S(te,{ghost:"",sm:"",disabled:!s.value.trim(),icon:"i-lucide-send",onClick:l},null,8,["disabled"])]),m("p",GKe,I(C(t)("CAPTAIN.PLAYGROUND.CREDIT_NOTE")),1)]))}},HKe={class:"flex flex-col h-full"},WKe={__name:"Index",setup(e){const t=wt(),n=y(()=>Number(t.params.assistantId));return(s,a)=>(p(),L(fo,{"show-assistant-switcher":"","show-pagination-footer":!1,"show-know-more":!1,class:"h-full"},{body:Y(()=>[m("div",HKe,[S(VKe,{"assistant-id":n.value,class:"bg-n-solid-1"},null,8,["assistant-id"])])]),_:1}))}},zKe={class:"flex flex-col items-start self-stretch rounded-xl w-full overflow-hidden border border-dashed border-n-strong"},YKe={class:"flex items-center justify-between w-full gap-3 px-4 pb-1 pt-4"},jKe={class:"flex items-center gap-3"},KKe={class:"text-sm font-medium text-n-slate-11"},XKe={class:"flex flex-col items-start divide-y divide-n-strong divide-dashed w-full"},hv={__name:"SuggestedRules",props:{title:{type:String,default:""},items:{type:Array,default:()=>[]}},emits:["add","close"],setup(e,{emit:t}){const n=t,{t:s}=be(),a=()=>{n("add")},o=()=>{n("close")};return(i,l)=>(p(),E("div",zKe,[m("div",YKe,[m("div",jKe,[m("h5",KKe,I(e.title),1),l[0]||(l[0]=m("span",{class:"h-3 w-px bg-n-weak"},null,-1)),S(te,{label:C(s)("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.SUGGESTED.ADD"),ghost:"",xs:"",slate:"",class:"!text-sm !text-n-slate-11 flex-shrink-0",onClick:a},null,8,["label"])]),S(te,{ghost:"",xs:"",slate:"",icon:"i-lucide-x",class:"!text-sm !text-n-slate-11 flex-shrink-0",onClick:o})]),m("div",XKe,[(p(!0),E(ue,null,Ae(e.items,r=>(p(),E("div",{key:r.content,class:"w-full px-4 py-4"},[We(i.$slots,"default",{item:r})]))),128))])]))}},qKe={class:"flex py-3 ltr:pl-3 h-16 rtl:pr-3 ltr:pr-4 rtl:pl-4 items-center gap-3 rounded-xl bg-n-solid-2 outline-1 outline outline-n-container"},KC={__name:"AddNewRulesInput",props:jt({placeholder:{type:String,default:""},label:{type:String,default:""}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:jt(["add"],["update:modelValue"]),setup(e,{emit:t}){const n=t,s=Xt(e,"modelValue"),a=()=>{var o;(o=s.value)!=null&&o.trim()&&(n("add",s.value.trim()),s.value="")};return(o,i)=>(p(),E("div",qKe,[S(dt,{icon:"i-lucide-plus",class:"text-n-slate-10 size-5 flex-shrink-0"}),S(vu,{modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=l=>s.value=l),placeholder:e.placeholder,onKeyup:wn(a,["enter"])},null,8,["modelValue","placeholder"]),S(te,{label:e.label,ghost:"",xs:"",slate:"",class:"!text-sm !text-n-slate-11 flex-shrink-0",onClick:a},null,8,["label"])]))}},ZKe={class:"inline-flex relative"},QKe={key:0,class:"absolute w-[26.5rem] top-9 z-50 ltr:left-0 rtl:right-0 flex flex-col gap-5 bg-n-alpha-3 backdrop-blur-[100px] p-4 rounded-xl border border-n-weak shadow-md"},JKe={class:"flex gap-2 justify-between"},XC={__name:"AddNewRulesDialog",props:jt({placeholder:{type:String,default:""},buttonLabel:{type:String,default:""},confirmLabel:{type:String,default:""},cancelLabel:{type:String,default:""}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:jt(["add"],["update:modelValue"]),setup(e,{emit:t}){const n=t,s=Xt(e,"modelValue"),[a,o]=yn(),i=()=>{var r;(r=s.value)!=null&&r.trim()&&(n("add",s.value.trim()),s.value="",o(!1))},l=()=>{o(!1)};return(r,c)=>re((p(),E("div",ZKe,[S(te,{label:e.buttonLabel,sm:"",slate:"",class:"flex-shrink-0",onClick:c[0]||(c[0]=u=>C(o)(!C(a)))},null,8,["label"]),C(a)?(p(),E("div",QKe,[S(vu,{modelValue:s.value,"onUpdate:modelValue":c[1]||(c[1]=u=>s.value=u),placeholder:e.placeholder,onKeyup:wn(i,["enter"])},null,8,["modelValue","placeholder"]),m("div",JKe,[S(te,{label:e.cancelLabel,sm:"",link:"",slate:"",class:"h-10 hover:!no-underline",onClick:l},null,8,["label"]),S(te,{label:e.confirmLabel,sm:"",onClick:i},null,8,["label"])])])):$("",!0)])),[[C(ms),()=>C(o)(!1)]])}},eXe={class:"absolute top-6 ltr:left-3 rtl:right-3"},tXe={key:1,class:"flex items-center gap-2 text-sm text-n-slate-12"},nXe={class:"flex items-center gap-2"},qC={__name:"RuleCard",props:{id:{type:Number,required:!0},content:{type:String,required:!0},selectable:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1}},emits:["select","hover","edit","delete"],setup(e,{emit:t}){const n=e,s=t,a=y({get:()=>n.isSelected,set:()=>s("select",n.id)}),o=j(!1),i=j(n.content),l=j(n.content);it(()=>n.content,u=>{l.value=u});const r=()=>{o.value=!0,i.value=n.content},c=()=>{o.value=!1,l.value=i.value,s("edit",{id:n.id,content:i.value})};return(u,d)=>(p(),L(ba,{selectable:"",class:"relative [&>div]:!py-5 [&>div]:ltr:!pr-4 [&>div]:rtl:!pl-4",layout:"row",onMouseenter:d[3]||(d[3]=h=>s("hover",!0)),onMouseleave:d[4]||(d[4]=h=>s("hover",!1))},{default:Y(()=>[re(m("div",eXe,[S(kr,{modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=h=>a.value=h)},null,8,["modelValue"])],512),[[rn,e.selectable]]),o.value?(p(),L(vu,{key:0,modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=h=>i.value=h),"focus-on-mount":"",onKeyup:wn(c,["enter"])},null,8,["modelValue"])):(p(),E("span",tXe,I(l.value),1)),m("div",nXe,[S(te,{icon:"i-lucide-pen",slate:"",xs:"",ghost:"",onClick:r}),d[5]||(d[5]=m("span",{class:"w-px h-4 bg-n-weak"},null,-1)),S(te,{icon:"i-lucide-trash",slate:"",xs:"",ghost:"",onClick:d[2]||(d[2]=h=>s("delete",e.id))})])]),_:1}))}},sXe={key:0,class:"flex mt-7 flex-col gap-4"},aXe={class:"flex items-center justify-between w-full"},oXe={class:"text-sm text-n-slate-12"},iXe={class:"flex mt-7 flex-col gap-4"},lXe={class:"flex justify-between items-center"},rXe={key:0,class:"max-w-[22.5rem] w-full min-w-0"},cXe={key:0,class:"mt-1 mb-2"},uXe={class:"text-n-slate-11 text-sm"},dXe={key:1,class:"mt-1 mb-2"},pXe={class:"text-n-slate-11 text-sm"},mXe={key:2,class:"flex flex-col gap-2"},hXe={__name:"Index",setup(e){const{t}=be(),n=wt(),s=rt(),{uiSettings:a,updateUISettings:o}=tn(),i=_e("captainAssistants/getUIFlags"),l=y(()=>Number(n.params.assistantId)),r=y(()=>i.value.fetchingItem),c=y(()=>s.getters["captainAssistants/getRecord"](l.value)),u=j(""),d=j(""),h=j(""),g=y(()=>{var V;return((V=c.value)==null?void 0:V.guardrails)||[]}),f=y(()=>({name:"captain_assistants_settings_index",params:{accountId:n.params.accountId,assistantId:l.value}})),b=y(()=>g.value.map((V,G)=>({id:G,content:V}))),A=[{id:1,content:"Block queries that share or request sensitive personal information (e.g. phone numbers, passwords)."},{id:2,content:"Reject queries that include offensive, discriminatory, or threatening language."},{id:3,content:"Deflect when the assistant is asked for legal or medical diagnosis or treatment."}],v=y(()=>{const V=u.value.trim();return V?bl(b.value,V,["content"]):b.value}),T=y(()=>{var V;return((V=a.value)==null?void 0:V.show_guardrails_suggestions)!==!1}),_=()=>{o({show_guardrails_suggestions:!1})},N=j(new Set),R=j(null),O=V=>{const G=new Set(N.value);G[G.has(V)?"delete":"add"](V),N.value=G},x=(V,G)=>{R.value=V?G:null},w=y(()=>{const V=b.value.length||0;return N.value.size===V&&V>0?t("CAPTAIN.ASSISTANTS.GUARDRAILS.BULK_ACTION.UNSELECT_ALL",{count:V}):t("CAPTAIN.ASSISTANTS.GUARDRAILS.BULK_ACTION.SELECT_ALL",{count:V})}),D=y(()=>t("CAPTAIN.ASSISTANTS.GUARDRAILS.BULK_ACTION.SELECTED",{count:N.value.size})),M=async V=>{await s.dispatch("captainAssistants/update",{id:l.value,assistant:{guardrails:V}})},P=async V=>{try{const G=[...g.value,V];await M(G),ne(t("CAPTAIN.ASSISTANTS.GUARDRAILS.API.ADD.SUCCESS"))}catch{ne(t("CAPTAIN.ASSISTANTS.GUARDRAILS.API.ADD.ERROR"))}},U=async({id:V,content:G})=>{try{const K=[...g.value];K[V]=G,await M(K),ne(t("CAPTAIN.ASSISTANTS.GUARDRAILS.API.UPDATE.SUCCESS"))}catch{ne(t("CAPTAIN.ASSISTANTS.GUARDRAILS.API.UPDATE.ERROR"))}},F=async V=>{try{const G=g.value.filter((K,se)=>se!==V);await M(G),ne(t("CAPTAIN.ASSISTANTS.GUARDRAILS.API.DELETE.SUCCESS"))}catch{ne(t("CAPTAIN.ASSISTANTS.GUARDRAILS.API.DELETE.ERROR"))}},k=async()=>{try{if(N.value.size===0)return;const V=g.value.filter((G,K)=>!N.value.has(K));await M(V),N.value.clear(),ne(t("CAPTAIN.ASSISTANTS.GUARDRAILS.API.DELETE.SUCCESS"))}catch{ne(t("CAPTAIN.ASSISTANTS.GUARDRAILS.API.DELETE.ERROR"))}},B=()=>{o({show_guardrails_suggestions:!1});try{const V=A.map(K=>K.content),G=[...g.value,...V];M(G)}catch{ne(t("CAPTAIN.ASSISTANTS.GUARDRAILS.API.ADD.ERROR"))}};return(V,G)=>(p(),L(fo,{"header-title":V.$t("CAPTAIN.ASSISTANTS.GUARDRAILS.TITLE"),"is-fetching":r.value,"back-url":f.value,"show-know-more":!1,"show-pagination-footer":!1,"show-assistant-switcher":!1},{body:Y(()=>[S(rr,{heading:V.$t("CAPTAIN.ASSISTANTS.GUARDRAILS.TITLE"),description:V.$t("CAPTAIN.ASSISTANTS.GUARDRAILS.DESCRIPTION")},null,8,["heading","description"]),T.value?(p(),E("div",sXe,[S(hv,{title:V.$t("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.SUGGESTED.TITLE"),items:A,onAdd:B,onClose:_},{default:Y(({item:K})=>[m("div",aXe,[m("span",oXe,I(K.content),1),S(te,{label:V.$t("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.SUGGESTED.ADD_SINGLE"),ghost:"",xs:"",slate:"",class:"!text-sm !text-n-slate-11 flex-shrink-0",onClick:se=>P(K.content)},null,8,["label","onClick"])])]),_:1},8,["title"])])):$("",!0),m("div",iXe,[m("div",lXe,[S(Br,{modelValue:N.value,"onUpdate:modelValue":G[1]||(G[1]=K=>N.value=K),"all-items":b.value,"select-all-label":w.value,"selected-count-label":D.value,"delete-label":V.$t("CAPTAIN.ASSISTANTS.GUARDRAILS.BULK_ACTION.BULK_DELETE_BUTTON"),onBulkDelete:k},{"default-actions":Y(()=>[S(XC,{modelValue:h.value,"onUpdate:modelValue":G[0]||(G[0]=K=>h.value=K),placeholder:C(t)("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.NEW.PLACEHOLDER"),"button-label":C(t)("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.NEW.TITLE"),"confirm-label":C(t)("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.NEW.CREATE"),"cancel-label":C(t)("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.NEW.CANCEL"),onAdd:P},null,8,["modelValue","placeholder","button-label","confirm-label","cancel-label"])]),_:1},8,["modelValue","all-items","select-all-label","selected-count-label","delete-label"]),b.value.length&&N.value.size===0?(p(),E("div",rXe,[S(Tt,{modelValue:u.value,"onUpdate:modelValue":G[2]||(G[2]=K=>u.value=K),placeholder:C(t)("CAPTAIN.ASSISTANTS.GUARDRAILS.LIST.SEARCH_PLACEHOLDER")},null,8,["modelValue","placeholder"])])):$("",!0)]),b.value.length===0?(p(),E("div",cXe,[m("span",uXe,I(C(t)("CAPTAIN.ASSISTANTS.GUARDRAILS.EMPTY_MESSAGE")),1)])):v.value.length===0?(p(),E("div",dXe,[m("span",pXe,I(C(t)("CAPTAIN.ASSISTANTS.GUARDRAILS.SEARCH_EMPTY_MESSAGE")),1)])):(p(),E("div",mXe,[(p(!0),E(ue,null,Ae(v.value,K=>(p(),L(qC,{id:K.id,key:K.id,content:K.content,"is-selected":N.value.has(K.id),selectable:R.value===K.id||N.value.size>0,onSelect:O,onEdit:U,onDelete:F,onHover:se=>x(se,K.id)},null,8,["id","content","is-selected","selectable","onHover"]))),128))])),S(KC,{modelValue:d.value,"onUpdate:modelValue":G[3]||(G[3]=K=>d.value=K),placeholder:C(t)("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.SUGGESTED.PLACEHOLDER"),label:C(t)("CAPTAIN.ASSISTANTS.GUARDRAILS.ADD.SUGGESTED.SAVE"),onAdd:P},null,8,["modelValue","placeholder","label"])])]),_:1},8,["header-title","is-fetching","back-url"]))}},fXe={key:0,class:"flex mt-7 flex-col gap-4"},gXe={class:"flex items-center justify-between w-full"},_Xe={class:"text-sm text-n-slate-12"},vXe={class:"flex mt-7 flex-col gap-4"},EXe={class:"flex justify-between items-center"},bXe={key:0,class:"max-w-[22.5rem] w-full min-w-0"},TXe={key:0,class:"mt-1 mb-2"},SXe={class:"text-n-slate-11 text-sm"},AXe={key:1,class:"mt-1 mb-2"},yXe={class:"text-n-slate-11 text-sm"},IXe={key:2,class:"flex flex-col gap-2"},CXe={__name:"Index",setup(e){const{t}=be(),n=wt(),s=rt(),{uiSettings:a,updateUISettings:o}=tn(),i=_e("captainAssistants/getUIFlags"),l=y(()=>Number(n.params.assistantId)),r=y(()=>i.value.fetchingItem),c=y(()=>s.getters["captainAssistants/getRecord"](l.value)),u=j(""),d=j(""),h=j(""),g=y(()=>{var V;return((V=c.value)==null?void 0:V.response_guidelines)||[]}),f=y(()=>({name:"captain_assistants_settings_index",params:{accountId:n.params.accountId,assistantId:l.value}})),b=y(()=>g.value.map((V,G)=>({id:G,content:V}))),A=[{id:1,content:"Block queries that share or request sensitive personal information (e.g. phone numbers, passwords)."},{id:2,content:"Reject queries that include offensive, discriminatory, or threatening language."},{id:3,content:"Deflect when the assistant is asked for legal or medical diagnosis or treatment."}],v=y(()=>{const V=u.value.trim();return V?bl(b.value,V,["content"]):b.value}),T=y(()=>{var V;return((V=a.value)==null?void 0:V.show_response_guidelines_suggestions)!==!1}),_=()=>{o({show_response_guidelines_suggestions:!1})},N=j(new Set),R=j(null),O=V=>{const G=new Set(N.value);G[G.has(V)?"delete":"add"](V),N.value=G},x=(V,G)=>{R.value=V?G:null},w=y(()=>{const V=b.value.length||0;return N.value.size===V&&V>0?t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.BULK_ACTION.UNSELECT_ALL",{count:V}):t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.BULK_ACTION.SELECT_ALL",{count:V})}),D=y(()=>t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.BULK_ACTION.SELECTED",{count:N.value.size})),M=async V=>{await s.dispatch("captainAssistants/update",{id:l.value,assistant:{response_guidelines:V}})},P=async V=>{try{const G=[...g.value,V];await M(G),ne(t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.ADD.SUCCESS"))}catch{ne(t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.ADD.ERROR"))}},U=async({id:V,content:G})=>{try{const K=[...g.value];K[V]=G,await M(K),ne(t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.UPDATE.SUCCESS"))}catch{ne(t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.UPDATE.ERROR"))}},F=async V=>{try{const G=g.value.filter((K,se)=>se!==V);await M(G),ne(t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.DELETE.SUCCESS"))}catch{ne(t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.DELETE.ERROR"))}},k=async()=>{try{if(N.value.size===0)return;const V=g.value.filter((G,K)=>!N.value.has(K));await M(V),N.value.clear(),ne(t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.DELETE.SUCCESS"))}catch{ne(t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.DELETE.ERROR"))}},B=async()=>{o({show_response_guidelines_suggestions:!1});try{const V=A.map(K=>K.content),G=[...g.value,...V];await M(G),ne(t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.ADD.SUCCESS"))}catch{ne(t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.API.ADD.ERROR"))}};return(V,G)=>(p(),L(fo,{"header-title":V.$t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.TITLE"),"is-fetching":r.value,"back-url":f.value,"show-know-more":!1,"show-pagination-footer":!1,"show-assistant-switcher":!1},{body:Y(()=>[S(rr,{heading:C(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.TITLE"),description:C(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.DESCRIPTION")},null,8,["heading","description"]),T.value?(p(),E("div",fXe,[S(hv,{title:C(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.TITLE"),items:A,onAdd:B,onClose:_},{default:Y(({item:K})=>[m("div",gXe,[m("span",_Xe,I(K.content),1),S(te,{label:C(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.SUGGESTED.ADD_SINGLE"),ghost:"",xs:"",slate:"",class:"!text-sm !text-n-slate-11 flex-shrink-0",onClick:se=>P(K.content)},null,8,["label","onClick"])])]),_:1},8,["title"])])):$("",!0),m("div",vXe,[m("div",EXe,[S(Br,{modelValue:N.value,"onUpdate:modelValue":G[1]||(G[1]=K=>N.value=K),"all-items":b.value,"select-all-label":w.value,"selected-count-label":D.value,"delete-label":V.$t("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.BULK_ACTION.BULK_DELETE_BUTTON"),onBulkDelete:k},{"default-actions":Y(()=>[S(XC,{modelValue:h.value,"onUpdate:modelValue":G[0]||(G[0]=K=>h.value=K),placeholder:C(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.NEW.PLACEHOLDER"),"button-label":C(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.NEW.TITLE"),"confirm-label":C(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.NEW.CREATE"),"cancel-label":C(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.NEW.CANCEL"),onAdd:P},null,8,["modelValue","placeholder","button-label","confirm-label","cancel-label"])]),_:1},8,["modelValue","all-items","select-all-label","selected-count-label","delete-label"]),b.value.length&&N.value.size===0?(p(),E("div",bXe,[S(Tt,{modelValue:u.value,"onUpdate:modelValue":G[2]||(G[2]=K=>u.value=K),placeholder:C(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.LIST.SEARCH_PLACEHOLDER")},null,8,["modelValue","placeholder"])])):$("",!0)]),b.value.length===0?(p(),E("div",TXe,[m("span",SXe,I(C(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.EMPTY_MESSAGE")),1)])):v.value.length===0?(p(),E("div",AXe,[m("span",yXe,I(C(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.SEARCH_EMPTY_MESSAGE")),1)])):(p(),E("div",IXe,[(p(!0),E(ue,null,Ae(v.value,K=>(p(),L(qC,{id:K.id,key:K.id,content:K.content,"is-selected":N.value.has(K.id),selectable:R.value===K.id||N.value.size>0,onSelect:O,onHover:se=>x(se,K.id),onEdit:U,onDelete:F},null,8,["id","content","is-selected","selectable","onHover"]))),128))])),S(KC,{modelValue:d.value,"onUpdate:modelValue":G[3]||(G[3]=K=>d.value=K),placeholder:C(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.SUGGESTED.PLACEHOLDER"),label:C(t)("CAPTAIN.ASSISTANTS.RESPONSE_GUIDELINES.ADD.SUGGESTED.SAVE"),onAdd:P},null,8,["modelValue","placeholder","label"])])]),_:1},8,["header-title","is-fetching","back-url"]))}},NXe={class:"absolute top-[1.125rem] ltr:left-3 rtl:right-3"},OXe={key:0,class:"flex flex-col w-full"},RXe={class:"flex items-start justify-between w-full gap-2"},xXe={class:"flex flex-col items-start"},wXe={class:"text-sm text-n-slate-12 font-medium"},$Xe={class:"text-sm text-n-slate-11 mt-2"},MXe={class:"flex items-center gap-2"},LXe={key:0,class:"text-sm text-n-slate-11 font-medium mb-1"},DXe={key:1,class:"overflow-hidden flex flex-col gap-4 w-full"},PXe={class:"flex items-center gap-3"},kXe='[&_a[href^="tool://"]]:text-n-iris-11 [&_a:not([href^="tool://"])]:text-n-slate-12 [&_a]:pointer-events-none [&_a]:cursor-default',BXe={__name:"ScenariosCard",props:{id:{type:Number,required:!0},title:{type:String,required:!0},description:{type:String,required:!0},instruction:{type:String,required:!0},tools:{type:Array,default:()=>[]},selectable:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1}},emits:["select","hover","delete","update"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),{formatMessage:o}=sa(),i=y({get:()=>n.isSelected,set:()=>s("select",n.id)}),l=gn({id:"",title:"",description:"",instruction:""}),r=j(),[c,u]=yn(),[d,h]=yn(),{height:g}=dr(r),f=y(()=>g.value>160),b=()=>{Object.assign(l,{id:n.id,title:n.title,description:n.description,instruction:n.instruction,tools:n.tools}),u(!0)},A={title:{required:Ye,minLength:en(1)},description:{required:Ye},instruction:{required:Ye}},v=bt(A,l),T=y(()=>v.value.title.$error?a("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.TITLE.ERROR"):""),_=y(()=>v.value.description.$error?a("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.DESCRIPTION.ERROR"):""),N=()=>{v.value.$touch(),!v.value.$invalid&&(s("update",{...l}),u(!1))},R=y(()=>v.value.instruction.$error?a("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.INSTRUCTION.ERROR"):""),O=x=>()=>On("p",{class:`text-sm text-n-slate-12 py-4 mb-0 prose prose-sm min-w-0 break-words max-w-none ${kXe}`,innerHTML:x});return(x,w)=>(p(),L(ba,{selectable:"",class:ae(["relative [&>div]:!py-4",{"[&>div]:ltr:!pr-4 [&>div]:rtl:!pl-4":!C(c),"[&>div]:ltr:!pr-10 [&>div]:rtl:!pl-10":C(c)}]),layout:"row",onMouseenter:w[7]||(w[7]=D=>s("hover",!0)),onMouseleave:w[8]||(w[8]=D=>s("hover",!1))},{default:Y(()=>{var D,M;return[re(m("div",NXe,[S(kr,{modelValue:i.value,"onUpdate:modelValue":w[0]||(w[0]=P=>i.value=P)},null,8,["modelValue"])],512),[[rn,e.selectable&&!C(c)]]),C(c)?(p(),E("div",DXe,[S(Tt,{modelValue:l.title,"onUpdate:modelValue":w[3]||(w[3]=P=>l.title=P),label:C(a)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.TITLE.LABEL"),placeholder:C(a)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.TITLE.PLACEHOLDER"),message:T.value,"message-type":T.value?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),S(lo,{modelValue:l.description,"onUpdate:modelValue":w[4]||(w[4]=P=>l.description=P),label:C(a)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.DESCRIPTION.LABEL"),placeholder:C(a)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.DESCRIPTION.PLACEHOLDER"),message:_.value,"message-type":_.value?"error":"info","show-character-count":""},null,8,["modelValue","label","placeholder","message","message-type"]),S(Ks,{modelValue:l.instruction,"onUpdate:modelValue":w[5]||(w[5]=P=>l.instruction=P),label:C(a)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.INSTRUCTION.LABEL"),placeholder:C(a)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.INSTRUCTION.PLACEHOLDER"),message:R.value,"message-type":R.value?"error":"info","show-character-count":!1,"enable-captain-tools":""},null,8,["modelValue","label","placeholder","message","message-type"]),m("div",PXe,[S(te,{faded:"",slate:"",sm:"",label:C(a)("CAPTAIN.ASSISTANTS.SCENARIOS.UPDATE.CANCEL"),onClick:w[6]||(w[6]=P=>C(u)(!1))},null,8,["label"]),S(te,{sm:"",label:C(a)("CAPTAIN.ASSISTANTS.SCENARIOS.UPDATE.UPDATE"),onClick:N},null,8,["label"])])])):(p(),E("div",OXe,[m("div",RXe,[m("div",xXe,[m("span",wXe,I(e.title),1),m("span",$Xe,I(e.description),1)]),m("div",MXe,[S(te,{icon:"i-lucide-pen",slate:"",xs:"",ghost:"",onClick:b}),w[9]||(w[9]=m("span",{class:"w-px h-4 bg-n-weak"},null,-1)),S(te,{icon:"i-lucide-trash",slate:"",xs:"",ghost:"",onClick:w[1]||(w[1]=P=>s("delete",e.id))})])]),m("div",{class:ae(["relative overflow-hidden transition-all duration-300 ease-in-out group/expandable",{"cursor-pointer":f.value}]),style:Zt({maxHeight:C(d)?`${C(g)}px`:"10rem"}),onClick:w[2]||(w[2]=P=>f.value?C(h)():null)},[m("div",{ref_key:"instructionContentRef",ref:r},[(p(),L(ds(O(C(o)(e.instruction,!1)))))],512),m("div",{class:ae(["absolute bottom-0 w-full flex items-end justify-center text-xs text-n-slate-11 bg-gradient-to-t h-40 from-n-solid-2 via-n-solid-2 via-10% to-transparent transition-all duration-500 ease-in-out px-2 py-1 rounded pointer-events-none",{"visible opacity-100":!C(d),"invisible opacity-0":C(d)||!f.value}])},[S(dt,{icon:"i-lucide-chevron-down",class:"text-n-slate-7 mb-4 size-4 group-hover/expandable:text-n-slate-11 transition-colors duration-200"})],2)],6),(D=e.tools)!=null&&D.length?(p(),E("span",LXe,I(C(a)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.SUGGESTED.TOOLS_USED"))+" "+I((M=e.tools)==null?void 0:M.map(P=>`@${P}`).join(", ")),1)):$("",!0)]))]}),_:1},8,["class"]))}},UXe={class:"inline-flex relative"},FXe={key:0,class:"w-[31.25rem] absolute top-10 ltr:left-0 rtl:right-0 bg-n-alpha-3 backdrop-blur-[100px] p-6 rounded-xl border border-n-weak shadow-md flex flex-col gap-6 z-50"},GXe={class:"text-base font-medium text-n-slate-12"},VXe={class:"flex flex-col gap-4"},HXe={class:"flex items-center justify-between w-full gap-3"},WXe={__name:"AddNewScenariosDialog",emits:["add"],setup(e,{emit:t}){const n=t,{t:s}=be(),[a,o]=yn(),i=gn({id:"",title:"",description:"",instruction:""}),l={title:{required:Ye,minLength:en(1)},description:{required:Ye},instruction:{required:Ye}},r=bt(l,i),c=y(()=>r.value.title.$error?s("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.TITLE.ERROR"):""),u=y(()=>r.value.description.$error?s("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.DESCRIPTION.ERROR"):""),d=y(()=>r.value.instruction.$error?s("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.INSTRUCTION.ERROR"):""),h=()=>{Object.assign(i,{id:"",title:"",description:"",instruction:""})},g=async()=>{r.value.$touch(),!r.value.$invalid&&(await n("add",i),h(),o(!1))},f=()=>{o(!1)};return(b,A)=>re((p(),E("div",UXe,[S(te,{label:C(s)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.CREATE"),sm:"",slate:"",class:"flex-shrink-0",onClick:A[0]||(A[0]=v=>C(o)(!C(a)))},null,8,["label"]),C(a)?(p(),E("div",FXe,[m("h3",GXe,I(C(s)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.TITLE")),1),m("div",VXe,[S(Tt,{modelValue:i.title,"onUpdate:modelValue":A[1]||(A[1]=v=>i.title=v),label:C(s)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.TITLE.LABEL"),placeholder:C(s)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.TITLE.PLACEHOLDER"),message:c.value,"message-type":c.value?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),S(lo,{modelValue:i.description,"onUpdate:modelValue":A[2]||(A[2]=v=>i.description=v),label:C(s)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.DESCRIPTION.LABEL"),placeholder:C(s)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.DESCRIPTION.PLACEHOLDER"),message:u.value,"message-type":u.value?"error":"info","show-character-count":""},null,8,["modelValue","label","placeholder","message","message-type"]),S(Ks,{modelValue:i.instruction,"onUpdate:modelValue":A[3]||(A[3]=v=>i.instruction=v),label:C(s)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.INSTRUCTION.LABEL"),placeholder:C(s)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.INSTRUCTION.PLACEHOLDER"),message:d.value,"message-type":d.value?"error":"info","show-character-count":!1,"enable-captain-tools":""},null,8,["modelValue","label","placeholder","message","message-type"])]),m("div",HXe,[S(te,{variant:"faded",color:"slate",label:C(s)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.CANCEL"),class:"w-full bg-n-alpha-2 !text-n-blue-text hover:bg-n-alpha-3",onClick:f},null,8,["label"]),S(te,{label:C(s)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.NEW.FORM.CREATE"),class:"w-full",onClick:g},null,8,["label"])])])):$("",!0)])),[[C(ms),()=>C(o)(!1)]])}},zXe={key:0,class:"flex mt-7 flex-col gap-4"},YXe={class:"flex items-center gap-3 justify-between"},jXe={class:"text-sm text-n-slate-12"},KXe={class:"flex flex-col"},XXe={class:"text-sm text-n-slate-11 mt-2"},qXe={class:"text-sm text-n-slate-11 font-medium mb-1"},ZXe={class:"flex mt-7 flex-col gap-4"},QXe={class:"flex justify-between items-center"},JXe={key:0,class:"max-w-[22.5rem] w-full min-w-0"},eqe={key:0,class:"mt-1 mb-2"},tqe={class:"text-n-slate-11 text-sm"},nqe={key:1,class:"mt-1 mb-2"},sqe={class:"text-n-slate-11 text-sm"},aqe={key:2,class:"flex flex-col gap-2"},oqe='[&_a[href^="tool://"]]:text-n-iris-11 [&_a:not([href^="tool://"])]:text-n-slate-12 [&_a]:pointer-events-none [&_a]:cursor-default',iqe={__name:"Index",setup(e){const{t}=be(),n=wt(),s=rt(),{uiSettings:a,updateUISettings:o}=tn(),{formatMessage:i}=sa(),l=y(()=>Number(n.params.assistantId)),r=_e("captainScenarios/getUIFlags"),c=y(()=>r.value.fetchingList),u=_e("captainScenarios/getRecords"),d=j(""),h=F=>()=>On("span",{class:`text-sm text-n-slate-12 py-4 prose prose-sm min-w-0 break-words ${oqe}`,innerHTML:F}),g=[{id:1,title:"Prospective Buyer",description:"Handle customers who are showing interest in purchasing a license",instruction:`If someone is interested in purchasing a license, ask them for following:

1. How many licenses are they willing to purchase?
2. Are they migrating from another platform?
. Once these details are collected, do the following steps
1. add a private note to with the information you collected using [Add Private Note](tool://add_private_note)
2. Add label "sales" to the contact using [Add Label to Conversation](tool://add_label_to_conversation)
3. Reply saying "one of us will reach out soon" and provide an estimated timeline for the response and [Handoff to Human](tool://handoff)`,tools:["add_private_note","add_label_to_conversation","handoff"]}],f=y(()=>{const F=d.value.trim(),k=u.value;return F?bl(k,F,["title","description","instruction"]):k}),b=y(()=>{var F;return((F=a.value)==null?void 0:F.show_scenarios_suggestions)!==!1}),A=()=>{o({show_scenarios_suggestions:!1})},v=j(new Set),T=j(null),_=F=>{const k=new Set(v.value);k[k.has(F)?"delete":"add"](F),v.value=k},N=y(()=>{const F=u.value.length||0;return v.value.size===F&&F>0?t("CAPTAIN.ASSISTANTS.SCENARIOS.BULK_ACTION.UNSELECT_ALL",{count:F}):t("CAPTAIN.ASSISTANTS.SCENARIOS.BULK_ACTION.SELECT_ALL",{count:F})}),R=y(()=>t("CAPTAIN.ASSISTANTS.SCENARIOS.BULK_ACTION.SELECTED",{count:v.value.size})),O=(F,k)=>{T.value=F?k:null},x=F=>[...new Set([...(F==null?void 0:F.matchAll(/\(tool:\/\/([^)]+)\)/g))??[]].map(k=>k[1]))],w=async F=>{var k;try{await s.dispatch("captainScenarios/update",{id:F.id,assistantId:l.value,...F,tools:x(F.instruction)}),ne(t("CAPTAIN.ASSISTANTS.SCENARIOS.API.UPDATE.SUCCESS"))}catch(B){const V=((k=B==null?void 0:B.response)==null?void 0:k.message)||t("CAPTAIN.ASSISTANTS.SCENARIOS.API.UPDATE.ERROR");ne(V)}},D=async F=>{var k;try{await s.dispatch("captainScenarios/delete",{id:F,assistantId:l.value}),ne(t("CAPTAIN.ASSISTANTS.SCENARIOS.API.DELETE.SUCCESS"))}catch(B){const V=((k=B==null?void 0:B.response)==null?void 0:k.message)||t("CAPTAIN.ASSISTANTS.SCENARIOS.API.DELETE.ERROR");ne(V)}},M=async F=>{const k=F||Array.from(v.value);await Promise.all(k.map(B=>s.dispatch("captainScenarios/delete",{id:B,assistantId:l.value}))),v.value=new Set,ne(t("CAPTAIN.ASSISTANTS.SCENARIOS.API.DELETE.SUCCESS"))},P=async F=>{var k;try{await s.dispatch("captainScenarios/create",{assistantId:l.value,...F,tools:x(F.instruction)}),ne(t("CAPTAIN.ASSISTANTS.SCENARIOS.API.ADD.SUCCESS"))}catch(B){const V=((k=B==null?void 0:B.response)==null?void 0:k.message)||t("CAPTAIN.ASSISTANTS.SCENARIOS.API.ADD.ERROR");ne(V)}},U=async()=>{var F;try{g.forEach(async k=>{await s.dispatch("captainScenarios/create",{assistantId:l.value,...k})}),ne(t("CAPTAIN.ASSISTANTS.SCENARIOS.API.ADD.SUCCESS"))}catch(k){const B=((F=k==null?void 0:k.response)==null?void 0:F.message)||t("CAPTAIN.ASSISTANTS.SCENARIOS.API.ADD.ERROR");ne(B)}};return lt(()=>{s.dispatch("captainScenarios/get",{assistantId:l.value}),s.dispatch("captainTools/getTools")}),(F,k)=>(p(),L(fo,{"header-title":F.$t("CAPTAIN.DOCUMENTS.HEADER"),"is-fetching":c.value,"show-know-more":!1,"show-pagination-footer":!1},{body:Y(()=>[S(rr,{heading:F.$t("CAPTAIN.ASSISTANTS.SCENARIOS.TITLE"),description:F.$t("CAPTAIN.ASSISTANTS.SCENARIOS.DESCRIPTION")},null,8,["heading","description"]),b.value?(p(),E("div",zXe,[S(hv,{title:F.$t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.SUGGESTED.TITLE"),items:g,onClose:A,onAdd:U},{default:Y(({item:B})=>{var V;return[m("div",YXe,[m("span",jXe,I(B.title),1),S(te,{label:F.$t("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.SUGGESTED.ADD_SINGLE"),ghost:"",xs:"",slate:"",class:"!text-sm !text-n-slate-11 flex-shrink-0",onClick:G=>P(B)},null,8,["label","onClick"])]),m("div",KXe,[m("span",XXe,I(B.description),1),(p(),L(ds(h(C(i)(B.instruction,!1))))),m("span",qXe,I(C(t)("CAPTAIN.ASSISTANTS.SCENARIOS.ADD.SUGGESTED.TOOLS_USED"))+" "+I((V=B.tools)==null?void 0:V.map(G=>`@${G}`).join(", ")),1)])]}),_:1},8,["title"])])):$("",!0),m("div",ZXe,[m("div",QXe,[S(Br,{modelValue:v.value,"onUpdate:modelValue":k[0]||(k[0]=B=>v.value=B),"all-items":C(u),"select-all-label":N.value,"selected-count-label":R.value,"delete-label":F.$t("CAPTAIN.ASSISTANTS.SCENARIOS.BULK_ACTION.BULK_DELETE_BUTTON"),onBulkDelete:M},{"default-actions":Y(()=>[S(WXe,{onAdd:P})]),_:1},8,["modelValue","all-items","select-all-label","selected-count-label","delete-label"]),C(u).length&&v.value.size===0?(p(),E("div",JXe,[S(Tt,{modelValue:d.value,"onUpdate:modelValue":k[1]||(k[1]=B=>d.value=B),placeholder:C(t)("CAPTAIN.ASSISTANTS.SCENARIOS.LIST.SEARCH_PLACEHOLDER")},null,8,["modelValue","placeholder"])])):$("",!0)]),C(u).length===0?(p(),E("div",eqe,[m("span",tqe,I(C(t)("CAPTAIN.ASSISTANTS.SCENARIOS.EMPTY_MESSAGE")),1)])):f.value.length===0?(p(),E("div",nqe,[m("span",sqe,I(C(t)("CAPTAIN.ASSISTANTS.SCENARIOS.SEARCH_EMPTY_MESSAGE")),1)])):(p(),E("div",aqe,[(p(!0),E(ue,null,Ae(f.value,B=>(p(),L(BXe,{id:B.id,key:B.id,title:B.title,description:B.description,instruction:B.instruction,tools:B.tools,"is-selected":v.value.has(B.id),selectable:T.value===B.id||v.value.size>0,onSelect:_,onDelete:V=>D(B.id),onUpdate:w,onHover:V=>O(V,B.id)},null,8,["id","title","description","instruction","tools","is-selected","selectable","onDelete","onHover"]))),128))]))])]),_:1},8,["header-title","is-fetching"]))}},ZC="PDF:",lqe=/_\d{14}(?=\.pdf$)/,QC=e=>e?e.startsWith(ZC):!1,rqe=e=>e?QC(e)?e.substring(ZC.length).replace(lqe,""):e:"",cqe={class:"flex gap-1 justify-between w-full"},uqe={class:"text-base text-n-slate-12 line-clamp-1"},dqe={class:"flex gap-2 items-center"},pqe={class:"flex relative items-center group"},mqe={class:"flex gap-4 justify-between items-center w-full"},hqe={class:"flex gap-1 items-center text-sm truncate shrink-0 text-n-slate-11"},fqe={class:"flex flex-1 gap-1 justify-start items-center text-sm truncate text-n-slate-11"},gqe={class:"truncate"},_qe={class:"text-sm shrink-0 text-n-slate-11 line-clamp-1"},JC={__name:"DocumentCard",props:{id:{type:Number,required:!0},name:{type:String,default:""},assistant:{type:Object,default:()=>({})},externalLink:{type:String,required:!0},createdAt:{type:Number,required:!0}},emits:["action"],setup(e,{emit:t}){const n=e,s=t,{checkPermissions:a}=Cl(),{t:o}=be(),[i,l]=yn(),r=y(()=>{const g=[{label:o("CAPTAIN.DOCUMENTS.OPTIONS.VIEW_RELATED_RESPONSES"),value:"viewRelatedQuestions",action:"viewRelatedQuestions",icon:"i-ph-tree-view-duotone"}];return a(["administrator"])&&g.push({label:o("CAPTAIN.DOCUMENTS.OPTIONS.DELETE_DOCUMENT"),value:"delete",action:"delete",icon:"i-lucide-trash"}),g}),c=y(()=>us(n.createdAt)),u=y(()=>rqe(n.externalLink)),d=y(()=>QC(n.externalLink)?"i-ph-file-pdf":"i-ph-link-simple"),h=({action:g,value:f})=>{l(!1),s("action",{action:g,value:f,id:n.id})};return(g,f)=>{const b=Qe("on-clickaway");return p(),L(ba,null,{default:Y(()=>{var A;return[m("div",cqe,[m("span",uqe,I(e.name),1),m("div",dqe,[re((p(),E("div",pqe,[S(te,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:f[0]||(f[0]=v=>C(l)())}),C(i)?(p(),L(qs,{key:0,"menu-items":r.value,class:"top-full mt-1 ltr:right-0 rtl:left-0 xl:ltr:right-0 xl:rtl:left-0",onAction:f[1]||(f[1]=v=>h(v))},null,8,["menu-items"])):$("",!0)])),[[b,()=>C(l)(!1)]])])]),m("div",mqe,[m("span",hqe,[f[2]||(f[2]=m("i",{class:"i-woot-captain"},null,-1)),xe(" "+I(((A=e.assistant)==null?void 0:A.name)||""),1)]),m("span",fqe,[m("i",{class:ae([d.value,"shrink-0"])},null,2),m("span",gqe,I(u.value),1)]),m("div",_qe,I(c.value),1)])]}),_:1})}}},vqe={class:"absolute top-7 ltr:left-3 rtl:right-3"},Eqe={class:"flex relative justify-between w-full gap-1"},bqe={class:"text-base text-n-slate-12 line-clamp-1"},Tqe={key:0,class:"flex items-center gap-2"},Sqe={class:"text-n-slate-11 text-sm line-clamp-5"},Aqe={key:0,class:"flex items-start justify-between flex-col-reverse md:flex-row gap-3"},yqe={class:"flex items-center gap-2 sm:gap-5 w-full"},Iqe={class:"inline-flex items-center gap-3 min-w-0"},Cqe={key:0,class:"text-sm shrink-0 truncate text-n-slate-11 inline-flex items-center gap-1"},Nqe={key:1,class:"text-sm text-n-slate-11 grid grid-cols-[auto_1fr] items-center gap-1 min-w-0"},Oqe=["title"],Rqe=["title"],xqe={class:"shrink-0 text-sm text-n-slate-11 line-clamp-1 inline-flex items-center gap-1"},sm={__name:"ResponseCard",props:{id:{type:Number,required:!0},question:{type:String,required:!0},answer:{type:String,required:!0},compact:{type:Boolean,default:!1},status:{type:String,default:"approved"},documentable:{type:Object,default:null},assistant:{type:Object,default:()=>({})},updatedAt:{type:Number,required:!0},createdAt:{type:Number,required:!0},isSelected:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},showMenu:{type:Boolean,default:!0},showActions:{type:Boolean,default:!1}},emits:["action","navigate","select","hover"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),[o,i]=yn(),l=y({get:()=>n.isSelected,set:()=>s("select",n.id)}),r=y(()=>n.status==="pending"?[{label:a("CAPTAIN.RESPONSES.OPTIONS.APPROVE"),value:"approve",action:"approve",icon:"i-lucide-circle-check-big"}]:[]),c=y(()=>[...r.value,{label:a("CAPTAIN.RESPONSES.OPTIONS.EDIT_RESPONSE"),value:"edit",action:"edit",icon:"i-lucide-pencil-line"},{label:a("CAPTAIN.RESPONSES.OPTIONS.DELETE_RESPONSE"),value:"delete",action:"delete",icon:"i-lucide-trash"}]),u=y(()=>us(n.updatedAt||n.createdAt)),d=({action:g,value:f})=>{i(!1),s("action",{action:g,value:f,id:n.id})},h=()=>{s("navigate",{id:n.documentable.id,type:n.documentable.type})};return(g,f)=>{const b=Qe("on-clickaway");return p(),L(ba,{selectable:"",class:ae(["relative",{"rounded-md":e.compact}]),onMouseenter:f[6]||(f[6]=A=>s("hover",!0)),onMouseleave:f[7]||(f[7]=A=>s("hover",!1))},{default:Y(()=>{var A;return[re(m("div",vqe,[S(kr,{modelValue:l.value,"onUpdate:modelValue":f[0]||(f[0]=v=>l.value=v)},null,8,["modelValue"])],512),[[rn,e.selectable]]),m("div",Eqe,[m("span",bqe,I(e.question),1),!e.compact&&e.showMenu?(p(),E("div",Tqe,[re((p(),L(js,{permissions:["administrator"],class:"relative flex items-center group"},{default:Y(()=>[S(te,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:f[1]||(f[1]=v=>C(i)())}),C(o)?(p(),L(qs,{key:0,"menu-items":c.value,class:"mt-1 ltr:right-0 rtl:right-0 top-full",onAction:f[2]||(f[2]=v=>d(v))},null,8,["menu-items"])):$("",!0)]),_:1})),[[b,()=>C(i)(!1)]])])):$("",!0)]),m("span",Sqe,I(e.answer),1),e.compact?$("",!0):(p(),E("div",Aqe,[e.showActions?(p(),L(js,{key:0,permissions:["administrator"]},{default:Y(()=>[m("div",yqe,[e.status==="pending"?(p(),L(te,{key:0,label:g.$t("CAPTAIN.RESPONSES.OPTIONS.APPROVE"),icon:"i-lucide-circle-check-big",sm:"",link:"",class:"hover:!no-underline",onClick:f[3]||(f[3]=v=>d({action:"approve",value:"approve"}))},null,8,["label"])):$("",!0),S(te,{label:g.$t("CAPTAIN.RESPONSES.OPTIONS.EDIT_RESPONSE"),icon:"i-lucide-pencil-line",sm:"",slate:"",link:"",class:"hover:!no-underline",onClick:f[4]||(f[4]=v=>d({action:"edit",value:"edit"}))},null,8,["label"]),S(te,{label:g.$t("CAPTAIN.RESPONSES.OPTIONS.DELETE_RESPONSE"),icon:"i-lucide-trash",sm:"",ruby:"",link:"",class:"hover:!no-underline",onClick:f[5]||(f[5]=v=>d({action:"delete",value:"delete"}))},null,8,["label"])])]),_:1})):$("",!0),m("div",{class:ae(["flex items-center gap-3",{"justify-between w-full":!e.showActions}])},[m("div",Iqe,[e.status==="approved"?(p(),E("span",Cqe,[S(dt,{icon:"i-woot-captain",class:"size-3.5"}),xe(" "+I(((A=e.assistant)==null?void 0:A.name)||""),1)])):$("",!0),e.documentable?(p(),E("div",Nqe,[e.documentable.type==="Captain::Document"?(p(),L(dt,{key:0,icon:"i-ph-files-light",class:"size-3.5"})):e.documentable.type==="User"?(p(),L(dt,{key:1,icon:"i-ph-user-circle-plus",class:"size-3.5"})):e.documentable.type==="Conversation"?(p(),L(dt,{key:2,icon:"i-ph-chat-circle-dots",class:"size-3.5"})):$("",!0),e.documentable.type==="Captain::Document"?(p(),E("span",{key:3,class:"truncate",title:e.documentable.name},I(e.documentable.name),9,Oqe)):e.documentable.type==="User"?(p(),E("span",{key:4,class:"truncate",title:e.documentable.available_name},I(e.documentable.available_name),9,Rqe)):e.documentable.type==="Conversation"?(p(),E("span",{key:5,class:"hover:underline truncate cursor-pointer",role:"button",onClick:h},I(C(a)("CAPTAIN.RESPONSES.DOCUMENTABLE.CONVERSATION",{id:e.documentable.display_id})),1)):$("",!0)])):$("",!0)]),m("div",xqe,[S(dt,{icon:"i-ph-calendar-dot",class:"size-3.5"}),xe(" "+I(u.value),1)])],2)]))]}),_:1},8,["class"])}}},wqe={key:0,class:"flex items-center justify-center py-10 text-n-slate-11"},$qe={key:1,class:"flex flex-col gap-3 min-h-48"},Mqe={__name:"RelatedResponses",props:{captainDocument:{type:Object,required:!0}},emits:["close"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=be(),i=rt(),l=j(null),r=_e("captainResponses/getUIFlags"),c=_e("captainResponses/getRecords"),u=y(()=>r.value.fetchingList),d=()=>{a("close")};return lt(()=>{i.dispatch("captainResponses/get",{assistantId:s.captainDocument.assistant.id,documentId:s.captainDocument.id})}),t({dialogRef:l}),(h,g)=>(p(),L($n,{ref_key:"dialogRef",ref:l,type:"edit",title:C(o)("CAPTAIN.DOCUMENTS.RELATED_RESPONSES.TITLE"),description:C(o)("CAPTAIN.DOCUMENTS.RELATED_RESPONSES.DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,"overflow-y-auto":"",width:"3xl",onClose:d},{default:Y(()=>[u.value?(p(),E("div",wqe,[S(An)])):(p(),E("div",$qe,[(p(!0),E(ue,null,Ae(C(c),f=>(p(),L(sm,{id:f.id,key:f.id,question:f.question,status:f.status,answer:f.answer,assistant:f.assistant,"created-at":f.created_at,"updated-at":f.updated_at,compact:""},null,8,["id","question","status","answer","assistant","created-at","updated-at"]))),128))]))]),_:1},8,["title","description"]))}},Lqe={class:"flex flex-col gap-1"},Dqe={for:"documentType",class:"mb-0.5 text-sm font-medium text-n-slate-12"},Pqe={key:1,class:"flex flex-col gap-2"},kqe={class:"text-sm font-medium text-n-slate-12"},Bqe={class:"relative"},Uqe={class:"flex gap-2 items-center"},Fqe={class:"flex flex-col flex-1 gap-1 items-start"},Gqe={class:"m-0 text-sm font-medium text-n-slate-12"},Vqe={class:"m-0 text-xs text-n-slate-11"},Hqe={key:0,class:"text-xs text-n-ruby-9"},Wqe={class:"flex gap-3 justify-between items-center w-full"},zqe=10*1024*1024,Yqe={__name:"DocumentForm",props:{assistantId:{type:Number,required:!0}},emits:["submit","cancel"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o={uiFlags:_e("captainDocuments/getUIFlags")},l=gn({...{name:"",url:"",documentType:"url",pdfFile:null}}),r=j(null),c={url:{required:Ei(()=>l.documentType==="url"),url:Ei(()=>l.documentType==="url"&&Qc),minLength:Ei(()=>l.documentType==="url"&&en(1))},pdfFile:{required:Ei(()=>l.documentType==="pdf")}},u=[{value:"url",label:a("CAPTAIN.DOCUMENTS.FORM.TYPE.URL")},{value:"pdf",label:a("CAPTAIN.DOCUMENTS.FORM.TYPE.PDF")}],d=bt(c,l),h=y(()=>o.uiFlags.value.creatingItem),g=y(()=>d.value.pdfFile.$error),f=(R,O)=>d.value[R].$error?a(`CAPTAIN.DOCUMENTS.FORM.${O}.ERROR`):"",b=y(()=>({url:f("url","URL"),pdfFile:f("pdfFile","PDF_FILE")})),A=()=>s("cancel"),v=R=>{const O=R.target.files[0];if(O){if(O.type!=="application/pdf"){ne(a("CAPTAIN.DOCUMENTS.FORM.PDF_FILE.INVALID_TYPE")),R.target.value="";return}if(O.size>zqe){ne(a("CAPTAIN.DOCUMENTS.FORM.PDF_FILE.TOO_LARGE")),R.target.value="";return}l.pdfFile=O,l.name=O.name.replace(/\.pdf$/i,"")}},T=()=>{Wt(()=>{r.value&&r.value.click()})},_=()=>{const R=new FormData;return R.append("document[assistant_id]",n.assistantId),l.documentType==="url"?(R.append("document[external_link]",l.url),R.append("document[name]",l.name||l.url)):(R.append("document[pdf_file]",l.pdfFile),R.append("document[name]",l.name||l.pdfFile.name.replace(".pdf",""))),R},N=async()=>{await d.value.$validate()&&s("submit",_())};return(R,O)=>(p(),E("form",{class:"flex flex-col gap-4",onSubmit:Ve(N,["prevent"])},[m("div",Lqe,[m("label",Dqe,I(C(a)("CAPTAIN.DOCUMENTS.FORM.TYPE.LABEL")),1),S(Ha,{id:"documentType",modelValue:l.documentType,"onUpdate:modelValue":O[0]||(O[0]=x=>l.documentType=x),options:u,class:"[&>div>button]:bg-n-alpha-black2"},null,8,["modelValue"])]),l.documentType==="url"?(p(),L(Tt,{key:0,modelValue:l.url,"onUpdate:modelValue":O[1]||(O[1]=x=>l.url=x),label:C(a)("CAPTAIN.DOCUMENTS.FORM.URL.LABEL"),placeholder:C(a)("CAPTAIN.DOCUMENTS.FORM.URL.PLACEHOLDER"),message:b.value.url,"message-type":b.value.url?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"])):$("",!0),l.documentType==="pdf"?(p(),E("div",Pqe,[m("label",kqe,I(C(a)("CAPTAIN.DOCUMENTS.FORM.PDF_FILE.LABEL")),1),m("div",Bqe,[m("input",{ref_key:"fileInputRef",ref:r,type:"file",accept:".pdf",class:"hidden",onChange:v},null,544),S(te,{type:"button",color:g.value?"ruby":"slate",variant:g.value?"outline":"solid",class:"!w-full !h-auto !justify-between !py-4",onClick:T},{default:Y(()=>[m("div",Uqe,[O[3]||(O[3]=m("div",{class:"flex justify-center items-center w-10 h-10 rounded-lg bg-n-slate-3"},[m("i",{class:"text-xl i-ph-file-pdf text-n-slate-11"})],-1)),m("div",Fqe,[m("p",Gqe,I(l.pdfFile?l.pdfFile.name:C(a)("CAPTAIN.DOCUMENTS.FORM.PDF_FILE.CHOOSE_FILE")),1),m("p",Vqe,I(l.pdfFile?`${(l.pdfFile.size/1024/1024).toFixed(2)} MB`:C(a)("CAPTAIN.DOCUMENTS.FORM.PDF_FILE.HELP_TEXT")),1)])]),O[4]||(O[4]=m("i",{class:"i-lucide-upload text-n-slate-11"},null,-1))]),_:1},8,["color","variant"])]),b.value.pdfFile?(p(),E("p",Hqe,I(b.value.pdfFile),1)):$("",!0)])):$("",!0),S(Tt,{modelValue:l.name,"onUpdate:modelValue":O[2]||(O[2]=x=>l.name=x),label:C(a)("CAPTAIN.DOCUMENTS.FORM.NAME.LABEL"),placeholder:C(a)("CAPTAIN.DOCUMENTS.FORM.NAME.PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),m("div",Wqe,[S(te,{type:"button",variant:"faded",color:"slate",label:C(a)("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:A},null,8,["label"]),S(te,{type:"submit",label:C(a)("CAPTAIN.FORM.CREATE"),class:"w-full","is-loading":h.value,disabled:h.value},null,8,["label","is-loading","disabled"])])],32))}},pf="CAPTAIN.DOCUMENTS.CREATE",jqe={__name:"CreateDocumentDialog",props:{assistantId:{type:Number,required:!0}},emits:["close"],setup(e,{expose:t,emit:n}){const s=n,{t:a}=be(),o=rt(),i=j(null),l=async u=>{try{await o.dispatch("captainDocuments/create",u),ne(a(`${pf}.SUCCESS_MESSAGE`)),i.value.close()}catch(d){const h=Ir(d)||a(`${pf}.ERROR_MESSAGE`);ne(h)}},r=()=>{s("close")},c=()=>{i.value.close()};return t({dialogRef:i}),(u,d)=>(p(),L($n,{ref_key:"dialogRef",ref:i,title:u.$t(`${pf}.TITLE`),description:u.$t("CAPTAIN.DOCUMENTS.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,onClose:r},{footer:Y(()=>d[0]||(d[0]=[])),default:Y(()=>[S(Yqe,{"assistant-id":e.assistantId,onSubmit:l,onCancel:c},null,8,["assistant-id"])]),_:1},8,["title","description"]))}},Kqe={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},Xqe={__name:"DocumentPageEmptyState",emits:["click"],setup(e,{emit:t}){const n=t,{isOnChatwootCloud:s}=ln(),a=()=>{n("click")};return(o,i)=>(p(),E(ue,null,[S(mv,{title:o.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:o.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/document-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/document-dark.svg","learn-more-url":"https://chwt.app/captain-document","hide-actions":!C(s),class:"mb-8"},null,8,["title","note","hide-actions"]),S(Do,{title:o.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.TITLE"),subtitle:o.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.SUBTITLE"),"action-perms":["administrator"]},{"empty-state-item":Y(()=>[m("div",Kqe,[(p(!0),E(ue,null,Ae(C(Sje).slice(0,5),(l,r)=>(p(),L(JC,{id:l.id,key:`document-${r}`,name:l.name,assistant:l.assistant,"external-link":l.external_link,"created-at":l.created_at},null,8,["id","name","assistant","external-link","created-at"]))),128))])]),actions:Y(()=>[S(te,{label:o.$t("CAPTAIN.DOCUMENTS.ADD_NEW"),icon:"i-lucide-plus",onClick:a},null,8,["label"])]),_:1},8,["title","subtitle"])],64))}},qqe={__name:"LimitBanner",setup(e){const t=Ft(),{accountId:n}=ln(),{documentLimits:s,fetchLimits:a}=u_(),o=()=>{t.push({name:"billing_settings_index",params:{accountId:n.value}})},i=y(()=>{if(!s.value)return!1;const{currentAvailable:l}=s.value;return l===0});return lt(a),(l,r)=>re((p(),L(ou,{color:"amber","action-label":l.$t("CAPTAIN.PAYWALL.UPGRADE_NOW"),onAction:o},{default:Y(()=>[xe(I(l.$t("CAPTAIN.BANNER.DOCUMENTS")),1)]),_:1},8,["action-label"])),[[rn,i.value]])}},Zqe={class:"flex flex-col gap-4"},Qqe={__name:"Index",setup(e){const t=wt(),n=rt(),{isOnChatwootCloud:s}=ln(),a=_e("captainDocuments/getUIFlags"),o=_e("captainDocuments/getRecords"),i=y(()=>a.value.fetchingList),l=_e("captainDocuments/getMeta"),r=y(()=>Number(t.params.assistantId)),c=j(null),u=j(null),d=()=>{u.value.dialogRef.open()},h=j(!1),g=j(!1),f=j(null),b=j(null),A=()=>{h.value=!0,Wt(()=>b.value.dialogRef.open())},v=()=>{g.value=!0,Wt(()=>f.value.dialogRef.open())},T=()=>{h.value=!1},_=()=>{g.value=!1},N=({action:w,id:D})=>{c.value=o.value.find(M=>D===M.id),Wt(()=>{w==="delete"?d():w==="viewRelatedQuestions"&&A()})},R=(w=1)=>{const D={page:w};r.value&&(D.assistantId=r.value),n.dispatch("captainDocuments/get",D)},O=w=>R(w),x=()=>{var w,D;((w=o.value)==null?void 0:w.length)===0&&((D=l.value)==null?void 0:D.page)>1&&O(l.value.page-1)};return lt(()=>{R()}),(w,D)=>(p(),L(fo,{"header-title":w.$t("CAPTAIN.DOCUMENTS.HEADER"),"button-label":w.$t("CAPTAIN.DOCUMENTS.ADD_NEW"),"button-policy":["administrator"],"total-count":C(l).totalCount,"current-page":C(l).page,"show-pagination-footer":!i.value&&!!C(o).length,"is-fetching":i.value,"is-empty":!C(o).length,"show-know-more":!1,"feature-flag":C(ft).CAPTAIN,"onUpdate:currentPage":O,onClick:v},{knowMore:Y(()=>[S(nm,{"button-label":w.$t("CAPTAIN.HEADER_KNOW_MORE"),title:w.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:w.$t("CAPTAIN.DOCUMENTS.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"hide-actions":!C(s),"fallback-thumbnail":"/assets/images/dashboard/captain/document-popover-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/document-popover-dark.svg","learn-more-url":"https://chwt.app/captain-document"},null,8,["button-label","title","note","hide-actions"])]),emptyState:Y(()=>[S(Xqe,{onClick:v})]),paywall:Y(()=>[S(Eu)]),body:Y(()=>[S(qqe,{class:"mb-5"}),m("div",Zqe,[(p(!0),E(ue,null,Ae(C(o),M=>(p(),L(JC,{id:M.id,key:M.id,name:M.name||M.external_link,"external-link":M.external_link,assistant:M.assistant,"created-at":M.created_at,onAction:N},null,8,["id","name","external-link","assistant","created-at"]))),128))])]),default:Y(()=>[h.value?(p(),L(Mqe,{key:0,ref_key:"relationQuestionDialog",ref:b,"captain-document":c.value,onClose:T},null,8,["captain-document"])):$("",!0),g.value?(p(),L(jqe,{key:1,ref_key:"createDocumentDialog",ref:f,"assistant-id":r.value,onClose:_},null,8,["assistant-id"])):$("",!0),c.value?(p(),L(Ur,{key:2,ref_key:"deleteDocumentDialog",ref:u,entity:c.value,type:"Documents",onDeleteSuccess:x},null,8,["entity"])):$("",!0)]),_:1},8,["header-title","button-label","total-count","current-page","show-pagination-footer","is-fetching","is-empty","feature-flag"]))}},e2={__name:"BulkDeleteDialog",props:{type:{type:String,required:!0},bulkIds:{type:Object,required:!0}},emits:["deleteSuccess"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=be(),i=rt(),l=j(null),r=y(()=>s.type.toUpperCase()),c=async d=>{if(d)try{await i.dispatch("captainBulkActions/handleBulkDelete",Array.from(s.bulkIds)),a("deleteSuccess"),ne(o(`CAPTAIN.${r.value}.BULK_DELETE.SUCCESS_MESSAGE`))}catch{ne(o(`CAPTAIN.${r.value}.BULK_DELETE.ERROR_MESSAGE`))}},u=async()=>{var d;await c(Array.from(s.bulkIds)),(d=l.value)==null||d.close()};return t({dialogRef:l}),(d,h)=>(p(),L($n,{ref_key:"bulkDeleteDialogRef",ref:l,type:"alert",title:C(o)(`CAPTAIN.${r.value}.BULK_DELETE.TITLE`),description:C(o)(`CAPTAIN.${r.value}.BULK_DELETE.DESCRIPTION`),"confirm-button-label":C(o)(`CAPTAIN.${r.value}.BULK_DELETE.CONFIRM`),onConfirm:u},null,8,["title","description","confirm-button-label"]))}},Jqe={class:"flex items-center justify-between w-full gap-3"},eZe={__name:"ResponseForm",props:{mode:{type:String,required:!0,validator:e=>["edit","create"].includes(e)},response:{type:Object,default:()=>({})}},emits:["submit","cancel"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o={uiFlags:_e("captainResponses/getUIFlags")},l=gn({...{question:"",answer:""}}),r={question:{required:Ye,minLength:en(1)},answer:{required:Ye,minLength:en(1)}},c=bt(r,l),u=y(()=>o.uiFlags.value.creatingItem),d=(v,T)=>c.value[v].$error?a(`CAPTAIN.RESPONSES.FORM.${T}.ERROR`):"",h=y(()=>({question:d("question","QUESTION"),answer:d("answer","ANSWER")})),g=()=>s("cancel"),f=()=>({question:l.question,answer:l.answer}),b=async()=>{await c.value.$validate()&&s("submit",f())},A=v=>{if(!v)return;const{question:T,answer:_}=v;Object.assign(l,{question:T,answer:_})};return it(()=>n.response,v=>{n.mode==="edit"&&v&&A(v)},{immediate:!0}),(v,T)=>(p(),E("form",{class:"flex flex-col gap-4",onSubmit:Ve(b,["prevent"])},[S(Tt,{modelValue:l.question,"onUpdate:modelValue":T[0]||(T[0]=_=>l.question=_),label:C(a)("CAPTAIN.RESPONSES.FORM.QUESTION.LABEL"),placeholder:C(a)("CAPTAIN.RESPONSES.FORM.QUESTION.PLACEHOLDER"),message:h.value.question,"message-type":h.value.question?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),S(Ks,{modelValue:l.answer,"onUpdate:modelValue":T[1]||(T[1]=_=>l.answer=_),label:C(a)("CAPTAIN.RESPONSES.FORM.ANSWER.LABEL"),placeholder:C(a)("CAPTAIN.RESPONSES.FORM.ANSWER.PLACEHOLDER"),message:h.value.answer,"max-length":1e4,"message-type":h.value.answer?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),m("div",Jqe,[S(te,{type:"button",variant:"faded",color:"slate",label:C(a)("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:g},null,8,["label"]),S(te,{type:"submit",label:C(a)(`CAPTAIN.FORM.${e.mode.toUpperCase()}`),class:"w-full","is-loading":u.value,disabled:u.value},null,8,["label","is-loading","disabled"])])],32))}},t2={__name:"CreateResponseDialog",props:{selectedResponse:{type:Object,default:()=>({})},type:{type:String,default:"create",validator:e=>["create","edit"].includes(e)}},emits:["close"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=be(),i=rt(),l=wt(),r=j(null),c=j(null),u=A=>i.dispatch("captainResponses/update",{id:s.selectedResponse.id,...A}),d=y(()=>`CAPTAIN.RESPONSES.${s.type.toUpperCase()}`),h=A=>i.dispatch("captainResponses/create",A),g=async A=>{var v;try{s.type==="edit"?await u({...A,assistant_id:l.params.assistantId}):await h({...A,assistant_id:l.params.assistantId}),ne(o(`${d.value}.SUCCESS_MESSAGE`)),r.value.close()}catch(T){const _=((v=T==null?void 0:T.response)==null?void 0:v.message)||o(`${d.value}.ERROR_MESSAGE`);ne(_)}},f=()=>{a("close")},b=()=>{r.value.close()};return t({dialogRef:r}),(A,v)=>(p(),L($n,{ref_key:"dialogRef",ref:r,title:A.$t(`${d.value}.TITLE`),description:A.$t("CAPTAIN.RESPONSES.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,onClose:f},{footer:Y(()=>v[0]||(v[0]=[])),default:Y(()=>[S(eZe,{ref_key:"responseForm",ref:c,mode:e.type,response:e.selectedResponse,onSubmit:g,onCancel:b},null,8,["mode","response"])]),_:1},8,["title","description"]))}},tZe={class:"grid grid-cols-1 gap-4 p-px overflow-hidden"},nZe={class:"flex flex-col items-center gap-3"},n2={__name:"ResponsePageEmptyState",props:{variant:{type:String,default:"approved",validator:e=>["approved","pending"].includes(e)},hasActiveFilters:{type:Boolean,default:!1}},emits:["click","clearFilters"],setup(e,{emit:t}){const n=e,s=t,a=y(()=>n.variant==="approved"),o=y(()=>n.variant==="pending"),{isOnChatwootCloud:i}=ln(),l=()=>{s("click")},r=()=>{s("clearFilters")};return(c,u)=>(p(),E(ue,null,[a.value?(p(),L(mv,{key:0,title:c.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:c.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"fallback-thumbnail":"/assets/images/dashboard/captain/faqs-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/faqs-dark.svg","learn-more-url":"https://chwt.app/captain-faq","hide-actions":!C(i),class:"mb-8"},null,8,["title","note","hide-actions"])):$("",!0),S(Do,{title:o.value?c.$t("CAPTAIN.RESPONSES.EMPTY_STATE.NO_PENDING_TITLE"):c.$t("CAPTAIN.RESPONSES.EMPTY_STATE.TITLE"),subtitle:a.value?c.$t("CAPTAIN.RESPONSES.EMPTY_STATE.SUBTITLE"):"","action-perms":["administrator"],"show-backdrop":a.value},co({actions:Y(()=>[m("div",nZe,[a.value?(p(),L(te,{key:0,label:c.$t("CAPTAIN.RESPONSES.ADD_NEW"),icon:"i-lucide-plus",onClick:l},null,8,["label"])):o.value&&e.hasActiveFilters?(p(),L(te,{key:1,label:c.$t("CAPTAIN.RESPONSES.EMPTY_STATE.CLEAR_SEARCH"),variant:"link",size:"sm",onClick:r},null,8,["label"])):$("",!0)])]),_:2},[a.value?{name:"empty-state-item",fn:Y(()=>[m("div",tZe,[(p(!0),E(ue,null,Ae(C(Aje).slice(0,5),(d,h)=>(p(),L(sm,{id:d.id,key:`response-${h}`,question:d.question,answer:d.answer,status:d.status,assistant:d.assistant,"created-at":d.created_at,"updated-at":d.created_at},null,8,["id","question","answer","status","assistant","created-at","updated-at"]))),128))])]),key:"0"}:void 0]),1032,["title","subtitle","show-backdrop"])],64))}},s2={__name:"LimitBanner",setup(e){const t=Ft(),{accountId:n}=ln(),{responseLimits:s,fetchLimits:a}=u_(),o=()=>{t.push({name:"billing_settings_index",params:{accountId:n.value}})},i=y(()=>{if(!s.value)return!1;const{consumed:l,totalCount:r}=s.value;return!l||!r?!1:l/r>.8});return lt(a),(l,r)=>re((p(),L(ou,{color:"amber","action-label":l.$t("CAPTAIN.PAYWALL.UPGRADE_NOW"),onAction:o},{default:Y(()=>[xe(I(l.$t("CAPTAIN.BANNER.RESPONSES")),1)]),_:1},8,["action-label"])),[[rn,i.value]])}},sZe={key:0,class:"flex gap-3 justify-between w-full items-center"},aZe={class:"flex flex-col gap-4"},oZe={__name:"Index",setup(e){const t=Ft(),n=wt(),s=rt(),{isOnChatwootCloud:a}=ln(),o=_e("captainResponses/getUIFlags"),i=_e("captainResponses/getMeta"),l=_e("captainResponses/getRecords"),r=y(()=>o.value.fetchingList),c=j(null),u=j(null),d=j(null),h=j(""),g=j(""),{t:f}=be(),b=j(null),A=y(()=>Number(n.params.assistantId)),v=_e("captainResponses/getPendingCount"),T=()=>{u.value.dialogRef.open()},_=()=>{h.value="create",Wt(()=>b.value.dialogRef.open())},N=()=>{h.value="edit",Wt(()=>b.value.dialogRef.open())},R=({action:H,id:q})=>{c.value=l.value.find(J=>q===J.id),Wt(()=>{H==="delete"&&T(),H==="edit"&&N()})},O=({id:H,type:q})=>{q==="Conversation"&&t.push({name:"inbox_conversation",params:{conversation_id:H}})},x=()=>{h.value="",c.value=null},w=(H,q)=>{const J={page:H||1};q&&(J.search=q),t.replace({query:J})},D=(H=1)=>{const q={page:H,status:"approved"};A.value&&(q.assistantId=A.value),g.value&&(q.search=g.value),w(H,g.value),s.dispatch("captainResponses/get",q)},M=j(new Set),P=j(null),U=y(()=>{var J;const H=((J=l.value)==null?void 0:J.length)||0;return M.value.size===H&&H>0?f("CAPTAIN.RESPONSES.UNSELECT_ALL",{count:H}):f("CAPTAIN.RESPONSES.SELECT_ALL",{count:H})}),F=y(()=>f("CAPTAIN.RESPONSES.SELECTED",{count:M.value.size})),k=(H,q)=>{P.value=H?q:null},B=H=>{const q=new Set(M.value);q[q.has(H)?"delete":"add"](H),M.value=q},V=()=>{var J,de;const H=((J=l.value)==null?void 0:J.length)===0,q=(de=i.value)==null?void 0:de.page;if(H){const Te=q>1?q-1:q;D(Te)}else D(q);M.value=new Set},G=H=>{const q=M.value.size>0;D(H),q&&(M.value=new Set)},K=()=>{var H,q;((H=l.value)==null?void 0:H.length)===0&&((q=i.value)==null?void 0:q.page)>1&&G(i.value.page-1)},se=()=>{V()},ee=Ua(async()=>{D(1)},500),X=()=>{n.query.search&&(g.value=n.query.search);const H=parseInt(n.query.page,10)||1;D(H)},z=()=>{t.push({name:"captain_assistants_responses_pending"})};return lt(()=>{X(),s.dispatch("captainResponses/fetchPendingCount",A.value)}),(H,q)=>(p(),L(fo,{"total-count":C(i).totalCount,"current-page":C(i).page,"button-policy":["administrator"],"header-title":H.$t("CAPTAIN.RESPONSES.HEADER"),"button-label":H.$t("CAPTAIN.RESPONSES.ADD_NEW"),"is-fetching":r.value,"is-empty":!C(l).length,"show-pagination-footer":!r.value&&!!C(l).length,"feature-flag":C(ft).CAPTAIN,"onUpdate:currentPage":G,onClick:_},{knowMore:Y(()=>[S(nm,{"button-label":H.$t("CAPTAIN.HEADER_KNOW_MORE"),title:H.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:H.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"hide-actions":!C(a),"fallback-thumbnail":"/assets/images/dashboard/captain/faqs-popover-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/faqs-popover-dark.svg","learn-more-url":"https://chwt.app/captain-faq"},null,8,["button-label","title","note","hide-actions"])]),search:Y(()=>[M.value.size===0?(p(),E("div",sZe,[S(Tt,{modelValue:g.value,"onUpdate:modelValue":q[0]||(q[0]=J=>g.value=J),placeholder:H.$t("CAPTAIN.RESPONSES.SEARCH_PLACEHOLDER"),class:"w-64",size:"sm",type:"search",autofocus:"",onInput:C(ee)},null,8,["modelValue","placeholder","onInput"])])):$("",!0)]),subHeader:Y(()=>[S(Br,{modelValue:M.value,"onUpdate:modelValue":q[1]||(q[1]=J=>M.value=J),"all-items":C(l),"select-all-label":U.value,"selected-count-label":F.value,"delete-label":H.$t("CAPTAIN.RESPONSES.BULK_DELETE_BUTTON"),class:ae(["w-fit",{"mb-2":M.value.size>0}]),onBulkDelete:q[2]||(q[2]=J=>d.value.dialogRef.open())},null,8,["modelValue","all-items","select-all-label","selected-count-label","delete-label","class"])]),emptyState:Y(()=>[S(n2,{onClick:_})]),paywall:Y(()=>[S(Eu)]),body:Y(()=>[S(s2,{class:"mb-5"}),C(v)>0?(p(),L(ou,{key:0,color:"blue",class:"mb-4 -mt-3","action-label":H.$t("CAPTAIN.RESPONSES.PENDING_BANNER.ACTION"),onAction:z},{default:Y(()=>[xe(I(H.$t("CAPTAIN.RESPONSES.PENDING_BANNER.TITLE")),1)]),_:1},8,["action-label"])):$("",!0),m("div",aZe,[(p(!0),E(ue,null,Ae(C(l),J=>(p(),L(sm,{id:J.id,key:J.id,question:J.question,answer:J.answer,assistant:J.assistant,documentable:J.documentable,status:J.status,"created-at":J.created_at,"updated-at":J.updated_at,"is-selected":M.value.has(J.id),selectable:P.value===J.id||M.value.size>0,"show-menu":!M.value.has(J.id),"show-actions":!1,onAction:R,onNavigate:O,onSelect:B,onHover:de=>k(de,J.id)},null,8,["id","question","answer","assistant","documentable","status","created-at","updated-at","is-selected","selectable","show-menu","onHover"]))),128))])]),default:Y(()=>[c.value?(p(),L(Ur,{key:0,ref_key:"deleteDialog",ref:u,entity:c.value,type:"Responses",onDeleteSuccess:K},null,8,["entity"])):$("",!0),M.value?(p(),L(e2,{key:1,ref_key:"bulkDeleteDialog",ref:d,"bulk-ids":M.value,type:"Responses",onDeleteSuccess:se},null,8,["bulk-ids"])):$("",!0),h.value?(p(),L(t2,{key:2,ref_key:"createDialog",ref:b,type:h.value,"selected-response":c.value,onClose:x},null,8,["type","selected-response"])):$("",!0)]),_:1},8,["total-count","current-page","header-title","button-label","is-fetching","is-empty","show-pagination-footer","feature-flag"]))}},iZe={key:0,class:"flex gap-3 justify-between w-full items-center"},lZe={class:"flex flex-col gap-4"},rZe={__name:"Pending",setup(e){const t=Ft(),n=wt(),s=rt(),{isOnChatwootCloud:a}=ln(),o=_e("captainResponses/getUIFlags"),i=_e("captainResponses/getMeta"),l=_e("captainResponses/getRecords"),r=y(()=>o.value.fetchingList),c=j(null),u=j(null),d=j(null),h=Number(n.params.assistantId),g=j(""),f=j(""),{t:b}=be(),A=j(null),v=y(()=>({name:"captain_assistants_responses_index",params:{accountId:n.params.accountId,assistantId:h}})),T=y(()=>l.value.filter(de=>de.status!=="approved")),_=()=>{u.value.dialogRef.open()},N=async()=>{try{await s.dispatch("captainResponses/update",{id:c.value.id,status:"approved"}),ne(b("CAPTAIN.RESPONSES.EDIT.APPROVE_SUCCESS_MESSAGE"))}catch(de){const Te=(de==null?void 0:de.message)||b("CAPTAIN.RESPONSES.EDIT.ERROR_MESSAGE");ne(Te)}finally{c.value=null}},R=()=>{g.value="edit",Wt(()=>A.value.dialogRef.open())},O=({action:de,id:Te})=>{c.value=T.value.find(ce=>Te===ce.id),Wt(()=>{de==="delete"&&_(),de==="edit"&&R(),de==="approve"&&N()})},x=({id:de,type:Te})=>{Te==="Conversation"&&t.push({name:"inbox_conversation",params:{conversation_id:de}})},w=()=>{g.value="",c.value=null},D=(de,Te)=>{const ce={page:de||1};Te&&(ce.search=Te),t.replace({query:ce})},M=(de=1)=>{const Te={page:de,status:"pending"};h&&(Te.assistantId=h),f.value&&(Te.search=f.value),D(de,f.value),s.dispatch("captainResponses/get",Te)},P=j(new Set),U=j(null),F=y(()=>{var ce;const de=((ce=T.value)==null?void 0:ce.length)||0;return P.value.size===de&&de>0?b("CAPTAIN.RESPONSES.UNSELECT_ALL",{count:de}):b("CAPTAIN.RESPONSES.SELECT_ALL",{count:de})}),k=y(()=>b("CAPTAIN.RESPONSES.SELECTED",{count:P.value.size})),B=(de,Te)=>{U.value=de?Te:null},V=de=>{const Te=new Set(P.value);Te[Te.has(de)?"delete":"add"](de),P.value=Te},G=()=>{var ce,Ne;const de=((ce=T.value)==null?void 0:ce.length)===0,Te=(Ne=i.value)==null?void 0:Ne.page;if(de){const Me=Te>1?Te-1:Te;M(Me)}else M(Te);P.value=new Set},K=async()=>{try{await s.dispatch("captainBulkActions/handleBulkApprove",Array.from(P.value)),G(),ne(b("CAPTAIN.RESPONSES.BULK_APPROVE.SUCCESS_MESSAGE"))}catch(de){ne((de==null?void 0:de.message)||b("CAPTAIN.RESPONSES.BULK_APPROVE.ERROR_MESSAGE"))}},se=de=>{const Te=P.value.size>0;M(de),Te&&(P.value=new Set)},ee=()=>{var de,Te;((de=T.value)==null?void 0:de.length)===0&&((Te=i.value)==null?void 0:Te.page)>1&&se(i.value.page-1)},X=()=>{G()},z=Ua(async()=>{M(1)},500),H=y(()=>!!f.value),q=()=>{f.value="",M(1)},J=()=>{n.query.search&&(f.value=n.query.search);const de=parseInt(n.query.page,10)||1;M(de)};return lt(()=>{J()}),(de,Te)=>(p(),L(fo,{"total-count":C(i).totalCount,"current-page":C(i).page,"header-title":de.$t("CAPTAIN.RESPONSES.PENDING_FAQS"),"is-fetching":r.value,"is-empty":!T.value.length,"show-pagination-footer":!r.value&&!!T.value.length,"show-know-more":!1,"feature-flag":C(ft).CAPTAIN,"back-url":v.value,"onUpdate:currentPage":se},{knowMore:Y(()=>[S(nm,{"button-label":de.$t("CAPTAIN.HEADER_KNOW_MORE"),title:de.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.TITLE"),note:de.$t("CAPTAIN.RESPONSES.EMPTY_STATE.FEATURE_SPOTLIGHT.NOTE"),"hide-actions":!C(a),"fallback-thumbnail":"/assets/images/dashboard/captain/faqs-popover-light.svg","fallback-thumbnail-dark":"/assets/images/dashboard/captain/faqs-popover-dark.svg","learn-more-url":"https://chwt.app/captain-faq"},null,8,["button-label","title","note","hide-actions"])]),search:Y(()=>[P.value.size===0?(p(),E("div",iZe,[S(Tt,{modelValue:f.value,"onUpdate:modelValue":Te[0]||(Te[0]=ce=>f.value=ce),placeholder:de.$t("CAPTAIN.RESPONSES.SEARCH_PLACEHOLDER"),class:"w-64",size:"sm",type:"search",autofocus:"",onInput:C(z)},null,8,["modelValue","placeholder","onInput"])])):$("",!0)]),subHeader:Y(()=>[S(Br,{modelValue:P.value,"onUpdate:modelValue":Te[1]||(Te[1]=ce=>P.value=ce),"all-items":T.value,"select-all-label":F.value,"selected-count-label":k.value,"delete-label":de.$t("CAPTAIN.RESPONSES.BULK_DELETE_BUTTON"),class:ae(["w-fit",{"mb-2":P.value.size>0}]),onBulkDelete:Te[2]||(Te[2]=ce=>d.value.dialogRef.open())},{"secondary-actions":Y(()=>[S(te,{label:de.$t("CAPTAIN.RESPONSES.BULK_APPROVE_BUTTON"),sm:"",ghost:"",icon:"i-lucide-check",class:"!px-1.5",onClick:K},null,8,["label"])]),_:1},8,["modelValue","all-items","select-all-label","selected-count-label","delete-label","class"])]),emptyState:Y(()=>[S(n2,{variant:"pending","has-active-filters":H.value,onClearFilters:q},null,8,["has-active-filters"])]),paywall:Y(()=>[S(Eu)]),body:Y(()=>[S(s2,{class:"mb-5"}),m("div",lZe,[(p(!0),E(ue,null,Ae(T.value,ce=>(p(),L(sm,{id:ce.id,key:ce.id,question:ce.question,answer:ce.answer,assistant:ce.assistant,documentable:ce.documentable,status:ce.status,"created-at":ce.created_at,"updated-at":ce.updated_at,"is-selected":P.value.has(ce.id),selectable:U.value===ce.id||P.value.size>0,"show-menu":!1,"show-actions":!P.value.has(ce.id),onAction:O,onNavigate:x,onSelect:V,onHover:Ne=>B(Ne,ce.id)},null,8,["id","question","answer","assistant","documentable","status","created-at","updated-at","is-selected","selectable","show-actions","onHover"]))),128))])]),default:Y(()=>[c.value?(p(),L(Ur,{key:0,ref_key:"deleteDialog",ref:u,entity:c.value,type:"Responses",onDeleteSuccess:ee},null,8,["entity"])):$("",!0),P.value?(p(),L(e2,{key:1,ref_key:"bulkDeleteDialog",ref:d,"bulk-ids":P.value,type:"Responses",onDeleteSuccess:X},null,8,["bulk-ids"])):$("",!0),g.value?(p(),L(t2,{key:2,ref_key:"createDialog",ref:A,type:g.value,"selected-response":c.value,onClose:w},null,8,["type","selected-response"])):$("",!0)]),_:1},8,["total-count","current-page","header-title","is-fetching","is-empty","show-pagination-footer","feature-flag","back-url"]))}},cZe={__name:"CustomToolsPageEmptyState",emits:["click"],setup(e,{emit:t}){const n=t,s=()=>{n("click")};return(a,o)=>(p(),L(Do,{title:a.$t("CAPTAIN.CUSTOM_TOOLS.EMPTY_STATE.TITLE"),subtitle:a.$t("CAPTAIN.CUSTOM_TOOLS.EMPTY_STATE.SUBTITLE"),"action-perms":["administrator"]},{"empty-state-item":Y(()=>o[0]||(o[0]=[m("div",{class:"min-h-[600px]"},null,-1)])),actions:Y(()=>[S(te,{label:a.$t("CAPTAIN.CUSTOM_TOOLS.ADD_NEW"),icon:"i-lucide-plus",onClick:s},null,8,["label"])]),_:1},8,["title","subtitle"]))}},uZe={class:"list-none"},dZe={class:"flex flex-col flex-1 gap-3"},pZe={class:"grid grid-cols-3 gap-2"},mZe={class:"flex items-center gap-2 cursor-pointer"},hZe={class:"text-sm text-n-slate-11"},fZe={key:0,class:"block mt-1 text-sm text-n-ruby-11"},gZe={__name:"ParamRow",props:{name:{type:String,required:!0},nameModifiers:{},type:{type:String,required:!0},typeModifiers:{},description:{type:String,default:""},descriptionModifiers:{},required:{type:Boolean,default:!1},requiredModifiers:{}},emits:jt(["remove"],["update:name","update:type","update:description","update:required"]),setup(e,{expose:t,emit:n}){const s=n,{t:a}=be(),o=j(!1),i=Xt(e,"name"),l=Xt(e,"type"),r=Xt(e,"description"),c=Xt(e,"required"),u=y(()=>[{value:"string",label:a("CAPTAIN.CUSTOM_TOOLS.FORM.PARAM_TYPES.STRING")},{value:"number",label:a("CAPTAIN.CUSTOM_TOOLS.FORM.PARAM_TYPES.NUMBER")},{value:"boolean",label:a("CAPTAIN.CUSTOM_TOOLS.FORM.PARAM_TYPES.BOOLEAN")},{value:"array",label:a("CAPTAIN.CUSTOM_TOOLS.FORM.PARAM_TYPES.ARRAY")},{value:"object",label:a("CAPTAIN.CUSTOM_TOOLS.FORM.PARAM_TYPES.OBJECT")}]),d=y(()=>!i.value||i.value.trim()===""?"PARAM_NAME_REQUIRED":null);return it([i,l,r,c],()=>{o.value=!1}),t({validate:()=>(o.value=!0,!d.value)}),(g,f)=>(p(),E("li",uZe,[m("div",{class:ae(["flex items-start gap-2 p-3 rounded-lg border border-n-weak bg-n-alpha-2",{"animate-wiggle border-n-ruby-9":o.value&&d.value}])},[m("div",dZe,[m("div",pZe,[S(Tt,{modelValue:i.value,"onUpdate:modelValue":f[0]||(f[0]=b=>i.value=b),placeholder:C(a)("CAPTAIN.CUSTOM_TOOLS.FORM.PARAM_NAME.PLACEHOLDER"),class:"col-span-2"},null,8,["modelValue","placeholder"]),S(Ha,{modelValue:l.value,"onUpdate:modelValue":f[1]||(f[1]=b=>l.value=b),options:u.value,placeholder:C(a)("CAPTAIN.CUSTOM_TOOLS.FORM.PARAM_TYPE.PLACEHOLDER"),class:"[&>div>button]:bg-n-alpha-black2"},null,8,["modelValue","options","placeholder"])]),S(Tt,{modelValue:r.value,"onUpdate:modelValue":f[2]||(f[2]=b=>r.value=b),placeholder:C(a)("CAPTAIN.CUSTOM_TOOLS.FORM.PARAM_DESCRIPTION.PLACEHOLDER")},null,8,["modelValue","placeholder"]),m("label",mZe,[S(kr,{modelValue:c.value,"onUpdate:modelValue":f[3]||(f[3]=b=>c.value=b)},null,8,["modelValue"]),m("span",hZe,I(C(a)("CAPTAIN.CUSTOM_TOOLS.FORM.PARAM_REQUIRED.LABEL")),1)])]),S(te,{solid:"",slate:"",icon:"i-lucide-trash",class:"flex-shrink-0",onClick:f[4]||(f[4]=Ve(b=>s("remove"),["stop"]))})],2),o.value&&d.value?(p(),E("span",fZe,I(C(a)(`CAPTAIN.CUSTOM_TOOLS.FORM.ERRORS.${d.value}`)),1)):$("",!0)]))}},_Ze={class:"flex flex-col gap-2"},vZe={__name:"AuthConfig",props:jt({authType:{type:String,required:!0,validator:e=>["none","bearer","basic","api_key"].includes(e)}},{authConfig:{type:Object,default:()=>({})},authConfigModifiers:{}}),emits:["update:authConfig"],setup(e){const t=e,{t:n}=be(),s=Xt(e,"authConfig");return it(()=>t.authType,()=>{s.value={}}),(a,o)=>(p(),E("div",_Ze,[e.authType==="bearer"?(p(),L(Tt,{key:0,modelValue:s.value.token,"onUpdate:modelValue":o[0]||(o[0]=i=>s.value.token=i),label:C(n)("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_CONFIG.BEARER_TOKEN"),placeholder:C(n)("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_CONFIG.BEARER_TOKEN_PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):e.authType==="basic"?(p(),E(ue,{key:1},[S(Tt,{modelValue:s.value.username,"onUpdate:modelValue":o[1]||(o[1]=i=>s.value.username=i),label:C(n)("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_CONFIG.USERNAME"),placeholder:C(n)("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_CONFIG.USERNAME_PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),S(Tt,{modelValue:s.value.password,"onUpdate:modelValue":o[2]||(o[2]=i=>s.value.password=i),type:"password",label:C(n)("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_CONFIG.PASSWORD"),placeholder:C(n)("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_CONFIG.PASSWORD_PLACEHOLDER")},null,8,["modelValue","label","placeholder"])],64)):e.authType==="api_key"?(p(),E(ue,{key:2},[S(Tt,{modelValue:s.value.name,"onUpdate:modelValue":o[3]||(o[3]=i=>s.value.name=i),label:C(n)("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_CONFIG.API_KEY"),placeholder:C(n)("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_CONFIG.API_KEY_PLACEHOLDER")},null,8,["modelValue","label","placeholder"]),S(Tt,{modelValue:s.value.key,"onUpdate:modelValue":o[4]||(o[4]=i=>s.value.key=i),label:C(n)("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_CONFIG.API_VALUE"),placeholder:C(n)("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_CONFIG.API_VALUE_PLACEHOLDER")},null,8,["modelValue","label","placeholder"])],64)):$("",!0)]))}},EZe={class:"flex gap-2"},bZe={class:"flex flex-col gap-1 w-28"},TZe={class:"mb-0.5 text-sm font-medium text-n-slate-12"},SZe={class:"flex flex-col gap-1"},AZe={class:"mb-0.5 text-sm font-medium text-n-slate-12"},yZe={class:"flex flex-col gap-2"},IZe={class:"text-sm font-medium text-n-slate-12"},CZe={class:"text-xs text-n-slate-11 -mt-1"},NZe={key:0,class:"grid gap-2 list-none"},OZe={class:"flex gap-3 justify-between items-center w-full"},RZe={__name:"CustomToolForm",props:{mode:{type:String,default:"create",validator:e=>["create","edit"].includes(e)},tool:{type:Object,default:()=>({})}},emits:["submit","cancel"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o={uiFlags:_e("captainCustomTools/getUIFlags")},l=gn({...{title:"",description:"",endpoint_url:"",http_method:"GET",request_template:"",response_template:"",auth_type:"none",auth_config:{},param_schema:[]}});it(()=>n.tool,O=>{n.mode==="edit"&&O&&O.id&&(l.title=O.title||"",l.description=O.description||"",l.endpoint_url=O.endpoint_url||"",l.http_method=O.http_method||"GET",l.request_template=O.request_template||"",l.response_template=O.response_template||"",l.auth_type=O.auth_type||"none",l.auth_config=O.auth_config||{},l.param_schema=O.param_schema||[])},{immediate:!0});const r={name:"",type:"string",description:"",required:!1},c={title:{required:Ye},endpoint_url:{required:Ye},http_method:{required:Ye},auth_type:{required:Ye}},u=y(()=>[{value:"GET",label:"GET"},{value:"POST",label:"POST"}]),d=y(()=>[{value:"none",label:a("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_TYPES.NONE")},{value:"bearer",label:a("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_TYPES.BEARER")},{value:"basic",label:a("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_TYPES.BASIC")},{value:"api_key",label:a("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_TYPES.API_KEY")}]),h=bt(c,l),g=y(()=>n.mode==="edit"?o.uiFlags.value.updatingItem:o.uiFlags.value.creatingItem),f=(O,x)=>h.value[O].$error?a(`CAPTAIN.CUSTOM_TOOLS.FORM.${x}.ERROR`):"",b=y(()=>({title:f("title","TITLE"),endpoint_url:f("endpoint_url","ENDPOINT_URL")})),A=Ss("paramsRef"),v=()=>!A.value||A.value.length===0?!0:A.value.every(O=>O.validate()),T=O=>{l.param_schema.splice(O,1)},_=()=>{l.param_schema.push({...r})},N=()=>s("cancel"),R=async()=>{!await h.value.$validate()||!v()||s("submit",l)};return(O,x)=>(p(),E("form",{class:"flex flex-col px-4 -mx-4 gap-4 max-h-[calc(100vh-200px)] overflow-y-scroll",onSubmit:Ve(R,["prevent"])},[S(Tt,{modelValue:l.title,"onUpdate:modelValue":x[0]||(x[0]=w=>l.title=w),label:C(a)("CAPTAIN.CUSTOM_TOOLS.FORM.TITLE.LABEL"),placeholder:C(a)("CAPTAIN.CUSTOM_TOOLS.FORM.TITLE.PLACEHOLDER"),message:b.value.title,"message-type":b.value.title?"error":"info"},null,8,["modelValue","label","placeholder","message","message-type"]),S(lo,{modelValue:l.description,"onUpdate:modelValue":x[1]||(x[1]=w=>l.description=w),label:C(a)("CAPTAIN.CUSTOM_TOOLS.FORM.DESCRIPTION.LABEL"),placeholder:C(a)("CAPTAIN.CUSTOM_TOOLS.FORM.DESCRIPTION.PLACEHOLDER"),rows:2},null,8,["modelValue","label","placeholder"]),m("div",EZe,[m("div",bZe,[m("label",TZe,I(C(a)("CAPTAIN.CUSTOM_TOOLS.FORM.HTTP_METHOD.LABEL")),1),S(Ha,{modelValue:l.http_method,"onUpdate:modelValue":x[2]||(x[2]=w=>l.http_method=w),options:u.value,class:"[&>div>button]:bg-n-alpha-black2 [&_li]:font-mono [&_button]:font-mono [&>div>button]:outline-offset-[-1px]"},null,8,["modelValue","options"])]),S(Tt,{modelValue:l.endpoint_url,"onUpdate:modelValue":x[3]||(x[3]=w=>l.endpoint_url=w),label:C(a)("CAPTAIN.CUSTOM_TOOLS.FORM.ENDPOINT_URL.LABEL"),placeholder:C(a)("CAPTAIN.CUSTOM_TOOLS.FORM.ENDPOINT_URL.PLACEHOLDER"),message:b.value.endpoint_url,"message-type":b.value.endpoint_url?"error":"info",class:"flex-1"},null,8,["modelValue","label","placeholder","message","message-type"])]),m("div",SZe,[m("label",AZe,I(C(a)("CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_TYPE.LABEL")),1),S(Ha,{modelValue:l.auth_type,"onUpdate:modelValue":x[4]||(x[4]=w=>l.auth_type=w),options:d.value,class:"[&>div>button]:bg-n-alpha-black2"},null,8,["modelValue","options"])]),S(vZe,{"auth-config":l.auth_config,"onUpdate:authConfig":x[5]||(x[5]=w=>l.auth_config=w),"auth-type":l.auth_type},null,8,["auth-config","auth-type"]),m("div",yZe,[m("label",IZe,I(C(a)("CAPTAIN.CUSTOM_TOOLS.FORM.PARAMETERS.LABEL")),1),m("p",CZe,I(C(a)("CAPTAIN.CUSTOM_TOOLS.FORM.PARAMETERS.HELP_TEXT")),1),l.param_schema.length>0?(p(),E("ul",NZe,[(p(!0),E(ue,null,Ae(l.param_schema,(w,D)=>(p(),L(gZe,{key:D,ref_for:!0,ref_key:"paramsRef",ref:A,name:w.name,"onUpdate:name":M=>w.name=M,type:w.type,"onUpdate:type":M=>w.type=M,description:w.description,"onUpdate:description":M=>w.description=M,required:w.required,"onUpdate:required":M=>w.required=M,onRemove:M=>T(D)},null,8,["name","onUpdate:name","type","onUpdate:type","description","onUpdate:description","required","onUpdate:required","onRemove"]))),128))])):$("",!0),S(te,{type:"button",sm:"",ghost:"",blue:"",icon:"i-lucide-plus",label:C(a)("CAPTAIN.CUSTOM_TOOLS.FORM.ADD_PARAMETER"),onClick:_},null,8,["label"])]),l.http_method==="POST"?(p(),L(lo,{key:0,modelValue:l.request_template,"onUpdate:modelValue":x[6]||(x[6]=w=>l.request_template=w),label:C(a)("CAPTAIN.CUSTOM_TOOLS.FORM.REQUEST_TEMPLATE.LABEL"),placeholder:C(a)("CAPTAIN.CUSTOM_TOOLS.FORM.REQUEST_TEMPLATE.PLACEHOLDER"),rows:4,class:"[&_textarea]:font-mono"},null,8,["modelValue","label","placeholder"])):$("",!0),S(lo,{modelValue:l.response_template,"onUpdate:modelValue":x[7]||(x[7]=w=>l.response_template=w),label:C(a)("CAPTAIN.CUSTOM_TOOLS.FORM.RESPONSE_TEMPLATE.LABEL"),placeholder:C(a)("CAPTAIN.CUSTOM_TOOLS.FORM.RESPONSE_TEMPLATE.PLACEHOLDER"),rows:4,class:"[&_textarea]:font-mono"},null,8,["modelValue","label","placeholder"]),m("div",OZe,[S(te,{type:"button",variant:"faded",color:"slate",label:C(a)("CAPTAIN.FORM.CANCEL"),class:"w-full bg-n-alpha-2 text-n-blue-text hover:bg-n-alpha-3",onClick:N},null,8,["label"]),S(te,{type:"submit",label:C(a)(e.mode==="edit"?"CAPTAIN.FORM.EDIT":"CAPTAIN.FORM.CREATE"),class:"w-full","is-loading":g.value,disabled:g.value},null,8,["label","is-loading","disabled"])])],32))}},xZe={__name:"CreateCustomToolDialog",props:{selectedTool:{type:Object,default:()=>({})},type:{type:String,default:"create",validator:e=>["create","edit"].includes(e)}},emits:["close"],setup(e,{expose:t,emit:n}){const s=e,a=n,{t:o}=be(),i=rt(),l=j(null),r=f=>i.dispatch("captainCustomTools/update",{id:s.selectedTool.id,...f}),c=y(()=>`CAPTAIN.CUSTOM_TOOLS.${s.type.toUpperCase()}`),u=f=>i.dispatch("captainCustomTools/create",f),d=async f=>{try{s.type==="edit"?await r(f):await u(f),ne(o(`${c.value}.SUCCESS_MESSAGE`)),l.value.close()}catch(b){const A=Ir(b)||o(`${c.value}.ERROR_MESSAGE`);ne(A)}},h=()=>{a("close")},g=()=>{l.value.close()};return t({dialogRef:l}),(f,b)=>(p(),L($n,{ref_key:"dialogRef",ref:l,width:"2xl",title:f.$t(`${c.value}.TITLE`),description:f.$t("CAPTAIN.CUSTOM_TOOLS.FORM_DESCRIPTION"),"show-cancel-button":!1,"show-confirm-button":!1,onClose:h},{footer:Y(()=>b[0]||(b[0]=[])),default:Y(()=>[S(RZe,{mode:e.type,tool:e.selectedTool,onSubmit:d,onCancel:g},null,8,["mode","tool"])]),_:1},8,["title","description"]))}},wZe={class:"flex relative justify-between w-full gap-1"},$Ze={class:"text-base text-n-slate-12 line-clamp-1 font-medium"},MZe={class:"flex items-center gap-2"},LZe={class:"flex items-center justify-between w-full gap-4"},DZe={class:"flex items-center gap-3 flex-1"},PZe={key:0,class:"text-sm truncate text-n-slate-11 flex-1"},kZe={key:1,class:"text-sm shrink-0 text-n-slate-11 inline-flex items-center gap-1"},BZe={class:"text-sm text-n-slate-11 line-clamp-1 shrink-0"},UZe={__name:"CustomToolCard",props:{id:{type:Number,required:!0},title:{type:String,required:!0},description:{type:String,default:""},authType:{type:String,default:"none"},updatedAt:{type:Number,required:!0},createdAt:{type:Number,required:!0}},emits:["action"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),[o,i]=yn(),l=y(()=>[{label:a("CAPTAIN.CUSTOM_TOOLS.OPTIONS.EDIT_TOOL"),value:"edit",action:"edit",icon:"i-lucide-pencil-line"},{label:a("CAPTAIN.CUSTOM_TOOLS.OPTIONS.DELETE_TOOL"),value:"delete",action:"delete",icon:"i-lucide-trash"}]),r=y(()=>us(n.updatedAt||n.createdAt)),c=({action:d,value:h})=>{i(!1),s("action",{action:d,value:h,id:n.id})},u=y(()=>a(`CAPTAIN.CUSTOM_TOOLS.FORM.AUTH_TYPES.${n.authType.toUpperCase()}`));return(d,h)=>{const g=Qe("on-clickaway");return p(),L(ba,{class:"relative"},{default:Y(()=>[m("div",wZe,[m("span",$Ze,I(e.title),1),m("div",MZe,[re((p(),L(js,{permissions:["administrator"],class:"relative flex items-center group"},{default:Y(()=>[S(te,{icon:"i-lucide-ellipsis-vertical",color:"slate",size:"xs",class:"rounded-md group-hover:bg-n-alpha-2",onClick:h[0]||(h[0]=f=>C(i)())}),C(o)?(p(),L(qs,{key:0,"menu-items":l.value,class:"mt-1 ltr:right-0 rtl:right-0 top-full",onAction:h[1]||(h[1]=f=>c(f))},null,8,["menu-items"])):$("",!0)]),_:1})),[[g,()=>C(i)(!1)]])])]),m("div",LZe,[m("div",DZe,[e.description?(p(),E("span",PZe,I(e.description),1)):$("",!0),e.authType!=="none"?(p(),E("span",kZe,[h[2]||(h[2]=m("i",{class:"i-lucide-lock text-base"},null,-1)),xe(" "+I(u.value),1)])):$("",!0)]),m("span",BZe,I(r.value),1)])]),_:1})}}},FZe={class:"flex flex-col gap-4"},GZe={__name:"Index",setup(e){const t=rt(),n=_e("captainCustomTools/getUIFlags"),s=_e("captainCustomTools/getRecords"),a=y(()=>n.value.fetchingList),o=_e("captainCustomTools/getMeta"),i=j(null),l=j(null),r=j(null),c=j(""),u=(T=1)=>{t.dispatch("captainCustomTools/get",{page:T})},d=T=>u(T),h=()=>{c.value="create",r.value=null,Wt(()=>i.value.dialogRef.open())},g=T=>{c.value="edit",r.value=T,Wt(()=>i.value.dialogRef.open())},f=T=>{r.value=T,Wt(()=>l.value.dialogRef.open())},b=({action:T,id:_})=>{const N=s.value.find(R=>R.id===_);T==="edit"?g(N):T==="delete"&&f(N)},A=()=>{c.value="",r.value=null},v=()=>{r.value=null,s.value.length===1&&o.value.page>1?d(o.value.page-1):u(o.value.page)};return lt(()=>{u()}),(T,_)=>(p(),E(ue,null,[S(fo,{"header-title":T.$t("CAPTAIN.CUSTOM_TOOLS.HEADER"),"button-label":T.$t("CAPTAIN.CUSTOM_TOOLS.ADD_NEW"),"button-policy":["administrator"],"total-count":C(o).totalCount,"current-page":C(o).page,"show-pagination-footer":!a.value&&!!C(s).length,"is-fetching":a.value,"is-empty":!C(s).length,"feature-flag":C(ft).CAPTAIN_V2,"show-know-more":!1,"onUpdate:currentPage":d,onClick:h},{paywall:Y(()=>[S(Eu)]),emptyState:Y(()=>[S(cZe,{onClick:h})]),body:Y(()=>[m("div",FZe,[(p(!0),E(ue,null,Ae(C(s),N=>(p(),L(UZe,{id:N.id,key:N.id,title:N.title,description:N.description,"endpoint-url":N.endpoint_url,"http-method":N.http_method,"auth-type":N.auth_type,"param-schema":N.param_schema,enabled:N.enabled,"created-at":N.created_at,"updated-at":N.updated_at,onAction:b},null,8,["id","title","description","endpoint-url","http-method","auth-type","param-schema","enabled","created-at","updated-at"]))),128))])]),_:1},8,["header-title","button-label","total-count","current-page","show-pagination-footer","is-fetching","is-empty","feature-flag"]),c.value?(p(),L(xZe,{key:0,ref_key:"createDialogRef",ref:i,type:c.value,"selected-tool":r.value,onClose:A},null,8,["type","selected-tool"])):$("",!0),r.value?(p(),L(Ur,{key:1,ref_key:"deleteDialogRef",ref:l,entity:r.value,type:"CustomTools","translation-key":"CUSTOM_TOOLS",onDeleteSuccess:v},null,8,["entity"])):$("",!0)],64))}},nl={permissions:["administrator","agent"],featureFlag:ft.CAPTAIN,installationTypes:[Gn.CLOUD,Gn.ENTERPRISE]},ld={permissions:["administrator","agent"],featureFlag:ft.CAPTAIN_V2,installationTypes:[Gn.CLOUD,Gn.ENTERPRISE]},VZe=[{path:vt("accounts/:accountId/captain/:assistantId/faqs"),component:oZe,name:"captain_assistants_responses_index",meta:nl},{path:vt("accounts/:accountId/captain/:assistantId/documents"),component:Qqe,name:"captain_assistants_documents_index",meta:nl},{path:vt("accounts/:accountId/captain/:assistantId/tools"),component:GZe,name:"captain_tools_index",meta:ld},{path:vt("accounts/:accountId/captain/:assistantId/scenarios"),component:iqe,name:"captain_assistants_scenarios_index",meta:ld},{path:vt("accounts/:accountId/captain/:assistantId/playground"),component:WKe,name:"captain_assistants_playground_index",meta:nl},{path:vt("accounts/:accountId/captain/:assistantId/inboxes"),component:RKe,name:"captain_assistants_inboxes_index",meta:nl},{path:vt("accounts/:accountId/captain/:assistantId/faqs/pending"),component:rZe,name:"captain_assistants_responses_pending",meta:nl},{path:vt("accounts/:accountId/captain/:assistantId/settings"),component:_Ke,name:"captain_assistants_settings_index",meta:nl},{path:vt("accounts/:accountId/captain/:assistantId/settings/guardrails"),component:hXe,name:"captain_assistants_guardrails_index",meta:ld},{path:vt("accounts/:accountId/captain/:assistantId/settings/guidelines"),component:CXe,name:"captain_assistants_guidelines_index",meta:ld},{path:vt("accounts/:accountId/captain/assistants"),component:kje,name:"captain_assistants_create_index",meta:{permissions:["administrator","agent"],installationTypes:[Gn.CLOUD,Gn.ENTERPRISE]}},{path:vt("accounts/:accountId/captain/:navigationPath"),component:hYe,name:"captain_assistants_index",meta:nl}],HZe=[{path:vt("accounts/:accountId/captain"),component:pYe,redirect:e=>({name:"captain_assistants_index",params:{navigationPath:"captain_assistants_responses_index",...e.params}}),children:[...VZe]}],a2=Symbol("SidebarControl");function fv(){const e=Ro(a2,null);if(e===null)throw new Error("Component is missing a parent <Sidebar /> component.");const t=Ft(),{shouldShow:n}=Cl(),s=c=>{var u;return c&&((u=t.resolve(c))==null?void 0:u.path)||"/"},a=c=>t.getRoutes().find(d=>d.name===c),o=c=>{var u,d,h,g;if(!c)return[];if((u=c.params)!=null&&u.navigationPath){const f=a(c.params.navigationPath);return((d=f==null?void 0:f.meta)==null?void 0:d.permissions)??[]}return((g=(h=t.resolve(c))==null?void 0:h.meta)==null?void 0:g.permissions)??[]},i=c=>{var u,d,h,g;if(!c)return"";if((u=c.params)!=null&&u.navigationPath){const f=a(c.params.navigationPath);return((d=f==null?void 0:f.meta)==null?void 0:d.featureFlag)||""}return((g=(h=t.resolve(c))==null?void 0:h.meta)==null?void 0:g.featureFlag)||""},l=c=>{var u,d,h,g;if(!c)return[];if((u=c.params)!=null&&u.navigationPath){const f=a(c.params.navigationPath);return((d=f==null?void 0:f.meta)==null?void 0:d.installationTypes)||[]}return((g=(h=t.resolve(c))==null?void 0:h.meta)==null?void 0:g.installationTypes)||[]};return{...e,resolvePath:s,resolvePermissions:o,resolveFeatureFlag:i,isAllowed:c=>{const u=o(c),d=i(c),h=l(c);return n(d,u,h)}}}function WZe(e){Hn(a2,e)}function zZe(e){const t={$mod:navigator.platform.includes("Mac")?"":"Ctrl",shift:"",alt:"",ctrl:"Ctrl",cmd:"",option:"",enter:"",tab:"",esc:""};return y(()=>e.map(n=>t[n.toLowerCase()]||n).join("").toUpperCase())}function YZe(e){const t=wt(),n=Ft(),s=i=>t.name===i,a=i=>{s(i)||n.push({name:i})};return Os({"$mod+Slash":{action:()=>e(!0)},"$mod+Escape":{action:()=>e(!1)},"Alt+KeyC":{action:()=>a("home")},"Alt+KeyV":{action:()=>a("contacts_dashboard")},"Alt+KeyR":{action:()=>a("account_overview_reports")},"Alt+KeyS":{action:()=>a("agent_list")}})}const jZe={key:0,class:"relative flex items-center gap-2"},KZe={key:1,class:"size-2 -top-px ltr:-right-px rtl:-left-px bg-n-brand absolute rounded-full border border-n-solid-2"},XZe={class:"flex items-center gap-1.5 flex-grow min-w-0"},qZe={class:"text-sm font-medium leading-5 truncate"},ZZe={__name:"SidebarGroupHeader",props:{to:{type:[Object,String],default:""},label:{type:String,default:""},icon:{type:[String,Object],default:""},expandable:{type:Boolean,default:!1},isExpanded:{type:Boolean,default:!1},isActive:{type:Boolean,default:!1},hasActiveChild:{type:Boolean,default:!1},getterKeys:{type:Object,default:()=>({})}},emits:["toggle"],setup(e,{emit:t}){const n=e,s=t,a=_e(n.getterKeys.badge),o=_e(n.getterKeys.count),i=y(()=>o.value>99?"99+":o.value);return(l,r)=>(p(),L(ds(e.to?"router-link":"div"),{class:ae(["flex items-center gap-2 px-2 py-1.5 rounded-lg h-8 min-w-0",{"text-n-blue-text bg-n-alpha-2 font-medium":e.isActive&&!e.hasActiveChild,"text-n-slate-12 font-medium":e.hasActiveChild,"text-n-slate-11 hover:bg-n-alpha-2":!e.isActive&&!e.hasActiveChild}]),role:"button",draggable:"false",to:e.to,title:e.label,onClick:r[1]||(r[1]=Ve(c=>s("toggle"),["stop"]))},{default:Y(()=>[e.icon?(p(),E("div",jZe,[e.icon?(p(),L(dt,{key:0,icon:e.icon,class:"size-4"},null,8,["icon"])):$("",!0),C(a)?(p(),E("span",KZe)):$("",!0)])):$("",!0),m("div",XZe,[m("span",qZe,I(e.label),1),C(o)&&!e.expandable?(p(),E("span",{key:0,class:ae(["rounded-md capitalize text-xs leading-5 font-medium text-center outline outline-1 px-1 flex-shrink-0",{"text-n-blue-text outline-n-slate-6":e.isActive,"text-n-slate-11 outline-n-strong":!e.isActive}])},I(i.value),3)):$("",!0)]),e.expandable?re((p(),E("span",{key:1,class:"i-lucide-chevron-up size-3",onClick:r[0]||(r[0]=Ve(c=>s("toggle"),["stop"]))},null,512)),[[rn,e.isExpanded]]):$("",!0)]),_:1},8,["to","title","class"]))}},QZe={class:"flex-1 truncate min-w-0"},o2={__name:"SidebarGroupLeaf",props:{label:{type:String,required:!0},to:{type:[String,Object],required:!0},icon:{type:[String,Object],default:null},active:{type:Boolean,default:!1},component:{type:Function,default:null}},setup(e){const t=e,{resolvePermissions:n,resolveFeatureFlag:s}=fv(),a=y(()=>typeof t.component=="function"||dS(t.component));return(o,i)=>(p(),L(js,{permissions:C(n)(e.to),"feature-flag":C(s)(e.to),as:"li",class:"py-0.5 ltr:pl-3 rtl:pr-3 rtl:mr-3 ltr:ml-3 relative text-n-slate-11 child-item before:bg-n-slate-4 after:bg-transparent after:border-n-slate-4 before:left-0 rtl:before:right-0"},{default:Y(()=>[(p(),L(ds(e.to?"router-link":"div"),{to:e.to,title:e.label,class:ae(["flex h-8 items-center gap-2 px-2 py-1 rounded-lg max-w-[9.438rem] hover:bg-gradient-to-r from-transparent via-n-slate-3/70 to-n-slate-3/70 group",{"text-n-blue-text bg-n-alpha-2 active":e.active}])},{default:Y(()=>[a.value?(p(),L(ds(e.component),{key:0,label:e.label,icon:e.icon,active:e.active},null,8,["label","icon","active"])):(p(),E(ue,{key:1},[e.icon?(p(),L(dt,{key:0,icon:e.icon,class:"size-4 inline-block"},null,8,["icon"])):$("",!0),m("div",QZe,I(e.label),1)],64))]),_:1},8,["to","title","class"]))]),_:1},8,["permissions","feature-flag"]))}},JZe={class:"flex items-center gap-2 px-2 py-1.5 rounded-lg h-8 text-n-slate-10 select-none pointer-events-none"},eQe={class:"text-sm font-medium leading-5 flex-grow"},tQe={__name:"SidebarGroupSeparator",props:{label:{type:String,default:""},icon:{type:String,default:""}},setup(e){return(t,n)=>(p(),E("div",JZe,[e.icon?(p(),L(dt,{key:0,icon:e.icon,class:"size-4"},null,8,["icon"])):$("",!0),m("span",eQe,I(e.label),1)]))}},nQe={key:1,class:"m-0 list-none reset-base relative group"},sQe={key:0,class:"absolute bg-gradient-to-t from-n-solid-2 w-full h-12 to-transparent -bottom-1 pointer-events-none flex items-end justify-end px-2 animate-fade-in-up"},aQe={__name:"SidebarSubGroup",props:{isExpanded:{type:Boolean,default:!1},label:{type:String,required:!0},icon:{type:[Object,String],required:!0},children:{type:Array,default:void 0},activeChild:{type:Object,default:void 0}},setup(e){const t=e,{isAllowed:n}=fv(),s=j(null),a=y(()=>t.children.filter(r=>r.to&&n(r.to))),o=y(()=>a.value.length>0),i=y(()=>a.value.length>7),l=j(!1);return ur(s,"scroll",()=>{const{scrollHeight:r,scrollTop:c,clientHeight:u}=s.value;l.value=r-c===u}),(r,c)=>(p(),E(ue,null,[o.value?re((p(),L(tQe,{key:0,label:e.label,icon:e.icon,class:"my-1"},null,8,["label","icon"])),[[rn,e.isExpanded]]):$("",!0),e.children.length?(p(),E("ul",nQe,[m("div",{ref_key:"scrollableContainer",ref:s,class:ae({"max-h-[calc(14rem+16px)] overflow-y-scroll no-scrollbar":i.value})},[(p(!0),E(ue,null,Ae(e.children,u=>{var d,h;return re((p(),L(o2,Qn({ref_for:!0},u,{key:u.name,active:((d=e.activeChild)==null?void 0:d.name)===u.name}),null,16,["active"])),[[rn,e.isExpanded||((h=e.activeChild)==null?void 0:h.name)===u.name]])}),128))],2),i.value&&e.isExpanded?re((p(),E("div",sQe,c[0]||(c[0]=[m("svg",{width:"16",height:"24",viewBox:"0 0 16 24",fill:"none",class:"text-n-slate-9 opacity-50 group-hover:opacity-100",xmlns:"http://www.w3.org/2000/svg"},[m("path",{d:"M4 4L8 8L12 4",stroke:"currentColor",opacity:"0.5","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"}),m("path",{d:"M4 10L8 14L12 10",stroke:"currentColor",opacity:"0.75","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"}),m("path",{d:"M4 16L8 20L12 16",stroke:"currentColor","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),512)),[[rn,!l.value]]):$("",!0)])):$("",!0)],64))}},oQe={class:"py-1 pl-3 text-n-slate-10 border rounded-lg border-dashed text-center border-n-alpha-2 text-xs h-8 grid place-content-center select-none pointer-events-none"},iQe={__name:"SidebarGroupEmptyLeaf",setup(e){const{t}=be();return(n,s)=>(p(),E("li",oQe,[We(n.$slots,"default",{},()=>[xe(I(C(t)("SIDEBAR.NO_ITEMS")),1)])]))}},lQe={key:0,class:"grid m-0 list-none sidebar-group-children"},rQe={key:1},cQe={__name:"SidebarGroup",props:{name:{type:String,required:!0},label:{type:String,required:!0},icon:{type:[String,Object,Function],default:null},to:{type:Object,default:null},activeOn:{type:Array,default:()=>[]},children:{type:Array,default:void 0},getterKeys:{type:Object,default:()=>({})}},setup(e){const t=e,{expandedItem:n,setExpandedItem:s,resolvePath:a,resolvePermissions:o,resolveFeatureFlag:i,isAllowed:l}=fv(),r=y(()=>{var N;return((N=t.children)==null?void 0:N.flatMap(R=>R.children||R))||[]}),c=wt(),u=Ft(),d=y(()=>n.value===t.name),h=y(()=>t.children),g=y(()=>Array.isArray(t.children)&&t.children.length>0),f=y(()=>g.value?t.children.filter(N=>N.to&&l(N.to)):[]),b=y(()=>f.value.length>0),A=y(()=>t.to?c.path===a(t.to)?!0:t.activeOn.includes(c.name):!1),v=y(()=>{const N=r.value.find(O=>O.to&&c.path===a(O.to));if(N)return N;const R=r.value.filter(O=>{var x;return(x=O.activeOn)==null?void 0:x.includes(c.name)});return R.length>0?R.find(x=>Object.keys(x.to.params).map(w=>String(x.to.params[w])===String(c.params[w])).every(w=>w))??R[0]:r.value.find(O=>O.to&&c.path.startsWith(a(O.to)))}),T=y(()=>v.value!==void 0),_=()=>{if(b.value&&!d.value&&!T.value){const N=f.value[0];u.push(N.to)}s(t.name)};return lt(async()=>{await Wt(),T.value&&s(t.name)}),(N,R)=>!g.value||b.value?(p(),L(js,{key:0,permissions:C(o)(e.to),"feature-flag":C(i)(e.to),as:"li",class:"grid gap-1 text-sm cursor-pointer select-none"},{default:Y(()=>[S(ZZe,{icon:e.icon,name:e.name,label:e.label,to:e.to,"getter-keys":e.getterKeys,"is-active":A.value,"has-active-child":T.value,expandable:g.value,"is-expanded":d.value,onToggle:_},null,8,["icon","name","label","to","getter-keys","is-active","has-active-child","expandable","is-expanded"]),g.value?re((p(),E("ul",lQe,[(p(!0),E(ue,null,Ae(e.children,O=>{var x,w;return p(),E(ue,{key:O.name},[O.children?(p(),L(aQe,{key:0,label:O.label,icon:O.icon,children:O.children,"is-expanded":d.value,"active-child":v.value},null,8,["label","icon","children","is-expanded","active-child"])):C(l)(O.to)?re((p(),L(o2,Qn({key:1,ref_for:!0},O,{active:((x=v.value)==null?void 0:x.name)===O.name}),null,16,["active"])),[[rn,d.value||((w=v.value)==null?void 0:w.name)===O.name]]):$("",!0)],64)}),128))],512)),[[rn,d.value||T.value]]):h.value&&d.value?(p(),E("ul",rQe,[S(iQe)])):$("",!0)]),_:1},8,["permissions","feature-flag"])):$("",!0)}},uQe={},dQe={class:"h-0 border-b border-n-strong -mx-2"};function pQe(e,t){return p(),E("div",dQe)}const mQe=De(uQe,[["render",pQe]]),hQe={class:"grid gap-0"},fQe={class:"flex-grow flex items-center gap-1"},gQe={class:"flex gap-1 items-center flex-grow text-sm"},_Qe={class:"p-1 flex-shrink-0"},vQe={class:"flex-grow flex items-center gap-1"},EQe={__name:"SidebarProfileMenuStatus",setup(e){const{t}=be(),n=rt(),s=_e("getCurrentUserAvailability"),a=_e("getCurrentAccountId"),o=_e("getCurrentUserAutoOffline"),{isImpersonating:i}=X0(),{AVAILABILITY_STATUS_KEYS:l}=yt,r=y(()=>[t("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.ONLINE"),t("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.BUSY"),t("PROFILE_SETTINGS.FORM.AVAILABILITY.STATUS.OFFLINE")]),c=["bg-n-teal-9","bg-n-amber-9","bg-n-slate-9"],u=y(()=>r.value.map((f,b)=>({label:f,value:l[b],color:c[b],icon:On("span",{class:[c[b],"size-[12px] rounded"]}),active:s.value===l[b]}))),d=y(()=>u.value.find(f=>f.active)),h=y({get:()=>o.value,set:f=>{n.dispatch("updateAutoOffline",{accountId:a.value,autoOffline:f})}});function g(f){if(i.value){ne(t("PROFILE_SETTINGS.FORM.AVAILABILITY.IMPERSONATING_ERROR"));return}try{n.dispatch("updateAvailability",{availability:f,account_id:a.value})}catch{ne(t("PROFILE_SETTINGS.FORM.AVAILABILITY.SET_AVAILABILITY_ERROR"))}}return(f,b)=>{const A=Qe("tooltip");return p(),L(C(xr),{class:"[&>ul]:overflow-visible"},{default:Y(()=>[m("div",hQe,[S(C(Ba),{"preserve-open":""},{default:Y(()=>[m("div",fQe,I(f.$t("SIDEBAR.SET_YOUR_AVAILABILITY")),1),S(C(Tl),null,{trigger:Y(({toggle:v})=>[S(te,{size:"sm",color:"slate",variant:"faded",class:"min-w-[96px]",icon:"i-lucide-chevron-down","trailing-icon":"",onClick:v},{default:Y(()=>[m("div",gQe,[m("div",_Qe,[m("div",{class:ae(["size-2 rounded-sm",d.value.color])},null,2)]),m("span",null,I(d.value.label),1)])]),_:2},1032,["onClick"])]),default:Y(()=>[S(C(Sl),{class:"min-w-32 z-20"},{default:Y(()=>[(p(!0),E(ue,null,Ae(u.value,v=>(p(),L(C(Ba),{key:v.value,label:v.label,icon:v.icon,class:"cursor-pointer",onClick:T=>g(v.value)},null,8,["label","icon","onClick"]))),128))]),_:1})]),_:1})]),_:1}),S(C(Ba),null,{default:Y(()=>[m("div",vQe,[xe(I(f.$t("SIDEBAR.SET_AUTO_OFFLINE.TEXT"))+" ",1),re(S(dt,{icon:"i-lucide-info",class:"size-4 text-n-slate-10"},null,512),[[A,f.$t("SIDEBAR.SET_AUTO_OFFLINE.INFO_SHORT"),void 0,{top:!0}]])]),S(va,{modelValue:h.value,"onUpdate:modelValue":b[0]||(b[0]=v=>h.value=v)},null,8,["modelValue"])]),_:1})])]),_:1})}}},bQe=["onClick"],TQe={class:"min-w-0"},SQe={class:"text-sm font-medium leading-4 truncate text-n-slate-12"},AQe={class:"text-xs truncate text-n-slate-11"},yQe=Object.assign({inheritAttrs:!1},{__name:"SidebarProfileMenu",emits:["close","openKeyShortcutModal"],setup(e,{emit:t}){const n=t,{t:s}=be(),a=_e("getCurrentUser"),o=_e("getCurrentUserAvailability"),i=_e("getCurrentAccountId"),l=_e("globalConfig/get"),r=_e("accounts/isFeatureEnabledonAccount"),c=y(()=>r.value(i.value,ft.CONTACT_CHATWOOT_SUPPORT_TEAM)&&l.value.chatwootInboxToken),u=y(()=>[{show:c.value,showOnCustomBrandedInstance:!1,label:s("SIDEBAR_ITEMS.CONTACT_SUPPORT"),icon:"i-lucide-life-buoy",click:()=>{window.$chatwoot.toggle()}},{show:!0,showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.KEYBOARD_SHORTCUTS"),icon:"i-lucide-keyboard",click:()=>{n("openKeyShortcutModal")}},{show:!0,showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.PROFILE_SETTINGS"),icon:"i-lucide-user-pen",link:{name:"profile_settings_index"}},{show:!0,showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.APPEARANCE"),icon:"i-lucide-palette",click:()=>{document.querySelector("ninja-keys").open({parent:"appearance_settings"})}},{show:!0,showOnCustomBrandedInstance:!1,label:s("SIDEBAR_ITEMS.DOCS"),icon:"i-lucide-book",link:"https://www.chatwoot.com/hc/user-guide/en",nativeLink:!0,target:"_blank"},{show:!0,showOnCustomBrandedInstance:!1,label:s("SIDEBAR_ITEMS.CHANGELOG"),icon:"i-lucide-scroll-text",link:"https://www.chatwoot.com/changelog/",nativeLink:!0,target:"_blank"},{show:a.value.type==="SuperAdmin",showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.SUPER_ADMIN_CONSOLE"),icon:"i-lucide-castle",link:"/super_admin",nativeLink:!0,target:"_blank"},{show:!0,showOnCustomBrandedInstance:!0,label:s("SIDEBAR_ITEMS.LOGOUT"),icon:"i-lucide-power",click:hl.logout}]),d=y(()=>u.value.filter(h=>h.show));return(h,g)=>(p(),L(C(Tl),{class:"relative w-full min-w-0",onClose:g[0]||(g[0]=f=>n("close"))},{trigger:Y(({toggle:f,isOpen:b})=>[m("button",{class:ae(["flex gap-2 items-center p-1 w-full text-left rounded-lg cursor-pointer hover:bg-n-alpha-1",{"bg-n-alpha-1":b}]),onClick:f},[S(kt,{size:32,name:C(a).available_name,src:C(a).avatar_url,status:C(o),class:"flex-shrink-0","rounded-full":""},null,8,["name","src","status"]),m("div",TQe,[m("div",SQe,I(C(a).available_name),1),m("div",AQe,I(C(a).email),1)])],10,bQe)]),default:Y(()=>[S(C(Sl),{class:"bottom-12 z-50 mb-2 w-80 ltr:left-0 rtl:right-0"},{default:Y(()=>[S(EQe),S(C(mQe)),(p(!0),E(ue,null,Ae(d.value,f=>(p(),L($f,{key:f.label,"show-on-custom-branded-instance":f.showOnCustomBrandedInstance},{default:Y(()=>[f.show?(p(),L(C(Ba),Qn({key:0,ref_for:!0},f),null,16)):$("",!0)]),_:2},1032,["show-on-custom-branded-instance"]))),128))]),_:1})]),_:1}))}}),IQe=["title"],CQe=["title"],NQe={key:0,class:"block overflow-hidden my-3 rounded-md border border-n-weak/40"},OQe=["src","alt"],RQe={key:1,class:"block overflow-hidden my-3 rounded-md border border-n-weak/40"},xQe=["src","alt"],wQe={class:"flex justify-between items-center mt-1"},$Qe={__name:"StackedChangelogCard",props:{card:{type:Object,required:!0},isActive:{type:Boolean,default:!1},isDismissing:{type:Boolean,default:!1}},emits:["readMore","dismiss","imgClick"],setup(e,{emit:t}){const n=t,s=()=>{n("readMore")},a=()=>{n("dismiss")},o=()=>{n("imgClick")};return(i,l)=>(p(),E("div",{"data-testid":"changelog-card",class:ae(["flex flex-col justify-between p-3 w-full rounded-lg border shadow-sm transition-all duration-200 border-n-weak bg-n-background text-n-slate-12",{"animate-fade-out pointer-events-none":e.isDismissing,"hover:shadow":e.isActive}])},[m("div",null,[m("h5",{title:e.card.meta_title,class:"mb-1 text-sm font-semibold line-clamp-1 text-n-slate-12"},I(e.card.meta_title),9,IQe),m("p",{title:e.card.meta_description,class:"mb-0 text-xs leading-relaxed text-n-slate-11 line-clamp-2"},I(e.card.meta_description),9,CQe)]),e.card.feature_image?(p(),E("div",NQe,[m("img",{src:e.card.feature_image,alt:`${e.card.title} preview image`,class:"object-cover w-full h-24 rounded-md cursor-pointer",loading:"lazy",onClick:Ve(o,["stop"])},null,8,OQe)])):(p(),E("div",RQe,[m("img",{src:e.card.feature_image,alt:`${e.card.title} preview image`,class:"object-cover w-full h-24 rounded-md cursor-pointer",loading:"lazy",onClick:Ve(o,["stop"])},null,8,xQe)])),m("div",wQe,[S(te,{label:"Read more",color:"slate",link:"",sm:"",class:"text-xs font-normal hover:!no-underline",onClick:Ve(s,["stop"])}),S(te,{label:"Dismiss",color:"slate",link:"",sm:"",class:"text-xs font-normal hover:!no-underline",onClick:Ve(a,["stop"])})])],2))}},MQe=De($Qe,[["__scopeId","data-v-6df02b79"]]),LQe={class:"overflow-hidden"},DQe={class:"relative grid grid-cols-1 pt-8 pb-1 px-2"},PQe={__name:"GroupedStackedChangelogCard",props:{posts:{type:Array,required:!0},currentIndex:{type:Number,default:0},dismissingSlugs:{type:Array,default:()=>[]}},emits:["readMore","dismiss","imgClick"],setup(e,{emit:t}){const n=e,s=t,a=y(()=>{var u;return(u=n.posts)==null?void 0:u.slice(0,5)}),o=u=>n.dismissingSlugs.includes(u.slug),i=u=>s("readMore",u.slug),l=u=>s("dismiss",u.slug),r=(u,d)=>{d===n.currentIndex&&!o(u)&&s("imgClick",{slug:u.slug,index:d})},c=u=>{const d=(u-n.currentIndex+a.value.length)%a.value.length,h="relative transition-all duration-500 ease-out col-start-1 row-start-1",g=["z-50 scale-100 translate-y-0 opacity-100","z-40 scale-[0.95] -translate-y-3 opacity-90","z-30 scale-[0.9] -translate-y-6 opacity-70","z-20 scale-[0.85] -translate-y-9 opacity-50","z-10 scale-[0.8] -translate-y-12 opacity-30"];return d<g.length?`${h} ${g[d]}`:`${h} opacity-0 scale-75 -translate-y-16`};return(u,d)=>(p(),E("div",LQe,[m("div",DQe,[(p(!0),E(ue,null,Ae(a.value,(h,g)=>(p(),E("div",{key:h.slug||g,class:ae(c(g))},[S(MQe,{card:h,"is-active":g===e.currentIndex,"is-dismissing":o(h),onReadMore:f=>i(h),onDismiss:f=>l(h),onImgClick:f=>r(h,g)},null,8,["card","is-active","is-dismissing","onReadMore","onDismiss","onImgClick"])],2))),128))])]))}};class kQe extends Ea{constructor(){super("changelog",{apiVersion:"v1"})}fetchFromHub(){return dg.get(rLe)}}const BQe=new kQe,UQe=5,FQe={__name:"SidebarChangelogCard",setup(e){const{uiSettings:t,updateUISettings:n}=tn(),s=j([]),a=j(0),o=j([]),i=j(!1),l=y(()=>t.value.changelog_dismissed_slugs||[]),r=y(()=>s.value.filter(f=>!l.value.includes(f.slug))),c=async()=>{i.value=!0;try{const f=await BQe.fetchFromHub();s.value=f.data.posts||[];const b=s.value.map(v=>v.slug),A=l.value.filter(v=>b.includes(v));A.length!==l.value.length&&n({changelog_dismissed_slugs:A})}catch{}finally{i.value=!1}},u=f=>{const b=[...l.value];b.includes(f)||(b.push(f),b.length>UQe&&b.shift(),n({changelog_dismissed_slugs:b}))},d=f=>{o.value.push(f),setTimeout(()=>{u(f),o.value=o.value.filter(b=>b!==f),a.value>=r.value.length&&(a.value=0)},200)},h=()=>{const f=r.value[a.value];f!=null&&f.slug&&window.open(`https://www.chatwoot.com/blog/${f.slug}`,"_blank")},g=({index:f})=>{a.value=f,h()};return lt(()=>{c()}),(f,b)=>r.value.length>0?(p(),L(PQe,{key:0,posts:r.value,"current-index":a.value,"dismissing-slugs":o.value,class:"min-h-[240px] z-10",onReadMore:h,onDismiss:d,onImgClick:g},null,8,["posts","current-index","dismissing-slugs"])):(p(),E(ue,{key:1},[],64))}},GQe={class:"flex-1 truncate min-w-0"},VQe={key:0,class:"grid place-content-center size-5 bg-n-ruby-5/60 rounded-full"},HQe={__name:"ChannelLeaf",props:{label:{type:String,required:!0},active:{type:Boolean,default:!1},inbox:{type:Object,required:!0}},setup(e){const t=e,n=y(()=>t.inbox.reauthorization_required);return(s,a)=>{const o=Qe("tooltip");return p(),E(ue,null,[m("span",{class:ae(["size-5 grid place-content-center rounded-full bg-n-alpha-2",{"bg-n-solid-blue":e.active}])},[S(hg,{inbox:e.inbox,class:"size-3"},null,8,["inbox"])],2),m("div",GQe,I(e.label),1),n.value?re((p(),E("div",VQe,[S(dt,{icon:"i-woot-alert",class:"size-3 text-n-ruby-9"})])),[[o,s.$t("SIDEBAR.REAUTHORIZE"),void 0,{"top-end":!0}]]):$("",!0)],64)}}},WQe=["data-account-id","onClick"],zQe={class:"text-sm font-medium leading-5 text-n-slate-12 truncate","aria-live":"polite"},YQe={key:0,"aria-hidden":"true",class:"i-lucide-chevron-down size-4 text-n-slate-10 flex-shrink-0"},jQe=["for"],KQe=["title"],XQe=["title"],qQe={__name:"SidebarAccountSwitcher",emits:["showCreateAccountModal"],setup(e,{emit:t}){const n=t,{t:s}=be(),{accountId:a,currentAccount:o}=ln(),i=_e("getCurrentUser"),l=_e("globalConfig/get"),r=_e("getUserAccounts"),c=y(()=>r.value.length>1&&o.value.name),u=y(()=>[...i.value.accounts||[]].sort((g,f)=>g.name.localeCompare(f.name))),d=g=>{const f=`/app/accounts/${g}/dashboard`;window.location.href=f},h=()=>{n("showCreateAccountModal")};return(g,f)=>(p(),L(C(Tl),null,{trigger:Y(({toggle:b,isOpen:A})=>[m("button",{id:"sidebar-account-switcher","data-account-id":C(a),"aria-haspopup":"listbox","aria-controls":"account-options",class:ae(["flex items-center gap-2 justify-between w-full rounded-lg px-2",[A&&"bg-n-alpha-1",c.value?"hover:bg-n-alpha-1 cursor-pointer":"cursor-default"]]),onClick:()=>c.value&&b()},[m("span",zQe,I(C(o).name),1),c.value?(p(),E("span",YQe)):$("",!0)],10,WQe)]),default:Y(()=>[c.value?(p(),L(C(Sl),{key:0,class:"min-w-80 z-50"},{default:Y(()=>[S(C(xr),{title:C(s)("SIDEBAR_ITEMS.SWITCH_ACCOUNT")},{default:Y(()=>[(p(!0),E(ue,null,Ae(u.value,b=>(p(),L(C(Ba),{id:`account-${b.id}`,key:b.id,class:"cursor-pointer",onClick:A=>d(b.id)},{label:Y(()=>[m("div",{for:b.name,class:"text-left rtl:text-right flex gap-2 items-center"},[m("span",{class:"text-n-slate-12 max-w-36 truncate min-w-0",title:b.name},I(b.name),9,KQe),f[0]||(f[0]=m("div",{class:"flex-shrink-0 w-px h-3 bg-n-strong"},null,-1)),m("span",{class:"text-n-slate-11 max-w-24 truncate capitalize",title:b.name},I(b.custom_role_id?b.custom_role.name:b.role),9,XQe)],8,jQe),re(S(dt,{icon:"i-lucide-check",class:"text-n-teal-11 size-5"},null,512),[[rn,b.id===C(a)]])]),_:2},1032,["id","onClick"]))),128))]),_:1},8,["title"]),C(l).createNewAccountFromDashboard?(p(),L(C(Ba),{key:0},{default:Y(()=>[S(te,{color:"slate",variant:"faded",class:"w-full",size:"sm",onClick:h},{default:Y(()=>[xe(I(C(s)("CREATE_ACCOUNT.NEW_ACCOUNT")),1)]),_:1})]),_:1})):$("",!0)]),_:1})):$("",!0)]),_:1}))}},ZQe=["src"],QQe={__name:"Logo",setup(e){const t=rg(),n=_e("globalConfig/get");return(s,a)=>C(n).logoThumbnail?(p(),E("img",Qn({key:0},C(t),{src:C(n).logoThumbnail}),null,16,ZQe)):(p(),E("svg",Qn({key:1},C(t),{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),a[0]||(a[0]=[Kl('<g clip-path="url(#woot-logo-clip-2342424e23u32098)"><path d="M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z" fill="#2781F6"></path><path d="M11.4172 11.4172H7.70831C5.66383 11.4172 4 9.75328 4 7.70828C4 5.66394 5.66383 4 7.70835 4C9.75339 4 11.4172 5.66394 11.4172 7.70828V11.4172Z" fill="white" stroke="white" stroke-width="0.1875"></path></g><defs><clipPath id="woot-logo-clip-2342424e23u32098"><rect width="16" height="16" fill="white"></rect></clipPath></defs>',2)]),16))}},JQe={class:"grid gap-2 mt-2 mb-4"},eJe={class:"flex gap-2 items-center px-2 min-w-0"},tJe={class:"grid flex-shrink-0 place-content-center size-6"},nJe={class:"flex gap-2 px-2"},sJe={class:"flex-grow text-left"},aJe={class:"hidden tracking-wide pointer-events-none select-none text-n-slate-10"},oJe={class:"grid overflow-y-scroll flex-grow gap-2 px-2 pb-5 no-scrollbar"},iJe={class:"flex flex-col gap-1.5 m-0 list-none"},lJe={class:"flex flex-col flex-shrink-0 relative gap-1 justify-between items-center"},rJe={class:"p-1 flex-shrink-0 flex w-full justify-between z-10 gap-2 items-center border-t border-n-weak shadow-[0px_-2px_4px_0px_rgba(27,28,29,0.02)]"},cJe={__name:"Sidebar",props:{isMobileSidebarOpen:{type:Boolean,default:!1}},emits:["closeKeyShortcutModal","openKeyShortcutModal","showCreateAccountModal","closeMobileSidebar"],setup(e,{emit:t}){const n=e,s=t,{accountScopedRoute:a,isOnChatwootCloud:o}=ln(),i=na(),l=zZe(["$mod","k"]),{t:r}=be(),c=_e("globalConfig/isACustomBrandedInstance");YZe(x=>{s(x?"openKeyShortcutModal":"closeKeyShortcutModal")});const d=aR("next-sidebar-expanded-item",null,sessionStorage);WZe({expandedItem:d,setExpandedItem:x=>{d.value=d.value===x?null:x}});const g=_e("inboxes/getInboxes"),f=_e("labels/getLabelsOnSidebar"),b=_e("teams/getMyTeams"),A=_e("customViews/getContactCustomViews"),v=_e("customViews/getConversationCustomViews");lt(()=>{i.dispatch("labels/get"),i.dispatch("inboxes/get"),i.dispatch("notifications/unReadCount"),i.dispatch("teams/get"),i.dispatch("attributes/get"),i.dispatch("customViews/get","conversation"),i.dispatch("customViews/get","contact")});const T=y(()=>g.value.slice().sort((x,w)=>x.name.localeCompare(w.name))),_=()=>{n.isMobileSidebarOpen&&s("closeMobileSidebar")},N=()=>[{name:"Reports Agent",label:r("SIDEBAR.REPORTS_AGENT"),to:a("agent_reports_index"),activeOn:["agent_reports_show"]},{name:"Reports Label",label:r("SIDEBAR.REPORTS_LABEL"),to:a("label_reports_index")},{name:"Reports Inbox",label:r("SIDEBAR.REPORTS_INBOX"),to:a("inbox_reports_index"),activeOn:["inbox_reports_show"]},{name:"Reports Team",label:r("SIDEBAR.REPORTS_TEAM"),to:a("team_reports_index"),activeOn:["team_reports_show"]}],R=y(()=>N()),O=y(()=>[{name:"Inbox",label:r("SIDEBAR.INBOX"),icon:"i-lucide-inbox",to:a("inbox_view"),activeOn:["inbox_view","inbox_view_conversation"],getterKeys:{count:"notifications/getUnreadCount"}},{name:"Conversation",label:r("SIDEBAR.CONVERSATIONS"),icon:"i-lucide-message-circle",children:[{name:"All",label:r("SIDEBAR.ALL_CONVERSATIONS"),activeOn:["inbox_conversation"],to:a("home")},{name:"Mentions",label:r("SIDEBAR.MENTIONED_CONVERSATIONS"),activeOn:["conversation_through_mentions"],to:a("conversation_mentions")},{name:"Unattended",activeOn:["conversation_through_unattended"],label:r("SIDEBAR.UNATTENDED_CONVERSATIONS"),to:a("conversation_unattended")},{name:"Folders",label:r("SIDEBAR.CUSTOM_VIEWS_FOLDER"),icon:"i-lucide-folder",activeOn:["conversations_through_folders"],children:v.value.map(x=>({name:`${x.name}-${x.id}`,label:x.name,to:a("folder_conversations",{id:x.id})}))},{name:"Teams",label:r("SIDEBAR.TEAMS"),icon:"i-lucide-users",activeOn:["conversations_through_team"],children:b.value.map(x=>({name:`${x.name}-${x.id}`,label:x.name,to:a("team_conversations",{teamId:x.id})}))},{name:"Channels",label:r("SIDEBAR.CHANNELS"),icon:"i-lucide-mailbox",activeOn:["conversation_through_inbox"],children:T.value.map(x=>({name:`${x.name}-${x.id}`,label:x.name,to:a("inbox_dashboard",{inbox_id:x.id}),component:w=>On(HQe,{label:w.label,active:w.active,inbox:x})}))},{name:"Labels",label:r("SIDEBAR.LABELS"),icon:"i-lucide-tag",activeOn:["conversations_through_label"],children:f.value.map(x=>({name:`${x.title}-${x.id}`,label:x.title,icon:On("span",{class:"size-[12px] ring-1 ring-n-alpha-1 dark:ring-white/20 ring-inset rounded-sm",style:{backgroundColor:x.color}}),to:a("label_conversations",{label:x.title})}))}]},{name:"Captain",icon:"i-woot-captain",label:r("SIDEBAR.CAPTAIN"),activeOn:["captain_assistants_create_index"],children:[{name:"FAQs",label:r("SIDEBAR.CAPTAIN_RESPONSES"),activeOn:["captain_assistants_responses_index","captain_assistants_responses_pending"],to:a("captain_assistants_index",{navigationPath:"captain_assistants_responses_index"})},{name:"Documents",label:r("SIDEBAR.CAPTAIN_DOCUMENTS"),activeOn:["captain_assistants_documents_index"],to:a("captain_assistants_index",{navigationPath:"captain_assistants_documents_index"})},{name:"Scenarios",label:r("SIDEBAR.CAPTAIN_SCENARIOS"),activeOn:["captain_assistants_scenarios_index"],to:a("captain_assistants_index",{navigationPath:"captain_assistants_scenarios_index"})},{name:"Playground",label:r("SIDEBAR.CAPTAIN_PLAYGROUND"),activeOn:["captain_assistants_playground_index"],to:a("captain_assistants_index",{navigationPath:"captain_assistants_playground_index"})},{name:"Inboxes",label:r("SIDEBAR.CAPTAIN_INBOXES"),activeOn:["captain_assistants_inboxes_index"],to:a("captain_assistants_index",{navigationPath:"captain_assistants_inboxes_index"})},{name:"Tools",label:r("SIDEBAR.CAPTAIN_TOOLS"),activeOn:["captain_tools_index"],to:a("captain_assistants_index",{navigationPath:"captain_tools_index"})},{name:"Settings",label:r("SIDEBAR.CAPTAIN_SETTINGS"),activeOn:["captain_assistants_settings_index","captain_assistants_guidelines_index","captain_assistants_guardrails_index"],to:a("captain_assistants_index",{navigationPath:"captain_assistants_settings_index"})}]},{name:"Contacts",label:r("SIDEBAR.CONTACTS"),icon:"i-lucide-contact",children:[{name:"All Contacts",label:r("SIDEBAR.ALL_CONTACTS"),to:a("contacts_dashboard_index",{},{page:1,search:void 0}),activeOn:["contacts_dashboard_index","contacts_edit"]},{name:"Active",label:r("SIDEBAR.ACTIVE"),to:a("contacts_dashboard_active"),activeOn:["contacts_dashboard_active"]},{name:"Segments",icon:"i-lucide-group",label:r("SIDEBAR.CUSTOM_VIEWS_SEGMENTS"),children:A.value.map(x=>({name:`${x.name}-${x.id}`,label:x.name,to:a("contacts_dashboard_segments_index",{segmentId:x.id},{page:1}),activeOn:["contacts_dashboard_segments_index","contacts_edit_segment"]}))},{name:"Tagged With",icon:"i-lucide-tag",label:r("SIDEBAR.TAGGED_WITH"),children:f.value.map(x=>({name:`${x.title}-${x.id}`,label:x.title,icon:On("span",{class:"size-[12px] ring-1 ring-n-alpha-1 dark:ring-white/20 ring-inset rounded-sm",style:{backgroundColor:x.color}}),to:a("contacts_dashboard_labels_index",{label:x.title},{page:1,search:void 0}),activeOn:["contacts_dashboard_labels_index","contacts_edit_label"]}))}]},{name:"Companies",label:r("SIDEBAR.COMPANIES"),icon:"i-lucide-building-2",children:[{name:"All Companies",label:r("SIDEBAR.ALL_COMPANIES"),to:a("companies_dashboard_index",{},{page:1,search:void 0}),activeOn:["companies_dashboard_index"]}]},{name:"Reports",label:r("SIDEBAR.REPORTS"),icon:"i-lucide-chart-spline",children:[{name:"Report Overview",label:r("SIDEBAR.REPORTS_OVERVIEW"),to:a("account_overview_reports")},{name:"Report Conversation",label:r("SIDEBAR.REPORTS_CONVERSATION"),to:a("conversation_reports")},...R.value,{name:"Reports CSAT",label:r("SIDEBAR.CSAT"),to:a("csat_reports")},{name:"Reports SLA",label:r("SIDEBAR.REPORTS_SLA"),to:a("sla_reports")},{name:"Reports Bot",label:r("SIDEBAR.REPORTS_BOT"),to:a("bot_reports")}]},{name:"Campaigns",label:r("SIDEBAR.CAMPAIGNS"),icon:"i-lucide-megaphone",children:[{name:"Live chat",label:r("SIDEBAR.LIVE_CHAT"),to:a("campaigns_livechat_index")},{name:"SMS",label:r("SIDEBAR.SMS"),to:a("campaigns_sms_index")},{name:"WhatsApp",label:r("SIDEBAR.WHATSAPP"),to:a("campaigns_whatsapp_index")}]},{name:"Portals",label:r("SIDEBAR.HELP_CENTER.TITLE"),icon:"i-lucide-library-big",children:[{name:"Articles",label:r("SIDEBAR.HELP_CENTER.ARTICLES"),activeOn:["portals_articles_index","portals_articles_new","portals_articles_edit"],to:a("portals_index",{navigationPath:"portals_articles_index"})},{name:"Categories",label:r("SIDEBAR.HELP_CENTER.CATEGORIES"),activeOn:["portals_categories_index","portals_categories_articles_index","portals_categories_articles_edit"],to:a("portals_index",{navigationPath:"portals_categories_index"})},{name:"Locales",label:r("SIDEBAR.HELP_CENTER.LOCALES"),activeOn:["portals_locales_index"],to:a("portals_index",{navigationPath:"portals_locales_index"})},{name:"Settings",label:r("SIDEBAR.HELP_CENTER.SETTINGS"),activeOn:["portals_settings_index"],to:a("portals_index",{navigationPath:"portals_settings_index"})}]},{name:"Settings",label:r("SIDEBAR.SETTINGS"),icon:"i-lucide-bolt",children:[{name:"Settings Account Settings",label:r("SIDEBAR.ACCOUNT_SETTINGS"),icon:"i-lucide-briefcase",to:a("general_settings_index")},{name:"Settings Branding",label:r("SIDEBAR.BRANDING"),icon:"i-lucide-image",to:a("branding_settings_index")},{name:"Settings Agents",label:r("SIDEBAR.AGENTS"),icon:"i-lucide-square-user",to:a("agent_list")},{name:"Settings Teams",label:r("SIDEBAR.TEAMS"),icon:"i-lucide-users",to:a("settings_teams_list")},{name:"Settings Agent Assignment",label:r("SIDEBAR.AGENT_ASSIGNMENT"),icon:"i-lucide-user-cog",to:a("assignment_policy_index")},{name:"Settings Inboxes",label:r("SIDEBAR.INBOXES"),icon:"i-lucide-inbox",to:a("settings_inbox_list")},{name:"Settings Labels",label:r("SIDEBAR.LABELS"),icon:"i-lucide-tags",to:a("labels_list")},{name:"Settings Custom Attributes",label:r("SIDEBAR.CUSTOM_ATTRIBUTES"),icon:"i-lucide-code",to:a("attributes_list")},{name:"Settings Automation",label:r("SIDEBAR.AUTOMATION"),icon:"i-lucide-workflow",to:a("automation_list")},{name:"Settings Agent Bots",label:r("SIDEBAR.AGENT_BOTS"),icon:"i-lucide-bot",to:a("agent_bots")},{name:"Settings Macros",label:r("SIDEBAR.MACROS"),icon:"i-lucide-toy-brick",to:a("macros_wrapper")},{name:"Settings Canned Responses",label:r("SIDEBAR.CANNED_RESPONSES"),icon:"i-lucide-message-square-quote",to:a("canned_list")},{name:"Settings Integrations",label:r("SIDEBAR.INTEGRATIONS"),icon:"i-lucide-blocks",to:a("settings_applications")},{name:"Settings Audit Logs",label:r("SIDEBAR.AUDIT_LOGS"),icon:"i-lucide-briefcase",to:a("auditlogs_list")},{name:"Settings Custom Roles",label:r("SIDEBAR.CUSTOM_ROLES"),icon:"i-lucide-shield-plus",to:a("custom_roles_list")},{name:"Settings Sla",label:r("SIDEBAR.SLA"),icon:"i-lucide-clock-alert",to:a("sla_list")},{name:"Settings Security",label:r("SIDEBAR.SECURITY"),icon:"i-lucide-shield",to:a("security_settings_index")},{name:"Settings Billing",label:r("SIDEBAR.BILLING"),icon:"i-lucide-credit-card",to:a("billing_settings_index")}]}]);return(x,w)=>{const D=W("RouterLink");return re((p(),E("aside",{class:ae(["bg-n-solid-2 rtl:border-l ltr:border-r border-n-weak flex flex-col text-sm pb-1 fixed top-0 ltr:left-0 rtl:right-0 h-full z-40 transition-transform duration-200 ease-in-out md:static w-[200px] basis-[200px] md:flex-shrink-0 md:ltr:translate-x-0 md:rtl:-translate-x-0",[{"shadow-lg md:shadow-none":e.isMobileSidebarOpen,"ltr:-translate-x-full rtl:translate-x-full":!e.isMobileSidebarOpen}]])},[m("section",JQe,[m("div",eJe,[m("div",tJe,[S(QQe,{class:"size-4"})]),w[2]||(w[2]=m("div",{class:"flex-shrink-0 w-px h-3 bg-n-strong"},null,-1)),S(qQe,{class:"flex-grow -mx-1 min-w-0",onShowCreateAccountModal:w[0]||(w[0]=M=>s("showCreateAccountModal"))})]),m("div",nJe,[S(D,{to:{name:"search"},class:"flex gap-2 items-center px-2 py-1 w-full h-7 rounded-lg outline outline-1 outline-n-weak bg-n-solid-3 dark:bg-n-black/30"},{default:Y(()=>[w[3]||(w[3]=m("span",{class:"flex-shrink-0 i-lucide-search size-4 text-n-slate-11"},null,-1)),m("span",sJe,I(C(r)("COMBOBOX.SEARCH_PLACEHOLDER")),1),m("span",aJe,I(C(l)),1)]),_:1}),S(Jp,{"align-position":"right"},{trigger:Y(({toggle:M})=>[S(te,{icon:"i-lucide-pen-line",color:"slate",size:"sm",class:"!h-7 !bg-n-solid-3 dark:!bg-n-black/30 !outline-n-weak !text-n-slate-11",onClick:M},null,8,["onClick"])]),_:1})])]),m("nav",oJe,[m("ul",iJe,[(p(!0),E(ue,null,Ae(O.value,M=>(p(),L(cQe,Qn({key:M.name,ref_for:!0},M),null,16))),128))])]),m("section",lJe,[w[4]||(w[4]=m("div",{class:"pointer-events-none absolute inset-x-0 -top-[31px] h-8 bg-gradient-to-t from-n-solid-2 to-transparent"},null,-1)),C(o)&&!C(c)?(p(),L(FQe,{key:0})):$("",!0),m("div",rJe,[S(yQe,{onOpenKeyShortcutModal:w[1]||(w[1]=M=>s("openKeyShortcutModal"))})])])],2)),[[C(ms),[_,{ignore:["#mobile-sidebar-launcher"]}]]])}}},Xn={ALT:"Alt / ",WIN:"Win / ",SHIFT:"Shift",SLASH:"/",UP:"Up",DOWN:"Down"},uJe=[{id:1,label:"OPEN_CONVERSATION",displayKeys:[Xn.ALT,"J",Xn.SLASH,Xn.ALT,"K"],keySet:["Alt+KeyJ","Alt+KeyK"]},{id:2,label:"RESOLVE_AND_NEXT",displayKeys:[Xn.WIN,Xn.ALT,"E"],keySet:["$mod+Alt+KeyE"]},{id:3,label:"NAVIGATE_DROPDOWN",displayKeys:[Xn.UP,Xn.DOWN],keySet:["ArrowUp","ArrowDown"]},{id:4,label:"RESOLVE_CONVERSATION",displayKeys:[Xn.ALT,"E"],keySet:["Alt+KeyE"]},{id:5,label:"GO_TO_CONVERSATION_DASHBOARD",displayKeys:[Xn.ALT,"C"],keySet:["Alt+KeyC"]},{id:6,label:"ADD_ATTACHMENT",displayKeys:[Xn.WIN,Xn.ALT,"A"],keySet:["$mod+Alt+KeyA"]},{id:7,label:"GO_TO_CONTACTS_DASHBOARD",displayKeys:[Xn.ALT,"V"],keySet:["Alt+KeyV"]},{id:8,label:"TOGGLE_SIDEBAR",displayKeys:[Xn.ALT,"O"],keySet:["Alt+KeyO"]},{id:9,label:"GO_TO_REPORTS_SIDEBAR",displayKeys:[Xn.ALT,"R"],keySet:["Alt+KeyR"]},{id:10,label:"MOVE_TO_NEXT_TAB",displayKeys:[Xn.ALT,"N"],keySet:["Alt+KeyN"]},{id:11,label:"GO_TO_SETTINGS",displayKeys:[Xn.ALT,"S"],keySet:["Alt+KeyS"]},{id:12,label:"SWITCH_TO_PRIVATE_NOTE",displayKeys:[Xn.ALT,"P"],keySet:["Alt+KeyP"]},{id:13,label:"SWITCH_TO_REPLY",displayKeys:[Xn.ALT,"L"],keySet:["Alt+KeyL"]},{id:14,label:"TOGGLE_SNOOZE_DROPDOWN",displayKeys:[Xn.ALT,"M"],keySet:["Alt+KeyM"]}],dJe={class:"flex flex-col h-auto overflow-auto"},pJe={class:"grid grid-cols-2 px-8 pt-0 pb-4 mt-6 gap-x-5 gap-y-3"},mJe={class:"flex justify-between items-center min-w-[25rem]"},hJe={class:"text-sm text-n-slate-12"},fJe={class:"flex items-center gap-2 mb-1 ml-2"},gJe={class:"grid grid-cols-2 px-8 pt-0 pb-8 gap-x-5 gap-y-3"},_Je={class:"text-sm text-n-slate-12 min-w-[36px]"},vJe={class:"flex items-center gap-2 mb-1 ml-2"},EJe={key:1,class:"flex items-center text-sm font-semibold text-n-slate-12"},bJe={__name:"WootKeyShortcutModal",props:{show:Boolean},emits:["close"],setup(e){const{t}=be(),n=j(null),s=y(()=>o=>t(`KEYBOARD_SHORTCUTS.TITLE.${o.label}`)),a=y(()=>o=>n.value===GR&&o.some(i=>VR.has(i)));return lt(async()=>{n.value=await HR()}),(o,i)=>{const l=W("woot-modal-header"),r=W("woot-modal");return p(),L(r,{show:e.show,size:"medium","on-close":()=>o.$emit("close")},{default:Y(()=>[m("div",dJe,[S(l,{"header-title":o.$t("SIDEBAR_ITEMS.KEYBOARD_SHORTCUTS")},null,8,["header-title"]),m("div",pJe,[m("div",mJe,[m("h5",hJe,I(o.$t("KEYBOARD_SHORTCUTS.TOGGLE_MODAL")),1),m("div",fJe,[S(Jl,{"custom-class":"min-h-[28px] min-w-[60px] normal-case key"},{default:Y(()=>[xe(I(C(Xn).WIN),1)]),_:1}),S(Jl,{"custom-class":"min-h-[28px] min-w-[36px] key"},{default:Y(()=>[xe(I(C(Xn).SLASH),1)]),_:1})])])]),m("div",gJe,[(p(!0),E(ue,null,Ae(C(uJe),c=>(p(),E("div",{key:c.id,class:"flex justify-between items-center min-w-[25rem]"},[m("h5",_Je,I(s.value(c)),1),m("div",vJe,[a.value(c.keySet)?(p(),L(Jl,{key:0,"custom-class":"min-h-[28px] min-w-[36px] key"},{default:Y(()=>[xe(I(C(Xn).SHIFT),1)]),_:1})):$("",!0),(p(!0),E(ue,null,Ae(c.displayKeys,(u,d)=>(p(),E(ue,{key:d},[u!==C(Xn).SLASH?(p(),L(Jl,{key:0,"custom-class":"min-h-[28px] min-w-[36px] key normal-case"},{default:Y(()=>[xe(I(u),1)]),_:2},1024)):(p(),E("span",EJe,I(u),1))],64))),128))])]))),128))])])]),_:1},8,["show","on-close"])}}},TJe=De(bJe,[["__scopeId","data-v-5272c311"]]),SJe={components:{NextButton:te},props:{show:{type:Boolean,default:!1},hasAccounts:{type:Boolean,default:!0}},emits:["closeAccountCreateModal"],setup(){return{v$:bt()}},data(){return{accountName:""}},validations(){return{accountName:{required:Ye,minLength:en(1)}}},computed:{...mt({uiFlags:"agents/getUIFlags"})},methods:{async addAccount(){try{const e=await this.$store.dispatch("accounts/create",{account_name:this.accountName});this.$emit("closeAccountCreateModal"),ne(this.$t("CREATE_ACCOUNT.API.SUCCESS_MESSAGE")),window.location=`/app/accounts/${e}/dashboard`}catch(e){e.response.status===422?ne(this.$t("CREATE_ACCOUNT.API.EXIST_MESSAGE")):ne(this.$t("CREATE_ACCOUNT.API.ERROR_MESSAGE"))}}}},AJe={class:"flex flex-col h-auto overflow-auto"},yJe={key:0,class:"mx-8 mt-6 mb-0 text-sm"},IJe={class:"flex items-center rounded-md alert"},CJe={class:"ml-1 mr-3"},NJe={class:"w-full"},OJe=["placeholder"],RJe={class:"w-full flex justify-end gap-2 items-center"};function xJe(e,t,n,s,a,o){const i=W("woot-modal-header"),l=W("fluent-icon"),r=W("NextButton"),c=W("woot-modal");return p(),L(c,{show:n.show,"on-close":()=>e.$emit("closeAccountCreateModal")},{default:Y(()=>[m("div",AJe,[S(i,{"header-title":e.$t("CREATE_ACCOUNT.NEW_ACCOUNT"),"header-content":e.$t("CREATE_ACCOUNT.SELECTOR_SUBTITLE")},null,8,["header-title","header-content"]),n.hasAccounts?$("",!0):(p(),E("div",yJe,[m("div",IJe,[m("div",CJe,[S(l,{icon:"warning"})]),xe(" "+I(e.$t("CREATE_ACCOUNT.NO_ACCOUNT_WARNING")),1)])])),m("form",{class:"flex flex-col w-full",onSubmit:t[3]||(t[3]=Ve((...u)=>o.addAccount&&o.addAccount(...u),["prevent"]))},[m("div",NJe,[m("label",{class:ae({error:s.v$.accountName.$error})},[xe(I(e.$t("CREATE_ACCOUNT.FORM.NAME.LABEL"))+" ",1),re(m("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>a.accountName=u),type:"text",placeholder:e.$t("CREATE_ACCOUNT.FORM.NAME.PLACEHOLDER"),onInput:t[1]||(t[1]=(...u)=>s.v$.accountName.$touch&&s.v$.accountName.$touch(...u))},null,40,OJe),[[gt,a.accountName]])],2)]),m("div",RJe,[S(r,{faded:"",slate:"",type:"reset",label:e.$t("CREATE_ACCOUNT.FORM.CANCEL"),onClick:t[2]||(t[2]=Ve(()=>e.$emit("closeAccountCreateModal"),["prevent"]))},null,8,["label"]),S(r,{type:"submit",label:e.$t("CREATE_ACCOUNT.FORM.SUBMIT"),"is-loading":e.uiFlags.isCreating,disabled:s.v$.accountName.$invalid||s.v$.accountName.$invalid||e.uiFlags.isCreating},null,8,["label","is-loading","disabled"])])],32)])]),_:1},8,["show","on-close"])}const wJe=De(SJe,[["render",xJe]]),$Je={key:0,class:"mx-auto h-full pt-[clamp(3rem,15vh,12rem)]"},MJe={class:"flex flex-col gap-4 max-w-md px-8 py-6 shadow-lg bg-n-solid-1 rounded-xl outline outline-1 outline-n-container"},LJe={class:"flex flex-col gap-4"},DJe={class:"flex items-center w-full gap-2"},PJe={class:"flex items-center justify-center w-6 h-6 rounded-full bg-n-solid-blue"},kJe={class:"text-base font-medium text-n-slate-12"},BJe={class:"text-sm font-normal text-n-slate-11 mb-3"},UJe={key:0},FJe={key:1},GJe={__name:"UpgradePage",props:{bypassUpgradePage:{type:Boolean,default:!1}},setup(e,{expose:t}){const n=e,s=Ft(),a=rt(),{t:o}=be(),{accountId:i,currentAccount:l}=ln(),{isEnterprise:r}=si(),{isAdmin:c}=za(),u=_e("globalConfig/isOnChatwootCloud"),d=({allowed:T,consumed:_})=>_>T,h=y(()=>{const T=l.value;if(!T)return!1;const _=new Date(T.created_at);return bS(new Date,_)<=15}),g=y(()=>{const T=l.value;if(!(T!=null&&T.limits))return"";const{conversation:_,non_web_inboxes:N,agents:R}=T.limits;let O="";return d(_)?O=o("GENERAL_SETTINGS.LIMIT_MESSAGES.CONVERSATION"):d(N)?O=o("GENERAL_SETTINGS.LIMIT_MESSAGES.INBOXES"):d(R)&&(O=o("GENERAL_SETTINGS.LIMIT_MESSAGES.AGENTS",{allowedAgents:R.allowed})),O}),f=y(()=>{const T=l.value;if(!(T!=null&&T.limits))return!1;const{conversation:_,non_web_inboxes:N,agents:R}=T.limits;return d(_)||d(N)||d(R)}),b=y(()=>n.bypassUpgradePage||!u.value||h.value?!1:f.value),A=()=>{a.dispatch("accounts/limits")},v=()=>{s.push({name:"billing_settings_index",params:{accountId:i.value}})};return lt(()=>{r&&A()}),t({shouldShowUpgradePage:b}),(T,_)=>b.value?(p(),E("div",$Je,[m("div",MJe,[m("div",LJe,[m("div",DJe,[m("span",PJe,[S(dt,{class:"flex-shrink-0 text-n-brand size-[14px]",icon:"i-lucide-lock-keyhole"})]),m("span",kJe,I(T.$t("GENERAL_SETTINGS.UPGRADE")),1)]),m("div",null,[m("p",BJe,I(g.value),1),C(c)?$("",!0):(p(),E("p",UJe,I(C(o)("GENERAL_SETTINGS.LIMIT_MESSAGES.NON_ADMIN")),1))])]),C(c)?(p(),L(te,{key:0,label:T.$t("GENERAL_SETTINGS.OPEN_BILLING"),icon:"i-lucide-credit-card",onClick:_[0]||(_[0]=N=>v())},null,8,["label"])):$("",!0)]),We(T.$slots,"default")])):(p(),E("div",FJe))}},VJe={key:0,class:"fixed bottom-4 ltr:right-4 rtl:left-4 z-50"},HJe={__name:"CopilotLauncher",setup(e){const t=wt(),{uiSettings:n,updateUISettings:s}=tn(),a=y(()=>["inbox_conversation","conversation_through_inbox","conversations_through_label","team_conversations_through_label","conversations_through_folders","conversation_through_mentions","conversation_through_unattended","conversation_through_participating","inbox_view_conversation"].includes(t.name)),o=_e("getCurrentAccountId"),i=_e("accounts/isFeatureEnabledonAccount"),l=y(()=>i.value(o.value,ft.CAPTAIN)&&!n.value.is_copilot_panel_open&&!a.value),r=()=>{s({is_copilot_panel_open:!n.value.is_copilot_panel_open,is_contact_sidebar_open:!1})};return(c,u)=>l.value?(p(),E("div",VJe,[S(Yp,{class:"rounded-full bg-n-alpha-2 backdrop-blur-lg p-1 shadow hover:shadow-md"},{default:Y(()=>[S(te,{icon:"i-woot-captain","no-animation":"",class:"!rounded-full !bg-n-solid-3 dark:!bg-n-alpha-2 !text-n-slate-12 text-xl transition-all duration-200 ease-out hover:brightness-110",lg:"",onClick:r})]),_:1})])):(p(),E(ue,{key:1},[],64))}},WJe=["placeholder","onKeydown"],zJe={__name:"CopilotInput",emits:["send"],setup(e,{emit:t}){const n=t,s=j(""),a=j(null),o=()=>{a.value&&(a.value.style.height="auto",a.value.style.height=`${a.value.scrollHeight}px`)},i=()=>{s.value.trim()&&(n("send",s.value),s.value="",Wt(()=>{o()}))},l=()=>{Wt(o)};return lt(()=>{Wt(o)}),(r,c)=>(p(),E("form",{class:"relative",onSubmit:Ve(i,["prevent"])},[re(m("textarea",{ref_key:"textareaRef",ref:a,"onUpdate:modelValue":c[0]||(c[0]=u=>s.value=u),placeholder:r.$t("CAPTAIN.COPILOT.SEND_MESSAGE"),class:"w-full reset-base bg-n-alpha-3 ltr:pl-4 ltr:pr-12 rtl:pl-12 rtl:pr-4 py-3 text-sm border border-n-weak rounded-lg focus:outline-0 focus:outline-none focus:ring-2 focus:ring-n-blue-11 focus:border-n-blue-11 resize-none overflow-hidden max-h-[200px] mb-0 text-n-slate-12",rows:"1",onInput:l,onKeydown:wn(Ve(i,["exact","prevent"]),["enter"])},null,40,WJe),[[gt,s.value]]),c[1]||(c[1]=m("button",{class:"absolute ltr:right-1 rtl:left-1 top-1/2 -translate-y-1/2 h-9 w-10 flex items-center justify-center text-n-slate-11 hover:text-n-blue-11",type:"submit"},[m("i",{class:"i-ph-arrow-up"})],-1))],32))}},YJe={},jJe={class:"flex justify-start"},KJe={class:"flex items-center space-x-2"},XJe={class:"text-n-iris-11 font-medium"};function qJe(e,t,n,s,a,o){return p(),E("div",jJe,[m("div",KJe,[m("span",XJe,I(e.$t("CAPTAIN.COPILOT.LOADER")),1),t[0]||(t[0]=m("div",{class:"flex space-x-1"},[m("div",{class:"w-2 h-2 rounded-full bg-n-iris-9 animate-bounce [animation-delay:-0.3s]"}),m("div",{class:"w-2 h-2 rounded-full bg-n-iris-9 animate-bounce [animation-delay:-0.15s]"}),m("div",{class:"w-2 h-2 rounded-full bg-n-iris-9 animate-bounce"})],-1))])])}const ZJe=De(YJe,[["render",qJe]]),QJe={class:"space-y-1 text-n-slate-12"},JJe={class:"font-medium"},eet={class:"break-words"},tet={__name:"CopilotAgentMessage",props:{message:{type:Object,required:!0}},setup(e){return(t,n)=>(p(),E("div",QJe,[m("div",JJe,I(t.$t("CAPTAIN.COPILOT.YOU")),1),m("div",eet,I(e.message.content),1)]))}},net={class:"flex flex-col gap-1 text-n-slate-12"},set={class:"font-medium"},aet={key:0,class:"text-n-ruby-11"},oet={key:1,class:"prose-sm break-words"},iet={class:"flex flex-row mt-1"},ret={__name:"CopilotAssistantMessage",props:{isLastMessage:{type:Boolean,default:!1},message:{type:Object,required:!0},conversationInboxType:{type:String,required:!0}},setup(e){const t=e,n=y(()=>{var l;return!((l=t.message)!=null&&l.content)}),s=y(()=>!n.value&&t.message.reply_suggestion&&t.isLastMessage),a=y(()=>new np(t.message.content).formattedMessage),o=y(()=>[St.WEB,St.EMAIL].includes(t.conversationInboxType)),i=()=>{var l,r;o.value?Dt.emit(un.INSERT_INTO_RICH_EDITOR,(l=t.message)==null?void 0:l.content):Dt.emit(un.INSERT_INTO_NORMAL_EDITOR,(r=t.message)==null?void 0:r.content),zt(yS.USE_CAPTAIN_RESPONSE)};return(l,r)=>{const c=Qe("dompurify-html");return p(),E("div",net,[m("div",set,I(l.$t("CAPTAIN.NAME")),1),n.value?(p(),E("span",aet,I(l.$t("CAPTAIN.COPILOT.EMPTY_MESSAGE")),1)):re((p(),E("div",oet,null,512)),[[c,a.value]]),m("div",iet,[s.value?(p(),L(te,{key:0,label:l.$t("CAPTAIN.COPILOT.USE"),faded:"",sm:"",slate:"",onClick:i},null,8,["label"])):$("",!0)])])}}},cet={class:"flex flex-col gap-2 p-3 rounded-lg bg-n-background/50 border border-n-weak hover:bg-n-background/80 transition-colors duration-200"},uet={class:"flex items-start gap-2"},det={class:"text-sm text-n-slate-12"},pet={__name:"CopilotThinkingBlock",props:{content:{type:String,required:!0}},setup(e){return(t,n)=>(p(),E("div",cet,[m("div",uet,[S(dt,{icon:"i-lucide-sparkles",class:"w-4 h-4 mt-0.5 flex-shrink-0 text-n-slate-9"}),m("div",det,I(e.content),1)])]))}},met={class:"flex flex-col gap-2"},het={class:"flex items-center gap-2"},fet={class:"inline-flex items-center justify-center h-4 min-w-4 px-1 text-xs font-medium rounded-full bg-n-solid-3 text-n-slate-11"},get={__name:"CopilotThinkingGroup",props:{messages:{type:Array,required:!0},defaultCollapsed:{type:Boolean,default:!1}},setup(e){const t=e,{t:n}=be(),s=j(!t.defaultCollapsed),a=y(()=>t.messages.length);return it(()=>t.defaultCollapsed,o=>{o&&(s.value=!1)}),(o,i)=>(p(),E("div",met,[m("button",{class:"group flex items-center gap-2 text-xs text-n-slate-10 hover:text-n-slate-11 transition-colors duration-200 -ml-3",onClick:i[0]||(i[0]=l=>s.value=!s.value)},[S(dt,{icon:s.value?"i-lucide-chevron-down":"i-lucide-chevron-right",class:"w-4 h-4 transition-transform duration-200 group-hover:scale-110"},null,8,["icon"]),m("span",het,[xe(I(C(n)("CAPTAIN.COPILOT.SHOW_STEPS"))+" ",1),m("span",fet,I(a.value),1)])]),re(m("div",{class:ae(["space-y-3 transition-all duration-200",{"opacity-100":s.value,"opacity-0 max-h-0 overflow-hidden":!s.value}])},[(p(!0),E(ue,null,Ae(e.messages,l=>(p(),L(pet,{key:l.id,content:l.message.content,reasoning:l.message.reasoning},null,8,["content","reasoning"]))),128))],2),[[rn,s.value]])]))}},_et={class:"flex gap-1 justify-between w-full"},vet={class:"items-start flex gap-1 flex-col"},Eet={class:"text-n-slate-12 text-sm"},bet={class:"line-clamp-2 text-n-slate-11 text-xs"},Tet={key:0,class:"flex items-center justify-center flex-shrink-0 w-4 h-4 rounded-full bg-n-slate-12 dark:bg-n-slate-11"},Aet={__name:"ToggleCopilotAssistant",props:{assistants:{type:Array,required:!0},activeAssistant:{type:Object,required:!0}},emits:["setAssistant"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=y(()=>n.activeAssistant?n.activeAssistant.name:a("CAPTAIN.COPILOT.SELECT_ASSISTANT"));return(i,l)=>(p(),E("div",null,[S(Tl,null,{trigger:Y(({toggle:r,isOpen:c})=>[S(te,{label:o.value,icon:"i-woot-captain",ghost:"",slate:"",xs:"",class:ae({"bg-n-alpha-2":c}),onClick:r},null,8,["label","class","onClick"])]),default:Y(()=>[S(Sl,{class:"bottom-9 min-w-64 z-50",strong:""},{default:Y(()=>[S(xr,{class:"[&>ul]:max-h-80"},{default:Y(()=>[(p(!0),E(ue,null,Ae(e.assistants,r=>(p(),L(Ba,{key:r.id,class:"!items-start !gap-1 flex-col cursor-pointer",onClick:()=>s("setAssistant",r)},{label:Y(()=>{var c;return[m("div",_et,[m("div",vet,[m("span",Eet,I(r.name),1),m("span",bet,I(r.description),1)]),r.id===((c=e.activeAssistant)==null?void 0:c.id)?(p(),E("div",Tet,l[0]||(l[0]=[m("i",{class:"i-lucide-check text-white dark:text-n-slate-1 size-3"},null,-1)]))):$("",!0)])]}),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})]))}},yet={class:"flex-1 flex flex-col gap-6 px-2"},Iet={class:"flex flex-col space-y-4 py-4"},Cet={class:"space-y-1"},Net={class:"text-base font-medium text-n-slate-12 leading-8"},Oet={class:"text-sm text-n-slate-11 leading-6"},Ret={key:0,class:"w-full space-y-2"},xet={class:"text-sm text-n-slate-11 leading-6"},wet={key:1,class:"w-full space-y-2"},$et={class:"text-xs text-n-slate-10 block"},Met={class:"space-y-1"},Let=["onClick"],Det={__name:"CopilotEmptyState",props:{hasAssistants:{type:Boolean,default:!1}},emits:["useSuggestion"],setup(e,{emit:t}){const n=t,{t:s}=be(),a=wt(),o={conversations:[{label:"CAPTAIN.COPILOT.PROMPTS.SUMMARIZE.LABEL",prompt:"CAPTAIN.COPILOT.PROMPTS.SUMMARIZE.CONTENT"},{label:"CAPTAIN.COPILOT.PROMPTS.SUGGEST.LABEL",prompt:"CAPTAIN.COPILOT.PROMPTS.SUGGEST.CONTENT"},{label:"CAPTAIN.COPILOT.PROMPTS.RATE.LABEL",prompt:"CAPTAIN.COPILOT.PROMPTS.RATE.CONTENT"}],dashboard:[{label:"CAPTAIN.COPILOT.PROMPTS.HIGH_PRIORITY.LABEL",prompt:"CAPTAIN.COPILOT.PROMPTS.HIGH_PRIORITY.CONTENT"},{label:"CAPTAIN.COPILOT.PROMPTS.LIST_CONTACTS.LABEL",prompt:"CAPTAIN.COPILOT.PROMPTS.LIST_CONTACTS.CONTENT"}]},i=()=>{const c=a.path;return c.includes("/conversations")?"conversations":(c.includes("/dashboard"),"dashboard")},l=y(()=>{const c=i();return o[c]||o.conversations}),r=c=>{n("useSuggestion",s(c.prompt))};return(c,u)=>{const d=W("router-link");return p(),E("div",yet,[m("div",Iet,[S(dt,{icon:"i-woot-captain",class:"text-n-slate-9 text-4xl"}),m("div",Cet,[m("h3",Net,I(c.$t("CAPTAIN.COPILOT.PANEL_TITLE")),1),m("p",Oet,I(c.$t("CAPTAIN.COPILOT.KICK_OFF_MESSAGE")),1)])]),e.hasAssistants?(p(),E("div",wet,[m("span",$et,I(c.$t("CAPTAIN.COPILOT.TRY_THESE_PROMPTS")),1),m("div",Met,[(p(!0),E(ue,null,Ae(l.value,h=>(p(),E("button",{key:h.label,class:"w-full px-3 py-2 rounded-md border border-n-weak bg-n-slate-2 text-n-slate-11 flex items-center justify-between hover:bg-n-slate-3 transition-colors",onClick:g=>r(h)},[m("span",null,I(C(s)(h.label)),1),S(dt,{icon:"i-lucide-chevron-right"})],8,Let))),128))])])):(p(),E("div",Ret,[m("p",xet,I(c.$t("CAPTAIN.ASSISTANTS.NO_ASSISTANTS_AVAILABLE")),1),S(d,{to:{name:"captain_assistants_create_index",params:{accountId:C(a).params.accountId}},class:"text-n-slate-11 underline hover:text-n-slate-12"},{default:Y(()=>[xe(I(c.$t("CAPTAIN.ASSISTANTS.ADD_NEW")),1)]),_:1},8,["to"])]))])}}},Pet={class:"flex flex-col h-full text-sm leading-6 tracking-tight w-full"},ket={key:0,class:"space-y-6 flex-1 flex flex-col w-full"},Bet={class:"mx-3 mt-px mb-2"},Uet={class:"flex items-center gap-2 justify-between w-full mb-1"},Fet={key:1},Get={__name:"Copilot",props:{messages:{type:Array,default:()=>[]},conversationInboxType:{type:String,required:!0},assistants:{type:Array,default:()=>[]},activeAssistant:{type:Object,default:()=>({})}},emits:["sendMessage","reset","setAssistant"],setup(e,{emit:t}){const n=e,s=t,{t:a}=be(),o=A=>{s("sendMessage",A),zt(yS.SEND_MESSAGE)},i=j(null),l=async()=>{await Wt(),i.value&&(i.value.scrollTop=i.value.scrollHeight)},r=y(()=>{const A=[];let v=[];return n.messages.forEach(T=>{T.message_type==="assistant_thinking"?v.push(T):(v.length>0&&(A.push({id:v[0].id,message_type:"thinking_group",messages:v}),v=[]),A.push(T))}),v.length>0&&A.push({id:v[0].id,message_type:"thinking_group",messages:v}),A}),c=y(()=>r.value[r.value.length-1].message_type==="assistant"),{updateUISettings:u}=tn(),d=()=>{u({is_copilot_panel_open:!1,is_contact_sidebar_open:!1})},h=A=>{A==="reset"&&s("reset")},g=y(()=>n.assistants.length>0),f=y(()=>n.messages.length>0),b=y(()=>f.value?[{key:"reset",icon:"i-lucide-refresh-ccw",tooltip:a("CAPTAIN.COPILOT.RESET")}]:[]);return it([()=>n.messages],()=>{l()},{deep:!0}),(A,v)=>(p(),E("div",Pet,[S(LC,{title:A.$t("CAPTAIN.COPILOT.TITLE"),buttons:b.value,onClick:h,onClose:d},null,8,["title","buttons"]),m("div",{ref_key:"chatContainer",ref:i,class:"flex-1 flex px-4 py-4 overflow-y-auto items-start"},[f.value?(p(),E("div",ket,[(p(!0),E(ue,null,Ae(r.value,(T,_)=>(p(),E(ue,{key:T.id},[T.message_type==="user"?(p(),L(tet,{key:0,message:T.message},null,8,["message"])):T.message_type==="assistant"?(p(),L(ret,{key:1,message:T.message,"is-last-message":_===r.value.length-1,"conversation-inbox-type":e.conversationInboxType},null,8,["message","is-last-message","conversation-inbox-type"])):(p(),L(get,{key:2,messages:T.messages,"default-collapsed":c.value},null,8,["messages","default-collapsed"]))],64))),128)),c.value?$("",!0):(p(),L(ZJe,{key:0}))])):(p(),L(Det,{key:1,"has-assistants":g.value,onUseSuggestion:o},null,8,["has-assistants"]))],512),m("div",Bet,[m("div",Uet,[e.assistants.length>1?(p(),L(Aet,{key:0,assistants:e.assistants,"active-assistant":e.activeAssistant,onSetAssistant:v[0]||(v[0]=T=>s("setAssistant",T))},null,8,["assistants","active-assistant"])):(p(),E("div",Fet))]),g.value?(p(),L(zJe,{key:0,class:"mb-1 w-full",onSend:o})):$("",!0)])]))}},Vet={__name:"CopilotContainer",props:{conversationInboxType:{type:String,default:""}},setup(e){const t=rt(),{uiSettings:n,updateUISettings:s}=tn(),{isEnterprise:a}=si(),{width:o}=Di(),i=_e("getCurrentUser"),l=_e("captainAssistants/getRecords"),r=_e("captainAssistants/getUIFlags"),c=_e("getCopilotAssistant"),u=_e("getSelectedChat"),d=y(()=>o.value<yt.SMALL_SCREEN_BREAKPOINT),h=j(null),g=y(()=>t.getters["copilotMessages/getMessagesByThreadId"](h.value)),f=_e("getCurrentAccountId"),b=_e("accounts/isFeatureEnabledonAccount"),A=j(null),v=y(()=>{const x=n.value.preferred_captain_assistant_id;if(x){const w=l.value.find(D=>D.id===x);if(w)return w}if(c.value){const w=l.value.find(D=>D.id===c.value.id);if(w)return w}return l.value[0]}),T=()=>{var x;d.value&&((x=n.value)!=null&&x.is_copilot_panel_open)&&s({is_contact_sidebar_open:!1,is_copilot_panel_open:!1})},_=async x=>{A.value=x.id,await s({preferred_captain_assistant_id:x.id})},N=y(()=>{if(!a)return!1;const x=b.value(f.value,ft.CAPTAIN),{is_copilot_panel_open:w}=n.value;return x&&w&&!r.value.fetchingList}),R=()=>{h.value=null},O=async x=>{var w,D;try{if(h.value)await t.dispatch("copilotMessages/create",{assistant_id:v.value.id,conversation_id:(w=u.value)==null?void 0:w.id,threadId:h.value,message:x});else{const M=await t.dispatch("copilotThreads/create",{assistant_id:v.value.id,conversation_id:(D=u.value)==null?void 0:D.id,message:x});h.value=M.id}}catch(M){ne(M.message)}};return lt(()=>{a&&t.dispatch("captainAssistants/get")}),(x,w)=>N.value?re((p(),E("div",{key:0,class:ae(["bg-n-background h-full overflow-hidden flex-col fixed top-0 ltr:right-0 rtl:left-0 z-40 w-full max-w-sm transition-transform duration-300 ease-in-out md:static md:w-[320px] md:min-w-[320px] ltr:border-l rtl:border-r border-n-weak 2xl:min-w-[360px] 2xl:w-[360px] shadow-lg md:shadow-none",[{"md:flex":N.value,"md:hidden":!N.value}]])},[S(Get,{messages:g.value,"support-agent":C(i),"conversation-inbox-type":e.conversationInboxType,assistants:C(l),"active-assistant":v.value,onSetAssistant:_,onSendMessage:O,onReset:R},null,8,["messages","support-agent","conversation-inbox-type","assistants","active-assistant"])],2)),[[C(ms),()=>T()]]):(p(),E(ue,{key:1},[],64))}},Het={__name:"MobileSidebarLauncher",props:{isMobileSidebarOpen:{type:Boolean,default:!1}},emits:["toggle"],setup(e,{emit:t}){const n=t,s=wt(),a=y(()=>["inbox_conversation","conversation_through_inbox","conversations_through_label","team_conversations_through_label","conversations_through_folders","conversation_through_mentions","conversation_through_unattended","conversation_through_participating","inbox_view_conversation"].includes(s.name)),o=()=>{n("toggle")};return(i,l)=>a.value?(p(),E(ue,{key:1},[],64)):(p(),E("div",{key:0,id:"mobile-sidebar-launcher",class:ae(["fixed bottom-4 ltr:left-4 rtl:right-4 z-40 transition-transform duration-200 ease-in-out block md:hidden",[{"ltr:translate-x-48 rtl:-translate-x-48":e.isMobileSidebarOpen}]])},[S(Yp,{class:"rounded-full bg-n-alpha-2 backdrop-blur-lg p-1 shadow hover:shadow-md"},{default:Y(()=>[S(te,{icon:"i-lucide-menu","no-animation":"",class:"!rounded-full !bg-n-solid-3 dark:!bg-n-alpha-2 !text-n-slate-12 text-xl transition-all duration-200 ease-out hover:brightness-110",lg:"",onClick:o})]),_:1})],2))}},Wet=lg(()=>ti(()=>import("./commandbar-SjAndIwe.js"),__vite__mapDeps([37,3,2,4,5,7,8,9,19,17,18,10,13,20,6,1,11,23,24,12,25,26,27,38]))),zet={components:{NextSidebar:cJe,CommandBar:Wet,WootKeyShortcutModal:TJe,AddAccountModal:wJe,UpgradePage:GJe,CopilotLauncher:HJe,CopilotContainer:Vet,MobileSidebarLauncher:Het},setup(){const e=j(null),{uiSettings:t,updateUISettings:n}=tn(),{accountId:s}=ln(),{width:a}=Di();return{uiSettings:t,updateUISettings:n,accountId:s,upgradePageRef:e,windowWidth:a}},data(){return{showAccountModal:!1,showCreateAccountModal:!1,showShortcutModal:!1,isMobileSidebarOpen:!1}},computed:{isSmallScreen(){return this.windowWidth<yt.SMALL_SCREEN_BREAKPOINT},showUpgradePage(){var e;return(e=this.upgradePageRef)==null?void 0:e.shouldShowUpgradePage},bypassUpgradePage(){return["billing_settings_index","settings_inbox_list","general_settings_index","agent_list"].includes(this.$route.name)},previouslyUsedDisplayType(){const{previously_used_conversation_display_type:e}=this.uiSettings;return e}},watch:{isSmallScreen:{handler(){const{LAYOUT_TYPES:e}=yt;window.innerWidth<=yt.SMALL_SCREEN_BREAKPOINT?this.updateUISettings({conversation_display_type:e.EXPANDED}):this.updateUISettings({conversation_display_type:this.previouslyUsedDisplayType})},immediate:!0}},methods:{toggleMobileSidebar(){this.isMobileSidebarOpen=!this.isMobileSidebarOpen},closeMobileSidebar(){this.isMobileSidebarOpen=!1},openCreateAccountModal(){this.showAccountModal=!1,this.showCreateAccountModal=!0},closeCreateAccountModal(){this.showCreateAccountModal=!1},toggleAccountModal(){this.showAccountModal=!this.showAccountModal},toggleKeyShortcutModal(){this.showShortcutModal=!0},closeKeyShortcutModal(){this.showShortcutModal=!1}}},Yet={class:"flex flex-grow overflow-hidden text-n-slate-12"},jet={class:"flex flex-1 h-full w-full min-h-0 px-0 overflow-hidden"};function Ket(e,t,n,s,a,o){const i=W("NextSidebar"),l=W("MobileSidebarLauncher"),r=W("UpgradePage"),c=W("router-view"),u=W("CommandBar"),d=W("CopilotLauncher"),h=W("CopilotContainer"),g=W("AddAccountModal"),f=W("WootKeyShortcutModal");return p(),E("div",Yet,[S(i,{"is-mobile-sidebar-open":a.isMobileSidebarOpen,onToggleAccountModal:o.toggleAccountModal,onOpenKeyShortcutModal:o.toggleKeyShortcutModal,onCloseKeyShortcutModal:o.closeKeyShortcutModal,onShowCreateAccountModal:o.openCreateAccountModal,onCloseMobileSidebar:o.closeMobileSidebar},null,8,["is-mobile-sidebar-open","onToggleAccountModal","onOpenKeyShortcutModal","onCloseKeyShortcutModal","onShowCreateAccountModal","onCloseMobileSidebar"]),m("main",jet,[re(S(r,{ref:"upgradePageRef","bypass-upgrade-page":o.bypassUpgradePage},{default:Y(()=>[S(l,{"is-mobile-sidebar-open":a.isMobileSidebarOpen,onToggle:o.toggleMobileSidebar},null,8,["is-mobile-sidebar-open","onToggle"])]),_:1},8,["bypass-upgrade-page"]),[[rn,o.showUpgradePage]]),o.showUpgradePage?$("",!0):(p(),E(ue,{key:0},[S(c),S(u),S(d),S(l,{"is-mobile-sidebar-open":a.isMobileSidebarOpen,onToggle:o.toggleMobileSidebar},null,8,["is-mobile-sidebar-open","onToggle"]),S(h)],64)),S(g,{show:a.showCreateAccountModal,onCloseAccountCreateModal:o.closeCreateAccountModal},null,8,["show","onCloseAccountCreateModal"]),S(f,{show:a.showShortcutModal,"onUpdate:show":t[0]||(t[0]=b=>a.showShortcutModal=b),onClose:o.closeKeyShortcutModal,onClickaway:o.closeKeyShortcutModal},null,8,["show","onClose","onClickaway"])])])}const Xet=De(zet,[["render",Ket]]),qet={class:"items-center bg-n-slate-2 flex justify-center h-full w-full"},Zet={__name:"Index",setup(e){const t=()=>{window.$chatwoot&&window.$chatwoot.toggleBubbleVisibility("show")},n=()=>{window.addEventListener("chatwoot:on-message",()=>{t()})};return lt(()=>{t(),n()}),(s,a)=>(p(),E("div",qet,[S(Il,{title:s.$t("APP_GLOBAL.ACCOUNT_SUSPENDED.TITLE"),message:s.$t("APP_GLOBAL.ACCOUNT_SUSPENDED.MESSAGE")},null,8,["title","message"])]))}},Qet={class:"flex flex-col flex-1 items-center justify-center w-full h-full gap-6 bg-n-slate-2"},Jet={__name:"Index",setup(e){const{t}=be(),n=_e("globalConfig/isOnChatwootCloud"),s=y(()=>n.value?t("APP_GLOBAL.NO_ACCOUNTS.MESSAGE_CLOUD"):t("APP_GLOBAL.NO_ACCOUNTS.MESSAGE_SELF_HOSTED")),a=()=>{hl.logout()};return(o,i)=>(p(),E("div",Qet,[S(Il,{title:o.$t("APP_GLOBAL.NO_ACCOUNTS.TITLE"),message:s.value},null,8,["title","message"]),S(te,{variant:"smooth","color-scheme":"secondary",label:o.$t("APP_GLOBAL.NO_ACCOUNTS.LOGOUT"),onClick:a},null,8,["label"])]))}},ett={routes:[{path:vt("accounts/:accountId"),component:Xet,children:[...HZe,...WHe,...cBe.routes,...kTe.routes,...rGe,...qGe,...v6e,...TVe,...MWe.routes,...cYe.routes]},{path:vt("accounts/:accountId/suspended"),name:"account_suspended",meta:{permissions:["administrator","agent","custom_role"]},component:Zet},{path:vt("no-accounts"),name:"no_accounts",component:Jet}]},ttt=[...ett.routes],ps=dO({history:pO(),routes:ttt}),ntt=(e,t)=>{const{isLoggedIn:n,getCurrentUser:s}=fl.getters;if(!n)return window.location.assign("/app/login"),"";const{accounts:a=[],account_id:o}=s;if(!a.length)return e.name==="no_accounts"?t():t(vt("no-accounts"));if(e.name==="no_accounts"||!e.name)return t(vt(`accounts/${o}/dashboard`));const i=GP(e,fl.getters.getCurrentUser);return i?t(vt(i)):t()},stt=()=>{const e=fl.dispatch("setUser");ps.beforeEach((t,n,s)=>{hR.page(t.name||"",{path:t.path,name:t.name}),e.then(()=>ntt(t,s))})},att=ON({legacy:!1,locale:"en",messages:mR});U5(fl,ps);const la=nS(P5);la.use(att);la.use(fl);la.use(ps);window.errorLoggingConfig&&oR({app:la,dsn:window.errorLoggingConfig,denyUrls:[/^chrome:\/\//i,/chrome-extension:/i,/extensions\//i,/file:\/\//i,/safari-web-extension:/i,/safari-extension:/i],integrations:[iR({router:ps})],ignoreErrors:["ResizeObserver loop completed with undelivered notifications"]});la.use(zR,YR);la.use(F0);la.use(oO,iO({rules:{JSON:({value:e})=>lR(e)}}));la.use(r$,{instantMove:!0,arrowOverflow:!1,disposeTimeout:5e6});la.use(Gx);la.component("multiselect",jS);la.component("woot-wizard",lw);la.component("fluent-icon",rR);la.directive("resize",cR);la.directive("on-clickaway",jR);uR();window.WootConstants=yt;window.axios=B5(dg);dR();pR();stt();window.onload=()=>{la.mount("#app")};export{Utt as A,V1 as B,Btt as C,cu as D,jg as E,Jb as F,za as G,ft as H,Kb as I,jb as J,Xb as K,Ftt as L,rAe as M,cAe as N,lAe as O,Qb as P,qb as Q,Zb as R,t3e as S,hu as T,yC as U,uAe as V,Yg as W,qT as _,ktt as a,xFe as b,qs as c,ZT as d,Do as e,nNe as f,Ptt as g,Gtt as h,sNe as i,ml as j,oCe as k,N2e as l,Yp as m,lo as n,vu as o,ag as p,Ltt as q,ba as r,Tt as s,Al as t,tn as u,Ha as v,q$ as w,PI as x,TWe as y,cv as z};
