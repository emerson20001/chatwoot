<div class="cw-container mx-auto max-w-4xl py-8 px-6">
  <h1 class="text-2xl font-semibold text-slate-900 mb-6">
    <%= t('admin.branding.title') %>
  </h1>

  <p class="text-sm text-slate-600 mb-4">
    <%= t('admin.branding.description') %>
  </p>
  <div class="mb-8 rounded-lg border border-slate-200 bg-slate-50 p-4 text-sm text-slate-600">
    <span class="block font-semibold text-slate-900"><%= t('admin.branding.account_label') %></span>
    <span class="block">
      <%= @account&.name.presence || t('admin.branding.account_fallback', id: @account&.id) %>
    </span>
    <span class="mt-2 block font-semibold text-slate-900"><%= t('admin.branding.domain_label') %></span>
    <span class="block">
      <%= @domain_label.presence || t('admin.branding.default_domain') %>
    </span>
    <span class="mt-2 block text-xs text-slate-500">
      <%= t('admin.branding.domain_hint') %>
    </span>
  </div>

  <%= form_with url: admin_branding_path(account_id: @account&.id), method: :put, multipart: true, local: true do %>
    <%= hidden_field_tag :account_id, @account&.id %>
    <% Admin::BrandingController::BRANDING_CONFIGS.each do |key, config_name| %>
      <% current_value = @resolved_branding[key] %>
      <div class="mb-8 border border-slate-200 rounded-lg p-4">
        <h2 class="text-lg font-medium text-slate-900 mb-4">
          <%= config_name.humanize %>
        </h2>

        <% if current_value.present? %>
          <div class="mb-4">
            <span class="text-xs uppercase text-slate-500 block mb-1"><%= t('admin.branding.current_label') %></span>
            <div class="flex items-center gap-4">
              <img src="<%= current_value %>" alt="<%= config_name %>" class="h-16 w-auto rounded border bg-white p-1" />
              <span class="text-xs text-slate-500 break-all"><%= current_value %></span>
            </div>
          </div>
        <% end %>

        <div class="mb-4">
          <label class="block text-sm font-medium text-slate-700 mb-1">
            <%= t('admin.branding.upload_label') %>
          </label>
          <input type="file" name="branding[<%= key %>][file]" class="block w-full text-sm text-slate-600" />
        </div>

        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">
            <%= t('admin.branding.url_label') %>
          </label>
          <input
            type="text"
            name="branding[<%= key %>][url]"
            placeholder="<%= t('admin.branding.url_placeholder') %>"
            class="cw-input w-full"
          />
        </div>
      </div>
    <% end %>

    <div class="flex justify-end">
      <button
        type="submit"
        class="cw-button cw-button--primary"
      >
        <%= t('admin.branding.save_button') %>
      </button>
    </div>
  <% end %>
</div>
