<div class="cw-container mx-auto max-w-4xl py-8 px-6">
  <h1 class="text-2xl font-semibold text-slate-900 mb-6">
    Branding
  </h1>

  <p class="text-sm text-slate-600 mb-4">
    Faça upload de novas logos ou informe um URL externo. Deixe o campo em branco para manter o valor atual.
  </p>
  <div class="mb-8 rounded-lg border border-slate-200 bg-slate-50 p-4 text-sm text-slate-600">
    <span class="block font-semibold text-slate-900">Conta selecionada</span>
    <span class="block">
      <%= @account&.name.presence || "Account ##{@account&.id}" %>
    </span>
    <span class="mt-2 block font-semibold text-slate-900">Domínio de referência</span>
    <span class="block">
      <%= @domain_label.presence || 'default' %>
    </span>
    <span class="mt-2 block text-xs text-slate-500">
      Cada conta tem logos e favicons independentes. Use um domínio dedicado se quiser URLs diferentes por host.
    </span>
  </div>

  <%= form_with url: admin_branding_path(account_id: @account&.id), method: :put, multipart: true, local: true do %>
    <%= hidden_field_tag :account_id, @account&.id %>
    <% Admin::BrandingController::BRANDING_CONFIGS.each do |key, config_name| %>
      <% current_value = @resolved_branding[key] %>
      <div class="mb-8 border border-slate-200 rounded-lg p-4">
        <h2 class="text-lg font-medium text-slate-900 mb-4">
          <%= config_name.humanize %>
        </h2>

        <% if current_value.present? %>
          <div class="mb-4">
            <span class="text-xs uppercase text-slate-500 block mb-1">Atual</span>
            <div class="flex items-center gap-4">
              <img src="<%= current_value %>" alt="<%= config_name %>" class="h-16 w-auto rounded border bg-white p-1" />
              <span class="text-xs text-slate-500 break-all"><%= current_value %></span>
            </div>
          </div>
        <% end %>

        <div class="mb-4">
          <label class="block text-sm font-medium text-slate-700 mb-1">
            Upload
          </label>
          <input type="file" name="branding[<%= key %>][file]" class="block w-full text-sm text-slate-600" />
        </div>

        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">
            URL personalizada
          </label>
          <input
            type="text"
            name="branding[<%= key %>][url]"
            placeholder="https://sua-cdn.com/logo.png"
            class="cw-input w-full"
          />
        </div>
      </div>
    <% end %>

    <div class="flex justify-end">
      <button
        type="submit"
        class="cw-button cw-button--primary"
      >
        Salvar alterações
      </button>
    </div>
  <% end %>
</div>
